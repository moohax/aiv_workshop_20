Microsoft.DHCP.PowerShell.Admin.psm1,09dec37478fa8db1cf3bd9eacbcc4f34,Scan result is 1. IsMalware: 0,Iz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IyAKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBQb3dlcnNoZWxsIE1vZHVsZSBmb3IgREhDUCBBZG1pbmlzdHJhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBBdXRob3I6IEplcmVteSBFbmdlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBDcmVhdGlvbiBEYXRlOiAxMi4xNi4yMDEwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBNb2RpZmllZCBEYXRlOiAwNi4yMi4yMDExICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyBWZXJzaW9uOiAxLjguMiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyAKIz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IyAKIApBZGQtVHlwZSAtVHlwZURlZmluaXRpb24gQCIgCiAgcHVibGljIHN0cnVjdCBESENQRE5TQ29uZmlndXJhdGlvbiB7IAogICAgcHVibGljIHN0cmluZyBMZXZlbDsgCiAgICBwdWJsaWMgYm9vbCBBbGxvd0R5bmFtaWNVcGRhdGU7IAogICAgcHVibGljIHN0cmluZyBVcGRhdGVUcmlnZ2VyOyAKICAgIHB1YmxpYyBib29sIERpc2NhcmRTdGFsZVJlY29yZHM7IAogICAgcHVibGljIGJvb2wgQWxsb3dMZWdhY3lDbGllbnRVcGRhdGU7IAogICAgcHVibGljIGludCBWYWx1ZTsgCiAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKCkgeyAKICAgICAgc3dpdGNoKFZhbHVlKSB7IAogICAgICAgIGNhc2UgLTE6IHJldHVybiAoTGV2ZWw9PSJTZXJ2ZXIiKT8iKERlZmF1bHQpIFVwZGF0ZSBieSBDbGllbnQgUmVxdWVzdCBXaXRoIENsZWFudXAiOiJJbmhlcml0ZWQgZnJvbSBQYXJlbnQiOyAKICAgICAgICBjYXNlIDA6IHJldHVybiAiRHluYW1pYyBVcGRhdGVzIERpc2FibGVkIjsgCiAgICAgICAgY2FzZSAxOiByZXR1cm4gIlVwZGF0ZSBieSBDbGllbnQgUmVxdWVzdCBXaXRob3V0IENsZWFudXAiOyAKICAgICAgICBjYXNlIDI6IHJldHVybiAiRHluYW1pYyBVcGRhdGVzIERpc2FibGVkIjsgCiAgICAgICAgY2FzZSAzOiByZXR1cm4gIlVwZGF0ZSBMZWdhY3kgQ2xpZW50cyBhbmQgYnkgQ2xpZW50IFJlcXVlc3QgV2l0aG91dCBDbGVhbnVwIjsgCiAgICAgICAgY2FzZSA0OiByZXR1cm4gIkR5bmFtaWMgVXBkYXRlcyBEaXNhYmxlZCI7IAogICAgICAgIGNhc2UgNTogcmV0dXJuICJVcGRhdGUgYnkgQ2xpZW50IFJlcXVlc3QgV2l0aCBDbGVhbnVwIjsgCiAgICAgICAgY2FzZSA2OiByZXR1cm4gIkR5bmFtaWMgVXBkYXRlcyBEaXNhYmxlZCI7IAogICAgICAgIGNhc2UgNzogcmV0dXJuICJVcGRhdGUgTGVnYWN5IENsaWVudHMgYW5kIGJ5IENsaWVudCBSZXF1ZXN0IFdpdGggQ2xlYW51cCI7IAogICAgICAgIGNhc2UgMTY6IHJldHVybiAiRHluYW1pYyBVcGRhdGVzIERpc2FibGVkIjsgCiAgICAgICAgY2FzZSAxNzogcmV0dXJuICJBbHdheXMgVXBkYXRlIENsaWVudHMgV2l0aG91dCBDbGVhbnVwIjsgCiAgICAgICAgY2FzZSAxODogcmV0dXJuICJEeW5hbWljIFVwZGF0ZXMgRGlzYWJsZWQiOyAKICAgICAgICBjYXNlIDE5OiByZXR1cm4gIkFsd2F5cyBVcGRhdGUgW0xlZ2FjeV0gQ2xpZW50cyBXaXRob3V0IENsZWFudXAiOyAKICAgICAgICBjYXNlIDIwOiByZXR1cm4gIkR5bmFtaWMgVXBkYXRlcyBEaXNhYmxlZCI7IAogICAgICAgIGNhc2UgMjE6IHJldHVybiAiQWx3YXlzIFVwZGF0ZSBDbGllbnRzIFdpdGggQ2xlYW51cCI7IAogICAgICAgIGNhc2UgMjI6IHJldHVybiAiRHluYW1pYyBVcGRhdGVzIERpc2FibGVkIjsgCiAgICAgICAgY2FzZSAyMzogcmV0dXJuICJBbHdheXMgVXBkYXRlIFtMZWdhY3ldIENsaWVudHMgV2l0aCBDbGVhbnVwIjsgCiAgICAgICAgZGVmYXVsdDogcmV0dXJuICJJbnZhbGlkIENvbmZpZ3VyYXRpb24iOyAKICAgICAgICB9IAogICAgICB9IAogICAgfSAKIAogIHB1YmxpYyBzdHJ1Y3QgREhDUEZpbHRlciB7IAogICAgcHVibGljIHN0cmluZyBNQUNBZGRyZXNzOyAKICAgIHB1YmxpYyBzdHJpbmcgRGVzY3JpcHRpb247IAogICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpIHsgcmV0dXJuIE1BQ0FkZHJlc3M7IH0gCiAgICB9IAogCiAgcHVibGljIHN0cnVjdCBESENQRmlsdGVyQ29uZmlndXJhdGlvbiB7IAogICAgcHVibGljIHN0cmluZyBTZXJ2ZXI7IAogICAgcHVibGljIHN0cmluZyBBbGxvd0xpc3Q7IAogICAgcHVibGljIHN0cmluZyBEZW55TGlzdDsgCiAgICBwdWJsaWMgREhDUEZpbHRlcltdIEFsbG93RmlsdGVyczsgCiAgICBwdWJsaWMgREhDUEZpbHRlcltdIERlbnlGaWx0ZXJzOyAgICAgCiAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKCkgeyByZXR1cm4gIkFsbG93TGlzdCAtICIrQWxsb3dMaXN0KyJcclxuRGVueUxpc3QgLSAiK0RlbnlMaXN0OyB9IAogICAgfSAKIAogIHB1YmxpYyBzdHJ1Y3QgREhDUElQUmFuZ2UgeyAKICAgIHB1YmxpYyBzdHJpbmcgU3RhcnRBZGRyZXNzOyAKICAgIHB1YmxpYyBzdHJpbmcgRW5kQWRkcmVzczsgCiAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKCkgeyByZXR1cm4gU3RhcnRBZGRyZXNzKyIgLSAiK0VuZEFkZHJlc3M7IH0gCiAgICB9IAogICAKICBwdWJsaWMgc3RydWN0IERIQ1BPcHRpb24geyAKICAgIHB1YmxpYyBpbnQgT3B0aW9uSUQ7IAogICAgcHVibGljIHN0cmluZyBPcHRpb25OYW1lOyAKICAgIHB1YmxpYyBzdHJpbmcgQXJyYXlUeXBlOyAKICAgIHB1YmxpYyBzdHJpbmcgT3B0aW9uVHlwZTsgCiAgICBwdWJsaWMgc3RyaW5nW10gVmFsdWVzOyAKICAgIHB1YmxpYyBzdHJpbmcgTGV2ZWw7IAogICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpIHsgcmV0dXJuIE9wdGlvbk5hbWU7IH0gCiAgICB9IAogCiAgcHVibGljIHN0cnVjdCBESENQUmVzZXJ2YXRpb24geyAKICAgIHB1YmxpYyBzdHJpbmcgSVBBZGRyZXNzOyAKICAgIHB1YmxpYyBzdHJpbmcgTUFDQWRkcmVzczsgCiAgICBwdWJsaWMgc3RyaW5nIFNjb3BlOyAKICAgIHB1YmxpYyBzdHJpbmcgU2VydmVyOyAKICAgIHB1YmxpYyBESENQT3B0aW9uW10gT3B0aW9uczsgCiAgICBwdWJsaWMgREhDUEROU0NvbmZpZ3VyYXRpb24gRE5TQ29uZmlndXJhdGlvbjsgCiAgICBwdWJsaWMgb3ZlcnJpZGUgc3RyaW5nIFRvU3RyaW5nKCkgeyByZXR1cm4gSVBBZGRyZXNzOyB9IAogICAgfSAKIAogIHB1YmxpYyBzdHJ1Y3QgREhDUFNjb3BlIHsgCiAgICBwdWJsaWMgc3RyaW5nIEFkZHJlc3M7IAogICAgcHVibGljIHN0cmluZyBTdWJuZXRNYXNrOyAKICAgIHB1YmxpYyBzdHJpbmcgTmFtZTsgCiAgICBwdWJsaWMgc3RyaW5nIERlc2NyaXB0aW9uOyAKICAgIHB1YmxpYyBzdHJpbmcgU3RhdGU7IAogICAgcHVibGljIHN0cmluZyBTZXJ2ZXI7IAogICAgcHVibGljIERIQ1BJUFJhbmdlW10gSVBSYW5nZXM7IAogICAgcHVibGljIERIQ1BJUFJhbmdlW10gRXhjbHVzaW9uUmFuZ2VzOyAKICAgIHB1YmxpYyBESENQUmVzZXJ2YXRpb25bXSBSZXNlcnZhdGlvbnM7IAogICAgcHVibGljIGludCBMZWFzZTsgCiAgICBwdWJsaWMgREhDUE9wdGlvbltdIE9wdGlvbnM7IAogICAgcHVibGljIERIQ1BETlNDb25maWd1cmF0aW9uIEROU0NvbmZpZ3VyYXRpb247IAogICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpIHsgcmV0dXJuIEFkZHJlc3M7IH0gCiAgICB9IAogCiAgcHVibGljIHN0cnVjdCBESENQU2VydmVyIHsgCiAgICBwdWJsaWMgc3RyaW5nIE5hbWU7IAogICAgcHVibGljIHN0cmluZyBJUEFkZHJlc3M7IAogICAgcHVibGljIERIQ1BETlNDb25maWd1cmF0aW9uIEROU0NvbmZpZ3VyYXRpb247IAogICAgcHVibGljIGludCBDb25mbGljdERldGVjdGlvbkF0dGVtcHRzOyAKICAgIHB1YmxpYyBESENQU2NvcGVbXSBTY29wZXM7IAogICAgcHVibGljIERIQ1BPcHRpb25bXSBPcHRpb25zOyAKICAgIHB1YmxpYyBvdmVycmlkZSBzdHJpbmcgVG9TdHJpbmcoKSB7IHJldHVybiBOYW1lOyB9IAogICAgfSAKIAogIHB1YmxpYyBzdHJ1Y3QgREhDUFNjb3BlU3RhdGlzdGljcyB7IAogICAgcHVibGljIHN0cmluZyBTY29wZTsgCiAgICBwdWJsaWMgc3RyaW5nIFNlcnZlcjsgCiAgICBwdWJsaWMgaW50IFRvdGFsQWRkcmVzc2VzOyAKICAgIHB1YmxpYyBpbnQgVXNlZEFkZHJlc3NlczsgCiAgICBwdWJsaWMgaW50IFBlbmRpbmdPZmZlcnM7IAogICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpIHsgcmV0dXJuIFNjb3BlOyB9IAogICAgfSAKIAogIHB1YmxpYyBzdHJ1Y3QgREhDUFNlcnZlclN0YXRpc3RpY3MgeyAKICAgIHB1YmxpYyBzdHJpbmcgU2VydmVyOyAKICAgIHB1YmxpYyBpbnQgRGlzY292ZXJzOyAKICAgIHB1YmxpYyBpbnQgT2ZmZXJzOyAKICAgIHB1YmxpYyBpbnQgUmVxdWVzdHM7IAogICAgcHVibGljIGludCBBY2tzOyAKICAgIHB1YmxpYyBpbnQgTmFrczsgCiAgICBwdWJsaWMgaW50IERlY2xpbmVzOyAKICAgIHB1YmxpYyBpbnQgUmVsZWFzZXM7IAogICAgcHVibGljIFN5c3RlbS5EYXRlVGltZSBTdGFydFRpbWU7IAogICAgcHVibGljIGludCBTY29wZXM7IAogICAgcHVibGljIERIQ1BTY29wZVN0YXRpc3RpY3NbXSBTY29wZVN0YXRpc3RpY3M7IAogICAgcHVibGljIG92ZXJyaWRlIHN0cmluZyBUb1N0cmluZygpIHsgcmV0dXJuIFNlcnZlcjsgfSAKICAgIH0gCiJAIAogCmZ1bmN0aW9uIEFkZC1ESENQRXhjbHVzaW9uUmFuZ2UgeyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBBZGRzIGFuIGV4Y2x1c2lvbiByYW5nZSB0byBhIERIQ1Agc2NvcGUuIAogICAgLkV4YW1wbGUgCiAgICAgQWRkLURIQ1BFeGNsdXNpb25SYW5nZSAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtU2NvcGUgMTkyLjE2OC4xLjAgLVN0YXJ0QWRkcmVzcyAxOTIuMTY4LjEuMjAwIC1FbmRBZGRyZXNzIDE5Mi4xNjguMS4yNTQgCiAgICAgVGhpcyBleGFtcGxlIGFkZHMgYW4gZXhjbHVzaW9uIHJhbmdlIHRvIHRoZSAxOTIuMTY4LjEuMCBzY29wZSBvbiBkaGNwMDEuY29udG9zby5jb20gdGhhdCBpcyBiZXR3ZWVuIDE5Mi4xNjguMS4yMDAgYW5kIDE5Mi4xNjguMS4yNTQuIAogICAgLkV4YW1wbGUgCiAgICAgJHNjb3BlIHwgQWRkLURIQ1BFeGNsdXNpb25SYW5nZSAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMS4yMDAgLUVuZEFkZHJlc3MgMTkyLjE2OC4xLjI1NCAKICAgICBHaXZlbiB0aGF0ICRzY29wZSBpcyB0aGUgREhDUFNjb3BlIG9iamVjdCBmb3Igc3VibmV0IDE5Mi4xNjguMS4wIG9uIGRoY3AwMS5jb250b3NvLmNvbSwgdGhpcyBleGFtcGxlIGFjY29tcGxpc2hlcyB0aGUgc2FtZSBhcyB0aGUgb25lIGluIEV4YW1wbGUgMS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIEFkZC1ESENQRXhjbHVzaW9uUmFuZ2UgY21kbGV0IGlzIHVzZWQgdG8gZGVmaW5lIGEgbmV3IGV4Y2x1c2lvbiByYW5nZSB3aXRoaW4gYSBnaXZlbiBESENQIHNjb3BlLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIHRoZSBwYXJlbnQgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKIAogICAgIE5vdGU6IFRoaXMgY21kbGV0IHdpbGwgcHJvY2VzcyBzaWduaWZpY2FudGx5IGZhc3RlciBpZiB0aGUgU2NvcGUgdmFyaWFibGUgc3VwcGxpZWQgaXMgYSBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU3RhcnRBZGRyZXNzIAogICAgIFRoaXMgcGFyYW1ldGVyIHNpZ25pZmllcyB0aGUgYmVnaW5uaW5nIG9mIHRoZSByYW5nZSBvZiBJUHMgdGhhdCB5b3Ugd2FudCBleGNsdWRlZCBmcm9tIHRoZSBhZGRyZXNzZXMgYXZhaWxhYmxlIGZvciBsZWFzZS4gVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5QYXJhbWV0ZXIgRW5kQWRkcmVzcyAKICAgICBUaGlzIHBhcmFtZXRlciBzaWduaWZpZXMgdGhlIGVuZCBvZiB0aGUgcmFuZ2Ugb2YgSVBzIHRoYXQgeW91IHdhbnQgZXhjbHVkZWQgZnJvbSB0aGUgYWRkcmVzc2VzIGF2YWlsYWJsZSBmb3IgbGVhc2UuIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSBpbiBhbiBJUCBhZGRyZXNzIHN0cmluZyBmb3JtYXQgKGllOiAwLjAuMC4wKS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2NvcGUgCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBBZGQtREhDUEV4Y2x1c2lvblJhbmdlIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJFN0YXJ0QWRkcmVzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJEVuZEFkZHJlc3MgCiAgICAgICAgKSAKICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSAtYW5kICEkU2VydmVyKSB7ICRTZXJ2ZXIgPSAkU2NvcGUuU2VydmVyIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNjb3BlICRTY29wZSBhZGQgZXhjbHVkZXJhbmdlICRTdGFydEFkZHJlc3MgJEVuZEFkZHJlc3MiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyAKICAgICAgJHJhbmdlID0gTmV3LU9iamVjdCBESENQSVBSYW5nZSAKICAgICAgJHJhbmdlLlN0YXJ0QWRkcmVzcyA9ICRTdGFydEFkZHJlc3MgCiAgICAgICRyYW5nZS5FbmRBZGRyZXNzID0gJEVuZEFkZHJlc3MgCiAgICAgICRTY29wZS5FeGNsdXNpb25SYW5nZXMgKz0gJHJhbmdlIAogICAgICByZXR1cm4gJFNjb3BlIAogICAgICB9IAogICAgZWxzZSB7IHJldHVybiBHZXQtREhDUFNjb3BlIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJFNjb3BlIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIk5vIGl0ZW1zIHRvIGRpc3BsYXkiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJFNjb3BlIG11c3QgZmlyc3QgaGF2ZSBhIGRlZmluZWQgSVAgcmFuZ2UhIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyByZXR1cm4gJFNjb3BlIH0gCiAgfSAKIApmdW5jdGlvbiBBZGQtREhDUEZpbHRlciB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIEFkZHMgYSBNQUMgZmlsdGVyIHRvIHRoZSBESENQIHNlcnZlci4gCiAgICAuRXhhbXBsZSAKICAgICBBZGQtREhDUEZpbHRlciAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtRGVueSAtTUFDQWRkcmVzcyAwMC0wMC0wMC0wMC0wMCAtRGVzY3JpcHRpb24gIkV4YW1wbGUgRmlsdGVyIiAKICAgICBBZGRzIGEgZGVueSBmaWx0ZXIgZm9yIHRoZSBnaXZlbiBNQUMgYWRkcmVzcyBvbiBkaGNwMDEuY29udG9zby5jb20uIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBBZGQtREhDUEZpbHRlciBjbWRsZXQgaXMgdXNlZCB0byBhZGQgYWxsb3cgYW5kIGRlbnkgTUFDIGFkZHJlc3MgZmlsdGVycyB0byBhIGdpdmVuIHNlcnZlci4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNlcnZlciB2YXJpYWJsZSBzdXBwbGllZCBpcyBhIERIQ1BTZXJ2ZXIgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgQWxsb3cgCiAgICAgVGhpcyBwYXJhbWV0ZXIgZGVmaW5lcyB0aGUgTUFDIGFkZHJlc3MgZmlsdGVyIGZvciB0aGUgYWxsb3cgbGlzdC4gCiAgICAuUGFyYW1ldGVyIERlbnkgCiAgICAgVGhpcyBwYXJhbWV0ZXIgZGVmaW5lcyB0aGUgTUFDIGFkZHJlc3MgZmlsdGVyIGZvciB0aGUgZGVueSBsaXN0LiAKICAgIC5QYXJhbWV0ZXIgTUFDQWRkcmVzcyAKICAgICBUaGlzIHBhcmFtZXRlciBkZWZpbmVzIHRoZSBNQUMgYWRkcmVzcyBmb3IgdGhlIGZpbHRlci4gVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIG9uZSBvZiB0aHJlZSBzdGFuZGFyZCBoYXJkd2FyZSBhZGRyZXNzIHN0cmluZyBmb3JtYXRzOiAKICAgICAgIDAwOjAwOjAwOjAwOjAwOjAwIAogICAgICAgMDAtMDAtMDAtMDAtMDAtMDAgCiAgICAgICAwMDAwMDAwMDAwMDAgCiAgICAuUGFyYW1ldGVyIERlc2NyaXB0aW9uIAogICAgIFRoaXMgcGFyYW1ldGVyIGRlZmluZXMgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBmaWx0ZXIuIAogICAgLk91dHB1dHMgCiAgICAgREhDUEZpbHRlckNvbmZpZ3VyYXRpb24gCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBBZGQtREhDUEZpbHRlciAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDA2LjE2LjIwMTEgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxQYXJhbWV0ZXJTZXROYW1lPSJBbGxvdyIpXVtzd2l0Y2hdJEFsbG93LCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxQYXJhbWV0ZXJTZXROYW1lPSJEZW55IildW3N3aXRjaF0kRGVueSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIihbMC05YS1mQS1GXXsyfVs6LV17MCwxfSl7NX1bMC05YS1mQS1GXXsyfSIpXVtzdHJpbmddJE1BQ0FkZHJlc3MsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bc3RyaW5nXSREZXNjcmlwdGlvbiAKICAgICAgICApIAogICRNQUNBZGRyZXNzID0gJE1BQ0FkZHJlc3MuUmVwbGFjZSgiLSIsIiIpLlJlcGxhY2UoIjoiLCIiKSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciBcXCRTZXJ2ZXIgdjQgYWRkIGZpbHRlciAkKGlmKCRBbGxvdyl7ImFsbG93In1lbHNleyJkZW55In0pICRNQUNBZGRyZXNzIGAiJERlc2NyaXB0aW9uYCIiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICBpZigkdGV4dC5Db3VudCAtZ2UgNCAtYW5kICR0ZXh0WzNdLkNvbnRhaW5zKCJub3QgYSB2YWxpZCBETlMgU2VydmVyIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICQoJHRleHRbM10pIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkc2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiQWRkcmVzcyBvciBBZGRyZXNzIHBhdHRlcm4gaXMgYWxyZWFkeSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiBUaGVyZSBpcyBhbiBleGlzdGluZyAkKCRQU0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lLlRvTG93ZXIoKSkgZmlsdGVyIGZvciAkTUFDQWRkcmVzcyBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIHJldHVybiBHZXQtREhDUEZpbHRlckNvbmZpZ3VyYXRpb24gLVNlcnZlciAkU2VydmVyIAogIH0gCiAKZnVuY3Rpb24gQWRkLURIQ1BJUFJhbmdlIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgQWRkcyBhIHJhbmdlIG9mIElQIGFkZHJlc3NlcyBhdmFpbGFibGUgZm9yIGxlYXNlIHRvIGEgREhDUCBzY29wZS4gCiAgICAuRXhhbXBsZSAKICAgICBBZGQtREhDUElQUmFuZ2UgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIC1TdGFydEFkZHJlc3MgMTkyLjE2OC4xLjMwIC1FbmRBZGRyZXNzIDE5Mi4xNjguMS4yNTQgCiAgICAgVGhpcyBleGFtcGxlIGFkZHMgYW4gaXAgcmFuZ2UgdG8gdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIGRoY3AwMS5jb250b3NvLmNvbSB0aGF0IGlzIGJldHdlZW4gMTkyLjE2OC4xLjMwIGFuZCAxOTIuMTY4LjEuMjU0LiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IEFkZC1ESENQSVBSYW5nZSAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMS4zMCAtRW5kQWRkcmVzcyAxOTIuMTY4LjEuMjU0IAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgQWRkLURIQ1BJUFJhbmdlIGNtZGxldCBpcyB1c2VkIHRvIGRlZmluZSBhIG5ldyByYW5nZSBvZiBJUCBhZGRyZXNzZXMgYXZhaWxhYmxlIGZvciBsZWFzZSB3aXRoaW4gYSBnaXZlbiBESENQIHNjb3BlLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIHRoZSBwYXJlbnQgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKIAogICAgIE5vdGU6IFRoaXMgY21kbGV0IHdpbGwgcHJvY2VzcyBzaWduaWZpY2FudGx5IGZhc3RlciBpZiB0aGUgU2NvcGUgdmFyaWFibGUgc3VwcGxpZWQgaXMgYSBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU3RhcnRBZGRyZXNzIAogICAgIFRoaXMgcGFyYW1ldGVyIHNpZ25pZmllcyB0aGUgYmVnaW5uaW5nIG9mIHRoZSByYW5nZSBvZiBJUCBhZGRyZXNzZXMgYXZhaWxhYmxlIGZvciBsZWFzZS4gVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5QYXJhbWV0ZXIgRW5kQWRkcmVzcyAKICAgICBUaGlzIHBhcmFtZXRlciBzaWduaWZpZXMgdGhlIGVuZCBvZiB0aGUgcmFuZ2Ugb2YgSVAgYWRkcmVzc2VzIGF2YWlsYWJsZSBmb3IgbGVhc2UuIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSBpbiBhbiBJUCBhZGRyZXNzIHN0cmluZyBmb3JtYXQgKGllOiAwLjAuMC4wKS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2NvcGUgCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBBZGQtREhDUElQUmFuZ2UgCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJFNjb3BlLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUGF0dGVybigiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIildW3N0cmluZ10kU3RhcnRBZGRyZXNzLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUGF0dGVybigiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIildW3N0cmluZ10kRW5kQWRkcmVzcyAKICAgICAgICApIAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdIC1hbmQgISRTZXJ2ZXIpIHsgJFNlcnZlciA9ICRTY29wZS5TZXJ2ZXIgfSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciBcXCRTZXJ2ZXIgc2NvcGUgJFNjb3BlIGFkZCBpcHJhbmdlICRTdGFydEFkZHJlc3MgJEVuZEFkZHJlc3MiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyAKICAgICAgJHJhbmdlID0gTmV3LU9iamVjdCBESENQSVBSYW5nZSAKICAgICAgJHJhbmdlLlN0YXJ0QWRkcmVzcyA9ICRTdGFydEFkZHJlc3MgCiAgICAgICRyYW5nZS5FbmRBZGRyZXNzID0gJEVuZEFkZHJlc3MgCiAgICAgICRTY29wZS5JUFJhbmdlcyArPSAkcmFuZ2UgCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuIEdldC1ESENQU2NvcGUgLVNlcnZlciAkU2VydmVyIC1TY29wZSAkU2NvcGUgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgcmV0dXJuICRTY29wZSB9IAogIH0gCiAKZnVuY3Rpb24gRGlzYWJsZS1ESENQU2NvcGUgeyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBEZWFjdGl2YXRlcyBhIGdpdmVuIERIQ1Agc2NvcGUuIAogICAgLkV4YW1wbGUgCiAgICAgRGlzYWJsZS1ESENQU2NvcGUgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIAogICAgIFRoaXMgZXhhbXBsZSBkZWFjdGl2YXRlcyB0aGUgMTkyLjE2OC4xLjAgc2NvcGUgb24gZGhjcDAxLmNvbnRvc28uY29tLiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IERpc2FibGUtREhDUFNjb3BlIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgRGlzYWJsZS1ESENQU2NvcGUgY21kbGV0IGlzIHVzZWQgdG8gZGVhY3RpdmF0ZSBzY29wZXMuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgdGhlIHBhcmVudCBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTY29wZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTY29wZSBvYmplY3Qgb3IgdGhlIHN1Ym5ldCBhZGRyZXNzIG9mIHRoZSBzY29wZS4gSWYgZW50ZXJpbmcgdGhlIHN1Ym5ldCBhZGRyZXNzLCB0aGUgU2VydmVyIHBhcmFtZXRlciBtdXN0IGJlIGRlZmluZWQgYW5kIGJlIHRoZSBob3N0IG9mIHRoaXMgc2NvcGUuIAogCiAgICAgTm90ZTogVGhpcyBjbWRsZXQgd2lsbCBwcm9jZXNzIHNpZ25pZmljYW50bHkgZmFzdGVyIGlmIHRoZSBTY29wZSB2YXJpYWJsZSBzdXBwbGllZCBpcyBhIERIQ1BTY29wZSBvYmplY3QuIAogICAgLlBhcmFtZXRlciBTd2l0Y2hlZE5ldHdvcmsgCiAgICAgVGhpcyBpcyB0eXBpY2FsbHkgdXNlZCBmb3Igc3dpdGNoZWQgbmV0d29ya3MsIG9yIG5ldHdvcmtzIHdoZXJlIG11bHRpcGxlIGxvZ2ljYWwgbmV0d29ya3MgYXJlIGhvc3RlZCBvbiBhIHNpbmdsZSBwaHlzaWNhbCBuZXR3b3JrLiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BTY29wZSAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIERpc2FibGUtREhDUFNjb3BlIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3dpdGNoXSRTd2l0Y2hlZE5ldHdvcmsgCiAgICAgICAgKSAKICAkdmFsID0gaWYoJFN3aXRjaGVkTmV0d29yayl7Mn1lbHNlezB9ICAKICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSAtYW5kICEkU2VydmVyKSB7ICRTZXJ2ZXIgPSAkU2NvcGUuU2VydmVyIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNjb3BlICRTY29wZSBzZXQgc3RhdGUgJHZhbCIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IAogICAgICAkU2NvcGUuU3RhdGUgPSBpZigkU3dpdGNoZWROZXR3b3JrKXsiRGlzYWJsZWQoU3dpdGNoZWQpIn1lbHNleyJEaXNhYmxlZCJ9IAogICAgICByZXR1cm4gJFNjb3BlIAogICAgICB9IAogICAgZWxzZSB7IHJldHVybiBHZXQtREhDUFNjb3BlIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJFNjb3BlIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IHJldHVybiAkU2NvcGUgfSAKICB9IAogCmZ1bmN0aW9uIEVuYWJsZS1ESENQU2NvcGUgeyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBBY3RpdmF0ZXMgYSBnaXZlbiBESENQIHNjb3BlLiAKICAgIC5FeGFtcGxlIAogICAgIEVuYWJsZS1ESENQU2NvcGUgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIAogICAgIFRoaXMgZXhhbXBsZSBhY3RpdmF0ZXMgdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2NvcGUgfCBFbmFibGUtREhDUFNjb3BlIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgRW5hYmxlLURIQ1BTY29wZSBjbWRsZXQgaXMgdXNlZCB0byBhY3RpdmF0ZSBzY29wZXMuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgdGhlIHBhcmVudCBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTY29wZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTY29wZSBvYmplY3Qgb3IgdGhlIHN1Ym5ldCBhZGRyZXNzIG9mIHRoZSBzY29wZS4gSWYgZW50ZXJpbmcgdGhlIHN1Ym5ldCBhZGRyZXNzLCB0aGUgU2VydmVyIHBhcmFtZXRlciBtdXN0IGJlIGRlZmluZWQgYW5kIGJlIHRoZSBob3N0IG9mIHRoaXMgc2NvcGUuIAogICAgICAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNjb3BlIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFN3aXRjaGVkTmV0d29yayAKICAgICBUaGlzIGlzIHR5cGljYWxseSB1c2VkIGZvciBzd2l0Y2hlZCBuZXR3b3Jrcywgb3IgbmV0d29ya3Mgd2hlcmUgbXVsdGlwbGUgbG9naWNhbCBuZXR3b3JrcyBhcmUgaG9zdGVkIG9uIGEgc2luZ2xlIHBoeXNpY2FsIG5ldHdvcmsuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNjb3BlIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgRW5hYmxlLURIQ1BTY29wZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bUFNPYmplY3RdJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2NvcGUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N3aXRjaF0kU3dpdGNoZWROZXR3b3JrIAogICAgICAgICkgCiAgJHZhbCA9IGlmKCRTd2l0Y2hlZE5ldHdvcmspezN9ZWxzZXsxfSAgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2V0IHN0YXRlICR2YWwiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyAKICAgICAgJFNjb3BlLlN0YXRlID0gaWYoJFN3aXRjaGVkTmV0d29yayl7IkFjdGl2ZShTd2l0Y2hlZCkifWVsc2V7IkFjdGl2ZSJ9IAogICAgICByZXR1cm4gJFNjb3BlIAogICAgICB9IAogICAgZWxzZSB7IHJldHVybiBHZXQtREhDUFNjb3BlIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJFNjb3BlIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IHJldHVybiAkU2NvcGUgfSAKICB9IAogCmZ1bmN0aW9uIEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIFJldHJpZXZlcyB0aGUgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIGZvciBhIGdpdmVuIERIQ1Agb2JqZWN0LiAKICAgIC5FeGFtcGxlIAogICAgIEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiAtT3duZXIgZGhjcDAxLmNvbnRvc28uY29tLzE5Mi4xNjguMS4wLzE5Mi4xNjguMS4yMzcgCiAgICAgVGhpcyBleGFtcGxlIHJldHJpZXZlcyB0aGUgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIGZvciB0aGUgcmVzZXJ2YXRpb24gMTkyLjE2OC4xLjIzNyBpbiB0aGUgc2NvcGUgb2YgMTkyLjE2OC4xLjAgb24gc2VydmVyIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiBjbWRsZXQgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIGZvciBhIGdpdmVuIERIQ1Agc2VydmVyLCBzY29wZSwgb3IgcmVzZXJ2YXRpb24uIElmIG5vIGNvbmZpZ3VyYXRpb24gaXMgZGVmaW5lZCwgdGhlbiB0aGUgY29uZmlndXJhdGlvbiBmcm9tIGl0cyBwYXJlbnQgaXMgaW5oZXJpdGVkLCBleGNlcHQgYXQgdGhlIHNlcnZlciBsZXZlbCwgd2hpY2ggdXNlcyB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uLiAKICAgIC5QYXJhbWV0ZXIgT3duZXIgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2VydmVyLCBESENQU2NvcGUsIG9yIERIQ1BSZXNlcnZhdGlvbiBvYmplY3QuIEl0IGNhbiBhbHNvIGJlIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZXNlIG9iamVjdHMsIGRlZmluZWQgdGh1czogCiAgICAgICBTZXJ2ZXJOYW1lT3JGUUROIAogICAgICAgU2VydmVyTmFtZU9yRlFETi9TY29wZUFkZHJlc3MgCiAgICAgICBTZXJ2ZXJOYW1lT3JGUUROL1Njb3BlQWRkcmVzcy9SZXNlcnZhdGlvbkFkZHJlc3MgCiAgICAuT3V0cHV0cyAKICAgICBESENQRE5TQ29uZmlndXJhdGlvbiAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDA0LjIyLjIwMTEgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kT3duZXIpIAogIGlmKCRPd25lci5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKSB7IAogICAgc3dpdGNoKCRPd25lci5TcGxpdCgiLyIpLkNvdW50KSB7IAogICAgICAxIHsgJGxldmVsID0gIlNlcnZlciIgfSAKICAgICAgMiB7ICRsZXZlbCA9ICJTY29wZSIgfSAKICAgICAgMyB7ICRsZXZlbCA9ICJSZXNlcnZhdGlvbiIgfSAKICAgICAgZGVmYXVsdCB7IHJldHVybiB9IAogICAgICB9IAogICAgfSAKICBlbHNlIHsgJGxldmVsID0gJE93bmVyLkdldFR5cGUoKS5Ub1N0cmluZygpLlN1YnN0cmluZyg0KSB9IAogIGlmKCEoJG9wdGlvbiA9IEdldC1ESENQT3B0aW9uIC1Pd25lciAkT3duZXIgLU9wdGlvbklEIDgxIC1Gb3JjZSkpIHsgcmV0dXJuIH0gCiAgJHZhbHVlID0gW2ludF0kb3B0aW9uLlZhbHVlc1swXSAKICAkZG5zQ29uZmlnID0gTmV3LU9iamVjdCBESENQRE5TQ29uZmlndXJhdGlvbiAKICAkZG5zQ29uZmlnLkxldmVsID0gJGxldmVsIAogICRkbnNDb25maWcuVmFsdWUgPSAkdmFsdWUgCiAgaWYoJHZhbHVlIC1lcSAtMSkgeyAgCiAgICBpZigkbGV2ZWwgLW5lICJTZXJ2ZXIiKSB7IAogICAgICBpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSkgeyAKICAgICAgICAkcGFydHMgPSAkT3duZXIuU3BsaXQoIi8iKSAKICAgICAgICAkT3duZXIgPSAkcGFydHNbMC4uKCRwYXJ0cy5Db3VudC0yKV0gLUpvaW4gIi8iIAogICAgICAgIH0gCiAgICAgIGVsc2VpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbREhDUFJlc2VydmF0aW9uXSkgeyAkT3duZXIgPSAiJCgkT3duZXIuU2VydmVyKS8kKCRPd25lci5TY29wZSkiIH0gCiAgICAgIGVsc2VpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyAkT3duZXIgPSAkT3duZXIuU2VydmVyIH0gCiAgICAgIGVsc2UgeyByZXR1cm4gfSAKICAgICAgJGRuc0NvbmZpZyA9IEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiAtT3duZXIgJE93bmVyIAogICAgICAkZG5zQ29uZmlnLkxldmVsID0gJGxldmVsIAogICAgICByZXR1cm4gJGRuc0NvbmZpZyAKICAgICAgfSAKICAgIGVsc2UgeyAkdmFsdWUgPSA1IH0gCiAgICB9IAogIGlmKCR2YWx1ZSAtZ2UgMTYpIHsgCiAgICAkZG5zQ29uZmlnLlVwZGF0ZVRyaWdnZXIgPSAiQWx3YXlzIiAKICAgICR2YWx1ZSAtPSAxNiAKICAgIH0gCiAgZWxzZSB7ICRkbnNDb25maWcuVXBkYXRlVHJpZ2dlciA9ICJDbGllbnRSZXF1ZXN0IiB9IAogIGlmKCR2YWx1ZSAtZ2UgNCkgeyAKICAgICRkbnNDb25maWcuRGlzY2FyZFN0YWxlUmVjb3JkcyA9ICR0cnVlIAogICAgJHZhbHVlIC09IDQgCiAgICB9IAogIGVsc2UgeyAkZG5zQ29uZmlnLkRpc2NhcmRTdGFsZVJlY29yZHMgPSAkZmFsc2UgfSAKICBpZigkdmFsdWUgLWdlIDIpIHsgCiAgICAkZG5zQ29uZmlnLkFsbG93TGVnYWN5Q2xpZW50VXBkYXRlID0gJHRydWUgCiAgICAkdmFsdWUgLT0gMiAKICAgIH0gCiAgZWxzZSB7ICRkbnNDb25maWcuQWxsb3dMZWdhY3lDbGllbnRVcGRhdGUgPSAkZmFsc2UgfSAKICAkZG5zQ29uZmlnLkFsbG93RHluYW1pY1VwZGF0ZSA9IGlmKCR2YWx1ZSAtZXEgMSl7JHRydWV9ZWxzZXskZmFsc2V9IAogIHJldHVybiAkZG5zQ29uZmlnIAogIH0gCiAKZnVuY3Rpb24gR2V0LURIQ1BGaWx0ZXJzIHsgCiAgUGFyYW0oW3N0cmluZ1tdXSRUZXh0LFtpbnRdJFN0YXJ0KSAKICAkZmlsdGVycyA9IEAoKSAKICBmb3IoJGk9JFN0YXJ0OyRpIC1sdCAkVGV4dC5Db3VudDskaSsrKSB7IAogICAgJHBhcnRzID0gJFRleHRbJGldLlNwbGl0KCJgdCIpIHwgJXsgJF8uVHJpbSgpIH0gCiAgICBpZigkcGFydHMuQ291bnQgLW5lIDQpIHsgYnJlYWsgfSAKICAgICRmaWx0ZXIgPSBOZXctT2JqZWN0IERIQ1BGaWx0ZXIgCiAgICAkZmlsdGVyLk1BQ0FkZHJlc3MgPSAkcGFydHNbMl0gCiAgICAkZmlsdGVyLkRlc2NyaXB0aW9uID0gJHBhcnRzWzNdIAogICAgJGZpbHRlcnMgKz0gJGZpbHRlciAKICAgIH0gCiAgcmV0dXJuICRmaWx0ZXJzIAogIH0gCiAKZnVuY3Rpb24gR2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgR2V0cyB0aGUgTUFDIEZpbHRlciBjb25maWd1cmF0aW9uIGZvciBhIGdpdmVuIERIQ1Agc2VydmVyLiAKICAgIC5FeGFtcGxlIAogICAgIEdldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbiAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAKICAgICBSZXR1cm5zIHRoZSBGaWx0ZXIgY29uZmlndXJhdGlvbiBmb3IgZGhjcDAxLmNvbnRvc28uY29tLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgR2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIGNtZGxldCBpcyB1c2VkIHRvIHJldHJpZXZlIHRoZSBBbGxvdyBhbmQgRGVueSBNQUMgYWRkcmVzcyBmaWx0ZXIgY29uZmlndXJhdGlvbi4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNlcnZlciB2YXJpYWJsZSBzdXBwbGllZCBpcyBhIERIQ1BTZXJ2ZXIgb2JqZWN0LiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgR2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMDYuMTYuMjAxMSAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1BTT2JqZWN0XSRTZXJ2ZXIpIAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciB2NCBzaG93IGZpbHRlciIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCR0ZXh0WzNdLkNvbnRhaW5zKCJub3QgYSB2YWxpZCBETlMgU2VydmVyIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICQoJHRleHRbM10pIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkc2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAkZmlsdGVyQ29uZmlnID0gTmV3LU9iamVjdCBESENQRmlsdGVyQ29uZmlndXJhdGlvbiAKICAkZmlsdGVyQ29uZmlnLlNlcnZlciA9ICIkU2VydmVyIiAKICAkZmlsdGVyQ29uZmlnLkFsbG93TGlzdCA9IGlmKCQoJHRleHRbOV0uU3BsaXQoIj0iKSB8ICV7ICRfLlRyaW0oKSB9KVsxXSAtZXEgIjEiKXsiRW5hYmxlZCJ9ZWxzZXsiRGlzYWJsZWQifSAKICAkZmlsdGVyQ29uZmlnLkRlbnlMaXN0ID0gaWYoJCgkdGV4dFsxMF0uU3BsaXQoIj0iKSB8ICV7ICRfLlRyaW0oKSB9KVsxXSAtZXEgIjEiKXsiRW5hYmxlZCJ9ZWxzZXsiRGlzYWJsZWQifSAKICAkZmlsdGVyQ29uZmlnLkFsbG93RmlsdGVycyA9IEdldC1ESENQRmlsdGVycyAtVGV4dCAkdGV4dCAtU3RhcnQgMTkgCiAgZm9yKCRpPTIwOyRpIC1sdCAkdGV4dC5Db3VudDskaSsrKSB7IGlmKCR0ZXh0WyRpXS5Db250YWlucygiVG90YWwgTm8uIG9mIE1BQyIpKSB7IGJyZWFrIH0gfSAKICAkZmlsdGVyQ29uZmlnLkRlbnlGaWx0ZXJzID0gR2V0LURIQ1BGaWx0ZXJzIC1UZXh0ICR0ZXh0IC1TdGFydCAoJGkrNykgCiAgcmV0dXJuICRmaWx0ZXJDb25maWcgCiAgfSAKIAogCmZ1bmN0aW9uIEdldC1ESENQSVBSYW5nZXMgeyAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtzdHJpbmddJFR5cGUgCiAgICAgICAgKSAKICAkaXByYW5nZXMgPSBAKCkgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2hvdyAkVHlwZSIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICBmb3IoJGk9NjskaSAtbHQgJHRleHQuQ291bnQ7JGkrKykgeyAKICAgIGlmKCEkdGV4dFskaV0pIHsgYnJlYWsgfSAKICAgICRwYXJ0cyA9ICR0ZXh0WyRpXS5TcGxpdCgiLSIpIHwgJXsgJF8uVHJpbSgpIH0gCiAgICAkaXBSYW5nZSA9IE5ldy1PYmplY3QgREhDUElQUmFuZ2UgCiAgICAkaXBSYW5nZS5TdGFydEFkZHJlc3MgPSAkcGFydHNbMF0gCiAgICAkaXBSYW5nZS5FbmRBZGRyZXNzID0gJHBhcnRzWzFdIAogICAgJGlwUmFuZ2VzICs9ICRpcFJhbmdlIAogICAgfSAKICByZXR1cm4gJGlwUmFuZ2VzIAogIH0gCiAKZnVuY3Rpb24gR2V0LURIQ1BPcHRpb24geyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBSZXRyaWV2ZXMgYWxsIG9yIHNwZWNpZmljIERIQ1Agb3B0aW9ucyBhbmQgdGhlaXIgdmFsdWVzIGZvciBhIGdpdmVuIGxldmVsLiAKICAgIC5FeGFtcGxlIAogICAgIEdldC1ESENQT3B0aW9uIC1Pd25lciBkaGNwMDEuY29udG9zby5jb20vMTkyLjE2OC4xLjAvMTkyLjE2OC4xLjIzNyAKICAgICBUaGlzIGV4YW1wbGUgcmV0cmlldmVzIGFsbCB0aGUgb3B0aW9ucyBzZXQgZm9yIHRoZSByZXNlcnZhdGlvbiAxOTIuMTY4LjEuMjM3IGluIHRoZSBzY29wZSBvZiAxOTIuMTY4LjEuMCBvbiBzZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tLiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IEdldC1ESENQT3B0aW9uIC1PcHRpb25JRCAzIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGVzIHJldHJpZXZlcyBzY29wZSBvcHRpb24gMywgdGhlIGdhdGV3YXkgYWRkcmVzcy4gCiAgICAuRXhhbXBsZSAKICAgICBHZXQtREhDUE9wdGlvbiAtT3duZXIgJHNlcnZlciAtT3B0aW9uSUQgODEgLUZvcmNlIAogICAgIEdpdmVuIHRoYXQgJHNlcnZlciBpcyB0aGUgREhDUFNlcnZlciBvYmplY3QgZm9yIGRoY3AwMS5jb250b3NvLmNvbSwgdGhpcyBleGFtcGxlIHJldHJpZXZlcyBzZXJ2ZXIgb3B0aW9uIDgxLCBkeW5hbWljIGRucyBjb25maWd1cmF0aW9uLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB3aHkgdGhlIC1Gb3JjZSBwYXJhbWV0ZXIgd2FzIG5lZWRlZCwgcGxlYXNlIHJlYWQgaXRzIHBhcmFtZXRlciAKICAgICBkZXNjcmlwdGlvbiB1bmRlciAtZnVsbC4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIEdldC1ESENQT3B0aW9uIGNtZGxldCBpcyB1c2VkIHRvIHJldHJpZXZlIGFsbCBvciBzcGVjaWZpYyBzdGFuZGFyZCBESENQIG9wdGlvbnMgYW5kIHRoZWlyIHZhbHVlcyBmb3IgYSBnaXZlbiBzZXJ2ZXIsIHNjb3BlLCBvciByZXNlcnZhdGlvbi4gTm9uLXN0YW5kYXJkIGNsYXNzZXMgKGVnOiBCT09UUCkgYXJlIG5vdCBjdXJyZW50bHkgYmVpbmcgcmVjb3JkZWQuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgb25lIG9yIGFuIGFycmF5IG9mIERIQ1BPcHRpb24gb2JqZWN0cy4gCiAgICAuUGFyYW1ldGVyIE93bmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciwgREhDUFNjb3BlLCBvciBESENQUmVzZXJ2YXRpb24gb2JqZWN0LiBJdCBjYW4gYWxzbyBiZSBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVzZSBvYmplY3RzLCBkZWZpbmVkIHRodXM6IAogICAgICAgU2VydmVyTmFtZU9yRlFETiAKICAgICAgIFNlcnZlck5hbWVPckZRRE4vU2NvcGVBZGRyZXNzIAogICAgICAgU2VydmVyTmFtZU9yRlFETi9TY29wZUFkZHJlc3MvUmVzZXJ2YXRpb25BZGRyZXNzIAogICAgLlBhcmFtZXRlciBPcHRpb25JRCAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgdGhlIGlkIG9mIGEgdmFsaWQgREhDUCBvcHRpb24gYXMgbGlzdGVkIGJ5IEdldC1ESENQT3B0aW9uRGVmaW5pdGlvbnMuIAogICAgLlBhcmFtZXRlciBGb3JjZSAKICAgICBUaGlzIHN3aXRjaCBwYXJhbWV0ZXIgaXMgb25seSBuZWVkZWQgaWYgeW91IHdhbnQgdG8gcmV0cmlldmUgb3B0aW9ucyA1MSAobGVhc2UgdGltZSBpbiBzZWNvbmRzKSBvciA4MSAoaW50IHZhbHVlIGZvciB0aGUgZHluYW1pYyBkbnMgY29uZmlndXJhdGlvbikuIFRoZXNlIGFyZSBvdGhlcndpc2Ugbm90IHJldHVybmVkIGFzIHRoZWlyIHZhbHVlcyBhcmUgZXhwcmVzc2VkIGVsc2V3aGVyZS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQT3B0aW9uIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgR2V0LURIQ1BPcHRpb24gCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJE93bmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVJhbmdlKDEsMjU0KV1baW50XSRPcHRpb25JRCwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3dpdGNoXSRGb3JjZSAKICAgICAgICApIAogICRzZXJ2ZXIgPSAkbnVsbCAKICAkc2NvcGUgPSAkbnVsbCAKICAkcmVzZXJ2YXRpb24gPSAkbnVsbCAKICBpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbREhDUFNlcnZlcl0pIHsgJHNlcnZlciA9ICRPd25lci5OYW1lIH0gCiAgZWxzZWlmKCRPd25lci5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IAogICAgJHNlcnZlciA9ICRPd25lci5TZXJ2ZXIgCiAgICAkc2NvcGUgPSAkT3duZXIuQWRkcmVzcyAKICAgIH0gCiAgZWxzZWlmKCRPd25lci5HZXRUeXBlKCkgLWVxIFtESENQUmVzZXJ2YXRpb25dKSB7IAogICAgJHNlcnZlciA9ICRPd25lci5TZXJ2ZXIgCiAgICAkc2NvcGUgPSAkT3duZXIuU2NvcGUgCiAgICAkcmVzZXJ2YXRpb24gPSAkT3duZXIuSVBBZGRyZXNzIAogICAgfSAKICBlbHNlIHsgCiAgICAkcGFydHMgPSAkT3duZXIuVG9TdHJpbmcoKS5TcGxpdCgiLyIpIAogICAgJHNlcnZlciA9ICRwYXJ0c1swXSAKICAgIGlmKCRwYXJ0cy5Db3VudCAtZ3QgMSkgeyAkc2NvcGUgPSAkcGFydHNbMV0gfSAKICAgIGlmKCRwYXJ0cy5Db3VudCAtZ3QgMikgeyAkcmVzZXJ2YXRpb24gPSAkcGFydHNbMl0gfSAKICAgIH0gCiAgJGNvbW1hbmQgPSBpZigkc2NvcGUpeyJcXCRzZXJ2ZXIgc2NvcGUgJHNjb3BlIHNob3cgb3B0aW9udmFsdWUifWVsc2V7IlxcJHNlcnZlciBzaG93IG9wdGlvbnZhbHVlIn0gCiAgaWYoJHJlc2VydmF0aW9uKSB7ICRjb21tYW5kID0gIlxcJHNlcnZlciBzY29wZSAkc2NvcGUgc2hvdyByZXNlcnZlZG9wdGlvbnZhbHVlICRyZXNlcnZhdGlvbiIgfSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciAkY29tbWFuZCIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRzZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkc2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAgICAgCiAgaWYoJHJlc3VsdC5Db250YWlucygiY2xpZW50IGlzIG5vdCBhIHJlc2VydmVkIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXNlcnZhdGlvbiBpcyBub3QgYSB2YWxpZCByZXNlcnZhdGlvbiBpbiAkc2NvcGUgb24gJHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAkb3B0aW9ucyA9IEAoKSAKICAkd29yayA9IEB7fSAKICAkb3B0aW9uZGVmcyA9IEdldC1ESENQT3B0aW9uRGVmaW5pdGlvbnMgLVNlcnZlciAkc2VydmVyIAogICRvcHRpb24gPSBOZXctT2JqZWN0IFBTT0JqZWN0IAogICRvcHRpb24gfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBPcHRpb25OYW1lKCJETlMgQ29uZmlndXJhdGlvbiIpIAogICRvcHRpb24gfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBBcnJheVR5cGUoIlVOQVJZIikgCiAgJG9wdGlvbiB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IE9wdGlvblR5cGUoIkRXT1JEIikgCiAgJG9wdGlvbmRlZnMuQWRkKDgxLCRvcHRpb24pIAogICRpZCA9ICRudWxsIAogICRibG9jayA9ICRmYWxzZSAKICBmb3IoJGk9MDskaSAtbHQgJHRleHQuQ291bnQ7JGkrKykgeyAKICAgIGlmKCR0ZXh0WyRpXSAtZXEgIkNvbW1hbmQgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4iKSB7IAogICAgICBpZighISRpZCkgeyAKICAgICAgICAkb3B0aW9uID0gTmV3LU9iamVjdCBESENQT3B0aW9uIAogICAgICAgICRvcHRpb24uT3B0aW9uSUQgPSAkaWQgCiAgICAgICAgJG9wdGlvbi5PcHRpb25OYW1lID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25OYW1lIAogICAgICAgICRvcHRpb24uQXJyYXlUeXBlID0gJG9wdGlvbmRlZnNbJGlkXS5BcnJheVR5cGUgCiAgICAgICAgJG9wdGlvbi5PcHRpb25UeXBlID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25UeXBlIAogICAgICAgICRvcHRpb24uVmFsdWVzICs9ICR3b3JrWyRvcHRpb25kZWZzWyRpZF0uT3B0aW9uTmFtZV0gCiAgICAgICAgJG9wdGlvbi5MZXZlbCA9IGlmKCRyZXNlcnZhdGlvbil7IlJlc2VydmF0aW9uIn1lbHNlaWYoJHNjb3BlKXsiU2NvcGUifWVsc2V7IlNlcnZlciJ9IAogICAgICAgICRvcHRpb25zICs9ICRvcHRpb24gCiAgICAgICAgfSAKICAgICAgfSAKICAgIGlmKCRibG9jaykgeyAKICAgICAgaWYoJHRleHRbJGldLkNvbnRhaW5zKCJESENQIFN0YW5kYXJkIE9wdGlvbnMiKSkgeyAkYmxvY2sgPSAkZmFsc2UgfSAKICAgICAgY29udGludWUgCiAgICAgIH0gCiAgICBpZigkdGV4dFskaV0uQ29udGFpbnMoIkZvciB2ZW5kb3IgY2xhc3MiKSAtb3IgJHRleHRbJGldLkNvbnRhaW5zKCJGb3IgdXNlciBjbGFzcyIpKSB7ICRibG9jayA9ICR0cnVlOyBjb250aW51ZSB9IAogICAgaWYoJHRleHRbJGldLkNvbnRhaW5zKCJPcHRpb25JZCIpKSB7IAogICAgICBpZighISRpZCkgeyAKICAgICAgICAkb3B0aW9uID0gTmV3LU9iamVjdCBESENQT3B0aW9uIAogICAgICAgICRvcHRpb24uT3B0aW9uSUQgPSAkaWQgCiAgICAgICAgJG9wdGlvbi5PcHRpb25OYW1lID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25OYW1lIAogICAgICAgICRvcHRpb24uQXJyYXlUeXBlID0gJG9wdGlvbmRlZnNbJGlkXS5BcnJheVR5cGUgCiAgICAgICAgJG9wdGlvbi5PcHRpb25UeXBlID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25UeXBlIAogICAgICAgICRvcHRpb24uVmFsdWVzICs9ICR3b3JrWyRvcHRpb25kZWZzWyRpZF0uT3B0aW9uTmFtZV0gCiAgICAgICAgJG9wdGlvbi5MZXZlbCA9IGlmKCRyZXNlcnZhdGlvbil7IlJlc2VydmF0aW9uIn1lbHNlaWYoJHNjb3BlKXsiU2NvcGUifWVsc2V7IlNlcnZlciJ9IAogICAgICAgICRvcHRpb25zICs9ICRvcHRpb24gCiAgICAgICAgfSAKICAgICAgJGlkID0gW2ludF0oJHRleHRbJGldLlNwbGl0KCI6IilbMV0uVHJpbSgpKSAKICAgICAgaWYoJE9wdGlvbklEIC1hbmQgJE9wdGlvbklEIC1uZSAkaWQpIHsgJGlkID0gJG51bGw7IGNvbnRpbnVlIH0gCiAgICAgIGlmKCEkRm9yY2UgLWFuZCAoJGlkIC1lcSA4MSAtb3IgJGlkIC1lcSA1MSkpIHsgJGlkID0gJG51bGw7IGNvbnRpbnVlIH0gCiAgICAgICR3b3JrLkFkZCgkb3B0aW9uZGVmc1skaWRdLk9wdGlvbk5hbWUsJG51bGwpIAogICAgICB9IAogICAgZWxzZWlmKCEkaWQpIHsgY29udGludWUgfSAKICAgIGVsc2UgeyAKICAgICAgaWYoISgkdGV4dFskaV0uQ29udGFpbnMoIk9wdGlvbiBFbGVtZW50IFZhbHVlIikpKSB7IGNvbnRpbnVlIH0gCiAgICAgICRkZXNjID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25OYW1lIAogICAgICAkdHlwZSA9ICRvcHRpb25kZWZzWyRpZF0uQXJyYXlUeXBlIAogICAgICAkdmFsdWVzID0gJHdvcmtbJGRlc2NdIAogICAgICAkdmFsID0gJHRleHRbJGldLlNwbGl0KCI9IilbMV0uVHJpbSgpIAogICAgICBpZigkdHlwZS1lcSJBUlJBWSIpIHsgJHZhbHVlcyArPSBAKCR2YWwpIH0gCiAgICAgIGVsc2UgeyAkdmFsdWVzID0gJHZhbCB9IAogICAgICAkd29ya1skZGVzY10gPSAkdmFsdWVzIAogICAgICB9IAogICAgfSAKICBpZigkRm9yY2UgLWFuZCAhKCRvcHRpb25zIHwgV2hlcmUtT2JqZWN0IHsgJF8uT3B0aW9uSUQgLWVxIDgxIH0pIC1hbmQgJE9wdGlvbklEIC1lcSA4MSkgeyAKICAgICRpZCA9IDgxIAogICAgJG9wdGlvbiA9IE5ldy1PYmplY3QgREhDUE9wdGlvbiAKICAgICRvcHRpb24uT3B0aW9uSUQgPSAkaWQgCiAgICAkb3B0aW9uLk9wdGlvbk5hbWUgPSAkb3B0aW9uZGVmc1skaWRdLk9wdGlvbk5hbWUgCiAgICAkb3B0aW9uLkFycmF5VHlwZSA9ICRvcHRpb25kZWZzWyRpZF0uQXJyYXlUeXBlIAogICAgJG9wdGlvbi5PcHRpb25UeXBlID0gJG9wdGlvbmRlZnNbJGlkXS5PcHRpb25UeXBlIAogICAgJG9wdGlvbi5WYWx1ZXMgKz0gLTEgCiAgICAkb3B0aW9uLkxldmVsID0gaWYoJHJlc2VydmF0aW9uKXsiUmVzZXJ2YXRpb24ifWVsc2VpZigkc2NvcGUpeyJTY29wZSJ9ZWxzZXsiU2VydmVyIn0gCiAgICAkb3B0aW9ucyArPSAkb3B0aW9uIAogICAgfSAKICByZXR1cm4gJG9wdGlvbnMgCiAgfSAKIApmdW5jdGlvbiBHZXQtREhDUE9wdGlvbkRlZmluaXRpb25zIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmV0cmlldmVzIGFsbCBESENQIG9wdGlvbnMgZGVmaW5lZCBvbiBhIGdpdmVuIHNlcnZlci4gCiAgICAuRXhhbXBsZSAKICAgICBHZXQtREhDUE9wdGlvbkRlZmluaXRpb25zIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIAogICAgIFRoaXMgZXhhbXBsZSByZXRyaWV2ZXMgYWxsIHRoZSBvcHRpb25zIGRlZmluZWQgb24gc2VydmVyIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2VydmVyIHwgR2V0LURIQ1BPcHRpb25EZWZpbml0aW9ucyAKICAgICBHaXZlbiB0aGF0ICRzZXJ2ZXIgaXMgdGhlIERIQ1BTZXJ2ZXIgb2JqZWN0IGZvciBkaGNwMDEuY29udG9zby5jb20sIHRoaXMgZXhhbXBsZSBhY2NvbXBsaXNoZXMgdGhlIHNhbWUgYXMgdGhlIG9uZSBpbiBFeGFtcGxlIDEuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBHZXQtREhDUE9wdGlvbkRlZmluaXRpb25zIGNtZGxldCBpcyB1c2VkIHRvIHJldHJpZXZlIGFsbCBESENQIG9wdGlvbnMgZGVmaW5lZCBvbiBhIGdpdmVuIHNlcnZlci4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5PdXRwdXRzIAogICAgIEhhc2hUYWJsZSAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIEdldC1ESENQT3B0aW9uRGVmaW5pdGlvbnMgCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJFNlcnZlcikgCiAgJG9wdGlvbnMgPSBAe30gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNob3cgb3B0aW9uZGVmIikgCiAgaWYoJHRleHRbMl0uQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGZvcigkaT03OyRpIC1sdCAkdGV4dC5Db3VudDskaSsrKSB7IAogICAgaWYoISR0ZXh0WyRpXSkgeyBicmVhayB9IAogICAgJHBhcnRzID0gJHRleHRbJGldLlNwbGl0KCItIikgfCAleyAkXy5UcmltKCkgfSAKICAgIGlmKCRwYXJ0c1syXSAtZXEgInRvIikgeyAKICAgICAgJHBhcnRzWzFdID0gJHBhcnRzWzFdKyItIiskcGFydHNbMl0rIi0iKyRwYXJ0c1szXSAKICAgICAgJHBhcnRzWzJdID0gJHBhcnRzWzRdIAogICAgICAkcGFydHNbM10gPSAkcGFydHNbNV0gCiAgICAgIH0gCiAgICAkb3B0aW9uID0gTmV3LU9iamVjdCBQU09CamVjdCAKICAgICRvcHRpb24gfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBPcHRpb25OYW1lKCRwYXJ0c1sxXSkgCiAgICAkb3B0aW9uIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgQXJyYXlUeXBlKCRwYXJ0c1syXSkgCiAgICAkb3B0aW9uIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgT3B0aW9uVHlwZSgkcGFydHNbM10pIAogICAgaWYoJG9wdGlvbnMuS2V5cyAtbm90Y29udGFpbnMgW2ludF0kcGFydHNbMF0pIHsgJG9wdGlvbnMuQWRkKFtpbnRdJHBhcnRzWzBdLCRvcHRpb24pIH0gI05lZWRlZCBpZiBjbGF1c2UgZm9yIHNvbWUgd2VpcmQgZnVua2luZXNzIG9uIFdpbmRvd3MgMjAwMyBzZXJ2ZXJzIAogICAgfSAKICByZXR1cm4gJG9wdGlvbnMgCiAgfSAKIApmdW5jdGlvbiBHZXQtREhDUFJlc2VydmF0aW9uIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmV0aWV2ZXMgYWxsIG9yIHNwZWNpZmljIERIQ1AgcmVzZXJ2YXRpb25zIGZvciBhIGdpdmVuIHNjb3BlLiAKICAgIC5FeGFtcGxlIAogICAgIEdldC1ESENQUmVzZXJ2YXRpb24gLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIAogICAgIFRoaXMgZXhhbXBsZSByZXRyaWV2ZXMgYWxsIHJlc2VydmF0aW9ucyBpbiB0aGUgMTkyLjE2OC4xLjAgc2NvcGUgb24gZGhjcDAxLmNvbnRvc28uY29tLiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IEdldC1ESENQUmVzZXJ2YXRpb24gLUlQQWRkcmVzcyAxOTIuMTY4LjEuMjM3IAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgcmV0cmlldmVzIHRoZSAxOTIuMTY4LjEuMjM3IHJlc2VydmF0aW9uLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgR2V0LURIQ1BSZXNlcnZhdGlvbiBjbWRsZXQgaXMgdXNlZCB0byByZXRpZXZlcyBhbGwgb3Igc3BlY2lmaWMgREhDUCByZXNlcnZhdGlvbnMgZm9yIGEgZ2l2ZW4gc2NvcGUuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgb25lIG9yIGFuIGFycmF5IG9mIERIQ1BSZXNlcnZhdGlvbiBvYmplY3RzLiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTY29wZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTY29wZSBvYmplY3Qgb3IgdGhlIHN1Ym5ldCBhZGRyZXNzIG9mIHRoZSBzY29wZS4gSWYgZW50ZXJpbmcgdGhlIHN1Ym5ldCBhZGRyZXNzLCB0aGUgU2VydmVyIHBhcmFtZXRlciBtdXN0IGJlIGRlZmluZWQgYW5kIGJlIHRoZSBob3N0IG9mIHRoaXMgc2NvcGUuIAogICAgLlBhcmFtZXRlciBJUEFkZHJlc3MgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BSZXNlcnZhdGlvbiAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIEdldC1ESENQUmVzZXJ2YXRpb24gCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJFNjb3BlLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJElQQWRkcmVzcyAKICAgICAgICApIAogICRyZXNlcnZhdGlvbnMgPSBAKCkgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2hvdyByZXNlcnZlZGlwIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGZvcigkaT03OyRpIC1sdCAkdGV4dC5Db3VudDskaSsrKSB7IAogICAgaWYoISR0ZXh0WyRpXSkgeyBicmVhayB9IAogICAgJHBhcnRzID0gJHRleHRbJGldLlNwbGl0KCItIikgfCAleyAkXy5UcmltKCkgfSAKICAgIGlmKCRJUEFkZHJlc3MgLWFuZCAkcGFydHNbMF0gLW5lICRJUEFkZHJlc3MpIHsgY29udGludWUgfSAKICAgICRyZXNlcnZhdGlvbiA9IE5ldy1PYmplY3QgREhDUFJlc2VydmF0aW9uIAogICAgJHJlc2VydmF0aW9uLklQQWRkcmVzcyA9ICRwYXJ0c1swXSAKICAgICRyZXNlcnZhdGlvbi5NQUNBZGRyZXNzID0gW3N0cmluZ106OkpvaW4oIi0iLCRwYXJ0c1sxLi42XSkgCiAgICAkcmVzZXJ2YXRpb24uU2NvcGUgPSAkU2NvcGUgCiAgICAkcmVzZXJ2YXRpb24uU2VydmVyID0gJFNlcnZlciAKICAgICRyZXNlcnZhdGlvbi5PcHRpb25zID0gR2V0LURIQ1BPcHRpb24gLU93bmVyICRyZXNlcnZhdGlvbiAKICAgICRyZXNlcnZhdGlvbi5ETlNDb25maWd1cmF0aW9uID0gR2V0LURIQ1BETlNDb25maWd1cmF0aW9uIC1Pd25lciAkcmVzZXJ2YXRpb24gCiAgICAkcmVzZXJ2YXRpb25zICs9ICRyZXNlcnZhdGlvbiAKICAgIH0gCiAgcmV0dXJuICRyZXNlcnZhdGlvbnMgCiAgfSAKIApmdW5jdGlvbiBHZXQtREhDUFNjb3BlIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmV0aWV2ZXMgYWxsIG9yIHNwZWNpZmljcyBzY29wZXMgZm9yIGEgZ2l2ZW4gc2VydmVyLiAKICAgIC5FeGFtcGxlIAogICAgIEdldC1ESENQU2NvcGUgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gCiAgICAgVGhpcyBleGFtcGxlIHJldHJpZXZlcyBhbGwgc2NvcGVzIG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2VydmVyIHwgR2V0LURIQ1BTY29wZSAtU2NvcGUgMTkyLjE2OC4xLjAgCiAgICAgR2l2ZW4gdGhhdCAkc2VydmVyIGlzIHRoZSBESENQU2VydmVyIG9iamVjdCBmb3IgZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgcmV0cmlldmVzIHRoZSBzY29wZSAxOTIuMTY4LjEuMC4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIEdldC1ESENQU2NvcGUgY21kbGV0IGlzIHVzZWQgdG8gcmV0aWV2ZXMgYWxsIG9yIHNwZWNpZmljIERIQ1Agc2NvcGVzIG9uIGEgZ2l2ZW4gc2VydmVyLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIG9uZSBvciBhbiBhcnJheSBvZiBESENQU2NvcGUgb2JqZWN0cy4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNjb3BlIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgR2V0LURIQ1BTY29wZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzdHJpbmddJFNjb3BlIAogICAgICAgICkgCiAgJGRoY3BTY29wZXMgPSBAKCkgCiAgJHNjb3BlTGlzdCA9IEB7fSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciBcXCRTZXJ2ZXIgc2hvdyBzY29wZSIpIAogIGlmKCR0ZXh0WzJdLkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICBmb3IoJGk9NTskaSAtbHQgJHRleHQuQ291bnQ7JGkrKykgeyAKICAgIGlmKCEkdGV4dFskaV0pIHsgYnJlYWsgfSAKICAgICRwYXJ0cyA9ICR0ZXh0WyRpXS5TcGxpdCgiLSIpIHwgJXsgJF8uVHJpbSgpIH0gCiAgICAkc2NvcGVMaXN0LkFkZCgkcGFydHNbMF0sQCgkcGFydHNbMV0sJHBhcnRzWzJdLCRwYXJ0c1szXSwkcGFydHNbNF0pKSAKICAgIH0gCiAgZm9yZWFjaCgkYWRkcmVzcyBpbiAkc2NvcGVMaXN0LktleXMpIHsgCiAgICBpZigkU2NvcGUgLWFuZCAkYWRkcmVzcyAtbmUgJFNjb3BlKSB7IGNvbnRpbnVlIH0gCiAgICAkZGhjcFNjb3BlID0gTmV3LU9iamVjdCBESENQU2NvcGUgCiAgICAkZGhjcFNjb3BlLkFkZHJlc3MgPSAkYWRkcmVzcyAKICAgICRkaGNwU2NvcGUuU2VydmVyID0gJFNlcnZlci5Ub1N0cmluZygpIAogICAgJGRoY3BTY29wZS5TdWJuZXRNYXNrID0gJHNjb3BlTGlzdFskYWRkcmVzc11bMF0gCiAgICAkZGhjcFNjb3BlLlN0YXRlID0gJHNjb3BlTGlzdFskYWRkcmVzc11bMV0gCiAgICAkZGhjcFNjb3BlLk5hbWUgPSAkc2NvcGVMaXN0WyRhZGRyZXNzXVsyXSAKICAgICRkaGNwU2NvcGUuRGVzY3JpcHRpb24gPSAkc2NvcGVMaXN0WyRhZGRyZXNzXVszXSAKICAgICRkaGNwU2NvcGUuSVBSYW5nZXMgPSBHZXQtREhDUElQUmFuZ2VzIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJGFkZHJlc3MgLVR5cGUgImlwUmFuZ2UiIAogICAgJGRoY3BTY29wZS5FeGNsdXNpb25SYW5nZXMgPSBHZXQtREhDUElQUmFuZ2VzIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJGFkZHJlc3MgLVR5cGUgImV4Y2x1ZGVyYW5nZSIgCiAgICAkZGhjcFNjb3BlLlJlc2VydmF0aW9ucyA9IEdldC1ESENQUmVzZXJ2YXRpb24gLVNlcnZlciAkU2VydmVyIC1TY29wZSAkYWRkcmVzcyAKICAgICRsZWFzZSA9IEdldC1ESENQT3B0aW9uIC1Pd25lciAkZGhjcFNjb3BlIC1PcHRpb25JRCA1MSAtRm9yY2UgCiAgICAkZGhjcFNjb3BlLkxlYXNlID0gaWYoJGxlYXNlKXskbGVhc2UuVmFsdWVzWzBdfWVsc2V7MH0gCiAgICAkZGhjcFNjb3BlLk9wdGlvbnMgPSBHZXQtREhDUE9wdGlvbiAtT3duZXIgJGRoY3BTY29wZSAKICAgICRkaGNwU2NvcGUuRE5TQ29uZmlndXJhdGlvbiA9IEdldC1ESENQRE5TQ29uZmlndXJhdGlvbiAtT3duZXIgJGRoY3BTY29wZSAKICAgICRkaGNwU2NvcGVzICs9ICRkaGNwU2NvcGUgCiAgICB9IAogIHJldHVybiAkZGhjcFNjb3BlcyAKICB9IAogCmZ1bmN0aW9uIEdldC1ESENQU2VydmVyIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmV0aWV2ZXMgYSBzcGVjaWZpYyBESENQIHNlcnZlciwgb3IgYWxsIERIQ1Agc2VydmVycyBpbiB0aGUgY3VycmVudCBkb21haW4uIAogICAgLkV4YW1wbGUgCiAgICAgR2V0LURIQ1BTZXJ2ZXIgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gCiAgICAgVGhpcyBleGFtcGxlIHJldHJpZXZlcyB0aGUgREhDUCBzZXJ2ZXIgb2JqZWN0IGZvciBkaGNwMDEuY29udG9zby5jb20uIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBHZXQtREhDUFNlcnZlciBjbWRsZXQgaXMgdXNlZCB0byByZXRpZXZlIGEgc3BlY2lmaWMgREhDUCBzZXJ2ZXIsIG9yIGFsbCBESENQIHNlcnZlcnMgaW4gdGhlIGN1cnJlbnQgZG9tYWluLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIG9uZSBvciBhbiBhcnJheSBvZiBESENQU2VydmVyIG9iamVjdHMuIAogCiAgICAgTm90ZTogRHVlIHRvIHRoZSBuYXR1cmUgb2YgY2FsbGluZyBuZXRzaCBjb21tYW5kcyBmcm9tIHBvd2Vyc2hlbGwsIHRoaXMgY21kbGV0IGNhbiB0YWtlIGFuIGV4Y2VwdGlvbmFsbHkgbG9uZyB0aW1lIHRvIGNvbXBsZXRlLiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSB0aGUgbmFtZSBvciBGUUROIG9mIHRoZSBESENQIHNlcnZlci4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2VydmVyIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgR2V0LURIQ1BTZXJ2ZXIgCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bc3RyaW5nXSRTZXJ2ZXIpIAogICRkaGNwU2VydmVycyA9IEAoKSAKICBpZighJFNlcnZlcikgeyAKICAgICRjb25maWdETiA9IChbYWRzaV0iTERBUDovL1Jvb3REU0UiKS5jb25maWd1cmF0aW9uTmFtaW5nQ29udGV4dCAKICAgICRvYmpBRFNlYXJjaCA9IE5ldy1PYmplY3QgU3lzdGVtLkRpcmVjdG9yeVNlcnZpY2VzLkRpcmVjdG9yeVNlYXJjaGVyIAogICAgJG9iakFEU2VhcmNoLlNlYXJjaFJvb3QgPSBOZXctT2JqZWN0IFN5c3RlbS5EaXJlY3RvcnlTZXJ2aWNlcy5EaXJlY3RvcnlFbnRyeSgiTERBUDovL0NOPU5ldFNlcnZpY2VzLENOPVNlcnZpY2VzLCRjb25maWdETiIpIAogICAgJG9iakFEU2VhcmNoLlBhZ2VTaXplID0gMTAwMCAKICAgICRvYmpBRFNlYXJjaC5GaWx0ZXIgPSAiKCYob2JqZWN0Q2xhc3M9ZGhjcENsYXNzKShkaGNwSWRlbnRpZmljYXRpb249REhDUCBTZXJ2ZXIgb2JqZWN0KSkiIAogICAgJG9iakFEU2VhcmNoLlNlYXJjaFNjb3BlID0gIk9uZUxldmVsIiAKICAgICRzZXJ2ZXJMaXN0ID0gJG9iakFEU2VhcmNoLkZpbmRBbGwoKSB8ICV7ICRfLlByb3BlcnRpZXNbImNuIl1bMF0gfSAKICAgIH0gCiAgZWxzZSB7IAogICAgJHJlc3VsdCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciBcXCRTZXJ2ZXIiKSAKICAgIGlmKCRyZXN1bHQgLWlzIFthcnJheV0gLWFuZCAkcmVzdWx0WzBdLkNvbnRhaW5zKCJMaXN0cyBhbGwgdGhlIGNvbW1hbmRzIGF2YWlsYWJsZSIpKSB7ICRzZXJ2ZXJMaXN0ID0gQCgkU2VydmVyKSB9IAogICAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgICB9IAogIGZvcmVhY2goJG5hbWUgaW4gJHNlcnZlckxpc3QpIHsgCiAgICAkZGhjcFNlcnZlciA9IE5ldy1PYmplY3QgREhDUFNlcnZlciAKICAgICRkaGNwU2VydmVyLk5hbWUgPSAkbmFtZSAKICAgICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJG5hbWUgc2hvdyBzZXJ2ZXIiKSAKICAgIGlmKCR0ZXh0WzJdLkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyBjb250aW51ZSB9IAogICAgZWxzZSB7ICRkaGNwU2VydmVyLklQQWRkcmVzcyA9ICR0ZXh0WzJdLlNwbGl0KCI9IilbMV0uVHJpbSgpIH0gCiAgICAkZGhjcFNlcnZlci5ETlNDb25maWd1cmF0aW9uID0gR2V0LURIQ1BETlNDb25maWd1cmF0aW9uIC1Pd25lciAkZGhjcFNlcnZlciAKICAgICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJG5hbWUgc2hvdyBkZXRlY3Rjb25mbGljdHJldHJ5IikgCiAgICBpZigkdGV4dFsyXS5Db250YWlucygiU2VydmVyIG1heSBub3QgZnVuY3Rpb24gcHJvcGVybHkiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJFNlcnZlciBpcyBpbmFjY2Vzc2libGUgb3IgaXMgbm90IGEgREhDUCBzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgY29udGludWUgfSAKICAgIGVsc2UgeyAkZGhjcFNlcnZlci5Db25mbGljdERldGVjdGlvbkF0dGVtcHRzID0gW2ludF0oJHRleHRbMV0uU3BsaXQoIjoiKVsxXS5UcmltKCkpIH0gCiAgICAkZGhjcFNlcnZlci5TY29wZXMgPSBHZXQtREhDUFNjb3BlIC1TZXJ2ZXIgJG5hbWUgCiAgICAkZGhjcFNlcnZlci5PcHRpb25zID0gR2V0LURIQ1BPcHRpb24gLU93bmVyICRuYW1lIAogICAgJGRoY3BTZXJ2ZXJzICs9ICRkaGNwU2VydmVyIAogICAgfSAKICByZXR1cm4gJGRoY3BTZXJ2ZXJzIAogIH0gCiAKZnVuY3Rpb24gR2V0LURIQ1BTdGF0aXN0aWNzIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmV0aWV2ZXMgdGhlIERIQ1Agc3RhdGlzdGljcyBvZiBhIHNwZWNpZmljIHNlcnZlci4gCiAgICAuRXhhbXBsZSAKICAgICBHZXQtREhDUFN0YXRpc3RpY3MgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gCiAgICAgVGhpcyBleGFtcGxlIHJldHJpZXZlcyB0aGUgREhDUCBzdGF0aXN0aWNzIGZvciBkaGNwMDEuY29udG9zby5jb20uIAogICAgLkV4YW1wbGUgCiAgICAgJHNlcnZlciB8IEdldC1ESENQU3RhdGlzdGljcyAKICAgICBHaXZlbiB0aGF0ICRzZXJ2ZXIgaXMgdGhlIERIQ1BTZXJ2ZXIgb2JqZWN0IGZvciBkaGNwMDEuY29udG9zby5jb20sIHRoaXMgZXhhbXBsZSBhY2NvbXBsaXNoZXMgdGhlIHNhbWUgYXMgdGhlIG9uZSBpbiBFeGFtcGxlIDEuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBHZXQtREhDUFN0YXRpc3RpY3MgY21kbGV0IGlzIHVzZWQgdG8gcmV0aWV2ZSB0aGUgREhDUCBzdGF0aXN0aWNzIG9mIGEgc3BlY2lmaWMgc2VydmVyIGFuZCBpdHMgc2NvcGVzLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIGEgREhDUFN0YXRpc3RpY3Mgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFN0YXRpc3RpY3MgCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBHZXQtREhDUFN0YXRpc3RpY3MgCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJFNlcnZlcikgCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNob3cgbWliaW5mbyIpIAogIGlmKCR0ZXh0WzJdLkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAkc2VydmVyU3RhdHMgPSBOZXctT2JqZWN0IERIQ1BTZXJ2ZXJTdGF0aXN0aWNzIAogICRzZXJ2ZXJTdGF0cy5TZXJ2ZXIgPSAiJFNlcnZlciIgCiAgZm9yKCRpPTI7JGktbHQkdGV4dC5Db3VudDskaSsrKSB7IAogICAgaWYoISR0ZXh0WyRpXSkgeyBicmVhayB9IAogICAgJHBhcnRzID0gJHRleHRbJGldLlNwbGl0KCI9IikgfCAleyAkXy5UcmltKCkuVHJpbSgiLiIpIH0gCiAgICBzd2l0Y2goJHBhcnRzWzBdKSB7IAogICAgICAiRGlzY292ZXJzIiAgICAgICB7ICRzZXJ2ZXJTdGF0cy5EaXNjb3ZlcnMgPSBbaW50XSRwYXJ0c1sxXSB9IAogICAgICAiT2ZmZXJzIiAgICAgICAgICB7ICRzZXJ2ZXJTdGF0cy5PZmZlcnMgPSBbaW50XSRwYXJ0c1sxXSB9IAogICAgICAiUmVxdWVzdHMiICAgICAgICB7ICRzZXJ2ZXJTdGF0cy5SZXF1ZXN0cyA9IFtpbnRdJHBhcnRzWzFdIH0gCiAgICAgICJBY2tzIiAgICAgICAgICAgIHsgJHNlcnZlclN0YXRzLkFja3MgPSBbaW50XSRwYXJ0c1sxXSB9IAogICAgICAiTmFrcyIgICAgICAgICAgICB7ICRzZXJ2ZXJTdGF0cy5OYWtzID0gW2ludF0kcGFydHNbMV0gfSAKICAgICAgIkRlY2xpbmVzIiAgICAgICAgeyAkc2VydmVyU3RhdHMuRGVjbGluZXMgPSBbaW50XSRwYXJ0c1sxXSB9IAogICAgICAiUmVsZWFzZXMiICAgICAgICB7ICRzZXJ2ZXJTdGF0cy5SZWxlYXNlcyA9IFtpbnRdJHBhcnRzWzFdIH0gCiAgICAgICJTZXJ2ZXJTdGFydFRpbWUiIHsgJHNlcnZlclN0YXRzLlN0YXJ0VGltZSA9IFtEYXRlVGltZV0kcGFydHNbMV0gfSAKICAgICAgIlNjb3BlcyIgICAgICAgICAgeyAkc2VydmVyU3RhdHMuU2NvcGVzID0gW2ludF0kcGFydHNbMV0gfSAKICAgICAgIlN1Ym5ldCIgICAgICAgICAgeyAKICAgICAgICAkc2NvcGVTdGF0cyA9IE5ldy1PYmplY3QgREhDUFNjb3BlU3RhdGlzdGljcyAKICAgICAgICAkc2NvcGVTdGF0cy5TY29wZSA9ICRwYXJ0c1sxXSAKICAgICAgICAkc2NvcGVTdGF0cy5TZXJ2ZXIgPSAiJFNlcnZlciIgCiAgICAgICAgJHBhcnRzID0gJHRleHRbKyskaV0uU3BsaXQoIj0iKSB8ICV7ICRfLlRyaW0oKS5UcmltKCIuIikgfSAKICAgICAgICAkdXNlZCA9IFtpbnRdJHBhcnRzWzFdIAogICAgICAgICRwYXJ0cyA9ICR0ZXh0WysrJGldLlNwbGl0KCI9IikgfCAleyAkXy5UcmltKCkuVHJpbSgiLiIpIH0gCiAgICAgICAgJHNjb3BlU3RhdHMuVG90YWxBZGRyZXNzZXMgPSAkdXNlZCtbaW50XSRwYXJ0c1sxXSAKICAgICAgICAkc2NvcGVTdGF0cy5Vc2VkQWRkcmVzc2VzID0gJHVzZWQgCiAgICAgICAgJHBhcnRzID0gJHRleHRbKyskaV0uU3BsaXQoIj0iKSB8ICV7ICRfLlRyaW0oKS5UcmltKCIuIikgfSAKICAgICAgICAkc2NvcGVTdGF0cy5QZW5kaW5nT2ZmZXJzID0gW2ludF0kcGFydHNbMV0gCiAgICAgICAgJHNlcnZlclN0YXRzLlNjb3BlU3RhdGlzdGljcyArPSAkc2NvcGVTdGF0cyAKICAgICAgICB9IAogICAgICB9IAogICAgfSAKICByZXR1cm4gJHNlcnZlclN0YXRzIAogIH0gCiAKZnVuY3Rpb24gTmV3LURIQ1BPcHRpb25EZWZpbml0aW9uIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgQ3JlYXRlcyBhIG5ldyBvcHRpb24gb24gYSBnaXZlbiBzZXJ2ZXIuIAogICAgLkV4YW1wbGUgCiAgICAgTmV3LURIQ1BPcHRpb25EZWZpbml0aW9uIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1PcHRpb25JRCAyMDAgLU5hbWUgVGVzdE9wdGlvbiAtRGF0YVR5cGUgSVBBRERSRVNTIC1Jc0FycmF5IAogICAgIFRoaXMgZXhhbXBsZSBjcmVhdGVzIG9wdGlvbiAyMDAgb24gc2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSB3aXRoIHRoZSBuYW1lLCBUZXN0T3B0aW9uLCBhbmQgYW4gYWNjZXB0ZWQgdmFsdWUgYXMgYW4gYXJyYXkgb2YgSVAgYWRkcmVzc2VzLiAKICAgIC5FeGFtcGxlIAogICAgICRzZXJ2ZXIgfCBOZXctREhDUE9wdGlvbkRlZmluaXRpb24gLU9wdGlvbklEIDIwMCAtTmFtZSBUZXN0T3B0aW9uIC1EYXRhVHlwZSBJUEFERFJFU1MgLUlzQXJyYXkgLURlc2NyaXB0aW9uICJBIHRlc3Qgb3B0aW9uLiIgCiAgICAgR2l2ZW4gdGhhdCAkc2VydmVyIGlzIHRoZSBESENQU2VydmVyIG9iamVjdCBmb3IgZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxIHdpdGggYSBkZXNjcmlwdGlvbiB0b28uIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBOZXctREhDUE9wdGlvbkRlZmluaXRpb24gY21kbGV0IGlzIHVzZWQgdG8gY3JlYXRlIGEgbmV3IG9wdGlvbiBvbiBhIGdpdmVuIHNlcnZlci4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgT3B0aW9uSUQgCiAgICAgQW4gaW50ZWdlciBiZXR3ZWVuIDEgYW5kIDI1NCB0aGF0IGlzIG5vdCBjdXJyZW50bHkgdXNlZCBieSBhbm90aGVyIG9wdGlvbi4gCiAgICAuUGFyYW1ldGVyIE5hbWUgCiAgICAgQSBzZWxmLWV4cGxhbmF0b3J5IHN0cmluZyB2YWx1ZS4gCiAgICAuUGFyYW1ldGVyIERhdGFUeXBlIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgZGF0YSB0eXBlIG9mIHRoZSB2YWx1ZShzKS4gCiAgICAgVGhlIGF2YWlsYWJsZSBvcHRpb25zIGFyZTogCiAgICAgICBCWVRFIAogICAgICAgV09SRCAKICAgICAgIERXT1JEIAogICAgICAgU1RSSU5HIAogICAgICAgSVBBRERSRVNTIAogICAgLlBhcmFtZXRlciBJc0FycmF5IAogICAgIEEgYm9vbGVhbiB2YWx1ZSBmb3Igd2hldGhlciB0aGUgYWNjZXB0ZWQgdmFsdWUgaXMgdW5hcnkgb3IgYW4gYXJyYXkuIAogICAgLlBhcmFtZXRlciBWZW5kb3JDbGFzcyAKICAgICBBIHN0cmluZyB2YWx1ZSBmb3IgdGhlIG5hbWUgb2YgdGhlIHZlbmRvciBjbGFzcyBvZiBESENQIG9wdGlvbnMuIElmIG5vbmUgaXMgZ2l2ZW4sIHRoZSBTdGFuZGFyZCBESENQIE9wdGlvbnMgY2xhc3MgaXMgdXNlZC4gCiAgICAuUGFyYW1ldGVyIFVzZXJDbGFzcyAKICAgICBBIHN0cmluZyB2YWx1ZSBmb3IgdGhlIG5hbWUgb2YgdGhlIHVzZXIgY2xhc3Mgb2YgdGhlIERIQ1Agb3B0aW9uLiBJZiBub25lIGlzIGdpdmVuLCB0aGUgRGVmYXVsdCBVc2VyIENsYXNzIGlzIHVzZWQuIAogICAgLlBhcmFtZXRlciBEZWZhdWx0VmFsdWUgCiAgICAgQSBzdHJpbmcgdmFsdWUgZm9yIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBvcHRpb24sIGlmIG5vdCBleHBsaWNpdGx5IGRlZmluZWQgYnkgYW4gYWRtaW4uIAogICAgLk91dHB1dHMgCiAgICAgU3VjY2VzcyA9IFN0cmluZyBtZXNzYWdlIAogICAgIEZhaWx1cmUgPSBOVUxMIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgTmV3LURIQ1BPcHRpb25EZWZpbml0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bVmFsaWRhdGVSYW5nZSgxLDI1NCldW2ludF0kT3B0aW9uSUQsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bc3RyaW5nXSROYW1lLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlU2V0KCJCWVRFIiwiV09SRCIsIkRXT1JEIiwiU1RSSU5HIiwiSVBBRERSRVNTIildW3N0cmluZ10kRGF0YVR5cGUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N3aXRjaF0kSXNBcnJheSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3RyaW5nXSRWZW5kb3JDbGFzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3RyaW5nXSREZXNjcmlwdGlvbiwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3RyaW5nXSREZWZhdWx0VmFsdWUgCiAgICAgICAgKSAKICAkYXJyYXlJbnQgPSBpZigkSXNBcnJheSl7MX1lbHNlezB9IAogIGlmKCEhJFZlbmRvckNsYXNzKSB7ICRWZW5kb3JDbGFzcyA9ICJ2ZW5kb3I9YCIkVmVuZG9yQ2xhc3NgIiIgfSAKICBpZighISREZXNjcmlwdGlvbikgeyAkRGVzY3JpcHRpb24gPSAiY29tbWVudD1gIiREZXNjcmlwdGlvbmAiIiB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBhZGQgb3B0aW9uZGVmICRPcHRpb25JRCBgIiROYW1lYCIgJERhdGFUeXBlICRhcnJheUludCAkVmVuZG9yQ2xhc3MgJERlc2NyaXB0aW9uIGAiJERlZmF1bHRWYWx1ZWAiIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IHJldHVybiAkcmVzdWx0IH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgfSAKIApmdW5jdGlvbiBOZXctREhDUFJlc2VydmF0aW9uIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgQ3JlYXRlcyBhIG5ldyByZXNlcnZhdGlvbiB3aXRoaW4gYSBnaXZlbiBzY29wZS4gCiAgICAuRXhhbXBsZSAKICAgICBOZXctREhDUFJlc2VydmF0aW9uIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1TY29wZSAxOTIuMTY4LjEuMCAtSVBBZGRyZXNzIDE5Mi4xNjguMS4yMzcgLU1BQ0FkZHJlc3MgMDA6MDA6MDA6MDA6MDA6MDAgCiAgICAgVGhpcyBleGFtcGxlIGFkZHMgYSByZXNlcnZhdGlvbiB0byB0aGUgMTkyLjE2OC4xLjAgc2NvcGUgb24gZGhjcDAxLmNvbnRvc28uY29tIGZvciB0aGUgSVAgYWRkcmVzcyBvZiAxOTIuMTY4LjEuMjM3LiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IE5ldy1ESENQUmVzZXJ2YXRpb24gLUlQQWRkcmVzcyAxOTIuMTY4LjEuMjM3IC1NQUNBZGRyZXNzIDAwLTAwLTAwLTAwLTAwLTAwIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgTmV3LURIQ1BSZXNlcnZhdGlvbiBjbWRsZXQgaXMgdXNlZCB0byBjcmVhdGUgYSBuZXcgcmVzZXJ2YXRpb24gd2l0aGluIGEgZ2l2ZW4gc2NvcGUuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgdGhlIHBhcmVudCBESENQUmVzZXJ2YXRpb24gb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTY29wZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTY29wZSBvYmplY3Qgb3IgdGhlIHN1Ym5ldCBhZGRyZXNzIG9mIHRoZSBzY29wZS4gSWYgZW50ZXJpbmcgdGhlIHN1Ym5ldCBhZGRyZXNzLCB0aGUgU2VydmVyIHBhcmFtZXRlciBtdXN0IGJlIGRlZmluZWQgYW5kIGJlIHRoZSBob3N0IG9mIHRoaXMgc2NvcGUuIAogICAgLlBhcmFtZXRlciBJUEFkZHJlc3MgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5QYXJhbWV0ZXIgTUFDQWRkcmVzcyAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gb25lIG9mIHRocmVlIHN0YW5kYXJkIGhhcmR3YXJlIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdHM6IAogICAgICAgMDA6MDA6MDA6MDA6MDA6MDAgCiAgICAgICAwMC0wMC0wMC0wMC0wMC0wMCAKICAgICAgIDAwMDAwMDAwMDAwMCAKICAgIC5QYXJhbWV0ZXIgTmFtZSAKICAgICBBIHN0cmluZyB2YWx1ZSB0ZW1wb3JhcmlseSBhc3NpZ25lZCB0byB0aGUgdW51c2VkIHJlc2VydmF0aW9uLiBPbmNlIHRoZSByZXNlcnZhdGlvbiBpcyBhY3RpdmUgaG93ZXZlciwgaXRzIG5hbWUgd2lsbCBjaGFuZ2UgdG8gdGhlIGNsaWVudCdzLiAKICAgIC5QYXJhbWV0ZXIgRGVzY3JpcHRpb24gCiAgICAgQSBzZWxmLWV4cGxhbmF0b3J5IHN0cmluZyB2YWx1ZS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQUmVzZXJ2YXRpb24gCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBOZXctREhDUFJlc2VydmF0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJElQQWRkcmVzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIihbMC05YS1mQS1GXXsyfVs6LV17MCwxfSl7NX1bMC05YS1mQS1GXXsyfSIpXVtzdHJpbmddJE1BQ0FkZHJlc3MsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N0cmluZ10kTmFtZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3RyaW5nXSREZXNjcmlwdGlvbiAKICAgICAgICApIAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdIC1hbmQgISRTZXJ2ZXIpIHsgJFNlcnZlciA9ICRTY29wZS5TZXJ2ZXIgfSAKICAkTUFDQWRkcmVzcyA9ICRNQUNBZGRyZXNzLlJlcGxhY2UoIi0iLCIiKS5SZXBsYWNlKCI6IiwiIikgCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNjb3BlICRTY29wZSBhZGQgcmVzZXJ2ZWRpcCAkSVBBZGRyZXNzICRNQUNBZGRyZXNzIGAiJE5hbWVgIiBgIiREZXNjcmlwdGlvbmAiIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IHJldHVybiBHZXQtREhDUFJlc2VydmF0aW9uIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJFNjb3BlIC1JUEFkZHJlc3MgJElQQWRkcmVzcyB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIH0gCiAKZnVuY3Rpb24gTmV3LURIQ1BTY29wZSB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIENyZWF0ZXMgYSBuZXcgc2NvcGUgb24gYSBnaXZlbiBzZXJ2ZXIuIAogICAgLkV4YW1wbGUgCiAgICAgTmV3LURIQ1BTY29wZSAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtQWRkcmVzcyAxOTIuMTY4LjEuMCAtU3VibmV0TWFzayAyNTUuMjU1LjI1NS4wIC1OYW1lIFRlc3RTY29wZSAKICAgICBUaGlzIGV4YW1wbGUgYWRkcyBhIHNjb3BlIGZvciB0aGUgc3VibmV0IDE5Mi4xNjguMS4wLzI0IG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2VydmVyIHwgTmV3LURIQ1BTY29wZSAtQWRkcmVzcyAxOTIuMTY4LjEuMCAtU3VibmV0TWFzayAyNTUuMjU1LjI1NS4wIC1OYW1lIFRlc3RTY29wZSAKICAgICBHaXZlbiB0aGF0ICRzY29wZSBpcyB0aGUgREhDUFNjb3BlIG9iamVjdCBmb3Igc3VibmV0IDE5Mi4xNjguMS4wIG9uIGRoY3AwMS5jb250b3NvLmNvbSwgdGhpcyBleGFtcGxlIGFjY29tcGxpc2hlcyB0aGUgc2FtZSBhcyB0aGUgb25lIGluIEV4YW1wbGUgMS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIE5ldy1ESENQU2NvcGUgY21kbGV0IGlzIHVzZWQgdG8gY3JlYXRlIGEgbmV3IHNjb3BlIG9uIGEgZ2l2ZW4gc2VydmVyLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIHRoZSBwYXJlbnQgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgQWRkcmVzcyAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gYW4gSVAgYWRkcmVzcyBzdHJpbmcgZm9ybWF0IChpZTogMC4wLjAuMCkuIAogICAgLlBhcmFtZXRlciBTdWJuZXRNYXNrIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSBpbiBhbiBJUCBhZGRyZXNzIHN0cmluZyBmb3JtYXQgKGllOiAwLjAuMC4wKS4gCiAgICAuUGFyYW1ldGVyIE5hbWUgCiAgICAgQSBzZWxmLWV4cGxhbmF0b3J5IHN0cmluZyB2YWx1ZS4gCiAgICAuUGFyYW1ldGVyIERlc2NyaXB0aW9uIAogICAgIEEgc2VsZi1leHBsYW5hdG9yeSBzdHJpbmcgdmFsdWUuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNjb3BlIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgTmV3LURIQ1BTY29wZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUGF0dGVybigiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIildW3N0cmluZ10kQWRkcmVzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJFN1Ym5ldE1hc2ssIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bc3RyaW5nXSROYW1lLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzdHJpbmddJERlc2NyaXB0aW9uIAogICAgICAgICkgCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIGFkZCBzY29wZSAkQWRkcmVzcyAkU3VibmV0TWFzayBgIiROYW1lYCIgYCIkRGVzY3JpcHRpb25gIiIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyByZXR1cm4gR2V0LURIQ1BTY29wZSAtU2VydmVyICRTZXJ2ZXIgLVNjb3BlICRBZGRyZXNzIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgfSAKIApmdW5jdGlvbiBSZWdpc3Rlci1ESENQU2VydmVyIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmVnaXN0ZXJzIGEgZ2l2ZW4gREhDUCBzZXJ2ZXIgd2l0aCBBY3RpdmUgRGlyZWN0b3J5LiAKICAgIC5FeGFtcGxlIAogICAgIFJlZ2lzdGVyLURIQ1BTZXJ2ZXIgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLUlQQWRkcmVzcyAxOTIuMTY4LjEuMzMgCiAgICAgVGhpcyBleGFtcGxlIHJlZ2lzdGVycyBkaGNwMDEuY29uc3Rvc28uY29tLCBhbmQgdGhlIElQIGFkZHJlc3Mgb2YgMTkyLjE2OC4xLjMzLCBhcyBhbiBhdXRob3JpemVkIERIQ1Agc2VydmVyIGluIEFjdGl2ZSBEaXJlY3RvcnkuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBSZWdpc3Rlci1ESENQU2VydmVyIGNtZGxldCBpcyB1c2VkIHRvIHJlZ2lzdGVyIGEgREhDUCBzZXJ2ZXIgd2l0aCBBY3RpdmUgRGlyZWN0b3J5LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgc2hvdWxkIGJlIHRoZSBGUUROIG9mIHRoZSBESENQIHNlcnZlci4gCiAgICAuUGFyYW1ldGVyIElQQWRkcmVzcyAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gYW4gSVAgYWRkcmVzcyBzdHJpbmcgZm9ybWF0IChpZTogMC4wLjAuMCkuIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgUmVnaXN0ZXItREhDUFNlcnZlciAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDAzLjE1LjIwMTEgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtzdHJpbmddJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVQYXR0ZXJuKCJcYig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXGIiKV1bc3RyaW5nXSRJUEFkZHJlc3MgCiAgICAgICAgKSAKICAkbGlzdCA9IFNob3ctREhDUFNlcnZlcnMgCiAgZm9yZWFjaCgkaXRlbSBpbiAkbGlzdCkgeyAKICAgIGlmKCRpdGVtLlNlcnZlciAtZXEgJFNlcnZlciAtb3IgJGl0ZW0uSVBBZGRyZXNzIC1lcSAkSVBBZGRyZXNzKSB7IAogICAgICBXcml0ZS1Ib3N0ICJFUlJPUjogVGhlIHNwZWNpZmllZCBzZXJ2ZXIgaXMgYWxyZWFkeSBwcmVzZW50OiAkKCRpdGVtLlNlcnZlcikgWyQoJGl0ZW0uSVBBZGRyZXNzKV0uIiAtRm9yZUdyb3VuZENvbG9yIFJlZCAKICAgICAgcmV0dXJuIAogICAgICB9IAogICAgfSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIGFkZCBzZXJ2ZXIgJFNlcnZlciAkKGlmKCRJUEFkZHJlc3MpeyIkSVBBZGRyZXNzIn0pIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IFdyaXRlLUhvc3QgIlNVQ0NFU1M6ICRTZXJ2ZXIgd2FzIHN1Y2Nlc3NmdWxseSByZWdpc3RlcmVkIGluIEFjdGl2ZSBEaXJlY3RvcnkuIiAtRm9yZUdyb3VuZENvbG9yIEdyZWVuIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoImFscmVhZHkgcHJlc2VudCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiBUaGUgc3BlY2lmaWVkIHNlcnZlciBpcyBhbHJlYWR5IHByZXNlbnQuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICB9IAogCmZ1bmN0aW9uIFJlbW92ZS1ESENQRXhjbHVzaW9uUmFuZ2UgeyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBSZW1vdmVzIGFuIGV4Y2x1c2lvbiByYW5nZSBmcm9tIGEgREhDUCBzY29wZS4gCiAgICAuRXhhbXBsZSAKICAgICBSZW1vdmUtREhDUEV4Y2x1c2lvblJhbmdlIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1TY29wZSAxOTIuMTY4LjEuMCAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMS4yMDAgLUVuZEFkZHJlc3MgMTkyLjE2OC4xLjI1NCAKICAgICBUaGlzIGV4YW1wbGUgcmVtb3ZlcyB0aGUgZXhjbHVzaW9uIHJhbmdlIGZyb20gdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIGRoY3AwMS5jb250b3NvLmNvbSB0aGF0IGlzIGJldHdlZW4gMTkyLjE2OC4xLjIwMCBhbmQgMTkyLjE2OC4xLjI1NC4gCiAgICAuRXhhbXBsZSAKICAgICAkc2NvcGUgfCBSZW1vdmUtREhDUEV4Y2x1c2lvblJhbmdlIC1TdGFydEFkZHJlc3MgMTkyLjE2OC4xLjIwMCAtRW5kQWRkcmVzcyAxOTIuMTY4LjEuMjU0IAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgUmVtb3ZlLURIQ1BFeGNsdXNpb25SYW5nZSBjbWRsZXQgaXMgdXNlZCB0byByZW1vdmUgYW4gZXhjbHVzaW9uIHJhbmdlIGZyb20gYSBnaXZlbiBESENQIHNjb3BlLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIHRoZSBwYXJlbnQgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNjb3BlIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFN0YXJ0QWRkcmVzcyAKICAgICBUaGlzIHBhcmFtZXRlciBzaWduaWZpZXMgdGhlIGJlZ2lubmluZyBJUCBhZGRyZXNzIG9mIHRoZSBleGNsdWRlZCByYW5nZS4gVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5QYXJhbWV0ZXIgRW5kQWRkcmVzcyAKICAgICBUaGlzIHBhcmFtZXRlciBzaWduaWZpZXMgdGhlIGVuZGluZyBJUCBhZGRyZXNzIG9mIHRoZSBleGNsdWRlZCByYW5nZS4gVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BTY29wZSAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFJlbW92ZS1ESENQRXhjbHVzaW9uUmFuZ2UgCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJFNjb3BlLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUGF0dGVybigiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIildW3N0cmluZ10kU3RhcnRBZGRyZXNzLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUGF0dGVybigiXGIoPzooPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXC4pezN9KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVxiIildW3N0cmluZ10kRW5kQWRkcmVzcyAKICAgICAgICApIAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdIC1hbmQgISRTZXJ2ZXIpIHsgJFNlcnZlciA9ICRTY29wZS5TZXJ2ZXIgfSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNlcnZlciBcXCRTZXJ2ZXIgc2NvcGUgJFNjb3BlIGRlbGV0ZSBleGNsdWRlcmFuZ2UgJFN0YXJ0QWRkcmVzcyAkRW5kQWRkcmVzcyIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IAogICAgICAkU2NvcGUuRXhjbHVzaW9uUmFuZ2VzID0gQCgkU2NvcGUuRXhjbHVzaW9uUmFuZ2VzIHwgV2hlcmUtT2JqZWN0IHsgJF8uU3RhcnRBZGRyZXNzIC1uZSAkU3RhcnRBZGRyZXNzIC1hbmQgJF8uRW5kQWRkcmVzcyAtbmUgJEVuZEFkZHJlc3MgfSkgCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuIEdldC1ESENQU2NvcGUgLVNlcnZlciAkU2VydmVyIC1TY29wZSAkU2NvcGUgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgcmV0dXJuICRTY29wZSB9IAogIH0gCiAKZnVuY3Rpb24gUmVtb3ZlLURIQ1BGaWx0ZXIgeyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBSZW1vdmVzIGEgTUFDIGFkZHJlc3MgZmlsdGVyIGZyb20gdGhlIERIQ1Agc2VydmVyLiAKICAgIC5FeGFtcGxlIAogICAgIFJlbW92ZS1ESENQRmlsdGVyIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1NQUNBZGRyZXNzIDAwLTAwLTAwLTAwLTAwIAogICAgIFJlbW92ZXMgdGhlIGZpbHRlciBmb3IgdGhlIGdpdmVuIE1BQyBhZGRyZXNzIG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIFJlbW92ZS1ESENQRmlsdGVyIGNtZGxldCBpcyB1c2VkIHRvIHJlbW92ZSBNQUMgYWRkcmVzcyBmaWx0ZXJzIGZyb20gYSBnaXZlbiBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTZXJ2ZXIgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2VydmVyIG9iamVjdCBvciB0aGUgbmFtZSBvciBGUUROIG9mIHRoZSBESENQIHNlcnZlci4gVGhlIGRlc2lnbmF0ZWQgc2VydmVyIG11c3QgYnkgYSB2YWxpZCBESENQIHNlcnZlci4gCiAgICAgTm90ZTogVGhpcyBjbWRsZXQgd2lsbCBwcm9jZXNzIHNpZ25pZmljYW50bHkgZmFzdGVyIGlmIHRoZSBTZXJ2ZXIgdmFyaWFibGUgc3VwcGxpZWQgaXMgYSBESENQU2VydmVyIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIE1BQ0FkZHJlc3MgCiAgICAgVGhpcyBwYXJhbWV0ZXIgZGVmaW5lcyB0aGUgTUFDIGFkZHJlc3MgZm9yIHRoZSBmaWx0ZXIuIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgbXVzdCBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhbmRhcmQgaGFyZHdhcmUgYWRkcmVzcyBzdHJpbmcgZm9ybWF0czogCiAgICAgICAwMDowMDowMDowMDowMDowMCAKICAgICAgIDAwLTAwLTAwLTAwLTAwLTAwIAogICAgICAgMDAwMDAwMDAwMDAwIAogICAgLlBhcmFtZXRlciBGaWx0ZXJPYmplY3QgCiAgICAgVGhpcyBwYXJhbWV0ZXIgaXMgYSBESENQRmlsdGVyIG9iamVjdCwgYW5kIGlzIHVzZWQgdG8gcGFzcyB0aGUgTUFDIGFkZHJlc3MgaW5mb3JtYXRpb24gdG8gdGhlIENtZExldC4gCiAgICAuT3V0cHV0cyAKICAgICBESENQRmlsdGVyQ29uZmlndXJhdGlvbiAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFJlbW92ZS1ESENQRmlsdGVyIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMDYuMTYuMjAxMSAKICAjPiAKICBbQ21kbGV0QmluZGluZyhEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZT0iQnlNQUMiKV0gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsUGFyYW1ldGVyU2V0TmFtZT0iQnlNQUMiKV1bUFNPYmplY3RdJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsUGFyYW1ldGVyU2V0TmFtZT0iQnlNQUMiKV1bVmFsaWRhdGVQYXR0ZXJuKCIoWzAtOWEtZkEtRl17Mn1bOi1dezAsMX0pezV9WzAtOWEtZkEtRl17Mn0iKV1bc3RyaW5nXSRNQUNBZGRyZXNzLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxQYXJhbWV0ZXJTZXROYW1lPSJCeU9iamVjdCIpXVtESENQRmlsdGVyXSRGaWx0ZXJPYmplY3QgCiAgICAgICAgKSAKICAkU2VydmVyID0gaWYoJEZpbHRlck9iamVjdCl7JEZpbHRlck9iamVjdC5TZXJ2ZXJ9ZWxzZXskU2VydmVyfSAKICAkTUFDQWRkcmVzcyA9IGlmKCRGaWx0ZXJPYmplY3QpeyRGaWx0ZXJPYmplY3QuTUFDQWRkcmVzc31lbHNleyRNQUNBZGRyZXNzLlJlcGxhY2UoIi0iLCIiKS5SZXBsYWNlKCI6IiwiIil9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciB2NCBkZWxldGUgZmlsdGVyICRNQUNBZGRyZXNzIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJHRleHQuQ291bnQgLWdlIDQgLWFuZCAkdGV4dFszXS5Db250YWlucygibm90IGEgdmFsaWQgRE5TIFNlcnZlciIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkKCR0ZXh0WzNdKSIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogICAgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiU2VydmVyIG1heSBub3QgZnVuY3Rpb24gcHJvcGVybHkiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHNlcnZlciBpcyBpbmFjY2Vzc2libGUgb3IgaXMgbm90IGEgREhDUCBzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgcmV0dXJuIEdldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbiAtU2VydmVyICRTZXJ2ZXIgCiAgfSAKIAogCmZ1bmN0aW9uIFJlbW92ZS1ESENQSVBSYW5nZSB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIFJlbW92ZXMgYW4gaXAgcmFuZ2UgZnJvbSBhIERIQ1Agc2NvcGUuIAogICAgLkV4YW1wbGUgCiAgICAgUmVtb3ZlLURIQ1BJUFJhbmdlIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1TY29wZSAxOTIuMTY4LjEuMCAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMS4zMCAtRW5kQWRkcmVzcyAxOTIuMTY4LjEuMjU0IAogICAgIFRoaXMgZXhhbXBsZSByZW1vdmVzIHRoZSBJUCByYW5nZSBmcm9tIHRoZSAxOTIuMTY4LjEuMCBzY29wZSBvbiBkaGNwMDEuY29udG9zby5jb20gdGhhdCBpcyBiZXR3ZWVuIDE5Mi4xNjguMS4zMCBhbmQgMTkyLjE2OC4xLjI1NC4gCiAgICAuRXhhbXBsZSAKICAgICAkc2NvcGUgfCBSZW1vdmUtREhDUElQUmFuZ2UgLVN0YXJ0QWRkcmVzcyAxOTIuMTY4LjEuMzAgLUVuZEFkZHJlc3MgMTkyLjE2OC4xLjI1NCAKICAgICBHaXZlbiB0aGF0ICRzY29wZSBpcyB0aGUgREhDUFNjb3BlIG9iamVjdCBmb3Igc3VibmV0IDE5Mi4xNjguMS4wIG9uIGRoY3AwMS5jb250b3NvLmNvbSwgdGhpcyBleGFtcGxlIGFjY29tcGxpc2hlcyB0aGUgc2FtZSBhcyB0aGUgb25lIGluIEV4YW1wbGUgMS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIFJlbW92ZS1ESENQSVBSYW5nZSBjbWRsZXQgaXMgdXNlZCB0byByZW1vdmUgYW4gSVAgcmFuZ2UgZnJvbSBhIGdpdmVuIERIQ1Agc2NvcGUuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgdGhlIHBhcmVudCBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBTY29wZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTY29wZSBvYmplY3Qgb3IgdGhlIHN1Ym5ldCBhZGRyZXNzIG9mIHRoZSBzY29wZS4gSWYgZW50ZXJpbmcgdGhlIHN1Ym5ldCBhZGRyZXNzLCB0aGUgU2VydmVyIHBhcmFtZXRlciBtdXN0IGJlIGRlZmluZWQgYW5kIGJlIHRoZSBob3N0IG9mIHRoaXMgc2NvcGUuIAogICAgIE5vdGU6IFRoaXMgY21kbGV0IHdpbGwgcHJvY2VzcyBzaWduaWZpY2FudGx5IGZhc3RlciBpZiB0aGUgU2NvcGUgdmFyaWFibGUgc3VwcGxpZWQgaXMgYSBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU3RhcnRBZGRyZXNzIAogICAgIFRoaXMgcGFyYW1ldGVyIHNpZ25pZmllcyB0aGUgYmVnaW5uaW5nIElQIGFkZHJlc3Mgb2YgdGhlIElQIHJhbmdlLiBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gYW4gSVAgYWRkcmVzcyBzdHJpbmcgZm9ybWF0IChpZTogMC4wLjAuMCkuIAogICAgLlBhcmFtZXRlciBFbmRBZGRyZXNzIAogICAgIFRoaXMgcGFyYW1ldGVyIHNpZ25pZmllcyB0aGUgZW5kaW5nIElQIGFkZHJlc3Mgb2YgdGhlIElQIHJhbmdlLiBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gYW4gSVAgYWRkcmVzcyBzdHJpbmcgZm9ybWF0IChpZTogMC4wLjAuMCkuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNjb3BlIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgUmVtb3ZlLURIQ1BJUFJhbmdlIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJFN0YXJ0QWRkcmVzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJEVuZEFkZHJlc3MgCiAgICAgICAgKSAKICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSAtYW5kICEkU2VydmVyKSB7ICRTZXJ2ZXIgPSAkU2NvcGUuU2VydmVyIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNjb3BlICRTY29wZSBkZWxldGUgaXByYW5nZSAkU3RhcnRBZGRyZXNzICRFbmRBZGRyZXNzIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgCiAgICAgICRTY29wZS5JUFJhbmdlcyA9IEAoJFNjb3BlLklQUmFuZ2VzIHwgV2hlcmUtT2JqZWN0IHsgJF8uU3RhcnRBZGRyZXNzIC1uZSAkU3RhcnRBZGRyZXNzIC1hbmQgJF8uRW5kQWRkcmVzcyAtbmUgJEVuZEFkZHJlc3MgfSkgCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuIEdldC1ESENQU2NvcGUgLVNlcnZlciAkU2VydmVyIC1TY29wZSAkU2NvcGUgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgcmV0dXJuICRTY29wZSB9IAogIH0gCiAKZnVuY3Rpb24gUmVtb3ZlLURIQ1BPcHRpb24geyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBSZW1vdmVzIHRoZSB2YWx1ZSBvZiBhbiBvcHRpb24gZnJvbSBhIGdpdmVuIHNlcnZlciwgc2NvcGUsIG9yIHJlc2VydmF0aW9uLiAKICAgIC5FeGFtcGxlIAogICAgIFJlbW92ZS1ESENQT3B0aW9uIC1Pd25lciBkaGNwMDEuY29udG9zby5jb20vMTkyLjE2OC4xLjAgLU9wdGlvbklEIDIwMCAKICAgICBUaGlzIGV4YW1wbGUgcmVtb3ZlcyB0aGUgdmFsdWUgc2V0IGZvciBvcHRpb24gMjAwIGZyb20gdGhlIHNjb3BlIG9mIDE5Mi4xNjguMS4wIG9uIHNlcnZlciBkaGNwMDEuY29udG9zby5jb20uIAogICAgLkV4YW1wbGUgCiAgICAgJHJlc2VydmF0aW9uIHwgUmVtb3ZlLURIQ1BPcHRpb24gLU9wdGlvbklEIDE1IAogICAgIFRoaXMgZXhhbXBsZSByZW1vdmVzIHRoZSB2YWx1ZSBzZXQgZm9yIG9wdGlvbiAyNSBmcm9tIHRoZSByZXNlcnZhdGlvbiBhcyBkZWZpbmVkIGJ5IHRoZSBESENQUmVzZXJ2YXRpb24gb2JqZWN0LCAkcmVzZXJ2YXRpb24uIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBSZW1vdmUtREhDUE9wdGlvbiBjbWRsZXQgaXMgdXNlZCB0byByZW1vdmUgdGhlIHZhbHVlIHNldCBmb3IgYW4gb3B0aW9uIGZyb20gYSBnaXZlbiBzZXJ2ZXIsIHNjb3BlLCBvciByZXNlcnZhdGlvbi4gCiAgICAuUGFyYW1ldGVyIE93bmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciwgREhDUFNjb3BlLCBvciBESENQUmVzZXJ2YXRpb24gb2JqZWN0LiBJdCBjYW4gYWxzbyBiZSBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGVzZSBvYmplY3RzLCBkZWZpbmVkIHRodXM6IAogICAgICAgU2VydmVyTmFtZU9yRlFETiAKICAgICAgIFNlcnZlck5hbWVPckZRRE4vU2NvcGVBZGRyZXNzIAogICAgICAgU2VydmVyTmFtZU9yRlFETi9TY29wZUFkZHJlc3MvUmVzZXJ2YXRpb25BZGRyZXNzIAogICAgLlBhcmFtZXRlciBPcHRpb25JRCAKICAgICBUaGUgaW50ZWdlciB2YWx1ZSBvZiB0aGUgb3B0aW9uIHdob3NlIHZhbHVlIHlvdSB3aXNoIHRvIHJlbW92ZS4gCiAgICAuUGFyYW1ldGVyIFZlbmRvckNsYXNzIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgbmFtZSBvZiB0aGUgdmVuZG9yIGNsYXNzIG9mIERIQ1Agb3B0aW9ucy4gSWYgbm9uZSBpcyBnaXZlbiwgdGhlIFN0YW5kYXJkIERIQ1AgT3B0aW9ucyBjbGFzcyBpcyB1c2VkLiAKICAgIC5QYXJhbWV0ZXIgVXNlckNsYXNzIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgbmFtZSBvZiB0aGUgdXNlciBjbGFzcyBvZiB0aGUgREhDUCBvcHRpb24uIElmIG5vbmUgaXMgZ2l2ZW4sIHRoZSBEZWZhdWx0IFVzZXIgQ2xhc3MgaXMgdXNlZC4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2VydmVyLCBESENQU2NvcGUsIG9yIERIQ1BSZXNlcnZhdGlvbiBkZXBlbmRpbmcuIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgUmVtb3ZlLURIQ1BPcHRpb24gCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFBhcmFtKFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV1bUFNPYmplY3RdJE93bmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUmFuZ2UoMSwyNTQpXVtpbnRdJE9wdGlvbklELCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzdHJpbmddJFZlbmRvckNsYXNzLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzdHJpbmddJFVzZXJDbGFzcywgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3dpdGNoXSRTaWxlbnQgCiAgICAgICAgKSAKICAkc2VydmVyID0gJG51bGwgCiAgJHNjb3BlID0gJG51bGwgCiAgJHJlc2VydmF0aW9uID0gJG51bGwgCiAgaWYoJE93bmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BTZXJ2ZXJdKSB7ICRzZXJ2ZXIgPSAkT3duZXIuTmFtZSB9IAogIGVsc2VpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSkgeyAKICAgICRzZXJ2ZXIgPSAkT3duZXIuU2VydmVyIAogICAgJHNjb3BlID0gJE93bmVyLkFkZHJlc3MgCiAgICB9IAogIGVsc2VpZigkT3duZXIuR2V0VHlwZSgpIC1lcSBbREhDUFJlc2VydmF0aW9uXSkgeyAKICAgICRzZXJ2ZXIgPSAkT3duZXIuU2VydmVyIAogICAgJHNjb3BlID0gJE93bmVyLlNjb3BlIAogICAgJHJlc2VydmF0aW9uID0gJE93bmVyLklQQWRkcmVzcyAKICAgIH0gCiAgZWxzZSB7IAogICAgJHBhcnRzID0gJE93bmVyLlRvU3RyaW5nKCkuU3BsaXQoIi8iKSAKICAgICRzZXJ2ZXIgPSAkcGFydHNbMF0gCiAgICBpZigkcGFydHMuQ291bnQgLWd0IDEpIHsgJHNjb3BlID0gJHBhcnRzWzFdIH0gCiAgICBpZigkcGFydHMuQ291bnQgLWd0IDIpIHsgJHJlc2VydmF0aW9uID0gJHBhcnRzWzJdIH0gCiAgICB9IAogIGlmKCRyZXNlcnZhdGlvbikgeyAkY29tbWFuZCA9ICJcXCRzZXJ2ZXIgc2NvcGUgJHNjb3BlIGRlbGV0ZSByZXNlcnZlZG9wdGlvbnZhbHVlICRyZXNlcnZhdGlvbiIgfSAKICBlbHNlIHsgJGNvbW1hbmQgPSBpZigkc2NvcGUpeyJcXCRzZXJ2ZXIgc2NvcGUgJHNjb3BlIGRlbGV0ZSBvcHRpb252YWx1ZSJ9ZWxzZXsiXFwkc2VydmVyIGRlbGV0ZSBvcHRpb252YWx1ZSJ9IH0gCiAgaWYoISEkVmVuZG9yQ2xhc3MpIHsgJFZlbmRvckNsYXNzID0gInZlbmRvcj1gIiRWZW5kb3JDbGFzc2AiIiB9IAogIGlmKCEhJFVzZXJDbGFzcykgeyAkVXNlckNsYXNzID0gInVzZXI9YCIkVXNlckNsYXNzYCIiIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgJGNvbW1hbmQgJE9wdGlvbklEICRWZW5kb3JDbGFzcyAkVXNlckNsYXNzIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoQChbREhDUFNlcnZlcl0sW0RIQ1BTY29wZV0sW0RIQ1BSZXNlcnZhdGlvbl0pIC1jb250YWlucyAkT3duZXIuR2V0VHlwZSgpKSB7IAogICAgICAkT3duZXIuT3B0aW9ucyA9IEAoJE93bmVyLk9wdGlvbnMgfCBXaGVyZS1PYmplY3QgeyAkXy5PcHRpb25JRCAtbmUgJE9wdGlvbklEIH0pIAogICAgICByZXR1cm4gJE93bmVyIAogICAgICB9IAogICAgZWxzZSB7IHJldHVybiAkcmVzdWx0IH0gCiAgICB9IAogIGVsc2VpZighJFNpbGVudCkgeyAKICAgIGlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRzZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICAgIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJUaGUgY29tbWFuZCBuZWVkcyBhIHZhbGlkIFNjb3BlIElQIEFkZHJlc3MiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHNjb3BlIGlzIG5vdCBhIHZhbGlkIHNjb3BlIG9uICRzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogICAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoImNsaWVudCBpcyBub3QgYSByZXNlcnZlZCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzZXJ2YXRpb24gaXMgbm90IGEgdmFsaWQgcmVzZXJ2YXRpb24gaW4gJHNjb3BlIG9uICRzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogICAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogICAgfSAKICB9IAogCmZ1bmN0aW9uIFJlbW92ZS1ESENQT3B0aW9uRGVmaW5pdGlvbiB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIFJlbW92ZXMgYW4gb3B0aW9uIGZyb20gYSBnaXZlbiBzZXJ2ZXIuIAogICAgLkV4YW1wbGUgCiAgICAgUmVtb3ZlLURIQ1BPcHRpb25EZWZpbml0aW9uIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1PcHRpb25JRCAyMDAgCiAgICAgVGhpcyBleGFtcGxlIHJlbW92ZXMgb3B0aW9uIDIwMCBmcm9tIHNlcnZlciBkaGNwMDEuY29udG9zby5jb20gCiAgICAuRXhhbXBsZSAKICAgICAkc2VydmVyIHwgUmVtb3ZlLURIQ1BPcHRpb25EZWZpbml0aW9uIC1PcHRpb25JRCAyMDAgCiAgICAgR2l2ZW4gdGhhdCAkc2VydmVyIGlzIHRoZSBESENQU2VydmVyIG9iamVjdCBmb3IgZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxIHdpdGggYSBkZXNjcmlwdGlvbiB0b28uIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBSZW1vdmUtREhDUE9wdGlvbkRlZmluaXRpb24gY21kbGV0IGlzIHVzZWQgdG8gcmVtb3ZlIGFuIG9wdGlvbiBmcm9tIGEgZ2l2ZW4gc2VydmVyLiBPbmNlIHJlbW92ZWQsIHRoZSBvcHRpb24gY2FuIG5vIGxvbmdlciBiZSBzZXQgb24gdGhhdCBzZXJ2ZXIgdW50aWwgaXQgaXMgcmVjcmVhdGVkLiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBPcHRpb25JRCAKICAgICBBbiBpbnRlZ2VyIGJldHdlZW4gMSBhbmQgMjU0IHRoYXQgaXMgbm90IGN1cnJlbnRseSB1c2VkIGJ5IGFub3RoZXIgb3B0aW9uLiAKICAgIC5QYXJhbWV0ZXIgTmFtZSAKICAgICBBIHNlbGYtZXhwbGFuYXRvcnkgc3RyaW5nIHZhbHVlLiAKICAgIC5QYXJhbWV0ZXIgRGF0YVR5cGUgCiAgICAgQSBzdHJpbmcgdmFsdWUgZm9yIHRoZSBkYXRhIHR5cGUgb2YgdGhlIHZhbHVlKHMpLiAKICAgICBUaGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOiAKICAgICAgIEJZVEUgCiAgICAgICBXT1JEIAogICAgICAgRFdPUkQgCiAgICAgICBTVFJJTkcgCiAgICAgICBJUEFERFJFU1MgCiAgICAuUGFyYW1ldGVyIElzQXJyYXkgCiAgICAgQSBib29sZWFuIHZhbHVlIGZvciB3aGV0aGVyIHRoZSBhY2NlcHRlZCB2YWx1ZSBpcyB1bmFyeSBvciBhbiBhcnJheS4gCiAgICAuUGFyYW1ldGVyIFZlbmRvckNsYXNzIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgbmFtZSBvZiB0aGUgdmVuZG9yIGNsYXNzIG9mIERIQ1Agb3B0aW9ucy4gSWYgbm9uZSBpcyBnaXZlbiwgdGhlIFN0YW5kYXJkIERIQ1AgT3B0aW9ucyBjbGFzcyBpcyB1c2VkLiAKICAgIC5PdXRwdXRzIAogICAgIFN1Y2Nlc3MgPSBTdHJpbmcgbWVzc2FnZSAKICAgICBGYWlsdXJlID0gTlVMTCAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFJlbW92ZS1ESENQT3B0aW9uRGVmaW5pdGlvbiAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlUmFuZ2UoMSwyNTQpXVtpbnRdJE9wdGlvbklELCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzdHJpbmddJFZlbmRvckNsYXNzIAogICAgICAgICkgCiAgaWYoISEkVmVuZG9yQ2xhc3MpIHsgJFZlbmRvckNsYXNzID0gInZlbmRvcj1gIiRWZW5kb3JDbGFzc2AiIiB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBkZWxldGUgb3B0aW9uZGVmICRPcHRpb25JRCAkVmVuZG9yQ2xhc3MiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgcmV0dXJuICRyZXN1bHQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiU2VydmVyIG1heSBub3QgZnVuY3Rpb24gcHJvcGVybHkiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJFNlcnZlciBpcyBpbmFjY2Vzc2libGUgb3IgaXMgbm90IGEgREhDUCBzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICB9IAogCmZ1bmN0aW9uIFJlbW92ZS1ESENQUmVzZXJ2YXRpb24geyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBSZW1vdmVzIGEgcmVzZXJ2YXRpb24gZnJvbSBhIHNjb3BlLiAKICAgIC5FeGFtcGxlIAogICAgIFJlbW92ZS1ESENQUmVzZXJ2YXRpb24gLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIC1JUEFkZHJlc3MgMTkyLjE2OC4xLjIzNyAtTUFDQWRkcmVzcyAwMDowMDowMDowMDowMDowMCAKICAgICBUaGlzIGV4YW1wbGUgcmVtb3ZlcyB0aGUgcmVzZXJ2YXRpb24gZm9yIDE5Mi4xNjguMS4yMzcgZnJvbSB0aGUgMTkyLjE2OC4xLjAgc2NvcGUgb24gZGhjcDAxLmNvbnRvc28uY29tLiAKICAgIC5FeGFtcGxlIAogICAgIFJlbW92ZS1ESENQUmVzZXJ2YXRpb24gLVJlc2VydmF0aW9uICRyZXNlcnZhdGlvbiAKICAgICBHaXZlbiB0aGF0ICRyZXNlcnZhdGlvbiBpcyB0aGUgREhDUFJlc2VydmF0aW9uIG9iamVjdCBmb3IgdGhlIElQIDE5Mi4xNjguMS4yMzcgaW4gMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgUmVtb3ZlLURIQ1BSZXNlcnZhdGlvbiBjbWRsZXQgaXMgdXNlZCB0byByZW1vdmUgYSByZXNlcnZhdGlvbiBmcm9tIGEgc2NvcGUuIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgdGhlIHBhcmVudCBESENQU2NvcGUgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgUmVzZXJ2YXRpb24gCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtYXRlciBtdXN0IGJlIHRoZSBESENQUmVzZXJ2YXRpb24gb2JqZWN0IG9mIHRoZSByZXNlcnZhdGlvbiB5b3Ugd2lzaCB0byByZW1vdmUuIAogICAgLlBhcmFtZXRlciBTZXJ2ZXIgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2VydmVyIG9iamVjdCBvciB0aGUgbmFtZSBvciBGUUROIG9mIHRoZSBESENQIHNlcnZlci4gVGhlIGRlc2lnbmF0ZWQgc2VydmVyIG11c3QgYnkgYSB2YWxpZCBESENQIHNlcnZlci4gCiAgICAuUGFyYW1ldGVyIFNjb3BlIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNjb3BlIG9iamVjdCBvciB0aGUgc3VibmV0IGFkZHJlc3Mgb2YgdGhlIHNjb3BlLiBJZiBlbnRlcmluZyB0aGUgc3VibmV0IGFkZHJlc3MsIHRoZSBTZXJ2ZXIgcGFyYW1ldGVyIG11c3QgYmUgZGVmaW5lZCBhbmQgYmUgdGhlIGhvc3Qgb2YgdGhpcyBzY29wZS4gCiAgICAgTm90ZTogVGhpcyBjbWRsZXQgd2lsbCBwcm9jZXNzIHNpZ25pZmljYW50bHkgZmFzdGVyIGlmIHRoZSBTY29wZSB2YXJpYWJsZSBzdXBwbGllZCBpcyBhIERIQ1BTY29wZSBvYmplY3QuIAogICAgLlBhcmFtZXRlciBJUEFkZHJlc3MgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5QYXJhbWV0ZXIgTUFDQWRkcmVzcyAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIG11c3QgYmUgaW4gb25lIG9mIHRocmVlIHN0YW5kYXJkIGhhcmR3YXJlIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdHM6IAogICAgICAgMDA6MDA6MDA6MDA6MDA6MDAgCiAgICAgICAwMC0wMC0wMC0wMC0wMC0wMCAKICAgICAgIDAwMDAwMDAwMDAwMCAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BTY29wZSAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFJlbW92ZS1ESENQUmVzZXJ2YXRpb24gCiAgICAgTW9kdWxlOiBNaWNyb3NvZnQuREhDUC5Qb3dlclNoZWxsLkFkbWluLnBzbTEgCiAgICAgQXV0aG9yOiBKZXJlbXkgRW5nZWwgCiAgICAgRGF0ZTogICAxMi4xNi4yMDEwIAogICM+IAogIFtDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSJCeU1BQyIpXSAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUsUGFyYW1ldGVyU2V0TmFtZT0iQnlPYmplY3QiKV1bREhDUFJlc2VydmF0aW9uXSRSZXNlcnZhdGlvbiwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLFBhcmFtZXRlclNldE5hbWU9IkJ5TUFDIildW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFBhcmFtZXRlclNldE5hbWU9IkJ5TUFDIildW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsUGFyYW1ldGVyU2V0TmFtZT0iQnlNQUMiKV1bVmFsaWRhdGVQYXR0ZXJuKCJcYig/Oig/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcLil7M30oPzoyNVswLTVdfDJbMC00XVswLTldfFswMV0/WzAtOV1bMC05XT8pXGIiKV1bc3RyaW5nXSRJUEFkZHJlc3MsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFBhcmFtZXRlclNldE5hbWU9IkJ5TUFDIildW1ZhbGlkYXRlUGF0dGVybigiKFswLTlhLWZBLUZdezJ9WzotXXswLDF9KXs1fVswLTlhLWZBLUZdezJ9IildW3N0cmluZ10kTUFDQWRkcmVzcyAKICAgICAgICApIAogIGlmKCRSZXNlcnZhdGlvbiAtYW5kICRSZXNlcnZhdGlvbi5HZXRUeXBlKCkgLWVxIFtESENQUmVzZXJ2YXRpb25dKSB7IAogICAgJFNlcnZlciA9ICRSZXNlcnZhdGlvbi5TZXJ2ZXIgCiAgICAkU2NvcGUgPSAkUmVzZXJ2YXRpb24uU2NvcGUgCiAgICAkSVBBZGRyZXNzID0gJFJlc2VydmF0aW9uLklQQWRkcmVzcyAKICAgICRNQUNBZGRyZXNzID0gJFJlc2VydmF0aW9uLk1BQ0FkZHJlc3MuUmVwbGFjZSgiLSIsIiIpLlJlcGxhY2UoIjoiLCIiKSAKICAgIH0gCiAgZWxzZSB7IAogICAgaWYoISRTY29wZSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogSW52YWxpZCBudWxsIGVudHJ5IGZvciBzY29wZS4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAgIGVsc2VpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSAtYW5kICEkU2VydmVyKSB7ICRTZXJ2ZXIgPSAkU2NvcGUuU2VydmVyIH0gCiAgICBpZighJElQQWRkcmVzcykgeyBXcml0ZS1Ib3N0ICJFcnJvcjogSW52YWxpZCBudWxsIGVudHJ5IGZvciBJUEFkZHJlc3MuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICBpZighJE1BQ0FkZHJlc3MpIHsgV3JpdGUtSG9zdCAiRXJyb3I6IEludmFsaWQgbnVsbCBlbnRyeSBmb3IgTUFDQWRkcmVzcy4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAgIGVsc2UgeyAkTUFDQWRkcmVzcyA9ICRNQUNBZGRyZXNzLlJlcGxhY2UoIi0iLCIiKS5SZXBsYWNlKCIuIiwiIikgfSAKICAgIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNjb3BlICRTY29wZSBkZWxldGUgcmVzZXJ2ZWRpcCAkSVBBZGRyZXNzICRNQUNBZGRyZXNzIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgCiAgICAgICRTY29wZS5SZXNlcnZhdGlvbnMgPSBAKCRTY29wZS5SZXNlcnZhdGlvbnMgfCBXaGVyZS1PYmplY3QgeyAkXy5JUEFkZHJlc3MgLW5lICRJUEFkZHJlc3MgfSkgCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuICRyZXN1bHQgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgfSAKIApmdW5jdGlvbiBSZW1vdmUtREhDUFNjb3BlIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgUmVtb3ZlcyBhIHNjb3BlIGZyb20gYSBzZXJ2ZXIuIAogICAgLkV4YW1wbGUgCiAgICAgUmVtb3ZlLURIQ1BTY29wZSAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtU2NvcGUgMTkyLjE2OC4xLjAgCiAgICAgVGhpcyBleGFtcGxlIHJlbW92ZXMgdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2NvcGUgfCBHZXQtREhDUFNjb3BlIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgUmVtb3ZlLURIQ1BTY29wZSBjbWRsZXQgaXMgdXNlZCB0byByZW1vdmUgYSBzcGVjaWZpYyBESENQIHNjb3BlcyBmcm9tIGEgZ2l2ZW4gc2VydmVyLiBUaGUgcmV0dXJuIHZhbHVlIGZvciBzdWNjZXNzIGlzIGEgREhDUFNlcnZlciBvYmplY3QuIAogICAgLlBhcmFtZXRlciBTZXJ2ZXIgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2VydmVyIG9iamVjdCBvciB0aGUgbmFtZSBvciBGUUROIG9mIHRoZSBESENQIHNlcnZlci4gVGhlIGRlc2lnbmF0ZWQgc2VydmVyIG11c3QgYnkgYSB2YWxpZCBESENQIHNlcnZlci4gCiAgICAgTm90ZTogVGhpcyBjbWRsZXQgd2lsbCBwcm9jZXNzIHNpZ25pZmljYW50bHkgZmFzdGVyIGlmIHRoZSBTZXJ2ZXIgdmFyaWFibGUgc3VwcGxpZWQgaXMgYSBESENQU2VydmVyIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNjb3BlIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNjb3BlIG9iamVjdCBvciB0aGUgc3VibmV0IGFkZHJlc3Mgb2YgdGhlIHNjb3BlLiBJZiBlbnRlcmluZyB0aGUgc3VibmV0IGFkZHJlc3MsIHRoZSBTZXJ2ZXIgcGFyYW1ldGVyIG11c3QgYmUgZGVmaW5lZCBhbmQgYmUgdGhlIGhvc3Qgb2YgdGhpcyBzY29wZS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2VydmVyIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgUmVtb3ZlLURIQ1BTY29wZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bUFNPYmplY3RdJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2NvcGUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N3aXRjaF0kRm9yY2UgCiAgICAgICAgKSAKICBpZigkU2NvcGUuR2V0VHlwZSgpIC1lcSBbREhDUFNjb3BlXSAtYW5kICEkU2VydmVyKSB7ICRTZXJ2ZXIgPSAkU2NvcGUuU2VydmVyIH0gCiAgJGZvcmNlRmxhZyA9IGlmKCRGb3JjZSl7IkRIQ1BGVUxMRk9SQ0UifWVsc2V7IkRIQ1BOT0ZPUkNFIn0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIGRlbGV0ZSBzY29wZSAkU2NvcGUgJGZvcmNlRmxhZyIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCRTZXJ2ZXIuR2V0VHlwZSgpIC1lcSBbREhDUFNlcnZlcl0pIHsgCiAgICAgICRTZXJ2ZXIuU2NvcGVzID0gQCgkU2VydmVyLlNjb3BlcyB8IFdoZXJlLU9iamVjdCB7ICRfLkFkZHJlc3MgLW5lICIkU2NvcGUiIH0pIAogICAgICByZXR1cm4gJFNlcnZlciAKICAgICAgfSAKICAgIGVsc2UgeyByZXR1cm4gR2V0LURIQ1BTZXJ2ZXIgLVNlcnZlciAkU2VydmVyIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJjYW5ub3QgYmUgcmVtb3ZlZCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiBUaGUgc2NvcGUgWyRTY29wZV0gaGFzIGFjdGl2ZSBsZWFzZXMgYW5kIGNhbm5vdCBiZSByZW1vdmVkIHdpdGhvdXQgdGhlIC1Gb3JjZSBwYXJhbWV0ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIH0gCiAKZnVuY3Rpb24gU2V0LURIQ1BDb25mbGljdERldGVjdGlvbkF0dGVtcHRzIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgU2V0cyB0aGUgbnVtYmVyIG9mIGNvbmZsaWN0aW9uIGRldGVjdGlvbiBhdHRlbXB0cyBtYWRlIGJ5IHRoZSBESENQIHNlcnZlci4gCiAgICAuRXhhbXBsZSAKICAgICBTZXQtREhDUENvbmZsaWN0RGV0ZWN0aW9uQXR0ZW1wdHMgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLU51bWJlciAyIAogICAgIFRoaXMgZXhhbXBsZSBzZXRzIHRoZSBjb25mbGljdCBkZXRlY3Rpb24gYXR0ZW1wdHMgb24gZGhjcDAxLmNvbnRvc28uY29tIHRvIDIuIAogICAgLkV4YW1wbGUgCiAgICAgJHNlcnZlciB8IFNldC1ESENQQ29uZmxpY3REZXRlY3Rpb25BdHRlbXB0cyAtTnVtYmVyIDIgCiAgICAgR2l2ZW4gdGhhdCAkc2VydmVyIGlzIHRoZSBESENQU2VydmVyIG9iamVjdCBmb3IgZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgU2V0LURIQ1BDb25mbGljdERldGVjdGlvbkF0dGVtcHRzIGNtZGxldCBpcyB1c2VkIHRvIHNldCB0aGUgbnVtYmVyIG9mIGNvbmZsaWN0aW9uIGRldGVjdGlvbiBhdHRlbXB0cyBtYWRlIGJ5IHRoZSBESENQIHNlcnZlci4gVGhlIHJldHVybiB2YWx1ZSBmb3Igc3VjY2VzcyBpcyBhIERIQ1BTZXJ2ZXIgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgU2VydmVyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgY2FuIGJlIGEgREhDUFNlcnZlciBvYmplY3Qgb3IgdGhlIG5hbWUgb3IgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIFRoZSBkZXNpZ25hdGVkIHNlcnZlciBtdXN0IGJ5IGEgdmFsaWQgREhDUCBzZXJ2ZXIuIAogICAgIE5vdGU6IFRoaXMgY21kbGV0IHdpbGwgcHJvY2VzcyBzaWduaWZpY2FudGx5IGZhc3RlciBpZiB0aGUgU2VydmVyIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNlcnZlciBvYmplY3QuIAogICAgLlBhcmFtZXRlciBOdW1iZXIgCiAgICAgVGhlIG51bWJlciBvZiBjb25mbGljdCBkZXRlY3Rpb24gYXR0ZW1wdHMgdG8gbWFrZS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2VydmVyIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgU2V0LURIQ1BDb25mbGljdERldGVjdGlvbkF0dGVtcHRzIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1baW50XSROdW1iZXIgCiAgICAgICAgKSAKICBpZigkTnVtYmVyIC1ndCA1KSB7IFdyaXRlLUhvc3QgIldBUk5JTkcgVGhlIG1heGltdW0gbnVtYmVyIG9mIGNvbmZsaWN0IHJldHJpZXMgaXMgNS4gU2V0dGluZyB2YWx1ZSB0byA1LiIgLUZvcmVHcm91bmRDb2xvciBZZWxsb3c7ICROdW1iZXIgPSA1IH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgXFwkU2VydmVyIHNldCBkZXRlY3Rjb25mbGljdHJldHJ5ICROdW1iZXIiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICBpZigkU2VydmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BTZXJ2ZXJdKSB7IAogICAgICAkU2VydmVyLkNvbmZsaWN0RGV0ZWN0aW9uQXR0ZW1wdHMgPSAkTnVtYmVyIAogICAgICByZXR1cm4gJFNlcnZlciAKICAgICAgfSAKICAgIGVsc2UgeyByZXR1cm4gR2V0LURIQ1BTZXJ2ZXIgLVNlcnZlciAkU2VydmVyIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGlmKCRTZXJ2ZXIuR2V0VHlwZSgpIC1lcSBbREhDUFNlcnZlcl0pIHsgcmV0dXJuICRTZXJ2ZXIgfSAKICB9IAogCmZ1bmN0aW9uIFNldC1ESENQRE5TQ29uZmlndXJhdGlvbiB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIERlZmluZXMgdGhlIEROUyB1cGRhdGUgY29uZmlndXJhdGlvbiBmb3IgYSBnaXZlbiBESENQIG9iamVjdC4gCiAgICAuRXhhbXBsZSAKICAgICBTZXQtREhDUEROU0NvbmZpZ3VyYXRpb24gLU93bmVyIGRoY3AwMS5jb250b3NvLmNvbS8xOTIuMTY4LjEuMC8xOTIuMTY4LjEuMjM3IC1WYWx1ZSA3IAogICAgIFRoaXMgZXhhbXBsZSBkZWZpbmVzIHRoZSBETlMgdXBkYXRlIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSByZXNlcnZhdGlvbiAxOTIuMTY4LjEuMjM3IGluIHRoZSBzY29wZSBvZiAxOTIuMTY4LjEuMCBvbiBzZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tLiAKICAgICAgCiAgICAgVGhlIHJlc3VsdGluZyBjb25maWd1cmF0aW9uIHdvdWxkIGJlOiAKICAgICAgIER5bmFtaWMgVXBkYXRlczogICAgICAgICAgICAgIEVuYWJsZWQgCiAgICAgICBVcGRhdGUgVHJpZ2dlcjogICAgICAgICAgICAgICBDbGllbnQgUmVxdWVzdCAKICAgICAgIERpc2NhcmQgU3RhbGUgRE5TIFJlY29yZHM6ICAgIEVuYWJsZWQgCiAgICAgICBMZWdhY3kgQ2xpZW50IFVwZGF0ZXM6ICAgICAgICBFbmFibGVkIAogICAgLkV4YW1wbGUgCiAgICAgJHNjb3BlIHwgU2V0LURIQ1BETlNDb25maWd1cmF0aW9uIC1SZXN0b3JlRGVmYXVsdHMgCiAgICAgR2l2ZW4gdGhhdCAkc2NvcGUgaXMgdGhlIERIQ1BTY29wZSBvYmplY3QgZm9yIHNvbWUgc2NvcGUsIHRoaXMgZXhhbXBsZSByZXN0b3JlcyB0aGUgZGVmYXVsdCBETlMgdXBkYXRlIGNvbmZpZ3VyYXRpb24gZm9yIHRoYXQgc2NvcGUuIFRoZSByZXN1bHRpbmcgZWZmZWN0IGlzIHRoYXQgdGhlIHNjb3BlIHdpbGwgaGVuY2Vmb3J0aCBpbmhlcml0IGl0cyBETlMgdXBkYXRlIGNvbmZpZ3VyYXRpb24gZnJvbSBpdHMgcGFyZW50IHNlcnZlci4gCiAKICAgICBUaGUgcmVzdWx0aW5nIGNvbmZpZ3VyYXRpb24gd291bGQgYmU6IAogICAgICAgRHluYW1pYyBVcGRhdGVzOiAgICAgICAgICAgICAgRW5hYmxlZCAKICAgICAgIFVwZGF0ZSBUcmlnZ2VyOiAgICAgICAgICAgICAgIENsaWVudCBSZXF1ZXN0IAogICAgICAgRGlzY2FyZCBTdGFsZSBETlMgUmVjb3JkczogICAgRW5hYmxlZCAKICAgICAgIExlZ2FjeSBDbGllbnQgVXBkYXRlczogICAgICAgIERpc2FibGVkIAogICAgLkV4YW1wbGUgCiAgICAgU2V0LURIQ1BETlNDb25maWd1cmF0aW9uIC1Pd25lciAkcmVzZXJ2YXRpb24gLUFsbG93RHluYW1pY1VwZGF0ZSAtVXBkYXRlVHJpZ2dlciBBbHdheXMgLURpc2NhcmRTdGFsZVJlY29yZHMgLUFsbG93IExlZ2FjeUNsaWVudFVwZGF0ZSAKICAgICBHaXZlbiB0aGF0ICRyZXNlcnZhdGlvbiBpcyBlaXRoZXIgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb3IgdGhlIERIQ1BSZXNlcnZhdGlvbiBvYmplY3QgZm9yIHNvbWUgcmVzZXJ2YXRpb24sIHRoaXMgZXhhbXBsZSB3b3VsZCBkZWZpbmUgdGhlIEROUyB1cGRhdGUgY29uZmlndXJhdGlvbiB0aHVzOiAKICAgICAgIER5bmFtaWMgVXBkYXRlczogICAgICAgICAgICAgIEVuYWJsZWQgCiAgICAgICBVcGRhdGUgVHJpZ2dlcjogICAgICAgICAgICAgICBBbHdheXMgCiAgICAgICBEaXNjYXJkIFN0YWxlIEROUyBSZWNvcmRzOiAgICBFbmFibGVkIAogICAgICAgTGVnYWN5IENsaWVudCBVcGRhdGVzOiAgICAgICAgRW5hYmxlZCAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgU2V0LURIQ1BETlNDb25maWd1cmF0aW9uIGNtZGxldCBpcyB1c2VkIHRvIGRlZmluZSB0aGUgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIGZvciBhIGdpdmVuIERIQ1Agc2VydmVyLCBzY29wZSwgb3IgcmVzZXJ2YXRpb24uIAogICAgLlBhcmFtZXRlciBPd25lciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIsIERIQ1BTY29wZSwgb3IgREhDUFJlc2VydmF0aW9uIG9iamVjdC4gSXQgY2FuIGFsc28gYmUgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlc2Ugb2JqZWN0cywgZGVmaW5lZCB0aHVzOiAKICAgICAgIFNlcnZlck5hbWVPckZRRE4gCiAgICAgICBTZXJ2ZXJOYW1lT3JGUUROL1Njb3BlQWRkcmVzcyAKICAgICAgIFNlcnZlck5hbWVPckZRRE4vU2NvcGVBZGRyZXNzL1Jlc2VydmF0aW9uQWRkcmVzcyAKICAgIC5QYXJhbWV0ZXIgRE5TQ29uZmlndXJhdGlvbiAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGlzIGEgREhDUEROU0NvbmZpZ3VyYXRpb24gb2JqZWN0LiBJdCBpcyB1c2VkIGlmIHlvdSBoYXZlIGEgZGVmaW5lZCBETlMgdXBkYXRlIGNvbmZpZ3VyYXRpb24gdGhhdCB5b3Ugd2FudCB0byBhcHBseSB0byBhIG5ldyBvYmplY3QuIAogICAgLlBhcmFtZXRlciBWYWx1ZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGlzIGFuIGludGVnZXIuIFRoaXMgaXMgdXNlZCBpZiB5b3Ugd2FudCB0byBpbnB1dCB0aGUgcmF3IG9wdGlvbiB2YWx1ZSBmb3IgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uLiBZb3UgY2FuIGNyZWF0ZSBhIHZhbGlkIHZhbHVlIHVzaW5nIHRoZSBmb2xsb3dpbmcgbG9naWM6IAogICAgICAgU3RhcnQgYXQgMC4gQSB2YWx1ZSBvZiAwIG1lYW5zIEROUyB1cGRhdGUgY29uZmlndXJhdGlvbiBpcyBjb21wbGV0ZWx5IGRpc2FibGVkLiAKICAgICAgIElmIHlvdSB3YW50IHRoZSBVcGRhdGUgVHJpZ2dlciB0byBiZSAiQWx3YXlzIiwgYWRkIDE2LiAKICAgICAgIElmIHlvdSB3YW50IHRvIGRpc2NhcmQgb2xkIEROUyByZWNvcmRzLCBhZGQgNC4gCiAgICAgICBJZiB5b3Ugd2FudCB0byBhbGxvdyBsZWdhY3kgKDwgV2luZG93cyAyMDAwKSBjbGllbnQgdXBkYXRlcywgYWRkIDIuIAogICAgICAgSWYgeW91IHdhbnQgdG8gYWxsb3cgZHluYW1pYyB1cGRhdGVzLCBhZGQgMS4gCiAgICAgICAgCiAgICAgICBOb3RlOiBBIHZhbHVlIG9mIC0xIGlzIG9ubHkgYXBwbGljYWJsZSB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpcyBtb2R1bGUgYW5kIGlzIHVzZWQgdG8gZGVub3RlIG5vIGRlZmluZWQgY29uZmlndXJhdGlvbiwgd2hpY2ggbWVhbnMgdGhhdCB0aGUgZ2l2ZW4gb2JqZWN0IGluaGVyaXRzIGl0cyBETlMgdXBkYXRlIGNvbmZpZ3VyYXRpb24gZnJvbSBpdHMgcGFyZW50LiBJZiB0aGUgZ2l2ZW4gb2JqZWN0IGlzIHRoZSBESENQIHNlcnZlciwgdGhlbiBpdCB1c2VzIHRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24sIHdoaWNoIGlzIGVxdWFsIHRvIGEgdmFsdWUgb2YgNS4gCiAgICAuUGFyYW1ldGVyIEFsbG93RHluYW1pY1VwZGF0ZSAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGlzIHRydWUgb3IgZmFsc2UuIElmIGRlY2xhcmVkLCB0aGUgdmFsdWUgaXMgdHJ1ZSBhbmQgZW5hYmxlcyBkeW5hbWljIHVwZGF0ZXMsIG90aGVyd2lzZSBkeW5hbWljIHVwZGF0ZXMgaXMgZGlzYWJsZWQuIAogICAgLlBhcmFtZXRlciBVcGRhdGVUcmlnZ2VyIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgaXMgYSBzdHJpbmcgdmFsdWUgb2YgJ0Fsd2F5cycgb3IgJ0NsaWVudFJlcXVlc3QnLiBJZiBub3QgZGVjbGFyZWQgdGhlIHZhbHVlIGRlZmF1bHRzIHRvICdDbGllbnRSZXF1ZXN0Jy4gCiAgICAuUGFyYW1ldGVyIERpc2NhcmRTdGFsZUROU1JlY29yZHMgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBpcyB0cnVlIG9yIGZhbHNlLiBJZiBkZWNsYXJlZCwgdGhlIHZhbHVlIGlzIHRydWUgYW5kIGVuYWJsZXMgdGhlIGRpc2NhcmRpbmcgb2Ygc3RhbGUgRE5TIHJlY29yZHMgKEEgYW5kIFBUUikgd2hlbiBhIGxlYXNlIGlzIG5vIGxvbmdlciBhY3RpdmUsIG90aGVyd2lzZSBpdCBpcyBkaXNhYmxlZC4gCiAgICAuUGFyYW1ldGVyIEFsbG93TGVnYWN5Q2xpZW50VXBkYXRlIAogICAgIFRoZSB2YWx1ZSBmb3IgdGhpcyBwYXJhbWV0ZXIgaXMgdHJ1ZSBvciBmYWxzZS4gSWYgZGVjbGFyZWQsIHRoZSB2YWx1ZSBpcyB0cnVlIGFuZCBlbmFibGVzIHRoZSB1cGRhdGluZyBvZiBETlMgcmVjb3JkcyBiZWxvbmdpbmcgdG8gbGVnYWN5IChwcmUgV2luZG93cyAyMDAwKSBjbGllbnRzLCBvdGhlcndpc2UgaXQgaXMgZGlzYWJsZWQuIAogICAgLlBhcmFtZXRlciBSZXN0b3JlRGVmYXVsdHMgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBpcyB0cnVlIG9mIGZhbHNlLiBJZiBkZWNsYXJlZCwgdGhlIEROUyB1cGRhdGUgY29uZmlndXJhdGlvbiBmb3IgdGhlIGdpdmVuIG9iamVjdCBpbmhlcml0cyBpdHMgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIGZyb20gaXRzIHBhcmVudC4gSWYgdGhlIGdpdmVuIG9iamVjdCBpcyB0aGUgREhDUCBzZXJ2ZXIsIHRoZW4gaXQgdXNlcyB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uLCB3aGljaCBpcyBlcXVhbCB0byBhIHZhbHVlIG9mIDUuIAogCiAgICAgVGhpcyBwYXJhbWV0ZXIgc3VwZXJjZWRlcyBhbGwgb3RoZXIgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzLiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BETlNDb25maWd1cmF0aW9uIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgR2V0LURIQ1BETlNDb25maWd1cmF0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMDQuMjIuMjAxMSAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRPd25lciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bREhDUEROU0NvbmZpZ3VyYXRpb25dJEROU0NvbmZpZ3VyYXRpb24sIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlUmFuZ2UoLTEsMjMpXVtpbnRdJFZhbHVlLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzd2l0Y2hdJEFsbG93RHluYW1pY1VwZGF0ZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIkFsd2F5cyIsIkNsaWVudFJlcXVlc3QiKV1bc3RyaW5nXSRVcGRhdGVUcmlnZ2VyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzd2l0Y2hdJERpc2NhcmRTdGFsZVJlY29yZHMsICAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3dpdGNoXSRBbGxvd0xlZ2FjeUNsaWVudFVwZGF0ZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3dpdGNoXSRSZXN0b3JlRGVmYXVsdHMgCiAgICAgICAgKSAKICBpZigkUmVzdG9yZURlZmF1bHRzIC1vciAkVmFsdWUgLWVxIC0xKSB7ICRudWxsID0gUmVtb3ZlLURIQ1BPcHRpb24gLU93bmVyICRPd25lciAtT3B0aW9uSUQgODEgLVNpbGVudCB9IAogIGVsc2UgeyAKICAgIGlmKCRETlNDb25maWd1cmF0aW9uKSB7ICRWYWx1ZSA9ICRETlNDb25maWd1cmF0aW9uLlZhbHVlIH0gCiAgICBpZighJFZhbHVlKSB7IAogICAgICBpZigkQWxsb3dEeW5hbWljVXBkYXRlKXsgJFZhbHVlICs9IDEgfSAKICAgICAgaWYoJFVwZGF0ZVRyaWdnZXIgLWVxICJBbHdheXMiKSB7ICRWYWx1ZSArPSAxNiB9IAogICAgICBpZigkRGlzY2FyZFN0YWxlUmVjb3JkcykgeyAkVmFsdWUgKz0gNCB9IAogICAgICBpZigkQWxsb3dMZWdhY3lDbGllbnRVcGRhdGUpIHsgJFZhbHVlICs9IDIgfSAKICAgICAgfSAKICAgIGlmKCRWYWx1ZSAtZ3QgNyAtYW5kICRWYWx1ZSAtbHQgMTYpIHsgV3JpdGUtSG9zdCAiRVJST1I6IEludmFsaWQgRE5TIHVwZGF0ZSBjb25maWd1cmF0aW9uIHZhbHVlIGRlZmluZWQuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICBlbHNlIHsgCiAgICAgICRkbnNPcHRpb25zID0gQCgwLDAsMCwwKSAKICAgICAgaWYoJFZhbHVlIC1nZSAxNikgeyAkZG5zT3B0aW9uc1sxXSA9IDE7ICRWYWx1ZSAtPSAxNiB9IAogICAgICBpZigkVmFsdWUgLWdlIDQpIHsgJGRuc09wdGlvbnNbMl0gPSAxOyAkVmFsdWUgLT0gNCB9IAogICAgICBpZigkVmFsdWUgLWdlIDIpIHsgJGRuc09wdGlvbnNbM10gPSAxOyAkVmFsdWUgLT0gMiB9IAogICAgICBpZigkVmFsdWUgLWVxIDEpIHsgJGRuc09wdGlvbnNbMF0gPSAxIH0gCiAgICAgIH0gCiAgICAkc2VydmVyID0gJG51bGwgCiAgICAkc2NvcGUgPSAkbnVsbCAKICAgICRyZXNlcnZhdGlvbiA9ICRudWxsIAogICAgaWYoJE93bmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BTZXJ2ZXJdKSB7ICRzZXJ2ZXIgPSAkT3duZXIuTmFtZSB9IAogICAgZWxzZWlmKCRPd25lci5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IAogICAgICAkc2VydmVyID0gJE93bmVyLlNlcnZlciAKICAgICAgJHNjb3BlID0gJE93bmVyLkFkZHJlc3MgCiAgICAgIH0gCiAgICBlbHNlaWYoJE93bmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BSZXNlcnZhdGlvbl0pIHsgCiAgICAgICRzZXJ2ZXIgPSAkT3duZXIuU2VydmVyIAogICAgICAkc2NvcGUgPSAkT3duZXIuU2NvcGUgCiAgICAgICRyZXNlcnZhdGlvbiA9ICRPd25lci5JUEFkZHJlc3MgCiAgICAgIH0gCiAgICBlbHNlIHsgCiAgICAgICRwYXJ0cyA9ICRPd25lci5Ub1N0cmluZygpLlNwbGl0KCIvIikgCiAgICAgICRzZXJ2ZXIgPSAkcGFydHNbMF0gCiAgICAgIGlmKCRwYXJ0cy5Db3VudCAtZ3QgMSkgeyAkc2NvcGUgPSAkcGFydHNbMV0gfSAKICAgICAgaWYoJHBhcnRzLkNvdW50IC1ndCAyKSB7ICRyZXNlcnZhdGlvbiA9ICRwYXJ0c1syXSB9IAogICAgICB9IAogICAgJGNvbW1hbmQgPSBpZigkc2NvcGUgLW9yICRyZXNlcnZhdGlvbil7IlxcJHNlcnZlciBzY29wZSAkc2NvcGUgc2V0IGRuc2NvbmZpZyJ9ZWxzZXsiXFwkc2VydmVyIHNldCBkbnNjb25maWcifSAKICAgIGlmKCRyZXNlcnZhdGlvbikgeyAkY29tbWFuZCArPSAiICRyZXNlcnZhdGlvbiIgfSAKICAgICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyICRjb21tYW5kICQoJGRuc09wdGlvbnMgLUpvaW4gIiAiKSIpIAogICAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgCiAgICAgIGlmKCR0ZXh0WzNdLkNvbnRhaW5zKCJub3QgYSB2YWxpZCBETlMgU2VydmVyIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICQoJHRleHRbM10pIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICAgIH0gCiAgICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiU2VydmVyIG1heSBub3QgZnVuY3Rpb24gcHJvcGVybHkiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHNlcnZlciBpcyBpbmFjY2Vzc2libGUgb3IgaXMgbm90IGEgREhDUCBzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRzY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogICAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoImNsaWVudCBpcyBub3QgYSByZXNlcnZlZCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzZXJ2YXRpb24gaXMgbm90IGEgdmFsaWQgcmVzZXJ2YXRpb24gaW4gJHNjb3BlIG9uICRzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZDsgcmV0dXJuIH0gCiAgICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAgIH0gCiAgJEROU0NvbmZpZ3VyYXRpb24gPSBHZXQtREhDUEROU0NvbmZpZ3VyYXRpb24gLU93bmVyICRPd25lciAKICBpZihAKFtESENQU2VydmVyXSxbREhDUFNjb3BlXSxbREhDUFJlc2VydmF0aW9uXSkgLWNvbnRhaW5zICRPd25lci5HZXRUeXBlKCkpIHsgCiAgICAkT3duZXIuRE5TQ29uZmlndXJhdGlvbiA9ICRETlNDb25maWd1cmF0aW9uIAogICAgcmV0dXJuICRPd25lciAKICAgIH0gCiAgZWxzZSB7IHJldHVybiAkRE5TQ29uZmlndXJhdGlvbiB9IAogIH0gCiAKZnVuY3Rpb24gU2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgU2V0cyB0aGUgTUFDIEZpbHRlciBjb25maWd1cmF0aW9uIGZvciBhIGdpdmVuIERIQ1Agc2VydmVyLiAKICAgIC5FeGFtcGxlIAogICAgIFNldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbiAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtRGVueUxpc3QgRW5hYmxlZCAKICAgICBUaGlzIGV4YW1wbGUgZW5hYmxlcyB0aGUgRGVueSBmaWx0ZXIgYW5kIGFueSBNQUMgYWRkcmVzc2VzIGRlZmluZWQgdGhlcmVpbiwgYnV0IGRvZXMgbm90aGluZyB0byB0aGUgQWxsb3cgZmlsdGVyLiAKICAgIC5FeGFtcGxlIAogICAgIFNldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbiAtU2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSAtQWxsb3dMaXN0IERpc2FibGVkIC1EZW55TGlzdCBEaXNhYmxlZCAKICAgICBUaGlzIGV4YW1wbGUgZGlzYWJsZXMgYm90aCB0aGUgQWxsb3cgYW5kIERlbnkgZmlsdGVycy4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIFNldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbiBjbWRsZXQgaXMgdXNlZCB0byBlbmFibGUgb3IgZGlzYWJsZSB0aGUgQWxsb3cgYW5kIERlbnkgTUFDIGFkZHJlc3MgZmlsdGVycy4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNlcnZlciB2YXJpYWJsZSBzdXBwbGllZCBpcyBhIERIQ1BTZXJ2ZXIgb2JqZWN0LiAKICAgIC5QYXJhbWV0ZXIgQWxsb3dMaXN0IAogICAgIFRoaXMgcGFyYW1ldGVyIGRlZmluZXMgdGhlIHN0YXRlIG9mIHRoZSBBbGxvdyBmaWx0ZXIuIAogICAgICAgRW5hYmxlZCAgLSBQcm92aWRlcyBESENQIHNlcnZpY2VzIG9ubHkgdG8gY2xpZW50cyB3aG9zZSBhZGRyZXNzZXMgYXJlIGluIHRoZSBBbGxvdyBMaXN0IAogICAgICAgRGlzYWJsZWQgLSBEb2VzIG5vdCBmaWx0ZXIgTUFDIGFkZHJlc3NlcyB0byBzZWUgaWYgdGhleSBhcmUgYWxsb3dlZCAKICAgIC5QYXJhbWV0ZXIgRGVueUxpc3QgCiAgICAgVGhpcyBwYXJhbWV0ZXIgZGVmaW5lcyB0aGUgc3RhdGUgb2YgdGhlIERlbnkgZmlsdGVyLiAKICAgICAgIEVuYWJsZWQgIC0gRGVuaWVzIERIQ1Agc2VydmljZXMgb25seSB0byBjbGllbnRzIHdob3NlIGFkZHJlc3NlcyBhcmUgaW4gdGhlIERlbnkgTGlzdCAKICAgICAgIERpc2FibGVkIC0gRG9lcyBub3QgZmlsdGVyIE1BQyBhZGRyZXNzZXMgdG8gc2VlIGlmIHRoZXkgYXJlIGRlbmllZCAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgU2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMDYuMTYuMjAxMSAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1BTT2JqZWN0XSRTZXJ2ZXIsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJFbmFibGVkIiwiRGlzYWJsZWQiKV1bc3RyaW5nXSRBbGxvd0xpc3QsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJFbmFibGVkIiwiRGlzYWJsZWQiKV1bc3RyaW5nXSREZW55TGlzdCAKICAgICAgICApIAogICRjb21tYW5kID0gIlxcJFNlcnZlciB2NCBzZXQgZmlsdGVyIiAKICBzd2l0Y2goJEFsbG93TGlzdCkgeyAKICAgICJFbmFibGVkIiAgeyAkY29tbWFuZCArPSAiIEVuZm9yY2VBbGxvd0xpc3Q9MSIgfSAKICAgICJEaXNhYmxlZCIgeyAkY29tbWFuZCArPSAiIEVuZm9yY2VBbGxvd0xpc3Q9MCIgfSAKICAgIH0gCiAgc3dpdGNoKCREZW55TGlzdCkgeyAKICAgICJFbmFibGVkIiAgeyAkY29tbWFuZCArPSAiIEVuZm9yY2VEZW55TGlzdD0xIiB9IAogICAgIkRpc2FibGVkIiB7ICRjb21tYW5kICs9ICIgRW5mb3JjZURlbnlMaXN0PTAiIH0gCiAgICB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyICRjb21tYW5kIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJHRleHRbM10uQ29udGFpbnMoIm5vdCBhIHZhbGlkIEROUyBTZXJ2ZXIiKSkgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJCgkdGV4dFszXSkiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkOyByZXR1cm4gfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRzZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQ7IHJldHVybiB9IAogIHJldHVybiBHZXQtREhDUEZpbHRlckNvbmZpZ3VyYXRpb24gLVNlcnZlciAkU2VydmVyIAogIH0gCiAKZnVuY3Rpb24gU2V0LURIQ1BPcHRpb24geyAKICA8IyAKICAgIC5TeW5vcHNpcyAKICAgICBTZXQgdGhlIHZhbHVlIG9mIGFuIG9wdGlvbiBmcm9tIGEgZ2l2ZW4gc2VydmVyLCBzY29wZSwgb3IgcmVzZXJ2YXRpb24uIAogICAgLkV4YW1wbGUgCiAgICAgU2V0LURIQ1BPcHRpb24gLU93bmVyIGRoY3AwMS5jb250b3NvLmNvbS8xOTIuMTY4LjEuMCAtT3B0aW9uSUQgMjAwIC1EYXRhVHlwZSBJUEFERFJFU1MgLVZhbHVlICIxOTIuMTY4LjEuMjMwIDE5Mi4xNjguMS4yMzEiIAogICAgIFRoaXMgZXhhbXBsZSBzZXRzIHRoZSB2YWx1ZSBmb3Igb3B0aW9uIDIwMCBvbiB0aGUgMTkyLjE2OC4xLjAgc2NvcGUgb24gc2VydmVyIGRoY3AwMS5jb250b3NvLmNvbSB3aXRoIHR3byB2YWx1ZXM6IDE5Mi4xNjguMS4yMzAgYW5kIDE5Mi4xNjguMS4yMzEuIAogICAgLkV4YW1wbGUgCiAgICAgJHNjb3BlIHwgU2V0LURIQ1BPcHRpb24gLU9wdGlvbklEIDIwMCAtRGF0YVR5cGUgSVBBRERSRVNTIC1WYWx1ZSAxOTIuMTY4LjEuMjMwIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgc2V0cyB0aGUgdmFsdWUgZm9yIG9wdGlvbiAyMDAgb24gdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIHNlcnZlciBkaGNwMDEuY29udG9zby5jb20gdG8gMTkyLjE2OC4xLjIzMC4gCiAgICAuRXhhbXBsZSAKICAgICBTZXQtREhDUE9wdGlvbiAtT3duZXIgZGhjcDAxLmNvbnRvc28uY29tLzE5Mi4xNjguMS4wIC1PcHRpb25JRCAyMzEgLURhdGFUeXBlIFN0cmluZyAtVmFsdWUgIlRoaXMgaXMgYSBtdWx0aS13b3JkIHN0cmluZyB2YWx1ZSIgCiAgICAgVGhpcyBleGFtcGxlIHNldHMgdGhlIHZhbHVlIGZvciBvcHRpb24gMjMxIG9uIHRoZSAxOTIuMTY4LjEuMCBzY29wZSBvbiBzZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIHRvICdUaGlzIGlzIGEgbXVsdGktd29yZCBzdHJpbmcgdmFsdWUnLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgU2V0LURIQ1BPcHRpb24gY21kbGV0IGlzIHVzZWQgdG8gc2V0IHRoZSB2YWx1ZSBmb3IgYW4gb3B0aW9uIG9uIGEgZ2l2ZW4gc2VydmVyLCBzY29wZSwgb3IgcmVzZXJ2YXRpb24uIFRoZSByZXR1cm4gdmFsdWUgZm9yIHN1Y2Nlc3MgaXMgYSBESENQU2VydmVyLCBESENQU2NvcGUsIERIQ1BSZXNlcnZhdGlvbiwgb3IgREhDUE9wdGlvbiBvYmplY3QgZGVwZW5kaW5nLiAKICAgIC5QYXJhbWV0ZXIgT3duZXIgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2VydmVyLCBESENQU2NvcGUsIG9yIERIQ1BSZXNlcnZhdGlvbiBvYmplY3QuIEl0IGNhbiBhbHNvIGJlIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZXNlIG9iamVjdHMsIGRlZmluZWQgdGh1czogCiAgICAgICBTZXJ2ZXJOYW1lT3JGUUROIAogICAgICAgU2VydmVyTmFtZU9yRlFETi9TY29wZUFkZHJlc3MgCiAgICAgICBTZXJ2ZXJOYW1lT3JGUUROL1Njb3BlQWRkcmVzcy9SZXNlcnZhdGlvbkFkZHJlc3MgCiAgICAgSWYgdGhpcyB2YWx1ZSBpcyBkZWZpbmVkIGFzIGFuIG9iamVjdCwgdGhhdCB1cGRhdGVkIG9iamVjdCB3aWxsIGJlIHJldHVybmVkIHVwb24gc3VjY2Vzcy4gCiAgICAuUGFyYW1ldGVyIE9wdGlvbklEIAogICAgIFRoZSBpbnRlZ2VyIHZhbHVlIG9mIHRoZSBvcHRpb24gd2hvc2UgdmFsdWUgeW91IHdpc2ggdG8gc2V0LiAKICAgIC5QYXJhbWV0ZXIgRGF0YVR5cGUgCiAgICAgQSBzdHJpbmcgdmFsdWUgZm9yIHRoZSBkYXRhIHR5cGUgb2YgdGhlIHZhbHVlKHMpLiAKICAgICBUaGUgYXZhaWxhYmxlIG9wdGlvbnMgYXJlOiAKICAgICAgIEJZVEUgCiAgICAgICBXT1JEIAogICAgICAgRFdPUkQgCiAgICAgICBTVFJJTkcgCiAgICAgICBJUEFERFJFU1MgCiAgICAuUGFyYW1ldGVyIFZlbmRvckNsYXNzIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgbmFtZSBvZiB0aGUgdmVuZG9yIGNsYXNzIG9mIERIQ1Agb3B0aW9ucy4gSWYgbm9uZSBpcyBnaXZlbiwgdGhlIFN0YW5kYXJkIERIQ1AgT3B0aW9ucyBjbGFzcyBpcyB1c2VkLiAKICAgIC5QYXJhbWV0ZXIgVXNlckNsYXNzIAogICAgIEEgc3RyaW5nIHZhbHVlIGZvciB0aGUgbmFtZSBvZiB0aGUgdXNlciBjbGFzcyBvZiB0aGUgREhDUCBvcHRpb24uIElmIG5vbmUgaXMgZ2l2ZW4sIHRoZSBEZWZhdWx0IFVzZXIgQ2xhc3MgaXMgdXNlZC4gCiAgICAuUGFyYW1ldGVyIEZvcmNlIAogICAgIFRoaXMgc3dpdGNoIHBhcmFtZXRlciBpcyBvbmx5IG5lZWRlZCBpZiB5b3Ugd2FudCB0byBhZGQgSVBzIHRvIE9wdGlvbklEIDYgdGhhdCBhcmUgbm90IGN1cnJlbnRseSBvbmxpbmUuIFRoaXMgcGFyYW1ldGVyIGlzIG9ubHkgdmFsaWQgZm9yIFdpbmRvd3MgMjAwOCBzZXJ2ZXJzIGFuZCBoaWdoZXIuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNlcnZlciwgREhDUFNjb3BlLCBvciBESENQUmVzZXJ2YXRpb24sIERIQ1BPcHRpb24gZGVwZW5kaW5nLiAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFJlbW92ZS1ESENQT3B0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRPd25lciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVJhbmdlKDEsMjU0KV1baW50XSRPcHRpb25JRCwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVNldCgiQllURSIsIldPUkQiLCJEV09SRCIsIlNUUklORyIsIklQQUREUkVTUyIpXVtzdHJpbmddJERhdGFUeXBlLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW3N0cmluZ10kVmFsdWUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N0cmluZ10kVmVuZG9yQ2xhc3MsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N0cmluZ10kVXNlckNsYXNzLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzd2l0Y2hdJEZvcmNlIAogICAgICAgICkgCiAgaWYoJE9wdGlvbklEIC1lcSA1MSkgeyBXcml0ZS1Ib3N0ICJUaGUgc2NvcGUgbGVhc2UgbXVzdCBiZSBzZXQgdXNpbmcgdGhlIFNldC1ESENQU2NvcGVMZWFzZSBjbWRsZXQuIjsgcmV0dXJuIH0gCiAgaWYoJE9wdGlvbklEIC1lcSA4MSkgeyBXcml0ZS1Ib3N0ICJUSGUgRE5TIENvbmZpZ3VyYXRpb24gc2V0dGluZ3MgbXVzdCBiZSBzZXQgdXNpbmcgdGhlIFNldC1ESENQRE5TQ29uZmlndXJhdGlvbiBjbWRsZXQuIjsgcmV0dXJuIH0gCiAgJHNlcnZlciA9ICRudWxsIAogICRzY29wZSA9ICRudWxsIAogICRyZXNlcnZhdGlvbiA9ICRudWxsIAogIGlmKCRPd25lci5HZXRUeXBlKCkgLWVxIFtESENQU2VydmVyXSkgeyAkc2VydmVyID0gJE93bmVyLk5hbWUgfSAKICBlbHNlaWYoJE93bmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgCiAgICAkc2VydmVyID0gJE93bmVyLlNlcnZlciAKICAgICRzY29wZSA9ICRPd25lci5BZGRyZXNzIAogICAgfSAKICBlbHNlaWYoJE93bmVyLkdldFR5cGUoKSAtZXEgW0RIQ1BSZXNlcnZhdGlvbl0pIHsgCiAgICAkc2VydmVyID0gJE93bmVyLlNlcnZlciAKICAgICRzY29wZSA9ICRPd25lci5TY29wZSAKICAgICRyZXNlcnZhdGlvbiA9ICRPd25lci5JUEFkZHJlc3MgCiAgICB9IAogIGVsc2UgeyAKICAgICRwYXJ0cyA9ICRPd25lci5Ub1N0cmluZygpLlNwbGl0KCIvIikgCiAgICAkc2VydmVyID0gJHBhcnRzWzBdIAogICAgaWYoJHBhcnRzLkNvdW50IC1ndCAxKSB7ICRzY29wZSA9ICRwYXJ0c1sxXSB9IAogICAgaWYoJHBhcnRzLkNvdW50IC1ndCAyKSB7ICRyZXNlcnZhdGlvbiA9ICRwYXJ0c1syXSB9IAogICAgfSAKICAkY29tbWFuZCA9IGlmKCRzY29wZSl7IlxcJHNlcnZlciBzY29wZSAkc2NvcGUgc2V0IG9wdGlvbnZhbHVlIn1lbHNleyJcXCRzZXJ2ZXIgc2V0IG9wdGlvbnZhbHVlIn0gCiAgaWYoJHJlc2VydmF0aW9uKSB7ICRjb21tYW5kID0gIlxcJHNlcnZlciBzY29wZSAkc2NvcGUgc2V0IHJlc2VydmVkb3B0aW9udmFsdWUgJHJlc2VydmF0aW9uIiB9IAogIGlmKCEhJFZlbmRvckNsYXNzKSB7ICRWZW5kb3JDbGFzcyA9ICJ2ZW5kb3I9YCIkVmVuZG9yQ2xhc3NgIiIgfSAKICBpZighISRVc2VyQ2xhc3MpIHsgJFVzZXJDbGFzcyA9ICJ1c2VyPWAiJFVzZXJDbGFzc2AiIiB9IAogICRvcyA9IChHZXQtV21pT2JqZWN0IFdpbjMyX09wZXJhdGluZ1N5c3RlbSkuQ2FwdGlvbiAKICAkZm9yY2VGbGFnID0gaWYoJG9zLkNvbnRhaW5zKCIyMDA4IikgLW9yICRvcy5Db250YWlucygiNyIpKXtpZigkRm9yY2UpeyJESENQRlVMTEZPUkNFIn1lbHNleyJESENQTk9GT1JDRSJ9fWVsc2V7IiJ9IAogIGlmKCREYXRhVHlwZSAtZXEgIlNUUklORyIpIHsgJFZhbHVlID0gImAiJFZhbHVlYCIiIH0gCiAgJHRleHQgPSAkKEludm9rZS1FeHByZXNzaW9uICJjbWQgL2MgbmV0c2ggZGhjcCBzZXJ2ZXIgJGNvbW1hbmQgJE9wdGlvbklEICREYXRhVHlwZSAkVmVuZG9yQ2xhc3MgJFVzZXJDbGFzcyAkZm9yY2VGbGFnICRWYWx1ZSIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCR0ZXh0WzNdLkNvbnRhaW5zKCJub3QgYSB2YWxpZCBETlMgU2VydmVyIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICQoJHRleHRbM10pIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogICAgZWxzZSB7IAogICAgICAkb3B0aW9uID0gR2V0LURIQ1BPcHRpb24gLU93bmVyICRPd25lciAtT3B0aW9uSUQgJE9wdGlvbklEIC1Gb3JjZTokRm9yY2UgCiAgICAgIGlmKEAoW0RIQ1BTZXJ2ZXJdLFtESENQU2NvcGVdLFtESENQUmVzZXJ2YXRpb25dKSAtY29udGFpbnMgJE93bmVyLkdldFR5cGUoKSkgeyAKICAgICAgICBpZighISRPd25lci5PcHRpb25zKSB7ICRPd25lci5PcHRpb25zID0gQCgkT3duZXIuT3B0aW9ucyB8IFdoZXJlLU9iamVjdCB7ICRfLk9wdGlvbklEIC1uZSAkT3B0aW9uSUQgfSkgfSAKICAgICAgICAkT3duZXIuT3B0aW9ucyArPSAkb3B0aW9uIAogICAgICAgIHJldHVybiAkT3duZXIgCiAgICAgICAgfSAKICAgICAgZWxzZSB7IHJldHVybiAkb3B0aW9uIH0gCiAgICAgIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkc2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkc2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoImNsaWVudCBpcyBub3QgYSByZXNlcnZlZCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzZXJ2YXRpb24gaXMgbm90IGEgdmFsaWQgcmVzZXJ2YXRpb24gaW4gJHNjb3BlIG9uICRzZXJ2ZXIuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICB9IAogCmZ1bmN0aW9uIFNldC1ESENQU2NvcGVEZXNjcmlwdGlvbiB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIFNldHMgdGhlIGRlc2NyaXB0aW9uIG9mIGEgREhDUCBzY29wZS4gCiAgICAuRXhhbXBsZSAKICAgICBTZXQtREhDUFNjb3BlRGVzY3JpcHRpb24gLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIC1EZXNjcmlwdGlvbiAiVGhpcyBpcyBhIHRlc3Qgc2NvcGUuIiAKICAgICBUaGlzIGV4YW1wbGUgc2V0cyB0aGUgZGVzY3JpcHRpb24gZm9yIHRoZSAxOTIuMTY4LjEuMCBzY29wZSBvbiBkaGNwMDEuY29udG9zby5jb20uIAogICAgLkV4YW1wbGUgCiAgICAgJHNjb3BlIHwgUmVtb3ZlLURIQ1BJUFJhbmdlIC1EZXNjcmlwdGlvbiAiVGhpcyBpcyBhIHRlc3Qgc2NvcGUuIiAKICAgICBHaXZlbiB0aGF0ICRzY29wZSBpcyB0aGUgREhDUFNjb3BlIG9iamVjdCBmb3Igc3VibmV0IDE5Mi4xNjguMS4wIG9uIGRoY3AwMS5jb250b3NvLmNvbSwgdGhpcyBleGFtcGxlIGFjY29tcGxpc2hlcyB0aGUgc2FtZSBhcyB0aGUgb25lIGluIEV4YW1wbGUgMS4gCiAgICAuRGVzY3JpcHRpb24gCiAgICAgVGhlIFNldC1ESENQU2NvcGVEZXNjcmlwdGlvbiBjbWRsZXQgaXMgdXNlZCB0byBzZXQgdGhlIGRlc2NyaXB0aW9uIG9mIGEgREhDUCBzY29wZS4gVGhlIHJldHVybiB2YWx1ZSBmb3Igc3VjY2VzcyBpcyB0aGUgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNjb3BlIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIERlc2NyaXB0aW9uIAogICAgIEEgc2VsZi1leHBsYW5hdG9yeSBzdHJpbmcgdmFsdWUuIAogICAgLk91dHB1dHMgCiAgICAgREhDUFNjb3BlIAogICAgLk5vdGVzIAogICAgIE5hbWU6ICAgU2V0LURIQ1BTY29wZURlc2NyaXB0aW9uIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMTIuMTYuMjAxMCAKICAjPiAKICBQYXJhbShbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtQU09iamVjdF0kU2VydmVyLCAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldW1BTT2JqZWN0XSRTY29wZSwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtzdHJpbmddJERlc2NyaXB0aW9uIAogICAgICAgICkgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2V0IGNvbW1lbnQgYCIkRGVzY3JpcHRpb25gIiIpIAogICRyZXN1bHQgPSBpZigkdGV4dC5HZXRUeXBlKCkgLWVxIFtzdHJpbmddKXskdGV4dH1lbHNleyR0ZXh0WygkdGV4dC5Db3VudC0xKV19IAogIGlmKCRyZXN1bHQuQ29udGFpbnMoImNvbXBsZXRlZCBzdWNjZXNzZnVsbHkiKSkgeyAKICAgIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IAogICAgICAkU2NvcGUuRGVzY3JpcHRpb24gPSAkRGVzY3JpcHRpb24gCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuIEdldC1ESENQU2NvcGUgLVNlcnZlciAkU2VydmVyIC1TY29wZSAkU2NvcGUgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgcmV0dXJuICRTY29wZSB9IAogIH0gCiAKZnVuY3Rpb24gU2V0LURIQ1BTY29wZUxlYXNlIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgU2V0cyB0aGUgbGVhc2UgdGltZSBmb3IgY2xpZW50cyBvbiBhIERIQ1Agc2NvcGUuIAogICAgLkV4YW1wbGUgCiAgICAgU2V0LURIQ1BTY29wZUxlYXNlIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1TY29wZSAxOTIuMTY4LjEuMCAtU2Vjb25kcyA2OTEyMDAgCiAgICAgVGhpcyBleGFtcGxlIHNldHMgdGhlIGxlYXNlIHRpbWUgZm9yIHRoZSAxOTIuMTY4LjEuMCBzY29wZSBvbiBkaGNwMDEuY29udG9zby5jb20gdG8gOCBkYXlzLiAKICAgIC5FeGFtcGxlIAogICAgICRzY29wZSB8IFJlbW92ZS1ESENQSVBSYW5nZSAtU2Vjb25kcyA2OTEyMDAgCiAgICAgR2l2ZW4gdGhhdCAkc2NvcGUgaXMgdGhlIERIQ1BTY29wZSBvYmplY3QgZm9yIHN1Ym5ldCAxOTIuMTY4LjEuMCBvbiBkaGNwMDEuY29udG9zby5jb20sIHRoaXMgZXhhbXBsZSBhY2NvbXBsaXNoZXMgdGhlIHNhbWUgYXMgdGhlIG9uZSBpbiBFeGFtcGxlIDEuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBTZXQtREhDUFNjb3BlTGVhc2UgY21kbGV0IGlzIHVzZWQgdG8gc2V0IHRoZSBsZWFzZSB0aW1lIGZvciBjbGllbnRzIG9uIGEgREhDUCBzY29wZS4gVGhlIHJldHVybiB2YWx1ZSBmb3Igc3VjY2VzcyBpcyB0aGUgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNjb3BlIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlY29uZHMgCiAgICAgVGltZSBpbiBzZWNvbmRzIGZvciB0aGUgZHVyYXRpb24gZm8gdGhlIGxlYXNlLiAKICAgIC5PdXRwdXRzIAogICAgIERIQ1BTY29wZSAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFNldC1ESENQU2NvcGVMZWFzZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bUFNPYmplY3RdJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2NvcGUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1baW50XSRTZWNvbmRzIAogICAgICAgICkgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2V0IG9wdGlvbnZhbHVlIDUxIGR3b3JkICRTZWNvbmRzIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgCiAgICAgICRTY29wZS5MZWFzZSA9ICRTZWNvbmRzIAogICAgICByZXR1cm4gJFNjb3BlIAogICAgICB9IAogICAgZWxzZSB7IHJldHVybiBHZXQtREhDUFNjb3BlIC1TZXJ2ZXIgJFNlcnZlciAtU2NvcGUgJFNjb3BlIH0gCiAgICB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJTZXJ2ZXIgbWF5IG5vdCBmdW5jdGlvbiBwcm9wZXJseSIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2VydmVyIGlzIGluYWNjZXNzaWJsZSBvciBpcyBub3QgYSBESENQIHNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlRoZSBjb21tYW5kIG5lZWRzIGEgdmFsaWQgU2NvcGUgSVAgQWRkcmVzcyIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkU2NvcGUgaXMgbm90IGEgdmFsaWQgc2NvcGUgb24gJFNlcnZlci4iIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGlmKCRTY29wZS5HZXRUeXBlKCkgLWVxIFtESENQU2NvcGVdKSB7IHJldHVybiAkU2NvcGUgfSAKICB9IAogCmZ1bmN0aW9uIFNldC1ESENQU2NvcGVOYW1lIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgU2V0cyB0aGUgbmFtZSBvZiBhIERIQ1Agc2NvcGUuIAogICAgLkV4YW1wbGUgCiAgICAgU2V0LURIQ1BTY29wZU5hbWUgLVNlcnZlciBkaGNwMDEuY29udG9zby5jb20gLVNjb3BlIDE5Mi4xNjguMS4wIC1OYW1lIFRlc3RTY29wZSAKICAgICBUaGlzIGV4YW1wbGUgc2V0cyB0aGUgbmFtZSBmb3IgdGhlIDE5Mi4xNjguMS4wIHNjb3BlIG9uIGRoY3AwMS5jb250b3NvLmNvbS4gCiAgICAuRXhhbXBsZSAKICAgICAkc2NvcGUgfCBSZW1vdmUtREhDUElQUmFuZ2UgLU5hbWUgVGVzdFNjb3BlIAogICAgIEdpdmVuIHRoYXQgJHNjb3BlIGlzIHRoZSBESENQU2NvcGUgb2JqZWN0IGZvciBzdWJuZXQgMTkyLjE2OC4xLjAgb24gZGhjcDAxLmNvbnRvc28uY29tLCB0aGlzIGV4YW1wbGUgYWNjb21wbGlzaGVzIHRoZSBzYW1lIGFzIHRoZSBvbmUgaW4gRXhhbXBsZSAxLiAKICAgIC5EZXNjcmlwdGlvbiAKICAgICBUaGUgU2V0LURIQ1BTY29wZU5hbWUgY21kbGV0IGlzIHVzZWQgdG8gc2V0IHRoZSBuYW1lIG9mIGEgREhDUCBzY29wZS4gVGhlIHJldHVybiB2YWx1ZSBmb3Igc3VjY2VzcyBpcyB0aGUgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIGNhbiBiZSBhIERIQ1BTZXJ2ZXIgb2JqZWN0IG9yIHRoZSBuYW1lIG9yIEZRRE4gb2YgdGhlIERIQ1Agc2VydmVyLiBUaGUgZGVzaWduYXRlZCBzZXJ2ZXIgbXVzdCBieSBhIHZhbGlkIERIQ1Agc2VydmVyLiAKICAgIC5QYXJhbWV0ZXIgU2NvcGUgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBjYW4gYmUgYSBESENQU2NvcGUgb2JqZWN0IG9yIHRoZSBzdWJuZXQgYWRkcmVzcyBvZiB0aGUgc2NvcGUuIElmIGVudGVyaW5nIHRoZSBzdWJuZXQgYWRkcmVzcywgdGhlIFNlcnZlciBwYXJhbWV0ZXIgbXVzdCBiZSBkZWZpbmVkIGFuZCBiZSB0aGUgaG9zdCBvZiB0aGlzIHNjb3BlLiAKICAgICBOb3RlOiBUaGlzIGNtZGxldCB3aWxsIHByb2Nlc3Mgc2lnbmlmaWNhbnRseSBmYXN0ZXIgaWYgdGhlIFNjb3BlIHZhcmlhYmxlIHN1cHBsaWVkIGlzIGEgREhDUFNjb3BlIG9iamVjdC4gCiAgICAuUGFyYW1ldGVyIE5hbWUgCiAgICAgQSBzZWxmLWV4cGxhbmF0b3J5IHN0cmluZyB2YWx1ZS4gCiAgICAuT3V0cHV0cyAKICAgICBESENQU2NvcGUgCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBTZXQtREhDUFNjb3BlTmFtZSAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDEyLjE2LjIwMTAgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bUFNPYmplY3RdJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUpXVtQU09iamVjdF0kU2NvcGUsIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bc3RyaW5nXSROYW1lIAogICAgICAgICkgCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0gLWFuZCAhJFNlcnZlcikgeyAkU2VydmVyID0gJFNjb3BlLlNlcnZlciB9IAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3Agc2VydmVyIFxcJFNlcnZlciBzY29wZSAkU2NvcGUgc2V0IG5hbWUgYCIkTmFtZWAiIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgCiAgICAgICRTY29wZS5OYW1lID0gJE5hbWUgCiAgICAgIHJldHVybiAkU2NvcGUgCiAgICAgIH0gCiAgICBlbHNlIHsgcmV0dXJuIEdldC1ESENQU2NvcGUgLVNlcnZlciAkU2VydmVyIC1TY29wZSAkU2NvcGUgfSAKICAgIH0gCiAgZWxzZWlmKCRyZXN1bHQuQ29udGFpbnMoIlNlcnZlciBtYXkgbm90IGZ1bmN0aW9uIHByb3Blcmx5IikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTZXJ2ZXIgaXMgaW5hY2Nlc3NpYmxlIG9yIGlzIG5vdCBhIERIQ1Agc2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlaWYoJHJlc3VsdC5Db250YWlucygiVGhlIGNvbW1hbmQgbmVlZHMgYSB2YWxpZCBTY29wZSBJUCBBZGRyZXNzIikpIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRTY29wZSBpcyBub3QgYSB2YWxpZCBzY29wZSBvbiAkU2VydmVyLiIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICBlbHNlIHsgV3JpdGUtSG9zdCAiRVJST1I6ICRyZXN1bHQiIC1Gb3JlR3JvdW5kQ29sb3IgUmVkIH0gCiAgaWYoJFNjb3BlLkdldFR5cGUoKSAtZXEgW0RIQ1BTY29wZV0pIHsgcmV0dXJuICRTY29wZSB9IAogIH0gCiAKZnVuY3Rpb24gU2hvdy1ESENQU2VydmVycyB7IAogIDwjIAogICAgLlN5bm9wc2lzIAogICAgIERpc3BsYXlzIGEgbGlzdCBvZiBhbGwgREhDUCBzZXJ2ZXJzIGluIEFjdGl2ZSBEaXJlY3RvcnkuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBTaG93LURIQ1BTZXJ2ZXJzIGNtZGxldCBpcyB1c2VkIHRvIGRpc3BsYXkgYWxsIERIQ1Agc2VydmVycyByZWdpc3RlcmVkIGluIEFjdGl2ZSBEaXJlY3RvcnkuIAogICAgLk91dHB1dHMgCiAgICAgUFNPYmplY3QgCiAgICAuTm90ZXMgCiAgICAgTmFtZTogICBTaG93LURIQ1BTZXJ2ZXJzIAogICAgIE1vZHVsZTogTWljcm9zb2Z0LkRIQ1AuUG93ZXJTaGVsbC5BZG1pbi5wc20xIAogICAgIEF1dGhvcjogSmVyZW15IEVuZ2VsIAogICAgIERhdGU6ICAgMDMuMTUuMjAxMSAKICAjPiAKICAkc2VydmVycyA9IEAoKSAKICAkdGV4dCA9ICQoSW52b2tlLUV4cHJlc3Npb24gImNtZCAvYyBuZXRzaCBkaGNwIHNob3cgc2VydmVyIikgCiAgJHJlc3VsdCA9IGlmKCR0ZXh0LkdldFR5cGUoKSAtZXEgW3N0cmluZ10peyR0ZXh0fWVsc2V7JHRleHRbKCR0ZXh0LkNvdW50LTEpXX0gCiAgaWYoJHJlc3VsdC5Db250YWlucygiY29tcGxldGVkIHN1Y2Nlc3NmdWxseSIpKSB7IAogICAgZm9yZWFjaCgkbGluZSBpbiAkdGV4dCkgeyAKICAgICAgaWYoJGxpbmUuQ29udGFpbnMoIlNlcnZlciBbIikpIHsgCiAgICAgICAgJHBhcnRzID0gJGxpbmUuU3BsaXQoIlsiKSAKICAgICAgICAkbmFtZSA9ICRwYXJ0c1sxXS5TcGxpdCgiXSIpWzBdIAogICAgICAgICRpcCA9ICRwYXJ0c1syXS5TcGxpdCgiXSIpWzBdIAogICAgICAgICRzZXJ2ZXIgPSBOZXctT2JqZWN0IFBTT2JqZWN0IAogICAgICAgICRzZXJ2ZXIgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBTZXJ2ZXIoJG5hbWUpICAgCiAgICAgICAgJHNlcnZlciB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IElQQWRkcmVzcygkaXApIAogICAgICAgICRzZXJ2ZXJzICs9ICRzZXJ2ZXIgCiAgICAgICAgfSAKICAgICAgfSAKICAgIHJldHVybiAkc2VydmVycyAKICAgIH0gCiAgZWxzZSB7IFdyaXRlLUhvc3QgIkVSUk9SOiAkcmVzdWx0IiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIH0gCiAKZnVuY3Rpb24gVW5yZWdpc3Rlci1ESENQU2VydmVyIHsgCiAgPCMgCiAgICAuU3lub3BzaXMgCiAgICAgVW5yZWdpc3RlcnMgYSBnaXZlbiBESENQIHNlcnZlciB3aXRoIEFjdGl2ZSBEaXJlY3RvcnkuIAogICAgLkV4YW1wbGUgCiAgICAgVW5yZWdpc3Rlci1ESENQU2VydmVyIC1TZXJ2ZXIgZGhjcDAxLmNvbnRvc28uY29tIC1JUEFkZHJlc3MgMTkyLjE2OC4xLjMzIAogICAgIFRoaXMgZXhhbXBsZSB1bnJlZ2lzdGVycyBkaGNwMDEuY29uc3Rvc28uY29tLCBhbmQgdGhlIElQIGFkZHJlc3Mgb2YgMTkyLjE2OC4xLjMzLCBhcyBhbiBhdXRob3JpemVkIERIQ1Agc2VydmVyIGluIEFjdGl2ZSBEaXJlY3RvcnkuIAogICAgLkRlc2NyaXB0aW9uIAogICAgIFRoZSBVbnJlZ2lzdGVyLURIQ1BTZXJ2ZXIgY21kbGV0IGlzIHVzZWQgdG8gdW5yZWdpc3RlciBhIERIQ1Agc2VydmVyIHdpdGggQWN0aXZlIERpcmVjdG9yeS4gCiAgICAuUGFyYW1ldGVyIFNlcnZlciAKICAgICBUaGUgdmFsdWUgZm9yIHRoaXMgcGFyYW1ldGVyIHNob3VsZCBiZSB0aGUgRlFETiBvZiB0aGUgREhDUCBzZXJ2ZXIuIAogICAgLlBhcmFtZXRlciBJUEFkZHJlc3MgCiAgICAgVGhlIHZhbHVlIGZvciB0aGlzIHBhcmFtZXRlciBtdXN0IGJlIGluIGFuIElQIGFkZHJlc3Mgc3RyaW5nIGZvcm1hdCAoaWU6IDAuMC4wLjApLiAKICAgIC5Ob3RlcyAKICAgICBOYW1lOiAgIFVucmVnaXN0ZXItREhDUFNlcnZlciAKICAgICBNb2R1bGU6IE1pY3Jvc29mdC5ESENQLlBvd2VyU2hlbGwuQWRtaW4ucHNtMSAKICAgICBBdXRob3I6IEplcmVteSBFbmdlbCAKICAgICBEYXRlOiAgIDAzLjE1LjIwMTEgCiAgIz4gCiAgUGFyYW0oW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtzdHJpbmddJFNlcnZlciwgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtWYWxpZGF0ZVBhdHRlcm4oIlxiKD86KD86MjVbMC01XXwyWzAtNF1bMC05XXxbMDFdP1swLTldWzAtOV0/KVwuKXszfSg/OjI1WzAtNV18MlswLTRdWzAtOV18WzAxXT9bMC05XVswLTldPylcYiIpXVtzdHJpbmddJElQQWRkcmVzcyAKICAgICAgICApIAogICR0ZXh0ID0gJChJbnZva2UtRXhwcmVzc2lvbiAiY21kIC9jIG5ldHNoIGRoY3AgZGVsZXRlIHNlcnZlciAkU2VydmVyICRJUEFkZHJlc3MiKSAKICAkcmVzdWx0ID0gaWYoJHRleHQuR2V0VHlwZSgpIC1lcSBbc3RyaW5nXSl7JHRleHR9ZWxzZXskdGV4dFsoJHRleHQuQ291bnQtMSldfSAKICBpZigkcmVzdWx0LkNvbnRhaW5zKCJjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IikpIHsgV3JpdGUtSG9zdCAiU1VDQ0VTUzogJFNlcnZlciB3YXMgc3VjY2Vzc2Z1bGx5IHVucmVnaXN0ZXJlZCBpbiBBY3RpdmUgRGlyZWN0b3J5LiIgLUZvcmVHcm91bmRDb2xvciBHcmVlbiB9IAogIGVsc2VpZigkcmVzdWx0LkNvbnRhaW5zKCJub3QgcHJlc2VudCIpKSB7IFdyaXRlLUhvc3QgIkVSUk9SOiBUaGUgc3BlY2lmaWVkIHNlcnZlciBpcyBub3QgbGlzdGVkIGluIEFjdGl2ZSBEaXJlY3RvcnkuIiAtRm9yZUdyb3VuZENvbG9yIFJlZCB9IAogIGVsc2UgeyBXcml0ZS1Ib3N0ICJFUlJPUjogJHJlc3VsdCIgLUZvcmVHcm91bmRDb2xvciBSZWQgfSAKICB9IAogCmZ1bmN0aW9uIEdldC1ESENQQ29tbWFuZCB7IAogIFBhcmFtKFtzdHJpbmddJENvbW1hbmQpIAogICRjb21tYW5kcyA9IEB7IAoiQWRkLURIQ1BFeGNsdXNpb25SYW5nZSI9IkFkZC1ESENQRXhjbHVzaW9uUmFuZ2UgW1stU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+XSBbLVNjb3BlXSA8REhDUFNjb3BlfFN0cmluZz4gWy1TdGFydEFkZHJlc3NdIDxTdHJpbmc+IFstRW5kQWRkcmVzc10gPFN0cmluZz4iOyAKIkFkZC1ESENQRmlsdGVyIj0iQWRkLURIQ1BGaWx0ZXIgLVNlcnZlciA8REhDUFNlcnZlcnxTdHJpbmc+IC1BbGxvd3xEZW55IC1NQUNBZGRyZXNzIDxTdHJpbmc+IC1EZXNjcmlwdGlvbiA8U3RyaW5nPiI7IAoiQWRkLURIQ1BJUFJhbmdlIj0iQWRkLURIQ1BJUFJhbmdlIFtbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPl0gWy1TY29wZV0gPERIQ1BTY29wZXxTdHJpbmc+IFstU3RhcnRBZGRyZXNzXSA8U3RyaW5nPiBbLUVuZEFkZHJlc3NdIDxTdHJpbmc+IjsgCiJEaXNhYmxlLURIQ1BTY29wZSI9IkRpc2FibGUtREhDUFNjb3BlIFtbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPl0gWy1TY29wZV0gPERIQ1BTY29wZXxTdHJpbmc+IjsgCiJFbmFibGUtREhDUFNjb3BlIj0iRW5hYmxlLURIQ1BTY29wZSBbWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz5dIFstU2NvcGVdIDxESENQU2NvcGV8U3RyaW5nPiI7IAoiR2V0LURIQ1BETlNDb25maWd1cmF0aW9uIj0iR2V0LURIQ1BETlNDb25maWd1cmF0aW9uIFstT3duZXJdIDxESENQU2VydmVyfERIQ1BTY29wZXxESENQUmVzZXJ2YXRpb258U3RyaW5nPiI7IAoiR2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIj0iR2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIC1TZXJ2ZXIgPERIQ1BTZXJ2ZXJ8U3RyaW5nPiI7IAoiR2V0LURIQ1BPcHRpb24iPSJHZXQtREhDUE9wdGlvbiBbLU93bmVyXSA8REhDUFNlcnZlcnxESENQU2NvcGV8REhDUFJlc2VydmF0aW9ufFN0cmluZz4gW1stT3B0aW9uSURdIDxJbnQ+XSBbLUZvcmNlXSI7IAoiR2V0LURIQ1BPcHRpb25EZWZpbml0aW9ucyI9IkdldC1ESENQT3B0aW9uRGVmaW5pdGlvbnMgWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz4iOyAKIkdldC1ESENQUmVzZXJ2YXRpb24iPSJHZXQtREhDUFJlc2VydmF0aW9uIFtbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPl0gWy1TY29wZV0gPERIQ1BTY29wZXxTdHJpbmc+IFtbLUlQQWRkcmVzc10gPFN0cmluZz5dIjsgCiJHZXQtREhDUFNjb3BlIj0iR2V0LURIQ1BTY29wZSBbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPiBbWy1TY29wZV0gPFN0cmluZz5dIjsgCiJHZXQtREhDUFNlcnZlciI9IkdldC1ESENQU2VydmVyIFstU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+IjsgCiJHZXQtREhDUFN0YXRpc3RpY3MiPSJHZXQtREhDUFN0YXRpc3RpY3MgWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz4iOyAKIk5ldy1ESENQT3B0aW9uRGVmaW5pdGlvbiI9Ik5ldy1ESENQT3B0aW9uRGVmaW5pdGlvbiBbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPiBbLU9wdGlvbklEXSA8SW50PiBbLU5hbWVdIDxTdHJpbmc+IFstRGF0YVR5cGVdIDxTdHJpbmc+IFstSXNBcnJheV0gW1stVmVuZG9yQ2xhc3NdIDxzdHJpbmc+XSBbWy1EZXNjcmlwdGlvbl0gPFN0cmluZz5dIFtbLURlZmF1bHRWYWx1ZV0gPFN0cmluZz5dIjsgCiJOZXctREhDUFJlc2VydmF0aW9uIj0iTmV3LURIQ1BSZXNlcnZhdGlvbiBbWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz5dIFstU2NvcGVdIDxESENQU2NvcGV8U3RyaW5nPiBbLUlQQWRkcmVzc10gPHN0cmluZz4gWy1NQUNBZGRyZXNzXSA8U3RyaW5nPiBbWy1OYW1lXSA8U3RyaW5nPl0gW1stRGVzY3JpcHRpb25dIDxTdHJpbmc+XSI7IAoiTmV3LURIQ1BTY29wZSI9Ik5ldy1ESENQU2NvcGUgWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz4gW1stU2NvcGVdIDxzdHJpbmc+XSI7IAoiUmVnaXN0ZXItREhDUFNlcnZlciI9IlJlZ2lzdGVyLURIQ1BTZXJ2ZXIgWy1TZXJ2ZXJdIDxTdHJpbmc+IFtbLUlQQWRkcmVzc10gPFN0cmluZz5dIjsgCiJSZW1vdmUtREhDUEV4Y2x1c2lvblJhbmdlIj0iUmVtb3ZlLURIQ1BFeGNsdXNpb25SYW5nZSBbWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz5dIFstU2NvcGVdIDxESENQU2NvcGV8U3RyaW5nPiBbLVN0YXJ0QWRkcmVzc10gPFN0cmluZz4gWy1FbmRBZGRyZXNzXSA8U3RyaW5nPiI7IAoiUmVtb3ZlLURIQ1BGaWx0ZXIiPSJSZW1vdmUtREhDUEZpbHRlciAtU2VydmVyIDxESENQU2VydmVyfFN0cmluZz4gLU1BQ0FkZHJlc3MgPFN0cmluZz5gcmBuYHJgblJlbW92ZS1ESENQRmlsdGVyIC1GaWx0ZXJPYmplY3QgPERIQ1BGaWx0ZXI+IjsgCiJSZW1vdmUtREhDUElQUmFuZ2UiPSJSZW1vdmUtREhDUElQUmFuZ2UgW1stU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+XSBbLVNjb3BlXSA8REhDUFNjb3BlfFN0cmluZz4gWy1TdGFydEFkZHJlc3NdIDxTdHJpbmc+IFstRW5kQWRkcmVzc10gPFN0cmluZz4iOyAKIlJlbW92ZS1ESENQT3B0aW9uIj0iUmVtb3ZlLURIQ1BPcHRpb24gWy1Pd25lcl0gPERIQ1BTZXJ2ZXJ8REhDUFNjb3BlfERIQ1BSZXNlcnZhdGlvbnxTdHJpbmc+IFstT3B0aW9uSURdIDxJbnQ+IFtbLVZlbmRvckNsYXNzXSA8U3RyaW5nPl0gW1stVXNlckNsYXNzXSA8U3RyaW5nPl0iOyAKIlJlbW92ZS1ESENQT3B0aW9uRGVmaW5pdGlvbiI9IlJlbW92ZS1ESENQT3B0aW9uRGVmaW5pdGlvbiBbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPiBbLU9wdGlvbklEXSA8SW50PiBbWy1WZW5kb3JDbGFzc10gPFN0cmluZz5dIjsgCiJSZW1vdmUtREhDUFJlc2VydmF0aW9uIj0iUmVtb3ZlLURIQ1BSZXNlcnZhdGlvbiBbLVJlc2VydmF0aW9uXSA8REhDUFJlc2VydmF0aW9uPiB8IFstU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+IFstU2NvcGVdIDxESENQU2NvcGV8U3RyaW5nPiBbLUlQQWRkcmVzc10gPFN0cmluZz4gWy1NQUNBZGRyZXNzXSA8U3RyaW5nPiI7IAoiUmVtb3ZlLURIQ1BTY29wZSI9IlJlbW92ZS1ESENQU2NvcGUgW1stU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+XSBbLVNjb3BlXSA8REhDUFNjb3BlfFN0cmluZz4iOyAKIlNldC1ESENQQ29uZmxpY3REZXRlY3Rpb25BdHRlbXB0cyI9IlNldC1ESENQQ29uZmxpY3REZXRlY3Rpb25BdHRlbXB0cyBbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPiBbLU51bWJlcl0gPEludD4iOyAKIlNldC1ESENQRE5TQ29uZmlndXJhdGlvbiI9IlNldC1ESENQRE5TQ29uZmlndXJhdGlvbiBbLU93bmVyXSA8REhDUFNlcnZlcnxESENQU2NvcGV8REhDUFJlc2VydmF0aW9ufFN0cmluZz4gW1stRE5TQ29uZmlndXJhdGlvbl0gPERIQ1BETlNDb25maWd1cmF0aW9uPl0gW1stVmFsdWVdIDxJbnQzMj5dIFtbLUFsbG93RHluYW1pY1VwZGF0ZV0gW1stVXBkYXRlVHJpZ2dlcl0gPFN0cmluZz5dIFstRGlzY2FyZFN0YWxlUmVjb3Jkc10gWy1BbGxvd0xlZ2FjeUNsaWVudFVwZGF0ZV1dIFstUmVzdG9yZURlZmF1bHRzXSI7IAoiU2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIj0iU2V0LURIQ1BGaWx0ZXJDb25maWd1cmF0aW9uIFstU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+IFtbLUFsbG93TGlzdF0gPFN0cmluZz5dIFtbLURlbnlMaXN0XSA8U3RyaW5nPl0iOyAKIlNldC1ESENQT3B0aW9uIj0iU2V0LURIQ1BPcHRpb24gWy1Pd25lcl0gPERIQ1BTZXJ2ZXJ8REhDUFNjb3BlfERIQ1BSZXNlcnZhdGlvbnxTdHJpbmc+IFstT3B0aW9uSURdIDxJbnQ+IFstRGF0YVR5cGVdIDxTdHJpbmc+IFstVmFsdWVdIDxTdHJpbmc+IFtbLVZlbmRvckNsYXNzXSA8U3RyaW5nPl0gW1stVXNlckNsYXNzXSA8U3RyaW5nPl0gWy1Gb3JjZV0iOyAKIlNldC1ESENQU2NvcGVEZXNjcmlwdGlvbiI9IlNldC1ESENQU2NvcGVEZXNjcmlwdGlvbiBbWy1TZXJ2ZXJdIDxESENQU2VydmVyfFN0cmluZz5dIFstU2NvcGVdIDxESENQU2NvcGV8U3RyaW5nPiBbLURlc2NyaXB0aW9uXSA8U3RyaW5nPiI7IAoiU2V0LURIQ1BTY29wZUxlYXNlIj0iU2V0LURIQ1BTY29wZUxlYXNlIFtbLVNlcnZlcl0gPERIQ1BTZXJ2ZXJ8U3RyaW5nPl0gWy1TY29wZV0gPERIQ1BTY29wZXxTdHJpbmc+IFstU2Vjb25kc10gPEludD4iOyAKIlNldC1ESENQU2NvcGVOYW1lIj0iU2V0LURIQ1BTY29wZU5hbWUgW1stU2VydmVyXSA8REhDUFNlcnZlcnxTdHJpbmc+XSBbLVNjb3BlXSA8REhDUFNjb3BlfFN0cmluZz4gWy1OYW1lXSA8U3RyaW5nPiI7IAoiU2hvdy1ESENQU2VydmVycyI9IlNob3ctREhDUFNlcnZlcnMiOyAKIlVucmVnaXN0ZXItREhDUFNlcnZlciI9IlVucmVnaXN0ZXItREhDUFNlcnZlciBbLVNlcnZlcl0gPFN0cmluZz4gWy1JUEFkZHJlc3NdIDxTdHJpbmc+IiAKICAgIH0gCiAgaWYoJENvbW1hbmQpIHsgCiAgICBpZigkY29tbWFuZHMuS2V5cyAtY29udGFpbnMgJENvbW1hbmQpIHsgcmV0dXJuICRjb21tYW5kc1skQ29tbWFuZF0gfSAKICAgIGVsc2UgeyByZXR1cm4gIiRDb21tYW5kIGlzIG5vdCBhIHZhbGlkIERIQ1AgTW9kdWxlIGNtZGxldC4iIH0gCiAgICB9IAogIGVsc2UgeyAKICAgICRsaXN0ID0gQCgpIAogICAgZm9yZWFjaCgkY21kIGluICRjb21tYW5kcy5LZXlzKSB7IAogICAgICAkZW50cnkgPSBOZXctT2JqZWN0IFBTT0JqZWN0IAogICAgICAkZW50cnkgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBOYW1lKCRjbWQpIAogICAgICAkZW50cnkgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSBEZWZpbml0aW9uKCRjb21tYW5kc1skY21kXSkgCiAgICAgICRsaXN0ICs9ICRlbnRyeSAKICAgICAgfSAKICAgIHJldHVybiAkbGlzdCB8IFNvcnQtT2JqZWN0IHsgJF8uTmFtZSB9IAogICAgfSAKICB9IAogCkV4cG9ydC1Nb2R1bGVNZW1iZXIgQWRkLURIQ1BFeGNsdXNpb25SYW5nZSxBZGQtREhDUEZpbHRlcixBZGQtREhDUElQUmFuZ2UsRGlzYWJsZS1ESENQU2NvcGUsRW5hYmxlLURIQ1BTY29wZSwgCiAgICAgICAgICAgICAgICAgICAgR2V0LURIQ1BETlNDb25maWd1cmF0aW9uLEdldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbixHZXQtREhDUE9wdGlvbixHZXQtREhDUE9wdGlvbkRlZmluaXRpb25zLCAKICAgICAgICAgICAgICAgICAgICBHZXQtREhDUFJlc2VydmF0aW9uLEdldC1ESENQU2NvcGUsR2V0LURIQ1BTZXJ2ZXIsR2V0LURIQ1BTdGF0aXN0aWNzLE5ldy1ESENQT3B0aW9uRGVmaW5pdGlvbiwgCiAgICAgICAgICAgICAgICAgICAgTmV3LURIQ1BSZXNlcnZhdGlvbixOZXctREhDUFNjb3BlLFJlbW92ZS1ESENQRXhjbHVzaW9uUmFuZ2UsUmVtb3ZlLURIQ1BGaWx0ZXIsUmVtb3ZlLURIQ1BJUFJhbmdlLCAKICAgICAgICAgICAgICAgICAgICBSZW1vdmUtREhDUE9wdGlvbixSZW1vdmUtREhDUE9wdGlvbkRlZmluaXRpb24sUmVtb3ZlLURIQ1BSZXNlcnZhdGlvbixSZW1vdmUtREhDUFNjb3BlLCAKICAgICAgICAgICAgICAgICAgICBTZXQtREhDUENvbmZsaWN0RGV0ZWN0aW9uQXR0ZW1wdHMsU2V0LURIQ1BETlNDb25maWd1cmF0aW9uLFNldC1ESENQRmlsdGVyQ29uZmlndXJhdGlvbixTZXQtREhDUE9wdGlvbiwgCiAgICAgICAgICAgICAgICAgICAgU2V0LURIQ1BTY29wZURlc2NyaXB0aW9uLFNldC1ESENQU2NvcGVMZWFzZSxTZXQtREhDUFNjb3BlTmFtZSxTaG93LURIQ1BTZXJ2ZXJzLFJlZ2lzdGVyLURIQ1BTZXJ2ZXIsIAogICAgICAgICAgICAgICAgICAgIFVucmVnaXN0ZXItREhDUFNlcnZlcixHZXQtREhDUENvbW1hbmQ=
