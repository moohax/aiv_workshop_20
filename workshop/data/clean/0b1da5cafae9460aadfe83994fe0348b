service.ps1,58a39d38c28f78c9c13dd57925b6bc44,Scan result is 1. IsMalware: 0,w6/Cu8K/IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojICAgR2V0IG91dCBvZiBoZXJlISAgU2VyaW91c2x5LCB0aGlzIGlzIG5vdCB0aGUgcHJvYmxlbS4KIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGaWxlIG5hbWUgICAgICAgUFNTZXJ2aWNlLnBzMSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIEEgc2FtcGxlIHNlcnZpY2UgaW4gYSBzdGFuZGFsb25lIFBvd2VyU2hlbGwgc2NyaXB0ICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIE5vdGVzICAgICAgICAgICBUaGUgbGF0ZXN0IFBTU2VydmljZS5wczEgdmVyc2lvbiBpcyBhdmFpbGFibGUgaW4gR2l0SHViICAgIwojICAgICAgICAgICAgICAgICAgIHJlcG9zaXRvcnkgaHR0cHM6Ly9naXRodWIuY29tL0pGTGFydm9pcmUvU3lzVG9vbHNMaWIvICwgICAjCiMgICAgICAgICAgICAgICAgICAgaW4gdGhlIFBvd2VyU2hlbGwgc3ViZGlyZWN0b3J5LiAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBQbGVhc2UgcmVwb3J0IGFueSBwcm9ibGVtIGluIHRoZSBJc3N1ZXMgdGFiIGluIHRoYXQgICAgICAgIwojICAgICAgICAgICAgICAgICAgIEdpdEh1YiByZXBvc2l0b3J5IGluICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL0pGTGFydm9pcmUvU3lzVG9vbHNMaWIvaXNzdWVzCSAgICAgICMKIyAgICAgICAgICAgICAgICAgICBJZiB5b3UgZG8gc3VibWl0IGEgcHVsbCByZXF1ZXN0LCBwbGVhc2UgYWRkIGEgY29tbWVudCBhdCAgIwojICAgICAgICAgICAgICAgICAgIHRoZSBlbmQgb2YgdGhpcyBoZWFkZXIgd2l0aCB0aGUgZGF0ZSwgeW91ciBpbml0aWFscywgYW5kICAjCiMJCSAgICBhIGRlc2NyaXB0aW9uIG9mIHRoZSBjaGFuZ2VzLiBBbHNvIHVwZGF0ZSAkc2NyaXB0VmVyc2lvbi4gIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgVGhlIGluaXRpYWwgdmVyc2lvbiBvZiB0aGlzIHNjcmlwdCB3YXMgZGVzY3JpYmVkIGluIGFuICAgICMKIyAgICAgICAgICAgICAgICAgICBhcnRpY2xlIHB1Ymxpc2hlZCBpbiB0aGUgTWF5IDIwMTYgaXNzdWUgb2YgTVNETiBNYWdhemluZS4gIwojICAgICAgICAgICAgICAgICAgIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL21hZ2F6aW5lL210NzAzNDM2LmFzcHggICAjCiMgICAgICAgICAgICAgICAgICAgVGhpcyB1cGRhdGVkIHZlcnNpb24gaGFzIG9uZSBtYWpvciBjaGFuZ2U6ICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBUaGUgLVNlcnZpY2UgaGFuZGxlciBpbiB0aGUgZW5kIGhhcyBiZWVuIHJld3JpdHRlbiB0byBiZSAgIwojICAgICAgICAgICAgICAgICAgIGV2ZW50LWRyaXZlbiwgd2l0aCBhIHNlY29uZCB0aHJlYWQgd2FpdGluZyBmb3IgY29udHJvbCAgICAjCiMgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMgY29taW5nIGluIHZpYSBhIG5hbWVkIHBpcGUuICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBUaGlzIGFsbG93cyBmaXhpbmcgYSBidWcgb2YgdGhlIG9yaWdpbmFsIHZlcnNpb24sIHRoYXQgICAgIwojICAgICAgICAgICAgICAgICAgIGRpZCBub3Qgc3RvcCBwcm9wZXJseSwgYW5kIGxlZnQgYSB6b21iaWUgcHJvY2VzcyBiZWhpbmQuICAjCiMgICAgICAgICAgICAgICAgICAgVGhlIGRyYXdiYWNrIGlzIHRoYXQgdGhlIG5ldyBjb2RlIGlzIHNpZ25pZmljYW50bHkgbG9uZ2VyLCMKIyAgICAgICAgICAgICAgICAgICBkdWUgdG8gdGhlIGFkZGVkIFBvd2VyU2hlbGwgdGhyZWFkIG1hbmFnZW1lbnQgcm91dGluZXMuICAgIwojICAgICAgICAgICAgICAgICAgIE9uIHRoZSBvdGhlciBoYW5kLCB0aGVzZSB0aHJlYWQgbWFuYWdlbWVudCByb3V0aW5lcyBhcmUgICAjCiMgICAgICAgICAgICAgICAgICAgcmV1c2FibGUsIGFuZCB3aWxsIGFsbG93IGJ1aWxkaW5nIG11Y2ggbW9yZSBwb3dlcmZ1bCAgICAgICMKIyAgICAgICAgICAgICAgICAgICBzZXJ2aWNlcy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgRHluYW1pY2FsbHkgZ2VuZXJhdGVzIGEgc21hbGwgUFNTZXJ2aWNlLmV4ZSB3cmFwcGVyICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvbiwgdGhhdCBpbiB0dXJuIGludm9rZXMgdGhpcyBQb3dlclNoZWxsIHNjcmlwdC4gIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgU29tZSBhcmd1bWVudHMgYXJlIGluc3BpcmVkIGJ5IExpbnV4JyBzZXJ2aWNlIG1hbmFnZW1lbnQgICMKIyAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6IC1TdGFydCwgLVN0b3AsIC1SZXN0YXJ0LCAtU3RhdHVzICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIE90aGVycyBhcmUgbW9yZSBpbiB0aGUgV2luZG93cycgc3R5bGU6IC1TZXR1cCwgLVJlbW92ZSAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBUaGUgYWN0dWFsIHN0YXJ0IGFuZCBzdG9wIG9wZXJhdGlvbnMgYXJlIGRvbmUgd2hlbiAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIHJ1bm5pbmcgYXMgU1lTVEVNLCB1bmRlciB0aGUgY29udHJvbCBvZiB0aGUgU0NNIChTZXJ2aWNlICAjCiMgICAgICAgICAgICAgICAgICAgQ29udHJvbCBNYW5hZ2VyKS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIFRvIGNyZWF0ZSB5b3VyIG93biBzZXJ2aWNlLCBtYWtlIGEgY29weSBvZiB0aGlzIGZpbGUgYW5kICAjCiMgICAgICAgICAgICAgICAgICAgcmVuYW1lIGl0LiBUaGUgZmlsZSBiYXNlIG5hbWUgYmVjb21lcyB0aGUgc2VydmljZSBuYW1lLiAgICMKIyAgICAgICAgICAgICAgICAgICBUaGVuIGltcGxlbWVudCB5b3VyIG93biBzZXJ2aWNlIGNvZGUgaW4gdGhlIGlmICgkU2VydmljZSkgIwojICAgICAgICAgICAgICAgICAgIHtibG9ja30gYXQgdGhlIHZlcnkgZW5kIG9mIHRoaXMgZmlsZS4gU2VlIHRoZSBUTyBETyAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgY29tbWVudCB0aGVyZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBUaGVyZSBhcmUgZ2xvYmFsIHNldHRpbmdzIGJlbG93IHRoZSBzY3JpcHQgcGFyYW0oKSBibG9jay4gIwojICAgICAgICAgICAgICAgICAgIFRoZXkgY2FuIGVhc2lseSBiZSBjaGFuZ2VkLCBidXQgdGhlIGRlZmF1bHRzIHNob3VsZCBiZSAgICAjCiMgICAgICAgICAgICAgICAgICAgc3VpdGFibGUgZm9yIG1vc3QgcHJvamVjdHMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIFNlcnZpY2UgaW5zdGFsbGF0aW9uIGFuZCB1c2FnZTogU2VlIHRoZSBkeW5hbWljIGhlbHAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgc2VjdGlvbiBiZWxvdywgb3IgcnVuOiBoZWxwIC5cUFNTZXJ2aWNlLnBzMSAtRGV0YWlsZWQgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgSGlzdG9yeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgMjAxNS0wNy0xMCBKRkwgamYubGFydm9pcmVAaHBlLmNvbSBjcmVhdGVkIHRoaXMgc2NyaXB0LiAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE1LTEwLTEzIEpGTCBNYWRlIHRoaXMgc2NyaXB0IGNvbXBsZXRlbHkgZ2VuZXJpYywgYW5kIGFkZGVkIGNvbW1lbnRzICAgIwojICAgICAgICAgICAgICAgICAgIGluIHRoZSBoZWFkZXIgYWJvdmUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgMjAxNi0wMS0wMiBKRkwgTW92ZWQgdGhlIEV2ZW50IExvZyBuYW1lIGludG8gbmV3IHZhcmlhYmxlICRsb2dOYW1lLiAgICAgICMKIyAgICAgICAgICAgICAgICAgICBJbXByb3ZlZCBjb21tZW50cy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgIDIwMTYtMDEtMDUgSkZMIEZpeGVkIHRoZSBTdGFydFBlbmRpbmcgc3RhdGUgcmVwb3J0aW5nLiAgICAgICAgICAgICAgICAgICAjCiMgICAgMjAxNi0wMy0xNyBKRkwgUmVtb3ZlZCBhbGlhc2VzLiBBZGRlZCBtaXNzaW5nIGV4cGxpY2l0IGFyZ3VtZW50IG5hbWVzLiAgICMKIyAgICAyMDE2LTA0LTE2IEpGTCBNb3ZlZCB0aGUgb2ZmaWNpYWwgcmVwb3NpdG9yeSBvbiBHaXRIdWIuICAgICAgICAgICAgICAgICAgIwojICAgIDIwMTYtMDQtMjEgSkZMIE1pbm9yIGJ1ZyBmaXg6IE5ldy1FdmVudExvZyBkaWQgbm90IHVzZSB2YXJpYWJsZSAkbG9nTmFtZS4jCiMgICAgMjAxNi0wNS0yNSBKRkwgQnVnIGZpeDogVGhlIHNlcnZpY2UgdGFzayB3YXMgbm90IHByb3Blcmx5IHN0b3BwZWQ7IEl0cyAgICMKIyAgICAgICAgICAgICAgICAgICBmaW5hbGx5IGJsb2NrIHdhcyBub3QgZXhlY3V0ZWQsIGFuZCBhIHpvbWJpZSB0YXNrIG9mdGVuICAgIwojICAgICAgICAgICAgICAgICAgIHJlbWFpbmVkLiBGaXhlZCBieSB1c2luZyBhIG5hbWVkIHBpcGUgdG8gc2VuZCBtZXNzYWdlcyAgICAjCiMgICAgICAgICAgICAgICAgICAgdG8gdGhlIHNlcnZpY2UgdGFzay4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE2LTA2LTA1IEpGTCBGaW5hbGl6ZWQgdGhlIGV2ZW50LWRyaXZlbiBzZXJ2aWNlIGhhbmRsZXIuICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIEZpeGVkIHRoZSBkZWZhdWx0IGNvbW1hbmQgc2V0dGluZyBpbiBQb3dlclNoZWxsIHYyLiAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgQWRkZWQgYSBzYW1wbGUgLUNvbnRyb2wgb3B0aW9uIHVzaW5nIHRoZSBuZXcgcGlwZS4gICAgICAgICMKIyAgICAyMDE2LTA2LTA4IEpGTCBSZXdyb3RlIHRoZSBwaXBlIGhhbmRsZXIgdXNpbmcgUFNUaHJlYWRzIGluc3RlYWQgb2YgSm9icy4gIwojICAgIDIwMTYtMDYtMDkgSkZMIEZpbmFsaXplZCB0aGUgUFNUaHJlYWQgbWFuYWdlbWVudCByb3V0aW5lcyBlcnJvciBoYW5kbGluZy4jCiMgICAgICAgICAgICAgICAgICAgVGhpcyBmaW5hbGx5IGZpeGVzIGlzc3VlICMxLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE2LTA4LTIyIEpGTCBGaXhlZCBpc3N1ZSAjMyBjcmVhdGluZyB0aGUgbG9nIGFuZCBpbnN0YWxsIGRpcmVjdG9yaWVzLiAgIwojCQkgICAgVGhhbmtzIE5pc2NobC4JCQkJCSAgICAgICMKIyAgICAyMDE2LTA5LTA2IEpGTCBGaXhlZCBpc3N1ZSAjNCBkZXRlY3RpbmcgdGhlIFN5c3RlbSBhY2NvdW50LiBOb3cgZG9uZSBpbiAgIwojCQkgICAgYSBsYW5ndWFnZS1pbmRlcGVuZGVudCB3YXkuIFRoYW5rcyBBIEdvbnphbGV6LgkgICAgICAjCiMgICAgMjAxNi0wOS0xOSBKRkwgRml4ZWQgaXNzdWUgIzUgc3RhcnRpbmcgc2VydmljZXMgdGhhdCBiZWdpbiB3aXRoIGEgbnVtYmVyLiMKIyAgICAgICAgICAgICAgICAgICBBZGRlZCBhICRTZXJ2aWNlRGVzY3JpcHRpb24gc3RyaW5nIGdsb2JhbCBzZXR0aW5nLCBhbmQgICAgIwojICAgICAgICAgICAgICAgICAgIHVzZSBpdCBmb3IgdGhlIHNlcnZpY2UgcmVnaXN0cmF0aW9uLiAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgQWRkZWQgY29tbWVudHMgYWJvdXQgV2luZG93cyBldmVudCBsb2dzIGxpbWl0YXRpb25zLiAgICAgICMKIyAgICAyMDE2LTExLTE3IFJCTSBGaXhlZCBpc3N1ZSAjNiBNYW5nbGVkIGh5cGhlbiBpbiBmaW5hbCBVbnJlZ2lzdGVyLUV2ZW50LiAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKI1JlcXVpcmVzIC12ZXJzaW9uIDIKCjwjCiAgLlNZTk9QU0lTCiAgICBBIHNhbXBsZSBXaW5kb3dzIHNlcnZpY2UsIGluIGEgc3RhbmRhbG9uZSBQb3dlclNoZWxsIHNjcmlwdC4KCiAgLkRFU0NSSVBUSU9OCiAgICBUaGlzIHNjcmlwdCBkZW1vbnN0cmF0ZXMgaG93IHRvIHdyaXRlIGEgV2luZG93cyBzZXJ2aWNlIGluIHB1cmUgUG93ZXJTaGVsbC4KICAgIEl0IGR5bmFtaWNhbGx5IGdlbmVyYXRlcyBhIHNtYWxsIFBTU2VydmljZS5leGUgd3JhcHBlciwgdGhhdCBpbiB0dXJuCiAgICBpbnZva2VzIHRoaXMgUG93ZXJTaGVsbCBzY3JpcHQgYWdhaW4gZm9yIGl0cyBzdGFydCBhbmQgc3RvcCBldmVudHMuCgogIC5QQVJBTUVURVIgU3RhcnQKICAgIFN0YXJ0IHRoZSBzZXJ2aWNlLgoKICAuUEFSQU1FVEVSIFN0b3AKICAgIFN0b3AgdGhlIHNlcnZpY2UuCgogIC5QQVJBTUVURVIgUmVzdGFydAogICAgU3RvcCB0aGVuIHJlc3RhcnQgdGhlIHNlcnZpY2UuCgogIC5QQVJBTUVURVIgU3RhdHVzCiAgICBHZXQgdGhlIGN1cnJlbnQgc2VydmljZSBzdGF0dXM6IE5vdCBpbnN0YWxsZWQgLyBTdG9wcGVkIC8gUnVubmluZwoKICAuUEFSQU1FVEVSIFNldHVwCiAgICBJbnN0YWxsIHRoZSBzZXJ2aWNlLgoKICAuUEFSQU1FVEVSIFJlbW92ZQogICAgVW5pbnN0YWxsIHRoZSBzZXJ2aWNlLgoKICAuUEFSQU1FVEVSIFNlcnZpY2UKICAgIFJ1biB0aGUgc2VydmljZSBpbiB0aGUgYmFja2dyb3VuZC4gVXNlZCBpbnRlcm5hbGx5IGJ5IHRoZSBzY3JpcHQuCiAgICBEbyBub3QgdXNlLCBleGNlcHQgZm9yIHRlc3QgcHVycG9zZXMuCgogIC5QQVJBTUVURVIgQ29udHJvbAogICAgU2VuZCBhIGNvbnRyb2wgbWVzc2FnZSB0byB0aGUgc2VydmljZSB0aHJlYWQuCgogIC5QQVJBTUVURVIgVmVyc2lvbgogICAgRGlzcGxheSB0aGlzIHNjcmlwdCB2ZXJzaW9uIGFuZCBleGl0LgoKICAuRVhBTVBMRQogICAgIyBTZXR1cCB0aGUgc2VydmljZSBhbmQgcnVuIGl0IGZvciB0aGUgZmlyc3QgdGltZQogICAgQzpcUFM+LlxQU1NlcnZpY2UucHMxIC1TdGF0dXMKICAgIE5vdCBpbnN0YWxsZWQKICAgIEM6XFBTPi5cUFNTZXJ2aWNlLnBzMSAtU2V0dXAKICAgIEM6XFBTPiMgQXQgdGhpcyBzdGFnZSwgYSBjb3B5IG9mIFBTU2VydmljZS5wczEgaXMgcHJlc2VudCBpbiB0aGUgcGF0aAogICAgQzpcUFM+UFNTZXJ2aWNlIC1TdGF0dXMKICAgIFN0b3BwZWQKICAgIEM6XFBTPlBTU2VydmljZSAtU3RhcnQKICAgIEM6XFBTPlBTU2VydmljZSAtU3RhdHVzCiAgICBSdW5uaW5nCiAgICBDOlxQUz4jIExvYWQgdGhlIGxvZyBmaWxlIGluIE5vdGVwYWQuZXhlIGZvciByZXZpZXcKICAgIEM6XFBTPm5vdGVwYWQgJHtFTlY6d2luZGlyfVxMb2dzXFBTU2VydmljZS5sb2cKCiAgLkVYQU1QTEUKICAgICMgU3RvcCB0aGUgc2VydmljZSBhbmQgdW5pbnN0YWxsIGl0LgogICAgQzpcUFM+UFNTZXJ2aWNlIC1TdG9wCiAgICBDOlxQUz5QU1NlcnZpY2UgLVN0YXR1cwogICAgU3RvcHBlZAogICAgQzpcUFM+UFNTZXJ2aWNlIC1SZW1vdmUKICAgIEM6XFBTPiMgQXQgdGhpcyBzdGFnZSwgbm8gY29weSBvZiBQU1NlcnZpY2UucHMxIGlzIHByZXNlbnQgaW4gdGhlIHBhdGggYW55bW9yZQogICAgQzpcUFM+LlxQU1NlcnZpY2UucHMxIC1TdGF0dXMKICAgIE5vdCBpbnN0YWxsZWQKCiAgLkVYQU1QTEUKICAgICMgU2VuZCBhIGNvbnRyb2wgbWVzc2FnZSB0byB0aGUgc2VydmljZSwgYW5kIHZlcmlmeSB0aGF0IGl0IHJlY2VpdmVkIGl0LgogICAgQzpcUFM+UFNTZXJ2aWNlIC1Db250cm9sIEhlbGxvCiAgICBDOlxQUz5Ob3RlcGFkIEM6XFdpbmRvd3NcTG9nc1xQU1NlcnZpY2UubG9nCiAgICAjIFRoZSBsYXN0IGxpbmVzIHNob3VsZCBjb250YWluIGEgdHJhY2Ugb2YgdGhlIHJlY2VwdGlvbiBvZiB0aGlzIEhlbGxvIG1lc3NhZ2UKIz4KCltDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSdTdGF0dXMnKV0KUGFyYW0oCiAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSdTdGFydCcsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgW1N3aXRjaF0kU3RhcnQsICAgICAgICAgICAgICAgIyBTdGFydCB0aGUgc2VydmljZQoKICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1N0b3AnLCBNYW5kYXRvcnk9JHRydWUpXQogIFtTd2l0Y2hdJFN0b3AsICAgICAgICAgICAgICAgICMgU3RvcCB0aGUgc2VydmljZQoKICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1Jlc3RhcnQnLCBNYW5kYXRvcnk9JHRydWUpXQogIFtTd2l0Y2hdJFJlc3RhcnQsICAgICAgICAgICAgICMgUmVzdGFydCB0aGUgc2VydmljZQoKICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1N0YXR1cycsIE1hbmRhdG9yeT0kZmFsc2UpXQogIFtTd2l0Y2hdJFN0YXR1cyA9ICQoJFBTQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWVxICdTdGF0dXMnKSwgIyBHZXQgdGhlIGN1cnJlbnQgc2VydmljZSBzdGF0dXMKCiAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSdTZXR1cCcsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgW0FsaWFzKCJJbnN0YWxsIildCiAgW1N3aXRjaF0kU2V0dXAsICAgICAgICAgICAgICAgIyBJbnN0YWxsIHRoZSBzZXJ2aWNlCgogIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZT0nUmVtb3ZlJywgTWFuZGF0b3J5PSR0cnVlKV0KICBbU3dpdGNoXSRSZW1vdmUsICAgICAgICAgICAgICAjIFVuaW5zdGFsbCB0aGUgc2VydmljZQoKICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1NlcnZpY2UnLCBNYW5kYXRvcnk9JHRydWUpXQogIFtTd2l0Y2hdJFNlcnZpY2UsICAgICAgICAgICAgICMgUnVuIHRoZSBzZXJ2aWNlCgogIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZT0nQ29udHJvbCcsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgW1N0cmluZ10kQ29udHJvbCA9ICRudWxsLCAgICAgIyBDb250cm9sIG1lc3NhZ2UgdG8gc2VuZCB0byB0aGUgc2VydmljZQoKICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1ZlcnNpb24nLCBNYW5kYXRvcnk9JHRydWUpXQogIFtTd2l0Y2hdJFZlcnNpb24gICAgICAgICAgICAgICMgR2V0IHRoaXMgc2NyaXB0IHZlcnNpb24KKQoKJHNjcmlwdFZlcnNpb24gPSAiMS4wIgoKCiMgVGhpcyBzY3JpcHQgbmFtZSwgd2l0aCB2YXJpb3VzIGxldmVscyBvZiBkZXRhaWxzCiRhcmd2MCA9IEdldC1JdGVtICRNeUludm9jYXRpb24uTXlDb21tYW5kLkRlZmluaXRpb24KJHBhcmVudGRpcj1zcGxpdC1wYXRoIC1wYXJlbnQgJGFyZ3YwLmZ1bGxuYW1lCiRhcHA9W3htbF0oZ2V0LWNvbnRlbnQgIiRwYXJlbnRkaXJcc2VydmljZS54bWwiKQoKJGNvbmZpZz0kYXBwLmNvbmZpZwokc2NyaXB0ID0gJGFyZ3YwLmJhc2VuYW1lICAgICAgICAgICAgICAgIyBFeDogUFNTZXJ2aWNlCiRzY3JpcHROYW1lID0gJGFyZ3YwLm5hbWUgICAgICAgICAgICAgICAjIEV4OiBQU1NlcnZpY2UucHMxCiRzY3JpcHRGdWxsTmFtZSA9ICRhcmd2MC5mdWxsbmFtZSAgICAgICAjIEV4OiBDOlxUZW1wXFBTU2VydmljZS5wczEKJGNvbmZpZ05hbWUgPSAkc2NyaXB0TmFtZS5yZXBsYWNlKCIucHMxIiwiLnhtbCIpCiRjb25maWdGdWxsTmFtZSA9IGpvaW4tcGF0aCAkcGFyZW50ZGlyICRjb25maWdOYW1lCgojIEdsb2JhbCBzZXR0aW5ncwokc2VydmljZU5hbWUgPSAkY29uZmlnLnNlcnZpY2UubmFtZSAgICAgICAgICAgICAgICAgICMgQSBvbmUtd29yZCBuYW1lIHVzZWQgZm9yIG5ldCBzdGFydCBjb21tYW5kcwokc2VydmljZURpc3BsYXlOYW1lID0gJGNvbmZpZy5zZXJ2aWNlLmRpc3BsYXluYW1lCiRTZXJ2aWNlRGVzY3JpcHRpb24gPSAkY29uZmlnLnNlcnZpY2UuZGVzY3JpcHRpb24KJHBpcGVOYW1lID0gIlNlcnZpY2VfJHNlcnZpY2VOYW1lIiAgICAgICMgTmFtZWQgcGlwZSBuYW1lLiBVc2VkIGZvciBzZW5kaW5nIG1lc3NhZ2VzIHRvIHRoZSBzZXJ2aWNlIHRhc2sKIyAkaW5zdGFsbERpciA9ICIke0VOVjpQcm9ncmFtRmlsZXN9XCRzZXJ2aWNlTmFtZSIgIyBXaGVyZSB0byBpbnN0YWxsIHRoZSBzZXJ2aWNlIGZpbGVzCiRpbnN0YWxsRGlyID0gIiR7RU5WOndpbmRpcn1cU3lzdGVtMzIiICAjIFdoZXJlIHRvIGluc3RhbGwgdGhlIHNlcnZpY2UgZmlsZXMKJHNjcmlwdENvcHkgPSAiJGluc3RhbGxEaXJcJHNjcmlwdE5hbWUiCiRjb25maWdDb3B5ID0gIiRpbnN0YWxsRGlyXCRjb25maWdOYW1lIgokZXhlTmFtZSA9ICIkc2VydmljZU5hbWUuZXhlIgokZXhlRnVsbE5hbWUgPSAiJGluc3RhbGxEaXJcJGV4ZU5hbWUiCiMkbG9nRGlyID0gIiR7RU5WOndpbmRpcn1cTG9ncyIgICAgICAgICAgIyBXaGVyZSB0byBsb2cgdGhlIHNlcnZpY2UgbWVzc2FnZXMKJGxvZ2RpciA9ICRjb25maWcuc2VydmljZS5sb2dwYXRoCiRsb2dGaWxlID0gam9pbi1wYXRoICRsb2dEaXIgIiRzZXJ2aWNlTmFtZS5sb2ciCiRsb2dOYW1lID0gJGNvbmZpZy5zZXJ2aWNlLmV2ZW50bG9nICAgICAgICAgICAgICAgICMgRXZlbnQgTG9nIG5hbWUgKFVucmVsYXRlZCB0byB0aGUgbG9nRmlsZSEpCiMgTm90ZTogVGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24gb25seSBzdXBwb3J0cyAiY2xhc3NpYyIgKGllLiBYUC1jb21wYXRibGUpIGV2ZW50IGxvZ3MuCiMJVG8gc3VwcG9ydCBuZXcgc3R5bGUgKFZpc3RhIGFuZCBsYXRlcikgIkFwcGxpY2F0aW9ucyBhbmQgU2VydmljZXMgTG9ncyIgZm9sZGVyIHRyZWVzLCBpdCB3b3VsZAojCWJlIG5lY2Vzc2FyeSB0byB1c2UgdGhlIG5ldyAqV2luRXZlbnQgY29tbWFuZHMgaW5zdGVhZCBvZiB0aGUgWFAtY29tcGF0aWJsZSAqRXZlbnRMb2cgY29tbWFuZHMuCiMgR290Y2hhOiBJZiB5b3UgY2hhbmdlICRsb2dOYW1lIHRvICJORVdMT0dOQU1FIiwgbWFrZSBzdXJlIHRoYXQgdGhlIHJlZ2lzdHJ5IGtleSBiZWxvdyBkb2VzIG5vdCBleGlzdDoKIyAgICAgICAgIEhLTE1cU3lzdGVtXEN1cnJlbnRDb250cm9sU2V0XHNlcnZpY2VzXGV2ZW50bG9nXEFwcGxpY2F0aW9uXE5FV0xPR05BTUUKIwkgIEVsc2UsIE5ldy1FdmVudExvZyB3aWxsIGZhaWwsIHNheWluZyB0aGUgbG9nIE5FV0xPR05BTUUgaXMgYWxyZWFkeSByZWdpc3RlcmVkIGFzIGEgc291cmNlLAojCSAgZXZlbiB0aG91Z2ggIkdldC1XaW5FdmVudCAtTGlzdExvZyBORVdMT0dOQU1FIiBzYXlzIHRoaXMgbG9nIGRvZXMgbm90IGV4aXN0IQoKIyBJZiB0aGUgLVZlcnNpb24gc3dpdGNoIGlzIHNwZWNpZmllZCwgZGlzcGxheSB0aGUgc2NyaXB0IHZlcnNpb24gYW5kIGV4aXQuCmlmICgkVmVyc2lvbikgewogIFdyaXRlLU91dHB1dCAkc2NyaXB0VmVyc2lvbgogIHJldHVybgp9CgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEZ1bmN0aW9uICAgICAgICBOb3cgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBEZXNjcmlwdGlvbiAgICAgR2V0IGEgc3RyaW5nIHdpdGggdGhlIGN1cnJlbnQgdGltZS4gICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgTm90ZXMgICAgICAgICAgIFRoZSBvdXRwdXQgc3RyaW5nIGlzIGluIHRoZSBJU08gODYwMSBmb3JtYXQsIGV4Y2VwdCBmb3IgICAjCiMgICAgICAgICAgICAgICAgICAgYSBzcGFjZSBpbnN0ZWFkIG9mIGEgVCBiZXR3ZWVuIHRoZSBkYXRlIGFuZCB0aW1lLCB0byAgICAgICMKIyAgICAgICAgICAgICAgICAgICBpbXByb3ZlIHRoZSByZWFkYWJpbGl0eS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBIaXN0b3J5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE1LTA2LTExIEpGTCBDcmVhdGVkIHRoaXMgcm91dGluZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKCkZ1bmN0aW9uIE5vdyB7CiAgUGFyYW0gKAogICAgW1N3aXRjaF0kbXMsICAgICAgICAjIEFwcGVuZCBtaWxsaXNlY29uZHMKICAgIFtTd2l0Y2hdJG5zICAgICAgICAgIyBBcHBlbmQgbmFub3NlY29uZHMKICApCiAgJERhdGUgPSBHZXQtRGF0ZQogICRub3cgPSAiIgogICRub3cgKz0gInswOjAwMDB9LXsxOjAwfS17MjowMH0gIiAtZiAkRGF0ZS5ZZWFyLCAkRGF0ZS5Nb250aCwgJERhdGUuRGF5CiAgJG5vdyArPSAiezA6MDB9OnsxOjAwfTp7MjowMH0iIC1mICREYXRlLkhvdXIsICREYXRlLk1pbnV0ZSwgJERhdGUuU2Vjb25kCiAgJG5zU3VmZml4ID0gIiIKICBpZiAoJG5zKSB7CiAgICBpZiAoIiQoJERhdGUuVGltZU9mRGF5KSIgLW1hdGNoICJcLlxkXGRcZFxkXGRcZCIpIHsKICAgICAgJG5vdyArPSAkbWF0Y2hlc1swXQogICAgICAkbXMgPSAkZmFsc2UKICAgIH0gZWxzZSB7CiAgICAgICRtcyA9ICR0cnVlCiAgICAgICRuc1N1ZmZpeCA9ICIwMDAiCiAgICB9CiAgfSAKICBpZiAoJG1zKSB7CiAgICAkbm93ICs9ICIuezA6MDAwfSRuc1N1ZmZpeCIgLWYgJERhdGUuTWlsbGlTZWNvbmQKICB9CiAgcmV0dXJuICRub3cKfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGdW5jdGlvbiAgICAgICAgTG9nICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIExvZyBhIHN0cmluZyBpbnRvIHRoZSBQU1NlcnZpY2UubG9nIGZpbGUgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEFyZ3VtZW50cyAgICAgICBBIHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBOb3RlcyAgICAgICAgICAgUHJlZml4ZXMgdGhlIHN0cmluZyB3aXRoIGEgdGltZXN0YW1wIGFuZCB0aGUgdXNlciBuYW1lLiAgICMKIyAgICAgICAgICAgICAgICAgICAoRXhjZXB0IGlmIHRoZSBzdHJpbmcgaXMgZW1wdHk6IFRoZW4gb3V0cHV0IGEgYmxhbmsgbGluZS4pIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBIaXN0b3J5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE2LTA2LTA1IEpGTCBBbHNvIHByZXBlbmQgdGhlIFByb2Nlc3MgSUQuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgIDIwMTYtMDYtMDggSkZMIEFsbG93IG91dHB1dGluZyBibGFuayBsaW5lcy4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoKRnVuY3Rpb24gTG9nICgpIHsKICBQYXJhbSgKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwgVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUsIFBvc2l0aW9uPTApXQogICAgW1N0cmluZ10kc3RyaW5nCiAgKQogIGlmICghKFRlc3QtUGF0aCAkbG9nRGlyKSkgewogICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIGRpcmVjdG9yeSAtUGF0aCAkbG9nRGlyIHwgT3V0LU51bGwKICB9CiAgaWYgKCRTdHJpbmcubGVuZ3RoKSB7CiAgICAkc3RyaW5nID0gIiQoTm93KSAkcGlkICR1c2VyTmFtZSAkc3RyaW5nIgogIH0KICAkc3RyaW5nIHwgT3V0LUZpbGUgLUVuY29kaW5nIEFTQ0lJIC1BcHBlbmQgIiRsb2dGaWxlIgp9CgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEZ1bmN0aW9uICAgICAgICBTdGFydC1QU1RocmVhZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBEZXNjcmlwdGlvbiAgICAgU3RhcnQgYSBuZXcgUG93ZXJTaGVsbCB0aHJlYWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgQXJndW1lbnRzICAgICAgIFNlZSB0aGUgUGFyYW0oKSBibG9jayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIE5vdGVzICAgICAgICAgICBSZXR1cm5zIGEgdGhyZWFkIGRlc2NyaXB0aW9uIG9iamVjdC4gICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIFRoZSBjb21wbGV0aW9uIGNhbiBiZSB0ZXN0ZWQgaW4gJF8uSGFuZGxlLklzQ29tcGxldGVkICAgICAjCiMgICAgICAgICAgICAgICAgICAgQWx0ZXJuYXRpdmU6IFVzZSBhIHRocmVhZCBjb21wbGV0aW9uIGV2ZW50LiAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgUmVmZXJlbmNlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgaHR0cHM6Ly9sZWFybi1wb3dlcnNoZWxsLm5ldC90YWcvcnVuc3BhY2UvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICBodHRwczovL2xlYXJuLXBvd2Vyc2hlbGwubmV0LzIwMTMvMDQvMTkvc2hhcmluZy12YXJpYWJsZXMtYW5kLWxpdmUtb2JqZWN0cy1iZXR3ZWVuLXBvd2Vyc2hlbGwtcnVuc3BhY2VzLwojICAgIGh0dHA6Ly93d3cuY29kZXByb2plY3QuY29tL1RpcHMvODk1ODQwL011bHRpLVRocmVhZGVkLVBvd2VyU2hlbGwtQ29va2Jvb2sKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgSGlzdG9yeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgMjAxNi0wNi0wOCBKRkwgQ3JlYXRlZCB0aGlzIGZ1bmN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCgokUFNUaHJlYWRDb3VudCA9IDAgICAgICAgICAgICAgICMgQ291bnRlciBvZiBQU1RocmVhZCBJRHMgZ2VuZXJhdGVkIHNvIGZhcgokUFNUaHJlYWRMaXN0ID0gQHt9ICAgICAgICAgICAgICMgRXhpc3RpbmcgUFNUaHJlYWRzIGluZGV4ZWQgYnkgSWQKCkZ1bmN0aW9uIEdldC1QU1RocmVhZCAoKSB7CiAgUGFyYW0oCiAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UsIFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlLCBQb3NpdGlvbj0wKV0KICAgIFtpbnRbXV0kSWQgPSAkUFNUaHJlYWRMaXN0LktleXMgICAgICMgTGlzdCBvZiB0aHJlYWQgSURzCiAgKQogICRJZCB8ICUgeyAkUFNUaHJlYWRMaXN0LiRfIH0KfQoKRnVuY3Rpb24gU3RhcnQtUFNUaHJlYWQgKCkgewogIFBhcmFtKAogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsIFBvc2l0aW9uPTApXQogICAgW1NjcmlwdEJsb2NrXSRTY3JpcHRCbG9jaywgICAgICAgICAgIyBUaGUgc2NyaXB0IGJsb2NrIHRvIHJ1biBpbiBhIG5ldyB0aHJlYWQKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldCiAgICBbU3RyaW5nXSROYW1lID0gIiIsICAgICAgICAgICAgICAgICAjIE9wdGlvbmFsIHRocmVhZCBuYW1lLiBEZWZhdWx0OiAiUFNUaHJlYWQkSWQiCiAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXQogICAgW1N0cmluZ10kRXZlbnQgPSAiIiwgICAgICAgICAgICAgICAgIyBPcHRpb25hbCB0aHJlYWQgY29tcGxldGlvbiBldmVudCBuYW1lLiBEZWZhdWx0OiBOb25lCiAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXQogICAgW0hhc2h0YWJsZV0kVmFyaWFibGVzID0gQHt9LCAgICAgICAgIyBPcHRpb25hbCB2YXJpYWJsZXMgdG8gY29weSBpbnRvIHRoZSBzY3JpcHQgY29udGV4dC4KICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldCiAgICBbU3RyaW5nW11dJEZ1bmN0aW9ucyA9IEAoKSwgICAgICAgICAjIE9wdGlvbmFsIGZ1bmN0aW9ucyB0byBjb3B5IGludG8gdGhlIHNjcmlwdCBjb250ZXh0LgogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV0KICAgIFtPYmplY3RbXV0kQXJndW1lbnRzID0gQCgpICAgICAgICAgICMgT3B0aW9uYWwgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHNjcmlwdC4KICApCgogICRJZCA9ICRzY3JpcHQ6UFNUaHJlYWRDb3VudAogICRzY3JpcHQ6UFNUaHJlYWRDb3VudCArPSAxCiAgaWYgKCEkTmFtZS5MZW5ndGgpIHsKICAgICROYW1lID0gIlBTVGhyZWFkJElkIgogIH0KICAkSW5pdGlhbFNlc3Npb25TdGF0ZSA9IFtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlJ1bnNwYWNlcy5Jbml0aWFsU2Vzc2lvblN0YXRlXTo6Q3JlYXRlRGVmYXVsdCgpCiAgZm9yZWFjaCAoJFZhck5hbWUgaW4gJFZhcmlhYmxlcy5LZXlzKSB7ICMgQ29weSB0aGUgc3BlY2lmaWVkIHZhcmlhYmxlcyBpbnRvIHRoZSBzY3JpcHQgaW5pdGlhbCBjb250ZXh0CiAgICAkdmFsdWUgPSAkVmFyaWFibGVzLiRWYXJOYW1lCiAgICBXcml0ZS1EZWJ1ZyAiQWRkaW5nIHZhcmlhYmxlICRWYXJOYW1lPVskKCRWYWx1ZS5HZXRUeXBlKCkpXSRWYWx1ZSIKICAgICR2YXIgPSBOZXctT2JqZWN0IFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUnVuc3BhY2VzLlNlc3Npb25TdGF0ZVZhcmlhYmxlRW50cnkoJFZhck5hbWUsICR2YWx1ZSwgIiIpCiAgICAkSW5pdGlhbFNlc3Npb25TdGF0ZS5WYXJpYWJsZXMuQWRkKCR2YXIpCiAgfQogIGZvcmVhY2ggKCRGdW5jTmFtZSBpbiAkRnVuY3Rpb25zKSB7ICMgQ29weSB0aGUgc3BlY2lmaWVkIGZ1bmN0aW9ucyBpbnRvIHRoZSBzY3JpcHQgaW5pdGlhbCBjb250ZXh0CiAgICAkQm9keSA9IEdldC1Db250ZW50IGZ1bmN0aW9uOiRGdW5jTmFtZQogICAgV3JpdGUtRGVidWcgIkFkZGluZyBmdW5jdGlvbiAkRnVuY05hbWUgKCkgeyRCb2R5fSIKICAgICRmdW5jID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlJ1bnNwYWNlcy5TZXNzaW9uU3RhdGVGdW5jdGlvbkVudHJ5KCRGdW5jTmFtZSwgJEJvZHkpCiAgICAkSW5pdGlhbFNlc3Npb25TdGF0ZS5Db21tYW5kcy5BZGQoJGZ1bmMpCiAgfQogICRSdW5TcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgkSW5pdGlhbFNlc3Npb25TdGF0ZSkKICAkUnVuU3BhY2UuT3BlbigpCiAgJFBTUGlwZWxpbmUgPSBbcG93ZXJzaGVsbF06OkNyZWF0ZSgpCiAgJFBTUGlwZWxpbmUuUnVuc3BhY2UgPSAkUnVuU3BhY2UKICAkUFNQaXBlbGluZS5BZGRTY3JpcHQoJFNjcmlwdEJsb2NrKSB8IE91dC1OdWxsCiAgJEFyZ3VtZW50cyB8ICUgewogICAgV3JpdGUtRGVidWcgIkFkZGluZyBhcmd1bWVudCBbJCgkXy5HZXRUeXBlKCkpXSckXyciCiAgICAkUFNQaXBlbGluZS5BZGRBcmd1bWVudCgkXykgfCBPdXQtTnVsbAogIH0KICAkSGFuZGxlID0gJFBTUGlwZWxpbmUuQmVnaW5JbnZva2UoKSAjIFN0YXJ0IGV4ZWN1dGluZyB0aGUgc2NyaXB0CiAgaWYgKCRFdmVudC5MZW5ndGgpIHsgIyBEbyB0aGlzIGFmdGVyIEJlZ2luSW52b2tlKCksIHRvIGF2b2lkIGdldHRpbmcgdGhlIHN0YXJ0IGV2ZW50LgogICAgUmVnaXN0ZXItT2JqZWN0RXZlbnQgJFBTUGlwZWxpbmUgLUV2ZW50TmFtZSBJbnZvY2F0aW9uU3RhdGVDaGFuZ2VkIC1Tb3VyY2VJZGVudGlmaWVyICROYW1lIC1NZXNzYWdlRGF0YSAkRXZlbnQKICB9CiAgJFBTVGhyZWFkID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsKICAgIElkID0gJElkCiAgICBOYW1lID0gJE5hbWUKICAgIEV2ZW50ID0gJEV2ZW50CiAgICBSdW5TcGFjZSA9ICRSdW5TcGFjZQogICAgUFNQaXBlbGluZSA9ICRQU1BpcGVsaW5lCiAgICBIYW5kbGUgPSAkSGFuZGxlCiAgfSAgICAgIyBSZXR1cm4gdGhlIHRocmVhZCBkZXNjcmlwdGlvbiB2YXJpYWJsZXMKICAkc2NyaXB0OlBTVGhyZWFkTGlzdFskSWRdID0gJFBTVGhyZWFkCiAgJFBTVGhyZWFkCn0KCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRnVuY3Rpb24gICAgICAgIFJlY2VpdmUtUFNUaHJlYWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIERlc2NyaXB0aW9uICAgICBHZXQgdGhlIHJlc3VsdCBvZiBhIHRocmVhZCwgYW5kIG9wdGlvbmFsbHkgY2xlYW4gaXQgdXAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBBcmd1bWVudHMgICAgICAgU2VlIHRoZSBQYXJhbSgpIGJsb2NrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgTm90ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEhpc3RvcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgIDIwMTYtMDYtMDggSkZMIENyZWF0ZWQgdGhpcyBmdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoKRnVuY3Rpb24gUmVjZWl2ZS1QU1RocmVhZCAoKSB7CiAgW0NtZGxldEJpbmRpbmcoKV0KICBQYXJhbSgKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwgVmFsdWVGcm9tUGlwZWxpbmU9JHRydWUsIFBvc2l0aW9uPTApXQogICAgW1BTT2JqZWN0XSRQU1RocmVhZCwgICAgICAgICAgICAgICAgIyBUaHJlYWQgZGVzY3JpcHRvciBvYmplY3QKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldCiAgICBbU3dpdGNoXSRBdXRvUmVtb3ZlICAgICAgICAgICAgICAgICAjIElmICRUcnVlLCByZW1vdmUgdGhlIFBTVGhyZWFkIG9iamVjdAogICkKICBQcm9jZXNzIHsKICAgIGlmICgkUFNUaHJlYWQuRXZlbnQgLWFuZCAkQXV0b1JlbW92ZSkgewogICAgICBVbnJlZ2lzdGVyLUV2ZW50IC1Tb3VyY2VJZGVudGlmaWVyICRQU1RocmVhZC5OYW1lCiAgICAgIEdldC1FdmVudCAtU291cmNlSWRlbnRpZmllciAkUFNUaHJlYWQuTmFtZSB8IFJlbW92ZS1FdmVudCAjIEZsdXNoIHJlbWFpbmluZyBldmVudHMKICAgIH0KICAgIHRyeSB7CiAgICAgICRQU1RocmVhZC5QU1BpcGVsaW5lLkVuZEludm9rZSgkUFNUaHJlYWQuSGFuZGxlKSAjIE91dHB1dCB0aGUgdGhyZWFkIHBpcGVsaW5lIG91dHB1dAogICAgfSBjYXRjaCB7CiAgICAgICRfICMgT3V0cHV0IHRoZSB0aHJlYWQgcGlwZWxpbmUgZXJyb3IKICAgIH0KICAgIGlmICgkQXV0b1JlbW92ZSkgewogICAgICAkUFNUaHJlYWQuUnVuU3BhY2UuQ2xvc2UoKQogICAgICAkUFNUaHJlYWQuUFNQaXBlbGluZS5EaXNwb3NlKCkKICAgICAgJFBTVGhyZWFkTGlzdC5SZW1vdmUoJFBTVGhyZWFkLklkKQogICAgfQogIH0KfQoKRnVuY3Rpb24gUmVtb3ZlLVBTVGhyZWFkICgpIHsKICBbQ21kbGV0QmluZGluZygpXQogIFBhcmFtKAogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLCBWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSwgUG9zaXRpb249MCldCiAgICBbUFNPYmplY3RdJFBTVGhyZWFkICAgICAgICAgICAgICAgICAjIFRocmVhZCBkZXNjcmlwdG9yIG9iamVjdAogICkKICBQcm9jZXNzIHsKICAgICRfIHwgUmVjZWl2ZS1QU1RocmVhZCAtQXV0b1JlbW92ZSB8IE91dC1OdWxsCiAgfQp9CgojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEZ1bmN0aW9uICAgICAgICBTZW5kLVBpcGVNZXNzYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBEZXNjcmlwdGlvbiAgICAgU2VuZCBhIG1lc3NhZ2UgdG8gYSBuYW1lZCBwaXBlICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgQXJndW1lbnRzICAgICAgIFNlZSB0aGUgUGFyYW0oKSBibG9jayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIE5vdGVzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBIaXN0b3J5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE2LTA1LTI1IEpGTCBDcmVhdGVkIHRoaXMgZnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKCkZ1bmN0aW9uIFNlbmQtUGlwZU1lc3NhZ2UgKCkgewogIFBhcmFtKAogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgW1N0cmluZ10kUGlwZU5hbWUsICAgICAgICAgICMgTmFtZWQgcGlwZSBuYW1lCiAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldCiAgICBbU3RyaW5nXSRNZXNzYWdlICAgICAgICAgICAgIyBNZXNzYWdlIHN0cmluZwogICkKICAkUGlwZURpciAgPSBbU3lzdGVtLklPLlBpcGVzLlBpcGVEaXJlY3Rpb25dOjpPdXQKICAkUGlwZU9wdCAgPSBbU3lzdGVtLklPLlBpcGVzLlBpcGVPcHRpb25zXTo6QXN5bmNocm9ub3VzCgogICRwaXBlID0gJG51bGwgIyBOYW1lZCBwaXBlIHN0cmVhbQogICRzdyA9ICRudWxsICAgIyBTdHJlYW0gV3JpdGVyCiAgdHJ5IHsKICAgICRwaXBlID0gbmV3LW9iamVjdCBTeXN0ZW0uSU8uUGlwZXMuTmFtZWRQaXBlQ2xpZW50U3RyZWFtKCIuIiwgJFBpcGVOYW1lLCAkUGlwZURpciwgJFBpcGVPcHQpCiAgICAkc3cgPSBuZXctb2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1Xcml0ZXIoJHBpcGUpCiAgICAkcGlwZS5Db25uZWN0KDEwMDApCiAgICBpZiAoISRwaXBlLklzQ29ubmVjdGVkKSB7CiAgICAgIHRocm93ICJGYWlsZWQgdG8gY29ubmVjdCBjbGllbnQgdG8gcGlwZSAkcGlwZU5hbWUiCiAgICB9CiAgICAkc3cuQXV0b0ZsdXNoID0gJHRydWUKICAgICRzdy5Xcml0ZUxpbmUoJE1lc3NhZ2UpCiAgfSBjYXRjaCB7CiAgICBMb2cgIkVycm9yIHNlbmRpbmcgcGlwZSAkcGlwZU5hbWUgbWVzc2FnZTogJF8iCiAgfSBmaW5hbGx5IHsKICAgIGlmICgkc3cpIHsKICAgICAgJHN3LkRpc3Bvc2UoKSAjIFJlbGVhc2UgcmVzb3VyY2VzCiAgICAgICRzdyA9ICRudWxsICAgIyBGb3JjZSB0aGUgUG93ZXJTaGVsbCBnYXJiYWdlIGNvbGxlY3RvciB0byBkZWxldGUgdGhlIC5uZXQgb2JqZWN0CiAgICB9CiAgICBpZiAoJHBpcGUpIHsKICAgICAgJHBpcGUuRGlzcG9zZSgpICMgUmVsZWFzZSByZXNvdXJjZXMKICAgICAgJHBpcGUgPSAkbnVsbCAgICMgRm9yY2UgdGhlIFBvd2VyU2hlbGwgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVsZXRlIHRoZSAubmV0IG9iamVjdAogICAgfQogIH0KfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGdW5jdGlvbiAgICAgICAgUmVjZWl2ZS1QaXBlTWVzc2FnZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIFdhaXQgZm9yIGEgbWVzc2FnZSBmcm9tIGEgbmFtZWQgcGlwZSAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEFyZ3VtZW50cyAgICAgICBTZWUgdGhlIFBhcmFtKCkgYmxvY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBOb3RlcyAgICAgICAgICAgSSB0cmllZCBrZWVwaW5nIHRoZSBwaXBlIG9wZW4gYmV0d2VlbiBjbGllbnQgY29ubmVjdGlvbnMsICMKIyAgICAgICAgICAgICAgICAgICBidXQgZm9yIHNvbWUgcmVhc29uIGV2ZXJ5dGltZSB0aGUgY2xpZW50IGNsb3NlcyBoaXMgZW5kICAgIwojICAgICAgICAgICAgICAgICAgIG9mIHRoZSBwaXBlLCB0aGlzIGNsb3NlcyB0aGUgc2VydmVyIGVuZCBhcyB3ZWxsLiAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgQW55IHNvbHV0aW9uIG9uIGhvdyB0byBmaXggdGhpcyB3b3VsZCBtYWtlIHRoZSBjb2RlICAgICAgICMKIyAgICAgICAgICAgICAgICAgICBtb3JlIGVmZmljaWVudC4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBIaXN0b3J5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAyMDE2LTA1LTI1IEpGTCBDcmVhdGVkIHRoaXMgZnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKCkZ1bmN0aW9uIFJlY2VpdmUtUGlwZU1lc3NhZ2UgKCkgewogIFBhcmFtKAogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgW1N0cmluZ10kUGlwZU5hbWUgICAgICAgICAgICMgTmFtZWQgcGlwZSBuYW1lCiAgKQogICRQaXBlRGlyICA9IFtTeXN0ZW0uSU8uUGlwZXMuUGlwZURpcmVjdGlvbl06OkluCiAgJFBpcGVPcHQgID0gW1N5c3RlbS5JTy5QaXBlcy5QaXBlT3B0aW9uc106OkFzeW5jaHJvbm91cwogICRQaXBlTW9kZSA9IFtTeXN0ZW0uSU8uUGlwZXMuUGlwZVRyYW5zbWlzc2lvbk1vZGVdOjpNZXNzYWdlCgogIHRyeSB7CiAgICAkcGlwZSA9ICRudWxsICAgICAgICMgTmFtZWQgcGlwZSBzdHJlYW0KICAgICRwaXBlID0gTmV3LU9iamVjdCBzeXN0ZW0uSU8uUGlwZXMuTmFtZWRQaXBlU2VydmVyU3RyZWFtKCRQaXBlTmFtZSwgJFBpcGVEaXIsIDEsICRQaXBlTW9kZSwgJFBpcGVPcHQpCiAgICAkc3IgPSAkbnVsbCAgICAgICAgICMgU3RyZWFtIFJlYWRlcgogICAgJHNyID0gbmV3LW9iamVjdCBTeXN0ZW0uSU8uU3RyZWFtUmVhZGVyKCRwaXBlKQogICAgJHBpcGUuV2FpdEZvckNvbm5lY3Rpb24oKQogICAgJE1lc3NhZ2UgPSAkc3IuUmVhZGxpbmUoKQogICAgJE1lc3NhZ2UKICB9IGNhdGNoIHsKICAgIExvZyAiRXJyb3IgcmVjZWl2aW5nIHBpcGUgbWVzc2FnZTogJF8iCiAgfSBmaW5hbGx5IHsKICAgIGlmICgkc3IpIHsKICAgICAgJHNyLkRpc3Bvc2UoKSAjIFJlbGVhc2UgcmVzb3VyY2VzCiAgICAgICRzciA9ICRudWxsICAgIyBGb3JjZSB0aGUgUG93ZXJTaGVsbCBnYXJiYWdlIGNvbGxlY3RvciB0byBkZWxldGUgdGhlIC5uZXQgb2JqZWN0CiAgICB9CiAgICBpZiAoJHBpcGUpIHsKICAgICAgJHBpcGUuRGlzcG9zZSgpICMgUmVsZWFzZSByZXNvdXJjZXMKICAgICAgJHBpcGUgPSAkbnVsbCAgICMgRm9yY2UgdGhlIFBvd2VyU2hlbGwgZ2FyYmFnZSBjb2xsZWN0b3IgdG8gZGVsZXRlIHRoZSAubmV0IG9iamVjdAogICAgfQogIH0KfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGdW5jdGlvbiAgICAgICAgU3RhcnQtUGlwZUhhbmRsZXJUaHJlYWQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIFN0YXJ0IGEgbmV3IHRocmVhZCB3YWl0aW5nIGZvciBjb250cm9sIG1lc3NhZ2VzIG9uIGEgcGlwZSAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEFyZ3VtZW50cyAgICAgICBTZWUgdGhlIFBhcmFtKCkgYmxvY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBOb3RlcyAgICAgICAgICAgVGhlIHBpcGUgaGFuZGxlciBzY3JpcHQgdXNlcyBmdW5jdGlvbiBSZWNlaXZlLVBpcGVNZXNzYWdlLiMKIyAgICAgICAgICAgICAgICAgICBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgY29waWVkIGludG8gdGhlIHRocmVhZCBjb250ZXh0LiAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgVGhlIG90aGVyIGZ1bmN0aW9ucyBhbmQgdmFyaWFibGVzIGNvcGllZCBpbnRvIHRoYXQgdGhyZWFkICMKIyAgICAgICAgICAgICAgICAgICBjb250ZXh0IGFyZSBub3Qgc3RyaWN0bHkgbmVjZXNzYXJ5LCBidXQgYXJlIHVzZWZ1bCBmb3IgICAgIwojICAgICAgICAgICAgICAgICAgIGRlYnVnZ2luZyBwb3NzaWJsZSBpc3N1ZXMuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEhpc3RvcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgIDIwMTYtMDYtMDcgSkZMIENyZWF0ZWQgdGhpcyBmdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwoKJHBpcGVUaHJlYWROYW1lID0gIkNvbnRyb2wgUGlwZSBIYW5kbGVyIgoKRnVuY3Rpb24gU3RhcnQtUGlwZUhhbmRsZXJUaHJlYWQgKCkgewogIFBhcmFtKAogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgW1N0cmluZ10kcGlwZU5hbWUsICAgICAgICAgICAgICAgICAgIyBOYW1lZCBwaXBlIG5hbWUKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldCiAgICBbU3RyaW5nXSRFdmVudCA9ICJDb250cm9sTWVzc2FnZSIgICAjIEV2ZW50IG1lc3NhZ2UKICApCiAgU3RhcnQtUFNUaHJlYWQgLVZhcmlhYmxlcyBAeyAgIyBDb3B5IHZhcmlhYmxlcyByZXF1aXJlZCBieSBmdW5jdGlvbiBMb2coKSBpbnRvIHRoZSB0aHJlYWQgY29udGV4dAogICAgbG9nRGlyID0gJGxvZ0RpcgogICAgbG9nRmlsZSA9ICRsb2dGaWxlCiAgICB1c2VyTmFtZSA9ICR1c2VyTmFtZQogIH0gLUZ1bmN0aW9ucyBOb3csIExvZywgUmVjZWl2ZS1QaXBlTWVzc2FnZSAtU2NyaXB0QmxvY2sgewogICAgUGFyYW0oJHBpcGVOYW1lLCAkcGlwZVRocmVhZE5hbWUpCiAgICB0cnkgewogICAgICBSZWNlaXZlLVBpcGVNZXNzYWdlICIkcGlwZU5hbWUiICMgQmxvY2tzIHRoZSB0aHJlYWQgdW50aWwgdGhlIG5leHQgbWVzc2FnZSBpcyByZWNlaXZlZCBmcm9tIHRoZSBwaXBlCiAgICB9IGNhdGNoIHsKICAgICAgTG9nICIkcGlwZVRocmVhZE5hbWUgIyBFcnJvcjogJF8iCiAgICAgIHRocm93ICRfICMgUHVzaCB0aGUgZXJyb3IgYmFjayB0byB0aGUgbWFpbiB0aHJlYWQKICAgIH0KICB9IC1OYW1lICRwaXBlVGhyZWFkTmFtZSAtRXZlbnQgJEV2ZW50IC1Bcmd1bWVudHMgJHBpcGVOYW1lLCAkcGlwZVRocmVhZE5hbWUKfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGdW5jdGlvbiAgICAgICAgUmVjZWl2ZS1QaXBlSGFuZGxlclRocmVhZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIEdldCB3aGF0IHRoZSBwaXBlIGhhbmRsZXIgdGhyZWFkIHJlY2VpdmVkICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEFyZ3VtZW50cyAgICAgICBTZWUgdGhlIFBhcmFtKCkgYmxvY2sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBOb3RlcyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgSGlzdG9yeSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgMjAxNi0wNi0wNyBKRkwgQ3JlYXRlZCB0aGlzIGZ1bmN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0jCgpGdW5jdGlvbiBSZWNlaXZlLVBpcGVIYW5kbGVyVGhyZWFkICgpIHsKICBQYXJhbSgKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgIFtQU09iamVjdF0kcGlwZVRocmVhZCAgICAgICAgICAgICAgICMgVGhyZWFkIGRlc2NyaXB0b3IKICApCiAgUmVjZWl2ZS1QU1RocmVhZCAtUFNUaHJlYWQgJHBpcGVUaHJlYWQgLUF1dG9SZW1vdmUKfQoKIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBGdW5jdGlvbiAgICAgICAgJHNvdXJjZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRGVzY3JpcHRpb24gICAgIEMjIHNvdXJjZSBvZiB0aGUgUFNTZXJ2aWNlLmV4ZSBzdHViICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEFyZ3VtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBOb3RlcyAgICAgICAgICAgVGhlIGxpbmVzIGNvbW1lbnRlZCB3aXRoICJTRVQgU1RBVFVTIiBhbmQgIkVWRU5UIExPRyIgYXJlICMKIyAgICAgICAgICAgICAgICAgICBvcHRpb25hbC4gKE9yIGJsb2NrcyBiZXR3ZWVuICIvLyBTRVQgU1RBVFVTIFsiIGFuZCAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICIvLyBTRVQgU1RBVFVTIF0iIGNvbW1lbnRzLikgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgU0VUIFNUQVRVUyBsaW5lcyBhcmUgdXNlZnVsIG9ubHkgZm9yIHNlcnZpY2VzIHdpdGggYSBsb25nICMKIyAgICAgICAgICAgICAgICAgICBzdGFydHVwIHRpbWUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgIEVWRU5UIExPRyBsaW5lcyBhcmUgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgdGhlIHNlcnZpY2UuICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEhpc3RvcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKCiRzY3JpcHRDb3B5Q25hbWUgPSAkc2NyaXB0Q29weSAtcmVwbGFjZSAiXFwiLCAiXFwiICMgRG91YmxlIGJhY2tzbGFzaGVzLiAoVGhlIGZpcnN0IFxcIGlzIGEgcmVnZXhwIHdpdGggXCBlc2NhcGVkOyBUaGUgc2Vjb25kIGlzIGEgcGxhaW4gc3RyaW5nLikKJHNvdXJjZSA9IEAiCiAgdXNpbmcgU3lzdGVtOwogIHVzaW5nIFN5c3RlbS5TZXJ2aWNlUHJvY2VzczsKICB1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7CiAgdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNFVCBTVEFUVVMKICB1c2luZyBTeXN0ZW0uQ29tcG9uZW50TW9kZWw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUwoKICBwdWJsaWMgZW51bSBTZXJ2aWNlVHlwZSA6IGludCB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBbCiAgICBTRVJWSUNFX1dJTjMyX09XTl9QUk9DRVNTID0gMHgwMDAwMDAxMCwKICAgIFNFUlZJQ0VfV0lOMzJfU0hBUkVfUFJPQ0VTUyA9IDB4MDAwMDAwMjAsCiAgfTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNFVCBTVEFUVVMgXQoKICBwdWJsaWMgZW51bSBTZXJ2aWNlU3RhdGUgOiBpbnQgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBbCiAgICBTRVJWSUNFX1NUT1BQRUQgPSAweDAwMDAwMDAxLAogICAgU0VSVklDRV9TVEFSVF9QRU5ESU5HID0gMHgwMDAwMDAwMiwKICAgIFNFUlZJQ0VfU1RPUF9QRU5ESU5HID0gMHgwMDAwMDAwMywKICAgIFNFUlZJQ0VfUlVOTklORyA9IDB4MDAwMDAwMDQsCiAgICBTRVJWSUNFX0NPTlRJTlVFX1BFTkRJTkcgPSAweDAwMDAwMDA1LAogICAgU0VSVklDRV9QQVVTRV9QRU5ESU5HID0gMHgwMDAwMDAwNiwKICAgIFNFUlZJQ0VfUEFVU0VEID0gMHgwMDAwMDAwNywKICB9OyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBdCgogIFtTdHJ1Y3RMYXlvdXQoTGF5b3V0S2luZC5TZXF1ZW50aWFsKV0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTRVQgU1RBVFVTIFsKICBwdWJsaWMgc3RydWN0IFNlcnZpY2VTdGF0dXMgewogICAgcHVibGljIFNlcnZpY2VUeXBlIGR3U2VydmljZVR5cGU7CiAgICBwdWJsaWMgU2VydmljZVN0YXRlIGR3Q3VycmVudFN0YXRlOwogICAgcHVibGljIGludCBkd0NvbnRyb2xzQWNjZXB0ZWQ7CiAgICBwdWJsaWMgaW50IGR3V2luMzJFeGl0Q29kZTsKICAgIHB1YmxpYyBpbnQgZHdTZXJ2aWNlU3BlY2lmaWNFeGl0Q29kZTsKICAgIHB1YmxpYyBpbnQgZHdDaGVja1BvaW50OwogICAgcHVibGljIGludCBkd1dhaXRIaW50OwogIH07ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTRVQgU1RBVFVTIF0KCiAgcHVibGljIGVudW0gV2luMzJFcnJvciA6IGludCB7IC8vIFdJTjMyIGVycm9ycyB0aGF0IHdlIG1heSBuZWVkIHRvIHVzZQogICAgTk9fRVJST1IgPSAwLAogICAgRVJST1JfQVBQX0lOSVRfRkFJTFVSRSA9IDU3NSwKICAgIEVSUk9SX0ZBVEFMX0FQUF9FWElUID0gNzEzLAogICAgRVJST1JfU0VSVklDRV9OT1RfQUNUSVZFID0gMTA2MiwKICAgIEVSUk9SX0VYQ0VQVElPTl9JTl9TRVJWSUNFID0gMTA2NCwKICAgIEVSUk9SX1NFUlZJQ0VfU1BFQ0lGSUNfRVJST1IgPSAxMDY2LAogICAgRVJST1JfUFJPQ0VTU19BQk9SVEVEID0gMTA2NywKICB9OwoKICBwdWJsaWMgY2xhc3MgU2VydmljZV8kc2VydmljZU5hbWUgOiBTZXJ2aWNlQmFzZSB7IC8vICRzZXJ2aWNlTmFtZSBtYXkgYmVnaW4gd2l0aCBhIGRpZ2l0OyBUaGUgY2xhc3MgbmFtZSBtdXN0IGJlZ2luIHdpdGggYSBsZXR0ZXIKICAgIHByaXZhdGUgU3lzdGVtLkRpYWdub3N0aWNzLkV2ZW50TG9nIGV2ZW50TG9nOyAgICAgICAgICAgICAgICAgICAgICAgLy8gRVZFTlQgTE9HCiAgICBwcml2YXRlIFNlcnZpY2VTdGF0dXMgc2VydmljZVN0YXR1czsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNFVCBTVEFUVVMKCiAgICBwdWJsaWMgU2VydmljZV8kc2VydmljZU5hbWUoKSB7CiAgICAgIFNlcnZpY2VOYW1lID0gIiRzZXJ2aWNlTmFtZSI7CiAgICAgIENhblN0b3AgPSB0cnVlOwogICAgICBDYW5QYXVzZUFuZENvbnRpbnVlID0gZmFsc2U7CiAgICAgIEF1dG9Mb2cgPSB0cnVlOwoKICAgICAgZXZlbnRMb2cgPSBuZXcgU3lzdGVtLkRpYWdub3N0aWNzLkV2ZW50TG9nKCk7ICAgICAgICAgICAgICAgICAgICAgLy8gRVZFTlQgTE9HIFsKICAgICAgaWYgKCFTeXN0ZW0uRGlhZ25vc3RpY3MuRXZlbnRMb2cuU291cmNlRXhpc3RzKFNlcnZpY2VOYW1lKSkgeyAgICAgICAgIAogICAgICAgIFN5c3RlbS5EaWFnbm9zdGljcy5FdmVudExvZy5DcmVhdGVFdmVudFNvdXJjZShTZXJ2aWNlTmFtZSwgIiRsb2dOYW1lIik7CiAgICAgIH0KICAgICAgZXZlbnRMb2cuU291cmNlID0gU2VydmljZU5hbWU7CiAgICAgIGV2ZW50TG9nLkxvZyA9ICIkbG9nTmFtZSI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVWRU5UIExPRyBdCiAgICAgIEV2ZW50TG9nLldyaXRlRW50cnkoU2VydmljZU5hbWUsICIkZXhlTmFtZSAkc2VydmljZU5hbWUoKSIpOyAgICAgIC8vIEVWRU5UIExPRwogICAgfQoKICAgIFtEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvcj10cnVlKV0gICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUwogICAgcHJpdmF0ZSBzdGF0aWMgZXh0ZXJuIGJvb2wgU2V0U2VydmljZVN0YXR1cyhJbnRQdHIgaGFuZGxlLCByZWYgU2VydmljZVN0YXR1cyBzZXJ2aWNlU3RhdHVzKTsKCiAgICBwcm90ZWN0ZWQgb3ZlcnJpZGUgdm9pZCBPblN0YXJ0KHN0cmluZyBbXSBhcmdzKSB7CiAgICAgIEV2ZW50TG9nLldyaXRlRW50cnkoU2VydmljZU5hbWUsICIkZXhlTmFtZSBPblN0YXJ0KCkgLy8gRW50cnkuIFN0YXJ0aW5nIHNjcmlwdCAnJHNjcmlwdENvcHlDbmFtZScgLVN0YXJ0Iik7IC8vIEVWRU5UIExPRwogICAgICAvLyBTZXQgdGhlIHNlcnZpY2Ugc3RhdGUgdG8gU3RhcnQgUGVuZGluZy4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTRVQgU1RBVFVTIFsKICAgICAgLy8gT25seSB1c2VmdWwgaWYgdGhlIHN0YXJ0dXAgdGltZSBpcyBsb25nLiBOb3QgcmVhbGx5IG5lY2Vzc2FyeSBoZXJlIGZvciBhIDJzIHN0YXJ0dXAgdGltZS4KICAgICAgc2VydmljZVN0YXR1cy5kd1NlcnZpY2VUeXBlID0gU2VydmljZVR5cGUuU0VSVklDRV9XSU4zMl9PV05fUFJPQ0VTUzsKICAgICAgc2VydmljZVN0YXR1cy5kd0N1cnJlbnRTdGF0ZSA9IFNlcnZpY2VTdGF0ZS5TRVJWSUNFX1NUQVJUX1BFTkRJTkc7CiAgICAgIHNlcnZpY2VTdGF0dXMuZHdXaW4zMkV4aXRDb2RlID0gMDsKICAgICAgc2VydmljZVN0YXR1cy5kd1dhaXRIaW50ID0gMjAwMDsgLy8gSXQgdGFrZXMgYWJvdXQgMiBzZWNvbmRzIHRvIHN0YXJ0IFBvd2VyU2hlbGwKICAgICAgU2V0U2VydmljZVN0YXR1cyhTZXJ2aWNlSGFuZGxlLCByZWYgc2VydmljZVN0YXR1cyk7ICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBdCiAgICAgIC8vIFN0YXJ0IGEgY2hpbGQgcHJvY2VzcyB3aXRoIGFub3RoZXIgY29weSBvZiB0aGlzIHNjcmlwdAogICAgICB0cnkgewogICAgICAgIFByb2Nlc3MgcCA9IG5ldyBQcm9jZXNzKCk7CiAgICAgICAgLy8gUmVkaXJlY3QgdGhlIG91dHB1dCBzdHJlYW0gb2YgdGhlIGNoaWxkIHByb2Nlc3MuCiAgICAgICAgcC5TdGFydEluZm8uVXNlU2hlbGxFeGVjdXRlID0gZmFsc2U7CiAgICAgICAgcC5TdGFydEluZm8uUmVkaXJlY3RTdGFuZGFyZE91dHB1dCA9IHRydWU7CiAgICAgICAgcC5TdGFydEluZm8uRmlsZU5hbWUgPSAiUG93ZXJTaGVsbC5leGUiOwogICAgICAgIHAuU3RhcnRJbmZvLkFyZ3VtZW50cyA9ICItYyAmICckc2NyaXB0Q29weUNuYW1lJyAtU3RhcnQiOyAvLyBXb3JrcyBpZiBwYXRoIGhhcyBzcGFjZXMsIGJ1dCBub3QgaWYgaXQgY29udGFpbnMgJyBxdW90ZXMuCiAgICAgICAgcC5TdGFydCgpOwogICAgICAgIC8vIFJlYWQgdGhlIG91dHB1dCBzdHJlYW0gZmlyc3QgYW5kIHRoZW4gd2FpdC4gKFRvIGF2b2lkIGRlYWRsb2NrcyBzYXlzIE1pY3Jvc29mdCEpCiAgICAgICAgc3RyaW5nIG91dHB1dCA9IHAuU3RhbmRhcmRPdXRwdXQuUmVhZFRvRW5kKCk7CiAgICAgICAgLy8gV2FpdCBmb3IgdGhlIGNvbXBsZXRpb24gb2YgdGhlIHNjcmlwdCBzdGFydHVwIGNvZGUsIHRoYXQgbGF1bmNoZXMgdGhlIC1TZXJ2aWNlIGluc3RhbmNlCiAgICAgICAgcC5XYWl0Rm9yRXhpdCgpOwogICAgICAgIGlmIChwLkV4aXRDb2RlICE9IDApIHRocm93IG5ldyBXaW4zMkV4Y2VwdGlvbigoaW50KShXaW4zMkVycm9yLkVSUk9SX0FQUF9JTklUX0ZBSUxVUkUpKTsKICAgICAgICAvLyBTdWNjZXNzLiBTZXQgdGhlIHNlcnZpY2Ugc3RhdGUgdG8gUnVubmluZy4gICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUwogICAgICAgIHNlcnZpY2VTdGF0dXMuZHdDdXJyZW50U3RhdGUgPSBTZXJ2aWNlU3RhdGUuU0VSVklDRV9SVU5OSU5HOyAgICAvLyBTRVQgU1RBVFVTCiAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgRXZlbnRMb2cuV3JpdGVFbnRyeShTZXJ2aWNlTmFtZSwgIiRleGVOYW1lIE9uU3RhcnQoKSAvLyBGYWlsZWQgdG8gc3RhcnQgJHNjcmlwdENvcHlDbmFtZS4gIiArIGUuTWVzc2FnZSwgRXZlbnRMb2dFbnRyeVR5cGUuRXJyb3IpOyAvLyBFVkVOVCBMT0cKICAgICAgICAvLyBDaGFuZ2UgdGhlIHNlcnZpY2Ugc3RhdGUgYmFjayB0byBTdG9wcGVkLiAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBbCiAgICAgICAgc2VydmljZVN0YXR1cy5kd0N1cnJlbnRTdGF0ZSA9IFNlcnZpY2VTdGF0ZS5TRVJWSUNFX1NUT1BQRUQ7CiAgICAgICAgV2luMzJFeGNlcHRpb24gdzMyZXggPSBlIGFzIFdpbjMyRXhjZXB0aW9uOyAvLyBUcnkgZ2V0dGluZyB0aGUgV0lOMzIgZXJyb3IgY29kZQogICAgICAgIGlmICh3MzJleCA9PSBudWxsKSB7IC8vIE5vdCBhIFdpbjMyIGV4Y2VwdGlvbiwgYnV0IG1heWJlIHRoZSBpbm5lciBvbmUgaXMuLi4KICAgICAgICAgIHczMmV4ID0gZS5Jbm5lckV4Y2VwdGlvbiBhcyBXaW4zMkV4Y2VwdGlvbjsKICAgICAgICB9ICAgIAogICAgICAgIGlmICh3MzJleCAhPSBudWxsKSB7ICAgIC8vIFJlcG9ydCB0aGUgYWN0dWFsIFdJTjMyIGVycm9yCiAgICAgICAgICBzZXJ2aWNlU3RhdHVzLmR3V2luMzJFeGl0Q29kZSA9IHczMmV4Lk5hdGl2ZUVycm9yQ29kZTsKICAgICAgICB9IGVsc2UgeyAgICAgICAgICAgICAgICAvLyBNYWtlIHVwIGEgcmVhc29uYWJsZSByZWFzb24KICAgICAgICAgIHNlcnZpY2VTdGF0dXMuZHdXaW4zMkV4aXRDb2RlID0gKGludCkoV2luMzJFcnJvci5FUlJPUl9BUFBfSU5JVF9GQUlMVVJFKTsKICAgICAgICB9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUyBdCiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgc2VydmljZVN0YXR1cy5kd1dhaXRIaW50ID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNFVCBTVEFUVVMKICAgICAgICBTZXRTZXJ2aWNlU3RhdHVzKFNlcnZpY2VIYW5kbGUsIHJlZiBzZXJ2aWNlU3RhdHVzKTsgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUwogICAgICAgIEV2ZW50TG9nLldyaXRlRW50cnkoU2VydmljZU5hbWUsICIkZXhlTmFtZSBPblN0YXJ0KCkgLy8gRXhpdCIpOyAvLyBFVkVOVCBMT0cKICAgICAgfQogICAgfQoKICAgIHByb3RlY3RlZCBvdmVycmlkZSB2b2lkIE9uU3RvcCgpIHsKICAgICAgRXZlbnRMb2cuV3JpdGVFbnRyeShTZXJ2aWNlTmFtZSwgIiRleGVOYW1lIE9uU3RvcCgpIC8vIEVudHJ5Iik7ICAgLy8gRVZFTlQgTE9HCiAgICAgIC8vIFN0YXJ0IGEgY2hpbGQgcHJvY2VzcyB3aXRoIGFub3RoZXIgY29weSBvZiBvdXJzZWx2ZXMKICAgICAgUHJvY2VzcyBwID0gbmV3IFByb2Nlc3MoKTsKICAgICAgLy8gUmVkaXJlY3QgdGhlIG91dHB1dCBzdHJlYW0gb2YgdGhlIGNoaWxkIHByb2Nlc3MuCiAgICAgIHAuU3RhcnRJbmZvLlVzZVNoZWxsRXhlY3V0ZSA9IGZhbHNlOwogICAgICBwLlN0YXJ0SW5mby5SZWRpcmVjdFN0YW5kYXJkT3V0cHV0ID0gdHJ1ZTsKICAgICAgcC5TdGFydEluZm8uRmlsZU5hbWUgPSAiUG93ZXJTaGVsbC5leGUiOwogICAgICBwLlN0YXJ0SW5mby5Bcmd1bWVudHMgPSAiLWMgJiAnJHNjcmlwdENvcHlDbmFtZScgLVN0b3AiOyAvLyBXb3JrcyBpZiBwYXRoIGhhcyBzcGFjZXMsIGJ1dCBub3QgaWYgaXQgY29udGFpbnMgJyBxdW90ZXMuCiAgICAgIHAuU3RhcnQoKTsKICAgICAgLy8gUmVhZCB0aGUgb3V0cHV0IHN0cmVhbSBmaXJzdCBhbmQgdGhlbiB3YWl0LgogICAgICBzdHJpbmcgb3V0cHV0ID0gcC5TdGFuZGFyZE91dHB1dC5SZWFkVG9FbmQoKTsKICAgICAgLy8gV2FpdCBmb3IgdGhlIFBvd2VyU2hlbGwgc2NyaXB0IHRvIGJlIGZ1bGx5IHN0b3BwZWQuCiAgICAgIHAuV2FpdEZvckV4aXQoKTsKICAgICAgLy8gQ2hhbmdlIHRoZSBzZXJ2aWNlIHN0YXRlIGJhY2sgdG8gU3RvcHBlZC4gICAgICAgICAgICAgICAgICAgICAgLy8gU0VUIFNUQVRVUwogICAgICBzZXJ2aWNlU3RhdHVzLmR3Q3VycmVudFN0YXRlID0gU2VydmljZVN0YXRlLlNFUlZJQ0VfU1RPUFBFRDsgICAgICAvLyBTRVQgU1RBVFVTCiAgICAgIFNldFNlcnZpY2VTdGF0dXMoU2VydmljZUhhbmRsZSwgcmVmIHNlcnZpY2VTdGF0dXMpOyAgICAgICAgICAgICAgIC8vIFNFVCBTVEFUVVMKICAgICAgRXZlbnRMb2cuV3JpdGVFbnRyeShTZXJ2aWNlTmFtZSwgIiRleGVOYW1lIE9uU3RvcCgpIC8vIEV4aXQiKTsgICAgLy8gRVZFTlQgTE9HCiAgICB9CgogICAgcHVibGljIHN0YXRpYyB2b2lkIE1haW4oKSB7CiAgICAgIFN5c3RlbS5TZXJ2aWNlUHJvY2Vzcy5TZXJ2aWNlQmFzZS5SdW4obmV3IFNlcnZpY2VfJHNlcnZpY2VOYW1lKCkpOwogICAgfQogIH0KIkAKCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgRnVuY3Rpb24gICAgICAgIE1haW4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIERlc2NyaXB0aW9uICAgICBFeGVjdXRlIHRoZSBzcGVjaWZpZWQgYWN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICBBcmd1bWVudHMgICAgICAgU2VlIHRoZSBQYXJhbSgpIGJsb2NrIGF0IHRoZSB0b3Agb2YgdGhpcyBzY3JpcHQgICAgICAgICAgICMKIyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgTm90ZXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMKIyAgIEhpc3RvcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIwojICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjCiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSMKCiMgQ2hlY2sgaWYgd2UncmUgcnVubmluZyBhcyBhIHJlYWwgdXNlciwgb3IgYXMgdGhlIFNZU1RFTSA9IEFzIGEgc2VydmljZQokaWRlbnRpdHkgPSBbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKQokdXNlck5hbWUgPSAkaWRlbnRpdHkuTmFtZSAgICAgICMgRXg6ICJOVCBBVVRIT1JJVFlcU1lTVEVNIiBvciAiRG9tYWluXEFkbWluaXN0cmF0b3IiCiRhdXRob3JpdHksJG5hbWUgPSAkdXNlcm5hbWUgLXNwbGl0ICJcXCIKJGlzU3lzdGVtID0gJGlkZW50aXR5LklzU3lzdGVtCSMgRG8gbm90IHRlc3QgKCR1c2VyTmFtZSAtZXEgIk5UIEFVVEhPUklUWVxTWVNURU0iKSwgYXMgdGhpcyBmYWlscyBpbiBub24tRW5nbGlzaCBzeXN0ZW1zLgojIExvZyAiIyBgJHVzZXJOYW1lID0gYCIkdXNlck5hbWVgIiA7IGAkaXNTeXN0ZW0gPSAkaXNTeXN0ZW0iCgppZiAoJFNldHVwKSB7TG9nICIifSAgICAjIEluc2VydCBvbmUgYmxhbmsgbGluZSB0byBzZXBhcmF0ZSB0ZXN0IHNlc3Npb25zIGxvZ3MKTG9nICRNeUludm9jYXRpb24uTGluZSAjIFRoZSBleGFjdCBjb21tYW5kIGxpbmUgdGhhdCB3YXMgdXNlZCB0byBzdGFydCB1cwoKIyBUaGUgZm9sbG93aW5nIGNvbW1hbmRzIHdyaXRlIHRvIHRoZSBldmVudCBsb2csIGJ1dCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgUFNTZXJ2aWNlIHNvdXJjZSBpcyBkZWZpbmVkLgpOZXctRXZlbnRMb2cgLUxvZ05hbWUgJGxvZ05hbWUgLVNvdXJjZSAkc2VydmljZU5hbWUgLWVhIFNpbGVudGx5Q29udGludWUKCiMgV29ya2Fyb3VuZCBmb3IgUG93ZXJTaGVsbCB2MiBidWc6ICRQU0NtZGxldCBOb3QgeWV0IGRlZmluZWQgaW4gUGFyYW0oKSBibG9jawokU3RhdHVzID0gKCRQU0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1lcSAnU3RhdHVzJykKCmlmICgkU3RhcnQpIHsgICAgICAgICAgICAgICAgICAgIyBTdGFydCB0aGUgc2VydmljZQogIGlmICgkaXNTeXN0ZW0pIHsgIyBJZiBydW5uaW5nIGFzIFNZU1RFTSwgaWUuIGludm9rZWQgYXMgYSBzZXJ2aWNlCiAgICAjIERvIHdoYXRldmVyIGlzIG5lY2Vzc2FyeSB0byBzdGFydCB0aGUgc2VydmljZSBzY3JpcHQgaW5zdGFuY2UKICAgIExvZyAiJHNjcmlwdE5hbWUgLVN0YXJ0OiBTdGFydGluZyBzY3JpcHQgJyRzY3JpcHRGdWxsTmFtZScgLVNlcnZpY2UiCiAgICBXcml0ZS1FdmVudExvZyAtTG9nTmFtZSAkbG9nTmFtZSAtU291cmNlICRzZXJ2aWNlTmFtZSAtRXZlbnRJZCAxMDAxIC1FbnRyeVR5cGUgSW5mb3JtYXRpb24gLU1lc3NhZ2UgIiRzY3JpcHROYW1lIC1TdGFydDogU3RhcnRpbmcgc2NyaXB0ICckc2NyaXB0RnVsbE5hbWUnIC1TZXJ2aWNlIgogICAgU3RhcnQtUHJvY2VzcyBQb3dlclNoZWxsLmV4ZSAtQXJndW1lbnRMaXN0ICgiLWMgJiAnJHNjcmlwdEZ1bGxOYW1lJyAtU2VydmljZSIpCiAgfSBlbHNlIHsKICAgICAgTG9nICJHb3QgdG8gaGVyZTIiCiAgICBXcml0ZS1WZXJib3NlICJTdGFydGluZyBzZXJ2aWNlICRzZXJ2aWNlTmFtZSIKICAgIFdyaXRlLUV2ZW50TG9nIC1Mb2dOYW1lICRsb2dOYW1lIC1Tb3VyY2UgJHNlcnZpY2VOYW1lIC1FdmVudElkIDEwMDIgLUVudHJ5VHlwZSBJbmZvcm1hdGlvbiAtTWVzc2FnZSAiJHNjcmlwdE5hbWUgLVN0YXJ0OiBTdGFydGluZyBzZXJ2aWNlICRzZXJ2aWNlTmFtZSIKICAgIFN0YXJ0LVNlcnZpY2UgJHNlcnZpY2VOYW1lICMgQXNrIFNlcnZpY2UgQ29udHJvbCBNYW5hZ2VyIHRvIHN0YXJ0IGl0CiAgfQogIHJldHVybgp9CgppZiAoJFN0b3ApIHsgICAgICAgICAgICAgICAgICAgICMgU3RvcCB0aGUgc2VydmljZQogIGlmICgkaXNTeXN0ZW0pIHsgIyBJZiBydW5uaW5nIGFzIFNZU1RFTSwgaWUuIGludm9rZWQgYXMgYSBzZXJ2aWNlCiAgICAjIERvIHdoYXRldmVyIGlzIG5lY2Vzc2FyeSB0byBzdG9wIHRoZSBzZXJ2aWNlIHNjcmlwdCBpbnN0YW5jZQogICAgV3JpdGUtRXZlbnRMb2cgLUxvZ05hbWUgJGxvZ05hbWUgLVNvdXJjZSAkc2VydmljZU5hbWUgLUV2ZW50SWQgMTAwMyAtRW50cnlUeXBlIEluZm9ybWF0aW9uIC1NZXNzYWdlICIkc2NyaXB0TmFtZSAtU3RvcDogU3RvcHBpbmcgc2NyaXB0ICRzY3JpcHROYW1lIC1TZXJ2aWNlIgogICAgTG9nICIkc2NyaXB0TmFtZSAtU3RvcDogU3RvcHBpbmcgc2NyaXB0ICRzY3JpcHROYW1lIC1TZXJ2aWNlIgogICAgIyBTZW5kIGFuIGV4aXQgbWVzc2FnZSB0byB0aGUgc2VydmljZSBpbnN0YW5jZQogICAgU2VuZC1QaXBlTWVzc2FnZSAkcGlwZU5hbWUgImV4aXQiIAogIH0gZWxzZSB7CiAgICBXcml0ZS1WZXJib3NlICJTdG9wcGluZyBzZXJ2aWNlICRzZXJ2aWNlTmFtZSIKICAgIFdyaXRlLUV2ZW50TG9nIC1Mb2dOYW1lICRsb2dOYW1lIC1Tb3VyY2UgJHNlcnZpY2VOYW1lIC1FdmVudElkIDEwMDQgLUVudHJ5VHlwZSBJbmZvcm1hdGlvbiAtTWVzc2FnZSAiJHNjcmlwdE5hbWUgLVN0b3A6IFN0b3BwaW5nIHNlcnZpY2UgJHNlcnZpY2VOYW1lIgogICAgU3RvcC1TZXJ2aWNlICRzZXJ2aWNlTmFtZSAjIEFzayBTZXJ2aWNlIENvbnRyb2wgTWFuYWdlciB0byBzdG9wIGl0CiAgfQogIHJldHVybgp9CgppZiAoJFJlc3RhcnQpIHsgICAgICAgICAgICAgICAgICMgUmVzdGFydCB0aGUgc2VydmljZQogICYgJHNjcmlwdEZ1bGxOYW1lIC1TdG9wCiAgJiAkc2NyaXB0RnVsbE5hbWUgLVN0YXJ0CiAgcmV0dXJuCn0KCmlmICgkU3RhdHVzKSB7ICAgICAgICAgICAgICAgICAgIyBHZXQgdGhlIGN1cnJlbnQgc2VydmljZSBzdGF0dXMKICAkc3BpZCA9ICRudWxsCiAgICAgICRwcm9jZXNzZXMgPSBAKEdldC1XbWlPYmplY3QgV2luMzJfUHJvY2VzcyAtZmlsdGVyICJOYW1lID0gJ3Bvd2Vyc2hlbGwuZXhlJyIgfCBXaGVyZS1PYmplY3QgewogICAgICAgICRfLkNvbW1hbmRMaW5lIC1tYXRjaCAiLiokc2NyaXB0Q29weUNuYW1lLiotU2VydmljZSIKICAgICAgfSkKICAgICAgZm9yZWFjaCAoJHByb2Nlc3MgaW4gJHByb2Nlc3NlcykgeyAjIFRoZXJlIHNob3VsZCBiZSBqdXN0IG9uZSwgYnV0IGJlIHByZXBhcmVkIGZvciBzdXJwcmlzZXMuCiAgICAgICAgJHNwaWQgPSAkcHJvY2Vzcy5Qcm9jZXNzSWQKICAgICAgICBXcml0ZS1WZXJib3NlICIkc2VydmljZU5hbWUgUHJvY2VzcyBJRCA9ICRzcGlkIgogICAgICB9CiAgICAgICMgaWYgKFRlc3QtUGF0aCAiSEtMTTpcU1lTVEVNXEN1cnJlbnRDb250cm9sU2V0XHNlcnZpY2VzXCRzZXJ2aWNlTmFtZSIpIHt9CiAgICAgIHRyeSB7CiAgICAgICAgJHBzcyA9IEdldC1TZXJ2aWNlICRzZXJ2aWNlTmFtZSAtZWEgc3RvcCAjIFdpbGwgZXJyb3Itb3V0IGlmIG5vdCBpbnN0YWxsZWQKICAgICAgfSBjYXRjaCB7CiAgICAgICAgIk5vdCBJbnN0YWxsZWQiCiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgICAgJHBzcy5TdGF0dXMKICAgICAgaWYgKCgkcHNzLlN0YXR1cyAtZXEgIlJ1bm5pbmciKSAtYW5kICghJHNwaWQpKSB7ICMgVGhpcyBoYXBwZW5lZCBkdXJpbmcgdGhlIGRlYnVnZ2luZyBwaGFzZQogICAgICAgIFdyaXRlLUVycm9yICJUaGUgU2VydmljZSBDb250cm9sIE1hbmFnZXIgdGhpbmtzICRzZXJ2aWNlTmFtZSBpcyBzdGFydGVkLCBidXQgJHNlcnZpY2VOYW1lLnBzMSAtU2VydmljZSBpcyBub3QgcnVubmluZy4iCiAgICAgICAgZXhpdCAxCiAgICAgIH0KICAKICByZXR1cm4KfQoKaWYgKCRTZXR1cCkgeyAgICAgICAgICAgICAgICAgICAjIEluc3RhbGwgdGhlIHNlcnZpY2UKICAjIENoZWNrIGlmIGl0J3MgbmVjZXNzYXJ5CiAgdHJ5IHsKICAgICRwc3MgPSBHZXQtU2VydmljZSAkc2VydmljZU5hbWUgLWVhIHN0b3AgIyBXaWxsIGVycm9yLW91dCBpZiBub3QgaW5zdGFsbGVkCiAgICAjIENoZWNrIGlmIHRoaXMgc2NyaXB0IGlzIG5ld2VyIHRoYW4gdGhlIGluc3RhbGxlZCBjb3B5LgogICAgaWYgKChHZXQtSXRlbSAkc2NyaXB0Q29weSAtZWEgU2lsZW50bHlDb250aW51ZSkuTGFzdFdyaXRlVGltZSAtbHQgKEdldC1JdGVtICRzY3JpcHRGdWxsTmFtZSAtZWEgU2lsZW50bHlDb250aW51ZSkuTGFzdFdyaXRlVGltZSkgewogICAgICBXcml0ZS1WZXJib3NlICJTZXJ2aWNlICRzZXJ2aWNlTmFtZSBpcyBhbHJlYWR5IEluc3RhbGxlZCwgYnV0IHJlcXVpcmVzIHVwZ3JhZGUiCiAgICAgICYgJHNjcmlwdEZ1bGxOYW1lIC1SZW1vdmUKICAgICAgdGhyb3cgImNvbnRpbnVlIgogICAgfSBlbHNlIHsKICAgICAgV3JpdGUtVmVyYm9zZSAiU2VydmljZSAkc2VydmljZU5hbWUgaXMgYWxyZWFkeSBJbnN0YWxsZWQsIGFuZCB1cC10by1kYXRlIgogICAgfQogICAgZXhpdCAwCiAgfSBjYXRjaCB7CiAgICAjIFRoaXMgaXMgdGhlIG5vcm1hbCBjYXNlIGhlcmUuIERvIG5vdCB0aHJvdyBvciB3cml0ZSBhbnkgZXJyb3IhCiAgICBXcml0ZS1EZWJ1ZyAiSW5zdGFsbGF0aW9uIGlzIG5lY2Vzc2FyeSIgIyBBbHNvIGF2b2lkcyBhIFNjcmlwdEFuYWx5emVyIHdhcm5pbmcKICAgICMgQW5kIGNvbnRpbnVlIHdpdGggdGhlIGluc3RhbGxhdGlvbi4KICB9CiAgaWYgKCEoVGVzdC1QYXRoICRpbnN0YWxsRGlyKSkgewogICAgTmV3LUl0ZW0gLUl0ZW1UeXBlIGRpcmVjdG9yeSAtUGF0aCAkaW5zdGFsbERpciB8IE91dC1OdWxsCiAgfQogICMgQ29weSB0aGUgc2VydmljZSBzY3JpcHQgaW50byB0aGUgaW5zdGFsbGF0aW9uIGRpcmVjdG9yeQogIGlmICgkU2NyaXB0RnVsbE5hbWUgLW5lICRzY3JpcHRDb3B5KSB7CiAgICBXcml0ZS1WZXJib3NlICJJbnN0YWxsaW5nICRzY3JpcHRDb3B5IgogICAgQ29weS1JdGVtICRTY3JpcHRGdWxsTmFtZSAkc2NyaXB0Q29weSAtRm9yY2UKICAgIFdyaXRlLVZlcmJvc2UgIkluc3RhbGxpbmcgJGNvbmZpZ0NvcHkiCiAgICBDb3B5LUl0ZW0gJGNvbmZpZ0Z1bGxOYW1lICRjb25maWdDb3B5IC1Gb3JjZQogIH0KICAjIEdlbmVyYXRlIHRoZSBzZXJ2aWNlIC5FWEUgZnJvbSB0aGUgQyMgc291cmNlIGVtYmVkZGVkIGluIHRoaXMgc2NyaXB0CiAgdHJ5IHsKICAgIFdyaXRlLVZlcmJvc2UgIkNvbXBpbGluZyAkZXhlRnVsbE5hbWUiCiAgICBBZGQtVHlwZSAtVHlwZURlZmluaXRpb24gJHNvdXJjZSAtTGFuZ3VhZ2UgQ1NoYXJwIC1PdXRwdXRBc3NlbWJseSAkZXhlRnVsbE5hbWUgLU91dHB1dFR5cGUgQ29uc29sZUFwcGxpY2F0aW9uIC1SZWZlcmVuY2VkQXNzZW1ibGllcyAiU3lzdGVtLlNlcnZpY2VQcm9jZXNzIiAtRGVidWc6JGZhbHNlCiAgfSBjYXRjaCB7CiAgICAkbXNnID0gJF8uRXhjZXB0aW9uLk1lc3NhZ2UKICAgIFdyaXRlLWVycm9yICJGYWlsZWQgdG8gY3JlYXRlIHRoZSAkZXhlRnVsbE5hbWUgc2VydmljZSBzdHViLiAkbXNnIgogICAgZXhpdCAxCiAgfQogICMgUmVnaXN0ZXIgdGhlIHNlcnZpY2UKICBXcml0ZS1WZXJib3NlICJSZWdpc3RlcmluZyBzZXJ2aWNlICRzZXJ2aWNlTmFtZSIKICAkcHNzID0gTmV3LVNlcnZpY2UgJHNlcnZpY2VOYW1lICRleGVGdWxsTmFtZSAtRGlzcGxheU5hbWUgJHNlcnZpY2VEaXNwbGF5TmFtZSAtRGVzY3JpcHRpb24gJFNlcnZpY2VEZXNjcmlwdGlvbiAtU3RhcnR1cFR5cGUgQXV0b21hdGljCgogIHJldHVybgp9CgppZiAoJFJlbW92ZSkgeyAgICAgICAgICAgICAgICAgICMgVW5pbnN0YWxsIHRoZSBzZXJ2aWNlCiAgIyBDaGVjayBpZiBpdCdzIG5lY2Vzc2FyeQogIHRyeSB7CiAgICAkcHNzID0gR2V0LVNlcnZpY2UgJHNlcnZpY2VOYW1lIC1lYSBzdG9wICMgV2lsbCBlcnJvci1vdXQgaWYgbm90IGluc3RhbGxlZAogIH0gY2F0Y2ggewogICAgV3JpdGUtVmVyYm9zZSAiQWxyZWFkeSB1bmluc3RhbGxlZCIKICAgIHJldHVybgogIH0KICBTdG9wLVNlcnZpY2UgJHNlcnZpY2VOYW1lICMgTWFrZSBzdXJlIGl0J3Mgc3RvcHBlZAogICMgSW4gdGhlIGFic2VuY2Ugb2YgYSBSZW1vdmUtU2VydmljZSBhcHBsZXQsIHVzZSBzYy5leGUgaW5zdGVhZC4KICBXcml0ZS1WZXJib3NlICJSZW1vdmluZyBzZXJ2aWNlICRzZXJ2aWNlTmFtZSIKICAkbXNnID0gc2MuZXhlIGRlbGV0ZSAkc2VydmljZU5hbWUKICBpZiAoJExhc3RFeGl0Q29kZSkgewogICAgV3JpdGUtRXJyb3IgIkZhaWxlZCB0byByZW1vdmUgdGhlIHNlcnZpY2UgJHtzZXJ2aWNlTmFtZX06ICRtc2ciCiAgICBleGl0IDEKICB9IGVsc2UgewogICAgV3JpdGUtVmVyYm9zZSAkbXNnCiAgfQogICMgUmVtb3ZlIHRoZSBpbnN0YWxsZWQgZmlsZXMKICBpZiAoVGVzdC1QYXRoICRpbnN0YWxsRGlyKSB7CiAgICBmb3JlYWNoICgkZXh0IGluICgiZXhlIiwgInBkYiIsICJwczEiKSkgewogICAgICAkZmlsZSA9ICIkaW5zdGFsbERpclwkc2VydmljZU5hbWUuJGV4dCIKICAgICAgaWYgKFRlc3QtUGF0aCAkZmlsZSkgewogICAgICAgIFdyaXRlLVZlcmJvc2UgIkRlbGV0aW5nIGZpbGUgJGZpbGUiCiAgICAgICAgUmVtb3ZlLUl0ZW0gJGZpbGUKICAgICAgfQogICAgfQogICAgaWYgKCEoQChHZXQtQ2hpbGRJdGVtICRpbnN0YWxsRGlyIC1lYSBTaWxlbnRseUNvbnRpbnVlKSkuQ291bnQpIHsKICAgICAgV3JpdGUtVmVyYm9zZSAiUmVtb3ZpbmcgZGlyZWN0b3J5ICRpbnN0YWxsRGlyIgogICAgICBSZW1vdmUtSXRlbSAkaW5zdGFsbERpcgogICAgfQogIH0KICByZXR1cm4KfQoKaWYgKCRDb250cm9sKSB7ICAgICAgICAgICAgICAgICAjIFNlbmQgYSBjb250cm9sIG1lc3NhZ2UgdG8gdGhlIHNlcnZpY2UKICBTZW5kLVBpcGVNZXNzYWdlICRwaXBlTmFtZSAkY29udHJvbAp9CgppZiAoJFNlcnZpY2UpIHsgICAgICAgICAgICAgICAgICMgUnVuIHRoZSBzZXJ2aWNlCiAgCiAgV3JpdGUtRXZlbnRMb2cgLUxvZ05hbWUgJGxvZ05hbWUgLVNvdXJjZSAkc2VydmljZU5hbWUgLUV2ZW50SWQgMTAwNSAtRW50cnlUeXBlIEluZm9ybWF0aW9uIC1NZXNzYWdlICIkc2NyaXB0TmFtZSAtU2VydmljZSAjIEJlZ2lubmluZyBiYWNrZ3JvdW5kIGpvYiIKICAjIERvIHRoZSBzZXJ2aWNlIGJhY2tncm91bmQgam9iCiAgdHJ5IHsKICAgICMgU3RhcnQgdGhlIGNvbnRyb2wgcGlwZSBoYW5kbGVyIHRocmVhZAogICAgJHBpcGVUaHJlYWQgPSBTdGFydC1QaXBlSGFuZGxlclRocmVhZCAkcGlwZU5hbWUgLUV2ZW50ICJDb250cm9sTWVzc2FnZSIKICAgICMjIyMjIyMjIyBUTyBETzogSW1wbGVtZW50IHlvdXIgb3duIHNlcnZpY2UgY29kZSBoZXJlLiAjIyMjIyMjIyMjCiAgICAjIyMjIyMgRXhhbXBsZSB0aGF0IHdha2VzIHVwIGFuZCBsb2dzIGEgbGluZSBldmVyeSAxMCBzZWM6ICMjIyMjIwogICAgIyBTdGFydCBhIHBlcmlvZGljIHRpbWVyCiAgICAKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjI0N1c3RvbSBTY3JpcHQgSW5pdAogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAjJGFjdHVhbHByb2Nlc3M9c3RhcnQtcHJvY2VzcyBwb3dlcnNoZWxsLmV4ZSAtYXJndW1lbnRsaXN0ICItbm9wcm9maWxlIC1maWxlICQoJGNvbmZpZy5zZXJ2aWNlLnNjcmlwdHBhdGgpIiAtUGFzc1RocnUKICAgICRjb21tYW5kPSRjb25maWcuc2VydmljZS5jb21tYW5kCiAgICAkYWN0dWFscHJvY2Vzcz1zdGFydC1wcm9jZXNzIHBvd2Vyc2hlbGwuZXhlIC1Bcmd1bWVudExpc3QgIi1ub3Byb2ZpbGUgLWV4ZWN1dGlvbnBvbGljeSBieXBhc3MgLWMgJnskY29tbWFuZH0iIC1QYXNzVGhydQogICAgCiAgICAkcHNvID0gbmV3LW9iamVjdCBwc29iamVjdCAtcHJvcGVydHkgQHtpc1N5c3RlbSA9ICRpc1N5c3RlbTsgbG9nbmFtZSA9ICRsb2duYW1lO3NlcnZpY2VuYW1lPSRzZXJ2aWNlbmFtZTtzY3JpcHRuYW1lPSRzY3JpcHRuYW1lO3BpcGVuYW1lPSRwaXBlbmFtZX0KICAgICRqb2IgPSBSZWdpc3Rlci1PYmplY3RFdmVudCAtSW5wdXRPYmplY3QgJGFjdHVhbHByb2Nlc3MgLUV2ZW50TmFtZSBleGl0ZWQgLU1lc3NhZ2VEYXRhICRwc28gLVNvdXJjZUlkZW50aWZpZXIgcG93ZXJzaGVsbCAtQWN0aW9uIHsKICAgICAgICAgICAgIyBEbyB3aGF0ZXZlciBpcyBuZWNlc3NhcnkgdG8gc3RvcCB0aGUgc2VydmljZSBzY3JpcHQgaW5zdGFuY2UKICAgICAgICAgICAgI0xvZyAiJCgkZXZlbnQuTWVzc2FnZURhdGEuc2NyaXB0TmFtZSkgLVN0b3A6IFN0b3BwaW5nIHNjcmlwdCAkKCRldmVudC5NZXNzYWdlRGF0YS5zY3JpcHROYW1lKSAtU2VydmljZSIgICAgICAgCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlN0b3BwaW5nIHNlcnZpY2UgJCgkZXZlbnQuTWVzc2FnZURhdGEuc2VydmljZU5hbWUpIgogICAgICAgICAgICBXcml0ZS1FdmVudExvZyAtTG9nTmFtZSAkZXZlbnQuTWVzc2FnZURhdGEubG9nTmFtZSAtU291cmNlICRldmVudC5NZXNzYWdlRGF0YS5zZXJ2aWNlTmFtZSAtRXZlbnRJZCAxMDA0IC1FbnRyeVR5cGUgSW5mb3JtYXRpb24gLU1lc3NhZ2UgIiQoJGV2ZW50Lk1lc3NhZ2VEYXRhLnNjcmlwdE5hbWUpIC1TdG9wOiBTdG9wcGluZyBzZXJ2aWNlICQoJGV2ZW50Lk1lc3NhZ2VEYXRhLnNlcnZpY2VOYW1lKSIKICAgICAgICAgICAgU3RvcC1TZXJ2aWNlICRldmVudC5tZXNzYWdlZGF0YS5zZXJ2aWNlTmFtZSAjIEFzayBTZXJ2aWNlIENvbnRyb2wgTWFuYWdlciB0byBzdG9wIGl0ICAgICAgICAgIAogICAgfQoKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjI0N1c3RvbSBTY3JpcHQgSW5pdAogICAgIyMgTm93IGVudGVyIHRoZSBtYWluIHNlcnZpY2UgZXZlbnQgbG9vcAogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICBkbyB7ICMgS2VlcCBydW5uaW5nIHVudGlsIHRvbGQgdG8gZXhpdCBieSB0aGUgLVN0b3AgaGFuZGxlcgogICAgICAkZXZlbnQgPSBXYWl0LUV2ZW50ICMgV2FpdCBmb3IgdGhlIG5leHQgaW5jb21pbmcgZXZlbnQKICAgICAgJHNvdXJjZSA9ICRldmVudC5Tb3VyY2VJZGVudGlmaWVyCiAgICAgICRtZXNzYWdlID0gJGV2ZW50Lk1lc3NhZ2VEYXRhCiAgICAgICRldmVudFRpbWUgPSAkZXZlbnQuVGltZUdlbmVyYXRlZC5UaW1lb2ZEYXkKICAgICAgV3JpdGUtRGVidWcgIkV2ZW50IGF0ICRldmVudFRpbWUgZnJvbSAke3NvdXJjZX06ICRtZXNzYWdlIgogICAgICAkZXZlbnQgfCBSZW1vdmUtRXZlbnQgIyBGbHVzaCB0aGUgZXZlbnQgZnJvbSB0aGUgcXVldWUKICAgICAgc3dpdGNoICgkbWVzc2FnZSkgewogICAgICAgICJDb250cm9sTWVzc2FnZSIgCiAgICAgICAgICAgIHsgIyBSZXF1aXJlZC4gTWVzc2FnZSByZWNlaXZlZCBieSB0aGUgY29udHJvbCBwaXBlIHRocmVhZAogICAgICAgICAgICAgICRzdGF0ZSA9ICRldmVudC5Tb3VyY2VFdmVudEFyZ3MuSW52b2NhdGlvblN0YXRlSW5mby5zdGF0ZQogICAgICAgICAgICAgIFdyaXRlLURlYnVnICIkc2NyaXB0IC1TZXJ2aWNlICMgVGhyZWFkICRzb3VyY2Ugc3RhdGUgY2hhbmdlZCB0byAkc3RhdGUiCiAgICAgICAgICAgICAgc3dpdGNoICgkc3RhdGUpIAogICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJDb21wbGV0ZWQiIHsKICAgICAgICAgICAgICAgICAgJG1lc3NhZ2UgPSBSZWNlaXZlLVBpcGVIYW5kbGVyVGhyZWFkICRwaXBlVGhyZWFkCiAgICAgICAgICAgICAgICAgIExvZyAiJHNjcmlwdE5hbWUgLVNlcnZpY2UgIyBSZWNlaXZlZCBjb250cm9sIG1lc3NhZ2U6ICRNZXNzYWdlIgogICAgICAgICAgICAgICAgICBpZiAoJG1lc3NhZ2UgLW5lICJleGl0IikgeyAjIFN0YXJ0IGFub3RoZXIgdGhyZWFkIHdhaXRpbmcgZm9yIGNvbnRyb2wgbWVzc2FnZXMKICAgICAgICAgICAgICAgICAgICAkcGlwZVRocmVhZCA9IFN0YXJ0LVBpcGVIYW5kbGVyVGhyZWFkICRwaXBlTmFtZSAtRXZlbnQgIkNvbnRyb2xNZXNzYWdlIgogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAiRmFpbGVkIiB7CiAgICAgICAgICAgICAgICAgICRlcnJvciA9IFJlY2VpdmUtUGlwZUhhbmRsZXJUaHJlYWQgJHBpcGVUaHJlYWQKICAgICAgICAgICAgICAgICAgTG9nICIkc2NyaXB0TmFtZSAtU2VydmljZSAjICRzb3VyY2UgdGhyZWFkIGZhaWxlZDogJGVycm9yIgogICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAxICMgQXZvaWQgZ2V0dGluZyB0b28gbWFueSBlcnJvcnMKICAgICAgICAgICAgICAgICAgJHBpcGVUaHJlYWQgPSBTdGFydC1QaXBlSGFuZGxlclRocmVhZCAkcGlwZU5hbWUgLUV2ZW50ICJDb250cm9sTWVzc2FnZSIgIyBSZXRyeQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZGVmYXVsdCB7ICMgU2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgIExvZyAiJHNjcmlwdE5hbWUgLVNlcnZpY2UgIyBVbmV4cGVjdGVkIGV2ZW50IGZyb20gJHtzb3VyY2V9OiAkTWVzc2FnZSIKICAgICAgICB9CiAgICAgIH0KICAgIH0gd2hpbGUgKCRtZXNzYWdlIC1uZSAiZXhpdCIpCiAgfSAKICBjYXRjaCAKICB7ICMgQW4gZXhjZXB0aW9uIG9jY3VycmVkIHdoaWxlIHJ1bm5uaW5nIHRoZSBzZXJ2aWNlCiAgICAkbXNnID0gJF8uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICRsaW5lID0gJF8uSW52b2NhdGlvbkluZm8uU2NyaXB0TGluZU51bWJlcgogICAgTG9nICIkc2NyaXB0TmFtZSAtU2VydmljZSAjIEVycm9yIGF0IGxpbmUgJHtsaW5lfTogJG1zZyIKICB9IAogIGZpbmFsbHkgCiAgeyAjIEludm9rZWQgaW4gYWxsIGNhc2VzOiBFeGNlcHRpb24gb3Igbm9ybWFsbHkgYnkgLVN0b3AKICAgICMgQ2xlYW51cCB0aGUgcGVyaW9kaWMgdGltZXIgdXNlZCBpbiB0aGUgYWJvdmUgZXhhbXBsZQogICAgJGFjdHVhbHByb2Nlc3Mua2lsbCgpCgogICAgIyMjIyMjIyMjIyMjIyMjIEVuZCBvZiB0aGUgc2VydmljZSBjb2RlIGV4YW1wbGUuICMjIyMjIyMjIyMjIyMjIyMKICAgICMgVGVybWluYXRlIHRoZSBjb250cm9sIHBpcGUgaGFuZGxlciB0aHJlYWQKICAgIEdldC1QU1RocmVhZCB8IFJlbW92ZS1QU1RocmVhZCAjIFJlbW92ZSBhbGwgcmVtYWluaW5nIHRocmVhZHMKICAgICMgRmx1c2ggYWxsIGxlZnRvdmVyIGV2ZW50cyAoVGhlcmUgbWF5IGJlIHNvbWUgdGhhdCBhcnJpdmVkIGFmdGVyIHdlIGV4aXRlZCB0aGUgd2hpbGUgZXZlbnQgbG9vcCwgYnV0IGJlZm9yZSB3ZSB1bnJlZ2lzdGVyZWQgdGhlIGV2ZW50cykKICAgICRldmVudHMgPSBHZXQtRXZlbnQgfCBSZW1vdmUtRXZlbnQKICAgICMgTG9nIGEgdGVybWluYXRpb24gZXZlbnQsIG5vIG1hdHRlciB3aGF0IHRoZSBjYXVzZSBpcy4KICAgIFdyaXRlLUV2ZW50TG9nIC1Mb2dOYW1lICRsb2dOYW1lIC1Tb3VyY2UgJHNlcnZpY2VOYW1lIC1FdmVudElkIDEwMDYgLUVudHJ5VHlwZSBJbmZvcm1hdGlvbiAtTWVzc2FnZSAiJHNjcmlwdCAtU2VydmljZSAjIEV4aXRpbmciCiAgICBMb2cgIiRzY3JpcHROYW1lIC1TZXJ2aWNlICMgRXhpdGluZyIKICB9CiAgcmV0dXJuCn0K
