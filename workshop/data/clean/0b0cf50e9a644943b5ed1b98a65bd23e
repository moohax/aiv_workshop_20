runbook148.ps1,9d886fba1ceb6629331475b98c917220,Scan result is 1. IsMalware: 0,PCMKLlNZTk9QU0lTIAogICAgUnVuYm9vayBmb3Igc291cmNlIGNvbnRyb2wgZmVhdHVyZS4gU3luY3MgYWxsIHJ1bmJvb2tzIGZyb20gdGhlIGNlcnRhaW4gR2l0SHViIGZvbGRlciB0byBhbiBBenVyZSBBdXRvbWF0aW9uIGFjY291bnQuCi5ERVNDUklQVElPTiAKICAgIFRoaXMgcnVuYm9vayB0YWtlcyBjb25uZWN0aW9uIGRhdGEgYW5kIE9BdXRoIHRva2VuIGZyb20gdmFyaWFibGVzIGluIHRoZSB1c2VyJ3MgYWNjb3VudCAoYnV0IHRoZXkgYXJlIGNyZWF0ZWQgYnkgQXV0b21hdGlvbiksIGdldHMgdGhlIEdpdGh1YiBtZXRhZGF0YSAKICAgIHdpdGggR2l0aHViIEFQSSBhbmQgR2l0aHViIFRyZWUgQVBJLCBzdG9yZXMgbmFtZSBhbmQgZGVmaW5pdGlvbiBvZiBldmVyeSBmaWxlIHRoYXQgbWF0Y2hlcyBydW5ib29rIGV4dGVuc2lvbiB0byB0aGUgaGFzaHRhYmxlIChieSBkZWZhdWx0IG5vdCBpbmNsdWRpbmcgc3ViZm9sZGVycykKICAgIGFuZCB0aGVuIHNhdmVzIHRoZSBydW5ib29rIHRvIHRoZSBBdXRvbWF0aW9uIGFjY291bnQgdXNpbmcgU2V0LUF1dG9tYXRpb25SdW5ib29rIGFjdGl2aXR5LiBJZiBzb21lIHJlcXVlc3Qgd2hpbGUgZ2V0dGluZyB0aGUgbWV0YWRhdGEgZmFpbHMsIHJ1bmJvb2sgc2xlZXBzCiAgICAkRGVsYXlJblNlY29uZHMgc2Vjb25kcyBhbmQgdHJ5IHRvIGRvIGFsbCByZXF1ZXN0cyBhZ2Fpbi4KLlBBUkFNRVRFUiBSZXRyaWVzCiAgICBPcHRpb25hbC4gTnVtYmVyIG9mIHJldHJpZXMgb2YgcmVxdWVzdHMgdG8gdGhlIEdpdGh1YiB0byBmZXRjaCBtZXRhZGF0YS4KLlBBUkFNRVRFUiBEZWxheUluU2Vjb25kcwogICAgT3B0aW9uYWwuIERlbGF5IGJldHdlZW4gcmV0cmllcyBvZiByZXF1ZXN0cyB0byB0aGUgR2l0aHViIHRvIGZldGNoIG1ldGFkYXRhIGluIHNlY29uZHMuCi5QQVJBTUVURVIgU3luY1N1YmZvbGRlcnMKICAgIE9wdGlvbmFsLiBCb29sZWFuIHZhbHVlIHRoYXQgc3luYyBhbHNvIHN1YmZvbGRlcnMKLkVYQU1QTEUgCiAgICBTeW5jLU1pY3Jvc29mdEF6dXJlQXV0b21hdGlvbkFjY291bnRGcm9tR2l0aHViVjEgCi5FWEFNUExFMiAKICAgIFN5bmMtTWljcm9zb2Z0QXp1cmVBdXRvbWF0aW9uQWNjb3VudEZyb21HaXRodWJWMSAtU3luY1N1YmZvbGRlcnMKLkVYQU1QTEUzIAogICAgU3luYy1NaWNyb3NvZnRBenVyZUF1dG9tYXRpb25BY2NvdW50RnJvbUdpdGh1YlYxIC1SZXRyaWVzIDIgLURlbGF5SW5TZWNvbmRzIDUgLVN5bmNTdWJmb2xkZXJzCiM+CndvcmtmbG93IFN5bmMtTWljcm9zb2Z0QXp1cmVBdXRvbWF0aW9uQWNjb3VudEZyb21HaXRodWJWMQp7CiAgICBwYXJhbSAoCiAgICAgICBbVmFsaWRhdGVOb3ROdWxsT3JFbXB0eSgpXQogICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JEZhbHNlKV0KICAgICAgIFtpbnRdICRSZXRyaWVzID0gMywKCiAgICAgICBbVmFsaWRhdGVOb3ROdWxsT3JFbXB0eSgpXQogICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JEZhbHNlKV0KICAgICAgIFtpbnRdICREZWxheUluU2Vjb25kcyA9IDIsCgogICAgICAgW1ZhbGlkYXRlTm90TnVsbE9yRW1wdHkoKV0KICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRGYWxzZSldCiAgICAgICBbYm9vbF0gJFN5bmNTdWJmb2xkZXJzID0gJEZhbHNlCiAgICApCiAgICAkU291cmNlQ29udHJvbFJ1bmJvb2tOYW1lID0gIlN5bmMtTWljcm9zb2Z0QXp1cmVBdXRvbWF0aW9uQWNjb3VudEZyb21HaXRodWJWMSIKICAgICRTb3VyY2VDb250cm9sQ29ubmVjdGlvblZhcmlhYmxlTmFtZSA9ICJNaWNyb3NvZnQuQXp1cmUuQXV0b21hdGlvbi5Tb3VyY2VDb250cm9sLkNvbm5lY3Rpb24iCiAgICAkU291cmNlQ29udHJvbE9BdXRoVG9rZW5WYXJpYWJsZU5hbWUgPSAiTWljcm9zb2Z0LkF6dXJlLkF1dG9tYXRpb24uU291cmNlQ29udHJvbC5PQXV0aFRva2VuIgoKICAgICRJbmZvcm1hdGlvbmFsTGV2ZWwgPSAiSW5mb3JtYXRpb25hbCIKICAgICRXYXJuaW5nTGV2ZWwgPSAiV2FybmluZyIKICAgICRFcnJvckxldmVsID0gIkVycm9yIgogICAgJFN1Y2NlZWRlZExldmVsID0gIlN1Y2NlZWRlZCIKCiAgICAkR2l0aHViVXJpR2V0QXV0aGVudGljYXRlZFVzZXIgPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyIgogICAgJEdpdGh1YlVyaUdldFJlcG9zV2l0aFBhZ2luYXRpb24gPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyL3JlcG9zP3BhZ2U9ezB9IgogICAgJEdpdGh1YlVyaUdldEJyYW5jaCA9ICJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3swfS97MX0vZ2l0L3JlZnMvaGVhZHMvezJ9IgogICAgJEdpdGh1YlVyaUdldENvbW1pdHNUb0JyYW5jaCA9ICJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3swfS97MX0vY29tbWl0cz9zaGE9ezJ9IgogICAgJEdpdGh1YlVyaUdldFRyZWVSZWN1cnNpdmVseSA9ICJodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zL3swfS97MX0vZ2l0L3RyZWVzL3syfT9yZWN1cnNpdmU9MSIKICAgICRHaXRodWJVcmlHZXRUcmVlID0gImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MvezB9L3sxfS9naXQvdHJlZXMvezJ9IgogICAgJEdpdGh1YlVyaUdldEJsb2IgPSAiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS9yZXBvcy97MH0vezF9L2dpdC9ibG9icy97Mn0iCgogICAgJER1cGxpY2F0ZVJ1bmJvb2tXYXJuaW5nTWVzc2FnZSA9ICJUaGVyZSB3YXMgYSBkdXBsaWNhdGUgZmlsZSB3aXRoIG5hbWUgezB9IGluIHRoZSBmb2xkZXIgezF9IG9yIGl0cyBzdWJmb2xkZXIuIFRoaXMgZmlsZSB3aWxsIG5vdCBiZSBzeW5jaHJvbml6ZWQuIgogICAgJEZpbGVXYXNOb3RTeW5jV2ViRXhjZXB0aW9uV2FybmluZ01lc3NhZ2UgPSAiV2ViLXJlcXVlc3QgdG8gR2l0aHViIGZvciBhY2Nlc3NpbmcgdGhlIHJ1bmJvb2sgZGVmaW5pdGlvbiBmYWlsZWQuIFRoZSBmaWxlIHdhcyBub3Qgc3luY2hyb25pemVkLiBCbG9iIHNoYTogezB9LiIKICAgICRGaWxlV2FzTm90U3luY0V4Y2VwdGlvbldhcm5pbmdNZXNzYWdlID0gIkFuIGV4Y2VwdGlvbiBvY2N1cnJlZCBhbmQgdGhlIGZpbGUgd2FzIG5vdCBzeW5jaHJvbml6ZWQuIEZpbGUncyBibG9iIHNoYTogezB9LiIKICAgICRGb2xkZXJEYXRhVHJ1bmNhdGVkV2FybmluZ01lc3NhZ2UgPSAiRm9sZGVyJ3MgZGF0YSBpcyB0cnVuY2F0ZWQuIFNvbWUgZmlsZXMgbWlnaHQgbm90IGJlIHN5bmNocm9uaXplZCIKICAgICRGb2xkZXJXYXNOb3RTeW5jV2ViRXhjZXB0aW9uV2FybmluZ01lc3NhZ2UgPSAiV2ViLXJlcXVlc3QgdG8gR2l0aHViIGZvciBhY2Nlc3NpbmcgdGhlIGZvbGRlciB0cmVlIGZhaWxlZC4gRm9sZGVyIHdhcyBub3Qgc3luY2hyb25pemVkLiBGb2xkZXIgdHJlZSBzaGE6IHswfS4iIAogICAgJEZvbGRlcldhc05vdFN5bmNFeGNlcHRpb25XYXJuaW5nTWVzc2FnZSA9ICJBbiBleGNlcHRpb24gb2NjdXJyZWQgYW5kIHRoZSBmb2xkZXIgd2FzIG5vdCBzeW5jaHJvbml6ZWQuIEZvbGRlciB0cmVlIHNoYTogezB9IgogICAgJFdlYkV4Y2VwdGlvbldhcm5pbmdNZXNzYWdlID0gIldlYi1yZXF1ZXN0IHRvIEdpdGh1YiBmYWlsZWQuIFJldHJ5aW5nIGluIHswfSBzZWNvbmRzIgogICAgJFNldEF1dG9tYXRpb25SdW5ib29rV2FybmluZ01lc3NhZ2UgPSAiRmlsZSB7MH0gY2Fubm90IGJlIHNhdmVkIHRvIHRoZSBBdXRvbWF0aW9uIGFjY291bnQuIE1ha2Ugc3VyZSB0aGUgZGVmaW5pdGlvbiBvZiB0aGUgZmlsZSBpcyBub3QgZW1wdHkgYW5kIGlzIGZvcm1hdHRlZCBjb3JyZWN0bHkuIgoKICAgICRTb3VyY2VDb250cm9sQ29ubmVjdGlvbkVycm9yTWVzc2FnZSA9ICJTeW5jIGZhaWxlZC4gWW91ciBBdXRvbWF0aW9uIGFjY291bnQgc2V0dGluZ3MgaGF2ZSBiZWVuIG1vZGlmaWVkIGFuZCBBdXRvbWF0aW9uIGNhbiBubyBsb25nZXIgY29ubmVjdCB0byB5b3VyIHJlcG9zaXRvcnkuIFRvIHJlY29ubmVjdCB5b3VyIHJlcG9zaXRvcnksIGdvIHRvIHRoZSBTZXQgVXAgU291cmNlIENvbnRyb2wgYmxhZGUgYW5kIGVudGVyIHRoZSBjcmVkZW50aWFscyBmb3IgeW91ciBHaXRIdWIgYWNjb3VudC4iCiAgICAkT0F1dGhUb2tlbkVycm9yTWVzc2FnZSA9ICAiU3luYyBmYWlsZWQuIFlvdXIgR2l0SHViIHRva2VuIGhhcyBleHBpcmVkIG9yIHlvdXIgQXV0b21hdGlvbiBhY2NvdW50IHNldHRpbmdzIGhhdmUgYmVlbiBtb2RpZmllZCBhbmQgQXV0b21hdGlvbiBjYW4gbm8gbG9uZ2VyIGNvbm5lY3QgdG8geW91ciByZXBvc2l0b3J5LiBUbyByZWNvbm5lY3QgeW91ciByZXBvc2l0b3J5LCBnbyB0byB0aGUgU2V0IFVwIFNvdXJjZSBDb250cm9sIGJsYWRlIGFuZCBlbnRlciB0aGUgY3JlZGVudGlhbHMgZm9yIHlvdXIgR2l0SHViIGFjY291bnQuIgogICAgJFJlcG9zaXRvcnlOb3RGb3VuZEVycm9yTWVzc2FnZSA9ICJTeW5jIGZhaWxlZC4gVGhlIHNwZWNpZmllZCByZXBvc2l0b3J5IHswfSBkb2VzIG5vdCBleGlzdC4gQ2hlY2sgdG8gc2VlIHdoZXRoZXIgdGhlIHJlcG9zaXRvcnkgaGFzIGJlZW4gZGVsZXRlZCBvciBpZiB0aGUgbmFtZSBoYXMgYmVlbiBtb2RpZmllZC4gVG8gcmVjb25uZWN0IHlvdXIgcmVwb3NpdG9yeSwgZ28gdG8gdGhlIFNldCBVcCBTb3VyY2UgQ29udHJvbCBibGFkZSwgZW50ZXIgdGhlIGNyZWRlbnRpYWxzIGZvciB5b3VyIEdpdEh1YiBhY2NvdW50LCBhbmQgc2VsZWN0IHlvdXIgcmVwb3NpdG9yeS4iCiAgICAkQnJhbmNoTm90Rm91bmRFcnJvck1lc3NhZ2UgPSAiU3luYyBmYWlsZWQuIFRoZSBzcGVjaWZpZWQgYnJhbmNoIHswfSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY3VycmVudCByZXBvc2l0b3J5IHsxfS4gQ2hlY2sgdG8gc2VlIHdoZXRoZXIgdGhlIGJyYW5jaCBoYXMgYmVlbiBkZWxldGVkIG9yIGlmIHRoZSBuYW1lIGhhcyBiZWVuIG1vZGlmaWVkLiBUbyByZWNvbm5lY3QsIGdvIHRvIHRoZSBTZXQgVXAgU291cmNlIENvbnRyb2wgYmxhZGUsIGVudGVyIHRoZSBjcmVkZW50aWFscyBmb3IgeW91ciBHaXRIdWIgYWNjb3VudCwgYW5kIHNlbGVjdCB5b3VyIHJlcG9zaXRvcnkgYW5kIGJyYW5jaC4iCiAgICAkQnJhbmNoSXNFbXB0eUVycm9yTWVzc2FnZSA9ICJTeW5jIGZhaWxlZC4gVGhlIHNwZWNpZmllZCBicmFuY2ggezB9IGlzIGVtcHR5LiIKICAgICRGb2xkZXJOb3RGb3VuZFRydW5jYXRlZERhdGFFcnJvck1lc3NhZ2UgPSAiU3luYyBmYWlsZWQuIFRoZSBudW1iZXIgb2YgcnVuYm9va3MgaW4gdGhlIHJlcG9zaXRvcnkgd2FzIHRvbyBsYXJnZSB0byBiZSByZXRyaWV2ZWQgYW5kIHRoZSBydW5ib29rcyBiZWVuIHRydW5jYXRlZC4gUmVkdWNlIHRoZSBudW1iZXIgb2YgcnVuYm9va3MgaW4gdGhlIHJ1bmJvb2tzIGZvbGRlciB0byBlbnN1cmUgdGhhdCBhbGwgcnVuYm9va3Mgc3luYyB0byBBenVyZSBBdXRvbWF0aW9uLiIKICAgICRGb2xkZXJOb3RGb3VuZEVycm9yTWVzc2FnZSA9ICJTeW5jIGZhaWxlZC4gVGhlcmUgaXMgbm8gZm9sZGVyIHdpdGggbmFtZSB7MH0gaW4gY3VycmVudCBicmFuY2ggezF9LiIKICAgICRXZWJFeGNlcHRpb25FcnJvck1lc3NhZ2UgPSAiU3luYyBmYWlsZWQuIFdlYkV4Y2VwdGlvbiBvY2N1cnJlZC4gezF9IgoKICAgICRBbGxEYXRhID0gR2V0LVBTV29ya2Zsb3dEYXRhW0hhc2h0YWJsZV0gLVZhcmlhYmxlVG9SZXRyaWV2ZSBBbGwKCSRQc1ByaXZhdGU9JEFsbERhdGEuUHNQcml2YXRlTWV0YWRhdGEKCSRTb3VyY2VDb250cm9sQWNjb3VudElkID0gJFBzUHJpdmF0ZS5BY2NvdW50SWQKCSRTb3VyY2VDb250cm9sSm9iSWQgPSAgJHBzcHJpdmF0ZS5Kb2JJZCAKCiAgICBGdW5jdGlvbiBXcml0ZS1Xb3JrZmxvd1RyYWNpbmcKICAgIHsKICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgIFtzdHJpbmddICRMZXZlbCwKICAgICAgICAgICAgW3N0cmluZ10gJE1lc3NhZ2UgCiAgICAgICAgKQogICAgICAgIGlmICgkTGV2ZWwgLWVxICRVc2luZzpJbmZvcm1hdGlvbmFsTGV2ZWwpCiAgICAgICAgewogICAgICAgICAgICBbT3JjaGVzdHJhdG9yLlNoYXJlZC5TaGFyZWQuVHJhY2VFdmVudFNvdXJjZV06OkxvZy5Tb3VyY2VDb250cm9sUnVuYm9va0luZm9ybWF0aW9uYWwoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQsICRNZXNzYWdlKQkJCQkKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkTGV2ZWwgLWVxICRVc2luZzpXYXJuaW5nTGV2ZWwpCiAgICAgICAgewogICAgICAgICAgICBbT3JjaGVzdHJhdG9yLlNoYXJlZC5TaGFyZWQuVHJhY2VFdmVudFNvdXJjZV06OkxvZy5Tb3VyY2VDb250cm9sUnVuYm9va1dhcm5pbmcoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQsICRNZXNzYWdlKQkJCQkKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkTGV2ZWwgLWVxICRVc2luZzpFcnJvckxldmVsKQogICAgICAgIHsKICAgICAgICAgICAgW09yY2hlc3RyYXRvci5TaGFyZWQuU2hhcmVkLlRyYWNlRXZlbnRTb3VyY2VdOjpMb2cuU291cmNlQ29udHJvbFJ1bmJvb2tFcnJvcigkVXNpbmc6U291cmNlQ29udHJvbFJ1bmJvb2tOYW1lLCAkVXNpbmc6U291cmNlQ29udHJvbEFjY291bnRJZCwgJFVzaW5nOlNvdXJjZUNvbnRyb2xKb2JJZCwgJE1lc3NhZ2UpCQkJCQogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRMZXZlbCAtZXEgJFVzaW5nOlN1Y2NlZWRlZExldmVsKQogICAgICAgIHsKICAgICAgICAgICAgW09yY2hlc3RyYXRvci5TaGFyZWQuU2hhcmVkLlRyYWNlRXZlbnRTb3VyY2VdOjpMb2cuU291cmNlQ29udHJvbFJ1bmJvb2tTdWNjZWVkZWQoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQpCQkJCQogICAgICAgIH0KICAgIH0KCiAgICBXcml0ZS1Xb3JrZmxvd1RyYWNpbmcgLUxldmVsICRJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIlN5bmMgZnJvbSBHaXRodWIgdG8gQXp1cmUgQXV0b21hdGlvbiBzdGFydGVkLiBbU3luY1N1YmZvbGRlcnM9JFN5bmNTdWJmb2xkZXJzXSIKICAgIFdyaXRlLU91dHB1dCAiU3luYyBzdGFydGVkLiIKCiAgICAkUmV0cmllcyA9IFtNYXRoXTo6TWF4KCRSZXRyaWVzLCAxKQogICAgJFJldHJpZXMgPSBbTWF0aF06Ok1pbigkUmV0cmllcywgMTApCiAgICAkRGVsYXlJblNlY29uZHMgPSBbTWF0aF06Ok1heCgkRGVsYXlJblNlY29uZHMsIDApCiAgICAkRGVsYXlJblNlY29uZHMgPSBbTWF0aF06Ok1pbigkRGVsYXlJblNlY29uZHMsIDEwMCkKICAgIAogICAgV3JpdGUtT3V0cHV0ICJDb25uZWN0aW5nIHRvIEdpdGh1Yi4uLiIKCiAgICBXcml0ZS1Xb3JrZmxvd1RyYWNpbmcgLUxldmVsICRJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIkdldHRpbmcgc291cmNlIGNvbnRyb2wgcGFyYW1ldGVycyBmcm9tIHZhcmlhYmxlIE1pY3Jvc29mdC5BenVyZS5BdXRvbWF0aW9uLlNvdXJjZUNvbnRyb2wuQ29ubmVjdGlvbi4iCiAgICAKICAgICRHaXRodWJNZXRhZGF0YSA9IEdldC1BdXRvbWF0aW9uVmFyaWFibGUgLU5hbWUgJFNvdXJjZUNvbnRyb2xDb25uZWN0aW9uVmFyaWFibGVOYW1lCiAgICBpZiAoISRHaXRodWJNZXRhZGF0YSkKICAgIHsKICAgICAgICBXcml0ZS1Xb3JrZmxvd1RyYWNpbmcgLUxldmVsICRFcnJvckxldmVsIC1NZXNzYWdlICIkU291cmNlQ29udHJvbENvbm5lY3Rpb25WYXJpYWJsZU5hbWUgdmFyaWFibGUgZG9lcyBub3QgZXhpc3QuICIgICAgICAgIAogICAgICAgIHRocm93ICRTb3VyY2VDb250cm9sQ29ubmVjdGlvbkVycm9yTWVzc2FnZQogICAgfQogICAgJEdpdGh1Yk1ldGFkYXRhID0gQ29udmVydEZyb20tSnNvbiAkR2l0aHViTWV0YWRhdGEKICAgICRSZXBvID0gJEdpdGh1Yk1ldGFkYXRhLlJlcG9zaXRvcnkKICAgICRCcmFuY2ggPSAkR2l0aHViTWV0YWRhdGEuQnJhbmNoCiAgICAkRm9sZGVyUGF0aCA9ICRHaXRodWJNZXRhZGF0YS5SdW5ib29rRm9sZGVyUGF0aAoKICAgIFdyaXRlLVdvcmtmbG93VHJhY2luZyAtTGV2ZWwgJEluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiW1JlcG9zaXRvcnk9JFJlcG9dW0JyYW5jaD0kQnJhbmNoXVtGb2xkZXJQYXRoPSRGb2xkZXJQYXRoXSIKICAgIFdyaXRlLVdvcmtmbG93VHJhY2luZyAtTGV2ZWwgJEluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiR2V0dGluZyBPQXV0aFRva2VuIGZyb20gZW5jcnlwdGVkIHZhcmlhYmxlIE1pY3Jvc29mdC5BenVyZS5BdXRvbWF0aW9uLlNvdXJjZUNvbnRyb2wuT0F1dGhUb2tlbi4iCgkKICAgICRPQXV0aFRva2VuID0gR2V0LUF1dG9tYXRpb25WYXJpYWJsZSAtTmFtZSAkU291cmNlQ29udHJvbE9BdXRoVG9rZW5WYXJpYWJsZU5hbWUKICAgIGlmICghJE9BdXRoVG9rZW4pCiAgICB7CiAgICAgICAgV3JpdGUtV29ya2Zsb3dUcmFjaW5nIC1MZXZlbCAkRXJyb3JMZXZlbCAtTWVzc2FnZSAiJFNvdXJjZUNvbnRyb2xPQXV0aFRva2VuVmFyaWFibGVOYW1lIHZhcmlhYmxlIGRvZXMgbm90IGV4aXN0LiIKICAgICAgICB0aHJvdyAkT0F1dGhUb2tlbkVycm9yTWVzc2FnZQogICAgfQoKICAgICRSdW5ib29rSW5mbyA9IElubGluZVNjcmlwdAogICAgewogICAgICAgICAgICBGdW5jdGlvbiBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRMZXZlbCwKICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRNZXNzYWdlIAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgaWYgKCRMZXZlbCAtZXEgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBbT3JjaGVzdHJhdG9yLlNoYXJlZC5TaGFyZWQuVHJhY2VFdmVudFNvdXJjZV06OkxvZy5Tb3VyY2VDb250cm9sUnVuYm9va0luZm9ybWF0aW9uYWwoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQsICRNZXNzYWdlKQkJCQkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJExldmVsIC1lcSAkVXNpbmc6V2FybmluZ0xldmVsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFtPcmNoZXN0cmF0b3IuU2hhcmVkLlNoYXJlZC5UcmFjZUV2ZW50U291cmNlXTo6TG9nLlNvdXJjZUNvbnRyb2xSdW5ib29rV2FybmluZygkVXNpbmc6U291cmNlQ29udHJvbFJ1bmJvb2tOYW1lLCAkVXNpbmc6U291cmNlQ29udHJvbEFjY291bnRJZCwgJFVzaW5nOlNvdXJjZUNvbnRyb2xKb2JJZCwgJE1lc3NhZ2UpCQkJCQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZWlmICgkTGV2ZWwgLWVxICRVc2luZzpFcnJvckxldmVsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFtPcmNoZXN0cmF0b3IuU2hhcmVkLlNoYXJlZC5UcmFjZUV2ZW50U291cmNlXTo6TG9nLlNvdXJjZUNvbnRyb2xSdW5ib29rRXJyb3IoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQsICRNZXNzYWdlKQkJCQkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJExldmVsIC1lcSAkVXNpbmc6U3VjY2VlZGVkTGV2ZWwpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgW09yY2hlc3RyYXRvci5TaGFyZWQuU2hhcmVkLlRyYWNlRXZlbnRTb3VyY2VdOjpMb2cuU291cmNlQ29udHJvbFJ1bmJvb2tTdWNjZWVkZWQoJFVzaW5nOlNvdXJjZUNvbnRyb2xSdW5ib29rTmFtZSwgJFVzaW5nOlNvdXJjZUNvbnRyb2xBY2NvdW50SWQsICRVc2luZzpTb3VyY2VDb250cm9sSm9iSWQpCQkJCQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGdldCBvd25lciBvZiB0aGUgR2l0aHViIHJlcG9zaXRvcnkgKG5vdCBuZWNlc3NhcmlseSB0aGUgdXNlcm5hbWUgLSBjYW4gYmUgYW4gb3JnYW5pc2F0aW9uKQogICAgICAgICAgICBGdW5jdGlvbiBHZXQtT3duZXIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgICAgW3N0cmluZ10gJE9BdXRoVG9rZW4sCiAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkUmVwbyAKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJHZXQtT3duZXIgc3RhcnRlZC4iCQkJCgogICAgICAgICAgICAgICAgJEhlYWRlcnMgPSBAeyJBdXRob3JpemF0aW9uIiA9ICJ0b2tlbiAkT0F1dGhUb2tlbiJ9CgogICAgICAgICAgICAgICAgJFVzZXJuYW1lUmVzcG9uc2UgPSBJbnZva2UtUmVzdE1ldGhvZCAtTWV0aG9kIEdldCAtVXJpICRVc2luZzpHaXRodWJVcmlHZXRBdXRoZW50aWNhdGVkVXNlciAtSGVhZGVycyAkSGVhZGVycwogICAgICAgICAgICAgICAgJFVzZXJuYW1lID0gJFVzZXJuYW1lUmVzcG9uc2UuTG9naW4KCiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJbVXNlcm5hbWU9JFVzZXJuYW1lXSIKCiAgICAgICAgICAgICAgICAjIENoZWNrIGlmIHRoZSByZXBvc2l0b3J5IGlzIHZhbGlkCiAgICAgICAgICAgICAgICAkUGFnZSA9IDEKICAgICAgICAgICAgICAgICRSZXBvT2JqZWN0ID0gJE51bGwKICAgICAgICAgICAgICAgIGRvCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiR2V0dGluZyByZXBvc2l0b3J5IGxpc3QuIFtVc2VybmFtZT0kVXNlcm5hbWVdW1JlcG9MaXN0UGFnZT0kUGFnZV0iCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJFVyaSA9IFtzdHJpbmddOjpGb3JtYXQoJFVzaW5nOkdpdGh1YlVyaUdldFJlcG9zV2l0aFBhZ2luYXRpb24sICRQYWdlKQogICAgICAgICAgICAgICAgICAgICRSZXBvT2JqZWN0TGlzdCA9IEludm9rZS1SZXN0TWV0aG9kIC1NZXRob2QgR2V0IC1VcmkgJFVyaSAtSGVhZGVycyAkSGVhZGVycwogICAgICAgICAgICAgICAgICAgICRSZXBvT2JqZWN0ID0gJFJlcG9PYmplY3RMaXN0LldoZXJlKHskXy5OYW1lIC1lcSAkUmVwb30pCiAgICAgICAgICAgICAgICAgICAgJFBhZ2UrKwogICAgICAgICAgICAgICAgfSB3aGlsZSAoKCRSZXBvT2JqZWN0Lm5hbWUgLW5lICRSZXBvKSAtYW5kICgkUmVwb09iamVjdExpc3QgLW5lICROdWxsKSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCRSZXBvT2JqZWN0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRPd25lciA9ICRSZXBvT2JqZWN0Lk93bmVyLkxvZ2luCgkJCSAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiUmVwb3NpdG9yeSAkUmVwbyBpcyB2YWxpZC4gR2V0LU93bmVyIGlzIGZpbmlzaGVkIHN1Y2Nlc3NmdWxseS4gT3duZXIgaXMgZ290dGVuLiBbUmVwb3NpdG9yeU93bmVyPSRPd25lcl0iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkVycm9yTGV2ZWwgLU1lc3NhZ2UgIlRoZSByZXBvc2l0b3J5IHdhcyBub3QgZm91bmQuIFtSZXBvc2l0b3J5PSRSZXBvXSIKCiAgICAgICAgICAgICAgICAgICAgJEVycm9yU3RyaW5nID0gW3N0cmluZ106OkZvcm1hdCgkVXNpbmc6UmVwb3NpdG9yeU5vdEZvdW5kRXJyb3JNZXNzYWdlLCAkUmVwbykKICAgICAgICAgICAgICAgICAgICB0aHJvdyAkRXJyb3JTdHJpbmcKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gJE93bmVyICAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgZ2V0IHRoZSBzaGEgb2YgdGhlIGxhc3QgY29tbWl0IHRvIHRoZSBicmFuY2ggKGZyb20gdGhhdCBkYXRhIHdlIGNhbiBnZXQgdGhlIGJyYW5jaCB0cmVlIGRhdGEpCiAgICAgICAgICAgIEZ1bmN0aW9uIEdldC1MYXN0Q29tbWl0U2hhCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkUmVwbywKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkT0F1dGhUb2tlbiwKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkT3duZXIsCiAgICAgICAgICAgICAgICAgICAgW3N0cmluZ10gJEJyYW5jaAogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICdTdG9wJwogICAgICAgICAgICAgICAgJEhlYWRlcnMgPSBAeyJBdXRob3JpemF0aW9uIiA9ICJ0b2tlbiAkT0F1dGhUb2tlbiJ9CgogICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiR2V0LUxhc3RDb21taXRTaGEgc3RhcnRlZC4gW093bmVyPSRPd25lcl1bUmVwb3NpdG9yeT0kUmVwb11bQnJhbmNoPSRCcmFuY2hdIgoKICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICMgZ2V0IGJyYW5jaCBzaGEKICAgICAgICAgICAgICAgICAgICAkVXJpID0gW3N0cmluZ106OkZvcm1hdCgkVXNpbmc6R2l0aHViVXJpR2V0QnJhbmNoLCAkT3duZXIsICRSZXBvLCAkQnJhbmNoKQogICAgICAgICAgICAgICAgICAgICRSZXN1bHRzID0gSW52b2tlLVJlc3RNZXRob2QgLU1ldGhvZCBHZXQgLVVyaSAkVXJpIC1IZWFkZXJzICRIZWFkZXJzCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgY2F0Y2ggW1N5c3RlbS5OZXQuV2ViRXhjZXB0aW9uXQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmICgkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UgLW1hdGNoICI0MDQiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEVycm9yTWVzc2FnZSA9ICRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JUeXBlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5HZXRUeXBlKCkuRnVsbE5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgJEVycm9yU3RhY2tUcmFjZSA9ICRFcnJvclswXS5FeGNlcHRpb24uU3RhY2tUcmFjZQogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpCcmFuY2hOb3RGb3VuZEVycm9yTWVzc2FnZSwgJEJyYW5jaCwgJFJlcG8pCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICRFcnJvclN0cmluZwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRCcmFuY2hTaGEgPSAkUmVzdWx0cy5PYmplY3QuU2hhCgogICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiQnJhbmNoIHNoYSBpcyBnb3R0ZW4uIFtCcmFuY2hTaGE9JEJyYW5jaFNoYV0iCiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJHZXR0aW5nIHRoZSBzaGEgb2YgdGhlIGxhc3QgY29tbWl0IHRvIGN1cnJlbnQgYnJhbmNoIFtCcmFuY2g9JEJyYW5jaF0iCgogICAgICAgICAgICAgICAgIyBnZXQgc2hhIG9mIHRoZSBsYXN0IGNvbW1pdCBmcm9tIHRoaXMgYnJhbmNoCiAgICAgICAgICAgICAgICAkVXJpID0gW3N0cmluZ106OkZvcm1hdCgkVXNpbmc6R2l0aHViVXJpR2V0Q29tbWl0c1RvQnJhbmNoLCAkT3duZXIsICRSZXBvLCAkQnJhbmNoU2hhKQogICAgICAgICAgICAgICAgJENvbW1pdHMgPSBJbnZva2UtUmVzdE1ldGhvZCAtTWV0aG9kIEdldCAtVXJpICRVcmkgLUhlYWRlcnMgJEhlYWRlcnMKICAgICAgICAgICAgICAgICRMYXN0Q29tbWl0U2hhID0gJENvbW1pdHNbMF0uU2hhCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHJldHVybiAkTGFzdENvbW1pdFNoYQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGdldCB0aGUgc2hhIG9mIHRoZSBmb2xkZXIgdGhhdCBuZWVkcyB0byBiZSBzeW5jZWQKICAgICAgICAgICAgRnVuY3Rpb24gR2V0LUZvbGRlclRyZWVTaGEKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRSZXBvLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPQXV0aFRva2VuLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPd25lciwKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkQnJhbmNoLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRGb2xkZXJQYXRoLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRMYXN0Q29tbWl0U2hhCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCiAgICAgICAgICAgICAgICAkSGVhZGVycyA9IEB7IkF1dGhvcml6YXRpb24iID0gInRva2VuICRPQXV0aFRva2VuIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICMgZ2V0IGJyYW5jaCB0cmVlIGRhdGEKICAgICAgICAgICAgICAgICAgICAkVXJpID0gW3N0cmluZ106OkZvcm1hdCgkVXNpbmc6R2l0aHViVXJpR2V0VHJlZVJlY3Vyc2l2ZWx5LCAkT3duZXIsICRSZXBvLCAkTGFzdENvbW1pdFNoYSkKICAgICAgICAgICAgICAgICAgICAkVHJlZURhdGEgPSBJbnZva2UtUmVzdE1ldGhvZCAtTWV0aG9kIEdldCAtVXJpICRVcmkgLUhlYWRlcnMgJEhlYWRlcnMKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIFtTeXN0ZW0uTmV0LldlYkV4Y2VwdGlvbl0KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoJEVycm9yWzBdLkV4Y2VwdGlvbi5NZXNzYWdlIC1tYXRjaCAiNDA0IikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvck1lc3NhZ2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgJEVycm9yVHlwZSA9ICRFcnJvclswXS5FeGNlcHRpb24uR2V0VHlwZSgpLkZ1bGxOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvclN0YWNrVHJhY2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLlN0YWNrVHJhY2UKICAgICAgICAgICAgICAgICAgICAgICAgJEdpdGh1YlJlc3BvbnNlID0gQ29udmVydEZyb20tSnNvbiAkRXJyb3JbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJEdpdGh1Yk1lc3NhZ2UgPSAkR2l0aHViUmVzcG9uc2UuTWVzc2FnZQoKICAgICAgICAgICAgICAgICAgICAgICAgI3RoZXJlIGFyZSBubyBmaWxlcyBhbmQgZm9sZGVycyBpbiBjdXJyZW50IGJyYW5jaAogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpCcmFuY2hJc0VtcHR5RXJyb3JNZXNzYWdlLCAkQnJhbmNoKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAkRXJyb3JTdHJpbmcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJFRyZWVTaXplID0gJFRyZWVEYXRhLlRyZWUuQ291bnQ7CiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJUcmVlIGRhdGEgd2FzIGZldGNoZWQuIFtUcmVlU2l6ZT0kVHJlZVNpemVdIgoKICAgICAgICAgICAgICAgICMgY2FzZSBpZiB3ZSBzeW5jIHRoZSByb290IGZvbGRlciAgCiAgICAgICAgICAgICAgICBpZiAoJEZvbGRlclBhdGggLWVxICIvIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJHZXQtRm9sZGVyVHJlZVNoYSBmaW5pc2hlZCBzdWNjZXNzZnVsbHkuIFN5bmMgZm9sZGVyIGlzIHJvb3QgZm9sZGVyLiBbRm9sZGVyVHJlZVNoYT0kVHJlZURhdGEuU2hhXSIKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRUcmVlRGF0YS5TaGEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIGdpdGh1YiByZXNwb25zZSBkb2VzIG5vdCBoYXZlIGEgc2xhc2ggYXMgYSBmaXJzdCBzeW1ib2wgaW4gdGhlIHBhdGggbmFtZQogICAgICAgICAgICAgICAgJEZvbGRlclBhdGggPSAkRm9sZGVyUGF0aC5UcmltU3RhcnQoJy8nKQoKICAgICAgICAgICAgICAgIFdyaXRlLUlubGluZVNjcmlwdFRyYWNpbmcgLUxldmVsICRVc2luZzpJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIlRyaW1tZWQgJy8nIGZyb20gdGhlIHN0YXJ0IG9mIEZvbGRlclBhdGguIFtGb2xkZXJQYXRoPSRGb2xkZXJQYXRoXSIKCiAgICAgICAgICAgICAgICAjIGdldCBzaGEgb2YgdGhlIGZvbGRlciB3aXRoIHJ1bmJvb2tzCiAgICAgICAgICAgICAgICAkRm9sZGVyVHJlZVNoYSA9ICROdWxsICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkRm9sZGVyRGF0YSA9ICRUcmVlRGF0YS5UcmVlLldoZXJlKHsoJF8uUGF0aCAtZXEgJEZvbGRlclBhdGgpIC1hbmQgKCRfLlR5cGUgLWVxICJ0cmVlIil9KSAgICAKICAgICAgICAgICAgICAgIGlmICghJEZvbGRlckRhdGEpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCRUcmVlRGF0YS50cnVuY2F0ZWQgLWVxICRUcnVlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkVycm9yTGV2ZWwgLU1lc3NhZ2UgIlRoZSBzcGVjaWZpZWQgZm9sZGVyIHdhcyBub3QgZm91bmQuIEdpdGh1YiByZXNwb25zZSB3YXMgdHJ1bmNhdGVkLiBbRm9sZGVyUGF0aD0kRm9sZGVyUGF0aF1bVHJ1bmNhdGVkPSRUcmVlRGF0YS5UcnVuY2F0ZWRdIgoKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJFVzaW5nOkZvbGRlck5vdEZvdW5kVHJ1bmNhdGVkRGF0YUVycm9yTWVzc2FnZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgJEVycm9yU3RyaW5nCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAjIGdldCBzaGEgb2YgZm9sZGVyJ3MgdHJlZQogICAgICAgICAgICAgICAgICAgICRVcmkgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpHaXRodWJVcmlHZXRUcmVlLCAkT3duZXIsICRSZXBvLCAkRm9sZGVyRGF0YS5TaGEpIAogICAgICAgICAgICAgICAgICAgICRGb2xkZXJUcmVlRGF0YSA9IEludm9rZS1SZXN0TWV0aG9kIC1NZXRob2QgR2V0IC1VcmkgJFVyaSAtSGVhZGVycyAkSGVhZGVycwogICAgICAgICAgICAgICAgICAgICRGb2xkZXJUcmVlU2hhID0gJEZvbGRlclRyZWVEYXRhLlNoYQogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICByZXR1cm4gJEZvbGRlclRyZWVTaGEKICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBhZGQgZmlsZW5hbWUgYW5kIGZpbGUgZGVmaW5pdGlvbiB0byBoYXNodGFibGUgJFJiSW5mbwogICAgICAgICAgICBGdW5jdGlvbiBTeW5jLUZpbGUKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPQXV0aFRva2VuLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPd25lciwKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkUmVwbywKICAgICAgICAgICAgICAgICAgICAkSXRlbSwKICAgICAgICAgICAgICAgICAgICAkUmJJbmZvCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAkSXRlbVBhdGggPSAkSXRlbS5QYXRoCiAgICAgICAgICAgICAgICAkSXRlbVNoYSA9ICRJdGVtLlNoYQogICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiU3luYy1GaWxlIHN0YXJ0ZWQuIFtSZXBvT3duZXI9JE93bmVyXVtSZXBvc2l0b3J5PSRSZXBvXVtJdGVtUGF0aD0kSXRlbVBhdGhdW0l0ZW1TaGE9JEl0ZW1TaGFdIgoKICAgICAgICAgICAgICAgICMgZ2V0IG5hbWUgb2YgdGhlIHJ1bmJvb2sKICAgICAgICAgICAgICAgICRQYXRoU3BsaXQgPSAkSXRlbS5QYXRoLlNwbGl0KCIvIikKICAgICAgICAgICAgICAgICRGaWxlbmFtZSA9ICRQYXRoU3BsaXRbJFBhdGhTcGxpdC5Db3VudCAtIDFdCiAgICAgICAgICAgICAgICAkVGVtcFBhdGhTcGxpdCA9ICRGaWxlbmFtZS5TcGxpdCgiLiIpCiAgICAgICAgICAgICAgICAkUnVuYm9va05hbWUgPSAkVGVtcFBhdGhTcGxpdFswXQogICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiW1J1bmJvb2tOYW1lPSRSdW5ib29rTmFtZV0iCgogICAgICAgICAgICAgICAgIyBzYXZlIGNvbnRlbnQgb2YgcnVuYm9vawogICAgICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgICAgICB7ICAgIAogICAgICAgICAgICAgICAgICAgICRIZWFkZXJzID0gQHsiQXV0aG9yaXphdGlvbiIgPSAidG9rZW4gJE9BdXRoVG9rZW4ifQogICAgICAgICAgICAgICAgICAgICRVcmkgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpHaXRodWJVcmlHZXRCbG9iLCAkT3duZXIsICRSZXBvLCAkSXRlbVNoYSkKCiAgICAgICAgICAgICAgICAgICAgJEJsb2JEYXRhID0gSW52b2tlLVJlc3RNZXRob2QgLU1ldGhvZCBHZXQgLVVyaSAkVXJpIC1IZWFkZXJzICRIZWFkZXJzCiAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJFJ1bmJvb2tTaXplID0gJEJsb2JEYXRhLlNpemUKICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJbUnVuYm9va05hbWU9JFJ1bmJvb2tOYW1lXVtSdW5ib29rU2l6ZT0kUnVuYm9va1NpemVdIgogIAogICAgICAgICAgICAgICAgICAgICMgdG9kbzogZG8gbm90IGZldGNoIGlmIGZpbGUgc2l6ZSBpcyA+IDFNQiAobWFrZSBhIHBhcmFtZXRlciBtYXhTaXplKQogICAgICAgICAgICAgICAgICAgICRDb250ZW50ID0gJEJsb2JEYXRhLkNvbnRlbnQKICAgICAgICAgICAgICAgICAgICAkQnl0ZXMgPSBbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRDb250ZW50KQogICAgICAgICAgICAgICAgICAgICRSdW5ib29rRGVmaW5pdGlvbiA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0U3RyaW5nKCRCeXRlcykKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAkUmJJbmZvLkNvbnRhaW5zS2V5KCRSdW5ib29rTmFtZSkpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJBZGRpbmcgcnVuYm9vayB0byBoYXNodGFibGUuIFtSdW5ib29rTmFtZT0kUnVuYm9va05hbWVdW1J1bmJvb2tTaXplPSRSdW5ib29rU2l6ZV0iCgogICAgICAgICAgICAgICAgICAgICAgICAkUmJJbmZvLkFkZCgkUnVuYm9va05hbWUsICRSdW5ib29rRGVmaW5pdGlvbikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpEdXBsaWNhdGVSdW5ib29rV2FybmluZ01lc3NhZ2UsICRSdW5ib29rTmFtZSwgJFVzaW5nOkZvbGRlclBhdGgpCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJFdhcm5pbmdTdHJpbmcKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCBbU3lzdGVtLk5ldC5XZWJFeGNlcHRpb25dCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEVycm9yTWVzc2FnZSA9ICRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICRFcnJvclR5cGUgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLkdldFR5cGUoKS5GdWxsTmFtZQogICAgICAgICAgICAgICAgICAgICRFcnJvclN0YWNrVHJhY2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLlN0YWNrVHJhY2UKICAgICAgICAgICAgICAgICAgICAkR2l0aHViUmVzcG9uc2UgPSBDb252ZXJ0RnJvbS1Kc29uICRFcnJvclswXQogICAgICAgICAgICAgICAgICAgICRHaXRodWJNZXNzYWdlID0gJEdpdGh1YlJlc3BvbnNlLk1lc3NhZ2UKCiAgICAgICAgICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpGaWxlV2FzTm90U3luY1dlYkV4Y2VwdGlvbldhcm5pbmdNZXNzYWdlLCAkSXRlbVNoYSkKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICRXYXJuaW5nU3RyaW5nCiAgICAgICAgICAgICAgICAgICAgJEVycm9yLkNsZWFyKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIFtTeXN0ZW0uRXhjZXB0aW9uXQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRFcnJvck1lc3NhZ2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkRXJyb3JUeXBlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5HZXRUeXBlKCkuRnVsbE5hbWUKICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdGFja1RyYWNlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5TdGFja1RyYWNlCiAgICAgICAgICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpGaWxlV2FzTm90U3luY0V4Y2VwdGlvbldhcm5pbmdNZXNzYWdlLCAkSXRlbVNoYSkKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICRXYXJuaW5nU3RyaW5nCiAgICAgICAgICAgICAgICAgICAgJEVycm9yLkNsZWFyKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJTeW5jLUZpbGUgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5LiBbRmlsZVNoYT0kSXRlbVNoYV0iCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICByZXR1cm4gJFJiSW5mbyAgICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICAjIGdvIHRocm91Z2ggdGhlIGZvbGRlciAocmVjdXJzaXZlbHkgZ28gdGhyb3VnaCBhbGwgbmVzdGVkIGZvbGRlcnMgaWYgJFN5bmNTdWJmb2xkZXJzID09ICR0cnVlKSBhbmQgZ2V0IHJ1bmJvb2tzIGRhdGEKICAgICAgICAgICAgRnVuY3Rpb24gU3luYy1Gb2xkZXIgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkRm9sZGVyU2hhLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPQXV0aFRva2VuLAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICRPd25lciwKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nXSAkUmVwbywKICAgICAgICAgICAgICAgICAgICBbYm9vbF0gJFN5bmNTdWJmb2xkZXJzLAogICAgICAgICAgICAgICAgICAgICRSYkluZm8KICAgICAgICAgICAgICAgICkgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJTeW5jLUZvbGRlciBzdGFydGVkLiBbUmVwb093bmVyPSRPd25lcl1bUmVwb3NpdG9yeT0kUmVwb11bRm9sZGVyU2hhPSRGb2xkZXJTaGFdW1N5bmNTdWJmb2xkZXJzPSRTeW5jU3ViZm9sZGVyc10iCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkZldGNoaW5nIHJ1bmJvb2tzLi4uIgoKICAgICAgICAgICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnU3RvcCcKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIHJlZ2V4IGZvciBydW5ib29rIGV4dGVuc2lvbgogICAgICAgICAgICAgICAgJFBzRXh0ZW5zaW9uUmVnZXggPSAiLnBzMSQiCiAgICAgICAgICAgICAgICAkQWxsRGF0YVN5bmNBbmROb3RUcnVuY2F0ZWQgPSAkVHJ1ZQogICAgICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEhlYWRlcnMgPSBAeyJBdXRob3JpemF0aW9uIiA9ICJ0b2tlbiAkT0F1dGhUb2tlbiJ9CiAgICAgICAgICAgICAgICAgICAgJFVyaSA9IFtzdHJpbmddOjpGb3JtYXQoJFVzaW5nOkdpdGh1YlVyaUdldFRyZWUsICRPd25lciwgJFJlcG8sICRGb2xkZXJTaGEpCgogICAgICAgICAgICAgICAgICAgICMgZ2V0dGluZyBsaXN0IG9mIGl0ZW1zIGluIHRoZSBmb2xkZXIKICAgICAgICAgICAgICAgICAgICAkRm9sZGVyRGF0YSA9IEludm9rZS1SZXN0TWV0aG9kIC1NZXRob2QgR2V0IC1VcmkgJFVyaSAtSGVhZGVycyAkSGVhZGVycwoKICAgICAgICAgICAgICAgICAgICAjIGlmIGl0IGlzIHRydW5jYXRlZCB0aGUgb25seSBwb3NzaWJsZSB3YXkgdG8gYXZvaWQgdGhhdCBpcyB0byBjbG9uZSB0aGUgcmVwb3NpdG9yeSB0byB0aGUgbG9jYWwgR2l0LiBUaGUgZXhhY3QgbGltaXQgb2YgZmlsZXMgaXMgdW5rbm93biBidXQgaXQgaXMgY2VydGFpbmx5IG1vcmUgdGhhbiAxMDAwIGZpbGVzIChodHRwczovL2RldmVsb3Blci5naXRodWIuY29tL3YzL3JlcG9zL2NvbnRlbnRzLyNnZXQtY29udGVudHMpCiAgICAgICAgICAgICAgICAgICAgaWYgKCRGb2xkZXJEYXRhLlRydW5jYXRlZCAtZXEgJFRydWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6V2FybmluZ0xldmVsIC1NZXNzYWdlICJGb2xkZXIgZGF0YSBpcyB0cnVuY2F0ZWQuIFtGb2xkZXJTaGE9JEZvbGRlclNoYV0iCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkVXNpbmc6Rm9sZGVyRGF0YVRydW5jYXRlZFdhcm5pbmdNZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICRBbGxEYXRhU3luY0FuZE5vdFRydW5jYXRlZCA9ICRGYWxzZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkRm9sZGVyU2l6ZSA9ICRGb2xkZXJEYXRhLlRyZWUuQ291bnQKICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJbRm9sZGVyU2hhPSRGb2xkZXJTaGFdW0ZvbGRlclNpemU9JEZvbGRlclNpemVdIgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRJdGVtIGluICRGb2xkZXJEYXRhLlRyZWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkSXRlbVNoYSA9ICRJdGVtLlNoYQogICAgICAgICAgICAgICAgICAgICAgICAkSXRlbVR5cGUgPSAkSXRlbS5UeXBlCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUlubGluZVNjcmlwdFRyYWNpbmcgLUxldmVsICRVc2luZzpJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIltGb2xkZXJTaGE9JEZvbGRlclNoYV1bSXRlbVNoYT0kSXRlbVNoYV1bSXRlbVR5cGU9JEl0ZW1UeXBlXSIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgkSXRlbS5UeXBlIC1lcSAiYmxvYiIpIC1hbmQgKCRJdGVtLlBhdGggLW1hdGNoICRQc0V4dGVuc2lvblJlZ2V4KSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIyB0aGUgaXRlbSBpcyBhIGZpbGUgd2l0aCBydW5ib29rIGV4dGVuc2lvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJiSW5mbyA9IFN5bmMtRmlsZSAtSXRlbSAkSXRlbSAtT0F1dGhUb2tlbiAkT0F1dGhUb2tlbiAtT3duZXIgJE93bmVyIC1SZXBvICRSZXBvIC1SYkluZm8gJFJiSW5mbwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoKCRJdGVtLlR5cGUgLWVxICJ0cmVlIikgLWFuZCAkU3luY1N1YmZvbGRlcnMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgdGhlIGl0ZW0gaXMgYSBmb2xkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICNUT0RPOiBjb25zaWRlciBzdGFjayBiYXNlZCByZWN1cnNpb24gKG1heWJlIHN1YmZvbGRlcnMgc2hvdWxkIGJlIHN5bmMgYmVmb3JlIHBhcmVudCBmb2xkZXJzKSBhbmQgbWVtb3J5IHN0b3JhZ2UgKHdlIGhhdmUgb25seSBhYm91dCA2MDAgTUIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkQWxsRGF0YVN5bmNBbmROb3RUcnVuY2F0ZWQgPSAkQWxsRGF0YVN5bmNBbmROb3RUcnVuY2F0ZWQgLWFuZCAoU3luYy1Gb2xkZXIgLUZvbGRlclNoYSAkSXRlbS5TaGEgLU9BdXRoVG9rZW4gJE9BdXRoVG9rZW4gLU93bmVyICRPd25lciAtUmVwbyAkUmVwbyAtUmJJbmZvICRSYkluZm8gLVN5bmNTdWJmb2xkZXJzICRTeW5jU3ViZm9sZGVycykKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkRm9sZGVyRGF0YSA9ICROdWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCBbU3lzdGVtLk5ldC5XZWJFeGNlcHRpb25dCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEFsbERhdGFTeW5jQW5kTm90VHJ1bmNhdGVkID0gJEZhbHNlCgogICAgICAgICAgICAgICAgICAgICRFcnJvck1lc3NhZ2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkRXJyb3JUeXBlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5HZXRUeXBlKCkuRnVsbE5hbWUKICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdGFja1RyYWNlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5TdGFja1RyYWNlCiAgICAgICAgICAgICAgICAgICAgJEdpdGh1YlJlc3BvbnNlID0gQ29udmVydEZyb20tSnNvbiAkRXJyb3JbMF0KICAgICAgICAgICAgICAgICAgICAkR2l0aHViTWVzc2FnZSA9ICRHaXRodWJSZXNwb25zZS5NZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpGb2xkZXJXYXNOb3RTeW5jV2ViRXhjZXB0aW9uV2FybmluZ01lc3NhZ2UsICRGb2xkZXJTaGEpCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkV2FybmluZ1N0cmluZyAgICAgIAogICAgICAgICAgICAgICAgICAgICRFcnJvci5DbGVhcigpICAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2ggW1N5c3RlbS5FeGNlcHRpb25dCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEFsbERhdGFTeW5jQW5kTm90VHJ1bmNhdGVkID0gJEZhbHNlCgogICAgICAgICAgICAgICAgICAgICRFcnJvck1lc3NhZ2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkRXJyb3JUeXBlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5HZXRUeXBlKCkuRnVsbE5hbWUKICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdGFja1RyYWNlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5TdGFja1RyYWNlCiAgICAgICAgICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpGb2xkZXJXYXNOb3RTeW5jRXhjZXB0aW9uV2FybmluZ01lc3NhZ2UsICRGb2xkZXJTaGEpCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkV2FybmluZ1N0cmluZwogICAgICAgICAgICAgICAgICAgICRFcnJvci5DbGVhcigpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgV3JpdGUtSW5saW5lU2NyaXB0VHJhY2luZyAtTGV2ZWwgJFVzaW5nOkluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiU3luYy1Gb2xkZXIgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5LiBbUmVwb093bmVyPSRPd25lcl1bUmVwb3NpdG9yeT0kUmVwb11bRm9sZGVyU2hhPSRGb2xkZXJTaGFdW1N5bmNTdWJmb2xkZXJzPSRTeW5jU3ViZm9sZGVyc10iCiAgICAgICAgICAgICAgICByZXR1cm4gJEFsbERhdGFTeW5jQW5kTm90VHJ1bmNhdGVkCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdyaXRlLUlubGluZVNjcmlwdFRyYWNpbmcgLUxldmVsICRVc2luZzpJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIltSZXRyaWVzPSRVc2luZzpSZXRyaWVzXVtEZWxheUluU2Vjb25kcz0kVXNpbmc6RGVsYXlJblNlY29uZHNdIgogICAgICAgIAogICAgICAgICAgICAkUmV0cnlDb3VudCA9IDAKICAgICAgICAgICAgJENvbXBsZXRlZCA9ICRGYWxzZQogICAgICAgICAgICAkRm9sZGVyVHJlZVNoYSA9ICROdWxsCgogICAgICAgICAgICB3aGlsZSAoLW5vdCAkQ29tcGxldGVkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1N0b3AnCgogICAgICAgICAgICAgICAgICAgIFdyaXRlLUlubGluZVNjcmlwdFRyYWNpbmcgLUxldmVsICRVc2luZzpJbmZvcm1hdGlvbmFsTGV2ZWwgLU1lc3NhZ2UgIltSZXRyeUNvdW50PSRSZXRyeUNvdW50XSIKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlNlYXJjaGluZyBmb3IgdGhlIHJlcG9zaXRvcnkuLi4iCgogICAgICAgICAgICAgICAgICAgICRPd25lciA9IEdldC1Pd25lciAtT0F1dGhUb2tlbiAkVXNpbmc6T0F1dGhUb2tlbiAtUmVwbyAkVXNpbmc6UmVwbwoKICAgICAgICAgICAgICAgICAgICBXcml0ZS1JbmxpbmVTY3JpcHRUcmFjaW5nIC1MZXZlbCAkVXNpbmc6SW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJPd25lciBuYW1lIGlzIGdvdHRlbi4gW1JlcG9Pd25lcj0kT3duZXJdW1JlcG9zaXRvcnk9JFVzaW5nOlJlcG9dW0JyYW5jaD0kVXNpbmc6QnJhbmNoXVtGb2xkZXJQYXRoPSRVc2luZzpGb2xkZXJQYXRoXSIKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlNlYXJjaGluZyBmb3IgdGhlIGJyYW5jaC4uLiIKCiAgICAgICAgICAgICAgICAgICAgJExhc3RDb21taXRTaGEgPSBHZXQtTGFzdENvbW1pdFNoYSAtUmVwbyAkVXNpbmc6UmVwbyAtT0F1dGhUb2tlbiAkVXNpbmc6T0F1dGhUb2tlbiAtT3duZXIgJE93bmVyIC1CcmFuY2ggJFVzaW5nOkJyYW5jaApXcml0ZS1PdXRwdXQgIlNlYXJjaGluZyBmb3IgdGhlIGZvbGRlci4uLiIKCiAgICAgICAgICAgICAgICAgICAgJEZvbGRlclRyZWVTaGEgPSBHZXQtRm9sZGVyVHJlZVNoYSAtUmVwbyAkVXNpbmc6UmVwbyAtT0F1dGhUb2tlbiAkVXNpbmc6T0F1dGhUb2tlbiAtT3duZXIgJE93bmVyIC1CcmFuY2ggJFVzaW5nOkJyYW5jaCAtRm9sZGVyUGF0aCAkVXNpbmc6Rm9sZGVyUGF0aCAtTGFzdENvbW1pdFNoYSAkTGFzdENvbW1pdFNoYQogICAgICAgICAgICAgICAgICAgICRDb21wbGV0ZWQgPSAkVHJ1ZQogICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXRjaCBbU3lzdGVtLk5ldC5XZWJFeGNlcHRpb25dCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEVycm9yTWVzc2FnZSA9ICRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICRFcnJvclR5cGUgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLkdldFR5cGUoKS5GdWxsTmFtZQogICAgICAgICAgICAgICAgICAgICRFcnJvclN0YWNrVHJhY2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLlN0YWNrVHJhY2UKICAgICAgICAgICAgICAgICAgICAkR2l0aHViUmVzcG9uc2UgPSBDb252ZXJ0RnJvbS1Kc29uICRFcnJvclswXQogICAgICAgICAgICAgICAgICAgICRHaXRodWJNZXNzYWdlID0gJEdpdGh1YlJlc3BvbnNlLk1lc3NhZ2UKCiAgICAgICAgICAgICAgICAgICAgJENvbXBsZXRlZCA9ICRUcnVlCgogICAgICAgICAgICAgICAgICAgIGlmICgkUmV0cnlDb3VudCAtbHQgJFVzaW5nOlJldHJpZXMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkV2FybmluZ1N0cmluZyA9IFtzdHJpbmddOjpGb3JtYXQoJFVzaW5nOldlYkV4Y2VwdGlvbldhcm5pbmdNZXNzYWdlLCAkVXNpbmc6RGVsYXlJblNlY29uZHMpCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJFdhcm5pbmdTdHJpbmcKCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwICRVc2luZzpEZWxheUluU2Vjb25kcwogICAgICAgICAgICAgICAgICAgICAgICAkUmV0cnlDb3VudCsrCiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnQ29udGludWUnCiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvci5DbGVhcigpCiAgICAgICAgICAgICAgICAgICAgICAgICRDb21wbGV0ZWQgPSAkRmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkRXJyb3JNZXNzYWdlIC1tYXRjaCAiNDAxIikgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAkVXNpbmc6T0F1dGhUb2tlbkVycm9yTWVzc2FnZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRVc2luZzpXZWJFeGNlcHRpb25FcnJvck1lc3NhZ2UsICRHaXRodWJNZXNzYWdlKQogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAkRXJyb3JTdHJpbmcKICAgICAgICAgICAgICAgICAgICB9ICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhdGNoIFtTeXN0ZW0uRXhjZXB0aW9uXQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRFcnJvck1lc3NhZ2UgPSAkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkRXJyb3JUeXBlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5HZXRUeXBlKCkuRnVsbE5hbWUKICAgICAgICAgICAgICAgICAgICAkRXJyb3JTdGFja1RyYWNlID0gJEVycm9yWzBdLkV4Y2VwdGlvbi5TdGFja1RyYWNlCgogICAgICAgICAgICAgICAgICAgIHRocm93ICRFcnJvck1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkQ29tcGxldGVkID0gJFRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgCiAgICAgICAgICAgICRSYkluZm8gPSBAe30KICAgICAgICAgICAgaWYgKC1ub3QgKCRGb2xkZXJUcmVlU2hhIC1lcSAkTnVsbCkpCiAgICAgICAgICAgIHsgICAgICAKICAgICAgICAgICAgICAgICMgZ2V0IGFsbCBydW5ib29rcyBmcm9tIHRoZSBmb2xkZXIKICAgICAgICAgICAgICAgIFN5bmMtRm9sZGVyIC1mb2xkZXJTaGEgJFVzaW5nOkZvbGRlclRyZWVTaGEgLU9BdXRoVG9rZW4gJFVzaW5nOk9BdXRoVG9rZW4gLU93bmVyICRVc2luZzpPd25lciAtUmVwbyAkVXNpbmc6UmVwbyAtUmJJbmZvICRSYkluZm8gLVN5bmNTdWJmb2xkZXJzICRVc2luZzpTeW5jU3ViZm9sZGVycwoKICAgICAgICAgICAgICAgICMgcGFzc2luZyByYkluZm8gZnJvbSBJbmxpbmVTY3JpcHQgdG8gd29ya2Zsb3cKICAgICAgICAgICAgICAgICRSYkluZm8KICAgICAgICAgICAgfQogICAgfQoKICAgIFdyaXRlLU91dHB1dCAiU2F2aW5nIHRoZSBydW5ib29rcyB0byB0aGUgQXV0b21hdGlvbiBBY2NvdW50Li4uIgoKICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnQ29udGludWUnCiAgICBmb3JlYWNoICgkUmJOYW1lIGluICRSdW5ib29rSW5mby5LZXlzKSAKICAgIHsKICAgICAgICAkUmJEZWZpbml0aW9uID0gJFJ1bmJvb2tJbmZvLiRSYk5hbWUKCiAgICAgICAgV3JpdGUtV29ya2Zsb3dUcmFjaW5nIC1MZXZlbCAkSW5mb3JtYXRpb25hbExldmVsIC1NZXNzYWdlICJTYXZpbmcgcnVuYm9vayB0byB0aGUgQXV0b21hdGlvbiBhY2NvdW50LiBbUnVuYm9va05hbWU9JFJiTmFtZV0iCiAgICAKICAgICAgICB0cnkKICAgICAgICB7CgkJCSRSYkRhdGEgPSBTZXQtQXV0b21hdGlvblJ1bmJvb2sgLU5hbWUgJFJiTmFtZSAtRGVmaW5pdGlvbiAkUmJEZWZpbml0aW9uIC1UeXBlICJQb3dlclNoZWxsV29ya2Zsb3ciCiAgICAgICAgICAgICRSYklkID0gJFJiRGF0YS5SdW5ib29rSWQKCiAgICAgICAgICAgIFdyaXRlLVdvcmtmbG93VHJhY2luZyAtTGV2ZWwgJEluZm9ybWF0aW9uYWxMZXZlbCAtTWVzc2FnZSAiVGhlIHJ1bmJvb2sgd2FzIHNhdmVkIHRvIHRoZSBBdXRvbWF0aW9uIGFjY291bnQuIFtSdW5ib29rTmFtZT0kUmJOYW1lXVtSdW5ib29rSWQ9JFJiSWRdIgoJCX0KCQljYXRjaAoJCXsKICAgICAgICAgICAgJFdhcm5pbmdTdHJpbmcgPSBbc3RyaW5nXTo6Rm9ybWF0KCRTZXRBdXRvbWF0aW9uUnVuYm9va1dhcm5pbmdNZXNzYWdlLCAkUmJOYW1lKQoJCQlXcml0ZS1XYXJuaW5nICRXYXJuaW5nU3RyaW5nCgkJfQogICAgfQoKICAgIFdyaXRlLVdvcmtmbG93VHJhY2luZyAtTGV2ZWwgJFN1Y2NlZWRlZExldmVsCiAgICBXcml0ZS1PdXRwdXQgIlN5bmMgZmluaXNoZWQgc3VjY2Vzc2Z1bGx5Igp9
