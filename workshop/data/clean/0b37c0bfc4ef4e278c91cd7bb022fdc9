OpenStackCommon.psm1,8856883546e27aa2e2dbd2e2dfbfdc0d,Scan result is 1. IsMalware: 0,IyBDb3B5cmlnaHQgMjAxNiBDbG91ZGJhc2UgU29sdXRpb25zIFNybAojCiMgICAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7IHlvdSBtYXkKIyAgICBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbgojICAgIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAojCiMgICAgICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKIwojICAgIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKIyAgICBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLCBXSVRIT1VUCiMgICAgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlCiMgICAgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMKIyAgICB1bmRlciB0aGUgTGljZW5zZS4KIwoKSW1wb3J0LU1vZHVsZSBKdWp1TG9nZ2luZwpJbXBvcnQtTW9kdWxlIEp1anVVdGlscwpJbXBvcnQtTW9kdWxlIEp1anVIb29rcwpJbXBvcnQtTW9kdWxlIEp1anVXaW5kb3dzVXRpbHMKSW1wb3J0LU1vZHVsZSBKdWp1SGVscGVyCgoKJERFRkFVTFRfT1BFTlNUQUNLX1ZFUlNJT04gPSAnb2NhdGEnCiRTVVBQT1JURURfT1BFTlNUQUNLX1JFTEVBU0VTID0gQCgnbWl0YWthJywgJ25ld3RvbicsICdvY2F0YScpCiRERUZBVUxUX0pVSlVfUkVTT1VSQ0VfQ09OVEVOVCA9ICJDbG91ZGJhc2UgZGVmYXVsdCBKdWp1IHJlc291cmNlIgoKIyBOb3ZhIGNvbnN0YW50cwokTk9WQV9QUk9EVUNUID0gQHsKICAgICdiZXRhX25hbWUnID0gJ09wZW5TdGFjayBIeXBlci1WIENvbXB1dGUgQmV0YScKICAgICdtaXRha2EnID0gQHsKICAgICAgICAnbmFtZScgPSAnT3BlblN0YWNrIEh5cGVyLVYgQ29tcHV0ZSBNaXRha2EnCiAgICAgICAgJ3ZlcnNpb24nID0gJzEzLjAuMCcKICAgICAgICAnZGVmYXVsdF9pbnN0YWxsZXJfdXJscycgPSBAewogICAgICAgICAgICAnbXNpJyA9ICdodHRwczovL2Nsb3VkYmFzZS5pdC9kb3dubG9hZHMvSHlwZXJWTm92YUNvbXB1dGVfTWl0YWthXzEzXzBfMC5tc2kjbWQ1PWFmNzQyMWZhOTZiYjBhZjQ2YzQxMDc1NTA4NTIwNTZlJwogICAgICAgICAgICAnemlwJyA9ICdodHRwczovL2Nsb3VkYmFzZS5pdC9kb3dubG9hZHMvSHlwZXJWTm92YUNvbXB1dGVfTWl0YWthXzEzXzBfMC56aXAjbWQ1PTllZmUzMWU4NDdjNTk4ODZhNTcwMDdmOWRkZGNmZmZjJwogICAgICAgIH0KICAgICAgICAnY29tcHV0ZV9kcml2ZXInID0gJ2h5cGVydi5ub3ZhLmRyaXZlci5IeXBlclZEcml2ZXInCiAgICAgICAgJ2NvbXB1dGVfY2x1c3Rlcl9kcml2ZXInID0gJ2h5cGVydi5ub3ZhLmNsdXN0ZXIuZHJpdmVyLkh5cGVyVkNsdXN0ZXJEcml2ZXInCiAgICB9CiAgICAnbmV3dG9uJyA9IEB7CiAgICAgICAgJ25hbWUnID0gJ09wZW5TdGFjayBIeXBlci1WIENvbXB1dGUgTmV3dG9uJwogICAgICAgICd2ZXJzaW9uJyA9ICcxNC4wLjEnCiAgICAgICAgJ2RlZmF1bHRfaW5zdGFsbGVyX3VybHMnID0gQHsKICAgICAgICAgICAgJ21zaScgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0h5cGVyVk5vdmFDb21wdXRlX05ld3Rvbl8xNF8wXzEubXNpI21kNT1kNTBiYzNlMmYzMzM1YWY2ZDMyNWMwYzA2M2UyYjM1OCcKICAgICAgICAgICAgJ3ppcCcgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0h5cGVyVk5vdmFDb21wdXRlX05ld3Rvbl8xNF8wXzEuemlwI21kNT0xMzA5NTRjY2Y3N2M3ODg1NzQ1ZTkzNzIwZjQ0ZDRkNycKICAgICAgICB9CiAgICAgICAgJ2NvbXB1dGVfZHJpdmVyJyA9ICdjb21wdXRlX2h5cGVydi5kcml2ZXIuSHlwZXJWRHJpdmVyJwogICAgICAgICdjb21wdXRlX2NsdXN0ZXJfZHJpdmVyJyA9ICdjb21wdXRlX2h5cGVydi5jbHVzdGVyLmRyaXZlci5IeXBlclZDbHVzdGVyRHJpdmVyJwogICAgfQogICAgJ29jYXRhJyA9IEB7CiAgICAgICAgJ25hbWUnID0gJ09wZW5TdGFjayBIeXBlci1WIENvbXB1dGUgT2NhdGEnCiAgICAgICAgJ3ZlcnNpb24nID0gJzE1LjAuMCcKICAgICAgICAnZGVmYXVsdF9pbnN0YWxsZXJfdXJscycgPSBAewogICAgICAgICAgICAnbXNpJyA9ICdodHRwczovL2Nsb3VkYmFzZS5pdC9kb3dubG9hZHMvSHlwZXJWTm92YUNvbXB1dGVfT2NhdGFfMTVfMF8wLm1zaSNtZDU9ODkyOWYzZGRhOWRhYWUyNjdiNDcyOTI5YzQ4NzAzNDQnCiAgICAgICAgICAgICd6aXAnID0gJ2h0dHBzOi8vY2xvdWRiYXNlLml0L2Rvd25sb2Fkcy9IeXBlclZOb3ZhQ29tcHV0ZV9PY2F0YV8xNV8wXzAuemlwI21kNT00ZmE0OGVlZTMwZmU3YmQxYjM2OWYzYTgyMWQwZjU2MycKICAgICAgICB9CiAgICAgICAgJ2NvbXB1dGVfZHJpdmVyJyA9ICdjb21wdXRlX2h5cGVydi5kcml2ZXIuSHlwZXJWRHJpdmVyJwogICAgICAgICdjb21wdXRlX2NsdXN0ZXJfZHJpdmVyJyA9ICdjb21wdXRlX2h5cGVydi5jbHVzdGVyLmRyaXZlci5IeXBlclZDbHVzdGVyRHJpdmVyJwogICAgfQoKfQokTk9WQV9DSEFSTV9QT1JUUyA9IEB7CiAgICAidGNwIiA9IEAoIjU5ODUiLCAiNTk4NiIsICIzMzQzIiwgIjQ0NSIsICIxMzUiLCAiMTM5IikKICAgICJ1ZHAiID0gQCgiNTk4NSIsICI1OTg2IiwgIjMzNDMiLCAiNDQ1IiwgIjEzNSIsICIxMzkiKQp9CiROT1ZBX0RFRkFVTFRfU1dJVENIX05BTUUgPSAiYnIxMDAiCiROT1ZBX0RFRkFVTFRfTE9HX0RJUiA9IEpvaW4tUGF0aCAkZW52OlN5c3RlbURyaXZlICJPcGVuU3RhY2tcTG9nIgokTk9WQV9ERUZBVUxUX0xPQ0tfRElSID0gSm9pbi1QYXRoICRlbnY6U3lzdGVtRHJpdmUgIk9wZW5TdGFja1xMb2NrIgokTk9WQV9ERUZBVUxUX0lOU1RBTkNFU19ESVIgPSBKb2luLVBhdGggJGVudjpTeXN0ZW1Ecml2ZSAiT3BlblN0YWNrXEluc3RhbmNlcyIKJE5PVkFfSU5TVEFMTF9ESVIgPSBKb2luLVBhdGggJHtlbnY6UHJvZ3JhbUZpbGVzfSAiQ2xvdWRiYXNlIFNvbHV0aW9uc1xPcGVuU3RhY2tcTm92YSIKJE5PVkFfVkFMSURfTkVUV09SS19UWVBFUyA9IEAoJ2h5cGVydicsICdvdnMnKQokTk9WQV9DT01QVVRFX1NFUlZJQ0VfTkFNRSA9ICJub3ZhLWNvbXB1dGUiCiRORVVUUk9OX0hZUEVSVl9BR0VOVF9TRVJWSUNFX05BTUUgPSAibmV1dHJvbi1oeXBlcnYtYWdlbnQiCiRORVVUUk9OX09WU19BR0VOVF9TRVJWSUNFX05BTUUgPSAibmV1dHJvbi1vcGVudnN3aXRjaC1hZ2VudCIKJGVudjpPVlNfUlVORElSID0gSm9pbi1QYXRoICRlbnY6UHJvZ3JhbURhdGEgIm9wZW52c3dpdGNoIgokT1ZTX1ZTV0lUQ0hEX1NFUlZJQ0VfTkFNRSA9ICJvdnMtdnN3aXRjaGQiCiRPVlNfT1ZTREJfU0VSVklDRV9OQU1FID0gIm92c2RiLXNlcnZlciIKJE9WU19KVUpVX0JSID0gImp1anUtYnIiCiRPVlNfSU5TVEFMTF9ESVIgPSBKb2luLVBhdGggJHtlbnY6UHJvZ3JhbUZpbGVzfSAiQ2xvdWRiYXNlIFNvbHV0aW9uc1xPcGVuIHZTd2l0Y2giCiRPVlNfVlNDVEwgPSBKb2luLVBhdGggJE9WU19JTlNUQUxMX0RJUiAiYmluXG92cy12c2N0bC5leGUiCiRPVlNfUFJPRFVDVF9OQU1FID0gJ0Nsb3VkYmFzZSBPcGVuIHZTd2l0Y2gnCiRPVlNfRVhUX05BTUUgPSAiQ2xvdWRiYXNlIE9wZW4gdlN3aXRjaCBFeHRlbnNpb24iCiRPVlNfREVGQVVMVF9JTlNUQUxMRVJfVVJMID0gImh0dHBzOi8vY2xvdWRiYXNlLml0L2Rvd25sb2Fkcy9vcGVudnN3aXRjaC1oeXBlcnYtMi42LjEtY2VydGlmaWVkLm1zaSNtZDU9ODQwRjUxMjUwQzU1MTk1N0JDMEM1NDZCOTZCRDUzRDYiCgojIENpbmRlciBjb25zdGFudHMKJENJTkRFUl9QUk9EVUNUID0gQHsKICAgICdiZXRhX25hbWUnID0gJ09wZW5TdGFjayBDaW5kZXIgVm9sdW1lIEJldGEnCiAgICAnbWl0YWthJyA9IEB7CiAgICAgICAgJ25hbWUnID0gJ09wZW5TdGFjayBDaW5kZXIgVm9sdW1lIE1pdGFrYScKICAgICAgICAndmVyc2lvbicgPSAnOC4wLjAnCiAgICAgICAgJ2RlZmF1bHRfaW5zdGFsbGVyX3VybHMnID0gQHsKICAgICAgICAgICAgJ21zaScgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0NpbmRlclZvbHVtZVNldHVwX01pdGFrYV84XzBfMC5tc2kjbWQ1PTEyMmNmY2NkNzBkYWY0MjczYmNkNDg2YjJlZDFjMmVkJwogICAgICAgICAgICAnemlwJyA9ICdodHRwczovL2Nsb3VkYmFzZS5pdC9kb3dubG9hZHMvQ2luZGVyVm9sdW1lU2V0dXBfTWl0YWthXzhfMF8wLnppcCNtZDU9OWI5ODgwMTJhNGJjNDcyYTUwNzEwZjVmNWFkZmZiNzknCiAgICAgICAgfQogICAgfQogICAgJ25ld3RvbicgPSBAewogICAgICAgICduYW1lJyA9ICdPcGVuU3RhY2sgQ2luZGVyIFZvbHVtZSBOZXd0b24nCiAgICAgICAgJ3ZlcnNpb24nID0gJzkuMC4wJwogICAgICAgICdkZWZhdWx0X2luc3RhbGxlcl91cmxzJyA9IEB7CiAgICAgICAgICAgICdtc2knID0gJ2h0dHBzOi8vY2xvdWRiYXNlLml0L2Rvd25sb2Fkcy9DaW5kZXJWb2x1bWVTZXR1cF9OZXd0b25fOV8wXzAubXNpI21kNT1mNTM0YzY4M2IyZTc5YWMxYmU4NDMwNzFiYTlkZDc2YicKICAgICAgICAgICAgJ3ppcCcgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0NpbmRlclZvbHVtZVNldHVwX05ld3Rvbl85XzBfMC56aXAjbWQ1PTBmODI1NjhiNGIyYjk3NzNlNmIxMmQxYmE2YjY5NDQyJwogICAgICAgIH0KICAgIH0KICAgICdvY2F0YScgPSBAewogICAgICAgICduYW1lJyA9ICdPcGVuU3RhY2sgQ2luZGVyIFZvbHVtZSBPY2F0YScKICAgICAgICAndmVyc2lvbicgPSAnMTAuMC4wJwogICAgICAgICdkZWZhdWx0X2luc3RhbGxlcl91cmxzJyA9IEB7CiAgICAgICAgICAgICdtc2knID0gJ2h0dHBzOi8vY2xvdWRiYXNlLml0L2Rvd25sb2Fkcy9DaW5kZXJWb2x1bWVTZXR1cF9PY2F0YV8xMF8wXzAubXNpI21kNT01M2FmNTI0ZDkzY2VjZmFlNTZmZGE5ZGFiOWE4ZGViOScKICAgICAgICAgICAgJ3ppcCcgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0NpbmRlclZvbHVtZVNldHVwX09jYXRhXzEwXzBfMC56aXAjbWQ1PTdhNWQ5ZGNkZjRiMTM3MTk0ZjQxMjE0NTk5YjkyOWE5JwogICAgICAgIH0KICAgIH0KfQokQ0lOREVSX0lOU1RBTExfRElSID0gSm9pbi1QYXRoICR7ZW52OlByb2dyYW1GaWxlc30gIkNsb3VkYmFzZSBTb2x1dGlvbnNcT3BlblN0YWNrXENpbmRlciIKJENJTkRFUl9JU0NTSV9CQUNLRU5EX05BTUUgPSAnaXNjc2knCiRDSU5ERVJfU01CX0JBQ0tFTkRfTkFNRSA9ICdzbWInCiRDSU5ERVJfVkFMSURfQkFDS0VORFMgPSBAKCRDSU5ERVJfSVNDU0lfQkFDS0VORF9OQU1FLCAkQ0lOREVSX1NNQl9CQUNLRU5EX05BTUUpCiRDSU5ERVJfVk9MVU1FX1NFUlZJQ0VfTkFNRSA9ICJjaW5kZXItdm9sdW1lIgokQ0lOREVSX1ZPTFVNRV9JU0NTSV9TRVJWSUNFX05BTUUgPSAiY2luZGVyLXZvbHVtZS1pc2NzaSIKJENJTkRFUl9WT0xVTUVfU01CX1NFUlZJQ0VfTkFNRSA9ICJjaW5kZXItdm9sdW1lLXNtYiIKJENJTkRFUl9ERUZBVUxUX0xPQ0tfRElSID0gSm9pbi1QYXRoICR7ZW52OlN5c3RlbURyaXZlfSAiT3BlblN0YWNrXExvY2siCiRDSU5ERVJfREVGQVVMVF9JU0NTSV9MVU5fRElSID0gSm9pbi1QYXRoICR7ZW52OlN5c3RlbURyaXZlfSAiT3BlblN0YWNrXGlTQ1NJVmlydHVhbERpc2tzIgokQ0lOREVSX0RFRkFVTFRfSU1BR0VfQ09OVkVSU0lPTl9ESVIgPSBKb2luLVBhdGggJHtlbnY6U3lzdGVtRHJpdmV9ICJPcGVuU3RhY2tcSW1hZ2VDb252ZXJzaW9uRGlyIgokQ0lOREVSX0RFRkFVTFRfTU9VTlRfUE9JTlRfQkFTRV9ESVIgPSBKb2luLVBhdGggJHtlbnY6U3lzdGVtRHJpdmV9ICJPcGVuU3RhY2tcbW50IgokQ0lOREVSX0RFRkFVTFRfTE9HX0RJUiA9IEpvaW4tUGF0aCAke2VudjpTeXN0ZW1Ecml2ZX0gIk9wZW5TdGFja1xMb2ciCiRDSU5ERVJfREVGQVVMVF9NQVhfVVNFRF9TUEFDRV9SQVRJTyA9ICcxLjAnCiRDSU5ERVJfREVGQVVMVF9PVkVSU1VCTUlUX1JBVElPID0gJzEuMCcKJENJTkRFUl9ERUZBVUxUX0RFRkFVTFRfVk9MVU1FX0ZPUk1BVCA9ICd2aGR4JwoKIyBOc2NsaWVudCBjb25zdGFudHMKJE5TQ0xJRU5UX0lOU1RBTExfRElSID0gSm9pbi1QYXRoICR7ZW52OlByb2dyYW1GaWxlc30gIk5TQ2xpZW50KysiCiROU0NMSUVOVF9ERUZBVUxUX0lOU1RBTExFUl9VUkxTID0gQHsKICAgICdtc2knID0gJ2h0dHBzOi8vZ2l0aHViLmNvbS9taWNrZW0vbnNjcC9yZWxlYXNlcy9kb3dubG9hZC8wLjUuMC42Mi9OU0NQLTAuNS4wLjYyLXg2NC5tc2kjbWQ1PTc0YTQ2MGRlZGJkOTg2NTliOGJhZDI0YWE5MWZjMjljJwogICAgJ3ppcCcgPSAnaHR0cHM6Ly9naXRodWIuY29tL21pY2tlbS9uc2NwL3JlbGVhc2VzL2Rvd25sb2FkLzAuNS4wLjYyL25zY3AtMC41LjAuNjIteDY0LnppcCNtZDU9YTc2NmRmZGI1ZDk0NTJiM2E3ZDFhZWMwMmNlODkxMDYnCn0KCiMgRnJlZVJEUCBjb25zdGFudHMKJEZSRUVfUkRQX0lOU1RBTExfRElSID0gSm9pbi1QYXRoICR7ZW52OlByb2dyYW1GaWxlc30gIkNsb3VkYmFzZSBTb2x1dGlvbnNcRnJlZVJEUC1XZWJDb25uZWN0IgokRlJFRV9SRFBfVkNSRURJU1QgPSAnaHR0cHM6Ly9kb3dubG9hZC5taWNyb3NvZnQuY29tL2Rvd25sb2FkLzIvRS82LzJFNjFDRkE0LTk5M0ItNERENC05MURBLTM3MzdDRDVDRDZFMy92Y3JlZGlzdF94NjQuZXhlJwokRlJFRV9SRFBfSU5TVEFMTEVSID0gQHsKICAgICdtc2knID0gJ2h0dHBzOi8vd3d3LmNsb3VkYmFzZS5pdC9kb3dubG9hZHMvRnJlZVJEUFdlYkNvbm5lY3QubXNpJwogICAgJ3ppcCcgPSAnaHR0cHM6Ly9jbG91ZGJhc2UuaXQvZG93bmxvYWRzL0ZyZWVSRFBXZWJDb25uZWN0LnppcCcKfQokRlJFRV9SRFBfRE9DVU1FTlRfUk9PVCA9IEpvaW4tUGF0aCAkRlJFRV9SRFBfSU5TVEFMTF9ESVIgIldlYlJvb3QiCiRGUkVFX1JEUF9DRVJUX0ZJTEUgPSBKb2luLVBhdGggJEZSRUVfUkRQX0lOU1RBTExfRElSICJldGNcc2VydmVyLmNlciIKJEZSRUVfUkRQX1NFUlZJQ0VfTkFNRSA9ICJ3c2dhdGUiCiRGUkVFX1JEUF9QUk9EVUNUX05BTUUgPSAiRnJlZVJEUC1XZWJDb25uZWN0IgoKZnVuY3Rpb24gR2V0LVB5dGhvbkRpciB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICAgUmV0dXJucyB0aGUgZnVsbCBwYXRoIG9mIGEgUHl0aG9uIGVudmlyb25tZW50IGRpcmVjdG9yeSBmb3IgYW4gT3BlblN0YWNrCiAgICAgcHJvamVjdC4KICAgIC5QQVJBTUVURVIgSW5zdGFsbERpcgogICAgIEluc3RhbGxhdGlvbiBkaXJlY3RvcnkgZm9yIHRoZSBPcGVuU3RhY2sgcHJvamVjdC4KICAgICM+CgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtzdHJpbmddJEluc3RhbGxEaXIKICAgICkKCiAgICAkcHl0aG9uRGlyID0gSm9pbi1QYXRoICRJbnN0YWxsRGlyICJQeXRob24yNyIKICAgIGlmICghKFRlc3QtUGF0aCAkcHl0aG9uRGlyKSkgewogICAgICAgICRweXRob25EaXIgPSBKb2luLVBhdGggJEluc3RhbGxEaXIgIlB5dGhvbiIKICAgICAgICBpZiAoIShUZXN0LVBhdGggJHB5dGhvbkRpcikpIHsKICAgICAgICAgICAgVGhyb3cgIkNvdWxkIG5vdCBmaW5kIFB5dGhvbiBkaXJlY3RvcnkgaW4gJyRJbnN0YWxsRGlyJy4iCiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRweXRob25EaXIKfQoKZnVuY3Rpb24gR2V0LVNlcnZpY2VXcmFwcGVyIHsKICAgIDwjCiAgICAuU1lOT1BTSVMKICAgICBSZXR1cm5zIHRoZSBmdWxsIHBhdGggdG8gdGhlIGNvcnJlY3QgT3BlblN0YWNrU2VydmljZSB3cmFwcGVyCiAgICAgdXNlZCBmb3IgT3BlblN0YWNrIFdpbmRvd3Mgc2VydmljZXMuCiAgICAjPgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV0KICAgICAgICBbc3RyaW5nXSRTZXJ2aWNlLAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbc3RyaW5nXSRJbnN0YWxsRGlyCiAgICApCgogICAgJHdyYXBwZXJOYW1lID0gKCJPcGVuU3RhY2tTZXJ2aWNlezB9LmV4ZSIgLWYgJFNlcnZpY2UpCiAgICAkc3ZjUGF0aCA9IEpvaW4tUGF0aCAkSW5zdGFsbERpciAoImJpblx7MH0iIC1mICR3cmFwcGVyTmFtZSkKICAgIGlmICghKFRlc3QtUGF0aCAkc3ZjUGF0aCkpIHsKICAgICAgICAkc3ZjUGF0aCA9IEpvaW4tUGF0aCAkSW5zdGFsbERpciAiYmluXE9wZW5TdGFja1NlcnZpY2UuZXhlIgogICAgICAgIGlmICghKFRlc3QtUGF0aCAkc3ZjUGF0aCkpIHsKICAgICAgICAgICAgVGhyb3cgIkZhaWxlZCB0byBmaW5kIHNlcnZpY2Ugd3JhcHBlciIKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJHN2Y1BhdGgKfQoKZnVuY3Rpb24gTmV3LUNvbmZpZ0ZpbGUgewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgIEdlbmVyYXRlcyBhIGNvbmZpZ3VyYXRpb24gZmlsZSBhZnRlciBpdCBpcyBwb3B1bGF0ZWQgd2l0aCB0aGUgdmFyaWFibGVzCiAgICAgZnJvbSB0aGUgY29udGV4dCBnZW5lcmF0b3JzLgogICAgIEZ1bmN0aW9uIHJldHVybnMgYSBsaXN0IHdpdGggdGhlIGluY29tcGxldGUgbWFuZGF0b3J5IHJlbGF0aW9uIG5hbWVzCiAgICAgaW4gb3JkZXIgdG8gYmUgdXNlZCBsYXRlciBvbiB0byBzZXQgcHJvcGVyIEp1anUgc3RhdHVzIHdpdGggaW5jb21wbGV0ZQogICAgIGNvbnRleHRzLgogICAgLlBBUkFNRVRFUiBDb250ZXh0R2VuZXJhdG9ycwogICAgIEhhc2hUYWJsZSB3aXRoIHRoZSBrZXlzOgogICAgIC0gJ2dlbmVyYXRvcicgcmVwcmVzZW50aW5nIHRoZSBmdW5jdGlvbiBuYW1lIHRoYXQgcmV0dXJucyBhIGRpY3Rpb25hcnkKICAgICB3aXRoIHRoZSByZWxhdGlvbiB2YXJpYWJsZXM7CiAgICAgLSAncmVsYXRpb24nIHJlcHJlc2VudGluZyB0aGUgcmVsYXRpb24gbmFtZTsKICAgICAtICdtYW5kYXRvcnknLCBib29sZWFuIGZsYWcgdG8gaW5kaWNhdGUgdGhhdCB0aGlzIGNvbnRleHQgZ2VuZXJhdG9yIGlzCiAgICAgbWFuZGF0b3J5LgogICAgLlBBUkFNRVRFUiBUZW1wbGF0ZQogICAgIEZ1bGwgcGF0aCB0byB0aGUgdGVtcGxhdGUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY29uZmlndXJhdGlvbiBmaWxlLgogICAgLlBBUkFNRVRFUiBPdXRGaWxlCiAgICAgRnVsbCBwYXRoIHRvIHRoZSBjb25maWd1cmF0aW9uIGZpbGUuCiAgICAjPgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtIYXNodGFibGVbXV0kQ29udGV4dEdlbmVyYXRvcnMsCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtTdHJpbmddJFRlbXBsYXRlLAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbU3RyaW5nXSRPdXRGaWxlCiAgICApCgogICAgJGluY29tcGxldGVSZWxhdGlvbnMgPSBbU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuTGlzdFtvYmplY3RdXShOZXctT2JqZWN0ICJTeXN0ZW0uQ29sbGVjdGlvbnMuR2VuZXJpYy5MaXN0W29iamVjdF0iKQogICAgJG1lcmdlZENvbnRleHQgPSBbU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWMuRGljdGlvbmFyeVtzdHJpbmcsIG9iamVjdF1dKE5ldy1PYmplY3QgIlN5c3RlbS5Db2xsZWN0aW9ucy5HZW5lcmljLkRpY3Rpb25hcnlbc3RyaW5nLCBvYmplY3RdIikKICAgIGZvcmVhY2ggKCRjdHh0R2VuIGluICRDb250ZXh0R2VuZXJhdG9ycykgewogICAgICAgIFdyaXRlLUp1anVXYXJuaW5nICgiR2V0dGluZyBjb250ZXh0IGZvciB7MH0iIC1mICRjdHh0R2VuWyJyZWxhdGlvbiJdKQogICAgICAgICRjdHh0ID0gSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrICRjdHh0R2VuWyJnZW5lcmF0b3IiXQogICAgICAgIGlmICghJGN0eHQuQ291bnQpIHsKICAgICAgICAgICAgaWYoJGN0eHRHZW5bIm1hbmRhdG9yeSJdIC1lcSAkdHJ1ZSkgewogICAgICAgICAgICAgICAgIyBDb250ZXh0IGlzIGVtcHR5LiBQcm9iYWJseSBwZWVyIG5vdCByZWFkeS4KICAgICAgICAgICAgICAgIFdyaXRlLUp1anVXYXJuaW5nICgiQ29udGV4dCBmb3IgezB9IGlzIEVNUFRZIiAtZiAkY3R4dEdlblsicmVsYXRpb24iXSkKICAgICAgICAgICAgICAgICRpbmNvbXBsZXRlUmVsYXRpb25zLkFkZCgkY3R4dEdlblsicmVsYXRpb24iXSkKICAgICAgICAgICAgfQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KICAgICAgICBXcml0ZS1KdWp1V2FybmluZyAoIkdvdCB7MH0gY29udGV4dDogezF9IiAtZiBAKCRjdHh0R2VuWyJyZWxhdGlvbiJdLCAoJGN0eHQuS2V5cyAtam9pbiAnLCcgKSkpCiAgICAgICAgZm9yZWFjaCAoJGsgaW4gJGN0eHQuS2V5cykgewogICAgICAgICAgICBpZigkY3R4dFska10pIHsKICAgICAgICAgICAgICAgICRtZXJnZWRDb250ZXh0WyRrXSA9ICRjdHh0WyRrXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgaWYgKCEkbWVyZ2VkQ29udGV4dC5Db3VudCkgewogICAgICAgIHJldHVybiAkaW5jb21wbGV0ZVJlbGF0aW9ucwogICAgfQogICAgU3RhcnQtUmVuZGVyVGVtcGxhdGUgLUNvbnRleHQgJG1lcmdlZENvbnRleHQgLVRlbXBsYXRlTmFtZSAkVGVtcGxhdGUgLU91dEZpbGUgJE91dEZpbGUKICAgIHJldHVybiAkaW5jb21wbGV0ZVJlbGF0aW9ucwp9CgpmdW5jdGlvbiBHZXQtT3BlbnN0YWNrVmVyc2lvbiB7CiAgICAkY2ZnID0gR2V0LUp1anVDaGFybUNvbmZpZwoKICAgIGlmKCEkY2ZnWydvcGVuc3RhY2stdmVyc2lvbiddKSB7CiAgICAgICAgcmV0dXJuICRERUZBVUxUX09QRU5TVEFDS19WRVJTSU9OCiAgICB9CgogICAgaWYoJGNmZ1snb3BlbnN0YWNrLXZlcnNpb24nXSAtbm90aW4gJFNVUFBPUlRFRF9PUEVOU1RBQ0tfUkVMRUFTRVMpIHsKICAgICAgICBUaHJvdyAoIid7MH0nIGlzIG5vdCBhIHN1cHBvcnRlZCBPcGVuU3RhY2sgcmVsZWFzZS4iIC1mIEAoJGNmZ1snb3BlbnN0YWNrLXZlcnNpb24nXSkpCiAgICB9CgogICAgcmV0dXJuICRjZmdbJ29wZW5zdGFjay12ZXJzaW9uJ10KfQoKZnVuY3Rpb24gR2V0LVByb2R1Y3REZWZhdWx0SW5zdGFsbGVyVVJMcyB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICAgUmV0dXJucyB0aGUgZGVmYXVsdCBpbnN0YWxsZXIgZG93bmxvYWQgVVJMcyBmb3IgYW4gT3BlblN0YWNrIHByb2R1Y3QuCiAgICAuUEFSQU1FVEVSIFByb2plY3QKICAgICBUaGUgT3BlblN0YWNrIHByb2plY3QgbmFtZS4KICAgICM+CgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtWYWxpZGF0ZVNldCgiTm92YSIsICJDaW5kZXIiKV0KICAgICAgICBbU3RyaW5nXSRQcm9qZWN0CiAgICApCgogICAgJHJlbGVhc2UgPSBHZXQtT3BlbnN0YWNrVmVyc2lvbgogICAgc3dpdGNoKCRQcm9qZWN0KSB7CiAgICAgICAgIk5vdmEiIHsKICAgICAgICAgICAgcmV0dXJuICROT1ZBX1BST0RVQ1RbJHJlbGVhc2VdWydkZWZhdWx0X2luc3RhbGxlcl91cmxzJ10KICAgICAgICB9CiAgICAgICAgIkNpbmRlciIgewogICAgICAgICAgICByZXR1cm4gJENJTkRFUl9QUk9EVUNUWyRyZWxlYXNlXVsnZGVmYXVsdF9pbnN0YWxsZXJfdXJscyddCiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBHZXQtSW5zdGFsbGVyUGF0aCB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICAgUmV0dXJucyB0aGUgaW5zdGFsbGVyIHBhdGggZm9yIGFuIE9wZW5TdGFjayBwcm9qZWN0IGFmdGVyIGl0IGlzIGRvd25sb2FkZWQuCiAgICAgJ2luc3RhbGxlci11cmwnIGNvbmZpZyBvcHRpb24gaXMgdXNlZCB0byBnZXQgYW4gaW5zdGFsbGVyIHByb3ZpZGVkIGJ5IHRoZQogICAgIHVzZXIuCiAgICAuUEFSQU1FVEVSIFByb2plY3QKICAgICBUaGUgT3BlblN0YWNrIHByb2plY3QgZm9yIHRoZSBpbnN0YWxsZXIuIFRoaXMgaXMgdXNlZCB0byBkZXRlcm1pbmUgdGhlCiAgICAgZGVmYXVsdCBkb3dubG9hZCBVUkwgaW4gY2FzZSAnaW5zdGFsbGVyLXVybCcgY29uZmlndXJhdGlvbiBvcHRpb24gaXMgbm90CiAgICAgc2V0LgogICAgIz4KCiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW1ZhbGlkYXRlU2V0KCJOb3ZhIiwgIkNpbmRlciIpXQogICAgICAgIFtTdHJpbmddJFByb2plY3QKICAgICkKCiAgICAkcmVsZWFzZSA9IEdldC1PcGVuc3RhY2tWZXJzaW9uCiAgICAkY2ZnID0gR2V0LUp1anVDaGFybUNvbmZpZwogICAgaWYgKCEkY2ZnWydpbnN0YWxsZXItdXJsJ10pIHsKICAgICAgICAkaW5zdGFsbGVyVHlwZSA9ICJtc2kiCiAgICAgICAgaWYoR2V0LUlzTmFub1NlcnZlcikgewogICAgICAgICAgICAkaW5zdGFsbGVyVHlwZSA9ICJ6aXAiCiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICAgICRkZWZhdWx0VXJscyA9IEdldC1Qcm9kdWN0RGVmYXVsdEluc3RhbGxlclVSTHMgJFByb2plY3QKICAgICAgICAgICAgJHVybCA9ICRkZWZhdWx0VXJsc1skaW5zdGFsbGVyVHlwZV0KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgVGhyb3cgIkNvdWxkIG5vdCBmaW5kIGEgJyRpbnN0YWxsZXJUeXBlJyBkb3dubG9hZCBpbnN0YWxsZXIgVVJMIGZvciAnJHJlbGVhc2UnIgogICAgICAgIH0KICAgICAgICBXcml0ZS1KdWp1V2FybmluZyAiVXNpbmcgZGVmYXVsdCBpbnN0YWxsZXIgdXJsOiAnJHVybCciCiAgICB9IGVsc2UgewogICAgICAgIFdyaXRlLUp1anVXYXJuaW5nICgiaW5zdGFsbGVyLXVybCBpcyBzZXQgdG86ICd7MH0nIiAtZiBAKCRjZmdbJ2luc3RhbGxlci11cmwnXSkpCiAgICAgICAgJHVybCA9ICRjZmdbJ2luc3RhbGxlci11cmwnXQogICAgfQoKICAgICRmaWxlID0gKFtTeXN0ZW0uVXJpXSR1cmwpLlNlZ21lbnRzWy0xXQogICAgJHRlbXBEb3dubG9hZEZpbGUgPSBKb2luLVBhdGggJGVudjpURU1QICRmaWxlCiAgICBTdGFydC1FeGVjdXRlV2l0aFJldHJ5IHsKICAgICAgICAkb3V0ID0gSW52b2tlLUZhc3RXZWJSZXF1ZXN0IC1VcmkgJHVybCAtT3V0RmlsZSAkdGVtcERvd25sb2FkRmlsZQogICAgfSAtUmV0cnlNZXNzYWdlICJJbnN0YWxsZXIgZG93bmxvYWQgZmFpbGVkLiBSZXRyeWluZyIKCiAgICByZXR1cm4gJHRlbXBEb3dubG9hZEZpbGUKfQoKZnVuY3Rpb24gRGlzYWJsZS1TZXJ2aWNlIHsKICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbc3RyaW5nXSROYW1lCiAgICApCgogICAgJHN2YyA9IEdldC1TZXJ2aWNlICROYW1lIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCiAgICBpZiAoISRzdmMpIHsKICAgICAgICByZXR1cm4KICAgIH0KICAgIEdldC1TZXJ2aWNlICROYW1lIHwgU2V0LVNlcnZpY2UgLVN0YXJ0dXBUeXBlIERpc2FibGVkIHwgT3V0LU51bGwKfQoKZnVuY3Rpb24gRW5hYmxlLVNlcnZpY2UgewogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtzdHJpbmddJE5hbWUKICAgICkKCiAgICAkc3ZjID0gR2V0LVNlcnZpY2UgJE5hbWUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKICAgIGlmICghJHN2YykgewogICAgICAgIHJldHVybgogICAgfQogICAgR2V0LVNlcnZpY2UgJE5hbWUgfCBTZXQtU2VydmljZSAtU3RhcnR1cFR5cGUgQXV0b21hdGljIHwgT3V0LU51bGwKfQoKZnVuY3Rpb24gR2V0LVJhYmJpdE1RQ29uZmlnIHsKICAgICRjZmcgPSBHZXQtSnVqdUNoYXJtQ29uZmlnCiAgICBpZighJGNmZ1sncmFiYml0LXVzZXInXSkgewogICAgICAgIFRocm93ICIncmFiYml0LXVzZXInIGNvbmZpZyBvcHRpb24gY2Fubm90IGJlIGVtcHR5IgogICAgfQogICAgaWYoISRjZmdbJ3JhYmJpdC12aG9zdCddKSB7CiAgICAgICAgVGhyb3cgIidyYWJiaXQtdmhvc3QnIGNvbmZpZyBvcHRpb24gY2Fubm90IGJlIGVtcHR5IgogICAgfQogICAgcmV0dXJuIEAoJGNmZ1sncmFiYml0LXVzZXInXSwgJGNmZ1sncmFiYml0LXZob3N0J10pCn0KCmZ1bmN0aW9uIEdldC1NeVNRTENvbmZpZyB7CiAgICAkY2ZnID0gR2V0LUp1anVDaGFybUNvbmZpZwogICAgaWYoISRjZmdbJ2RhdGFiYXNlJ10pIHsKICAgICAgICBUaHJvdyAiJ2RhdGFiYXNlJyBjb25maWcgb3B0aW9uIGNhbm5vdCBiZSBlbXB0eSIKICAgIH0KICAgIGlmKCEkY2ZnWydkYXRhYmFzZS11c2VyJ10pIHsKICAgICAgICBUaHJvdyAiJ2RhdGFiYXNlLXVzZXInIGNvbmZpZyBvcHRpb24gY2Fubm90IGJlIGVtcHR5IgogICAgfQogICAgcmV0dXJuIEAoJGNmZ1snZGF0YWJhc2UnXSwgJGNmZ1snZGF0YWJhc2UtdXNlciddKQp9CgpmdW5jdGlvbiBHZXQtUmFiYml0TVFDb250ZXh0IHsKICAgIFdyaXRlLUp1anVXYXJuaW5nICJHZW5lcmF0aW5nIGNvbnRleHQgZm9yIFJhYmJpdE1RIgogICAgJHJlcXVpcmVkID0gQHsKICAgICAgICAiaG9zdG5hbWUiID0gJG51bGwKICAgICAgICAicGFzc3dvcmQiID0gJG51bGwKICAgIH0KICAgICRvcHRpb25hbCA9IEB7CiAgICAgICAgInZob3N0IiA9ICRudWxsCiAgICAgICAgInVzZXJuYW1lIiA9ICRudWxsCiAgICAgICAgImhhX3F1ZXVlcyIgPSAkbnVsbAogICAgfQogICAgJGN0eCA9IEdldC1KdWp1UmVsYXRpb25Db250ZXh0IC1SZWxhdGlvbiAiYW1xcCIgLVJlcXVpcmVkQ29udGV4dCAkcmVxdWlyZWQgLU9wdGlvbmFsQ29udGV4dCAkb3B0aW9uYWwKICAgICR1c2VybmFtZSwgJHZob3N0ID0gR2V0LVJhYmJpdE1RQ29uZmlnCiAgICBpZighJGN0eC5Db3VudCkgewogICAgICAgIHJldHVybiBAe30KICAgIH0KICAgICRkYXRhID0gQHt9CiAgICBpZiAoISRjdHhbInVzZXJuYW1lIl0pIHsKICAgICAgICAkZGF0YVsicmFiYml0X3VzZXJpZCJdID0gJHVzZXJuYW1lCiAgICB9IGVsc2UgewogICAgICAgICRkYXRhWyJyYWJiaXRfdXNlcmlkIl0gPSAkY3R4WyJ1c2VybmFtZSJdCiAgICB9CiAgICBpZiAoISRjdHhbInZob3N0Il0pIHsKICAgICAgICAkZGF0YVsicmFiYml0X3ZpcnR1YWxfaG9zdCJdID0gJHZob3N0CiAgICB9IGVsc2UgewogICAgICAgICRkYXRhWyJyYWJiaXRfdmlydHVhbF9ob3N0Il0gPSAkY3R4WyJ2aG9zdCJdCiAgICB9CiAgICBpZiAoJGN0eFsiaGFfcXVldWVzIl0pIHsKICAgICAgICAkZGF0YVsicmFiYml0X2hhX3F1ZXVlcyJdID0gIlRydWUiCiAgICB9IGVsc2UgewogICAgICAgICRkYXRhWyJyYWJiaXRfaGFfcXVldWVzIl0gPSAiRmFsc2UiCiAgICB9CiAgICAkZGF0YVsicmFiYml0X2hvc3QiXSA9ICRjdHhbImhvc3RuYW1lIl0KICAgICRkYXRhWyJyYWJiaXRfcGFzc3dvcmQiXSA9ICRjdHhbInBhc3N3b3JkIl0KICAgIHJldHVybiAkZGF0YQp9CgpmdW5jdGlvbiBHZXQtR2xhbmNlQ29udGV4dCB7CiAgICBXcml0ZS1KdWp1V2FybmluZyAiR2V0dGluZyBnbGFuY2UgY29udGV4dCIKICAgICRyZXF1aXJlZCA9IEB7CiAgICAgICAgImdsYW5jZS1hcGktc2VydmVyIiA9ICRudWxsCiAgICB9CiAgICAkY3R4ID0gR2V0LUp1anVSZWxhdGlvbkNvbnRleHQgLVJlbGF0aW9uICdpbWFnZS1zZXJ2aWNlJyAtUmVxdWlyZWRDb250ZXh0ICRyZXF1aXJlZAogICAgJG5ldyA9IEB7fQogICAgZm9yZWFjaCAoJGkgaW4gJGN0eC5LZXlzKSB7CiAgICAgICAgJG5ld1skaS5SZXBsYWNlKCItIiwgIl8iKV0gPSAkY3R4WyRpXQogICAgfQogICAgcmV0dXJuICRuZXcKfQoKZnVuY3Rpb24gR2V0LU15U1FMQ29udGV4dCB7CiAgICAkcmVxdWlyZWRDdHh0ID0gQHsKICAgICAgICAiZGJfaG9zdCIgPSAkbnVsbAogICAgICAgICJwYXNzd29yZCIgPSAkbnVsbAogICAgfQogICAgJGN0eHQgPSBHZXQtSnVqdVJlbGF0aW9uQ29udGV4dCAtUmVsYXRpb24gIm15c3FsLWRiIiAtUmVxdWlyZWRDb250ZXh0ICRyZXF1aXJlZEN0eHQKICAgIGlmKCEkY3R4dC5Db3VudCkgewogICAgICAgIHJldHVybiBAe30KICAgIH0KICAgICRkYXRhYmFzZSwgJGRhdGFiYXNlVXNlciA9IEdldC1NeVNRTENvbmZpZwogICAgcmV0dXJuIEB7CiAgICAgICAgJ2RiX2hvc3QnID0gJGN0eHRbJ2RiX2hvc3QnXQogICAgICAgICdkYl9uYW1lJyA9ICRkYXRhYmFzZQogICAgICAgICdkYl91c2VyJyA9ICRkYXRhYmFzZVVzZXIKICAgICAgICAnZGJfdXNlcl9wYXNzd29yZCcgPSAkY3R4dFsncGFzc3dvcmQnXQogICAgfQp9CgpmdW5jdGlvbiBHZXQtQ29uZmlnQ29udGV4dCB7CiAgICAkY2ZnID0gR2V0LUp1anVDaGFybUNvbmZpZwogICAgJGN0eHQgPSBAe30KICAgIGZvcmVhY2ggKCRrIGluICRjZmcuS2V5cykgewogICAgICAgIGlmKCRjZmdbJGtdIC1lcSAkbnVsbCkgewogICAgICAgICAgICBjb250aW51ZQogICAgICAgIH0KICAgICAgICAkY29uZmlnTmFtZSA9ICRrIC1yZXBsYWNlICItIiwgIl8iCiAgICAgICAgJGNvbmZpZ1ZhbHVlID0gW3N0cmluZ10kY2ZnWyRrXSAtcmVwbGFjZSAgIi8iLCAiXCIKICAgICAgICAkY3R4dFskY29uZmlnTmFtZV0gPSAkY29uZmlnVmFsdWUKICAgIH0KICAgIHJldHVybiAkY3R4dAp9CgpmdW5jdGlvbiBHZXQtSW5zdGFsbGVkT3BlblN0YWNrUHJvZHVjdCB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICAgUmV0dXJucyB0aGUgT3BlblN0YWNrIHByb2R1Y3QgaW5zdGFsbGVkIGZvciB0aGUgcHJvamVjdCBwYXNzZWQgYXMKICAgICBwYXJhbWV0ZXIuCiAgICAuUEFSQU1FVEVSIFByb2plY3QKICAgICBOYW1lIG9mIHRoZSBPcGVuU3RhY2sgcHJvamVjdCBmb3IgdGhlIHByb2R1Y3QuCiAgICAjPgoKICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbVmFsaWRhdGVTZXQoIk5vdmEiLCAiQ2luZGVyIildCiAgICAgICAgW3N0cmluZ10kUHJvamVjdAogICAgKQoKICAgIGlmKEdldC1Jc05hbm9TZXJ2ZXIpIHsKICAgICAgICByZXR1cm4gJG51bGwKICAgIH0KICAgIHN3aXRjaCgkUHJvamVjdCkgewogICAgICAgICJOb3ZhIiB7CiAgICAgICAgICAgICRwcm9kdWN0Q29uc3RhbnRzID0gJE5PVkFfUFJPRFVDVAogICAgICAgIH0KICAgICAgICAiQ2luZGVyIiB7CiAgICAgICAgICAgICRwcm9kdWN0Q29uc3RhbnRzID0gJENJTkRFUl9QUk9EVUNUCiAgICAgICAgfQogICAgfQogICAgJHJlbGVhc2UgPSBHZXQtT3BlbnN0YWNrVmVyc2lvbgogICAgJHByb2R1Y3ROYW1lID0gJHByb2R1Y3RDb25zdGFudHNbJHJlbGVhc2VdWyduYW1lJ10KICAgICRwcm9kdWN0ID0gR2V0LU1hbmFnZW1lbnRPYmplY3QgLUNsYXNzTmFtZSAnV2luMzJfUHJvZHVjdCcgLUZpbHRlciAiTmFtZT0nJHByb2R1Y3ROYW1lJyIKICAgIGlmKCEkcHJvZHVjdCkgewogICAgICAgICMgUHJvYmFibHkgYSBjdXN0b20gYmV0YSBNU0kgaW5zdGFsbGVyIHdhcyB1c2VkCiAgICAgICAgJHByb2R1Y3ROYW1lID0gJHByb2R1Y3RDb25zdGFudHNbJ2JldGFfbmFtZSddCiAgICAgICAgJHByb2R1Y3QgPSBHZXQtTWFuYWdlbWVudE9iamVjdCAtQ2xhc3NOYW1lICdXaW4zMl9Qcm9kdWN0JyAtRmlsdGVyICJOYW1lPSckcHJvZHVjdE5hbWUnIgogICAgICAgIGlmKCEkcHJvZHVjdCkgewogICAgICAgICAgICByZXR1cm4gJG51bGwKICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJHByb2R1Y3QKfQoKIyBUT0RPOiBNb3ZlIHRvIEp1anVIb29rcyBtb2R1bGUKZnVuY3Rpb24gU2V0LUp1anVBcHBsaWNhdGlvblZlcnNpb24gewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgU2V0IHRoZSB2ZXJzaW9uIG9mIHRoZSBhcHBsaWNhdGlvbiBKdWp1IGlzIG1hbmFnaW5nLiBUaGUgdmVyc2lvbiB3aWxsIGJlCiAgICBkaXNwbGF5ZWQgaW4gdGhlICJqdWp1IHN0YXR1cyIgb3V0cHV0IGZvciB0aGUgYXBwbGljYXRpb24uCiAgICAuUEFSQU1FVEVSIFZlcnNpb24KICAgIFZlcnNpb24gdG8gYmUgc2V0CiAgICAjPgogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbU3RyaW5nXSRWZXJzaW9uCiAgICApCiAgICBQUk9DRVNTIHsKICAgICAgICAkY21kID0gQCgiYXBwbGljYXRpb24tdmVyc2lvbi1zZXQuZXhlIiwgJFZlcnNpb24pCiAgICAgICAgSW52b2tlLUp1anVDb21tYW5kIC1Db21tYW5kICRjbWQgfCBPdXQtTnVsbAogICAgfQp9CgojIFRPRE86IE1vdmUgdG8gSnVqdVdpbmRvd3NVdGlscyBtb2R1bGUKZnVuY3Rpb24gUmVtb3ZlLVdpbmRvd3NTZXJ2aWNlcyB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICBEZWxldGVzIHRoZSBXaW5kb3dzIHN5c3RlbSBzZXJ2aWNlcy4gVXNlZCB3aGVuIE1TSSBtZXRob2QgaXMgdXNlZCB0byBkZWxldGUKICAgIHRoZSBkZWZhdWx0IGdlbmVyYXRlZCBXaW5kb3dzIHNlcnZpY2VzLCBzbyBjaGFybSBjYW4gY3JlYXRlIHRoZW0gbGF0ZXIgb24uCiAgICAuUEFSQU1FVEVSIFNlcnZpY2VzCiAgICBMaXN0IG9mIFdpbmRvd3Mgc2VydmljZSBuYW1lcyB0byBiZSBkZWxldGVkLgogICAgIz4KCiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW3N0cmluZ1tdXSROYW1lcwogICAgKQoKICAgIGZvcmVhY2goJG5hbWUgaW4gJE5hbWVzKSB7CiAgICAgICAgJHNlcnZpY2UgPSBHZXQtTWFuYWdlbWVudE9iamVjdCAtQ2xhc3NOYW1lICJXaW4zMl9TZXJ2aWNlIiAtRmlsdGVyICJOYW1lPSckbmFtZSciCiAgICAgICAgaWYoJHNlcnZpY2UpIHsKICAgICAgICAgICAgU3RvcC1TZXJ2aWNlICRuYW1lIC1Gb3JjZQogICAgICAgICAgICBTdGFydC1FeHRlcm5hbENvbW1hbmQgeyBzYy5leGUgZGVsZXRlICRuYW1lIH0gfCBPdXQtTnVsbAogICAgICAgIH0KICAgIH0KfQoKIyBUT0RPOiBNb3ZlIHRvIEp1anVXaW5kb3dzVXRpbHMgbW9kdWxlCmZ1bmN0aW9uIFVuaW5zdGFsbC1XaW5kb3dzUHJvZHVjdCB7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICAgUmVtb3ZlcyBhbiBXaW5kb3dzIHByb2R1Y3QuCiAgICAuUEFSQU1FVEVSIE5hbWUKICAgICBUaGUgTmFtZSBvZiB0aGUgcHJvZHVjdCB0byBiZSByZW1vdmVkLgogICAgIz4KCiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW3N0cmluZ10kTmFtZQogICAgKQoKICAgIGlmKEdldC1Jc05hbm9TZXJ2ZXIpIHsKICAgICAgICBXcml0ZS1KdWp1V2FybmluZyAiQ2Fubm90IHVuaW5zdGFsbCBXaW5kb3dzIHByb2R1Y3RzIG9uIE5hbm8gc2VydmVyIgogICAgICAgIHJldHVybgogICAgfQogICAgJHBhcmFtcyA9IEB7CiAgICAgICAgJ0NsYXNzTmFtZScgPSAiV2luMzJfUHJvZHVjdCIKICAgICAgICAnRmlsdGVyJyA9ICJOYW1lPSckTmFtZSciCiAgICB9CiAgICBpZiAoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvciAtbHQgNCkgewogICAgICAgICRwcm9kdWN0ID0gR2V0LVdtaU9iamVjdCBAcGFyYW1zCiAgICAgICAgJHJlc3VsdCA9ICRwcm9kdWN0LlVuaW5zdGFsbCgpCiAgICB9IGVsc2UgewogICAgICAgICRwcm9kdWN0ID0gR2V0LUNpbUluc3RhbmNlIEBwYXJhbXMKICAgICAgICAkcmVzdWx0ID0gSW52b2tlLUNpbU1ldGhvZCAtSW5wdXRPYmplY3QgJHByb2R1Y3QgLU1ldGhvZE5hbWUgIlVuaW5zdGFsbCIKICAgIH0KICAgIGlmKCRyZXN1bHQuUmV0dXJuVmFsdWUpIHsKICAgICAgICBUaHJvdyAiRmFpbGVkIHRvIHVuaW5zdGFsbCBwcm9kdWN0ICckTmFtZSciCiAgICB9Cn0KCgpFeHBvcnQtTW9kdWxlTWVtYmVyIC1GdW5jdGlvbiAiKiIgLVZhcmlhYmxlICIqIgo=
