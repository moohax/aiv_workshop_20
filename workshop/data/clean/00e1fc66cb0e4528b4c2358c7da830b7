WindowsBase.ps1,5d5cb470371c95b76768bfc994a63389,Scan result is 1. IsMalware: 0,ZnVuY3Rpb24gTmV3LUZpbGVGb3JtYXRFeGNlcHRpb24gewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5JTy5GaWxlRm9ybWF0RXhjZXB0aW9uCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5JTy5GaWxlRm9ybWF0RXhjZXB0aW9uCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1GaWxlRm9ybWF0RXhjZXB0aW9uCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1GaWxlRm9ybWF0RXhjZXB0aW9uIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTeXN0ZW0uU3RyaW5nXQogICAgJHtIZWxwTGlua30sCgogICAgW1N5c3RlbS5TdHJpbmddCiAgICAke1NvdXJjZX0sCgogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLklPLkZpbGVGb3JtYXRFeGNlcHRpb24KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctRGVwZW5kZW5jeU9iamVjdCB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuRGVwZW5kZW5jeU9iamVjdAogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5EZXBlbmRlbmN5T2JqZWN0CiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1EZXBlbmRlbmN5T2JqZWN0CiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1EZXBlbmRlbmN5T2JqZWN0IC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9LAoKICAgIFtTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlXQogICAgJHtEZXBlbmRlbmN5UHJvcGVydHl9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkRlcGVuZGVuY3lPYmplY3QKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBpZiAoJFBzQm91bmRQYXJhbWV0ZXJzLkNvbnRhaW5zS2V5KCJEZXBlbmRlbmN5UHJvcGVydHkiKSkgewogICAgICAgICAgICAkbnVsbCA9ICRQc0JvdW5kUGFyYW1ldGVycy5SZW1vdmUoIkRlcGVuZGVuY3lQcm9wZXJ0eSIpCiAgICAgICAgICAgIGZvcmVhY2ggKCRkcCBpbiAkZGVwZW5kZW5jeVByb3BlcnR5LkdldEVudW1lcmF0b3IoKSkgewogICAgICAgICAgICAgICAgaWYgKCRkcC5LZXkgLWlzIFtXaW5kb3dzLkRlcGVuZGVuY3lQcm9wZXJ0eV0pIHsKICAgICAgICAgICAgICAgICAgICAkTnVsbCA9ICRPYmplY3QuU2V0VmFsdWUoJGRwLktleSwgJGRwLlZhbHVlKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAkUHJvcCA9ICRPYmplY3QuR2V0VHlwZSgpOjoiJCgkZHAuS2V5KVByb3BlcnR5IgogICAgICAgICAgICAgICAgICAgIGlmICgkUHJvcCkgewogICAgICAgICAgICAgICAgICAgICAgICAkbnVsbCA9ICRPYmplY3QuU2V0VmFsdWUoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJvcCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRkcC5WYWx1ZSAtYXMgJFByb3AuUHJvcGVydHlUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICkgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFNldC1Qcm9wZXJ0eSAtcHJvcGVydHkgJHBzQm91bmRQYXJhbWV0ZXJzIC1pbnB1dE9iamVjdCAkT2JqZWN0CiAgICAgICAgaWYgKCRvdXRwdXRYYW1sKSB7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAkc3RyV3JpdGUgPSBOZXctT2JqZWN0IElPLlN0cmluZ1dyaXRlcgogICAgICAgICAgICAoW3htbF0oW1dpbmRvd3MuTWFya3VwLlhhbWxXcml0ZXJdOjpTYXZlKCRPYmplY3QpKSkuU2F2ZSgkc3RyV3JpdGUpCiAgICAgICAgICAgIHJldHVybiAiJHN0cldyaXRlIgogICAgICAgIH0KICAgICAgICAkT2JqZWN0CiAgICB9CiAgICBlbmQgewogICAgICAgIAogICAgfQp9IGZ1bmN0aW9uIE5ldy1Qcm9wZXJ0eU1ldGFkYXRhIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5Qcm9wZXJ0eU1ldGFkYXRhCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLlByb3BlcnR5TWV0YWRhdGEKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVByb3BlcnR5TWV0YWRhdGEKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVByb3BlcnR5TWV0YWRhdGEgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgJHtEZWZhdWx0VmFsdWV9LAoKICAgICR7UHJvcGVydHlDaGFuZ2VkQ2FsbGJhY2t9LAoKICAgICR7Q29lcmNlVmFsdWVDYWxsYmFja30sCgogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuUHJvcGVydHlNZXRhZGF0YQogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICB0aHJvdyAkXwogICAgICAgICAgICByZXR1cm4KICAgICAgICB9IAogICAgICAgIFNldC1Qcm9wZXJ0eSAtcHJvcGVydHkgJHBzQm91bmRQYXJhbWV0ZXJzIC1pbnB1dE9iamVjdCAkT2JqZWN0CiAgICAgICAgaWYgKCRvdXRwdXRYYW1sKSB7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAkc3RyV3JpdGUgPSBOZXctT2JqZWN0IElPLlN0cmluZ1dyaXRlcgogICAgICAgICAgICAoW3htbF0oW1dpbmRvd3MuTWFya3VwLlhhbWxXcml0ZXJdOjpTYXZlKCRPYmplY3QpKSkuU2F2ZSgkc3RyV3JpdGUpCiAgICAgICAgICAgIHJldHVybiAiJHN0cldyaXRlIgogICAgICAgIH0KICAgICAgICAkT2JqZWN0CiAgICB9CiAgICBlbmQgewogICAgICAgIAogICAgfQp9IGZ1bmN0aW9uIE5ldy1EYXRlVGltZVZhbHVlU2VyaWFsaXplciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLkRhdGVUaW1lVmFsdWVTZXJpYWxpemVyCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLk1hcmt1cC5EYXRlVGltZVZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctRGF0ZVRpbWVWYWx1ZVNlcmlhbGl6ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LURhdGVUaW1lVmFsdWVTZXJpYWxpemVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLk1hcmt1cC5EYXRlVGltZVZhbHVlU2VyaWFsaXplcgogICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICB0aHJvdyAkXwogICAgICAgICAgICByZXR1cm4KICAgICAgICB9IAogICAgICAgIFNldC1Qcm9wZXJ0eSAtcHJvcGVydHkgJHBzQm91bmRQYXJhbWV0ZXJzIC1pbnB1dE9iamVjdCAkT2JqZWN0CiAgICAgICAgaWYgKCRvdXRwdXRYYW1sKSB7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICAkc3RyV3JpdGUgPSBOZXctT2JqZWN0IElPLlN0cmluZ1dyaXRlcgogICAgICAgICAgICAoW3htbF0oW1dpbmRvd3MuTWFya3VwLlhhbWxXcml0ZXJdOjpTYXZlKCRPYmplY3QpKSkuU2F2ZSgkc3RyV3JpdGUpCiAgICAgICAgICAgIHJldHVybiAiJHN0cldyaXRlIgogICAgICAgIH0KICAgICAgICAkT2JqZWN0CiAgICB9CiAgICBlbmQgewogICAgICAgIAogICAgfQp9IGZ1bmN0aW9uIE5ldy1DdXJyZW50Q2hhbmdpbmdFdmVudEFyZ3MgewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5Db21wb25lbnRNb2RlbC5DdXJyZW50Q2hhbmdpbmdFdmVudEFyZ3MKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLkNvbXBvbmVudE1vZGVsLkN1cnJlbnRDaGFuZ2luZ0V2ZW50QXJncwogICAgLkV4YW1wbGUKICAgICAgICBOZXctQ3VycmVudENoYW5naW5nRXZlbnRBcmdzCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1DdXJyZW50Q2hhbmdpbmdFdmVudEFyZ3MgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7Q2FuY2VsfSwKCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29tcG9uZW50TW9kZWwuQ3VycmVudENoYW5naW5nRXZlbnRBcmdzCiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgIHRocm93ICRfCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0gCiAgICAgICAgU2V0LVByb3BlcnR5IC1wcm9wZXJ0eSAkcHNCb3VuZFBhcmFtZXRlcnMgLWlucHV0T2JqZWN0ICRPYmplY3QKICAgICAgICBpZiAoJG91dHB1dFhhbWwpIHsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICRzdHJXcml0ZSA9IE5ldy1PYmplY3QgSU8uU3RyaW5nV3JpdGVyCiAgICAgICAgICAgIChbeG1sXShbV2luZG93cy5NYXJrdXAuWGFtbFdyaXRlcl06OlNhdmUoJE9iamVjdCkpKS5TYXZlKCRzdHJXcml0ZSkKICAgICAgICAgICAgcmV0dXJuICIkc3RyV3JpdGUiCiAgICAgICAgfQogICAgICAgICRPYmplY3QKICAgIH0KICAgIGVuZCB7CiAgICAgICAgCiAgICB9Cn0gZnVuY3Rpb24gTmV3LVNvcnREZXNjcmlwdGlvbkNvbGxlY3Rpb24gewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5Db21wb25lbnRNb2RlbC5Tb3J0RGVzY3JpcHRpb25Db2xsZWN0aW9uCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5Db21wb25lbnRNb2RlbC5Tb3J0RGVzY3JpcHRpb25Db2xsZWN0aW9uCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1Tb3J0RGVzY3JpcHRpb25Db2xsZWN0aW9uCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1Tb3J0RGVzY3JpcHRpb25Db2xsZWN0aW9uIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgICR7SXRlbX0sCgogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbXBvbmVudE1vZGVsLlNvcnREZXNjcmlwdGlvbkNvbGxlY3Rpb24KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctV2ViQnJvd3NlclBlcm1pc3Npb24gewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9ucy5XZWJCcm93c2VyUGVybWlzc2lvbgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uU2VjdXJpdHkuUGVybWlzc2lvbnMuV2ViQnJvd3NlclBlcm1pc3Npb24KICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVdlYkJyb3dzZXJQZXJtaXNzaW9uCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1XZWJCcm93c2VyUGVybWlzc2lvbiAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3lzdGVtLlNlY3VyaXR5LlBlcm1pc3Npb25zLldlYkJyb3dzZXJQZXJtaXNzaW9uTGV2ZWxdCiAgICAke0xldmVsfSwKCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uU2VjdXJpdHkuUGVybWlzc2lvbnMuV2ViQnJvd3NlclBlcm1pc3Npb24KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTWVkaWFQZXJtaXNzaW9uIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uU2VjdXJpdHkuUGVybWlzc2lvbnMuTWVkaWFQZXJtaXNzaW9uCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9ucy5NZWRpYVBlcm1pc3Npb24KICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1lZGlhUGVybWlzc2lvbgogICAgLkV4YW1wbGUKICAgICAgICBOZXctTWVkaWFQZXJtaXNzaW9uIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5QZXJtaXNzaW9ucy5NZWRpYVBlcm1pc3Npb24KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctSW50MzJSZWN0VmFsdWVTZXJpYWxpemVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLkludDMyUmVjdFZhbHVlU2VyaWFsaXplcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLkludDMyUmVjdFZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctSW50MzJSZWN0VmFsdWVTZXJpYWxpemVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1JbnQzMlJlY3RWYWx1ZVNlcmlhbGl6ZXIgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuQ29udmVydGVycy5JbnQzMlJlY3RWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctUG9pbnRWYWx1ZVNlcmlhbGl6ZXIgewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLkNvbnZlcnRlcnMuUG9pbnRWYWx1ZVNlcmlhbGl6ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuQ29udmVydGVycy5Qb2ludFZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUG9pbnRWYWx1ZVNlcmlhbGl6ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVBvaW50VmFsdWVTZXJpYWxpemVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkNvbnZlcnRlcnMuUG9pbnRWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctUmVjdFZhbHVlU2VyaWFsaXplciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuQ29udmVydGVycy5SZWN0VmFsdWVTZXJpYWxpemVyCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLkNvbnZlcnRlcnMuUmVjdFZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUmVjdFZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUmVjdFZhbHVlU2VyaWFsaXplciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLlJlY3RWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctU2l6ZVZhbHVlU2VyaWFsaXplciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuQ29udmVydGVycy5TaXplVmFsdWVTZXJpYWxpemVyCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLkNvbnZlcnRlcnMuU2l6ZVZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctU2l6ZVZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctU2l6ZVZhbHVlU2VyaWFsaXplciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLlNpemVWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctVmVjdG9yVmFsdWVTZXJpYWxpemVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLlZlY3RvclZhbHVlU2VyaWFsaXplcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5Db252ZXJ0ZXJzLlZlY3RvclZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctVmVjdG9yVmFsdWVTZXJpYWxpemVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1WZWN0b3JWYWx1ZVNlcmlhbGl6ZXIgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuQ29udmVydGVycy5WZWN0b3JWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctRXhwcmVzc2lvbkNvbnZlcnRlciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuRXhwcmVzc2lvbkNvbnZlcnRlcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5FeHByZXNzaW9uQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1FeHByZXNzaW9uQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1FeHByZXNzaW9uQ29udmVydGVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLkV4cHJlc3Npb25Db252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctSW50MzJSZWN0Q29udmVydGVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5JbnQzMlJlY3RDb252ZXJ0ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuSW50MzJSZWN0Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1JbnQzMlJlY3RDb252ZXJ0ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUludDMyUmVjdENvbnZlcnRlciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5JbnQzMlJlY3RDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctUG9pbnRDb252ZXJ0ZXIgewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLlBvaW50Q29udmVydGVyCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLlBvaW50Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1Qb2ludENvbnZlcnRlcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUG9pbnRDb252ZXJ0ZXIgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuUG9pbnRDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctUmVjdENvbnZlcnRlciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuUmVjdENvbnZlcnRlcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5SZWN0Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1SZWN0Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1SZWN0Q29udmVydGVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLlJlY3RDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctU2l6ZUNvbnZlcnRlciB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuU2l6ZUNvbnZlcnRlcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5TaXplQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1TaXplQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1TaXplQ29udmVydGVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLlNpemVDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctVmVjdG9yQ29udmVydGVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5WZWN0b3JDb252ZXJ0ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuVmVjdG9yQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1WZWN0b3JDb252ZXJ0ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVZlY3RvckNvbnZlcnRlciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5WZWN0b3JDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctS2V5Q29udmVydGVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5JbnB1dC5LZXlDb252ZXJ0ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuSW5wdXQuS2V5Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1LZXlDb252ZXJ0ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUtleUNvbnZlcnRlciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5JbnB1dC5LZXlDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctS2V5VmFsdWVTZXJpYWxpemVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5JbnB1dC5LZXlWYWx1ZVNlcmlhbGl6ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuSW5wdXQuS2V5VmFsdWVTZXJpYWxpemVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1LZXlWYWx1ZVNlcmlhbGl6ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUtleVZhbHVlU2VyaWFsaXplciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5JbnB1dC5LZXlWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTWF0cml4VmFsdWVTZXJpYWxpemVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5NZWRpYS5Db252ZXJ0ZXJzLk1hdHJpeFZhbHVlU2VyaWFsaXplcgogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5NZWRpYS5Db252ZXJ0ZXJzLk1hdHJpeFZhbHVlU2VyaWFsaXplcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctTWF0cml4VmFsdWVTZXJpYWxpemVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1NYXRyaXhWYWx1ZVNlcmlhbGl6ZXIgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWVkaWEuQ29udmVydGVycy5NYXRyaXhWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctRGlzYWJsZURwaUF3YXJlbmVzc0F0dHJpYnV0ZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWVkaWEuRGlzYWJsZURwaUF3YXJlbmVzc0F0dHJpYnV0ZQogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5NZWRpYS5EaXNhYmxlRHBpQXdhcmVuZXNzQXR0cmlidXRlCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1EaXNhYmxlRHBpQXdhcmVuZXNzQXR0cmlidXRlCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1EaXNhYmxlRHBpQXdhcmVuZXNzQXR0cmlidXRlIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLk1lZGlhLkRpc2FibGVEcGlBd2FyZW5lc3NBdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTWF0cml4Q29udmVydGVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5NZWRpYS5NYXRyaXhDb252ZXJ0ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWVkaWEuTWF0cml4Q29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1NYXRyaXhDb252ZXJ0ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1hdHJpeENvbnZlcnRlciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5NZWRpYS5NYXRyaXhDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctRGlzcGF0Y2hlclRpbWVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5UaHJlYWRpbmcuRGlzcGF0Y2hlclRpbWVyCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLlRocmVhZGluZy5EaXNwYXRjaGVyVGltZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LURpc3BhdGNoZXJUaW1lcgogICAgLkV4YW1wbGUKICAgICAgICBOZXctRGlzcGF0Y2hlclRpbWVyIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke0lzRW5hYmxlZH0sCgogICAgJHtJbnRlcnZhbH0sCgogICAgJHtUYWd9LAoKICAgIFtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlNjcmlwdEJsb2NrW11dCiAgICAke09uX1RpY2t9LAoKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLlRocmVhZGluZy5EaXNwYXRjaGVyVGltZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctQW1iaWVudEF0dHJpYnV0ZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLkFtYmllbnRBdHRyaWJ1dGUKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLkFtYmllbnRBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUFtYmllbnRBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUFtYmllbnRBdHRyaWJ1dGUgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWFya3VwLkFtYmllbnRBdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctQ29udGVudFByb3BlcnR5QXR0cmlidXRlIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5NYXJrdXAuQ29udGVudFByb3BlcnR5QXR0cmlidXRlCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLk1hcmt1cC5Db250ZW50UHJvcGVydHlBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LUNvbnRlbnRQcm9wZXJ0eUF0dHJpYnV0ZQogICAgLkV4YW1wbGUKICAgICAgICBOZXctQ29udGVudFByb3BlcnR5QXR0cmlidXRlIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5XaW5kb3dzLk1hcmt1cC5Db250ZW50UHJvcGVydHlBdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTWFya3VwRXh0ZW5zaW9uUmV0dXJuVHlwZUF0dHJpYnV0ZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLk1hcmt1cEV4dGVuc2lvblJldHVyblR5cGVBdHRyaWJ1dGUKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLk1hcmt1cEV4dGVuc2lvblJldHVyblR5cGVBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1hcmt1cEV4dGVuc2lvblJldHVyblR5cGVBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1hcmt1cEV4dGVuc2lvblJldHVyblR5cGVBdHRyaWJ1dGUgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWFya3VwLk1hcmt1cEV4dGVuc2lvblJldHVyblR5cGVBdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctU2VydmljZVByb3ZpZGVycyB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLlNlcnZpY2VQcm92aWRlcnMKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLlNlcnZpY2VQcm92aWRlcnMKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVNlcnZpY2VQcm92aWRlcnMKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVNlcnZpY2VQcm92aWRlcnMgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWFya3VwLlNlcnZpY2VQcm92aWRlcnMKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctVHJpbVN1cnJvdW5kaW5nV2hpdGVzcGFjZUF0dHJpYnV0ZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLlRyaW1TdXJyb3VuZGluZ1doaXRlc3BhY2VBdHRyaWJ1dGUKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLlRyaW1TdXJyb3VuZGluZ1doaXRlc3BhY2VBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVRyaW1TdXJyb3VuZGluZ1doaXRlc3BhY2VBdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVRyaW1TdXJyb3VuZGluZ1doaXRlc3BhY2VBdHRyaWJ1dGUgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWFya3VwLlRyaW1TdXJyb3VuZGluZ1doaXRlc3BhY2VBdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctV2hpdGVzcGFjZVNpZ25pZmljYW50Q29sbGVjdGlvbkF0dHJpYnV0ZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLldoaXRlc3BhY2VTaWduaWZpY2FudENvbGxlY3Rpb25BdHRyaWJ1dGUKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuTWFya3VwLldoaXRlc3BhY2VTaWduaWZpY2FudENvbGxlY3Rpb25BdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVdoaXRlc3BhY2VTaWduaWZpY2FudENvbGxlY3Rpb25BdHRyaWJ1dGUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LVdoaXRlc3BhY2VTaWduaWZpY2FudENvbGxlY3Rpb25BdHRyaWJ1dGUgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuTWFya3VwLldoaXRlc3BhY2VTaWduaWZpY2FudENvbGxlY3Rpb25BdHRyaWJ1dGUKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTW9kaWZpZXJLZXlzQ29udmVydGVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5JbnB1dC5Nb2RpZmllcktleXNDb252ZXJ0ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuSW5wdXQuTW9kaWZpZXJLZXlzQ29udmVydGVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1Nb2RpZmllcktleXNDb252ZXJ0ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1vZGlmaWVyS2V5c0NvbnZlcnRlciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5JbnB1dC5Nb2RpZmllcktleXNDb252ZXJ0ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctTW9kaWZpZXJLZXlzVmFsdWVTZXJpYWxpemVyIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5JbnB1dC5Nb2RpZmllcktleXNWYWx1ZVNlcmlhbGl6ZXIKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuSW5wdXQuTW9kaWZpZXJLZXlzVmFsdWVTZXJpYWxpemVyCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1Nb2RpZmllcktleXNWYWx1ZVNlcmlhbGl6ZXIKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LU1vZGlmaWVyS2V5c1ZhbHVlU2VyaWFsaXplciAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5JbnB1dC5Nb2RpZmllcktleXNWYWx1ZVNlcmlhbGl6ZXIKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctRGlzcGF0Y2hlckZyYW1lIHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5UaHJlYWRpbmcuRGlzcGF0Y2hlckZyYW1lCiAgICAuU3lub3BzaXMKICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5XaW5kb3dzLlRocmVhZGluZy5EaXNwYXRjaGVyRnJhbWUKICAgIC5FeGFtcGxlCiAgICAgICAgTmV3LURpc3BhdGNoZXJGcmFtZQogICAgLkV4YW1wbGUKICAgICAgICBOZXctRGlzcGF0Y2hlckZyYW1lIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgIFtTd2l0Y2hdCiAgICAke0NvbnRpbnVlfSwKCiAgICBbU3dpdGNoXQogICAgJHtPdXRwdXRYYW1sfQogICAgKQogICAgYmVnaW4gewogICAgICAgIAogICAgfQogICAgcHJvY2VzcyB7CiAgICAgICAgCiAgICAgICAgdHJ5IHsKICAgICAgICAkT2JqZWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uV2luZG93cy5UaHJlYWRpbmcuRGlzcGF0Y2hlckZyYW1lCiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgIHRocm93ICRfCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0gCiAgICAgICAgU2V0LVByb3BlcnR5IC1wcm9wZXJ0eSAkcHNCb3VuZFBhcmFtZXRlcnMgLWlucHV0T2JqZWN0ICRPYmplY3QKICAgICAgICBpZiAoJG91dHB1dFhhbWwpIHsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICRzdHJXcml0ZSA9IE5ldy1PYmplY3QgSU8uU3RyaW5nV3JpdGVyCiAgICAgICAgICAgIChbeG1sXShbV2luZG93cy5NYXJrdXAuWGFtbFdyaXRlcl06OlNhdmUoJE9iamVjdCkpKS5TYXZlKCRzdHJXcml0ZSkKICAgICAgICAgICAgcmV0dXJuICIkc3RyV3JpdGUiCiAgICAgICAgfQogICAgICAgICRPYmplY3QKICAgIH0KICAgIGVuZCB7CiAgICAgICAgCiAgICB9Cn0gZnVuY3Rpb24gTmV3LURpc3BhdGNoZXJTeW5jaHJvbml6YXRpb25Db250ZXh0IHsKICAgIAogICAgPCMKICAgIAogICAgLkRlc2NyaXB0aW9uCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uV2luZG93cy5UaHJlYWRpbmcuRGlzcGF0Y2hlclN5bmNocm9uaXphdGlvbkNvbnRleHQKICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLldpbmRvd3MuVGhyZWFkaW5nLkRpc3BhdGNoZXJTeW5jaHJvbml6YXRpb25Db250ZXh0CiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1EaXNwYXRjaGVyU3luY2hyb25pemF0aW9uQ29udGV4dAogICAgLkV4YW1wbGUKICAgICAgICBOZXctRGlzcGF0Y2hlclN5bmNocm9uaXphdGlvbkNvbnRleHQgLU91dHB1dFhhbWwKICAgIC5QYXJhbWV0ZXIgT3V0cHV0WGFtbAogICAgICAgIElmIFNldCwgd2lsbCBvdXRwdXQgdGhlIG9iamVjdCBhcyBYQU1MIGluc3RlYWQgb2YgY3JlYXRpbmcgaXQKICAgICM+CgogICAgCiAgICAKICAgIHBhcmFtKAogICAgICAgIAogICAgW1N3aXRjaF0KICAgICR7T3V0cHV0WGFtbH0KICAgICkKICAgIGJlZ2luIHsKICAgICAgICAKICAgIH0KICAgIHByb2Nlc3MgewogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgJE9iamVjdCA9IE5ldy1PYmplY3QgU3lzdGVtLldpbmRvd3MuVGhyZWFkaW5nLkRpc3BhdGNoZXJTeW5jaHJvbml6YXRpb25Db250ZXh0CiAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgIHRocm93ICRfCiAgICAgICAgICAgIHJldHVybgogICAgICAgIH0gCiAgICAgICAgU2V0LVByb3BlcnR5IC1wcm9wZXJ0eSAkcHNCb3VuZFBhcmFtZXRlcnMgLWlucHV0T2JqZWN0ICRPYmplY3QKICAgICAgICBpZiAoJG91dHB1dFhhbWwpIHsgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICRzdHJXcml0ZSA9IE5ldy1PYmplY3QgSU8uU3RyaW5nV3JpdGVyCiAgICAgICAgICAgIChbeG1sXShbV2luZG93cy5NYXJrdXAuWGFtbFdyaXRlcl06OlNhdmUoJE9iamVjdCkpKS5TYXZlKCRzdHJXcml0ZSkKICAgICAgICAgICAgcmV0dXJuICIkc3RyV3JpdGUiCiAgICAgICAgfQogICAgICAgICRPYmplY3QKICAgIH0KICAgIGVuZCB7CiAgICAgICAgCiAgICB9Cn0gZnVuY3Rpb24gTmV3LVJpZ2h0c01hbmFnZW1lbnRFeGNlcHRpb24gewogICAgCiAgICA8IwogICAgCiAgICAuRGVzY3JpcHRpb24KICAgICAgICBDcmVhdGVzIGEgbmV3IFN5c3RlbS5TZWN1cml0eS5SaWdodHNNYW5hZ2VtZW50LlJpZ2h0c01hbmFnZW1lbnRFeGNlcHRpb24KICAgIC5TeW5vcHNpcwogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLlNlY3VyaXR5LlJpZ2h0c01hbmFnZW1lbnQuUmlnaHRzTWFuYWdlbWVudEV4Y2VwdGlvbgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUmlnaHRzTWFuYWdlbWVudEV4Y2VwdGlvbgogICAgLkV4YW1wbGUKICAgICAgICBOZXctUmlnaHRzTWFuYWdlbWVudEV4Y2VwdGlvbiAtT3V0cHV0WGFtbAogICAgLlBhcmFtZXRlciBPdXRwdXRYYW1sCiAgICAgICAgSWYgU2V0LCB3aWxsIG91dHB1dCB0aGUgb2JqZWN0IGFzIFhBTUwgaW5zdGVhZCBvZiBjcmVhdGluZyBpdAogICAgIz4KCiAgICAKICAgIAogICAgcGFyYW0oCiAgICAgICAgCiAgICBbU3lzdGVtLlN0cmluZ10KICAgICR7SGVscExpbmt9LAoKICAgIFtTeXN0ZW0uU3RyaW5nXQogICAgJHtTb3VyY2V9LAoKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5SaWdodHNNYW5hZ2VtZW50LlJpZ2h0c01hbmFnZW1lbnRFeGNlcHRpb24KICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfSBmdW5jdGlvbiBOZXctVW5zaWduZWRQdWJsaXNoTGljZW5zZSB7CiAgICAKICAgIDwjCiAgICAKICAgIC5EZXNjcmlwdGlvbgogICAgICAgIENyZWF0ZXMgYSBuZXcgU3lzdGVtLlNlY3VyaXR5LlJpZ2h0c01hbmFnZW1lbnQuVW5zaWduZWRQdWJsaXNoTGljZW5zZQogICAgLlN5bm9wc2lzCiAgICAgICAgQ3JlYXRlcyBhIG5ldyBTeXN0ZW0uU2VjdXJpdHkuUmlnaHRzTWFuYWdlbWVudC5VbnNpZ25lZFB1Ymxpc2hMaWNlbnNlCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1VbnNpZ25lZFB1Ymxpc2hMaWNlbnNlCiAgICAuRXhhbXBsZQogICAgICAgIE5ldy1VbnNpZ25lZFB1Ymxpc2hMaWNlbnNlIC1PdXRwdXRYYW1sCiAgICAuUGFyYW1ldGVyIE91dHB1dFhhbWwKICAgICAgICBJZiBTZXQsIHdpbGwgb3V0cHV0IHRoZSBvYmplY3QgYXMgWEFNTCBpbnN0ZWFkIG9mIGNyZWF0aW5nIGl0CiAgICAjPgoKICAgIAogICAgCiAgICBwYXJhbSgKICAgICAgICAKICAgICR7T3duZXJ9LAoKICAgIFtTeXN0ZW0uU3RyaW5nXQogICAgJHtSZWZlcnJhbEluZm9OYW1lfSwKCiAgICAke1JlZmVycmFsSW5mb1VyaX0sCgogICAgJHtDb250ZW50SWR9LAoKICAgIFtTd2l0Y2hdCiAgICAke091dHB1dFhhbWx9CiAgICApCiAgICBiZWdpbiB7CiAgICAgICAgCiAgICB9CiAgICBwcm9jZXNzIHsKICAgICAgICAKICAgICAgICB0cnkgewogICAgICAgICRPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5SaWdodHNNYW5hZ2VtZW50LlVuc2lnbmVkUHVibGlzaExpY2Vuc2UKICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgdGhyb3cgJF8KICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfSAKICAgICAgICBTZXQtUHJvcGVydHkgLXByb3BlcnR5ICRwc0JvdW5kUGFyYW1ldGVycyAtaW5wdXRPYmplY3QgJE9iamVjdAogICAgICAgIGlmICgkb3V0cHV0WGFtbCkgeyAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJHN0cldyaXRlID0gTmV3LU9iamVjdCBJTy5TdHJpbmdXcml0ZXIKICAgICAgICAgICAgKFt4bWxdKFtXaW5kb3dzLk1hcmt1cC5YYW1sV3JpdGVyXTo6U2F2ZSgkT2JqZWN0KSkpLlNhdmUoJHN0cldyaXRlKQogICAgICAgICAgICByZXR1cm4gIiRzdHJXcml0ZSIKICAgICAgICB9CiAgICAgICAgJE9iamVjdAogICAgfQogICAgZW5kIHsKICAgICAgICAKICAgIH0KfQ==
