HTML Reporting.ps1,f9faca14637a2e2e59441b74492a47af,Scan result is 1. IsMalware: 0,w6/Cu8K/I3JlZ2lvbiBEZWZpbmUgdGhlIFdpbjMyV2luZG93Q2xhc3MKCmlmICgtbm90ICgnUG93ZXJTaGVsbFR5cGVFeHRlbnNpb25zLldpbjMyV2luZG93JyAtYXMgW1N5c3RlbS5UeXBlXSkpIHsKCSRjU2hhcnBDb2RlID0gQCcKdXNpbmcgU3lzdGVtOwoKbmFtZXNwYWNlIFBvd2VyU2hlbGxUeXBlRXh0ZW5zaW9ucyB7CglwdWJsaWMgY2xhc3MgV2luMzJXaW5kb3cgOiBTeXN0ZW0uV2luZG93cy5Gb3Jtcy5JV2luMzJXaW5kb3cKCXsKCQlwdWJsaWMgc3RhdGljIFdpbjMyV2luZG93IEN1cnJlbnRXaW5kb3cgewoJCQlnZXQgewoJCQkJcmV0dXJuIG5ldyBXaW4zMldpbmRvdyhTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzcy5HZXRDdXJyZW50UHJvY2VzcygpLk1haW5XaW5kb3dIYW5kbGUpOwoJCQl9CgkJfQoJCgkJcHVibGljIFdpbjMyV2luZG93KEludFB0ciBoYW5kbGUpIHsKCQkJX2h3bmQgPSBoYW5kbGU7CgkJfQoKCQlwdWJsaWMgSW50UHRyIEhhbmRsZSB7CgkJCWdldCB7CgkJCQlyZXR1cm4gX2h3bmQ7CgkJCX0KCQl9CgoJCXByaXZhdGUgSW50UHRyIF9od25kOwoJfQp9CidACgoJQWRkLVR5cGUgLVJlZmVyZW5jZWRBc3NlbWJsaWVzIFN5c3RlbS5XaW5kb3dzLkZvcm1zIC1UeXBlRGVmaW5pdGlvbiAkY1NoYXJwQ29kZQp9CgojZW5kcmVnaW9uCiNyZWdpb24gVUkgRnVuY3Rpb25zCgpmdW5jdGlvbiBnbG9iYWw6U2hvdy1NZXNzYWdlQm94IHsKCVtDbWRsZXRCaW5kaW5nKCldCglbT3V0cHV0VHlwZShbU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0XSldCglwYXJhbSgKCQlbUGFyYW1ldGVyKFBvc2l0aW9uPTAsTWFuZGF0b3J5PSR0cnVlKV0KCQlbVmFsaWRhdGVOb3ROdWxsT3JFbXB0eSgpXQoJCVtTeXN0ZW0uU3RyaW5nXQoJCSRUZXh0LAoKCQlbUGFyYW1ldGVyKCldCgkJW1ZhbGlkYXRlTm90TnVsbCgpXQoJCVtTeXN0ZW0uU3RyaW5nXQoJCSRDYXB0aW9uID0gJycsCgoJCVtQYXJhbWV0ZXIoKV0KCQlbVmFsaWRhdGVOb3ROdWxsKCldCgkJW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXQoJCSRCdXR0b25zID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6T0ssCgoJCVtQYXJhbWV0ZXIoKV0KCQlbVmFsaWRhdGVOb3ROdWxsKCldCgkJW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hJY29uXQoJCSRJY29uID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hJY29uXTo6Tm9uZSwKCgkJW1BhcmFtZXRlcigpXQoJCVtWYWxpZGF0ZU5vdE51bGwoKV0KCQlbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveERlZmF1bHRCdXR0b25dCgkJJERlZmF1bHRCdXR0b24gPSBbU3lzdGVtLldpbmRvd3MuRm9ybXMuTWVzc2FnZUJveERlZmF1bHRCdXR0b25dOjpCdXR0b24xLAoKCQlbUGFyYW1ldGVyKCldCgkJW1ZhbGlkYXRlTm90TnVsbCgpXQoJCVtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5NZXNzYWdlQm94T3B0aW9uc10KCQkkT3B0aW9ucyA9IDAKCSkKCgl0cnkgewoJCWlmICgoR2V0LVByb2Nlc3MgLUlkICRQSUQpLlByb2Nlc3NOYW1lIC1tYXRjaCAnXkFkbWluQ29uc29sZScpIHsKCQkJW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hdOjpTaG93KAoJCQkJW1Bvd2VyU2hlbGxUeXBlRXh0ZW5zaW9ucy5XaW4zMldpbmRvd106OkN1cnJlbnRXaW5kb3csCgkJCQkkVGV4dCwKCQkJCSRDYXB0aW9uLAoJCQkJJEJ1dHRvbnMsCgkJCQkkSWNvbiwKCQkJCSREZWZhdWx0QnV0dG9uLAoJCQkJJE9wdGlvbnMKCQkJKQoJCX0gZWxzZWlmICgkQnV0dG9ucyAtbmUgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6T0spIHsKCQkJW1N5c3RlbS5JbnQzMl0kZGVmYXVsdENob2ljZSA9IChbU3lzdGVtLkludDMyXSREZWZhdWx0QnV0dG9uKSAvIDI1NgoJCQlbU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5Ib3N0LkNob2ljZURlc2NyaXB0aW9uW11dJGNob2ljZXMgPSBAKCkKCQkJW1N5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGVdJHJlc3VsdE1hcCA9IEB7fQoJCQlpZiAoJEJ1dHRvbnMgLWVxIFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5NZXNzYWdlQm94QnV0dG9uc106OkFib3J0UmV0cnlJZ25vcmUpIHsKCQkJCSRjaG9pY2VzID0gQCgnQWJvcnQnLCdSZXRyeScsJ0lnbm9yZScpCgkJCQkkcmVzdWx0TWFwID0gQHsKCQkJCQkwID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkRpYWxvZ1Jlc3VsdF06OkFib3J0CgkJCQkJMSA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpSZXRyeQoJCQkJCTIgPSBbU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0XTo6SWdub3JlCgkJCQl9CgkJCX0gZWxzZWlmICgkQnV0dG9ucyAtZXEgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6T0tDYW5jZWwpIHsKCQkJCSRjaG9pY2VzID0gQCgnT0snLCdDYW5jZWwnKQoJCQkJJHJlc3VsdE1hcCA9IEB7CgkJCQkJMCA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpPSwoJCQkJCTEgPSBbU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0XTo6Q2FuY2VsCgkJCQl9CgkJCX0gZWxzZWlmICgkQnV0dG9ucyAtZXEgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6UmV0cnlDYW5jZWwpIHsKCQkJCSRjaG9pY2VzID0gQCgnUmV0cnknLCdDYW5jZWwnKQoJCQkJJHJlc3VsdE1hcCA9IEB7CgkJCQkJMCA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpSZXRyeQoJCQkJCTEgPSBbU3lzdGVtLldpbmRvd3MuRm9ybXMuRGlhbG9nUmVzdWx0XTo6Q2FuY2VsCgkJCQl9CgkJCX0gZWxzZWlmICgkQnV0dG9ucyAtZXEgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6WWVzTm8pIHsKCQkJCSRjaG9pY2VzID0gQCgnWWVzJywnTm8nKQoJCQkJJHJlc3VsdE1hcCA9IEB7CgkJCQkJMCA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpZZXMKCQkJCQkxID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkRpYWxvZ1Jlc3VsdF06Ok5vCgkJCQl9CgkJCX0gZWxzZWlmICgkQnV0dG9ucyAtZXEgW1N5c3RlbS5XaW5kb3dzLkZvcm1zLk1lc3NhZ2VCb3hCdXR0b25zXTo6WWVzTm9DYW5jZWwpIHsKCQkJCSRjaG9pY2VzID0gQCgnWWVzJywnTm8nLCdDYW5jZWwnKQoJCQkJJHJlc3VsdE1hcCA9IEB7CgkJCQkJMCA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpZZXMKCQkJCQkxID0gW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkRpYWxvZ1Jlc3VsdF06Ok5vCgkJCQkJMiA9IFtTeXN0ZW0uV2luZG93cy5Gb3Jtcy5EaWFsb2dSZXN1bHRdOjpDYW5jZWwKCQkJCX0KCQkJfQoJCQlpZiAoLW5vdCAkcmVzdWx0TWFwLkNvbnRhaW5zS2V5KCRkZWZhdWx0Q2hvaWNlKSkgewoJCQkJJGRlZmF1bHRDaG9pY2UgPSAwCgkJCX0KCQkJJHJlc3VsdCA9ICRIb3N0LlVJLlByb21wdEZvckNob2ljZSgkQ2FwdGlvbiwkVGV4dCwkY2hvaWNlcywkZGVmYXVsdENob2ljZSkKCQkJJHJlc3VsdE1hcFskcmVzdWx0XQoJCX0gZWxzZSB7CgkJCVdyaXRlLUhvc3QgJFRleHQKCQkJW1N5c3RlbS5XaW5kb3dzLkZvcm1zLkRpYWxvZ1Jlc3VsdF06Ok9LCgkJfQoJfQoJY2F0Y2ggewoJCXRocm93Cgl9Cn0KCiNlbmRyZWdpb24KI3JlZ2lvbiBDb3JlIFV0aWxpdHkgRnVuY3Rpb25zCgpmdW5jdGlvbiBnbG9iYWw6R2V0LVBTUmVzb3VyY2VTdHJpbmcgewoJcGFyYW0oCgkJW3N0cmluZ10kQmFzZU5hbWUgPSAkbnVsbCwKCQlbc3RyaW5nXSRSZXNvdXJjZUlkID0gJG51bGwsCgkJW3N0cmluZ10kRGVmYXVsdFZhbHVlID0gJG51bGwsCgkJW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXSRDdWx0dXJlID0gJGhvc3QuQ3VycmVudEN1bHR1cmUsCgkJW1N3aXRjaF0kTGlzdAoJKQoKCWlmICgkTGlzdCAtYW5kICgkUmVzb3VyY2VJZCAtb3IgJERlZmF1bHRWYWx1ZSkpIHsKCQl0aHJvdyAkKEdldC1QU1Jlc291cmNlU3RyaW5nIC1CYXNlTmFtZSAnUGFyYW1ldGVyQmluZGVyU3RyaW5ncycgLVJlc291cmNlSWQgJ0FtYmlndW91c1BhcmFtZXRlclNldCcpCgl9CgoJaWYgKCRMaXN0KSB7CgkJJGVuZ2luZUFzc2VtYmx5ID0gW1N5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5XTo6R2V0RXhlY3V0aW5nQXNzZW1ibHkoKQoJCSRob3N0QXNzZW1ibHkgPSBbU3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHldOjpMb2FkV2l0aFBhcnRpYWxOYW1lKCdNaWNyb3NvZnQuUG93ZXJTaGVsbC5Db25zb2xlSG9zdCcpCgkJaWYgKCRCYXNlTmFtZSkgewoJCQkkZW5naW5lQXNzZW1ibHkuR2V0TWFuaWZlc3RSZXNvdXJjZU5hbWVzKCkgfCBXaGVyZS1PYmplY3QgeyAkXyAtZXEgIiRCYXNlTmFtZS5yZXNvdXJjZXMiIH0gfCBGb3JFYWNoLU9iamVjdCB7CgkJCQkkcmVzb3VyY2VNYW5hZ2VyID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgU3lzdGVtLlJlc291cmNlcy5SZXNvdXJjZU1hbmFnZXIoJEJhc2VOYW1lLCAkZW5naW5lQXNzZW1ibHkpCgkJCQkkcmVzb3VyY2VNYW5hZ2VyLkdldFJlc291cmNlU2V0KCRob3N0LkN1cnJlbnRDdWx0dXJlLCR0cnVlLCR0cnVlKSB8IEFkZC1NZW1iZXIgLU5hbWUgQmFzZU5hbWUgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1WYWx1ZSAkQmFzZU5hbWUgLUZvcmNlIC1QYXNzVGhydSB8IEZvckVhY2gtT2JqZWN0IHsKCQkJCQkkXy5QU09iamVjdC5UeXBlTmFtZXMuQ2xlYXIoKQoJCQkJCSRfLlBTT2JqZWN0LlR5cGVOYW1lcy5BZGQoJ1Jlc291cmNlU3RyaW5nJykKCQkJCQkkXyB8IFdyaXRlLU91dHB1dAoJCQkJfQoJCQl9CgkJCSRob3N0QXNzZW1ibHkuR2V0TWFuaWZlc3RSZXNvdXJjZU5hbWVzKCkgfCBXaGVyZS1PYmplY3QgeyAkXyAtZXEgIiRCYXNlTmFtZS5yZXNvdXJjZXMiIH0gfCBGb3JFYWNoLU9iamVjdCB7CgkJCQkkcmVzb3VyY2VNYW5hZ2VyID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgU3lzdGVtLlJlc291cmNlcy5SZXNvdXJjZU1hbmFnZXIoJEJhc2VOYW1lLCAkaG9zdEFzc2VtYmx5KQoJCQkJJHJlc291cmNlTWFuYWdlci5HZXRSZXNvdXJjZVNldCgkaG9zdC5DdXJyZW50Q3VsdHVyZSwkdHJ1ZSwkdHJ1ZSkgfCBBZGQtTWVtYmVyIC1OYW1lIEJhc2VOYW1lIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtVmFsdWUgJEJhc2VOYW1lIC1Gb3JjZSAtUGFzc1RocnUgfCBGb3JFYWNoLU9iamVjdCB7CgkJCQkJJF8uUFNPYmplY3QuVHlwZU5hbWVzLkNsZWFyKCkKCQkJCQkkXy5QU09iamVjdC5UeXBlTmFtZXMuQWRkKCdSZXNvdXJjZVN0cmluZycpCgkJCQkJJF8gfCBXcml0ZS1PdXRwdXQKCQkJCX0KCQkJfQoJCX0gZWxzZSB7CgkJCSRlbmdpbmVBc3NlbWJseS5HZXRNYW5pZmVzdFJlc291cmNlTmFtZXMoKSB8IFdoZXJlLU9iamVjdCB7ICRfIC1tYXRjaCAnXC5yZXNvdXJjZXMkJyB9IHwgRm9yRWFjaC1PYmplY3QgeyAkXy5SZXBsYWNlKCcucmVzb3VyY2VzJywnJykgfQoJCQkkaG9zdEFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VOYW1lcygpIHwgV2hlcmUtT2JqZWN0IHsgJF8gLW1hdGNoICdcLnJlc291cmNlcyQnIH0gfCBGb3JFYWNoLU9iamVjdCB7ICRfLlJlcGxhY2UoJy5yZXNvdXJjZXMnLCcnKSB9CgkJfQoJfSBlbHNlIHsKCQlpZiAoLW5vdCAkQmFzZU5hbWUpIHsKCQkJdGhyb3cgJCgkKEdldC1QU1Jlc291cmNlU3RyaW5nIC1CYXNlTmFtZSAnUGFyYW1ldGVyQmluZGVyU3RyaW5ncycgLVJlc291cmNlSWQgJ1BhcmFtZXRlckFyZ3VtZW50VmFsaWRhdGlvbkVycm9yTnVsbE5vdEFsbG93ZWQnKSAtZiAkbnVsbCwnQmFzZU5hbWUnKQoJCX0KCQlpZiAoLW5vdCAkUmVzb3VyY2VJZCkgewoJCQl0aHJvdyAkKCQoR2V0LVBTUmVzb3VyY2VTdHJpbmcgLUJhc2VOYW1lICdQYXJhbWV0ZXJCaW5kZXJTdHJpbmdzJyAtUmVzb3VyY2VJZCAnUGFyYW1ldGVyQXJndW1lbnRWYWxpZGF0aW9uRXJyb3JOdWxsTm90QWxsb3dlZCcpIC1mICRudWxsLCdSZXNvdXJjZUlkJykKCQl9CgkJaWYgKC1ub3QgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUpIHsKCQkJJGVuZ2luZUFzc2VtYmx5ID0gW1N5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5XTo6R2V0RXhlY3V0aW5nQXNzZW1ibHkoKQoJCQkkaG9zdEFzc2VtYmx5ID0gW1N5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5XTo6TG9hZFdpdGhQYXJ0aWFsTmFtZSgnTWljcm9zb2Z0LlBvd2VyU2hlbGwuQ29uc29sZUhvc3QnKQoJCQlpZiAoJGVuZ2luZUFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VOYW1lcygpIC1jb250YWlucyAiJEJhc2VOYW1lLnJlc291cmNlcyIpIHsKCQkJCU5ldy1WYXJpYWJsZSAtU2NvcGUgR2xvYmFsIC1OYW1lIFBTUmVzb3VyY2VTdHJpbmdUYWJsZSAtVmFsdWUgQHt9IC1EZXNjcmlwdGlvbiAnQSBjYWNoZSBvZiBQb3dlclNoZWxsIHJlc291cmNlIHN0cmluZ3MuIFRvIGFjY2VzcyBkYXRhIGluIHRoaXMgdGFibGUsIHVzZSBHZXQtUmVzb3VyY2VTdHJpbmcuJwoJCQkJJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGVbJ0VuZ2luZUFzc2VtYmx5J10gPSBAeydBc3NlbWJseSc9JGVuZ2luZUFzc2VtYmx5OydDdWx0dXJlcyc9QHt9fQoJCQkJJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGVbJ0hvc3RBc3NlbWJseSddID0gQHsnQXNzZW1ibHknPSRob3N0QXNzZW1ibHk7J0N1bHR1cmVzJz1Ae319CgkJCQkkcmVzb3VyY2VNYW5hZ2VyID0gKE5ldy1PYmplY3QgLVR5cGVOYW1lIFN5c3RlbS5SZXNvdXJjZXMuUmVzb3VyY2VNYW5hZ2VyKCRCYXNlTmFtZSwgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuRW5naW5lQXNzZW1ibHkuQXNzZW1ibHkpKTsKCQkJCSRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkVuZ2luZUFzc2VtYmx5LkN1bHR1cmVzWyRDdWx0dXJlLk5hbWVdID0gQHskQmFzZU5hbWU9QHsnUmVzb3VyY2VNYW5hZ2VyJz0kcmVzb3VyY2VNYW5hZ2VyOydTdHJpbmdzJz0kcmVzb3VyY2VNYW5hZ2VyLkdldFJlc291cmNlU2V0KCRDdWx0dXJlLCR0cnVlLCR0cnVlKX19OwoJCQl9IGVsc2VpZiAoJGhvc3RBc3NlbWJseS5HZXRNYW5pZmVzdFJlc291cmNlTmFtZXMoKSAtY29udGFpbnMgIiRCYXNlTmFtZS5yZXNvdXJjZXMiKSB7CgkJCQlOZXctVmFyaWFibGUgLVNjb3BlIEdsb2JhbCAtTmFtZSBQU1Jlc291cmNlU3RyaW5nVGFibGUgLVZhbHVlIEB7fSAtRGVzY3JpcHRpb24gJ0EgY2FjaGUgb2YgUG93ZXJTaGVsbCByZXNvdXJjZSBzdHJpbmdzLiBUbyBhY2Nlc3MgZGF0YSBpbiB0aGlzIHRhYmxlLCB1c2UgR2V0LVJlc291cmNlU3RyaW5nLicKCQkJCSRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlWydFbmdpbmVBc3NlbWJseSddID0gQHsnQXNzZW1ibHknPSRlbmdpbmVBc3NlbWJseTsnQ3VsdHVyZXMnPUB7fX0KCQkJCSRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlWydIb3N0QXNzZW1ibHknXSA9IEB7J0Fzc2VtYmx5Jz0kaG9zdEFzc2VtYmx5OydDdWx0dXJlcyc9QHt9fQoJCQkJJHJlc291cmNlTWFuYWdlciA9IChOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uUmVzb3VyY2VzLlJlc291cmNlTWFuYWdlcigkQmFzZU5hbWUsICRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkhvc3RBc3NlbWJseS5Bc3NlbWJseSkpOwoJCQkkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5Ib3N0QXNzZW1ibHkuQ3VsdHVyZXNbJEN1bHR1cmUuTmFtZV0gPSBAeyRCYXNlTmFtZT1AeydSZXNvdXJjZU1hbmFnZXInPSRyZXNvdXJjZU1hbmFnZXI7J1N0cmluZ3MnPSRyZXNvdXJjZU1hbmFnZXIuR2V0UmVzb3VyY2VTZXQoJEN1bHR1cmUsJHRydWUsJHRydWUpfX07CgkJCX0KCQl9IGVsc2VpZiAoJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuRW5naW5lQXNzZW1ibHkuQXNzZW1ibHkuR2V0TWFuaWZlc3RSZXNvdXJjZU5hbWVzKCkgLWNvbnRhaW5zICIkQmFzZU5hbWUucmVzb3VyY2VzIikgewoJCQlpZiAoLW5vdCAkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5FbmdpbmVBc3NlbWJseS5DdWx0dXJlcy5Db250YWluc0tleSgkQ3VsdHVyZS5OYW1lKSkgewoJCQkJJHJlc291cmNlTWFuYWdlciA9IChOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uUmVzb3VyY2VzLlJlc291cmNlTWFuYWdlcigkQmFzZU5hbWUsICRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkVuZ2luZUFzc2VtYmx5LkFzc2VtYmx5KSk7CgkJCQkkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5FbmdpbmVBc3NlbWJseS5DdWx0dXJlc1skQ3VsdHVyZS5OYW1lXSA9IEB7JEJhc2VOYW1lPUB7J1Jlc291cmNlTWFuYWdlcic9JHJlc291cmNlTWFuYWdlcjsnU3RyaW5ncyc9JHJlc291cmNlTWFuYWdlci5HZXRSZXNvdXJjZVNldCgkQ3VsdHVyZSwkdHJ1ZSwkdHJ1ZSl9fTsKCQkJfSBlbHNlaWYgKC1ub3QgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuRW5naW5lQXNzZW1ibHkuQ3VsdHVyZXNbJEN1bHR1cmUuTmFtZV0uQ29udGFpbnNLZXkoJEJhc2VOYW1lKSkgewoJCQkJJHJlc291cmNlTWFuYWdlciA9IChOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uUmVzb3VyY2VzLlJlc291cmNlTWFuYWdlcigkQmFzZU5hbWUsICRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkVuZ2luZUFzc2VtYmx5LkFzc2VtYmx5KSk7CgkJCQkkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5FbmdpbmVBc3NlbWJseS5DdWx0dXJlc1skQ3VsdHVyZS5OYW1lXVskQmFzZU5hbWVdID0gQHsnUmVzb3VyY2VNYW5hZ2VyJz0kcmVzb3VyY2VNYW5hZ2VyOydTdHJpbmdzJz0kcmVzb3VyY2VNYW5hZ2VyLkdldFJlc291cmNlU2V0KCRDdWx0dXJlLCR0cnVlLCR0cnVlKX07CgkJCX0KCQl9IGVsc2VpZiAoJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkFzc2VtYmx5LkdldE1hbmlmZXN0UmVzb3VyY2VOYW1lcygpIC1jb250YWlucyAiJEJhc2VOYW1lLnJlc291cmNlcyIpIHsKCQkJaWYgKC1ub3QgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkN1bHR1cmVzLkNvbnRhaW5zS2V5KCRDdWx0dXJlLk5hbWUpKSB7CgkJCQkkcmVzb3VyY2VNYW5hZ2VyID0gKE5ldy1PYmplY3QgLVR5cGVOYW1lIFN5c3RlbS5SZXNvdXJjZXMuUmVzb3VyY2VNYW5hZ2VyKCRCYXNlTmFtZSwgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkFzc2VtYmx5KSk7CgkJCQkkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5Ib3N0QXNzZW1ibHkuQ3VsdHVyZXNbJEN1bHR1cmUuTmFtZV0gPSBAeyRCYXNlTmFtZT1AeydSZXNvdXJjZU1hbmFnZXInPSRyZXNvdXJjZU1hbmFnZXI7J1N0cmluZ3MnPSRyZXNvdXJjZU1hbmFnZXIuR2V0UmVzb3VyY2VTZXQoJEN1bHR1cmUsJHRydWUsJHRydWUpfX07CgkJCX0gZWxzZWlmICgtbm90ICRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkhvc3RBc3NlbWJseS5DdWx0dXJlc1skQ3VsdHVyZS5OYW1lXS5Db250YWluc0tleSgkQmFzZU5hbWUpKSB7CgkJCQkkcmVzb3VyY2VNYW5hZ2VyID0gKE5ldy1PYmplY3QgLVR5cGVOYW1lIFN5c3RlbS5SZXNvdXJjZXMuUmVzb3VyY2VNYW5hZ2VyKCRCYXNlTmFtZSwgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkFzc2VtYmx5KSk7CgkJCQkkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5Ib3N0QXNzZW1ibHkuQ3VsdHVyZXNbJEN1bHR1cmUuTmFtZV1bJEJhc2VOYW1lXSA9IEB7J1Jlc291cmNlTWFuYWdlcic9JHJlc291cmNlTWFuYWdlcjsnU3RyaW5ncyc9JHJlc291cmNlTWFuYWdlci5HZXRSZXNvdXJjZVNldCgkQ3VsdHVyZSwkdHJ1ZSwkdHJ1ZSl9OwoJCQl9CgkJfQoKCQkkcmVzb3VyY2VTdHJpbmcgPSAkbnVsbAoJCWlmICgkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZSkgewoJCQlpZiAoJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuRW5naW5lQXNzZW1ibHkuQ3VsdHVyZXMgLWFuZCAkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5FbmdpbmVBc3NlbWJseS5DdWx0dXJlcy5Db250YWluc0tleSgkQ3VsdHVyZS5OYW1lKSAtYW5kICRnbG9iYWw6UFNSZXNvdXJjZVN0cmluZ1RhYmxlLkVuZ2luZUFzc2VtYmx5LkN1bHR1cmVzWyRDdWx0dXJlLk5hbWVdLkNvbnRhaW5zS2V5KCRCYXNlTmFtZSkpIHsKCQkJCSRyZXNvdXJjZVN0cmluZyA9ICgkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5FbmdpbmVBc3NlbWJseS5DdWx0dXJlc1skQ3VsdHVyZS5OYW1lXVskQmFzZU5hbWVdLlN0cmluZ3MgfCBXaGVyZS1PYmplY3QgeyAkXy5OYW1lIC1lcSAkUmVzb3VyY2VJZCB9KS5WYWx1ZQoJCQl9IGVsc2VpZiAoJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkN1bHR1cmVzIC1hbmQgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkN1bHR1cmVzLkNvbnRhaW5zS2V5KCRDdWx0dXJlLk5hbWUpIC1hbmQgJGdsb2JhbDpQU1Jlc291cmNlU3RyaW5nVGFibGUuSG9zdEFzc2VtYmx5LkN1bHR1cmVzWyRDdWx0dXJlLk5hbWVdLkNvbnRhaW5zS2V5KCRCYXNlTmFtZSkpIHsKCQkJCSRyZXNvdXJjZVN0cmluZyA9ICgkZ2xvYmFsOlBTUmVzb3VyY2VTdHJpbmdUYWJsZS5Ib3N0QXNzZW1ibHkuQ3VsdHVyZXNbJEN1bHR1cmUuTmFtZV1bJEJhc2VOYW1lXS5TdHJpbmdzIHwgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtZXEgJFJlc291cmNlSWQgfSkuVmFsdWUKCQkJfQoJCX0KCQlpZiAoLW5vdCAkcmVzb3VyY2VTdHJpbmcpIHsKCQkJJHJlc291cmNlU3RyaW5nID0gJERlZmF1bHRWYWx1ZQoJCX0KCQkKCQlyZXR1cm4gJHJlc291cmNlU3RyaW5nCgl9Cn0KCmZ1bmN0aW9uIGdsb2JhbDpOZXctRW51bSB7CglwYXJhbSgKCQlbc3RyaW5nXSROYW1lID0gJG51bGwsCgkJW3N0cmluZ10kQXNzZW1ibHlOYW1lID0gJG51bGwsCgkJW1N5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNPYmplY3RdJFZhbHVlcyA9ICRudWxsCgkpCgoJJGludGVybmFsU2NyaXB0ID0gewoJCXBhcmFtKAoJCQlbc3RyaW5nXSROYW1lID0gJG51bGwsCgkJCVtzdHJpbmddJEFzc2VtYmx5TmFtZSA9ICRudWxsLAoJCQlbU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU09iamVjdF0kVmFsdWVzID0gJG51bGwKCQkpCgoJCSRwcm9tcHRlZEZvclJlcXVpcmVkUGFyYW1ldGVycyA9ICRmYWxzZQoJCWlmICgoLW5vdCAkcHJvbXB0ZWRGb3JSZXF1aXJlZFBhcmFtZXRlcnMpIC1hbmQgKCgtbm90ICROYW1lKSAtb3IgKCgtbm90ICRWYWx1ZXMpIC1hbmQgKC1ub3QgJFZhbHVlcy5Db3VudCkgLWFuZCAoLW5vdCAkVmFsdWVzLktleXMuQ291bnQpKSkpIHsKCQkJJHByb21wdGVkRm9yUmVxdWlyZWRQYXJhbWV0ZXJzID0gJHRydWUKCQkJV3JpdGUtSG9zdCAtRm9yZWdyb3VuZENvbG9yIFdoaXRlIC1PYmplY3QgKChHZXQtUFNSZXNvdXJjZVN0cmluZyAtQmFzZU5hbWUgUGFyYW1ldGVyQmluZGVyU3RyaW5ncyAtUmVzb3VyY2VJZCBQcm9tcHRDYXB0aW9uKSAtZiAnTmV3LUVudW0nLCRNeUludm9jYXRpb24uUGlwZWxpbmVQb3NpdGlvbikKCQkJV3JpdGUtSG9zdCAoR2V0LVBTUmVzb3VyY2VTdHJpbmcgLUJhc2VOYW1lIC1SZXNvdXJjZUlkIFByb21wdE1lc3NhZ2UpCgkJCWlmICgtbm90ICROYW1lKSB7CgkJCQlpZiAoJHJlc3VsdCA9IFJlYWQtSG9zdCAtUHJvbXB0ICdOYW1lJykgewoJCQkJCSROYW1lID0gJHJlc3VsdAoJCQkJfSBlbHNlIHsKCQkJCQlyZXR1cm4KCQkJCX0KCQkJfQoJCQlpZiAoLW5vdCAkVmFsdWVzKSB7CgkJCQkkaW5kZXggPSAwCgkJCQkkVmFsdWVzID0gQCgpCgkJCQl3aGlsZSAoJHJlc3VsdCA9IFJlYWQtSG9zdCAtUHJvbXB0ICJWYWx1ZXNbJGluZGV4XSIpIHsKCQkJCQkkaW5kZXgrKwoJCQkJCSRWYWx1ZXMgKz0gJHJlc3VsdAoJCQkJfQoJCQkJaWYgKC1ub3QgJFZhbHVlcykgewoJCQkJCXJldHVybgoJCQkJfQoJCQl9CgkJfQoKCQkkYXBwZG9tYWluID0gW1N5c3RlbS5UaHJlYWRpbmcuVGhyZWFkXTo6R2V0RG9tYWluKCkKCQkkYXNzZW1ibHkgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUKCQlpZiAoJEFzc2VtYmx5TmFtZSkgewoJCQkkYXNzZW1ibHkuTmFtZSA9ICRBc3NlbWJseU5hbWUKCQkJJE5hbWUgPSAiJEFzc2VtYmx5TmFtZS4kTmFtZSIKCQl9IGVsc2UgewoJCQkkYXNzZW1ibHkuTmFtZSA9ICdEeW5hbWljYWxseUNyZWF0ZWRFbnVtJwoJCX0KCgkJJGFzc2VtYmx5QnVpbGRlciA9ICRhcHBkb21haW4uRGVmaW5lRHluYW1pY0Fzc2VtYmx5KAoJCQkkYXNzZW1ibHksCgkJCVtTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkFzc2VtYmx5QnVpbGRlckFjY2Vzc106OlNhdmUgLWJvciBbU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5Bc3NlbWJseUJ1aWxkZXJBY2Nlc3NdOjpSdW4KCQkpCgoJCSRtb2R1bGVCdWlsZGVyID0gJGFzc2VtYmx5QnVpbGRlci5EZWZpbmVEeW5hbWljTW9kdWxlKCJEeW5hbWljTW9kdWxlIiwgIkR5bmFtaWNNb2R1bGUubW9kIikKCgkJJGVudW1CdWlsZGVyID0gJG1vZHVsZUJ1aWxkZXIuRGVmaW5lRW51bSgkTmFtZSwgW1N5c3RlbS5SZWZsZWN0aW9uLlR5cGVBdHRyaWJ1dGVzXTo6UHVibGljLCBbaW50MzJdKQoKCQlpZiAoKCRWYWx1ZXMgLWlzIFtzdHJpbmddKSAtb3IgKCRWYWx1ZXMgLWlzIFthcnJheV0pKSB7CgkJCSRWYWx1ZXMgPSBAKCRWYWx1ZXMpICsgJGFyZ3MKCQkJZm9yICgkaSA9IDA7ICRpIC1sdCAkVmFsdWVzLkxlbmd0aDsgJGkrKykgewoJCQkJJGVudW1CdWlsZGVyLkRlZmluZUxpdGVyYWwoJFZhbHVlc1skaV0sJGkpIHwgT3V0LU51bGwKCQkJfQoJCX0gZWxzZWlmICgkVmFsdWVzIC1pcyBbU3lzdGVtLkNvbGxlY3Rpb25zLkhhc2h0YWJsZV0pIHsKCQkJZm9yZWFjaCAoJGtleSBpbiAkVmFsdWVzLktleXMpIHsKCQkJCSRlbnVtQnVpbGRlci5EZWZpbmVMaXRlcmFsKCRrZXksJFZhbHVlc1ska2V5XSkgfCBPdXQtTnVsbAoJCQl9CgkJfQoKCQkkZW51bUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgl9CgoJI3JlZ2lvbiBFeHRyYSBzY3JpcHQgdG8gd29ya2Fyb3VuZCBQb3dlclNoZWxsIHYyIGRlZmVjdC4KCSRwYXNzVGhydUFyZ3MgPSAkYXJncwoJJHRyYWlsaW5nQXJndW1lbnRzID0gJycKCWZvciAoJGluZGV4ID0gMDsgJGluZGV4IC1sdCAkcGFzc1RocnVBcmdzLkNvdW50OyAkaW5kZXgrKykgewoJCSR0cmFpbGluZ0FyZ3VtZW50cyArPSAiIGAkcGFzc1RocnVBcmdzWyRpbmRleF0iCgl9CglJbnZva2UtRXhwcmVzc2lvbiAiJiBgJGludGVybmFsU2NyaXB0IC1OYW1lIGAkTmFtZSAtQXNzZW1ibHlOYW1lIGAkQXNzZW1ibHlOYW1lIC1WYWx1ZXMgYCRWYWx1ZXMkdHJhaWxpbmdBcmd1bWVudHMgfCBPdXQtTnVsbCIKCUludm9rZS1FeHByZXNzaW9uICImIGAkaW50ZXJuYWxTY3JpcHQgLU5hbWUgYCROYW1lIC1Bc3NlbWJseU5hbWUgYCRBc3NlbWJseU5hbWUgLVZhbHVlcyBgJFZhbHVlcyR0cmFpbGluZ0FyZ3VtZW50cyIKCSNlbmRyZWdpb24KfQoKI2VuZHJlZ2lvbgojcmVnaW9uIFJlYWQgSW5wdXQgRnVuY3Rpb25zCgpmdW5jdGlvbiBnbG9iYWw6TmV3LUNob2ljZURlc2NyaXB0aW9uIHsKCXBhcmFtKAoJCVtzdHJpbmddJE5hbWUsCgkJW3N0cmluZ10kSGVscE1lc3NhZ2UgPSAkbnVsbAoJKQoKCSRjaG9pY2VEZXNjcmlwdGlvbiA9IFtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLkhvc3QuQ2hvaWNlRGVzY3JpcHRpb25dJE5hbWUKCSRjaG9pY2VEZXNjcmlwdGlvbi5IZWxwTWVzc2FnZSA9ICRIZWxwTWVzc2FnZQoKCSRjaG9pY2VEZXNjcmlwdGlvbgp9CgpmdW5jdGlvbiBnbG9iYWw6UmVhZC1DaG9pY2UgewoJcGFyYW0oCgkJW3N0cmluZ10kQ2FwdGlvbiwKCQlbc3RyaW5nXSRNZXNzYWdlLAoJCVtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLkhvc3QuQ2hvaWNlRGVzY3JpcHRpb25bXV0kQ2hvaWNlRGVzY3JpcHRpb24sCgkJW2ludF0kRGVmYXVsdENob2ljZSA9IDAKCSkKCgkkaG9zdC51aS5Qcm9tcHRGb3JDaG9pY2UoJENhcHRpb24sJE1lc3NhZ2UsJENob2ljZURlc2NyaXB0aW9uLCREZWZhdWx0Q2hvaWNlKQp9CgpmdW5jdGlvbiBnbG9iYWw6TmV3LUZpZWxkRGVzY3JpcHRpb24gewoJcGFyYW0oCgkJW3N0cmluZ10kTmFtZSwKCQlbc3RyaW5nXSRIZWxwTWVzc2FnZSA9ICRudWxsLAoJCVtUeXBlXSRUeXBlID0gJ1N5c3RlbS5TdHJpbmcnLAoJCVtQU09iamVjdF0kRGVmYXVsdFZhbHVlID0gJG51bGwsCgkJW2Jvb2xdJElzTWFuZGF0b3J5ID0gJGZhbHNlCgkpCgoJJGZpZWxkRGVzY3JpcHRpb24gPSBbU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5Ib3N0LkZpZWxkRGVzY3JpcHRpb25dJE5hbWUKCSRmaWVsZERlc2NyaXB0aW9uLlNldFBhcmFtZXRlclR5cGUoW1R5cGVdJFR5cGUpCgkkZmllbGREZXNjcmlwdGlvbi5EZWZhdWx0VmFsdWUgPSAkRGVmYXVsdFZhbHVlCgkkZmllbGREZXNjcmlwdGlvbi5IZWxwTWVzc2FnZSA9ICRIZWxwTWVzc2FnZQoJJGZpZWxkRGVzY3JpcHRpb24uSXNNYW5kYXRvcnkgPSAkSXNNYW5kYXRvcnkKCgkkZmllbGREZXNjcmlwdGlvbgp9CgpmdW5jdGlvbiBnbG9iYWw6UmVhZC1JbnB1dCB7CglwYXJhbSgKCQlbc3RyaW5nXSRDYXB0aW9uLAoJCVtzdHJpbmddJE1lc3NhZ2UsCgkJW1N5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uSG9zdC5GaWVsZERlc2NyaXB0aW9uW11dJEZpZWxkRGVzY3JpcHRpb24KCSkKCgkkaG9zdC51aS5Qcm9tcHQoJENhcHRpb24sJE1lc3NhZ2UsJEZpZWxkRGVzY3JpcHRpb24pCn0KCmZ1bmN0aW9uIGdsb2JhbDpOZXctQ3JlZGVudGlhbCB7CglwYXJhbSgKCQlbc3RyaW5nXSRVc2VybmFtZSwKCQlbU3lzdGVtLlNlY3VyaXR5LlNlY3VyZVN0cmluZ10kUGFzc3dvcmQKCSkKCQoJTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCgkVXNlcm5hbWUsJFBhc3N3b3JkKQp9CgpmdW5jdGlvbiBnbG9iYWw6UmVhZC1DcmVkZW50aWFsIHsKCXBhcmFtKAoJCSRDcmVkZW50aWFsID0gJG51bGwKCSkKCglpZiAoJENyZWRlbnRpYWwgLWlzIFtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbF0pIHsKCQkkQ3JlZGVudGlhbAoJfSBlbHNlIHsKCQkkcmVzdWx0ID0gUmVhZC1JbnB1dCAnRW50ZXIgeW91ciBjcmVkZW50aWFscycgJ1BsZWFzZSBlbnRlciB5b3VyIGF1dGhlbnRpY2F0aW9uIGNyZWRlbnRpYWxzIGluIHRoZSBmaWVsZHMgcHJvdmlkZWQnIEAoKE5ldy1GaWVsZERlc2NyaXB0aW9uICdVc2VybmFtZScgJ1lvdXIgYWNjb3VudCB1c2VybmFtZScgJ1N5c3RlbS5TdHJpbmcnICRDcmVkZW50aWFsICR0cnVlKSwoTmV3LUZpZWxkRGVzY3JpcHRpb24gJ1Bhc3N3b3JkJyAnWW91ciBhY2NvdW50IHBhc3N3b3JkJyAnU3lzdGVtLlNlY3VyaXR5LlNlY3VyZVN0cmluZycgJG51bGwgJHRydWUpKQoJCWlmICgkcmVzdWx0LkNvdW50KSB7CgkJCU5ldy1DcmVkZW50aWFsIC1Vc2VybmFtZSAkcmVzdWx0WydVc2VybmFtZSddIC1QYXNzd29yZCAkcmVzdWx0WydQYXNzd29yZCddCgkJfQoJfQp9CgojZW5kcmVnaW9uCiNyZWdpb24gQWRtaW4gQ29uc29sZSBGdW5jdGlvbnMKCmZ1bmN0aW9uIGdsb2JhbDpHZXQtQWRtaW5Db25zb2xlTmFtZSB7CglpZiAoJEhvc3QuUHJpdmF0ZURhdGEuUHJvZHVjdFRpdGxlKSB7CgkJJEhvc3QuUHJpdmF0ZURhdGEuUHJvZHVjdFRpdGxlCgl9IGVsc2UgewoJCSRjdXJyZW50Tm9kZSA9ICRIb3N0LlByaXZhdGVEYXRhLkNvbnNvbGVIb3N0RmFjdG9yeS5BcHBsaWNhdGlvbi5OYXZpZ2F0aW9uLkN1cnJlbnRJdGVtCgkJd2hpbGUgKCRjdXJyZW50Tm9kZS5UeXBlIC1uZSAnUm9vdCcpIHsKCQkJJGN1cnJlbnROb2RlID0gJGN1cnJlbnROb2RlLlBhcmVudAoJCX0KCQkkY3VycmVudE5vZGUuTmFtZQoJfQp9CgpmdW5jdGlvbiBnbG9iYWw6R2V0LUFkbWluQ29uc29sZVZpZXdOYW1lIHsKCSRIb3N0LlByaXZhdGVEYXRhLkNvbnNvbGVIb3N0RmFjdG9yeS5BcHBsaWNhdGlvbi5OYXZpZ2F0aW9uLkxpbmtMYWJlbAp9CgojZW5kcmVnaW9uCiNyZWdpb24gSFRNTCBSZXBvcnQgRnVuY3Rpb25zCgpmdW5jdGlvbiBnbG9iYWw6TmV3LUh0bWxSZXBvcnQgewoJcGFyYW0oCgkJW3N0cmluZ10gICAgICAkVGl0bGUsCgkJW3N0cmluZ10gICAgICAkRmlsZW5hbWUgICAgPSAiJCgkZW52OlRFTVApXCQoaWYgKEdldC1JdGVtIC1QYXRoIEZ1bmN0aW9uOjpHZXQtQWRtaW5Db25zb2xlTmFtZSAtRXJyb3JhY3Rpb24gU2lsZW50bHlDb250aW51ZSkgeyhHZXQtQWRtaW5Db25zb2xlTmFtZSkgLXJlcGxhY2UgJ1tcc1xbXF1dJywnJ30gZWxzZSB7J1Bvd2VyU2hlbGwnfSlSZXBvcnRfJChHZXQtRGF0ZSAtRm9ybWF0IGhobW1zc19kZE1NeXl5eSkuaHRtIiwKCQlbc3dpdGNoXSAgICAgICRPcGVuRmlsZSwKCQlbc3dpdGNoXSAgICAgICRPcGVuRm9sZGVyLAoJCVtQU09iamVjdF0gICAgJENvbnRlbnQgICAgID0gJG51bGwKCSkKCVtzdHJpbmddICAgICAgICAgICAgICAgICAgICAgJHJlcG9ydENvbnRlbnRzID0gJG51bGwKCVtzdHJpbmddICAgICAgICAgICAgICAgICAgICAgJGh0bWwgICAgICAgICAgID0gJG51bGwKCVtzdHJpbmddICAgICAgICAgICAgICAgICAgICAgJGh0bUZpbGVQYXRoICAgID0gJG51bGwKCVtTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzc10gJHByb2Nlc3MgICAgICAgID0gJG51bGwKCglpZiAoJENvbnRlbnQpIHsKCQlpZiAoJENvbnRlbnQgLWlzIFtTY3JpcHRCbG9ja10pIHsKCQkJJiAkQ29udGVudCB8IEZvckVhY2gtT2JqZWN0IHsKCQkJCSRyZXBvcnRDb250ZW50cyArPSBbc3RyaW5nXSRfCgkJCX0KCQkJJHJlcG9ydENvbnRlbnRzLlRyaW0oImBuIikKCQl9IGVsc2UgewoJCQkkcmVwb3J0Q29udGVudHMgPSBbc3RyaW5nXSRDb250ZW50CgkJfQoJCSRyZXBvcnRDb250ZW50cyA9ICRyZXBvcnRDb250ZW50cy5UcmltKCkKCX0KCgkkaDJiYWNrZ3JvdW5kID0iI2FkMWMxOCIKCSRoM2JhY2tncm91bmQgPSAiI0FEQURBRCIKCQkJCglpZiAoR2V0LUl0ZW0gLVBhdGggRnVuY3Rpb246OkdldC1BZG1pbkNvbnNvbGVOYW1lIC1FcnJvcmFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB7IAoJCWlmICgoR2V0LUFkbWluQ29uc29sZU5hbWUpIC1tYXRjaCAiRWNvU2hlbGwiKSB7CgkJCSRoMmJhY2tncm91bmQgPSAiIzhEQzYzRiIKCQkJJGgzYmFja2dyb3VuZCA9ICIjQTVBNUE1IgoJCX0gCgl9CgkKCWZ1bmN0aW9uIEdldC1UYWJsZUNzc1NldHRpbmdzIHsKCQlwYXJhbSgKCQkJW3N0cmluZ10gJERpc3BsYXkgICAgPSAnbm9uZScsCgkJCVtVSW50MTZdICRMZWZ0SW5kZW50ID0gMTYsCgkJCVtzd2l0Y2hdICRGcmFtZQoJCSkKCQlAIgogICAgZGlzcGxheTogJERpc3BsYXk7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBjb2xvcjogIzAwMDAwMDsKJChpZiAoJEZyYW1lKSB7CglAJwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsKICAgIGJvcmRlci1sZWZ0OiAjYjFiYWJmIDFweCBzb2xpZDsKICAgIGJvcmRlci1yaWdodDogI2IxYmFiZiAxcHggc29saWQ7CiAgICBib3JkZXItdG9wOiAjYjFiYWJmIDFweCBzb2xpZDsKICAgIGJvcmRlci1ib3R0b206ICNiMWJhYmYgMXB4IHNvbGlkOwonQAp9KQogICAgcGFkZGluZy1sZWZ0OiAke0xlZnRJbmRlbnR9cHg7CiAgICBwYWRkaW5nLXRvcDogNHB4OwogICAgcGFkZGluZy1ib3R0b206IDVweDsKICAgIG1hcmdpbi1sZWZ0OiAwcHg7CiAgICBtYXJnaW4tcmlnaHQ6IDBweDsKICAgIG1hcmdpbi1ib3R0b206IDBweDsKIkAKCX0KCWZ1bmN0aW9uIEdldC1UYWJsZVRpdGxlQ3NzU2V0dGluZ3MgewoJCXBhcmFtKAoJCQlbc3RyaW5nXSAkQmFja2dyb3VuZENvbG9yID0gJyMwMDYxYmQnCgkJKQoJCUAiCiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGhlaWdodDogMmVtOwogICAgY29sb3I6ICNmZmZmZmY7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAkQmFja2dyb3VuZENvbG9yOwogICAgYm9yZGVyLWxlZnQ6ICNiMWJhYmYgMXB4IHNvbGlkOwogICAgYm9yZGVyLXJpZ2h0OiAjYjFiYWJmIDFweCBzb2xpZDsKICAgIGJvcmRlci10b3A6ICNiMWJhYmYgMXB4IHNvbGlkOwogICAgYm9yZGVyLWJvdHRvbTogI2IxYmFiZiAxcHggc29saWQ7CiAgICBwYWRkaW5nLWxlZnQ6IDVweDsKICAgIHBhZGRpbmctdG9wOiA4cHg7CiAgICBtYXJnaW4tbGVmdDogMHB4OwogICAgbWFyZ2luLXJpZ2h0OiAwcHg7CiAgICBmb250LWZhbWlseTogVGFob21hOwogICAgZm9udC1zaXplOiA4cHQ7CiAgICBmb250LXdlaWdodDogYm9sZDsKIkAKCX0KCWZ1bmN0aW9uIEdldC1TcGFuQ3NzU2V0dGluZ3MgewoJCUAiCiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGNvbG9yOiAjZmZmZmZmOwogICAgdG9wOiA4cHg7CiAgICBmb250LWZhbWlseTogVGFob21hOwogICAgZm9udC1zaXplOiA4cHQ7CiAgICBmb250LXdlaWdodDogYm9sZDsKICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwoiQAoJfQoJJGh0bWwgPSBAIgo8IURPQ1RZUEUgSFRNTCBQVUJMSUMgIi0vL1czQy8vRFREIEhUTUwgNC4wMSBGcmFtZXNldC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNC9mcmFtZXNldC5kdGQiPgo8aHRtbD4KPGhlYWQ+Cjx0aXRsZT4kVGl0bGU8L3RpdGxlPgo8bWV0YSBodHRwLWVxdWl2PUNvbnRlbnQtVHlwZSBjb250ZW50PSd0ZXh0L2h0bWw7IGNoYXJzZXQ9d2luZG93cy0xMjUyJz48L21ldGE+CjxtZXRhIG5hbWU9InNhdmUiIGNvbnRlbnQ9Imhpc3RvcnkiPjwvbWV0YT4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KYm9keSB7CiAgICBtYXJnaW4tbGVmdDogNHB0OwogICAgbWFyZ2luLXJpZ2h0OiA0cHQ7CiAgICBtYXJnaW4tdG9wOiA2cHQ7CiAgICBmb250LWZhbWlseTogVGFob21hOwogICAgZm9udC1zaXplOiA4cHQ7CiAgICBmb250LXdlaWdodDogbm9ybWFsOwp9CmgxIHsKJChHZXQtVGFibGVUaXRsZUNzc1NldHRpbmdzIC1CYWNrZ3JvdW5kQ29sb3IgJyMwMDYxYmQnKQp9CmgyIHsKJChHZXQtVGFibGVUaXRsZUNzc1NldHRpbmdzIC1CYWNrZ3JvdW5kQ29sb3IgJGgyYmFja2dyb3VuZCkKfQpoMyB7CiQoR2V0LVRhYmxlVGl0bGVDc3NTZXR0aW5ncyAtQmFja2dyb3VuZENvbG9yICRoM2JhY2tncm91bmQpCn0Kc3Bhbi5leHBhbmRhYmxlSGVhZGVyTGluayB7CiQoR2V0LVNwYW5Dc3NTZXR0aW5ncykKfQpzcGFuLmV4cGFuZGFibGVIZWFkZXJMaW5rUmlnaHRKdXN0aWZpZWQgewokKEdldC1TcGFuQ3NzU2V0dGluZ3MpCiAgICByaWdodDogOHB4Owp9CnRhYmxlIHsKICAgIHRhYmxlLWxheW91dDogZml4ZWQ7CiAgICBmb250LXNpemU6IDEwMCU7CiAgICB3aWR0aDogMTAwJTsKICAgIGNvbG9yOiAjMDAwMDAwOwp9CnRoIHsKICAgIGNvbG9yOiAjMDA2MWJkOwogICAgcGFkZGluZy10b3A6IDJweDsKICAgIHBhZGRpbmctYm90dG9tOiAycHg7CiAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wOwogICAgdGV4dC1hbGlnbjogbGVmdDsKfQp0ZCB7CiAgICBwYWRkaW5nLXRvcDogMnB4OwogICAgcGFkZGluZy1ib3R0b206IDJweDsKICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7Cn0KKnttYXJnaW46MH0KZGl2LnZpc2libGVTZWN0aW9uIHsKJChHZXQtVGFibGVDc3NTZXR0aW5ncyAtRGlzcGxheSAnYmxvY2snIC1GcmFtZSkKfQpkaXYuaGlkZGVuU2VjdGlvbiB7CiQoR2V0LVRhYmxlQ3NzU2V0dGluZ3MgLURpc3BsYXkgJ25vbmUnIC1GcmFtZSkKfQpkaXYudmlzaWJsZVNlY3Rpb25Ob0luZGVudCB7CiQoR2V0LVRhYmxlQ3NzU2V0dGluZ3MgLURpc3BsYXkgJ2Jsb2NrJyAtTGVmdEluZGVudCAwIC1GcmFtZSkKfQpkaXYuaGlkZGVuU2VjdGlvbk5vSW5kZW50IHsKJChHZXQtVGFibGVDc3NTZXR0aW5ncyAtRGlzcGxheSAnbm9uZScgLUxlZnRJbmRlbnQgMCAtRnJhbWUpCn0KZGl2LnZpc2libGVTZWN0aW9uTm9GcmFtZSB7CiQoR2V0LVRhYmxlQ3NzU2V0dGluZ3MgLURpc3BsYXkgJ2Jsb2NrJyAtTGVmdEluZGVudCAwKQp9CmRpdi5oaWRkZW5TZWN0aW9uTm9GcmFtZSB7CiQoR2V0LVRhYmxlQ3NzU2V0dGluZ3MgLURpc3BsYXkgJ25vbmUnIC1MZWZ0SW5kZW50IDApCn0KZGl2LmZpbGxlciB7CiAgICBkaXNwbGF5OiBibG9jazsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIGNvbG9yOiAjZmZmZmZmOwogICAgYmFja2dyb3VuZDogbm9uZSB0cmFuc3BhcmVudCBzY3JvbGwgcmVwZWF0IDAlIDAlOwogICAgYm9yZGVyLWxlZnQ6IG1lZGl1bSBub25lOwogICAgYm9yZGVyLXJpZ2h0OiBtZWRpdW0gbm9uZTsKICAgIGJvcmRlci10b3A6IG1lZGl1bSBub25lOwogICAgYm9yZGVyLWJvdHRvbTogbWVkaXVtIG5vbmU7CiAgICBwYWRkaW5nLXRvcDogNHB4OwogICAgbWFyZ2luLWxlZnQ6IDBweDsKICAgIG1hcmdpbi1yaWdodDogMHB4OwogICAgbWFyZ2luLWJvdHRvbTogLTFweDsKICAgIGZvbnQ6IDEwMCUvOHB4IFRhaG9tYTsKfQpkaXYuc2F2ZSB7CiAgICBiZWhhdmlvcjogdXJsKCNkZWZhdWx0I3NhdmVoaXN0b3J5KTsKfQo8L3N0eWxlPgo8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+CmZ1bmN0aW9uIHRvZ2dsZVZpc2liaWxpdHkodGFibGVIZWFkZXIpIHsKICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCkgewogICAgICAgIHZhciB0cmlnZ2VyTGFiZWwgPSB0YWJsZUhlYWRlci5maXJzdENoaWxkOwogICAgICAgIHdoaWxlICgodHJpZ2dlckxhYmVsKSAmJiAodHJpZ2dlckxhYmVsLmlubmVySFRNTCAhPSAnc2hvdycpICYmICh0cmlnZ2VyTGFiZWwuaW5uZXJIVE1MICE9ICdoaWRlJykpIHsKICAgICAgICAgICAgdHJpZ2dlckxhYmVsID0gdHJpZ2dlckxhYmVsLm5leHRTaWJsaW5nCiAgICAgICAgfQogICAgICAgIGlmICh0cmlnZ2VyTGFiZWwpIHsKICAgICAgICAgICAgdHJpZ2dlckxhYmVsLmlubmVySFRNTCA9ICh0cmlnZ2VyTGFiZWwuaW5uZXJIVE1MID09ICdoaWRlJyA/ICdzaG93JyA6ICdoaWRlJyk7CiAgICAgICAgICAgIGFzc29jaWF0ZWRUYWJsZSA9IHRhYmxlSGVhZGVyLm5leHRTaWJsaW5nCiAgICAgICAgICAgIHdoaWxlICgoYXNzb2NpYXRlZFRhYmxlKSAmJiAoIShhc3NvY2lhdGVkVGFibGUuc3R5bGUpKSkgewogICAgICAgICAgICAgICAgYXNzb2NpYXRlZFRhYmxlID0gYXNzb2NpYXRlZFRhYmxlLm5leHRTaWJsaW5nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGFzc29jaWF0ZWRUYWJsZSkgewogICAgICAgICAgICAgICAgYXNzb2NpYXRlZFRhYmxlLnN0eWxlLmRpc3BsYXkgPSAodHJpZ2dlckxhYmVsLmlubmVySFRNTCA9PSAnaGlkZScgPyAnYmxvY2snIDogJ25vbmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQppZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKSB7CiAgICBkb2N1bWVudC53cml0ZSgnPHN0eWxlIHR5cGU9InRleHQvY3NzIj5cbicrJ1x0ZGl2LmhpZGRlblNlY3Rpb24ge1xuXHRcdGRpc3BsYXk6YmxvY2s7XG5cdH1cbicrICc8L3N0eWxlPicpOwp9Cjwvc2NyaXB0Pgo8L2hlYWQ+Cjxib2R5Pgo8Yj48Zm9udCBmYWNlPSJBcmlhbCIgc2l6ZT0iNSI+JFRpdGxlPC9mb250PjwvYj4KPGhyIHNpemU9IjgiIGNvbG9yPSIjMDA2MWJkIj48L2hyPgo8Zm9udCBmYWNlPSJBcmlhbCIgc2l6ZT0iMSI+PGI+R2VuZXJhdGVkIHdpdGggJChpZiAoR2V0LUl0ZW0gLVBhdGggRnVuY3Rpb246OkdldC1BZG1pbkNvbnNvbGVOYW1lIC1FcnJvcmFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB7R2V0LUFkbWluQ29uc29sZU5hbWV9IGVsc2UgeydQb3dlclNoZWxsJ30pPC9iPjwvZm9udD4KPGJyIC8+Cjxmb250IGZhY2U9IkFyaWFsIiBzaXplPSIxIj5SZXBvcnQgY3JlYXRlZCBvbiAkKEdldC1EYXRlKTwvZm9udD4KPGRpdiBjbGFzcz0iZmlsbGVyIj48L2Rpdj4KPGRpdiBjbGFzcz0iZmlsbGVyIj48L2Rpdj4KPGRpdiBjbGFzcz0iZmlsbGVyIj48L2Rpdj4KPGRpdiBjbGFzcz0ic2F2ZSI+CiRyZXBvcnRDb250ZW50cwo8L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+CiJACglpZiAoLW5vdCAkRmlsZW5hbWUpIHsKCQkkRmlsZW5hbWUgPSAiJCgkZW52OlRFTVApXCQoaWYgKEdldC1JdGVtIC1QYXRoIEZ1bmN0aW9uOjpHZXQtQWRtaW5Db25zb2xlTmFtZSAtRXJyb3JhY3Rpb24gU2lsZW50bHlDb250aW51ZSkgeyhHZXQtQWRtaW5Db25zb2xlTmFtZSkgLXJlcGxhY2UgJ1tcc1xbXF1dJywnJ30gZWxzZSB7J1Bvd2VyU2hlbGwnfSlSZXBvcnRfJChHZXQtRGF0ZSAtRm9ybWF0IGhobW1zc19kZE1NeXl5eSkuaHRtIgoJfQoJJGh0bWwgfCBPdXQtRmlsZSAtRW5jb2RpbmcgVW5pY29kZSAtRmlsZVBhdGggJEZpbGVuYW1lCgkkaHRtRmlsZVBhdGggPSAoR2V0LUl0ZW0gLUxpdGVyYWxQYXRoICRGaWxlbmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkuUFNQYXRoCglpZiAoLW5vdCAkaHRtRmlsZVBhdGgpIHsKCQl0aHJvdyAiRmlsZSAnJEZpbGVuYW1lJyB3YXMgbm90IGNyZWF0ZWQiCgl9CglpZiAoJE9wZW5GaWxlKSB7CgkJaWYgKFRlc3QtUGF0aCAtTGl0ZXJhbFBhdGggIlJlZ2lzdHJ5OjpIS0VZX0NMQVNTRVNfUk9PVFwuaHRtIiAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgewoJCQlJbnZva2UtSXRlbSAtTGl0ZXJhbFBhdGggJGh0bUZpbGVQYXRoCgkJfSBlbHNlIHsKCQkJJHByb2Nlc3MgPSBOZXctT2JqZWN0IFN5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzCgkJCSRwcm9jZXNzLlN0YXJ0SW5mby5GaWxlbmFtZSA9ICdub3RlcGFkLmV4ZScKCQkJJHByb2Nlc3MuU3RhcnRJbmZvLkFyZ3VtZW50cyA9ICJgIiQoJGh0bUZpbGVQYXRoLlJlcGxhY2UoJ01pY3Jvc29mdC5Qb3dlclNoZWxsLkNvcmVcRmlsZVN5c3RlbTo6JywnJykpYCIiCgkJCWlmICgtbm90ICRwcm9jZXNzLlN0YXJ0KCkpIHsgCgkJCQl0aHJvdyAnVW5hYmxlIHRvIGxhdW5jaCBub3RlcGFkLmV4ZScKCQkJfQoJCX0KCX0KCWlmICgkT3BlbkZvbGRlcikgewoJCSRwcm9jZXNzID0gTmV3LU9iamVjdCBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2VzcwoJCSRwcm9jZXNzLlN0YXJ0SW5mby5GaWxlbmFtZSA9ICdleHBsb3Jlci5leGUnCgkJJHByb2Nlc3MuU3RhcnRJbmZvLkFyZ3VtZW50cyA9ICIvc2VsZWN0LGAiJCgkaHRtRmlsZVBhdGguUmVwbGFjZSgnTWljcm9zb2Z0LlBvd2VyU2hlbGwuQ29yZVxGaWxlU3lzdGVtOjonLCcnKSlgIiIKCQlpZiAoLW5vdCAkcHJvY2Vzcy5TdGFydCgpKSB7IAoJCQl0aHJvdyAnVW5hYmxlIHRvIGxhdW5jaCBleHBsb3Jlci5leGUnCgkJfQoJfQoJR2V0LUl0ZW0gLUxpdGVyYWxQYXRoICRodG1GaWxlUGF0aAp9CgpmdW5jdGlvbiBnbG9iYWw6QWRkLUh0bWxSZXBvcnRTZXBhcmF0b3IgewoJQCIKPGhyIC8+CiJACn0KCmZ1bmN0aW9uIGdsb2JhbDpBZGQtSHRtbFJlcG9ydFN1YnRpdGxlIHsKCXBhcmFtKAoJCSRTdWJ0aXRsZSA9ICRudWxsCgkpCglAIgo8dGFibGU+Cjx0aD48dT4kU3VidGl0bGU8L3U+PC90aD4KPC90YWJsZT4KIkAKfQoKZnVuY3Rpb24gZ2xvYmFsOkFkZC1IdG1sUmVwb3J0U2VjdGlvbiB7CglwYXJhbSgKCQlbc3RyaW5nXSAgICRUaXRsZSAgICAgICAgID0gJG51bGwsCgkJW1VJbnQxNl0gICAkTGV2ZWwgICAgICAgICA9IDEsCgkJW3N3aXRjaF0gICAkTm9JbmRlbnQsCgkJW3N3aXRjaF0gICAkTm9GcmFtZSwKCQlbc3dpdGNoXSAgICRDb2xsYXBzaWJsZSwKCQlbc3dpdGNoXSAgICRFeHBhbmRlZCwKCQlbUFNPYmplY3RdICRDb250ZW50ICAgICAgID0gJG51bGwKCSkKCVtVSW50MTZdICRoZWFkaW5nTGV2ZWwgICA9ICQoaWYgKEAoMSwyLDMpIC1ub3Rjb250YWlucyAkTGV2ZWwpIHszfSBlbHNlIHskTGV2ZWx9KQoJW3N0cmluZ10gJHNlY3Rpb25DbGFzcyAgID0gJ3Zpc2libGVTZWN0aW9uJwoJW3N0cmluZ10gJHJlcG9ydENvbnRlbnRzID0gJG51bGwKCglpZiAoJFRpdGxlKSB7CgkJaWYgKCRDb2xsYXBzaWJsZSkgewoJCQlpZiAoLW5vdCAkRXhwYW5kZWQpIHsKCQkJCSRzZWN0aW9uQ2xhc3MgPSAnaGlkZGVuU2VjdGlvbicKCQkJfQoJCQlAIgo8aCRoZWFkaW5nTGV2ZWwgc3R5bGU9ImN1cnNvcjogcG9pbnRlciIgb25jbGljaz0idG9nZ2xlVmlzaWJpbGl0eSh0aGlzKSI+CjxzcGFuIGNsYXNzPSJleHBhbmRhYmxlSGVhZGVyTGluayI+JFRpdGxlPC9zcGFuPgo8c3BhbiBjbGFzcz0iZXhwYW5kYWJsZUhlYWRlckxpbmtSaWdodEp1c3RpZmllZCI+JChpZiAoJEV4cGFuZGVkKSB7J2hpZGUnfSBlbHNlIHsnc2hvdyd9KTwvc3Bhbj4KPC9oJGhlYWRpbmdMZXZlbD4KIkAKCQl9IGVsc2UgewoJCQlAIgo8aCRoZWFkaW5nTGV2ZWw+CiRUaXRsZQo8L2gkaGVhZGluZ0xldmVsPgoiQAoJCX0KCX0KCWlmICgkQ29udGVudCkgewoJCWlmICgkQ29udGVudCAtaXMgW1NjcmlwdEJsb2NrXSkgewoJCQkmICRDb250ZW50IHwgRm9yRWFjaC1PYmplY3QgewoJCQkJJHJlcG9ydENvbnRlbnRzICs9IFtzdHJpbmddJF8KCQkJfQoJCQkkcmVwb3J0Q29udGVudHMgPSAkcmVwb3J0Q29udGVudHMuVHJpbSgiYG4iKQoJCX0gZWxzZSB7CgkJCSRyZXBvcnRDb250ZW50cyA9IFtzdHJpbmddJENvbnRlbnQKCQl9CgkJJHJlcG9ydENvbnRlbnRzID0gJHJlcG9ydENvbnRlbnRzLlRyaW0oKQoJCWlmICgkTm9GcmFtZSkgewoJCQlAIgo8ZGl2IGNsYXNzPSIke3NlY3Rpb25DbGFzc31Ob0ZyYW1lIj4KJHJlcG9ydENvbnRlbnRzCjwvZGl2PgoiQAoJCX0gZWxzZWlmICgkTm9JbmRlbnQpIHsKCQkJQCIKPGRpdiBjbGFzcz0iJHtzZWN0aW9uQ2xhc3N9Tm9JbmRlbnQiPgokcmVwb3J0Q29udGVudHMKPC9kaXY+CiJACgkJfSBlbHNlIHsKCQkJQCIKPGRpdiBjbGFzcz0iJHNlY3Rpb25DbGFzcyI+CiRyZXBvcnRDb250ZW50cwo8L2Rpdj4KIkAKCQl9Cgl9CglAIgo8ZGl2IGNsYXNzPSJmaWxsZXIiPjwvZGl2PgoiQAkJCn0KCmZ1bmN0aW9uIGdsb2JhbDpDb252ZXJ0VG8tSHRtbFJlcG9ydFRhYmxlIHsKCXBhcmFtKAoJCVtQU09iamVjdF0gJElucHV0T2JqZWN0ICAgICAgID0gJG51bGwsCgkJW1N0cmluZ1tdXSAkUHJvcGVydHkgICAgICAgICAgPSAkbnVsbCwKCQlbU3RyaW5nW11dICRHcm91cEJ5ICAgICAgICAgICA9ICRudWxsLAoJCVtzdHJpbmddICAgJFRpdGxlICAgICAgICAgICAgID0gJG51bGwsCgkJW1VJbnQxNl0gICAkTGV2ZWwgICAgICAgICAgICAgPSAxLAoJCVtzdHJpbmddICAgJEluZGVudCAgICAgICAgICAgID0gJ0FsbExldmVscycsCgkJW3N3aXRjaF0gICAkUHJlZml4R3JvdXBOYW1lcywKCQlbc3dpdGNoXSAgICRDb2xsYXBzaWJsZSwKCQlbc3dpdGNoXSAgICRFeHBhbmRlZCwKCQlbUFNPYmplY3RdICRBZGRpdGlvbmFsQ29udGVudCA9ICRudWxsCgkpCgliZWdpbiB7CgkJW1BTT2JqZWN0XSAkcHJvY2Vzc09iamVjdCAgICA9ICRudWxsCgkJW2FycmF5XSAgICAkb2JqZWN0Q29sbGVjdGlvbiA9IEAoKQoJCVtTdHJpbmdbXV0gJGlubmVySHRtbCAgICAgICAgPSBAKCkKCQlbc3RyaW5nXSAgICRncm91cE5hbWVQcmVmaXggID0gJG51bGwKCQlbc3RyaW5nXSAgICRncm91cFRpdGxlICAgICAgID0gJG51bGwKCQlbc3RyaW5nXSAgICRodG1sICAgICAgICAgICAgID0gJG51bGwKCgkJaWYgKEAoJ05vbmUnLCdPbmVMZXZlbCcsJ0FsbExldmVscycpIC1ub3Rjb250YWlucyAkSW5kZW50KSB7CgkJCXRocm93ICJDYW5ub3QgYmluZCBwYXJhbWV0ZXIgIiJJbmRlbnQiIi4gU3BlY2lmeSBvbmUgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXMgYW5kIHRyeSBhZ2Fpbi4gVGhlIHBvc3NpYmxlIHZhbHVlcyBhcmUgIiJOb25lIiIsICIiT25lTGV2ZWwiIiwgYW5kICIiQWxsTGV2ZWxzIiIuIgoJCQlyZXR1cm4KCQl9Cgl9Cglwcm9jZXNzIHsKCQlpZiAoJElucHV0T2JqZWN0IC1hbmQgJF8pIHsKCQkJdGhyb3cgJ1RoZSBpbnB1dCBvYmplY3QgY2Fubm90IGJlIGJvdW5kIHRvIGFueSBwYXJhbWV0ZXJzIGZvciB0aGUgY29tbWFuZCBlaXRoZXIgYmVjYXVzZSB0aGUgY29tbWFuZCBkb2VzIG5vdCB0YWtlIHBpcGVsaW5lIGlucHV0IG9yIHRoZSBpbnB1dCBhbmQgaXRzIHByb3BlcnRpZXMgZG8gbm90IG1hdGNoIGFueSBvZiB0aGUgcGFyYW1ldGVycyB0aGF0IHRha2UgcGlwZWxpbmUgaW5wdXQuJwoJCQlyZXR1cm4KCQl9CgkJaWYgKCRwcm9jZXNzT2JqZWN0ID0gJChpZiAoJElucHV0T2JqZWN0KSB7JElucHV0T2JqZWN0fSBlbHNlIHskX30pKSB7CgkJCSRvYmplY3RDb2xsZWN0aW9uICs9ICRwcm9jZXNzT2JqZWN0CgkJfQoJfQoJZW5kIHsKCQlpZiAoJEdyb3VwQnkpIHsKCQkJJGlubmVySHRtbCA9ICRvYmplY3RDb2xsZWN0aW9uIHwgR3JvdXAtT2JqZWN0IC1Qcm9wZXJ0eSAkR3JvdXBCeVswXSB8IEZvckVhY2gtT2JqZWN0IHsKCQkJCSRncm91cE5hbWVQcmVmaXggPSAkbnVsbAoJCQkJaWYgKCRQcmVmaXhHcm91cE5hbWVzKSB7CgkJCQkJJGdyb3VwTmFtZVByZWZpeCA9ICIkKCRHcm91cEJ5WzBdKTogIgoJCQkJfQoJCQkJJGdyb3VwVGl0bGUgPSAkKGlmICgkXy5OYW1lKSB7IiRncm91cE5hbWVQcmVmaXgkKCRfLk5hbWUpIn0gZWxzZSB7IiRncm91cE5hbWVQcmVmaXg8aT5WYWx1ZSBub3Qgc2V0PC9pPiJ9KQoJCQkJJF8uR3JvdXAgfCBDb252ZXJ0VG8tSHRtbFJlcG9ydFRhYmxlIC1Qcm9wZXJ0eSAkUHJvcGVydHkgLUdyb3VwQnkgJChpZiAoJEdyb3VwQnkuQ291bnQgLWd0IDEpIHskR3JvdXBCeVsxLi4kKCRHcm91cEJ5LkNvdW50IC0gMSldfSBlbHNlIHskbnVsbH0pIC1UaXRsZSAkZ3JvdXBUaXRsZSAtTGV2ZWwgKCRMZXZlbCArIDEpIC1JbmRlbnQgJChpZiAoJEluZGVudCAtZXEgJ09uZUxldmVsJykgeydOb25lJ30gZWxzZSB7JEluZGVudH0pIC1QcmVmaXhHcm91cE5hbWVzOiRQcmVmaXhHcm91cE5hbWVzIC1Db2xsYXBzaWJsZSAtRXhwYW5kZWQ6JEV4cGFuZGVkCgkJCX0KCQkJaWYgKC1ub3QgJGlubmVySHRtbCkgewoJCQkJJGlubmVySHRtbCA9IEAoKQoJCQl9CgkJCSRodG1sID0gW3N0cmluZ106OkpvaW4oImBuIiwkaW5uZXJIdG1sKQoJCX0gZWxzZSB7CgkJCWlmICgkUHJvcGVydHkpIHsKCQkJCSRpbm5lckh0bWwgPSAkb2JqZWN0Q29sbGVjdGlvbiB8IENvbnZlcnRUby1IdG1sIC1Qcm9wZXJ0eSAkUHJvcGVydHkKCQkJfSBlbHNlaWYgKCRvYmplY3RDb2xsZWN0aW9uLkNvdW50IC1hbmQgKCRvYmplY3RDb2xsZWN0aW9uWzBdLkdldFR5cGUoKS5Jc1ByaW1pdGl2ZSAtb3IgKCRvYmplY3RDb2xsZWN0aW9uWzBdIC1pcyBbU3lzdGVtLlN0cmluZ10pKSkgewoJCQkJJGlubmVySHRtbCA9ICRvYmplY3RDb2xsZWN0aW9uIHwgQ29udmVydFRvLUh0bWwgLVByb3BlcnR5IEB7bGFiZWw9J1ZhbHVlJztleHByZXNzaW9uPXskX319CgkJCX0gZWxzZSB7CgkJCQkkaW5uZXJIdG1sID0gJG9iamVjdENvbGxlY3Rpb24gfCBDb252ZXJ0VG8tSHRtbAoJCQl9CgkJCWlmICgtbm90ICRpbm5lckh0bWwpIHsKCQkJCSRpbm5lckh0bWwgPSBAKCkKCQkJfQoJCQkkaHRtbCA9IFtzdHJpbmddOjpKb2luKCJgbiIsJGlubmVySHRtbCkgLXJlcGxhY2UgJyg/cykuKig8dGFibGU+Lio8L3RhYmxlPikuKicsJyQxJyAtcmVwbGFjZSAiPGNvbD5gbiIsIjxjb2w+PC9jb2w+YG4iCgkJfQoJCWlmICgkQWRkaXRpb25hbENvbnRlbnQpIHsKCQkJaWYgKCRBZGRpdGlvbmFsQ29udGVudCAtaXMgW1NjcmlwdEJsb2NrXSkgewoJCQkJJGh0bWwgKz0gJiAkQWRkaXRpb25hbENvbnRlbnQKCQkJfSBlbHNlIHsKCQkJCSRodG1sICs9IFtzdHJpbmddJEFkZGl0aW9uYWxDb250ZW50CgkJCX0KCQl9CgkJQWRkLUh0bWxSZXBvcnRTZWN0aW9uIC1UaXRsZSAkVGl0bGUgLUxldmVsICRMZXZlbCAtTm9JbmRlbnQ6JCgkSW5kZW50IC1lcSAnTm9uZScpIC1Db2xsYXBzaWJsZTokQ29sbGFwc2libGUgLUV4cGFuZGVkOiRFeHBhbmRlZCAtQ29udGVudCAkaHRtbAoJfQp9CgpmdW5jdGlvbiBnbG9iYWw6Q29udmVydFRvLUh0bWxSZXBvcnRMaXN0IHsKCXBhcmFtKAoJCVtQU09iamVjdF0gJElucHV0T2JqZWN0ICAgICAgID0gJG51bGwsCgkJW1N0cmluZ1tdXSAkUHJvcGVydHkgICAgICAgICAgPSAkbnVsbCwKCQlbU3RyaW5nW11dICRHcm91cEJ5ICAgICAgICAgICA9ICRudWxsLAoJCVtzdHJpbmddICAgJFRpdGxlICAgICAgICAgICAgID0gJG51bGwsCgkJW1VJbnQxNl0gICAkTGV2ZWwgICAgICAgICAgICAgPSAxLAoJCVtzdHJpbmddICAgJEluZGVudCAgICAgICAgICAgID0gJ0FsbExldmVscycsCgkJW3N3aXRjaF0gICAkUHJlZml4R3JvdXBOYW1lcywKCQlbc3dpdGNoXSAgICRDb2xsYXBzaWJsZSwKCQlbc3dpdGNoXSAgICRFeHBhbmRlZCwKCQlbUFNPYmplY3RdICRBZGRpdGlvbmFsQ29udGVudCA9ICRudWxsCgkpCgliZWdpbiB7CgkJW1BTT2JqZWN0XSAkcHJvY2Vzc09iamVjdCAgICA9ICRudWxsCgkJW2FycmF5XSAgICAkb2JqZWN0Q29sbGVjdGlvbiA9IEAoKQoJCVtTdHJpbmdbXV0gJGlubmVySHRtbCAgICAgICAgPSBAKCkKCQlbc3RyaW5nXSAgICRncm91cE5hbWVQcmVmaXggID0gJG51bGwKCQlbc3RyaW5nXSAgICRncm91cFRpdGxlICAgICAgID0gJG51bGwKCQlbc3RyaW5nXSAgICRodG1sICAgICAgICAgICAgID0gJG51bGwKCQlbVUludDMyXSAgICRpbmRleCAgICAgICAgICAgID0gMAoJCVtzdHJpbmddICAgJGl0ZW1IdG1sICAgICAgICAgPSAkbnVsbAoKCQlpZiAoQCgnTm9uZScsJ09uZUxldmVsJywnQWxsTGV2ZWxzJykgLW5vdGNvbnRhaW5zICRJbmRlbnQpIHsKCQkJdGhyb3cgIkNhbm5vdCBiaW5kIHBhcmFtZXRlciAiIkluZGVudCIiLiBTcGVjaWZ5IG9uZSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlcyBhbmQgdHJ5IGFnYWluLiBUaGUgcG9zc2libGUgdmFsdWVzIGFyZSAiIk5vbmUiIiwgIiJPbmVMZXZlbCIiLCBhbmQgIiJBbGxMZXZlbHMiIi4iCgkJCXJldHVybgoJCX0KCX0KCXByb2Nlc3MgewoJCWlmICgkSW5wdXRPYmplY3QgLWFuZCAkXykgewoJCQl0aHJvdyAnVGhlIGlucHV0IG9iamVjdCBjYW5ub3QgYmUgYm91bmQgdG8gYW55IHBhcmFtZXRlcnMgZm9yIHRoZSBjb21tYW5kIGVpdGhlciBiZWNhdXNlIHRoZSBjb21tYW5kIGRvZXMgbm90IHRha2UgcGlwZWxpbmUgaW5wdXQgb3IgdGhlIGlucHV0IGFuZCBpdHMgcHJvcGVydGllcyBkbyBub3QgbWF0Y2ggYW55IG9mIHRoZSBwYXJhbWV0ZXJzIHRoYXQgdGFrZSBwaXBlbGluZSBpbnB1dC4nCgkJCXJldHVybgoJCX0KCQlpZiAoJHByb2Nlc3NPYmplY3QgPSAkKGlmICgkSW5wdXRPYmplY3QpIHskSW5wdXRPYmplY3R9IGVsc2UgeyRffSkpIHsKCQkJJG9iamVjdENvbGxlY3Rpb24gKz0gJHByb2Nlc3NPYmplY3QKCQl9Cgl9CgllbmQgewoJCWlmICgkR3JvdXBCeSkgewoJCQkkaW5uZXJIdG1sID0gJG9iamVjdENvbGxlY3Rpb24gfCBHcm91cC1PYmplY3QgLVByb3BlcnR5ICRHcm91cEJ5WzBdIHwgRm9yRWFjaC1PYmplY3QgewoJCQkJJGdyb3VwTmFtZVByZWZpeCA9ICRudWxsCgkJCQlpZiAoJFByZWZpeEdyb3VwTmFtZXMpIHsKCQkJCQkkZ3JvdXBOYW1lUHJlZml4ID0gIiQoJEdyb3VwQnlbMF0pOiAiCgkJCQl9CgkJCQkkZ3JvdXBUaXRsZSA9ICQoaWYgKCRfLk5hbWUpIHsiJGdyb3VwTmFtZVByZWZpeCQoJF8uTmFtZSkifSBlbHNlIHsiJGdyb3VwTmFtZVByZWZpeDxpPlZhbHVlIG5vdCBzZXQ8L2k+In0pCgkJCQkkXy5Hcm91cCB8IENvbnZlcnRUby1IdG1sUmVwb3J0TGlzdCAtUHJvcGVydHkgJFByb3BlcnR5IC1Hcm91cEJ5ICQoaWYgKCRHcm91cEJ5LkNvdW50IC1ndCAxKSB7JEdyb3VwQnlbMS4uJCgkR3JvdXBCeS5Db3VudCAtIDEpXX0gZWxzZSB7JG51bGx9KSAtVGl0bGUgJGdyb3VwVGl0bGUgLUxldmVsICgkTGV2ZWwgKyAxKSAtSW5kZW50ICQoaWYgKCRJbmRlbnQgLWVxICdPbmVMZXZlbCcpIHsnTm9uZSd9IGVsc2UgeyRJbmRlbnR9KSAtUHJlZml4R3JvdXBOYW1lczokUHJlZml4R3JvdXBOYW1lcyAtQ29sbGFwc2libGUgLUV4cGFuZGVkOiRFeHBhbmRlZAoJCQl9CgkJCWlmICgtbm90ICRpbm5lckh0bWwpIHsKCQkJCSRpbm5lckh0bWwgPSBAKCkKCQkJfQoJCQkkaHRtbCA9IFtzdHJpbmddOjpKb2luKCJgbiIsJGlubmVySHRtbCkKCQl9IGVsc2UgewoJCQkkaW5uZXJIdG1sID0gJChmb3IgKCRpbmRleCA9IDA7ICRpbmRleCAtbHQgJG9iamVjdENvbGxlY3Rpb24uQ291bnQ7ICRpbmRleCsrKSB7CgkJCQkkaXRlbUh0bWwgPSAkKGZvcmVhY2ggKCRpdGVtIGluICQoaWYgKCRQcm9wZXJ0eSkgeyRQcm9wZXJ0eX0gZWxzZSB7JG9iamVjdENvbGxlY3Rpb25bJGluZGV4XS5QU09iamVjdC5Qcm9wZXJ0aWVzIHwgV2hlcmUtT2JqZWN0IHskXy5Jc0dldHRhYmxlfSB8IEZvckVhY2gtT2JqZWN0IHskXy5OYW1lfX0pKSB7CgkJCQkJQCIKPHRyPgo8dGggd2lkdGg9JzI1JSc+PGI+JHtpdGVtfTo8L2I+PC90aD4KPHRkIHdpZHRoPSc3NSUnPiQoW3N0cmluZ10oJG9iamVjdENvbGxlY3Rpb25bJGluZGV4XS4kaXRlbSkpPC90ZD4KPC90cj4KIkAKCQkJCX0pCgkJCQlpZiAoJGluZGV4IC1lcSAoJG9iamVjdENvbGxlY3Rpb24uQ291bnQgLSAxKSkgewoJCQkJCSRpdGVtSHRtbAoJCQkJfSBlbHNlIHsKCQkJCQlAIgokaXRlbUh0bWwKPC90YWJsZT4KJChBZGQtSHRtbFJlcG9ydFNlcGFyYXRvcikKPHRhYmxlPgoiQAoJCQkJfQoJCQl9KQoJCQlpZiAoLW5vdCAkaW5uZXJIdG1sKSB7CgkJCQkkaW5uZXJIdG1sID0gQCgpCgkJCX0KCQkJJGh0bWwgPSBAIgo8dGFibGU+CiQoW3N0cmluZ106OkpvaW4oImBuIiwkaW5uZXJIdG1sKSkKPC90YWJsZT4KIkAKCQl9CgkJaWYgKCRBZGRpdGlvbmFsQ29udGVudCkgewoJCQlpZiAoJEFkZGl0aW9uYWxDb250ZW50IC1pcyBbU2NyaXB0QmxvY2tdKSB7CgkJCQkkaHRtbCArPSAmICRBZGRpdGlvbmFsQ29udGVudAoJCQl9IGVsc2UgewoJCQkJJGh0bWwgKz0gW3N0cmluZ10kQWRkaXRpb25hbENvbnRlbnQKCQkJfQoJCX0KCQlBZGQtSHRtbFJlcG9ydFNlY3Rpb24gLVRpdGxlICRUaXRsZSAtTGV2ZWwgJExldmVsIC1Ob0ZyYW1lOiQoJEluZGVudCAtZXEgJ05vbmUnKSAtQ29sbGFwc2libGU6JENvbGxhcHNpYmxlIC1FeHBhbmRlZDokRXhwYW5kZWQgLUNvbnRlbnQgJGh0bWwKCX0KfQoKI2VuZHJlZ2lvbgojcmVnaW9uIENyZWF0ZSBlbnVtZXJhdGlvbnMgdXNlZCBieSB0aGUgcmVwb3J0aW5nIGVuZ2luZS4KCmlmICgtbm90IChHZXQtVmFyaWFibGUgJ0FkbWluQ29uc29sZUVudW0nIC1TY29wZSBHbG9iYWwgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpKSB7CgkkZ2xvYmFsOkFkbWluQ29uc29sZUVudW0gPSBAe30KfQppZiAoJGdsb2JhbDpBZG1pbkNvbnNvbGVFbnVtLktleXMgLW5vdGNvbnRhaW5zICdSZXBvcnRJbmRlbnRhdGlvblN0eWxlJykgewoJJGdsb2JhbDpBZG1pbkNvbnNvbGVFbnVtWydSZXBvcnRJbmRlbnRhdGlvblN0eWxlJ10gPSBOZXctRW51bSAtTmFtZSAnUmVwb3J0SW5kZW50YXRpb25TdHlsZScgLUFzc2VtYmx5TmFtZSAnQWRtaW5Db25zb2xlJyAtVmFsdWVzICdOb25lJyAnT25lIGxldmVsJyAnQWxsIGxldmVscycKfQppZiAoJGdsb2JhbDpBZG1pbkNvbnNvbGVFbnVtLktleXMgLW5vdGNvbnRhaW5zICdSZXBvcnREYXRhRm9ybWF0JykgewoJJGdsb2JhbDpBZG1pbkNvbnNvbGVFbnVtWydSZXBvcnREYXRhRm9ybWF0J10gPSBOZXctRW51bSAtTmFtZSAnUmVwb3J0RGF0YUZvcm1hdCcgLUFzc2VtYmx5TmFtZSAnQWRtaW5Db25zb2xlJyAtVmFsdWVzICdBdXRvbWF0aWMgKGZvcm1hdCBjaG9zZW4gYmFzZWQgb24gdGhlIG51bWJlciBvZiBwcm9wZXJ0aWVzIHNlbGVjdGVkKScgJ1RhYmxlJyAnTGlzdCcKfQoKI2VuZHJlZ2lvbg==
