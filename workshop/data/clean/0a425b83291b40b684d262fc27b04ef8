SCOM-SingleServer-TP.ps1,a28cbc804f286fa37855bae6a89db68b,Scan result is 1. IsMalware: 0,w6/Cu8K/I3JlcXVpcmVzIC1WZXJzaW9uIDUKCkNvbmZpZ3VyYXRpb24gT00KewogICAgSW1wb3J0LURzY1Jlc291cmNlIC1Nb2R1bGUgeENyZWRTU1AKICAgIEltcG9ydC1Ec2NSZXNvdXJjZSAtTW9kdWxlIHhTUUxTZXJ2ZXIKICAgIEltcG9ydC1Ec2NSZXNvdXJjZSAtTW9kdWxlIHhTQ09NCgogICAgIyBTZXQgcm9sZSBhbmQgaW5zdGFuY2UgdmFyaWFibGVzCiAgICAkUm9sZXMgPSAkQWxsTm9kZXMuUm9sZXMgfCBTb3J0LU9iamVjdCAtVW5pcXVlCiAgICBmb3JlYWNoKCRSb2xlIGluICRSb2xlcykKICAgIHsKICAgICAgICAkU2VydmVycyA9IEAoJEFsbE5vZGVzLldoZXJleyRfLlJvbGVzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJFJvbGV9fS5Ob2RlTmFtZSkKICAgICAgICBTZXQtVmFyaWFibGUgLU5hbWUgKCRSb2xlLlJlcGxhY2UoIiAiLCIiKS5SZXBsYWNlKCIuIiwiIikgKyAicyIpIC1WYWx1ZSAkU2VydmVycwogICAgICAgIGlmKCRTZXJ2ZXJzLkNvdW50IC1lcSAxKQogICAgICAgIHsKICAgICAgICAgICAgU2V0LVZhcmlhYmxlIC1OYW1lICgkUm9sZS5SZXBsYWNlKCIgIiwiIikuUmVwbGFjZSgiLiIsIiIpKSAtVmFsdWUgJFNlcnZlcnNbMF0KICAgICAgICAgICAgaWYoCiAgICAgICAgICAgICAgICAkUm9sZS5Db250YWlucygiRGF0YWJhc2UiKSAtb3IKICAgICAgICAgICAgICAgICRSb2xlLkNvbnRhaW5zKCJEYXRhd2FyZWhvdXNlIikgLW9yCiAgICAgICAgICAgICAgICAkUm9sZS5Db250YWlucygiUmVwb3J0aW5nIikgLW9yCiAgICAgICAgICAgICAgICAkUm9sZS5Db250YWlucygiQW5hbHlzaXMiKSAtb3IgCiAgICAgICAgICAgICAgICAkUm9sZS5Db250YWlucygiSW50ZWdyYXRpb24iKQogICAgICAgICAgICApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRJbnN0YW5jZSA9ICRBbGxOb2Rlcy5XaGVyZXskXy5Ob2RlTmFtZSAtZXEgJFNlcnZlcnNbMF19LlNRTFNlcnZlcnMuV2hlcmV7JF8uUm9sZXMgfCBXaGVyZS1PYmplY3QgeyRfIC1lcSAkUm9sZX19Lkluc3RhbmNlTmFtZQogICAgICAgICAgICAgICAgU2V0LVZhcmlhYmxlIC1OYW1lICgkUm9sZS5SZXBsYWNlKCIgIiwiIikuUmVwbGFjZSgiLiIsIiIpLlJlcGxhY2UoIlNlcnZlciIsIkluc3RhbmNlIikpIC1WYWx1ZSAkSW5zdGFuY2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0gICAgCgogICAgTm9kZSAkQWxsTm9kZXMuTm9kZU5hbWUKICAgIHsKICAgICAgICAjIFNldCBMQ00gdG8gcmVib290IGlmIG5lZWRlZAogICAgICAgIExvY2FsQ29uZmlndXJhdGlvbk1hbmFnZXIKICAgICAgICB7CiAgICAgICAgICAgIERlYnVnTW9kZSA9ICR0cnVlCiAgICAgICAgICAgIFJlYm9vdE5vZGVJZk5lZWRlZCA9ICR0cnVlCiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgLk5FVCBGcmFtZXdvcmsgMy41IG9uIFNRTCBhbmQgV2ViIENvbnNvbGUgbm9kZXMKICAgICAgICBpZigKICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJEYXRhYmFzZVNlcnZlciAtZXEgJE5vZGUuTm9kZU5hbWUpIC1vciAKICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJEYXRhd2FyZWhvdXNlU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLW9yCiAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyUmVwb3J0aW5nU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLW9yCiAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyV2ViQ29uc29sZVNlcnZlcnMgfCBXaGVyZS1PYmplY3QgeyRfIC1lcSAkTm9kZS5Ob2RlTmFtZX0pIC1vcgogICAgICAgICAgICAoJFNRTFNlcnZlcjIwMTRNYW5hZ2VtZW50VG9vbHMgfCBXaGVyZS1PYmplY3QgeyRfIC1lcSAkTm9kZS5Ob2RlTmFtZX0pCiAgICAgICAgKQogICAgICAgIHsKICAgICAgICAgICAgV2luZG93c0ZlYXR1cmUgIk5FVC1GcmFtZXdvcmstQ29yZSIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBOYW1lID0gIk5FVC1GcmFtZXdvcmstQ29yZSIKICAgICAgICAgICAgICAgIFNvdXJjZSA9ICROb2RlLlNvdXJjZVBhdGggKyAiXFdpbmRvd3NTZXJ2ZXIuVFBcc291cmNlc1xzeHMiCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgSW5zdGFsbCBJSVMgb24gV2ViIENvbnNvbGUgU2VydmVycwogICAgICAgIGlmKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJXZWJDb25zb2xlU2VydmVycyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkKICAgICAgICB7CiAgICAgICAgICAgIFdpbmRvd3NGZWF0dXJlICJXZWItV2ViU2VydmVyIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIE5hbWUgPSAiV2ViLVdlYlNlcnZlciIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV2luZG93c0ZlYXR1cmUgIldlYi1SZXF1ZXN0LU1vbml0b3IiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEVuc3VyZSA9ICJQcmVzZW50IgogICAgICAgICAgICAgICAgTmFtZSA9ICJXZWItUmVxdWVzdC1Nb25pdG9yIgogICAgICAgICAgICB9CgogICAgICAgICAgICBXaW5kb3dzRmVhdHVyZSAiV2ViLVdpbmRvd3MtQXV0aCIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBOYW1lID0gIldlYi1XaW5kb3dzLUF1dGgiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdpbmRvd3NGZWF0dXJlICJXZWItQXNwLU5ldCIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBOYW1lID0gIldlYi1Bc3AtTmV0IgogICAgICAgICAgICB9CgogICAgICAgICAgICBXaW5kb3dzRmVhdHVyZSAiV2ViLUFzcC1OZXQ0NSIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBOYW1lID0gIldlYi1Bc3AtTmV0NDUiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdpbmRvd3NGZWF0dXJlICJORVQtV0NGLUhUVFAtQWN0aXZhdGlvbjQ1IgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIE5hbWUgPSAiTkVULVdDRi1IVFRQLUFjdGl2YXRpb240NSIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV2luZG93c0ZlYXR1cmUgIldlYi1NZ210LUNvbnNvbGUiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEVuc3VyZSA9ICJQcmVzZW50IgogICAgICAgICAgICAgICAgTmFtZSA9ICJXZWItTWdtdC1Db25zb2xlIgogICAgICAgICAgICB9CgogICAgICAgICAgICBXaW5kb3dzRmVhdHVyZSAiV2ViLU1ldGFiYXNlIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIE5hbWUgPSAiV2ViLU1ldGFiYXNlIgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgU1FMIEluc3RhbmNlcwogICAgICAgIGlmKAogICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLW9yIAogICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKSAtb3IKICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKQogICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIGZvcmVhY2goJFNRTFNlcnZlciBpbiAkTm9kZS5TUUxTZXJ2ZXJzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU1FMSW5zdGFuY2VOYW1lID0gJFNRTFNlcnZlci5JbnN0YW5jZU5hbWUKCiAgICAgICAgICAgICAgICAkRmVhdHVyZXMgPSAiIgogICAgICAgICAgICAgICAgaWYoCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLWFuZAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlSW5zdGFuY2UgLWVxICRTUUxJbnN0YW5jZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgKSAtb3IgCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKSAtYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlIC1lcSAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgICkgLW9yCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlclJlcG9ydGluZ1NlcnZlciAtZXEgJE5vZGUuTm9kZU5hbWUpIC1hbmQKICAgICAgICAgICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdJbnN0YW5jZSAtZXEgJFNRTEluc3RhbmNlTmFtZSkKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEZlYXR1cmVzICs9ICJTUUxFTkdJTkUsIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLWFuZAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlSW5zdGFuY2UgLWVxICRTUUxJbnN0YW5jZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgKSAtb3IgCiAgICAgICAgICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKSAtYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlIC1lcSAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkRmVhdHVyZXMgKz0gIkZVTExURVhULCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKSAtYW5kIAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlclJlcG9ydGluZ0luc3RhbmNlIC1lcSAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkRmVhdHVyZXMgKz0gIlJTLCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKAogICAgICAgICAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKSAtYW5kIAogICAgICAgICAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlclJlcG9ydGluZ0luc3RhbmNlIC1lcSAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkRmVhdHVyZXMgKz0gIkFTLCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRGZWF0dXJlcyA9ICRGZWF0dXJlcy5UcmltKCIsIikKCiAgICAgICAgICAgICAgICBpZigkRmVhdHVyZXMgLW5lICIiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHhTcWxTZXJ2ZXJTZXR1cCAoJE5vZGUuTm9kZU5hbWUgKyAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgRGVwZW5kc09uID0gIltXaW5kb3dzRmVhdHVyZV1ORVQtRnJhbWV3b3JrLUNvcmUiCiAgICAgICAgICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSAkTm9kZS5Tb3VyY2VQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIFNvdXJjZUZvbGRlciA9ICJTUUxTZXJ2ZXIyMDE0LmVuIgogICAgICAgICAgICAgICAgICAgICAgICBTZXR1cENyZWRlbnRpYWwgPSAkTm9kZS5JbnN0YWxsZXJTZXJ2aWNlQWNjb3VudAogICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZU5hbWUgPSAkU1FMSW5zdGFuY2VOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIEZlYXR1cmVzID0gJEZlYXR1cmVzCiAgICAgICAgICAgICAgICAgICAgICAgIFNRTFN5c0FkbWluQWNjb3VudHMgPSAkTm9kZS5BZG1pbkFjY291bnQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHhTcWxTZXJ2ZXJGaXJld2FsbCAoJE5vZGUuTm9kZU5hbWUgKyAkU1FMSW5zdGFuY2VOYW1lKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgRGVwZW5kc09uID0gKCJbeFNxbFNlcnZlclNldHVwXSIgKyAkTm9kZS5Ob2RlTmFtZSArICRTUUxJbnN0YW5jZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSAkTm9kZS5Tb3VyY2VQYXRoCiAgICAgICAgICAgICAgICAgICAgICAgIFNvdXJjZUZvbGRlciA9ICJTUUxTZXJ2ZXIyMDE0LmVuIgogICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZU5hbWUgPSAkU1FMSW5zdGFuY2VOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIEZlYXR1cmVzID0gJEZlYXR1cmVzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgU1FMIE1hbmFnZW1lbnQgVG9vbHMKICAgICAgICBpZigkU1FMU2VydmVyMjAxNE1hbmFnZW1lbnRUb29scyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkKICAgICAgICB7CiAgICAgICAgICAgIHhTcWxTZXJ2ZXJTZXR1cCAiU1FMTVQiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIERlcGVuZHNPbiA9ICJbV2luZG93c0ZlYXR1cmVdTkVULUZyYW1ld29yay1Db3JlIgogICAgICAgICAgICAgICAgU291cmNlUGF0aCA9ICROb2RlLlNvdXJjZVBhdGgKICAgICAgICAgICAgICAgIFNvdXJjZUZvbGRlciA9ICJTUUxTZXJ2ZXIyMDE0LmVuIgogICAgICAgICAgICAgICAgU2V0dXBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgIEluc3RhbmNlTmFtZSA9ICJOVUxMIgogICAgICAgICAgICAgICAgRmVhdHVyZXMgPSAiU1NNUyxBRFZfU1NNUyIKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIyBJbnN0YWxsIFJlcG9ydCBWaWV3ZXIgMjAxMiBvbiBXZWIgQ29uc29sZSBTZXJ2ZXJzIGFuZCBDb25zb2xlcwogICAgICAgIGlmKAogICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlcldlYkNvbnNvbGVTZXJ2ZXJzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KSAtb3IKICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJDb25zb2xlcyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkKICAgICAgICApCiAgICAgICAgewogICAgICAgICAgICBpZigkTm9kZS5TUUxTZXJ2ZXIyMDEyU3lzdGVtQ0xSVHlwZXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTUUxTZXJ2ZXIyMDEyU3lzdGVtQ0xSVHlwZXMgPSAoSm9pbi1QYXRoIC1QYXRoICROb2RlLlNRTFNlcnZlcjIwMTJTeXN0ZW1DTFJUeXBlcyAtQ2hpbGRQYXRoICJTUUxTeXNDbHJUeXBlcy5tc2kiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNRTFNlcnZlcjIwMTJTeXN0ZW1DTFJUeXBlcyA9ICJcUHJlcmVxdWlzaXRlc1xTUUwyMDEyQ0xSXFNRTFN5c0NsclR5cGVzLm1zaSIKICAgICAgICAgICAgfQogICAgICAgICAgICBQYWNrYWdlICJTUUxTZXJ2ZXIyMDEyU3lzdGVtQ0xSVHlwZXMiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEVuc3VyZSA9ICJQcmVzZW50IgogICAgICAgICAgICAgICAgTmFtZSA9ICJNaWNyb3NvZnQgU3lzdGVtIENMUiBUeXBlcyBmb3IgU1FMIFNlcnZlciAyMDEyICh4NjQpIgogICAgICAgICAgICAgICAgUHJvZHVjdElkID0gIiIKICAgICAgICAgICAgICAgIFBhdGggPSAoSm9pbi1QYXRoIC1QYXRoICROb2RlLlNvdXJjZVBhdGggLUNoaWxkUGF0aCAkU1FMU2VydmVyMjAxMlN5c3RlbUNMUlR5cGVzKQogICAgICAgICAgICAgICAgQXJndW1lbnRzID0gIkFMTFVTRVJTPTIiCiAgICAgICAgICAgICAgICBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJE5vZGUuUmVwb3J0Vmlld2VyMjAxMlJlZGlzdHJpYnV0YWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFJlcG9ydFZpZXdlcjIwMTJSZWRpc3RyaWJ1dGFibGUgPSAoSm9pbi1QYXRoIC1QYXRoICROb2RlLlNRTFNlcnZlcjIwMTJTeXN0ZW1DTFJUeXBlcyAtQ2hpbGRQYXRoICJSZXBvcnRWaWV3ZXIubXNpLm1zaSIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUmVwb3J0Vmlld2VyMjAxMlJlZGlzdHJpYnV0YWJsZSA9ICJcUHJlcmVxdWlzaXRlc1xSVjIwMTJcUmVwb3J0Vmlld2VyLm1zaSIKICAgICAgICAgICAgfQogICAgICAgICAgICBQYWNrYWdlICJSZXBvcnRWaWV3ZXIyMDEyUmVkaXN0cmlidXRhYmxlIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBEZXBlbmRzT24gPSAiW1BhY2thZ2VdU1FMU2VydmVyMjAxMlN5c3RlbUNMUlR5cGVzIgogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBOYW1lID0gIk1pY3Jvc29mdCBSZXBvcnQgVmlld2VyIDIwMTIgUnVudGltZSIKICAgICAgICAgICAgICAgIFByb2R1Y3RJRCA9ICIiCiAgICAgICAgICAgICAgICBQYXRoID0gKEpvaW4tUGF0aCAtUGF0aCAkTm9kZS5Tb3VyY2VQYXRoIC1DaGlsZFBhdGggJFJlcG9ydFZpZXdlcjIwMTJSZWRpc3RyaWJ1dGFibGUpCiAgICAgICAgICAgICAgICBBcmd1bWVudHMgPSAiQUxMVVNFUlM9MiIKICAgICAgICAgICAgICAgIENyZWRlbnRpYWwgPSAkTm9kZS5JbnN0YWxsZXJTZXJ2aWNlQWNjb3VudAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEFkZCBzZXJ2aWNlIGFjY291bnRzIHRvIGFkbWlucyBvbiBNYW5hZ2VtZW50IFNlcnZlcnMKICAgICAgICBpZigkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnMgfCBXaGVyZS1PYmplY3QgeyRfIC1lcSAkTm9kZS5Ob2RlTmFtZX0pCiAgICAgICAgewogICAgICAgICAgICBHcm91cCAiQWRtaW5pc3RyYXRvcnMiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEdyb3VwTmFtZSA9ICJBZG1pbmlzdHJhdG9ycyIKICAgICAgICAgICAgICAgIE1lbWJlcnNUb0luY2x1ZGUgPSBAKAogICAgICAgICAgICAgICAgICAgICROb2RlLlN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckFjdGlvbkFjY291bnQuVXNlck5hbWUsCiAgICAgICAgICAgICAgICAgICAgJE5vZGUuU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyREFTQWNjb3VudC5Vc2VyTmFtZQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgQ3JlZGVudGlhbCA9ICROb2RlLkluc3RhbGxlclNlcnZpY2VBY2NvdW50CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICMgSW5zdGFsbCBmaXJzdCBNYW5hZ2VtZW50IFNlcnZlcgogICAgICAgIGlmICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnNbMF0gLWVxICROb2RlLk5vZGVOYW1lKQogICAgICAgIHsKICAgICAgICAgICAgIyBFbmFibGUgQ3JlZFNTUCAtIHJlcXVpcmVkIGZvciBQcm9kdWN0S2V5IFBTIGNtZGxldAogICAgICAgICAgICB4Q3JlZFNTUCAiU2VydmVyIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIFJvbGUgPSAiU2VydmVyIgogICAgICAgICAgICB9CgogICAgICAgICAgICB4Q3JlZFNTUCAiQ2xpZW50IgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIFJvbGUgPSAiQ2xpZW50IgogICAgICAgICAgICAgICAgRGVsZWdhdGVDb21wdXRlcnMgPSAkTm9kZS5Ob2RlTmFtZQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIENyZWF0ZSBEZXBlbmRzT24gZm9yIGZpcnN0IE1hbmFnZW1lbnQgU2VydmVyCiAgICAgICAgICAgICREZXBlbmRzT24gPSBAKAogICAgICAgICAgICAgICAgIlt4Q3JlZFNTUF1TZXJ2ZXIiLAogICAgICAgICAgICAgICAgIlt4Q3JlZFNTUF1DbGllbnQiLAogICAgICAgICAgICAgICAgIltHcm91cF1BZG1pbmlzdHJhdG9ycyIKICAgICAgICAgICAgKQoKICAgICAgICAgICAgIyBXYWl0IGZvciBPcGVyYXRpb25zIFNRTCBTZXJ2ZXIKICAgICAgICAgICAgaWYgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJNYW5hZ2VtZW50U2VydmVyc1swXSAtZXEgJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlU2VydmVyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRGVwZW5kc09uICs9IEAoKCJbeFNxbFNlcnZlckZpcmV3YWxsXSIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VTZXJ2ZXIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VJbnN0YW5jZSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXYWl0Rm9yQWxsICJPTURCIgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIE5vZGVOYW1lID0gJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGFiYXNlU2VydmVyCiAgICAgICAgICAgICAgICAgICAgUmVzb3VyY2VOYW1lID0gKCJbeFNxbFNlcnZlckZpcmV3YWxsXSIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VTZXJ2ZXIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VJbnN0YW5jZSkKICAgICAgICAgICAgICAgICAgICBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgICAgICBSZXRyeUNvdW50ID0gNzIwCiAgICAgICAgICAgICAgICAgICAgUmV0cnlJbnRlcnZhbFNlYyA9IDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICREZXBlbmRzT24gKz0gQCgiW1dhaXRGb3JBbGxdT01EQiIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgV2FpdCBmb3IgRGF0YXdhcmVob3VzZSBTUUwgU2VydmVyLCBpZiBkaWZmZXJlbnQgZnJvbSBPcGVyYXRpb25zIFNRTCBTZXJ2ZXIKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJEYXRhYmFzZVNlcnZlciAtbmUgJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIpIC1vcgogICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJEYXRhYmFzZUluc3RhbmNlIC1uZSAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlKQogICAgICAgICAgICApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJNYW5hZ2VtZW50U2VydmVyc1swXSAtZXEgJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJERlcGVuZHNPbiArPSBAKCgiW3hTcWxTZXJ2ZXJGaXJld2FsbF0iICsgJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlKSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXYWl0Rm9yQWxsICJPTURXIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgTm9kZU5hbWUgPSAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZVNlcnZlcgogICAgICAgICAgICAgICAgICAgICAgICBSZXNvdXJjZU5hbWUgPSAoIlt4U3FsU2VydmVyRmlyZXdhbGxdIiArICRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJEYXRhd2FyZWhvdXNlU2VydmVyICsgJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VJbnN0YW5jZSkKICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGVudGlhbCA9ICROb2RlLkluc3RhbGxlclNlcnZpY2VBY2NvdW50CiAgICAgICAgICAgICAgICAgICAgICAgIFJldHJ5Q291bnQgPSA3MjAKICAgICAgICAgICAgICAgICAgICAgICAgUmV0cnlJbnRlcnZhbFNlYyA9IDUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJERlcGVuZHNPbiArPSBAKCJbV2FpdEZvckFsbF1PTURXIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyBJbnN0YWxsIGZpcnN0IE1hbmFnZW1lbnQgU2VydmVyCiAgICAgICAgICAgIHhTQ09NTWFuYWdlbWVudFNlcnZlclNldHVwICJPTU1TIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBEZXBlbmRzT24gPSAkRGVwZW5kc09uCiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSAkTm9kZS5Tb3VyY2VQYXRoCiAgICAgICAgICAgICAgICBTb3VyY2VGb2xkZXIgPSAiU3lzdGVtQ2VudGVyLlRQXE9wZXJhdGlvbnNNYW5hZ2VyLmVuIgogICAgICAgICAgICAgICAgU2V0dXBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgIFByb2R1Y3RLZXkgPSAkTm9kZS5TeXN0ZW1DZW50ZXIyMDEyUHJvZHVjdEtleQogICAgICAgICAgICAgICAgTWFuYWdlbWVudEdyb3VwTmFtZSA9ICJPTV9Db250b3NvIgogICAgICAgICAgICAgICAgRmlyc3RNYW5hZ2VtZW50U2VydmVyID0gJHRydWUKICAgICAgICAgICAgICAgIEFjdGlvbkFjY291bnQgPSAkTm9kZS5TeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJBY3Rpb25BY2NvdW50CiAgICAgICAgICAgICAgICBEQVNBY2NvdW50ID0gJE5vZGUuU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyREFTQWNjb3VudAogICAgICAgICAgICAgICAgRGF0YVJlYWRlciA9ICROb2RlLlN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckRhdGFSZWFkZXIKICAgICAgICAgICAgICAgIERhdGFXcml0ZXIgPSAkTm9kZS5TeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJEYXRhV3JpdGVyCiAgICAgICAgICAgICAgICBTcWxTZXJ2ZXJJbnN0YW5jZSA9ICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VTZXJ2ZXIgKyAiXCIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VJbnN0YW5jZSkKICAgICAgICAgICAgICAgIER3U3FsU2VydmVySW5zdGFuY2UgPSAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgKyAiXCIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIFdhaXQgZm9yIGZpcnN0IE1hbmFnZW1lbnQgU2VydmVyIG9uIG90aGVyIE1hbmFnZW1lbnQgU2VydmVycwogICAgICAgICMgYW5kIFJlcG9ydGluZyBhbmQgV2ViIENvbnNvbGUgc2VydmVyLCBpZiB0aGV5IGFyZSBub3Qgb24gYSBNYW5hZ2VtZW50IFNlcnZlcgogICAgICAgIGlmKAogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlck1hbmFnZW1lbnRTZXJ2ZXJzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KSAtYW5kIAogICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJNYW5hZ2VtZW50U2VydmVyc1swXSAtbmUgJE5vZGUuTm9kZU5hbWUpCiAgICAgICAgICAgICkgLW9yCiAgICAgICAgICAgICgKICAgICAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyUmVwb3J0aW5nU2VydmVyIC1lcSAkTm9kZS5Ob2RlTmFtZSkgLWFuZAogICAgICAgICAgICAgICAgKCEoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlck1hbmFnZW1lbnRTZXJ2ZXJzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KSkKICAgICAgICAgICAgKSAtb3IKICAgICAgICAgICAgKAogICAgICAgICAgICAgICAgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJXZWJDb25zb2xlU2VydmVycyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkgLWFuZAogICAgICAgICAgICAgICAgKCEoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlck1hbmFnZW1lbnRTZXJ2ZXJzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KSkKICAgICAgICAgICAgKQogICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIFdhaXRGb3JBbGwgIk9NTVMiCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIE5vZGVOYW1lID0gJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlck1hbmFnZW1lbnRTZXJ2ZXJzWzBdCiAgICAgICAgICAgICAgICBSZXNvdXJjZU5hbWUgPSAiW3hTQ09NTWFuYWdlbWVudFNlcnZlclNldHVwXU9NTVMiCiAgICAgICAgICAgICAgICBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgIFJldHJ5Q291bnQgPSAxNDQwCiAgICAgICAgICAgICAgICBSZXRyeUludGVydmFsU2VjID0gNQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgb3RoZXIgTWFuYWdlbWVudCBTZXJ2ZXJzCiAgICAgICAgaWYoCiAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnMgfCBXaGVyZS1PYmplY3QgeyRfIC1lcSAkTm9kZS5Ob2RlTmFtZX0pIC1hbmQgCiAgICAgICAgICAgICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnNbMF0gLW5lICROb2RlLk5vZGVOYW1lKQogICAgICAgICkKICAgICAgICB7CiAgICAgICAgICAgIHhTQ09NTWFuYWdlbWVudFNlcnZlclNldHVwICJPTU1TIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBEZXBlbmRzT24gPSBAKAogICAgICAgICAgICAgICAgICAgICJbR3JvdXBdQWRtaW5pc3RyYXRvcnMiLAogICAgICAgICAgICAgICAgICAgICJbV2FpdEZvckFsbF1PTU1TIgogICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgRW5zdXJlID0gIlByZXNlbnQiCiAgICAgICAgICAgICAgICBTb3VyY2VQYXRoID0gJE5vZGUuU291cmNlUGF0aAogICAgICAgICAgICAgICAgU291cmNlRm9sZGVyID0gIlN5c3RlbUNlbnRlci5UUFxPcGVyYXRpb25zTWFuYWdlci5lbiIKICAgICAgICAgICAgICAgIFNldHVwQ3JlZGVudGlhbCA9ICROb2RlLkluc3RhbGxlclNlcnZpY2VBY2NvdW50CiAgICAgICAgICAgICAgICBNYW5hZ2VtZW50R3JvdXBOYW1lID0gIk9NX0NvbnRvc28iCiAgICAgICAgICAgICAgICBGaXJzdE1hbmFnZW1lbnRTZXJ2ZXIgPSAkZmFsc2UKICAgICAgICAgICAgICAgIEFjdGlvbkFjY291bnQgPSAkTm9kZS5TeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJBY3Rpb25BY2NvdW50CiAgICAgICAgICAgICAgICBEQVNBY2NvdW50ID0gJE5vZGUuU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyREFTQWNjb3VudAogICAgICAgICAgICAgICAgRGF0YVJlYWRlciA9ICROb2RlLlN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckRhdGFSZWFkZXIKICAgICAgICAgICAgICAgIERhdGFXcml0ZXIgPSAkTm9kZS5TeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJEYXRhV3JpdGVyCiAgICAgICAgICAgICAgICBTcWxTZXJ2ZXJJbnN0YW5jZSA9ICgkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VTZXJ2ZXIgKyAiXCIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YWJhc2VJbnN0YW5jZSkKICAgICAgICAgICAgICAgIER3U3FsU2VydmVySW5zdGFuY2UgPSAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckRhdGF3YXJlaG91c2VTZXJ2ZXIgKyAiXCIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyRGF0YXdhcmVob3VzZUluc3RhbmNlKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgUmVwb3J0aW5nIFNlcnZlcgogICAgICAgIGlmKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdTZXJ2ZXIgLWVxICROb2RlLk5vZGVOYW1lKQogICAgICAgIHsKICAgICAgICAgICAgIyBJZiB0aGlzIGlzIGEgTWFuYWdlbWVudCBTZXJ2ZXIsIGRlcGVuZCBvbiBpdHNlbGYKICAgICAgICAgICAgIyBlbHNlIHdhaXQgZm9yIHRoZSBmaXJzdCBNYW5hZ2VtZW50IFNlcnZlcgogICAgICAgICAgICBpZiAoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlck1hbmFnZW1lbnRTZXJ2ZXJzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRGVwZW5kc09uID0gIlt4U0NPTU1hbmFnZW1lbnRTZXJ2ZXJTZXR1cF1PTU1TIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERlcGVuZHNPbiA9ICJbV2FpdEZvckFsbF1PTU1TIgogICAgICAgICAgICB9CgogICAgICAgICAgICB4U0NPTVJlcG9ydGluZ1NlcnZlclNldHVwICJPTVJTIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBEZXBlbmRzT24gPSAkRGVwZW5kc09uCiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSAkTm9kZS5Tb3VyY2VQYXRoCiAgICAgICAgICAgICAgICBTb3VyY2VGb2xkZXIgPSAiU3lzdGVtQ2VudGVyLlRQXE9wZXJhdGlvbnNNYW5hZ2VyLmVuIgogICAgICAgICAgICAgICAgU2V0dXBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgIE1hbmFnZW1lbnRTZXJ2ZXIgPSAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnNbMF0KICAgICAgICAgICAgICAgIFNSU0luc3RhbmNlID0gKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJSZXBvcnRpbmdTZXJ2ZXIgKyAiXCIgKyAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyUmVwb3J0aW5nSW5zdGFuY2UpCiAgICAgICAgICAgICAgICBEYXRhUmVhZGVyID0gJE5vZGUuU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyRGF0YVJlYWRlcgogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjIEluc3RhbGwgV2ViIENvbnNvbGUgU2VydmVycwogICAgICAgIGlmKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJXZWJDb25zb2xlU2VydmVycyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkKICAgICAgICB7CiAgICAgICAgICAgICREZXBlbmRzT24gPSBAKAogICAgICAgICAgICAgICAgIltXaW5kb3dzRmVhdHVyZV1ORVQtRnJhbWV3b3JrLUNvcmUiLAogICAgICAgICAgICAgICAgIltXaW5kb3dzRmVhdHVyZV1XZWItV2ViU2VydmVyIiwKICAgICAgICAgICAgICAgICJbV2luZG93c0ZlYXR1cmVdV2ViLVJlcXVlc3QtTW9uaXRvciIsCiAgICAgICAgICAgICAgICAiW1dpbmRvd3NGZWF0dXJlXVdlYi1XaW5kb3dzLUF1dGgiLAogICAgICAgICAgICAgICAgIltXaW5kb3dzRmVhdHVyZV1XZWItQXNwLU5ldCIsCiAgICAgICAgICAgICAgICAiW1dpbmRvd3NGZWF0dXJlXVdlYi1Bc3AtTmV0NDUiLAogICAgICAgICAgICAgICAgIltXaW5kb3dzRmVhdHVyZV1ORVQtV0NGLUhUVFAtQWN0aXZhdGlvbjQ1IiwKICAgICAgICAgICAgICAgICJbV2luZG93c0ZlYXR1cmVdV2ViLU1nbXQtQ29uc29sZSIsCiAgICAgICAgICAgICAgICAiW1dpbmRvd3NGZWF0dXJlXVdlYi1NZXRhYmFzZSIsCiAgICAgICAgICAgICAgICAiW1BhY2thZ2VdU1FMU2VydmVyMjAxMlN5c3RlbUNMUlR5cGVzIiwKICAgICAgICAgICAgICAgICJbUGFja2FnZV1SZXBvcnRWaWV3ZXIyMDEyUmVkaXN0cmlidXRhYmxlIgogICAgICAgICAgICApCiAgICAgICAgICAgICMgSWYgdGhpcyBpcyBhIE1hbmFnZW1lbnQgU2VydmVyLCBkZXBlbmQgb24gaXRzZWxmCiAgICAgICAgICAgICMgZWxzZSB3YWl0IGZvciB0aGUgZmlyc3QgTWFuYWdlbWVudCBTZXJ2ZXIKICAgICAgICAgICAgaWYgKCRTeXN0ZW1DZW50ZXJUZWNobmljYWxQcmV2aWV3T3BlcmF0aW9uc01hbmFnZXJNYW5hZ2VtZW50U2VydmVycyB8IFdoZXJlLU9iamVjdCB7JF8gLWVxICROb2RlLk5vZGVOYW1lfSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERlcGVuZHNPbiArPSBAKCJbeFNDT01NYW5hZ2VtZW50U2VydmVyU2V0dXBdT01NUyIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRGVwZW5kc09uICs9IEAoIltXYWl0Rm9yQWxsXU9NTVMiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHhTQ09NV2ViQ29uc29sZVNlcnZlclNldHVwICJPTVdDIgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBEZXBlbmRzT24gPSAkRGVwZW5kc09uCiAgICAgICAgICAgICAgICBFbnN1cmUgPSAiUHJlc2VudCIKICAgICAgICAgICAgICAgIFNvdXJjZVBhdGggPSAkTm9kZS5Tb3VyY2VQYXRoCiAgICAgICAgICAgICAgICBTb3VyY2VGb2xkZXIgPSAiU3lzdGVtQ2VudGVyLlRQXE9wZXJhdGlvbnNNYW5hZ2VyLmVuIgogICAgICAgICAgICAgICAgU2V0dXBDcmVkZW50aWFsID0gJE5vZGUuSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgICAgIE1hbmFnZW1lbnRTZXJ2ZXIgPSAkU3lzdGVtQ2VudGVyVGVjaG5pY2FsUHJldmlld09wZXJhdGlvbnNNYW5hZ2VyTWFuYWdlbWVudFNlcnZlcnNbMF0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIyBJbnN0YWxsIENvbnNvbGVzCiAgICAgICAgaWYoJFN5c3RlbUNlbnRlclRlY2huaWNhbFByZXZpZXdPcGVyYXRpb25zTWFuYWdlckNvbnNvbGVzIHwgV2hlcmUtT2JqZWN0IHskXyAtZXEgJE5vZGUuTm9kZU5hbWV9KQogICAgICAgIHsKICAgICAgICAgICAgeFNDT01Db25zb2xlU2V0dXAgIk9NQyIKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgRGVwZW5kc09uID0gQCgKICAgICAgICAgICAgICAgICAgICAiW1BhY2thZ2VdU1FMU2VydmVyMjAxMlN5c3RlbUNMUlR5cGVzIiwKICAgICAgICAgICAgICAgICAgICAiW1BhY2thZ2VdUmVwb3J0Vmlld2VyMjAxMlJlZGlzdHJpYnV0YWJsZSIKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIEVuc3VyZSA9ICJQcmVzZW50IgogICAgICAgICAgICAgICAgU291cmNlUGF0aCA9ICROb2RlLlNvdXJjZVBhdGgKICAgICAgICAgICAgICAgIFNvdXJjZUZvbGRlciA9ICJTeXN0ZW1DZW50ZXIuVFBcT3BlcmF0aW9uc01hbmFnZXIuZW4iCiAgICAgICAgICAgICAgICBTZXR1cENyZWRlbnRpYWwgPSAkTm9kZS5JbnN0YWxsZXJTZXJ2aWNlQWNjb3VudAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgokU2VjdXJlUGFzc3dvcmQgPSBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nIC1TdHJpbmcgIlBhc3NAd29yZDEiIC1Bc1BsYWluVGV4dCAtRm9yY2UKJEluc3RhbGxlclNlcnZpY2VBY2NvdW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAoIkNPTlRPU09cIUluc3RhbGxlciIsICRTZWN1cmVQYXNzd29yZCkKJExvY2FsU3lzdGVtQWNjb3VudCA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgKCJTWVNURU0iLCAkU2VjdXJlUGFzc3dvcmQpCiRTeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJBY3Rpb25BY2NvdW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAoIkNPTlRPU09cIW9tX3NhYSIsICRTZWN1cmVQYXNzd29yZCkKJFN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckRBU0FjY291bnQgPSBOZXctT2JqZWN0IFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNDcmVkZW50aWFsICgiQ09OVE9TT1whb21fZGFzIiwgJFNlY3VyZVBhc3N3b3JkKQokU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyRGF0YVJlYWRlciA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgKCJDT05UT1NPXCFvbV9kcmEiLCAkU2VjdXJlUGFzc3dvcmQpCiRTeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJEYXRhV3JpdGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAoIkNPTlRPU09cIW9tX2R3YSIsICRTZWN1cmVQYXNzd29yZCkKCiRDb25maWd1cmF0aW9uRGF0YSA9IEB7CiAgICBBbGxOb2RlcyA9IEAoCiAgICAgICAgQHsKICAgICAgICAgICAgTm9kZU5hbWUgPSAiKiIKICAgICAgICAgICAgUFNEc2NBbGxvd1BsYWluVGV4dFBhc3N3b3JkID0gJHRydWUKCiAgICAgICAgICAgIFNvdXJjZVBhdGggPSAiXFxSRDAxXEluc3RhbGxlciIKICAgICAgICAgICAgSW5zdGFsbGVyU2VydmljZUFjY291bnQgPSAkSW5zdGFsbGVyU2VydmljZUFjY291bnQKICAgICAgICAgICAgTG9jYWxTeXN0ZW1BY2NvdW50ID0gJExvY2FsU3lzdGVtQWNjb3VudAoKICAgICAgICAgICAgQWRtaW5BY2NvdW50ID0gIkNPTlRPU09cQWRtaW5pc3RyYXRvciIKCiAgICAgICAgICAgIFN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckFjdGlvbkFjY291bnQgPSAkU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyQWN0aW9uQWNjb3VudAogICAgICAgICAgICBTeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJEQVNBY2NvdW50ID0gJFN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckRBU0FjY291bnQKICAgICAgICAgICAgU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyRGF0YVJlYWRlciA9ICRTeXN0ZW1DZW50ZXIyMDEyT3BlcmF0aW9uc01hbmFnZXJEYXRhUmVhZGVyCiAgICAgICAgICAgIFN5c3RlbUNlbnRlcjIwMTJPcGVyYXRpb25zTWFuYWdlckRhdGFXcml0ZXIgPSAkU3lzdGVtQ2VudGVyMjAxMk9wZXJhdGlvbnNNYW5hZ2VyRGF0YVdyaXRlcgogICAgICAgIH0KICAgICAgICBAewogICAgICAgICAgICBOb2RlTmFtZSA9ICJPTTAxLmNvbnRvc28uY29tIgogICAgICAgICAgICBSb2xlcyA9IEAoCiAgICAgICAgICAgICAgICAiU3lzdGVtIENlbnRlciBUZWNobmljYWwgUHJldmlldyBPcGVyYXRpb25zIE1hbmFnZXIgRGF0YWJhc2UgU2VydmVyIiwKICAgICAgICAgICAgICAgICJTeXN0ZW0gQ2VudGVyIFRlY2huaWNhbCBQcmV2aWV3IE9wZXJhdGlvbnMgTWFuYWdlciBEYXRhd2FyZWhvdXNlIFNlcnZlciIsCiAgICAgICAgICAgICAgICAiU3lzdGVtIENlbnRlciBUZWNobmljYWwgUHJldmlldyBPcGVyYXRpb25zIE1hbmFnZXIgUmVwb3J0aW5nIFNlcnZlciIsCiAgICAgICAgICAgICAgICAiU3lzdGVtIENlbnRlciBUZWNobmljYWwgUHJldmlldyBPcGVyYXRpb25zIE1hbmFnZXIgTWFuYWdlbWVudCBTZXJ2ZXIiLAogICAgICAgICAgICAgICAgIlN5c3RlbSBDZW50ZXIgVGVjaG5pY2FsIFByZXZpZXcgT3BlcmF0aW9ucyBNYW5hZ2VyIFdlYiBDb25zb2xlIFNlcnZlciIsCiAgICAgICAgICAgICAgICAiU3lzdGVtIENlbnRlciBUZWNobmljYWwgUHJldmlldyBPcGVyYXRpb25zIE1hbmFnZXIgQ29uc29sZSIsCiAgICAgICAgICAgICAgICAiU1FMIFNlcnZlciAyMDE0IE1hbmFnZW1lbnQgVG9vbHMiCiAgICAgICAgICAgICkKICAgICAgICAgICAgU1FMU2VydmVycyA9IEAoCiAgICAgICAgICAgICAgICBAewogICAgICAgICAgICAgICAgICAgIFJvbGVzID0gQCgKICAgICAgICAgICAgICAgICAgICAgICAgIlN5c3RlbSBDZW50ZXIgVGVjaG5pY2FsIFByZXZpZXcgT3BlcmF0aW9ucyBNYW5hZ2VyIERhdGFiYXNlIFNlcnZlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0gQ2VudGVyIFRlY2huaWNhbCBQcmV2aWV3IE9wZXJhdGlvbnMgTWFuYWdlciBEYXRhd2FyZWhvdXNlIFNlcnZlciIsCiAgICAgICAgICAgICAgICAgICAgICAgICJTeXN0ZW0gQ2VudGVyIFRlY2huaWNhbCBQcmV2aWV3IE9wZXJhdGlvbnMgTWFuYWdlciBSZXBvcnRpbmcgU2VydmVyIgogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZU5hbWUgPSAiTVNTUUxTRVJWRVIiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICB9CiAgICApCn0KCmZvcmVhY2goJE5vZGUgaW4gJENvbmZpZ3VyYXRpb25EYXRhLkFsbE5vZGVzKQp7CiAgICBpZigkTm9kZS5Ob2RlTmFtZSAtbmUgIioiKQogICAgewogICAgICAgIFN0YXJ0LVByb2Nlc3MgLUZpbGVQYXRoICJyb2JvY29weS5leGUiIC1Bcmd1bWVudExpc3QgKCJgIkM6XFByb2dyYW0gRmlsZXNcV2luZG93c1Bvd2VyU2hlbGxcTW9kdWxlc2AiIGAiXFwiICsgJE5vZGUuTm9kZU5hbWUgKyAiXGMkXFByb2dyYW0gRmlsZXNcV2luZG93c1Bvd2VyU2hlbGxcTW9kdWxlc2AiIC9lIC9wdXJnZSAveGYiKSAtTm9OZXdXaW5kb3cgLVdhaXQKICAgIH0KfQoKT00gLUNvbmZpZ3VyYXRpb25EYXRhICRDb25maWd1cmF0aW9uRGF0YQpTZXQtRHNjTG9jYWxDb25maWd1cmF0aW9uTWFuYWdlciAtUGF0aCAuXE9NIC1WZXJib3NlClN0YXJ0LURzY0NvbmZpZ3VyYXRpb24gLVBhdGggLlxPTSAtVmVyYm9zZSAtV2FpdCAtRm9yY2U=
