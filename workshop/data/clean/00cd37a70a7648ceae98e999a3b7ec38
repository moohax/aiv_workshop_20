IITS.ps1,f585ecbd5778348a20c98fe2b6eb099e,Scan result is 1. IsMalware: 0,w6/Cu8K/PCMKLlN5bm9wc2lzCiAgIFRoaXMgZnVuY3Rpb24gd2lsbCBmaW5kIHRoZSBLYXNleWEgTWFjaGluZSBJRCBvZiB0aGUgY29tcHV0ZXIuICBJdCB3aWxsIGZpbmQgdGhlIGNvbXB1dGVyIG5hbWUgaWYgdGhlcmUgaXMgbm8ga2FzZXlhIGFnZW50IGluc3RhbGxlZC4KLkRFU0NSSVBUSU9OLgogICBUaGlzIGZ1bmN0aW9uIGNoZWNrcyB0aGUgcmVnaXN0cnkgZm9yIHRoZSBLYXNleWEgTWFjaGluZSBJRC4gIEl0IGNhbiBiZSB1c2VkIGluIG90aGVyIHNjcmlwdHMgdG8gZmluZCB0aGUgbmFtZS4KLkVYQU1QTEUKICBHZXQtS2FzZXlhTWFjaGluZUlECiM+CmZ1bmN0aW9uIEdldC1LYXNleWFNYWNoaW5lSUQKewogICAgUGFyYW0KICAgICgpCiAgICAKICAgIFByb2Nlc3MKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIGlmKCQoR2V0LVByb2Nlc3MgLU5hbWUgQWdlbnRNb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpLk5hbWUpCiAgICAgICAgICAgICAgICB7JChHZXQtSXRlbVByb3BlcnR5IC1QYXRoICJIS0xNOlxTb2Z0d2FyZVxXT1c2NDMyTm9kZVxLYXNleWFcQWdlbnRcSU5UVFNMNzQ4MjQwMTA0OTk4NzIiIC1OYW1lIE1hY2hpbmVJRCAtRXJyb3JBY3Rpb24gU3RvcCAtRXJyb3JWYXJpYWJsZSBDdXJyZW50RXJyb3IpLk1hY2hpbmVJRH0KICAgICAgICAgICAgRWxzZXskZW52OmNvbXB1dGVybmFtZX0KICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7JGVudjpjb21wdXRlcm5hbWV9ICAgCiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUaGlzIHNjcmlwdCBlbWFpbHMgTVNBbGFybUBpbnRlZ3JhdGVkaXQuY29tLgouREVTQ1JJUFRJT04KICAgVGhpcyBzY2lwdCBjcmVhdGVzIGFuIGF1dGhlbnRpY2F0aW9uIHRva2VuIGJhc2VkIG9uIHR3byBjcmVkZW50aWFsIGZpbGVzIG9uIHRoZSBsb2NhbCBtYWNoaW5lLCB0aGVuIGNvbm5lY3RzIHRvIG91ciBlbWFpbCBzZXJ2ZXIgYW5kIHNlbmRzIGEgbWVzc2FnZSB0byBNU0FsYXJtLiBJdCBwcm92aWRlcyBhIHNwZWNpZmljIHN1YmplY3QgYnV0IHJlcXVpcmVzIHRoZSBib2R5LiBBbiBvcHRpb25hbCBBdHRhY2htZW50IHBhcmFtZXRlciBjYW4gYmUgdXNlZCB0byBhdHRhY2ggYSBmaWxlLCBhbmQgdGhlIG9wdGlvbmFsIExvZ2dpbmcgc3dpdGNoIHdpbGwgb3V0cHV0IGEgbG9nIGZpbGUgYXQgdGhlIGVuZCBvZiBleGVjdXRpb24uIAouRVhBTVBMRQogICBFbWFpbC1NU2FsYXJtICJUaGlzIGlzIG15IEVtYWlsIgouRVhBTVBMRQogICBFbWFpbC1NU2FsYXJtIC1Cb2R5ICJUaGlzIGlzIG15IEVtYWlsIiAtQXR0YWNobWVudCAiQzpcRm9vLnR4dCIKIz4KZnVuY3Rpb24gRW1haWwtTVNhbGFybQp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICAgICAjIEJvZHkgb2YgdGhlIGUtbWFpbCB0byBiZSBzZW50IG91dC4KICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlKV0KICAgICAgICAkQm9keSwKCiAgICAgICAgIyBBbnkgYXR0YWNobWVudHMgKHNlcGFyYXRlZCBieSBjb21tYXMsIG5vIHNwYWNlOyBlbmNsb3NlIGVhY2ggZmlsZXBhdGggaW4gcXVvdGVzIGlmIG5lY2Vzc2FyeSwgYnV0ICpub3QqIHRoZSB3aG9sZSBsaXN0IG9mIHBhdGhzKS4KICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UsIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUpXQogICAgICAgICRBdHRhY2htZW50LAoKICAgICAgICAjIE9wdGlvbmFsIHN3aXRjaCB0byBjcmVhdGUgYSBsb2cgZmlsZSBhdCBjb21wbGV0aW9uIG9mIHRoZSBmdW5jdGlvbi4KICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXQogICAgICAgIFtTd2l0Y2hdJExvZ2dpbmcsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLCBWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlKV0KICAgICAgICAkU3ViamVjdAogICAgKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBsb2dzIGFycmF5CiAgICAgICAgJGxvZ3MgPSBAKCkKICAgICAgICAKICAgICAgICAjIEluaXRpYWxpemUgdGhlIGtpbGxzd2l0Y2gKICAgICAgICAka2lsbCA9IDAKCiAgICAgICAgIyBDb250YWluZXIgZm9yIC1FcnJvclZhcmlhYmxlCiAgICAgICAgJEN1cnJlbnRFcnJvciA9ICRudWxsCiAgICAgICAgCiAgICAgICAgIyBWZXJpZnkgdGhlIGtleSBmaWxlIGV4aXN0cwogICAgICAgIGlmKFRlc3QtUGF0aCAiQzpcSUlUU19TY3JpcHRzXEtleS5rZXkiKQogICAgICAgIHsKICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gSW1wb3J0aW5nIHRoZSBrZXkgZmlsZS4iCiAgICAgICAgICAgIHRyeXska2V5ID0gR2V0LUNvbnRlbnQgIkM6XElJVFNfU2NyaXB0c1xLZXkua2V5IiAtRXJyb3JBY3Rpb24gU3RvcCAtRXJyb3JWYXJpYWJsZSBDdXJyZW50RXJyb3J9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENvdWxkIG5vdCBpbXBvcnQga2V5IGZpbGUuIEVycm9yOiAkQ3VycmVudEVycm9yIgogICAgICAgICAgICAgICAgJGtpbGwrKwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEtleSBmaWxlIGRvZXMgbm90IGV4aXN0IGluIGV4cGVjdGVkIGxvY2F0aW9uLiIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgIH0KCiAgICAgICAgIyBWZXJpZnkgdGhlIHBhc3N3b3JkIGZpbGUgZXhpc3RzCiAgICAgICAgaWYoVGVzdC1QYXRoICJDOlxJSVRTX1NjcmlwdHNccGFzc3dkLnR4dCIpCiAgICAgICAgewogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBJbXBvcnRpbmcgYW5kIHNlY3VyaW5nIHRoZSBwYXNzd29yZCBmaWxlLiIKICAgICAgICAgICAgdHJ5eyRwYXNzd29yZCA9IEdldC1Db250ZW50ICJDOlxJSVRTX1NjcmlwdHNccGFzc3dkLnR4dCIgfCBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nIC1LZXkgJGtleSAtRXJyb3JBY3Rpb24gU3RvcCAtRXJyb3JWYXJpYWJsZSBDdXJyZW50RXJyb3J9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIFRoZXJlIHdhcyBhIHByb2JsZW0gd2l0aCB0aGUgcGFzc3dvcmQgZmlsZS4gRXJyb3I6ICRDdXJyZW50RXJyb3IiCiAgICAgICAgICAgICAgICAka2lsbCsrCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gUGFzc3dvcmQgZmlsZSBkb2VzIG5vdCBleGlzdCBpbiBleHBlY3RlZCBsb2NhdGlvbi4iCiAgICAgICAgICAgICRraWxsKysKICAgICAgICB9CgogICAgICAgICMgQ3JlYXRlIGEgY3JlZGVudGlhbCB0b2tlbgogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENyZWF0aW5nIGNyZWRlbnRpYWwgdG9rZW4uIgogICAgICAgIHRyeXskY3JlZGVudGlhbHMgPSBuZXctb2JqZWN0IC10eXBlbmFtZSBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAtYXJndW1lbnRsaXN0ICJmb3JlY2FzdEBpbnRlZ3JhdGVkaXQuY29tIiwkcGFzc3dvcmR9CiAgICAgICAgY2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENvdWxkIG5vdCBjcmVhdGUgY3JlZGVudGlhbCB0b2tlbi4gRXJyb3I6ICQoJGVycm9yWzBdKSIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgIH0KICAgIH0KCiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgIyBEbyBub3QgZXhlY3V0ZSBhbnl0aGluZyBpZiB0aGVyZSBoYXZlIGJlZW4gYW55IGVycm9ycyBzbyBmYXIuCiAgICAgICAgaWYoJGtpbGwgLWVxIDApCiAgICAgICAgewogICAgICAgICAgICBpZigkQXR0YWNobWVudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIyBWZXJpZnkgYWxsIGxpc3RlZCBhdHRhY2htZW50cyBhY3R1YWxseSBleGlzdC4KICAgICAgICAgICAgICAgICRBdHRhY2hDbGVhbkxpc3QgPSBAKCkKICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENoZWNraW5nIHZhbGlkaXR5IG9mIGF0dGFjaG1lbnRzLiIKICAgICAgICAgICAgICAgIGZvcmVhY2goJGl0ZW0gaW4gJEF0dGFjaG1lbnQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYoVGVzdC1QYXRoICRpdGVtKXskQXR0YWNoQ2xlYW5MaXN0ICs9ICRpdGVtfQogICAgICAgICAgICAgICAgICAgIGVsc2V7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQXR0ZW1wdGVkIGZpbGUgJyRpdGVtJyBkb2VzIG5vdCBleGlzdCBvciBjb3VsZCBub3QgYmUgcmVhY2hlZC4ifQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIFNlbmQgdGhlIGUtbWFpbCwgd2l0aCB0aGUgdmVyaWZpZWQgbGlzdCBvZiBhdHRhY2htZW50cy4KICAgICAgICAgICAgICAgIFRyeXtTZW5kLU1haWxNZXNzYWdlIC1UbyBNU2FsYXJtQGludGVncmF0ZWRpdC5jb20gLVN1YmplY3QgJChpZighJFN1YmplY3QpeyJbJChHZXQtS2FzZXlhTWFjaGluZUlEKV0gLSBFbWFpbGVkIGZyb20gUG93ZXJzaGVsbCBTY3JpcHQuIn1lbHNleyRTdWJqZWN0fSkgLWJvZHkgIntTY3JpcHR9YG5gbiRCb2R5IiAtQ3JlZGVudGlhbCAkY3JlZGVudGlhbHMgLVNtdHBTZXJ2ZXIgb3V0bG9vay5vZmZpY2UzNjUuY29tIC1Vc2VTc2wgLVBvcnQgNTg3IC1Gcm9tIGZvcmVjYXN0QGludGVncmF0ZWRpdC5jb20gLUF0dGFjaG1lbnRzICRBdHRhY2hDbGVhbkxpc3QgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgQ3VycmVudEVycm9yfQogICAgICAgICAgICAgICAgQ2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGRuJ3QgZW1haWwuIEVycm9yOiAkQ3VycmVudEVycm9yIn0KICAgICAgICAgICAgfQogICAgICAgICAgICBFbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICMgU2VuZCB0aGUgZS1tYWlsLCBubyBhdHRhY2htZW50cy4KICAgICAgICAgICAgICAgIFRyeXtTZW5kLU1haWxNZXNzYWdlIC1UbyBNU2FsYXJtQGludGVncmF0ZWRpdC5jb20gLVN1YmplY3QgJChpZighJFN1YmplY3QpeyJbJChHZXQtS2FzZXlhTWFjaGluZUlEKV0gLSBFbWFpbGVkIGZyb20gUG93ZXJzaGVsbCBTY3JpcHQuIn1lbHNleyRTdWJqZWN0fSkgLWJvZHkgIntTY3JpcHR9YG5gbiRCb2R5IiAtQ3JlZGVudGlhbCAkY3JlZGVudGlhbHMgLVNtdHBTZXJ2ZXIgb3V0bG9vay5vZmZpY2UzNjUuY29tIC1Vc2VTc2wgLVBvcnQgNTg3IC1Gcm9tIGZvcmVjYXN0QGludGVncmF0ZWRpdC5jb20gLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgQ3VycmVudEVycm9yfQogICAgICAgICAgICAgICAgQ2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGRuJ3QgZW1haWwuIEVycm9yOiAkQ3VycmVudEVycm9yIn0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbHNleyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIFNraXBwZWQgUHJvY2VzcyBibG9jayBkdWUgdG8gcHJldmlvdXMgZXJyb3JzLiBOdW1iZXIgb2Yga2lsbHN3aXRjaCB0cmlnZ2VyczogJGtpbGwifQogICAgfQoKICAgIEVuZAogICAgewogICAgICAgIGlmKCRMb2dnaW5nKQoJICAgIHsKCQkgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxFbWFpbE1TYWxhcm1fSUlUUy50eHQiCiAgICAJCWZvcmVhY2goJGxvZyBpbiAkbG9ncykKICAgIAkJeyIkbG9nIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZH0KICAgIAl9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUaGlzIGZ1bmN0aW9uIHdpbGwgZW5hYmxlIG9yIGRpc2FibGUgdGhlIHdpbmRvd3MgMTAgYWN0aW9uIGNlbnRlci4KLkRFU0NSSVBUSU9OCiAgIFRoaXMgZnVuY3Rpb24gY2hlY2tzIGZvciB0aGUgZXhpc3RlbmNlIG9mIHRoZSBuZWNjZXNzYXJ5IHJlZ2lzdHJ5IGtleXMgYW5kIHdpbGwgY3JlYXRlIHRoZSBrZXlzIGlmIG5lZWRlZC4gIE9uY2UgdGhleSBhcmUgY3JlYXRlZCBvciB2ZXJpZmllZCB0byBiZSB0aGVyZSB0aGVuIGl0IHdpbGwgY2hhbmdlIHRoZSBhcHByb3ByaWF0ZSBkd29yZCBiYXNlZCBvbiB1c2VyIHJlcXVlc3QKLkVYQU1QTEUKICAgVG9nZ2xlLUFjdGlvbkNlbnRlciAtU2V0dGluZyBFbmFibGUKLkVYQU1QTEUKICAgQW5vdGhlciBleGFtcGxlIG9mIGhvdyB0byB1c2UgdGhpcyBjbWRsZXQKIz4KZnVuY3Rpb24gVG9nZ2xlLUFjdGlvbkNlbnRlcgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICAgICAjIFBhcmFtMSBoZWxwIGRlc2NyaXB0aW9uCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsCiAgICAgICAgICAgICAgICAgICBWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlLAogICAgICAgICAgICAgICAgICAgUG9zaXRpb249MAogICAgICAgICAgICAgICAgICAgKV0KICAgICAgICBbVmFsaWRhdGVTZXQoIkVuYWJsZSIsIkRpc2FibGUiKV0KICAgICAgICBbU3RyaW5nXSRTZXR0aW5nCiAgICApCgogICAgQmVnaW4KICAgIHsKICAgICAgICAkcmVncGF0aCA9ICJIS0NVOlxTb2Z0d2FyZVxQb2xpY2llc1xNaWNyb3NvZnRcV2luZG93c1xFeHBsb3JlciIKICAgICAgICAkbmFtZWR3b3JkID0gIkRpc2FibGVOb3RpZmljYXRpb25DZW50ZXIiCiAgICAgICAgJG91dHB1dD0gIiRlbnY6d2luZGlyXFRlbXBcYWN0aW9uY2VudGVyX0lJVFMudHh0IgogICAgICAgIGlmKCRTZXR0aW5nIC1lcSAiRW5hYmxlIikKICAgICAgICB7CiAgICAgICAgICAgICRTdGF0dXMgPSAwCiAgICAgICAgfQogICAgICAgIEVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRTdGF0dXMgPSAxCiAgICAgICAgfQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgJG1hY2hpbmVJRCAgPSAkKEdldC1JdGVtUHJvcGVydHkgLVBhdGggIkhLTE06XFNvZnR3YXJlXFdPVzY0MzJOb2RlXEthc2V5YVxBZ2VudFxJTlRUU0w3NDgyNDAxMDQ5OTg3MiIgLU5hbWUgTWFjaGluZUlEIC1FcnJvckFjdGlvbiBTdG9wIC1FcnJvclZhcmlhYmxlIEN1cnJlbnRFcnJvcikuTWFjaGluZUlECiAgICAgICAgICAgIGlmICghKFRlc3QtUGF0aCAkcmVncGF0aCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkKEdldC1EYXRlKSAtIFJlZ2lzdHJ5IHBhdGggZG9lcyBub3QgZXhpc3QuIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkb3V0cHV0IC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgICAgICBOZXctSXRlbSAtUGF0aCAkcmVncGF0aCAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgQ3VycmVudEVycm9yCiAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSBDcmVhdGVkIG5ldyBrZXkgJHJlZ3BhdGguIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkb3V0cHV0IC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgICAgICBOZXctSXRlbVByb3BlcnR5IC1QYXRoICRyZWdwYXRoIC1OYW1lICRuYW1lZHdvcmQgLVZhbHVlICRTdGF0dXMgLVByb3BlcnR5VHlwZSBEV09SRCAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgQ3VycmVudEVycm9yCiAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSBDcmVhdGVkIG5ldyBkd29yZCAkbmFtZWR3b3JkIHdpdGggdmFsdWUgb2YgJFNldHRpbmcuIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkb3V0cHV0IC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUpIC0gUmVnaXN0cnkgcGF0aCBleGlzdHMuIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkb3V0cHV0IC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkcmVncGF0aCAtTmFtZSAkbmFtZWR3b3JkIC1WYWx1ZSAkU3RhdHVzIC1Qcm9wZXJ0eVR5cGUgRFdPUkQgLUZvcmNlIC1FcnJvckFjdGlvbiBTdG9wIC1FcnJvclZhcmlhYmxlIEN1cnJlbnRFcnJvcgogICAgICAgICAgICAgICAgICIkKEdldC1EYXRlKSAtIFNldCBuZXcgZHdvcmQgJG5hbWVkd29yZCB3aXRoIHZhbHVlIG9mICRTZXR0aW5nLiIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJG91dHB1dCAtRm9yY2UgLUFwcGVuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIENhdGNoCiAgICAgICAgewogICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSBSYW4gaW50byBwcm9ibGVtIGdldHRpbmcgdGhlIG1hY2hpbmVJRCIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJG91dHB1dCAtRm9yY2UgLUFwcGVuZAogICAgICAgIH0KICAgIH0KICAgIEVuZAogICAgewogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBwcm9jZWR1cmUgd2lsbCBjYWxjdWxhdGUgdGhlIHRvdGFsIG1lc3NhZ2VzIHNlbnQgZnJvbSBhbGwgdXNlcnMgaW4gT2ZmaWNlIDM2NS4gIEl0IGNhbiB0aGVuIGVtYWlsIHRoZSByZXN1bHRzIGFsb25nIHdpdGggYSAuY3N2IGZpbGUgZm9yIGZ1dGhlciBkYXRhIG1hbmlwdWxhdGlvbgouREVTQ1JJUFRJT04KICAgVGhlcmUgYXJlIDMgcGFydHMgdG8gdGhpcyBwcm9jZWR1cmUuICBUaGUgZmlyc3QgcGFydCBjb25uZWN0cyB0byBPZmZpY2UgMzY1IGFmdGVyIHJlcXVlc3RpbmcgdGhlIGNyZWRlbnRpYWxzLiAgVGhlIGNyZWRlbnRpYWxzIHRoYXQgYXJlIHVzZWQgd2lsbCBkaWN0YXRlIHdoYXQgdGVuYW50IGluZm9ybWF0aW9uIGlzIGdhdGhlcmVkLiAgCi5FWEFNUExFCiAgIEdldC1NYWlsRmxvd1N0YXRpc3RpY3MgLUVycm9ybG9nCiM+CmZ1bmN0aW9uIEdldC1NYWlsRmxvd1N0YXRzCnsKICAgIFBhcmFtCiAgICAoCiAgICAgICAgIyBFbmFibGVzIG91dHB1dGluZyBvZiBhbiBlcnJvciBsb2cgKC50eHQpIGF0IGNvbmNsdXNpb24gb2YgcHJvY2VkdXJlLgogICAgICAgIFtzd2l0Y2hdJGVycm9ybG9nCiAgICApCgogICAgQmVnaW4KICAgIHsKICAgICAgICAkZmlsZV9wYXRoX2NzdiA9ICIkZW52OndpbmRpclxUZW1wXEVtYWlsX3N0YXRzXyQoZ2V0LWRhdGUgLWYgeXl5eU1NZGQpLmNzdiIKICAgICAgICAkc2hvdWxkZW1haWwgPSBSZWFkLUhvc3QgLVByb21wdCAiRG8geW91IHdhbnQgdG8gaGF2ZSB0aGUgcmVzdWx0cyBlbWFpbGVkIHRvIHlvdSBhbG9uZyB3aXRoIGEgQ1NWIGF0dGFjaG1lbnQ/IEVudGVyICdZZXMnIGlmIGRlc2lyZWQuIElmIG5vIGVtYWlsIGlzIHJlcXVpcmVkIHRoZW4gb3V0cHV0IGlzIC5jc3YgbG9jYXRlZCBhdCAkZmlsZV9wYXRoX2NzdiIKICAgICAgICBpZigkc2hvdWxkZW1haWwgLWxpa2UgInllcyIpewogICAgICAgICRvZmZpY2UzNjUgPSBSZWFkLUhvc3QgLVByb21wdCAiRG8geW91IHdhbnQgdG8gc2VuZCB0aHJvdWdoIE9mZmljZSAzNjU/IEVudGVyIFllcyBvciBObyIKICAgICAgICAgICAgaWYoJG9mZmljZTM2NSAtbGlrZSAiWWVzIil7CiAgICAgICAgICAgICRzbXRwU2VydmVyID0gIm91dGxvb2sub2ZmaWNlMzY1LmNvbSIKICAgICAgICAgICAgfQogICAgICAgICAgICBFbHNlewogICAgICAgICAgICAkc210cFNlcnZlciA9IFJlYWQtSG9zdCAtUHJvbXB0ICJQbGVhc2UgZW50ZXIgdGhlIElQIGFkZHJlc3Mgb2YgYW4gYWNjZXNzaWJsZSBFeGNoYW5nZSBTZXJ2ZXIuIgogICAgICAgICAgICB9CiAgICAgICAgJGZyb20gPSByZWFkLWhvc3QgLVByb21wdCAiUGxlYXNlIGVudGVyIHRoZSBGcm9tIGFkZHJlc3MuIgogICAgICAgICR0byA9IFJlYWQtSG9zdCAtUHJvbXB0ICJQbGVhc2UgZW50ZXIgdGhlIFRvIGFkZHJlc3MuIgogICAgICAgIH0KICAgICAgICAkY3JlZGVudGlhbCA9IEdldC1DcmVkZW50aWFsIC1NZXNzYWdlICJQbGVhc2UgZW50ZXIgYW4gYWNjb3VudCB0aGF0IGhhcyBhZG1pbmlzdHJhdG9yIHByaXZsZWdlcyBvbiB0aGUgT2ZmaWNlIDM2NSB0ZW5hbnQuIgogICAgICAgIFdyaXRlLU91dHB1dCAiQ2xvc2luZyBvcGVuIHBvd2Vyc2hlbGwgc2Vzc2lvbjogJChHZXQtUFNTZXNzaW9uKSIKICAgICAgICBHZXQtUFNTZXNzaW9uIHwgUmVtb3ZlLVBTU2Vzc2lvbgogICAgICAgIHRyeXsKICAgICAgICAgICAgJFNlc3Npb24gPSBOZXctUFNTZXNzaW9uIC1Db25maWd1cmF0aW9uTmFtZSBNaWNyb3NvZnQuRXhjaGFuZ2UgLUNvbm5lY3Rpb25VcmkgaHR0cHM6Ly9wcy5vdXRsb29rLmNvbS9wb3dlcnNoZWxsLyAtQ3JlZGVudGlhbCAkY3JlZGVudGlhbCAtQXV0aGVudGljYXRpb24gQmFzaWMgLUFsbG93UmVkaXJlY3Rpb24gLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgLUVycm9yVmFyaWFibGUgc2Vzc2lvbl9pc3N1ZQogICAgICAgICAgICBJbXBvcnQtUFNTZXNzaW9uICRTZXNzaW9uIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlIC1FcnJvclZhcmlhYmxlICRzZXNzaW9uX2lzc3VlCiAgICAgICAgICAgIGNscwogICAgICAgICAgICB9CiAgICAgICAgY2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiVGhlcmUgd2FzIGFuIGlzc3VlIGNvbm5lY3RpbmcgdG8gT2ZmaWNlIDM2NSB3aXRoIHRoZSBjcmVkZW50aWFscyBzdXBwbGllZC4gIFBsZWFzZSB0cnkgYWdhaW4gb3IgY2hlY2sgdGhlIGVycm9yIGxvZy4iCiAgICAgICAgICAgICRzZXNzaW9uX2lzc3VlIHwgT3V0LUZpbGUgLWZvcmNlICIkZW52OlRFTVBcRXJyb3JfbG9nXyQoZ2V0LWRhdGUgLWYgeXl5eU1NZGQpLnR4dCIKICAgICAgICAgICAgdGhyb3cKICAgICAgICAgICAgfQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIFtpbnRdJGRheXNfcGFzdCA9IC0oUmVhZC1Ib3N0IC1Qcm9tcHQgJ0VudGVyIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgcGFzdCB0byBnYXRoZXIgcmVwb3J0cy4gVXAgdG8gYSBtYXggb2YgMzAgZGF5cycpCiAgICAgICAgJGRhdGUgPSBnZXQtZGF0ZQogICAgICAgICRyZXBvcnQgPSBAKCkKICAgICAgICAkZW50cnkgPSAxCiAgICAgICAgJHJlY2lwaWVudHMgPSBAKCkKICAgICAgICBXcml0ZS1PdXRwdXQgIkdldHRpbmcgcmVjaXBpZW50IGxpc3QgZm9yIHVzZXJzIHdpdGggYSB1c2VybWFpbGJveC4iCiAgICAgICAgJHJlY2lwaWVudHMgPSBHZXQtUmVjaXBpZW50IC1SZWNpcGllbnRUeXBlRGV0YWlscyBVc2VyTWFpbEJveCAtUmVjaXBpZW50VHlwZSBVc2VyTWFpbEJveAogICAgICAgICRzdGFydF90aW1lID0gR2V0LURhdGUKICAgICAgICBmb3JlYWNoICgkcmVjaXBpZW50IGluICRyZWNpcGllbnRzKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJDdXJyZW50bHkgd29ya2luZyBvbiAkcmVjaXBpZW50LiAgTnVtYmVyICRlbnRyeSBvZiAkKCgkcmVjaXBpZW50cyB8IG1lYXN1cmUtb2JqZWN0KS5Db3VudCkgdG90YWwuICQoKCRlbnRyeS8kKCgkcmVjaXBpZW50cyB8IG1lYXN1cmUtb2JqZWN0KS5Db3VudCkpKjEwMCAtYXMgW2ludF0pJSBDb21wbGV0ZSIKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRtZXNzYWdlc19yZWNlaXZlZCA9IEdldC1NZXNzYWdlVHJhY2UgLVJlY2lwaWVudEFkZHJlc3MgJHJlY2lwaWVudC5QcmltYXJ5U01UUEFkZHJlc3MgLVN0YXJ0RGF0ZSAkZGF0ZS5BZGREYXlzKCRkYXlzX3Bhc3QpIC1FbmREYXRlICRkYXRlIHwgTWVhc3VyZS1PYmplY3QgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgaXNzdWUKICAgICAgICAgICAgICAgICRtZXNzYWdlc19zZW50ID0gR2V0LU1lc3NhZ2VUcmFjZSAtU2VuZGVyQWRkcmVzcyAkcmVjaXBpZW50LlByaW1hcnlTTVRQQWRkcmVzcyAtU3RhcnREYXRlICRkYXRlLkFkZERheXMoJGRheXNfcGFzdCkgLUVuZERhdGUgJGRhdGUgfCBNZWFzdXJlLU9iamVjdCAtRXJyb3JBY3Rpb24gU3RvcCAtRXJyb3JWYXJpYWJsZSBpc3N1ZQogICAgICAgICAgICAgICAgJFByb3A9W29yZGVyZWRdQHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdEaXNwbGF5IE5hbWUnPSRyZWNpcGllbnQuRGlzcGxheU5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTdGFydCBEYXRlJz0kZGF0ZS5BZGREYXlzKCRkYXlzX3Bhc3QpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRW5kIERhdGUnPSRkYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTWVzc2FnZXMgUmVjZWl2ZWQnPSRtZXNzYWdlc19yZWNlaXZlZC5Db3VudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ01lc3NhZ2VzIFNlbnQnPSRtZXNzYWdlc19zZW50LkNvdW50CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVG90YWwgTWVzc2FnZXMnPSgkbWVzc2FnZXNfcmVjZWl2ZWQuQ291bnQgKyAkbWVzc2FnZXNfc2VudC5Db3VudCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRyZXBvcnQgKz0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QgLVByb3BlcnR5ICRQcm9wCiAgICAgICAgICAgICAgICAkZW50cnkgPSArKyRlbnRyeQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiRXJyb3Igd2l0aCAkcmVjaXBpZW50LiAgQ2hlY2sgZXJyb3IgbG9nIGZvciBleGFjdCBpc3N1ZSIKICAgICAgICAgICAgICAgICRpc3N1ZXMgKz0gJGlzc3VlCiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJHNob3VsZGVtYWlsIC1saWtlICJ5ZXMiKQogICAgICAgIHsKICAgICAgICAgICAgJHJlcG9ydCB8IEV4cG9ydC1Dc3YgLVBhdGggJGZpbGVfcGF0aF9jc3YgLWZvcmNlCiAgICAgICAgICAgICRzdWJqZWN0ID0gIlNjcmlwdCBmaW5pc2hlZCBpbiAkKCgoZ2V0LWRhdGUpLlN1YnRyYWN0KCRzdGFydF90aW1lKSkuVG90YWxNaW51dGVzIC1hcyBbaW50XSkgbWludXRlcyEiCiAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFNlbmQtTWFpbE1lc3NhZ2UgLVRvICR0byAtU3ViamVjdCAkc3ViamVjdCAtQm9keUFzSHRtbCAiJCgkcmVwb3J0IHwgQ29udmVydFRvLUh0bWwpLCQoJGlzc3VlcyB8IENvbnZlcnRUby1IdG1sKSIgLUNyZWRlbnRpYWwgJGNyZWRlbnRpYWwgLVNtdHBTZXJ2ZXIgJHNtdHBTZXJ2ZXIgLVVzZVNzbCAtRnJvbSAkZnJvbSAtQXR0YWNobWVudHMgJGZpbGVfcGF0aF9jc3YgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgZW1haWxfZXJyb3IKICAgICAgICAgICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICRmaWxlX3BhdGhfY3N2IC1Gb3JjZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgdHJ5aW5nIHRvIGVtYWlsIGZpbGUuICBEZWZhdWx0aW5nIHRvIGZpbGUgb3V0cHV0LiIKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiVGhlIHJlcG9ydCBoYXMgYmVlbiBnZW5lcmF0ZWQgYW5kIGlzIGxvY2F0ZWQgYXQgJGZpbGVfcGF0aF9jc3YiCiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbHNlCiAgICAgICAgewogICAgICAgICAgICAgICAgJHJlcG9ydCB8IEV4cG9ydC1Dc3YgLVBhdGggJGZpbGVfcGF0aF9jc3YgLUZvcmNlCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlRoZSByZXBvcnQgaGFzIGJlZW4gZ2VuZXJhdGVkIGFuZCBpcyBsb2NhdGVkIGF0ICRmaWxlX3BhdGhfY3N2IgogICAgICAgIH0KICAgIFdyaXRlLU91dHB1dCAiQ2xvc2luZyBwb3dlcnNoZWxsIHNlc3Npb25zOiAkKEdldC1QU1Nlc3Npb24pIgogICAgR2V0LVBTU2Vzc2lvbiB8IFJlbW92ZS1QU1Nlc3Npb24gICAgICAgCiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUaGlzIHJlbW92ZXMgYSB3b3JkIGZyb20gb3V0Y29ycmVjdCBpbiBhbnl0aGluZyB0aGF0IHVzZXMgTWljcm9zb2Z0IFdvcmQuIAouREVTQ1JJUFRJT04KICAgVGhpcyBjbWRsZXQgd2lsbCBjb25uZWN0IHRvIHRoZSBsb2NhbCBtYWNoaW5lJ3MgTWljcm9zb2Z0IFdvcmQgaW5zdGFsbGF0aW9uIGFuZCB0aGVuIHJlbW92ZSBhIHdvcmQgc28gdGhhdCBpdCBkb2VzIG5vdCBhdXRvY29ycmVjdCB0byBhbm90aGVyIHdvcmQuICBlaHIgd2lsbCBubyBsb25nZXIgYXV0b2NvcnJlY3QgdG8gaGVyLgouRVhBTVBMRQogICBSZW1vdmUtQXV0b0NvcnJlY3QgLVdvcmRUb1JlbW92ZSAiZWhyIgoKIz4KZnVuY3Rpb24gUmVtb3ZlLUF1dG9Db3JyZWN0CnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbQogICAgKAogICAgICAgICMgVGhlIHdvcmQgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZC4KICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0wKV0KICAgICAgICBbc3RyaW5nXSRXb3JkVG9SZW1vdmUKICAgICkKCiAgICBCZWdpbgogICAgewogICAgdHJ5CiAgICB7CiAgICAgICAgJEVycm9yTG9nPSAiJGVudjp3aW5kaXJcVGVtcFxkaXNhYmxlYXV0b2NvcnJlY3RvdXRwdXRfSUlUUy50eHQiCiAgICAgICAgJGZvdW5kPTAKICAgICAgICAkd29yZCA9IE5ldy1PYmplY3QgLUNvbU9iamVjdCB3b3JkLmFwcGxpY2F0aW9uIC1FcnJvckFjdGlvbiBTdG9wIC1FcnJvclZhcmlhYmxlIEN1cnJlbnRFcnJvcgogICAgICAgICR3b3JkLnZpc2libGUgPSAkZmFsc2UKICAgIH0KICAgIGNhdGNoCiAgICB7CiAgICAgICAgIiQoR2V0LURhdGUpIC0gUHJvYmxlbSBzdGFydGluZyBXT1JEIGFzIGEgY29tIG9iamVjdC4gIEVycm9yID0gJEN1cnJlbnRFcnJvciIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJEVycm9yTG9nIC1BcHBlbmQKICAgIH0KICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICBpZighJEN1cnJlbnRFcnJvcikKICAgICAgICB7CiAgICAgICAgICAgIFRyeQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkZW50cmllcyA9ICR3b3JkLkF1dG9Db3JyZWN0LmVudHJpZXMKICAgICAgICAgICAgICAgIGZvcmVhY2goJGUgaW4gJGVudHJpZXMpCiAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgIGlmKCRlLm5hbWUgLWVxICRXb3JkVG9SZW1vdmUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSBGb3VuZCAkV29yZFRvUmVtb3ZlIGluIEF1dG8gQ29ycmVjdCBMaXN0LiIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJEVycm9yTG9nIC1BcHBlbmQKICAgICAgICAgICAgICAgICAgICAgICAgJGZvdW5kPTEKICAgICAgICAgICAgICAgICAgICAgICAgJGUuZGVsZXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUpIC0gRGVsZXRlZCAkV29yZFRvUmVtb3ZlIGluIEF1dG8gQ29ycmVjdCBMaXN0LiIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJEVycm9yTG9nIC1BcHBlbmQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigkZm91bmQgLWVxIDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUpIC0gRGlkIG5vdCBmaW5kICRXb3JkVG9SZW1vdmUgaW4gQXV0byBDb3JyZWN0IExpc3QuIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkRXJyb3JMb2cgLUFwcGVuZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIENhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkKEdldC1EYXRlKSAtIFNvbWV0aGluZyB3ZW50IHdyb25nIHdoaWxlIHRyeWluZyB0byByZW1vdmUgdGhlIHdvcmQgJFdvcmRUb1JlbW92ZSIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJEVycm9yTG9nIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbHNlCiAgICAgICAgewogICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Gcm9tIFNjcmlwdF9HZW5pZUBpbnRlZ3JhdGVkaXQuY29tIC1Cb2R5ICJQcm9ibGVtIHN0YXJ0aW5nIFdPUkQgYXMgYSBjb20gb2JqZWN0LiAgRXJyb3IgPSAkQ3VycmVudEVycm9yIiAtQXR0YWNobWVudCAkRXJyb3JMb2cKICAgICAgICB9CiAgICB9CiAgICBFbmQKICAgIHsKICAgICAgICAkd29yZC5RdWl0KCkKICAgICAgICAkd29yZCA9ICRudWxsCiAgICAgICAgW2djXTo6Y29sbGVjdCgpCiAgICAgICAgW2djXTo6V2FpdEZvclBlbmRpbmdGaW5hbGl6ZXJzKCkKICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIERlbGV0ZSBhIHVzZXIncyAzNjUgYWNjb3VudAouREVTQ1JJUFRJT04KICAgV2lsbCBwcm9tcHQgZm9yIGVtYWlsIGFkZHJlc3Mgb2YgdXNlciBhbmQgZGlzYWJsZSBhZnRlciB5b3UgZ2l2ZSB0aGUgMzY1IGNyZWRlbnRpYWxzCi5FWEFNUExFCiAgIEV4YW1wbGUgb2YgaG93IHRvIHVzZSB0aGlzIGNtZGxldAojPgpmdW5jdGlvbiBkaXNhYmxlLTM2NS1hY2NvdW50CnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbSAoW3N0cmluZ10kbWFpbGJveD0ocmVhZC1ob3N0ICJFbnRlciB1c2VyJ3MgZW1haWwgYWRkcmVzczoiKSkKCiAgICAjQ29ubmVjdCB0byBjbGllbnQncyAzNjUKICAgICRMaXZlQ3JlZCA9IEdldC1DcmVkZW50aWFsCiAgICBJbXBvcnQtTW9kdWxlIG1zb25saW5lOyBDb25uZWN0LU1zb2xTZXJ2aWNlIC1DcmVkZW50aWFsICRsaXZlY3JlZAogICAgJFNlc3Npb24gPSBOZXctUFNTZXNzaW9uIC1Db25maWd1cmF0aW9uTmFtZSBNaWNyb3NvZnQuRXhjaGFuZ2UgLUNvbm5lY3Rpb25VcmkgaHR0cHM6Ly9wcy5vdXRsb29rLmNvbS9wb3dlcnNoZWxsLz9wcm94eW1ldGhvZD1ycHMgLUNyZWRlbnRpYWwgJExpdmVDcmVkIC1BdXRoZW50aWNhdGlvbiBCYXNpYyAtQWxsb3dSZWRpcmVjdGlvbgogICAgSW1wb3J0LVBTU2Vzc2lvbiAkU2Vzc2lvbgoKICAgIFNldC1Nc29sVXNlciAtVXNlclByaW5jaXBhbE5hbWUgJG1haWxib3ggLUJsb2NrQ3JlZGVudGlhbCAkdHJ1ZQogICAgCn0KCjwjCiAgIEdldCBBcHAgVmVyc2lvbgouREVTQ1JJUFRJT04KICAgR2l2ZXMgeW91IHRoZSBleGFjdCBhcHBsaWNhdGlvbiB2ZXJzaW9uIGZvciBhbiBhcHAgaW4gV2luZG93cwouRVhBTVBMRQogICBZb3Ugd2lsbCBiZSBwcm9tcHRlZCBmb3IgdGhlIGZ1bGwgcGF0aCBhbmQgYXBwbGljYXRpb24gbmFtZSwgaWU6ICBjOlx3aW5kb3dzXGFwcHBwLmV4ZQoKIz4KZnVuY3Rpb24gZ2V0LWFwcC12ZXJzaW9uCnsKCiAgICBQYXJhbSAoW3N0cmluZ10kYXBwPShSZWFkLWhvc3QgIkZVTEwgcGF0aCB3aXRoIGZpbGVuYW1lOiIpKQoKJFZlcnNpb25TdHJpbmcgPSBbU3lzdGVtLkRpYWdub3N0aWNzLkZpbGVWZXJzaW9uSW5mb106OkdldFZlcnNpb25JbmZvKCRhcHApLkZpbGV2ZXJzaW9uCiRPdXRwdXRTdHJpbmcgPSAiJE1hY2hpbmUgJFF1ZXJ5U3RyaW5nIEFwcFZlcnNpb24gJFZlcnNpb25TdHJpbmciCgoKJHNlcD0iLiIKJHBhcnRzPSRWZXJzaW9uU3RyaW5nLnNwbGl0KCRzZXApCiRwYXJ0c1swXQoKfQoKPCMKLlN5bm9wc2lzCiAgIEV4dGVybmFsIFB1c2ggb2YgS2FzZXlhIHZpYSBQb3dlcnNoZWxsCi5ERVNDUklQVElPTgogICBJZiBhIG1hY2hpbmUgb24gYSBuZXR3b3JrIGRvZXNuJ3QgaGF2ZSBwb3dlcnNoZWxsIE9SIGlmIGl0J3MgYSBtYWNoaW5lCiAgIGZyb20gYW4gYWNxdWlzaXN0aW9uIHRoYXQgd2UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8geWV0LCB0aGlzIHdpbGwgaW5zdGFsbAogICBLYXNleWEKLkVYQU1QTEUKICAgQWZ0ZXIgZXhlY3V0aW9uLCB5b3UnbGwgYmUgYXNrZWQgZm9yIHRoZSBwYXRoIG9mIHRoZSBLYXNleWEgaW5zdGFsbGVyIGZvcgogICB0aGUgY2xpZW50CiM+CmZ1bmN0aW9uIGV4dGVybmFsLWthc2V5YS1wdXNoCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbQogICAgKAogICAgICAgICMgUGFyYW0xIGhlbHAgZGVzY3JpcHRpb24KICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0wKV0KICAgICAgICBbc3RyaW5nXSRrYXNleWFMaW5rPShyZWFkLWhvc3QgIklucHV0IHRoZSBmdWxsIFVSTCBmb3IgdGhlIEthc2V5YSBjbGllbnQgdG8gYmUgaW5zdGFsbGVkLiAgRXhhbXBsZTogaHR0cHM6Ly93d3cuZHJvcGJveC5jb20vcy9vNnE5YmJlOTFqY3NvYTcvc2NjaXRfS2NzU2V0dXAuZXhlP2RsPTEiKQoKICAgICkKCiAgICBCZWdpbgogICAgewogICAgJHNjY2l0X3VybCA9ICRrYXNleWFMaW5rIAogICAgJGthc2V5YV9wYXRoPSAiJEVudjpTeXN0ZW1Ecml2ZVxpaXRzX21nbXQiIAogICAgfQogICAgUHJvY2VzcwogICAgewogICAgI0NyZWF0ZSBLYXNleWEgZG93bmxvYWQgcGF0aCBpZiBpdCBkb2Vzbid0IGFscmVhZHkgZXhpc3QgCiAgICBpZiAoKFRlc3QtUGF0aCAka2FzZXlhX3BhdGgpIC1lcSAkZmFsc2UpIHtOZXctSXRlbSAtdHlwZSBkaXJlY3RvcnkgLVBhdGggJGthc2V5YV9wYXRoIHwgb3V0LW51bGx9IAogICAgJHRhYmxldXJsCiAgICAjRG93bmxvYWQgS2FzZXlhIGlmIGl0J3Mgbm90IGFscmVhZHkgdGhlcmUgCiAgICBpZiAoKFRlc3QtUGF0aCAiJGthc2V5YV9wYXRoXHNjY2l0X0tjc1NldHVwLmV4ZSIpIC1lcSAkZmFsc2UpCiAgICAgICAgeyAKICAgICAgICAgICAgJGthc2V5YV9kbG9hZF9maWxlID0gIiRrYXNleWFfcGF0aFxzY2NpdF9LY3NTZXR1cC5leGUiIAogICAgICAgICAgICAka2FzZXlhX2Rsb2FkID0gbmV3LW9iamVjdCBTeXN0ZW0uTmV0LldlYkNsaWVudCAKICAgICAgICAgICAgJGthc2V5YV9kbG9hZC5Eb3dubG9hZEZpbGUoJHNjY2l0X3VybCwka2FzZXlhX2Rsb2FkX2ZpbGUpIAogICAgICAgIH0gCgogICAgI1J1biBLYXNleWEgYW5kIHdhaXQgZm9yIGl0IHRvIGV4aXQgCiAgICAka2FzZXlhX2xhdW5jaCA9IG5ldy1vYmplY3QgRGlhZ25vc3RpY3MuUHJvY2Vzc1N0YXJ0SW5mbyAKICAgICRrYXNleWFfbGF1bmNoLkZpbGVOYW1lID0gIiRrYXNleWFfcGF0aFxzY2NpdF9LY3NTZXR1cC5leGUiIAoKICAgICMka2FzZXlhX2xhdW5jaC5Bcmd1bWVudHMgPSAka2FzZXlhX3N3aXRjaGVzIAoKICAgICRrYXNleWFfcHJvY2VzcyA9IFtEaWFnbm9zdGljcy5Qcm9jZXNzXTo6U3RhcnQoJGthc2V5YV9sYXVuY2gpIAogICAgJGthc2V5YV9wcm9jZXNzLldhaXRGb3JFeGl0KCkgCiAgICB9CiAgICBFbmQKICAgIHsKICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIEhpZGVzIGEgdXNlciBmcm9tIHRoZSBHQUwKIz4KZnVuY3Rpb24gaGlkZS11c2VyLWZyb20tR0FMCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbQogICAgKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLAogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uPTApXQogICAgICAgIFtzdHJpbmddJG1haWxib3g9KHJlYWQtaG9zdCAiRW50ZXIgdXNlcidzIGVtYWlsIGFkZHJlc3M6IikKCiAgICApCgogICAgQmVnaW4KICAgIHsKCiAgICAjQ29ubmVjdCB0byBjbGllbnQncyAzNjUKICAgICRMaXZlQ3JlZCA9IEdldC1DcmVkZW50aWFsCiAgICBJbXBvcnQtTW9kdWxlIG1zb25saW5lOyBDb25uZWN0LU1zb2xTZXJ2aWNlIC1DcmVkZW50aWFsICRsaXZlY3JlZAogICAgJFNlc3Npb24gPSBOZXctUFNTZXNzaW9uIC1Db25maWd1cmF0aW9uTmFtZSBNaWNyb3NvZnQuRXhjaGFuZ2UgLUNvbm5lY3Rpb25VcmkgaHR0cHM6Ly9wcy5vdXRsb29rLmNvbS9wb3dlcnNoZWxsLz9wcm94eW1ldGhvZD1ycHMgLUNyZWRlbnRpYWwgJExpdmVDcmVkIC1BdXRoZW50aWNhdGlvbiBCYXNpYyAtQWxsb3dSZWRpcmVjdGlvbgogICAgSW1wb3J0LVBTU2Vzc2lvbiAkU2Vzc2lvbgoKICAgIH0KICAgIFByb2Nlc3MKICAgIHsKCiAgICBTZXQtTWFpbGJveCAtSWRlbnRpdHnDgsKgJG1haWxib3jDgsKgLUhpZGRlbkZyb21BZGRyZXNzTGlzdHNFbmFibGVkICR0cnVlCgogICAgfQoKICAgIEVuZAogICAgewogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgR2V0cyB0aGUgYWNjb3VudCB1c2VkIGZvciBhbGwgc2VydmljZXMKLkRFU0NSSVBUSU9OCiAgIFVzZXMgV01JIHRvIGZpbmQgdGhlIGxpc3Qgb2Ygc2VydmljZXMgYW5kIHRoZSBhY2NvdW50cyB0aGV5IGFyZSB1c2luZyB0byBzdGFydC4gIEFkZGVkIGRlc2NyaXB0aW9uIHRvIGFpZCBpbiBmaWd1cmluZyBvdXQgd2hhdCBpdCBkb2VzLiAgVGhlIE91dHB1dCB3aWxsIGJlIHJldHVybmVkIHRvIHRoZSBzY3JlZW4gYW5kIGNhbiB0aGVuIGJlIHNlbnQgdG8gYSBmaWxlLiAKLkVYQU1QTEUKICAgR2V0LVNlcnZpY2VBY2NvdW50IC1Db21wdXRlck5hbWUgQ29tcHV0cm9uIC1Mb2dGaWxlCiM+CgpmdW5jdGlvbiBHZXQtU2VydmljZUFjY291bnQKewogICAgUGFyYW0KICAgICgKICAgICAgICAjIFBhcmFtMSBoZWxwIGRlc2NyaXB0aW9uCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLAogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uPTApXQogICAgICAgICRDb21wdXRlck5hbWUsCgogICAgICAgIFtzd2l0Y2hdW3BhcmFtZXRlcihtYW5kYXRvcnk9JGZhbHNlLCBQb3NpdGlvbj0xKV0gJExvZ0ZpbGUKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgIGlmKCEkQ29tcHV0ZXJOYW1lKQogICAgICAgIHsKICAgICAgICAgICAgJENvbXB1dGVyTmFtZT0kZW52OkNPTVBVVEVSTkFNRQogICAgICAgIH0KICAgICAgICBFbHNlCiAgICAgICAgewogICAgICAgIH0KICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICAkc2VydmljZXMgPSBHZXQtV21pT2JqZWN0IHdpbjMyX3NlcnZpY2UgLUNvbXB1dGVyTmFtZSAkQ29tcHV0ZXJOYW1lIC1FcnJvckFjdGlvbiBTdG9wIC1FcnJvclZhcmlhYmxlIEN1cnJlbnRFcnJvcgogICAgICAgICRzZXJ2aWNlcyB8IFNlbGVjdC1PYmplY3QgLVByb3BlcnR5IFN5c3RlbU5hbWUsIE5hbWUsIFN0YXJ0TmFtZSwgU2VydmljZVR5cGUsIERlc2NyaXB0aW9uIHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQKICAgIHsKICAgICAgICBpZigkTG9nRmlsZSkKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckxvZyA9ICIkZW52OndpbmRpclxUZW1wXFNlcnZpY2VBY2NvdW50X0lJVFMudHh0IgogICAgICAgICAgICBpZighJEN1cnJlbnRFcnJvcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIiQoR2V0LURhdGUpIC0gRXJyb3I9IE5PIEVSUk9SLiIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJEVycm9yTG9nIC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSBFcnJvcj0gJEN1cnJlbnRFcnJvci4iIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRFcnJvckxvZyAtRm9yY2UgLUFwcGVuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIEVsc2UKICAgICAgICB7CiAgICAgICAgfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBjb21tYW5kIHdpbGwgb3V0cHV0IGEgbGlzdCBvZiBhbGwgb2YgdGhlIGluc3RhbGwgcHJvZ3JhbXMgZnJvbSB0aGUgcmVnaXN0cnkuCi5ERVNDUklQVElPTgogICBUaGlzIGNvbW1hbmQgd2lsbCBmaW5kIHRoZSBpbnN0YWxsZWQgYXBwbGljYXRpb25zIG9uIGFueSBjb21wdXRlci4gIEl0IHdpbGwgb3V0cHV0IHRoZSBuYW1lIGFuZCB0aGUgdW5pbnN0YWxsIHN0cmluZyB0aGF0IGNhbiBiZSB1c2VkIHRvIHJlbW92ZSB0aGUgYXBwbGljYXRpb24uCi5FWEFNUExFCiAgIEdldC1JbnN0YWxsZWRQcm9ncmFtcyAtQ29tcHV0ZXJOYW1lCiM+CmZ1bmN0aW9uIEdldC1JbnN0YWxsZWRQcm9ncmFtcwp7CiAgICBQYXJhbQogICAgKAogICAgICAgICMgQ29tdXB1dGVyTmFtZQogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0wKV0KICAgICAgICAkQ29tcHV0ZXJOYW1lLAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0xKV0KICAgICAgICBbc3dpdGNoXQogICAgICAgICRFcnJvckxvZwogICAgKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgJGJvb2Jvb3MgPSBAKCkKICAgICAgICAkYXJyYXkgPSBAKCkKICAgICAgICAkUmVnTG9jYXRpb25zID0gJ1NPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFVuaW5zdGFsbFwnLAogICAgICAgICAgICAgICAgICAgICAgICAnU09GVFdBUkVcV09XNjQzMk5vZGVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsXCcKICAgICAgICBpZighJENvbXB1dGVyTmFtZSkKICAgICAgICB7CiAgICAgICAgICAgICRDb21wdXRlck5hbWU9JGVudjpDT01QVVRFUk5BTUUKICAgICAgICB9CiAgICAgICAgRWxzZQogICAgICAgIHsKICAgICAgICB9CiAgICB9CiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICAkcmVnPVttaWNyb3NvZnQud2luMzIucmVnaXN0cnlrZXldOjpPcGVuUmVtb3RlQmFzZUtleShbTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5SGl2ZV06OkxvY2FsTWFjaGluZSwkQ29tcHV0ZXJOYW1lKQogICAgICAgICAgICBmb3JlYWNoKCRSZWdMb2NhdGlvbiBpbiAkUmVnTG9jYXRpb25zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICRDdXJyZW50S2V5PSAkcmVnLm9wZW5zdWJrZXkoJFJlZ0xvY2F0aW9uKQogICAgICAgICAgICAkc3Via2V5cyA9ICRDdXJyZW50S2V5LkdldFN1YktleU5hbWVzKCkKICAgICAgICAgICAgZm9yZWFjaCgkc3Via2V5IGluICRzdWJrZXlzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkVmFsdWVzID0gJHJlZy5PcGVuU3ViS2V5KCIkUmVnTG9jYXRpb24kc3Via2V5IikKICAgICAgICAgICAgICAgIGlmKCRWYWx1ZXMuR2V0VmFsdWUoJ0Rpc3BsYXlOYW1lJykpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3A9W29yZGVyZWRdQHsKICAgICAgICAgICAgICAgICAgICAnRGlzcGxheV9OYW1lJz0kVmFsdWVzLkdldFZhbHVlKCdEaXNwbGF5TmFtZScpCiAgICAgICAgICAgICAgICAgICAgJ1VuaW5zdGFsbF9QYXRoJz0kVmFsdWVzLkdldFZhbHVlKCdVbmluc3RhbGxTdHJpbmcnKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgJGFycmF5ICs9IE5ldy1PYmplY3QgLVR5cGVOYW1lIHBzb2JqZWN0IC1Qcm9wZXJ0eSAkUHJvcCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSAtRXJyb3JWYXJpYWJsZSBlcnJvcnMKICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgICAgICRhcnJheSB8IFNvcnQtT2JqZWN0IC1Qcm9wZXJ0eSAnRGlzcGxheV9OYW1lJwogICAgICAgIH0KICAgICAgICBjYXRjaAogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gJGVycm9yCiAgICAgICAgfQogICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxJbnN0YWxsZWRQcm9ncmFtc19JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSkgLSAkYm9vYm9vIC4iIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUaGlzIHByb2dyYW0gd2lsbCB1bmluc3RhbGwgYW55IGFwcGxpY2F0aW9uIGluIEFERC9SZW1vdmUgdGhhdCBtYXRjaGVzIHRoZSBpbmZvcm1hdGlvbiBlbnRlcmVkLgouREVTQ1JJUFRJT04KICAgVGhpcyBwcm9ncmFtIHdpbGwgcmVtb3ZlIGFuIGFwcGxpYXRpb24gd2l0aCBNU0lFWEVDIGlmIGFwcGxpY2FibGUuICBJZiB0aGVyZSBpcyBubyBtc2lleGVjIHVuaW5zdGFsbCBzdHJpbmcgdGhlbiBpdCB3aWxsIGF0dGVtcHQgdG8gdXNlIHRoZSB1bmluc3RhbGwgcGF0aCBpZiB0aGVyZSBpcyBvbmUuIFRoZXJlIHdpbGwgYmUgYW4gb3V0cHV0IGZpbGUgbG9jYXRlZCBpbiB0aGUgd2luZG93c1x0ZW1wIGZvbGRlci4gIAouRVhBTVBMRQogICBSZW1vdmUtQXBwbGljYXRpb24gLVVuaW5zdGFsbFByb2dyYW1zIEthc2V5YSxNaWNyb3NvZnQgLUVycm9yTG9nCiM+CmZ1bmN0aW9uIFJlbW92ZS1BcHBsaWNhdGlvbgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICAgICAjIFBhcmFtMSBoZWxwIGRlc2NyaXB0aW9uCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLAogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFBvc2l0aW9uPTApXQogICAgICAgIFthcnJheV0kVW5pbnN0YWxsUHJvZ3JhbXMsCgogICAgICAgIFtQYXJhbWV0ZXIoKV0KICAgICAgICBbc3dpdGNoXSRFcnJvckxvZwogICAgKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgW2FycmF5XSRib29ib29zID0gQCgpCiAgICAgICAgW2FycmF5XSRJbnN0YWxsZWRQcm9ncmFtcyA9IEdldC1JbnN0YWxsZWRQcm9ncmFtcwogICAgICAgIGlmKCEkVW5pbnN0YWxsUHJvZ3JhbXMpCiAgICAgICAgewogICAgICAgICAgICAkVW5pbnN0YWxsUHJvZ3JhbXMgPSBSZWFkLUhvc3QgJ1doYXQgcHJvZ3JhbShzKSB3b3VsZCB5b3UgbGlrZSB0byB1bmluc3RhbGw/JwogICAgICAgIH0KICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgIGZvcmVhY2goJHByb2dyYW0gaW4gJFVuaW5zdGFsbFByb2dyYW1zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkcHJvZ3MgPSAkSW5zdGFsbGVkUHJvZ3JhbXMgfCBXaGVyZS1PYmplY3QgeygkXy5EaXNwbGF5X05hbWUgLW1hdGNoICIkcHJvZ3JhbSIpfQogICAgICAgICAgICAgICAgaWYoJHByb2dzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHByb2cgaW4gJHByb2dzKQogICAgICAgICAgICAgICAgICAgIHsgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRwcm9nLlVuaW5zdGFsbF9QYXRoKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkcHJvZy5Vbmluc3RhbGxfUGF0aCAtbWF0Y2ggIm1zaWV4ZWMuZXhlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVtb3Zlc3RyaW5nID0gJHByb2cuVW5pbnN0YWxsX1BhdGggLVJlcGxhY2UgIm1zaWV4ZWMuZXhlIiwiIiAtUmVwbGFjZSAiL0kiLCIiIC1SZXBsYWNlICIvWCIsIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVtb3Zlc3RyaW5nID0gJHJlbW92ZXN0cmluZy5UcmltKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBSZW1vdmluZyAkKCRwcm9nLmRpc3BsYXlfbmFtZSkgdXNpbmcgJHJlbW92ZXN0cmluZy4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQtcHJvY2VzcyAibXNpZXhlYy5leGUiIC1hcmcgIi9YICRyZW1vdmVzdHJpbmcgL3FuIiAtV2FpdCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEFwcGxpY2F0aW9uICQoJHByb2cuZGlzcGxheV9uYW1lKSBpc24ndCB1c2luZyBNU0lFWEVDIGZvciB1bmluc3RhbGwuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0LXByb2Nlc3MgImNtZC5leGUiIC1hcmcgIiQoJHByb2cuVW5pbnN0YWxsX1BhdGgpIiAtV2FpdCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIEVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQXBwbGljYXRpb24gJCgkcHJvZy5EaXNwbGF5X25hbWUpIGRvZXNuJ3QgaGF2ZSBhbiB1bmluc3RhbGwgcGF0aC4iCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGRuJ3QgZmluZCBhcHBsaWNhdGlvbiB0aGF0IG1hdGNoZWQgJHByb2dyYW0uIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjYXRjaAogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gJGVycm9yCiAgICAgICAgfQogICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxSZW1vdmVBcHBsaWNhdGlvbl9JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJGJvb2JvbyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIFZFUlkgc2ltcGxlIGZ1bmN0aW9uIHRvIGdldCB2ZXJzaW9ucyBvZiBhbGwgaW5zdGFsbGVkIGFwcHMKLkRFU0NSSVBUSU9OCiAgIAouRVhBTVBMRQogIEdldC1BbGwtQXBwLVZlcnNpb25zCi5FWEFNUExFCiAgIEFub3RoZXIgZXhhbXBsZSBvZiBob3cgdG8gdXNlIHRoaXMgY21kbGV0CiM+CgpmdW5jdGlvbiBHZXQtQWxsLUFwcC1WZXJzaW9ucwp7CiAgICBHZXQtSXRlbVByb3BlcnR5w4LCoEhLTE06XFNvZnR3YXJlXFdvdzY0MzJOb2RlXE1pY3Jvc29mdFxXaW5kb3dzXEN1cnJlbnRWZXJzaW9uXFVuaW5zdGFsbFwqw4LCoHwgU2VsZWN0LU9iamVjdCBEaXNwbGF5TmFtZSwgRGlzcGxheVZlcnNpb24sIFB1Ymxpc2hlciwgSW5zdGFsbERhdGUgfMOCwqBFeHBvcnQtQ3N2ICJjOlxpaXRzX21nbXRcYWxsX2FwcF92ZXJzaW9ucy5jc3YiCn0KCjwjCi5TeW5vcHNpcwogICBHYXRoZXJzIGNyYXNocGxhbiBsb2cgZmlsZXMgZnJvbSBhIGNvbXB1dGVyIGFuZCB6aXBzIHRoZW0gdXAgaW4gYSBmb2xkZXIuCi5ERVNDUklQVElPTgogICBMb25nIGRlc2NyaXB0aW9uCi5FWEFNUExFCiAgIEdldC1DcmFzaFBsYW5Mb2dzICJDOlxJSVRTX01HTVRcQ3Jhc2hQbGFuLnppcCIgLUVycm9yTG9nCiM+CmZ1bmN0aW9uIEdldC1DcmFzaFBsYW5Mb2dzCnsKICAgIFBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsCiAgICAgICAgICAgICAgICAgICBWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlLAogICAgICAgICAgICAgICAgICAgUG9zaXRpb249MCldCiAgICAgICAgJE91dHB1dCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UsCiAgICAgICAgICAgICAgICAgICBWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlLAogICAgICAgICAgICAgICAgICAgUG9zaXRpb249MSldCiAgICAgICAgW3N3aXRjaF0kRXJyb3Jsb2cKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICRib29ib29zID0gQCgpCiAgICAgICAgJENyYXNoTG9nUGF0aCA9ICJDOlxQcm9ncmFtRGF0YVxDcmFzaFBsYW5cbG9nIgoKICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICBpZihUZXN0LVBhdGggJENyYXNoTG9nUGF0aCkKICAgICAgICB7CiAgICAgICAgICAgIENyZWF0ZS1aaXAgLVNvdXJjZSAkQ3Jhc2hMb2dQYXRoIC1EZXN0aW5hdGlvbiAkT3V0cHV0CiAgICAgICAgICAgIHJldHVybiAkT3V0cHV0CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENyYXNoUGxhbiBsb2cgZGlyZWN0b3J5ICRDcmFzaExvZ1BhdGggZG9lc24ndCBleGlzdC4iCiAgICAgICAgfQogICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxHZXRDcmFzaFBsYW5Mb2dzX0lJVFMudHh0IgogICAgICAgICAgICBmb3JlYWNoKCRib29ib28gaW4gJGJvb2Jvb3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkYm9vYm9vIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBjb21tYW5kIHdpbGwgemlwIGEgZm9sZGVyCi5ERVNDUklQVElPTgogICBMb25nIGRlc2NyaXB0aW9uCi5FWEFNUExFCiAgIENyZWF0ZS1aaXAgLVNvdXJjZSAiQzpcVGVtcFxMb2dzIiAtRGVzdGluYXRpb24gIkM6XFRlbXBcTG9ncy56aXAiIC1PdmVyd3JpdGUgLUVycm9ybG9nCiM+CmZ1bmN0aW9uIENyZWF0ZS1aaXAKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFBhcmFtCiAgICAoCiAgICAgICAgIyBTb3VyY2UgRGlyZWN0b3J5CiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsCiAgICAgICAgICAgICAgICAgICBWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lPSR0cnVlLAogICAgICAgICAgICAgICAgICAgUG9zaXRpb249MCldCiAgICAgICAgJFNvdXJjZSwKCiAgICAgICAgIyBEZXN0aW5hdGlvbiBmb3IgWmlwIGZpbGUKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0xKV0KICAgICAgICAkRGVzdGluYXRpb24sCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwKICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICBQb3NpdGlvbj0yKV0KICAgICAgICBbc3dpdGNoXSRPdmVyd3JpdGUsCiAgICAgICAgW3N3aXRjaF0kRXJyb3Jsb2cKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICRFcnJvciA9ICRudWxsCiAgICAgICAgJGJvb2Jvb3MgPSBAKCkKICAgICAgICBpZighJE92ZXJ3cml0ZSkKICAgICAgICB7CiAgICAgICAgICAgIGlmKFRlc3QtUGF0aCAkRGVzdGluYXRpb24pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJERlc3RpbmF0aW9uID0gIiQoJERlc3RpbmF0aW9uKS5uZXciCiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRmlsZSBhbHJlYWR5IGV4aXN0cy4gIENyZWF0aW9uIG5ldyBmaWxlICREZXN0aW5hdGlvbi4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIEVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGlmKHRlc3QtcGF0aCAkRGVzdGluYXRpb24pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFJlbW92ZS1JdGVtICREZXN0aW5hdGlvbgogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gUmVtb3ZpbmcgcHJldmlvdXMgZmlsZSAkRGVzdGluYXRpb24uIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIFRyeQogICAgICAgIHsKICAgICAgICBBZGQtVHlwZSAtYXNzZW1ibHkgInN5c3RlbS5pby5jb21wcmVzc2lvbi5maWxlc3lzdGVtIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIFtpby5jb21wcmVzc2lvbi56aXBmaWxlXTo6Q3JlYXRlRnJvbURpcmVjdG9yeSgkU291cmNlLCAkRGVzdGluYXRpb24pIAogICAgICAgIH0KICAgICAgICBDYXRjaAogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGRuJ3QgbG9hZCBhc3NlbWJseS4gIEVycm9yID0gJEVycm9yIgogICAgICAgIH0KICAgIH0KICAgIEVuZAogICAgewogICAgICAgICBpZigkRXJyb3JMb2cpCiAgICAgICAgewogICAgICAgICAgICAkTG9nUGF0aCA9ICIkZW52OndpbmRpclxUZW1wXENyZWF0ZVppcF9JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJGJvb2JvbyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIFdpbGwgcmVxdWVzdCBhIGRvbWFpbiBuYW1lIGFuZCBzZWUgaWYgaXQncyBibGFja2xpc3RlZAouREVTQ1JJUFRJT04KICAgTG9uZyBkZXNjcmlwdGlvbgouRVhBTVBMRQogICBNaWNoYWVsIHRha2VzIG5vIGNyZWRpdCBmb3IgdGhpcyBjb2RlIQouRVhBTVBMRQogICBBbm90aGVyIGV4YW1wbGUgb2YgaG93IHRvIHVzZSB0aGlzIGNtZGxldAojPgpmdW5jdGlvbiBGaW5kLUlmLURvbWFpbi1CbGFja2xpc3RlZAp7CiAgICBQYXJhbQogICAgKCkKCiAgICBQcm9jZXNzCiAgICB7CiAgICB3cml0ZS1ob3N0ICJTdGFuZCBieS4uLiIKICAgICR3Yz1OZXctT2JqZWN0IG5ldC53ZWJjbGllbnQKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAjJElQID0oSW52b2tlLVdlYlJlcXVlc3QgaWZjb25maWcubWUvaXApLkNvbnRlbnQuVHJpbSgpCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgIyRJUCA9ICR3Yy5kb3dubG9hZHN0cmluZygiaHR0cDovL2lmY29uZmlnLm1lL2lwIikgLXJlcGxhY2UgIlteXGRcLl0iCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgVHJ5IHsKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJElQID0gJHdjLmRvd25sb2Fkc3RyaW5nKCJodHRwOi8vY2hlY2tpcC5keW5kbnMuY29tIikgLXJlcGxhY2UgIlteXGRcLl0iCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgfQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIENhdGNoIHsKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJElQID0gJHdjLmRvd25sb2Fkc3RyaW5nKCJodHRwOi8vaWZjb25maWcubWUvaXAiKSAtcmVwbGFjZSAiW15cZFwuXSIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB9CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJElQID0gUmVhZC1Ib3N0IC1wcm9tcHQgIkVudGVyIGEgZG9tYWluIG5hbWUgdG8gc2VlIGlmIGl0J3Mgb24gYSBibGFja2xpc3Q6IgrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIFdyaXRlLUhvc3QgIlRlc3RpbmcgUHVibGljIElQOiAkSVAiCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJHJldmVyc2VkSVAgPSAoJElQIC1zcGxpdCAnXC4nKVszLi4wXSAtam9pbiAnLicKw4LCoArDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICRibGFja2xpc3RTZXJ2ZXJzID0gQCgKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2IuYmFycmFjdWRhY2VudHJhbC5vcmcnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdzcGFtLnJibC5tc3JibC5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICd6ZW4uc3BhbWhhdXMub3JnJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnYmwuZGVhZGJlZWYuY29tJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnYmwuc3BhbWNhbm5pYmFsLm9yZycKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2JsLnNwYW1jb3AubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnYmxhY2tob2xlcy5maXZlLXRlbi1zZy5jb20nCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdib2dvbnMuY3ltcnUuY29tJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnY2JsLmFidXNlYXQub3JnJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnY29tYmluZWQucmJsLm1zcmJsLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2RiLndwYmwuaW5mbycKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2Ruc2JsLTEudWNlcHJvdGVjdC5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdkbnNibC0yLnVjZXByb3RlY3QubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnZG5zYmwtMy51Y2Vwcm90ZWN0Lm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2Ruc2JsLmN5YmVybG9naWMubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnZG5zYmwuc29yYnMubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnZHVpbnYuYXVwYWRzLm9yZycKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2R1bC5kbnNibC5zb3Jicy5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdkeW5hLnNwYW1yYXRzLmNvbScKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2R5bmlwLnJvdGhlbi5jb20nCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdodHRwLmRuc2JsLnNvcmJzLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2ltYWdlcy5yYmwubXNyYmwubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnaXBzLmJhY2tzY2F0dGVyZXIub3JnJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnbWlzYy5kbnNibC5zb3Jicy5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdub3B0ci5zcGFtcmF0cy5jb20nCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdvcnZlZGIuYXVwYWRzLm9yZycKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3BibC5zcGFtaGF1cy5vcmcnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdwaGlzaGluZy5yYmwubXNyYmwubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAncHNibC5zdXJyaWVsLmNvbScKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3JibC5pbnRlcnNlcnZlci5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdyZWxheXMubmV0aGVyLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3NibC5zcGFtaGF1cy5vcmcnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICdzbXRwLmRuc2JsLnNvcmJzLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3NvY2tzLmRuc2JsLnNvcmJzLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3NwYW0uZG5zYmwuc29yYnMubmV0JwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnc3BhbS5zcGFtcmF0cy5jb20nCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICd0M2RpcmVjdC5kbnNibC5uZXQuYXUnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICd0b3IuYWhibC5vcmcnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICd1YmwubGFzaGJhY2suY29tJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAndWJsLnVuc3Vic2NvcmUuY29tJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAndmlydXMucmJsLm1zcmJsLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ3dlYi5kbnNibC5zb3Jicy5uZXQnCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICd4Ymwuc3BhbWhhdXMub3JnJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAnem9tYmllLmRuc2JsLnNvcmJzLm5ldCcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJ2hvc3RrYXJtYS5qdW5rZW1haWxmaWx0ZXIuY29tJwrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICkKw4LCoArDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICRibGFja2xpc3RlZE9uID0gQCgpCsOCwqAKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCBmb3JlYWNoICgkc2VydmVyIGluICRibGFja2xpc3RTZXJ2ZXJzKQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIHsKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgJGZxZG4gPSAiJHJldmVyc2VkSVAuJHNlcnZlciIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgI1dyaXRlLUhvc3QgIlRlc3RpbmcgUmV2ZXJzZTogJGZxZG4iCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIHRyeQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB7CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgI1dyaXRlLUhvc3QgIlRyeWluZyBCbGFja2xpc3Q6ICRzZXJ2ZXIiCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAkcmVzdWx0ID0gW1N5c3RlbS5OZXQuRG5zXTo6R2V0SG9zdEVudHJ5KCRmcWRuKQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgZm9yZWFjaCAoJGFkZHIgaW4gJHJlc3VsdC5BZGRyZXNzTGlzdCkgewrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICRsaW5lID0gJEFkZHIuSVBBZGRyZXNzVG9TdHJpbmcKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIH3DgsKgCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICNJUEFkZHJlc3NbXSAkYWRkciA9ICRyZXN1bHQuQWRkcmVzc0xpc3Q7CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCAjJGFkZHJbJGFkZHIuTGVuZ3RoLTFdLlRvU3RyaW5nKCk7CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICNXcml0ZS1Ib3N0ICJCbGFja2xpc3QgUmVzdWx0OiAkbGluZSIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgaWYgKCRsaW5lIC1lcSAiMTI3LjAuMC4xIikgewrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICRibGFja2xpc3RlZE9uICs9ICRzZXJ2ZXIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgfQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB9CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIGNhdGNoIHsgfQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIH0Kw4LCoArDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIGlmICgkYmxhY2tsaXN0ZWRPbi5Db3VudCAtZ3QgMCkKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB7CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgICMgVGhlIElQIHdhcyBibGFja2xpc3RlZCBvbiBvbmUgb3IgbW9yZSBzZXJ2ZXJzOyBzZW5kIHlvdXIgZW1haWwgaGVyZS7DgsKgICRibGFja2xpc3RlZE9uIGlzIGFuIGFycmF5IG9mIHRoZSBzZXJ2ZXJzIHRoYXQgcmV0dXJuZWQgcG9zaXRpdmUgcmVzdWx0cy4Kw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgV3JpdGUtSG9zdCAiJElQIHdhcyBibGFja2xpc3RlZCBvbiBvbmUgb3IgbW9yZSBMaXN0czogJCgkYmxhY2tsaXN0ZWRPbiAtam9pbiAnLCAnKSIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgRXhpdCAxMDEwCsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAgfQrDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIGVsc2UKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB7CsOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgIFdyaXRlLUhvc3QgIiRJUCBpcyBub3QgY3VycmVudGx5IGJsYWNrbGlzdGVkIG9uIGFueSBsaXN0cyBjaGVja2VkLiIKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoMOCwqAKw4LCoMOCwqDDgsKgw4LCoMOCwqDDgsKgw4LCoCB9CsOCwqAKICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIFJlbW92ZSdzIGFub3RoZXIgdXNlcidzIGZvbGRlci9jYWxlbmRhciBmcm9tIGF1dG9tYXAKLkRFU0NSSVBUSU9OCiAgIElmIGEgdXNlciBpcyBhc3NpZ25lZCwgb3IgaGFzIGJlZW4sIHBlcm1pc3Npb25zIHRvIGFub3RoZXIgdXNlcidzIGNhbGVuZGFyIG9yIG1haWxib3gsIDM2NSBhdXRvbWF0aWNhbGx5IG1hcHMgaXQKICAgaW4gdGhlIHVzZXIncyBPdXRsb29rLiAgVGhpcyB3aWxsIHR1cm4gb2ZmIHRoZSBhdXRvbWFwCi5FWEFNUExFCiAgIEV4YW1wbGUgb2YgaG93IHRvIHVzZSB0aGlzIGNtZGxldAouRVhBTVBMRQogICBBbm90aGVyIGV4YW1wbGUgb2YgaG93IHRvIHVzZSB0aGlzIGNtZGxldAojPgpmdW5jdGlvbiBSZW1vdmUtT3V0bG9vay1BdXRvbWFwCnsKICAgIEJlZ2luIHsKCiAgICAgICAgI0Nvbm5lY3QgdG8gY2xpZW50J3MgMzY1CiAgICAgICAgICRMaXZlQ3JlZCA9IEdldC1DcmVkZW50aWFsCiAgICAgICAgIEltcG9ydC1Nb2R1bGUgbXNvbmxpbmU7IENvbm5lY3QtTXNvbFNlcnZpY2UgLUNyZWRlbnRpYWwgJGxpdmVjcmVkCiAgICAgICAgICRTZXNzaW9uID0gTmV3LVBTU2Vzc2lvbiAtQ29uZmlndXJhdGlvbk5hbWUgTWljcm9zb2Z0LkV4Y2hhbmdlIC1Db25uZWN0aW9uVXJpIGh0dHBzOi8vcHMub3V0bG9vay5jb20vcG93ZXJzaGVsbC8/cHJveHltZXRob2Q9cnBzIC1DcmVkZW50aWFsICRMaXZlQ3JlZCAtQXV0aGVudGljYXRpb24gQmFzaWMgLUFsbG93UmVkaXJlY3Rpb24KICAgICAgICAgSW1wb3J0LVBTU2Vzc2lvbiAkU2Vzc2lvbgogICAgICAgICAgIH0KCgogICAgUHJvY2VzcyB7CiAgICAgICAgICAgICRvd25lcj1yZWFkLWhvc3QgIkVudGVyIE93bmVyJ3MgZW1haWwgYWRkcmVzczoiCiAgICAgICAgICAgICRyZXF1ZXN0b3I9cmVhZC1ob3N0ICJFbnRlciBlbWFpbCBhZGRyZXNzIG9mIHBlcnNvbiB0byByZW1vdmUgQXV0b21hcHBpbmcgZnJvbToiCiAgICAgICAgICAgIEFkZC1NYWlsYm94UGVybWlzc2lvbiAtSWRlbnRpdHkgJG93bmVyIC1Vc2VyICRyZXF1ZXN0b3IgLUFjY2Vzc1JpZ2h0cyBGdWxsQWNjZXNzIC1BdXRvTWFwcGluZzokZmFsc2UKICAgICAgICAgICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBjbWRsZXQgd2lsbCByZXR1cm4gdGhlIGN1cnJlbnQgZmlsZXN5c3RlbSBkcml2ZXMgYXMgYW4gb2JqZWN0IHRoYXQgYXJlIGRyaXZldHlwZSBvZiAzIGFjY29yZGluZyB0byBpdCdzIFdNSSBvYmplY3QuIAouREVTQ1JJUFRJT04KICAgVGhpcyBjbWRsZXQgZ2V0cyBhbGwgb2YgdGhlIGRyaXZlcyB0aGF0IGFyZSBtYXJrZWQgYXMgZmlsZXN5c3RlbSBkcml2ZXMgYW5kIHJldHVybnMgdGhlbSBhcyBhbiBvYmplY3QgdG8gdXNlIGluIGFueSB3YXkgbmVlZGVkLgouRVhBTVBMRQogICBHZXQtRHJpdmVTdGF0aXN0aWNzIC1FcnJvckxvZwojPgpmdW5jdGlvbiBHZXQtRHJpdmVTdGF0aXN0aWNzCnsKICAgIFBhcmFtCiAgICAoCiAgICAgICAgW3N3aXRjaF0kRXJyb3JMb2cKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICRib29ib29zPUAoKQogICAgICAgICRlcnJvciA9ICRudWxsCiAgICAgICAgJHZvbHVtZXMgPSBAKCkKICAgICAgICAkZHJpdmVzID0gQCgpCiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICAkZHJpdmVzID0gR2V0LVBTRHJpdmUgfCBXaGVyZS1PYmplY3QgeyRfLlByb3ZpZGVyIC1tYXRjaCAnRmlsZXN5c3RlbSd9CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE9idGFpbmVkIHZvbHVtZXMuIgogICAgICAgICAgICAkZml4ZWRkaXNrcyA9IEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX0xvZ2ljYWxEaXNrIC1GaWx0ZXIgIkRyaXZlVHlwZT0zIgogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBPYnRhaW5lZCBXTUkgT2JqZWN0cyIKICAgICAgICAgICAgI3RoZSBuZXh0IGJsb2NrIG9mIGNvZGUgd2lsbCBjb21wYXJlIHRoZSBkcml2ZXMgZm91bmQgaW4gZ2V0LXBzZHJpdmUgdG8gdGhlIGRyaXZlcyBmb3VuZCB3aXRoIGdldC13bWlvYmplY3QuICBJZiB0aGV5IG1hdGNoIHRoZW4gdGhhdCBpcyBhIGRyaXZlIHRvIHVzZS4gIElmIHRoZXkgZG9uJ3QgbWF0Y2ggdGhlbiBpdCBpc24ndCBhIGxvY2FsIGRpc2sgYW5kIHdpbGwgYmUgdG9zc2VkIGFzaWRlLiAgVGhpcyBzY3JpcHQgYmxvY2sgY2FuIGJlIG1vZGlmaWVkIChpbiBhIG5ldyBmdW5jdGlvbikgdG8gY29tcGFyZSBhbnkgb2YgdGhlIHBhcmFtZXRlcmVzIGluIFBTRHJpdmUgYW5kIFdNSU9iamVjdCBMb2dpY2FsIERpc2suIAogICAgICAgICAgICBmb3JlYWNoKCRkcml2ZSBpbiAkZHJpdmVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDb21wYXJpbmcgJCgkZHJpdmUucm9vdCkuIgogICAgICAgICAgICAgICAgZm9yZWFjaCgkZml4ZWRkaXNrIGluICRmaXhlZGRpc2tzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENvbXBhcmluZyAkKCRkcml2ZS5yb290KSB3aXRoICQoJGZpeGVkZGlzay5kZXZpY2VpZClcLiIKICAgICAgICAgICAgICAgICAgICBpZigkZHJpdmUucm9vdCAtbm90bGlrZSAiJCgkZml4ZWRkaXNrLkRldmljZUlEKVwiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gTm90IGFkZGluZyAkKCRkcml2ZS5yb290KSB0byB2b2x1bWVzIGFycmF5KS4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEFkZGluZyAkKCRkcml2ZS5yb290KSB0byB2b2x1bWVzIGFycmF5LiIKICAgICAgICAgICAgICAgICAgICAgICAgJHZvbHVtZXMgKz0gJGRyaXZlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGNhdGNoCiAgICAgICAgewogICAgICAgICAgICAkZXJyb3IgKz0gIiQoR2V0LURhdGUpIC0gQ291bGRuJ3QgZ2V0IGRyaXZlIGxpc3QuIgogICAgICAgICAgICAkYm9vYm9vcyArPSAkZXJyb3IKICAgICAgICB9CiAgICB9CiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgJHJlcG9ydD1AKCkKICAgICAgICBpZighJGVycm9yKQogICAgICAgIHsKICAgICAgICAgICAgZm9yZWFjaCgkdm9sdW1lIGluICR2b2x1bWVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHJvcD0KICAgICAgICAgICAgICAgIFtvcmRlcmVkXUB7CiAgICAgICAgICAgICAgICAnTmFtZSc9JHZvbHVtZS5OYW1lCiAgICAgICAgICAgICAgICAnRHJpdmUnPSR2b2x1bWUucm9vdAogICAgICAgICAgICAgICAgJ1VzZWRTcGFjZSc9W1N5c3RlbS5NYXRoXTo6Um91bmQoJCgkdm9sdW1lLnVzZWQgLyAxR0IpLCAyKQogICAgICAgICAgICAgICAgJ0ZyZWVTcGFjZSc9W1N5c3RlbS5NYXRoXTo6Um91bmQoJCgkdm9sdW1lLmZyZWUgLyAxR0IpICwyKQogICAgICAgICAgICAgICAgJ1RvdGFsU3BhY2UnPVtTeXN0ZW0uTWF0aF06OlJvdW5kKCQoJHZvbHVtZS51c2VkIC8xZ2IgKyAkdm9sdW1lLmZyZWUvMWdiKSwgMikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRyZXBvcnQgKz0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QgLVByb3BlcnR5ICRQcm9wICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICRyZXBvcnQKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2tpcHBpbmcgcHJvY2VzcyBibG9jayBkdWUgdG8gbm90IGhhdmluZyB2b2x1bWVzLiIKICAgICAgICB9CiAgICB9CiAgICBFbmQKICAgIHsKICAgICAgICBpZigkRXJyb3JMb2cpCiAgICAgICAgewogICAgICAgICAgICAkTG9nUGF0aCA9ICIkZW52OndpbmRpclxUZW1wXERyaXZlU3RhdGlzdGljc19JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJGJvb2JvbyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIFRoaXMgZnVuY3Rpb24gd2lsbCBleHBvcnQgYSBjc3YgZmlsZSB0byBDOlxJSVRTX1NjcmlwdHNcRGlza0luZm9ybWF0aW9uIHRoYXQgY29udGFpbnMgZGlzayBpbmZvcm1hdGlvbi4gIFRoZXJlIHdpbGwgYmUgb25lIGZpbGUgY3JlYXRlZCBmb3IgZWFjaCB2b2x1bWUgaW5jbHVkaW5nIHJlbW92YWJsZSBkcml2ZXMuCi5ERVNDUklQVElPTgogICBUaGlzIGZ1bmN0aW9uIGdhdGhlcnMgdGhlIGRpc2sgaW5mb3JtYXRpb24gYW5kIGZpZ3VyZXMgb3V0IHRoZSBjaGFuZ2UgaW4gZGlzayB1c2FnZSBhcyBhIGRhaWx5IGNoYW5nZSBpbiBHQiBhbmQgdGhhdCBkYXkncyBjaGFuZ2UgcGVyY2VudGFnZS4gIAogICBUaGlzIGlzIGFsbCBjYWxjdWxhdGVkIHVzaW5nIHRoZSB1c2VkIHNwYWNlIG9mIHRoZSBkcml2ZS4gIFRoZXJlIGlzIGFuIGVycm9yIGxvZyB0aGF0IGlzIHN0b3JlZCBpbiB0aGUgd2luZG93cyB0ZW1wIGZpbGUgZGlyZWN0b3J5LgogICBUaGlzIGZ1bmN0aW9uIHdpbGwgYWxzbyBnYXRoZXIgVlNTIGluZm9ybWF0aW9uIGlmIGl0IGlzIHJ1biBhcyBhbiBhZG1pbmlzdHJhdG9yLiAgVGhpcyBjYW4gYmUgdXNlZnVsIGZvciBmaWd1cmluZyBvdXQgaWYgYSBWU1MgYXdhcmUgYmFja3VwIGlzIHdvcmtpbmcgY29ycmVjdGx5Ci5FWEFNUExFCiAgIEdldC1EaXNrQ2hhbmdlcyAtRXJyb3JMb2cKIz4KZnVuY3Rpb24gR2V0LURpc2tDaGFuZ2VzCnsKICAgIFBhcmFtCiAgICAoCiAgICAgICAgW3N3aXRjaF0kRXJyb3JMb2cKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICNTZXQgdmFyaWFibGUgc28gdGhhdCBwcm9jZXNzIGJsb2NrIHdpbGwgcnVuCiAgICAgICAgJHN0b3AgPSAwCiAgICAgICAgI0dldHRpbmcgcmVsZXZlbnQgZHJpdmUgaW5mb3JtYXRpb24gYXMgd2VsbCBhcyBWU1MgaW5mb3JtYXRpb24KICAgICAgICBUcnkKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zID0gQCgpCiAgICAgICAgICAgICRpbXBvcnQgPSBAKCkKICAgICAgICAgICAgJHZvbHVtZXMgPSBHZXQtRHJpdmVTdGF0aXN0aWNzIC1FcnJvckxvZyAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAkU2hhZG93cyA9IEdldC1WU1NTdGF0aXN0aWNzIC1FcnJvckxvZyAtRXJyb3JBY3Rpb24gc3RvcAogICAgICAgICAgICBpZigkU2hhZG93cyAtbWF0Y2ggIkVSUk9SLiBOZWVkIHRvIHJ1biBhcyBhZG1pbmlzdHJhdG9yISBFcnJvciA9IEluaXRpYWxpemF0aW9uIGZhaWx1cmUiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU2hhZG93cyA9ICRudWxsCiAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDb3VsZG4ndCBydW4gR2V0LVZTU1N0YXRpc3RpY3MuIER1ZSB0byBhZG1pbmlzdHJpdmUgcHJpdmxlZ2VzLiAgUnVubmluZyB3aXRob3V0IFZTUyBpbmZvcm1hdGlvbi4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGRyaXZlcyA9IEAoKQogICAgICAgICAgICBmb3JlYWNoKCR2b2x1bWUgaW4gJHZvbHVtZXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEdvaW5nIHRocm91Z2ggZWFjaCB2b2x1bWUuICBTdGFydGluZyB3aXRoICR2b2x1bWUuIgogICAgICAgICAgICAgICAgJHNoYWRvdyA9ICRTaGFkb3dzIHwgV2hlcmUtT2JqZWN0IHsoJF8ubmFtZSAtZXEgJHZvbHVtZS5uYW1lKX0KICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZpZ3VyaW5nIG91dCB3aGljaCBzaGFkb3dzdG9yYWdlIG9iamVjdCBtYXRjaGVzIHZvbHVtZS4gU2hhZG93ID0gJHNoYWRvdyIKICAgICAgICAgICAgICAgIGlmKCRTaGFkb3cpICNUaGlzIHJ1bnMgaWYgdGhlcmUgaXMgZ29vZCBvYmplY3QgZGF0YSBpbiBTaGFkb3cKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvcD0KICAgICAgICAgICAgICAgICAgICBbb3JkZXJlZF1AewogICAgICAgICAgICAgICAgICAgICdOYW1lJyA9JHZvbHVtZS5uYW1lCiAgICAgICAgICAgICAgICAgICAgJ0RyaXZlJz0kdm9sdW1lLmRyaXZlCiAgICAgICAgICAgICAgICAgICAgJ1VzZWRTcGFjZScgPSAkdm9sdW1lLlVzZWRTcGFjZQogICAgICAgICAgICAgICAgICAgICdGcmVlU3BhY2UnID0gJHZvbHVtZS5GcmVlU3BhY2UKICAgICAgICAgICAgICAgICAgICAnVG90YWxTcGFjZScgPSAkdm9sdW1lLlRvdGFsU3BhY2UKICAgICAgICAgICAgICAgICAgICAnVlNTQWxsb2NhdGVkU3BhY2VHQicgPSAkc2hhZG93LlZTU0FsbG9jYXRlZFNwYWNlR0IKICAgICAgICAgICAgICAgICAgICAnVlNTVXNlZFNwYWNlR0InPSAkc2hhZG93LlZTU1VzZWRTcGFjZUdCCiAgICAgICAgICAgICAgICAgICAgJ1ZTU01heFNwYWNlR0InPSAkc2hhZG93LlZTU01heFNwYWNlR0IKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJGRyaXZlcyArPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBwc29iamVjdCAtUHJvcGVydHkgJFByb3AKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEVsc2UgI3RoaXMgcnVucyBpZiB0aGVyZSBpcyBub3RoaW5nIGluIFNoYWRvdy4KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgbm8gaW5mb3JtYXRpb24gaW4gU2hhZG93LiIKICAgICAgICAgICAgICAgICAgICAkUHJvcD0KICAgICAgICAgICAgICAgICAgICBbb3JkZXJlZF1AewogICAgICAgICAgICAgICAgICAgICdOYW1lJyA9JHZvbHVtZS5uYW1lCiAgICAgICAgICAgICAgICAgICAgJ0RyaXZlJz0kdm9sdW1lLmRyaXZlCiAgICAgICAgICAgICAgICAgICAgJ1VzZWRTcGFjZScgPSAkdm9sdW1lLlVzZWRTcGFjZQogICAgICAgICAgICAgICAgICAgICdGcmVlU3BhY2UnID0gJHZvbHVtZS5GcmVlU3BhY2UKICAgICAgICAgICAgICAgICAgICAnVG90YWxTcGFjZScgPSAkdm9sdW1lLlRvdGFsU3BhY2UKICAgICAgICAgICAgICAgICAgICAnVlNTQWxsb2NhdGVkU3BhY2VHQicgPSAiTk9ORSIKICAgICAgICAgICAgICAgICAgICAnVlNTVXNlZFNwYWNlR0InPSAiTk9ORSIKICAgICAgICAgICAgICAgICAgICAnVlNTTWF4U3BhY2VHQic9ICJOT05FIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkZHJpdmVzICs9IE5ldy1PYmplY3QgLVR5cGVOYW1lIHBzb2JqZWN0IC1Qcm9wZXJ0eSAkUHJvcAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfSAgICAgCiAgICAgICAgfQogICAgICAgIENhdGNoCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDb3VsZG4ndCBnZXQgZHJpdmUgbGlzdHMuIgogICAgICAgICAgICAjU3RvcHMgcHJvY2VzcyBibG9jayBmcm9tIHJ1bm5pbmcKICAgICAgICAgICAgJHN0b3AgPSAxCiAgICAgICAgfQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIGlmKCRzdG9wIC1lcSAwKSAjc3RvcHMgdGhlIHNjcmlwdCBpZiBubyBkcml2ZXMgY291bGQgYmUgZm91bmQKICAgICAgICB7CiAgICAgICAgICAgIEZvcmVhY2goJGRyaXZlIGluICRkcml2ZXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFByb2Nlc3NpbmcgJCgkZHJpdmUubmFtZSkuIgogICAgICAgICAgICAgICAgaWYoVGVzdC1QYXRoICJDOlxJSVRTX1NjcmlwdHNcRGlza0luZm9ybWF0aW9uXCQoJGRyaXZlLm5hbWUpLmNzdiIpICNjaGVja2luZyBmb3IgdGhlIGV4aXN0YW5jZSBvZiB0aGUgY3N2IGZpbGUgZm9ybSBhIHByZXZpb3VzIHJ1bi4KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGaWxlIEV4aXN0czogQzpcSUlUU19TY3JpcHRzXERpc2tJbmZvcm1hdGlvblwkKCRkcml2ZS5uYW1lKS5jc3YuIgogICAgICAgICAgICAgICAgICAgICNpbXBvcnRpbmcgY3N2IGZvciBtYW5pcHVsYXRpb24KICAgICAgICAgICAgICAgICAgICAkaW1wb3J0ICs9IEltcG9ydC1Dc3YgLVBhdGggIkM6XElJVFNfU2NyaXB0c1xEaXNrSW5mb3JtYXRpb25cJCgkZHJpdmUubmFtZSkuY3N2IgogICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEltcG9ydGluZyBvbGQgZHJpdmUgaW5mb3JtYXRpb25mb3IgJCgkZHJpdmUubmFtZSkuIgogICAgICAgICAgICAgICAgICAgICNhZGRtaW5nIG5ldyBjb2x1bW5zCiAgICAgICAgICAgICAgICAgICAgJGltcG9ydCArPSAkZHJpdmUgfCBTZWxlY3QtT2JqZWN0ICosICJDaGFuZ2VHQlVzZWQiLCAiQ2hhbmdlUmF0ZVBlcmNlbnRVc2VkIiwgIkRhdGUiLCAiVGltZSIKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBBcHBlbmRpbmcgbmV3IGRyaXZlIGluZm9ybWF0aW9uIGZvciAkKCRkcml2ZS5uYW1lKS4iCiAgICAgICAgICAgICAgICAgICAgaWYoJGltcG9ydC5jb3VudCAtZ2UgMikgI1NraXBwaW5nIG1hdGggaWYgdGhlcmUgaXMgb25seSAxIHJvdyBvZiBpbmZvcm1hdGlvbi4gIElFIHRoZSBpbmZvcm1hdGlvbiBoYXMgb25seSBiZWVuIGdhdGhlcmVkIG9uY2UuIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJG5ldyA9ICRpbXBvcnRbLTFdCiAgICAgICAgICAgICAgICAgICAgICAgICRvbGQgPSAkaW1wb3J0Wy0yXQogICAgICAgICAgICAgICAgICAgICAgICAkbmV3LkNoYW5nZUdCVXNlZCA9ICRvbGQuVXNlZFNwYWNlIC0gJG5ldy5Vc2VkU3BhY2UKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJG9sZC5Vc2VkU3BhY2UgLWVxIDApCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE5vIENoYW5nZSBmb3IgJCgkZHJpdmUubmFtZSkuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG5ldy5DaGFuZ2VSYXRlUGVyY2VudFVzZWQgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgRWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbmV3LkNoYW5nZVJhdGVQZXJjZW50VXNlZCA9ICgoKCRuZXcuVXNlZFNwYWNlIC0gJG9sZC5Vc2VkU3BhY2UpLygkb2xkLlVzZWRTcGFjZSkpKjEwMCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBFbHNlICNDYWxjdWxhdGluZyB0aGUgY2hhbmdlcyBzaW5jZSB0aGVyZSBhcmUgYXQgbGVhc3QgMiBkYXRhIHBvaW50cy4KICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE9ubHkgb25lIGVudHJ5IGZvciAkKCR2b2x1bWUubmFtZSkuIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkbmV3LmRhdGUgPSAgR2V0LURhdGUgLUZvcm1hdCBkCiAgICAgICAgICAgICAgICAgICAgJG5ldy50aW1lID0gIEdldC1EYXRlIC1Gb3JtYXQgVAogICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE91dHB1dHRpbmcgbmV3IGRyaXZlIGluZm9ybWF0aW9uIHRvIGV4aXN0aW5nIENTViBmb3IgJCgkZHJpdmUubmFtZSkuIgogICAgICAgICAgICAgICAgICAgICNBcHBlbmRpbmcgbmV3IGluZm9ybWF0aW9uIHRvIGV4aXN0aW5nIGNzdiBmaWxlLgogICAgICAgICAgICAgICAgICAgICRuZXcgfCBFeHBvcnQtQ3N2IC1QYXRoICJDOlxJSVRTX1NjcmlwdHNcRGlza0luZm9ybWF0aW9uXCQoJGRyaXZlLm5hbWUpLmNzdiIgLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDcmVhdGluZyBDU1YgZm9yICQoJGRyaXZlLm5hbWUpLiIKICAgICAgICAgICAgICAgICAgICAjY3JlYXRpbmcgY3N2IGZpbGUgc2luY2Ugb25lIGRvZXMgbm90IGV4aXN0CiAgICAgICAgICAgICAgICAgICAgJGV4cG9ydCA9ICRkcml2ZSB8IFNlbGVjdC1PYmplY3QgKiwgIkNoYW5nZUdCVXNlZCIsICJDaGFuZ2VSYXRlUGVyY2VudFVzZWQiLCAiRGF0ZSIgLCAiVGltZSIKICAgICAgICAgICAgICAgICAgICAkZXhwb3J0LmRhdGUgPSAgR2V0LURhdGUgLUZvcm1hdCBkCiAgICAgICAgICAgICAgICAgICAgJGV4cG9ydC50aW1lID0gIEdldC1EYXRlIC1Gb3JtYXQgVAogICAgICAgICAgICAgICAgICAgICRleHBvcnQuQ2hhbmdlR0JVc2VkID0gMAogICAgICAgICAgICAgICAgICAgICRleHBvcnQuQ2hhbmdlUmF0ZVBlcmNlbnRVc2VkID0gMAogICAgICAgICAgICAgICAgICAgIHRyeQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgTmV3LUl0ZW0gLVBhdGggIkM6XElJVFNfU2NyaXB0c1xEaXNrSW5mb3JtYXRpb24iIC1JdGVtVHlwZSBEaXJlY3RvcnkgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgZXJyb3IgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRXJyb3IgY3JlYXRpbmcgRGlza0luZm9ybWF0aW9uIGZvbGRlci4gRXJyb3IgPSAkZXJyb3IiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRleHBvcnQgfCBFeHBvcnQtQ3N2IC1QYXRoICJDOlxJSVRTX1NjcmlwdHNcRGlza0luZm9ybWF0aW9uXCQoJGRyaXZlLm5hbWUpLmNzdiIgLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbHNlCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBFcnJvcnMgd2VyZSBkZXRlY3RlZCBiZWZvcmUgcHJvY2VzcyBibG9jay4iCiAgICAgICAgfQogICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxEaXNrQ2hhbmdlc19JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJGJvb2JvbyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIENoZWNrcyBmb3Igb3V0ZGF0ZWQgUG93ZXJTaGVsbCB2ZXJzaW9uIGFuZCByZXR1cm5zIFRydWUgaWYgaXQgaXMuIE9wdGlvbiB0byBlLW1haWwgTVNBbGFybSBvbiBUcnVlLgouREVTQ1JJUFRJT04KICAgQ2hlY2tzIHRoZSBpbnN0YWxsZWQgUG93ZXJTaGVsbCB2ZXJzaW9uIChNYWpvcikgYW5kIHNlZXMgaWYgaXQncyBsZXNzIHRoYW4gMy4gSWYgc28sIGl0IHJldHVybnMgVHJ1ZS4gSWYgdGhlIHRpY2tldCBzd2l0Y2ggaXMgZW5hYmxlZCwgaXQgYWxzbyBlLW1haWxzIE1TQWxhcm0gd2l0aCBhIHJlcXVlc3QgdG8gdXBkYXRlIGl0LgouRVhBTVBMRQogICBDaGVjay1QU1ZlcnNpb24KCiAgIFRydWUKLkVYQU1QTEUKICAgQ2hlY2stUFNWZXJzaW9uIC10aWNrZXQKCiAgIFRydWUKICAgW3RpY2tldCBjcmVhdGVkIGluIENvbm5lY3RXaXNlXQouSU5QVVRTCiAgIE5vIGlucHV0cywgb3B0aW9uYWwgJ3RpY2tldCcgc3dpdGNoLgouT1VUUFVUUwogICBCb29sZWFuLiBJZiAndGlja2V0JyBzd2l0Y2ggY2FsbGVkLCBhbHNvIHNlbmRzIGFuIGUtbWFpbC4KIz4KZnVuY3Rpb24gQ2hlY2stUFNWZXJzaW9uCnsKICAgIFBhcmFtCiAgICAoCiAgICAgICAgIyBTd2l0Y2ggcGFyYW1ldGVyOyBjYWxsIHRvIHNlbmQgZS1tYWlsIHRvIE1TQWxhcm0sIHdoaWNoIHdpbGwgbWFrZSBhIHRpY2tldC4KICAgICAgICBbU3dpdGNoXSR0aWNrZXQKICAgICkKICAgIAogICAgaWYgKCRQU1ZlcnNpb25UYWJsZS5QU1ZlcnNpb24uTWFqb3IgLWx0IDMpCiAgICB7CiAgICAgICAgZWNobyAkdHJ1ZQogICAgICAgIGlmICgkdGlja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJGlkID0gR2V0LUthc2V5YU1hY2hpbmVJRAogICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Cb2R5ICIkaWQgbmVlZHMgYSBQb3dlclNoZWxsIHVwZ3JhZGUuIgogICAgICAgIH0KICAgIH0KICAgIGVsc2Uge2VjaG8gJGZhbHNlfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBmdW5jdGlvbiB3aWxsIG91dHB1dCB0aGUgc2l6ZSBvZiB0aGUgVlNTIHN0b3JlIG9uIGEgbWFjaGluZSBmb3IgYWxsIHZvbHVtZXMgdGhhdCBoYXZlIHNoYWRvdyB2b2x1bWUgdXNhZ2UuIFRISVMgTkVFRFMgVE8gQkUgUlVOIEFTIFdJVEggQURNSU5JU1RBVElWRSBBQ0NFU1MhCi5ERVNDUklQVElPTgogICBUaGlzIGZ1bmN0aW9uIGdhdGhlcnMgYWxsIHZvbHVtZXMgYWNjb3JkaW5nIHRvIHRoZSB3d2luMzJfdm9sdW1lIGNsYXNzIGFzIHdlbGwgYXMgdGhlIHZvbHVtZXMgYXMgcmVwb3J0ZWQgYnkgd2luMzJfc2hhZG93c3RvcmFnZSBjbGFzcy4gIEl0IHdpbGwgY29tcGFyZSB0aGUgMiBhbmQgd2VlZCBvdXQgYW55IHZvbHVtZXMgdGhhdCBkbyBub3QgaGF2ZSB1c2VkIHZzcyBzcGFjZS4gIEl0IHdpbGwgdGhlbiBvdXRwdXQgdGhlIHJlc3VsdHMgaW4gYSBjdXN0b20gb2JqZWN0LgouRVhBTVBMRQogICBHZXQtVlNTU3RhdGlzdGljcyAtRXJyb3JMb2cKIz4KZnVuY3Rpb24gR2V0LVZTU1N0YXRpc3RpY3MKewogICAgUGFyYW0KICAgICgKICAgICAgICBbc3dpdGNoXSRFcnJvckxvZwogICAgKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgJGJvb2Jvb3MgPSBAKCkKICAgICAgICAkZXJyb3JzID0gJG51bGwKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgICNnYXRoZXIgYWxsIHZvbHVtZXMgb24gdGhlIGNvbXB1dGVyCiAgICAgICAgICAgICRWb2x1bWVzID0gR2V0LVdtaU9iamVjdCAtQ2xhc3MgV2luMzJfVm9sdW1lIC1FcnJvckFjdGlvbiBTdG9wIC1FcnJvclZhcmlhYmxlIGVycm9ycwogICAgICAgICAgICAjZ2F0aGVyIGFsbCBzaGFkb3dzdG9yYWdlIG9iamVjdHMuCiAgICAgICAgICAgICRTaGFkb3dTdG9yYWdlT2JqZWN0cyA9IEdldC1XbWlPYmplY3QgLUNsYXNzIFdpbjMyX1NoYWRvd1N0b3JhZ2UgLUVycm9yQWN0aW9uIFN0b3AgLUVycm9yVmFyaWFibGUgZXJyb3JzCiAgICAgICAgfQogICAgICAgIENhdGNoIFtTeXN0ZW0uTWFuYWdlbWVudC5NYW5hZ2VtZW50RXhjZXB0aW9uXQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gTmVlZCB0byBydW4gc2NyaXB0IGFzIGFkbWluaXN0cmF0b3IuIEVSUk9SID0gJGVycm9ycy4iCiAgICAgICAgICAgIHJldHVybiAiRVJST1IuIE5lZWQgdG8gcnVuIGFzIGFkbWluaXN0cmF0b3IhIEVycm9yID0gJCgkZXJyb3JbMF0pIgogICAgICAgIH0KICAgICAgICBDYXRjaAogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBnZXR0aW5nIFdNSU9iamVjdHMuIgogICAgICAgIH0KICAgICAgICBbYXJyYXldJHJlcG9ydCA9IEAoKQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIGZvcmVhY2goJFNoYWRvd1N0b3JhZ2VPYmplY3QgaW4gJFNoYWRvd1N0b3JhZ2VPYmplY3RzKQogICAgICAgIHsKICAgICAgICAgICAgZm9yZWFjaCgkVm9sdW1lIGluICRWb2x1bWVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBJZigkU2hhZG93U3RvcmFnZU9iamVjdC52b2x1bWUgLWVxICRWb2x1bWUuX19SRUxQQVRIKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm9wPQogICAgICAgICAgICAgICAgICAgIFtvcmRlcmVkXUB7CiAgICAgICAgICAgICAgICAgICAgJ05hbWUnID0gJFZvbHVtZS5kcml2ZWxldHRlci50cmltZW5kKCI6IikKICAgICAgICAgICAgICAgICAgICAnVlNTRHJpdmUnPSR2b2x1bWUubmFtZQogICAgICAgICAgICAgICAgICAgICdWU1NBbGxvY2F0ZWRTcGFjZUdCJyA9IFtTeXN0ZW0uTWF0aF06OlJvdW5kKCgkU2hhZG93U3RvcmFnZU9iamVjdC5BbGxvY2F0ZWRTcGFjZSAvMUdCKSwgMykKICAgICAgICAgICAgICAgICAgICAnVlNTVXNlZFNwYWNlR0InPVtTeXN0ZW0uTWF0aF06OlJvdW5kKCgkU2hhZG93U3RvcmFnZU9iamVjdC51c2Vkc3BhY2UgLzFHQiksIDMpCiAgICAgICAgICAgICAgICAgICAgJ1ZTU01heFNwYWNlR0InPSBbU3lzdGVtLk1hdGhdOjpSb3VuZCgoJFNoYWRvd1N0b3JhZ2VPYmplY3QubWF4c3BhY2UgLzFHQiksIDMpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRyZXBvcnQgKz0gTmV3LU9iamVjdCAtVHlwZU5hbWUgcHNvYmplY3QgLVByb3BlcnR5ICRQcm9wICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSAkKCRTaGFkb3dTdG9yYWdlT2JqZWN0LnZvbHVtZSkgZGlkbid0IG1hdGNoICQoJFZvbHVtZS5fX1JFTFBBVEgpIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHJldHVybiAkcmVwb3J0CiAgICAgfQogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxWU1NTdGF0aXN0aWNzX0lJVFMudHh0IgogICAgICAgICAgICBmb3JlYWNoKCRib29ib28gaW4gJGJvb2Jvb3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkYm9vYm9vIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBmdW5jdGlvbiBjYWxjdWxhdGVzIHRoZSBwcm9qZWN0ZWQgbnVtYmVyIG9mIGRheXMgaW4gd2hpY2ggdGhlIGZyZWUgc3BhY2Ugb24gTm9uLVJlbW92YWJsZSBkcml2ZSB3aWxsIGJlIHVzZWQgY29tcGxldGVseS4gSWYgdGhlIHNwYWNlIHdpbGwgYmUgdXNlZCBpbiBsZXNzIHRoYW4gMzAgZGF5cyBpdCB3aWxsIHNlbmQgYW4gZS1tYWlsLgogICAuREVTQ1JJUFRJT04KICAgVGhpcyBmdW5jdGlvbiBjb2xsZWN0cyB0aGUgLmNzdiBmaWxlcyBmb3IgZWFjaCBvZiB0aGUgZHJpdmVzIGxvY2F0ZWQgaW4gdGhlIEM6XElJVFNfU2NyaXB0c1xEaXNrSW5mb3JtYXRpb24gZm9sZGVyLiBCYXNlZCBvbiB0aGUgdG90YWwgdXNlZCBzcGFjZSwgZnJlZSBzaXplIGFuZCB0aGUgbnVtYmVyIG9mIGRheXMgCiAgIHRoZSBkYXRhIGlzIGNvbGxlY3RlZCBmb3IgaXQgY2FsY3VsYXRlcyB0aGUgcmF0ZSBvZiBjaGFuZ2UgZm9yIGEgc2luZ2xlIGRheS4gSXQgdGhlbiBwcm9qZWN0cyB0aGUgbnVtYmVyIG9mIGRheXMgaW4gd2hpY2ggdGhlIGZyZWUgc3BhY2Ugd2lsbCBiZSB1c2VkIGNvbXBsZXRlbHkuCiAgIFRoZSBzY3JpcHQgZG9lcyBub3QgaGF2ZSBhbnkgcGFyYW1ldGVyLCBob3dldmVyIGl0IGRvZXMgdXNlIDIgb3RoZXIgZnVuY3Rpb25zIDogR2V0LUthc2V5YU1hY2hpbmVJRCBhbmQgRW1haWwtTVNBbGFybS4KICAgLkVYQU1QTEUKICAgIEdldC1Qcm9qZWN0aW9uCiM+CmZ1bmN0aW9uIEdldC1Qcm9qZWN0aW9uIHsKICAgIDwjIExPRyBGSUxFIGlzIGNyZWF0ZWQgdG8gb3V0cHV0IHRoZSBpbmZvcm1hdGlvbiB0by5Mb2cgZmlsZSBleGlzdHMgYXQgIEM6XElJVFNfTWdtdFxUZW1wXERpc2tJbmZvcm1hdGlvblxsb2dzLnR4dAogICAgY2hlY2tzIGlmIHRoZSBsb2cgZmlsZSBleGlzdCBpbiB0aGUgZmlyc3QgaWYgYmxvY2ssIGlmIGl0IGV4aXN0cyBpdCBhZGRzIGEgZ2VuZXJhbCBjb21tZW50ICwgaWYgaXQgZG9lcyBub3QgZXhpc3QgdGhlbiBydW5zIHRoZSBjb2RlIGluIHRoZSBlbHNlIHN0YXRlbWVudCB3aGVyZSAKICAgIGl0IG1ha2VzIHRoZSBEaXNrSW5mb3JtYXRpb24gZm9sZGVyIGFuZCB0aGUgbG9ncy50eHQgZmlsZSAgIz4KICAgICRsb2dmaWxlID0gJ0M6XElJVFNfTWdtdFxUZW1wXERpc2tJbmZvcm1hdGlvblxsb2dzLnR4dCcKICAgICRkYXRlID0gR2V0LURhdGUKICAgICR0ZXN0bG9nZmlsZSA9IFRlc3QtUGF0aCAkbG9nZmlsZQogICAgICAgIGlmICgkdGVzdGxvZ2ZpbGUgLWVxICR0cnVlKSB7CiAgICAgICAgQWRkLUNvbnRlbnQgJGxvZ2ZpbGUgImxvZ3Mgb24gJGRhdGUiCiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgIE5ldy1JdGVtIC1QYXRoICdDOlxJSVRTX01nbXRcVGVtcCcgLUl0ZW1UeXBlICdEaXJlY3RvcnknIC1OYW1lICdEaXNrSW5mb3JtYXRpb24nCiAgICAgICAgTmV3LUl0ZW0gLVBhdGggJ0M6XElJVFNfTWdtdFxUZW1wXERpc2tJbmZvcm1hdGlvbicgLUl0ZW1UeXBlICdmaWxlJyAtTmFtZSAnbG9ncy50eHQnCiAgICAgICAgQWRkLUNvbnRlbnQgJGxvZ2ZpbGUgIlRoaXMgaXMgd2hlcmUgd2UgY29sbGVjdCBsb2dzIGZvciBEaXNrIFVzYWdlIgogICAgICAgIH0KICAgICAgICA8IyBlYWNoIHZvbHVtZSAoaWYgbm90IGEgcmVtb3ZhYmxlIGRyaXZlKSBoYXMgYSAuY3N2IGZpbGUgaW4gdGhlIERpc2tJbmZvcm1hdGlvbiBmb2xkZXIuIFRoZSAkY3N2IHZhcmlhYmxlIGNvbnRhaW5zIGFsbCB0aGUgLmNzdiBmaWxlcyBpbiB0aGF0IGxvY2F0aW9uICM+ICAgCiAgICAgICAgJGNzdiA9IEdldC1DaGlsZEl0ZW0gQzpcSUlUU19TY3JpcHRzXERpc2tJbmZvcm1hdGlvbiAtRmlsdGVyICouY3N2CgogICAgICAgIDwjICRjIGlzIHRoZSBjc3YgZmlsZSBmb3IgZWFjaCB2b2x1bWUgIz4KICAgICAgICBGb3JFYWNoICgkYyBpbiAkY3N2KSB7CiAgICAgICAgPCMgZWFjaCB2b2x1bWVzIGNzdiBmaWxlIGlzIG1hZGUgaW50byBhbiBvYmplY3QgcmVwcmVzZW50ZWQgYnkgJHZvbGNzdiAjPgogICAgICAgICR2b2xjc3YgPSBJbXBvcnQtY3N2IEM6XElJVFNfU2NyaXB0c1xEaXNrSW5mb3JtYXRpb25cJGMKCiAgICAgICAgPCMgVGhpcyBpcyB0aGUgdG90YWwgdXNlZCBzcGFjZSBmb3IgZWFjaCBkcml2ZSwgY2FsY3VsYXRlZCBieSBhZGRpbmcgdGhlIENoYW5nZUdCVXNlZCBjb2x1bW4gaW4gdGhlIGNzdiBmb3IgZWFjaCB2b2x1bWUgIz4KICAgICAgICAkdG90YWx1c2VkID0gKCR2b2xjc3YuQ2hhbmdlR0JVc2VkIHwgTWVhc3VyZS1PYmplY3QgLVN1bSkuU3VtCgogICAgICAgIDwjICRTaXplIGlzIHRoZSBUb3RhbFNwYWNlIG9mIHRoZSB2b2x1bWUgdGFrZW4gYXMgdGhlIE1heGltdW0gdmFsdWUgZnJvbSB0aGUgVG90YWxTcGFjZSBjb2x1bW4gIz4KICAgICAgICAkU2l6ZSA9ICgkdm9sY3N2LlRvdGFsU3BhY2UgfCBNZWFzdXJlLU9iamVjdCAtTWF4aW11bSkuTWF4aW11bQoKICAgICAgICA8IyBSdW5zIHRoZSBHZXQtS2FzZXlhTWFjaGluZUlEIEZVTkNUSU9OIHRvIGdldCB0aGUgbmFtZSBvZiB0aGUgbWFjaGluZSB0byBiZSB1c2VkIGxhdGVyICM+CiAgICAgICAgJG1hY2hpbmUgPSBHZXQtS2FzZXlhTWFjaGluZUlECgogICAgICAgIDwjIFRoZSB2YXJpYWJsZSBpcyBhbGwgdGhlIHBvaW50cyBpbiB0aGUgY3N2IGZpbGUgZm9yIHdoaWNoIHRoZSBkYXRlIGlzIGNvbGxlY3RlZCAjPgogICAgICAgICRjb3VudGFsbCA9ICR2b2xjc3YuY291bnQKCiAgICAgICAgPCMgMSBsZXNzIHRoYW4gdGhlIHRvdGFsIGNvdW50IHRvIGJlIHVzZWQgaW4gdGhlIG5leHQgc3RlcCB0byBnZXQgdGhlIGxhdGVzdCBmcmVlc3BhY2UgIz4KICAgICAgICAkY291bnQgPSAkdm9sY3N2LmNvdW50LTEKCiAgICAgICAgPCMgZnJvbSB0aGUgY3N2IGZpbGUsIHRoZSB2YXJpYWJsZSBnZXRzIHRoZSBuYW1lIG9mIHRoZSBkcml2ZSBpbiB0aGUgZm9yZWFjaCBsb29wICM+CiAgICAgICAgJGRyaXZlID0gJHZvbGNzdi5uYW1lWyRjb3VudF0KCiAgICAgICAgPCMgZnJlZSBzcGFjZSBvbiB0aGUgZHJpdmUsIGxhc3QgaXRlbSBpbiB0aGUgZnJlZXNwYWNlIGNvbHVtbiAjPgogICAgICAgICRmcmVlc3BhY2UgPSAkdm9sY3N2LmZyZWVzcGFjZVskY291bnRdCgogICAgICAgICAgICA8IyBpZiB0aGUgdG90YWwgdXNlZCBzcGFjZSBpcyBMRVNTIHRoYW4gMCB3aGljaCBtZWFucyB0aGF0IHVzZWRzcGFjZSBpcyBpbiBuZWdhdGl2ZSBhbmQgd2UgaGF2ZSB1c2VkIHRoYXQgc3BhY2UgIz4KICAgICAgICAgICAgaWYgKCR0b3RhbHVzZWQgLWx0IDAuMDApIHsKICAgICAgICAgICAgPCMgZ2V0cyB0aGUgY3VycmVudCB0aW1lIHdpdGggdGhlIGxhc3QgdGltZSBhbmQgZGF0ZSBlbnRyeSBpbiB0aGUgc2hlZXQgIz4KICAgICAgICAgICAgJGN1cnJ0aW1lID0gJHZvbGNzdi5kYXRlWyRjb3VudF0rIiAiKyR2b2xjc3YudGltZVskY291bnRdCiAgICAgICAgICAgIDwjIGdldHMgdGhlIHN0YXJ0IHRpbWUgZnJvbSB0aGUgZmlyc3QgZW50cnkgb2YgdGltZSBhbmQgZGF0ZSBpbiB0aGUgY3N2IGZpbGUgIz4KICAgICAgICAgICAgJHN0YXJ0dGltZSA9ICR2b2xjc3YuZGF0ZVswXSsiICIrJHZvbGNzdi50aW1lWzBdCiAgICAgICAgICAgIDwjIENhbGN1bGF0ZXMgdGhlIFRpbWUgRGlmZmVyZW5jZSBmcm9tICRjdXJydGltZSBhbmQgJHN0YXJ0dGltZSAjPgogICAgICAgICAgICAkdGltZWRpZmYgPSBbbWF0aF06OlJvdW5kKChbZGF0ZXRpbWVdJGN1cnJ0aW1lIC0gW2RhdGV0aW1lXSRzdGFydHRpbWUpLlRvdGFsRGF5cywyKQogICAgICAgICAgICA8IyBEYWlseSB1c2FnZSBpcyBjYWxjdWxhdGVkIGJ5IGRpdmlkaW5nIHRoZSB0b3RhbHVzZWQgYnkgdGhlIG51bWJlciBvZiBkYXlzIGl0IHdhcyB1c2VkIGluICM+CiAgICAgICAgICAgICRkYWlseXVzZWQgPSAkdG90YWx1c2VkIC8gJHRpbWVkaWZmCiAgICAgICAgICAgIDwjIGZyZWVzcGFjZSBjdXJyZW50bHkgb24gYSB2b2x1bWUgaXMgZGl2aWRlZCBieSB0aGUgZGFpbHl1c2VkIGF2ZXJhZ2UgdG8gZ2V0IHRoZSBwcm9qZWN0ZWQgZGF5cyAjPgogICAgICAgICAgICAkcHJvanVzZWRheXMgPSBbbWF0aF06OlJvdW5kKCgkZnJlZXNwYWNlIC8gJGRhaWx5dXNlZCksMikKICAgICAgICAgICAgW2RlY2ltYWxdJHBvc3Byb2p1c2VkYXlzID0gLSgkcHJvanVzZWRheXMpCiAgICAgICAgICAgICAgICAgICAgPCMgaWYgJHByb2p1c2VkYXlzIGlzIGxlc3MgdGhhbiAxIG1vbnRoIHNlbmRzIGFuIGUtbWFpbCAsIGlmIG5vdCBvdXRwdXRzIHRvIGEgbG9nIGZpbGUgIz4KICAgICAgICAgICAgICAgICAgICBpZiAoJHBvc3Byb2p1c2VkYXlzIC1sZSAzMCApIHsKICAgICAgICAgICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Cb2R5ICIkZHJpdmUgZHJpdmUgb24gJG1hY2hpbmUgd2lsbCBnbyBsb3cgb24gZnJlZSBkaXNrIHNwYWNlIHNvb24uIEluIHRoZSBsYXN0ICR0aW1lZGlmZiBkYXlzLCAkdG90YWx1c2VkIEdCIHdhcyB1c2VkLiBBdCB0aGlzIHRpbWUgJGZyZWVzcGFjZSBHQiBpcyBmcmVlIG9mICRTaXplIEdCLiBCYXNlZCBvbiB0aGlzIHRyZW5kICRmcmVlc3BhY2UgR0Igd2lsbCBiZSB1c2VkIGluICRwb3Nwcm9qdXNlZGF5cyBkYXlzLiBQbGVhc2UgZmluZCB0aGUgZGlzayB1c2FnZSByZXBvcnQgdW5kZXIgRG9jdW1lbnRzIHRhYiBpbiB0aGUgdGlja2V0ICIgLUF0dGFjaG1lbnQgQzpcSUlUU19TY3JpcHRzXERpc2tJbmZvcm1hdGlvblwkYyAtU3ViamVjdCAiWyRtYWNoaW5lXSAtIERpc2sgc3BhY2UgcHJvamVjdGlvbiIKICAgICAgICAgICAgICAgICAgICBBZGQtQ29udGVudCAkbG9nZmlsZSAiJGRyaXZlIGRyaXZlIGhhcyBhIGZyZWUgc3BhY2Ugb2YgJGZyZWVzcGFjZSBHQi4gRm9yIHRoZSBsYXN0ICR0aW1lZGlmZiBkYXlzIHRoZSAkdG90YWx1c2VkIEdCIHdhcyB1c2VkLCBGUkVFIHNwYWNlIHdpbGwgZXhoYXVzdCBpbiAkcG9zcHJvanVzZWRheXMgZGF5cy4gZS1tYWlsIGlzIHNlbnQgIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBBZGQtQ29udGVudCAkbG9nZmlsZSAiJGRyaXZlIGRyaXZlIGhhcyBhIGZyZWUgc3BhY2Ugb2YgJGZyZWVzcGFjZSBHQi4gRm9yIHRoZSBsYXN0ICR0aW1lZGlmZiBkYXlzIHRoZSAkdG90YWx1c2VkIEdCIHdhcyB1c2VkLCBzcGFjZSB3aWxsIG5vdCBleGhhdXN0IGluIDMwIGRheXMgaW5zdGVhZCB3aWxsIGV4aGF1c3QgaW4gJHBvc3Byb2p1c2VkYXlzIGRheXMgIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KICAgICAgICAgICAgIDwjIElmIHRoZSB0b3RhbCB1c2VkIHNwYWNlIGlzIGdyZWF0ZXIgdGhhbiAwICxpcyBhIHBvc2l0aXZlIHdoaWNoIG1lYW5zIHdlIGhhdmUgZ2FpbmVkIHNwYWNlICM+CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgQWRkLUNvbnRlbnQgJGxvZ2ZpbGUgIlRoZSBhdmVyYWdlIHNwYWNlIHVzZWQgZm9yICRkcml2ZSBEUklWRSBpcyAkdG90YWx1c2VkIEdCLiBJZiB0aGlzIGlzIHBvc2l0aXZlIHRoaXMgbWVhbnMgd2UgaGF2ZSBHQUlORUQgRlJFRSBTUEFDRS5lbWFpbCB3aWxsIG5vdCBiZSBzZW50IGJlY2F1c2UgZnJlZSBzcGFjZSB3aWxsIG5vdCBleGhhdXN0IElOIDMwIERBWVMuIgogICAgICAgICAgICB9CiAgICAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KICAgICAgICAKPCMKLlN5bm9wc2lzCiAgIERpc2FibGUgYSB1c2VyJ3MgMzY1IGFjY291bnQKLkRFU0NSSVBUSU9OCiAgIFdpbGwgcHJvbXB0IGZvciBlbWFpbCBhZGRyZXNzIG9mIHVzZXIgYW5kIGRpc2FibGUgYWZ0ZXIgeW91IGdpdmUgdGhlIDM2NSBjcmVkZW50aWFscwouRVhBTVBMRQogICBFeGFtcGxlIG9mIGhvdyB0byB1c2UgdGhpcyBjbWRsZXQKLkVYQU1QTEUKICAgQW5vdGhlciBleGFtcGxlIG9mIGhvdyB0byB1c2UgdGhpcyBjbWRsZXQKIz4KZnVuY3Rpb24gZGlzYWJsZS0zNjUtYWNjb3VudAp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0gKFtzdHJpbmddJG1haWxib3g9KHJlYWQtaG9zdCAiRW50ZXIgdXNlcidzIGVtYWlsIGFkZHJlc3M6IikpCgogICAgI0Nvbm5lY3QgdG8gY2xpZW50J3MgMzY1CiAgICAkTGl2ZUNyZWQgPSBHZXQtQ3JlZGVudGlhbAogICAgSW1wb3J0LU1vZHVsZSBtc29ubGluZTsgQ29ubmVjdC1Nc29sU2VydmljZSAtQ3JlZGVudGlhbCAkbGl2ZWNyZWQKICAgICRTZXNzaW9uID0gTmV3LVBTU2Vzc2lvbiAtQ29uZmlndXJhdGlvbk5hbWUgTWljcm9zb2Z0LkV4Y2hhbmdlIC1Db25uZWN0aW9uVXJpIGh0dHBzOi8vcHMub3V0bG9vay5jb20vcG93ZXJzaGVsbC8/cHJveHltZXRob2Q9cnBzIC1DcmVkZW50aWFsICRMaXZlQ3JlZCAtQXV0aGVudGljYXRpb24gQmFzaWMgLUFsbG93UmVkaXJlY3Rpb24KICAgIEltcG9ydC1QU1Nlc3Npb24gJFNlc3Npb24KCiAgICBTZXQtTXNvbFVzZXIgLVVzZXJQcmluY2lwYWxOYW1lICRtYWlsYm94IC1CbG9ja0NyZWRlbnRpYWwgJHRydWUKfQoKPCMKLlN5bm9wc2lzCiAgIFRoaXMgY21kbGV0IHdpbGwgc2NoZWR1bGUgZ2V0LWRpc2tjaGFuZ2VzIHRvIHJ1biBhcyBhIHNoY2VkdWxlZCB0YXNrIGZvciBldmVyeSBob3VyLiAKLkRFU0NSSVBUSU9OCiAgIFRoaXMgZnVuY3Rpb24gd2lsbCBzY2hlZHVsZWQgZ2V0LWRpc2tjaGFuZ2VzIHRvIHJ1biBldmVyeSAxMCBtaW51dGVzIHNvIHRoYXQgc3RhdGlzdGljcyBjYW4gYmUgZ2F0aGVyZWQuICAKLkVYQU1QTEUKICAgRGVwbG95LUdldERpc2tDaGFuZ2VzCiM+CmZ1bmN0aW9uIERlcGxveS1HZXREaXNrQ2hhbmdlcwp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICAgICAjIFN3aXRjaCBmb3IgZXJyb3IgbG9nZ2luZy4gCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkRXJyb3JMb2cKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICRib29ib29zID0gQCgpCiAgICAgICAgJFBTVmVyc2lvbiA9IENoZWNrLVBTVmVyc2lvbiAtdGlja2V0ICNDaGVjayB0aGUgcG93ZXJzaGVsbCB2ZXJzaW9uLiBOZWVkcyB0byBiZSBhdCBsZWFzdCB2ZXJzaW9uIDMuICBTZW5kcyBlbWFpbCB0byBtc2FsYXJtIGlmIHZlcnNpb24gaXMgbGVzcyB0aGFuIDMuIAogICAgICAgIGlmKCRQU1ZlcnNpb24gLWVxICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgICRzdG9wID0gMAogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBQb3dlcnNoZWxsIHZlcnNpb24gaXMgMyBvciBncmVhdGVyLiIKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJHN0b3AgPSAxCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFBvd2Vyc2hlbGwgdmVyc2lvbiBpcyBsZXNzIHRoYW4gMy4iCiAgICAgICAgfQogICAgfQogICAgUHJvY2VzcwogICAgewogICAgICAgIGlmKCRzdG9wIC1lcSAiMCIpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBFeGVjdXRpbmcgcHJvY2VzcyBibG9jayBpZiBzdGF0ZW1lbnQgYmVjYXVzZSBwb3dlcnNoZWxsIHZlcnNpb24gaXMgMyBvciBoaWdoZXIuIgogICAgICAgICAgICAkQ3VycmVudFNjaGVkdWxlZFRhc2sgPSBHZXQtU2NoZWR1bGVkVGFzayB8IFdoZXJlLU9iamVjdCB7KCRfLlRhc2tOYW1lIC1lcSAnR2V0RGlza0NoYW5nZXMnKX0gI0dldHRpbmcgbGlzdCBvZiB0YXNrcyBhbmQgc2VlaW5nIGlmIHRoZXJlIGlzIGFscmVhZHkgYSB0YXNrIGJ5IHRoZSBuYW1lIG9mIEdldERpc2tDaGFuZ2VzCiAgICAgICAgICAgIGlmKCRDdXJyZW50U2NoZWR1bGVkVGFzaykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2NoZWR1bGVkIHRhc2sgJEN1cnJlbnRTY2hlZHVsZWRUYXNrIGFscmVhZHkgZXhpc3RzLiAgU2tpcCBjcmVhdGlvbiBwcm9jZXNzLiIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE5vIEdldERpc2tDaGFuZ2VzIHRhc2sgZm91bmQuIENyZWF0aW5nIGEgbmV3IHRhc2suIgogICAgICAgICAgICAgICAgJFRhc2tOYW1lID0gJ0dldERpc2tDaGFuZ2VzJwogICAgICAgICAgICAgICAgJGFjdGlvbiA9IE5ldy1TY2hlZHVsZWRUYXNrQWN0aW9uIC1FeGVjdXRlICdwb3dlcnNoZWxsLmV4ZSctQXJndW1lbnQgJy1Ob1Byb2ZpbGUgLVdpbmRvd1N0eWxlIEhpZGRlbiAtdmVyYiBydW5hcyAtY29tbWFuZCAiR2V0LURpc2tDaGFuZ2VzIicKICAgICAgICAgICAgICAgICR0cmlnZ2VyID0gTmV3LVNjaGVkdWxlZFRhc2tUcmlnZ2VyIC1PbmNlIC1BdCA5YW0gLVJlcGV0aXRpb25JbnRlcnZhbCAoTmV3LVRpbWVTcGFuIC1NaW51dGVzIDEwKSAtUmVwZXRpdGlvbkR1cmF0aW9uIChOZXctVGltZVNwYW4gLURheXMgOTAwMCkKICAgICAgICAgICAgICAgICRzZXR0aW5ncyA9IE5ldy1TY2hlZHVsZWRUYXNrU2V0dGluZ3NTZXQgLVByaW9yaXR5IDEwCiAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkY3JlZHMgPSBDcmVhdGUtTG9jYWxBZG1pbmlzdHJhdG9yCiAgICAgICAgICAgICAgICAgICAgJHBzID0gZ2V0LWlpdHN0YXNrcHN3ZAogICAgICAgICAgICAgICAgICAgIFJlZ2lzdGVyLVNjaGVkdWxlZFRhc2sgLVRhc2tOYW1lICRUYXNrTmFtZSAtQWN0aW9uICRhY3Rpb24gLVRyaWdnZXIgJHRyaWdnZXIgLVVzZXIgJGNyZWRzLnVzZXJuYW1lIC1QYXNzd29yZCAkcHMgLURlc2NyaXB0aW9uICJUaGlzIGdhdGhlcnMgZGlzayBpbmZvcm1hdGlvbiBldmVyeSAxMCBtaW51dGVzLiIgLVNldHRpbmdzICRzZXR0aW5ncyAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgQ2F0Y2gKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDb3VsZG4ndCBjcmVhdGUgbmV3IHNjaGVkdWxlZCB0YXNrLiAgRXJyb3IgaXMgJGVycm9yWzBdLiIKICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2tpcHBpbmcgcHJvY2VzcyBibG9jayBiZWNhdXNlIHBvd2Vyc2hlbGwgdmVyc2lvbiBpcyBsZXNzIHRoYW4gMyBhbmQgc2NoZWR1bGVkIHRhc2tzIGNhbid0IGJlIGNyZWF0ZWQuIgogICAgICAgIH0gICAKICAgIH0KICAgIEVuZAogICAgewogICAgICAgIGlmKCRFcnJvckxvZykKICAgICAgICB7CiAgICAgICAgICAgICRMb2dQYXRoID0gIiRlbnY6d2luZGlyXFRlbXBcRGVwbG95RGlza0NoYW5nZXNfSUlUUy50eHQiCiAgICAgICAgICAgIGZvcmVhY2goJGJvb2JvbyBpbiAkYm9vYm9vcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIiRib29ib28iIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUSGlzIHNjcmlwdCB3aWxsIHNlbmQgb3V0IHRoZSB0aHJlZSBwYXRjaGluZyBub3RpZmljYXRpb25zIHByaW9yIHRvIHNlcnZlciBwYXRjaGluZyBpZiB0aGUgZGF5IGlzIGNvcnJlY3QuIAouREVTQ1JJUFRJT04KICAgVGhpcyBzY3JpcHQgZmluZHMgdGhlIGZpcnN0IGRheSBvZiB0aGUgbW9udGggYW5kIHRoZW4gZXh0cmFwb2xhdGVzIHRoZSA0dGggdHVlc2RheSBmcm9tIHRoYXQgZGF5LiAgSXQgd2lsbCB0aGVuIGNvbXBhcmUgdGhlIGN1cnJlbnQgZGF5IHRvIGZpZ3VyZSBvdXQgaWYgaXQncyB0aGUgRnJpZGF5IHByZWNlZGluZywgTW9uZGF5IHByZWNlZGluZywgb3IgdGhlIGRheSBvZiBwYXRjaGluZy4gIEl0IHdpbGwgZG8gc29tZXRoaW5nIHNwZWNpZmljIGZvciBlYWNoIG9mIHRob3NlIGRheXMuIAouRVhBTVBMRQogICBTZW5kLVBhdGNoRW1haWwgLUVycm9yTG9nCiM+CmZ1bmN0aW9uIFNlbmQtUGF0Y2hFbWFpbAp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICAgICBbc3dpdGNoXSRFcnJvckxvZwogICAgKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgCiAgICAgICAgJGJvb2Jvb3MgPSBAKCkKICAgICAgICAkY3VycmVudGRhdGUgPSBHZXQtRGF0ZQogICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFRvZGF5J3MgZGF0ZSBmb3VuZCBhcyAkY3VycmVudGRhdGUuIgogICAgICAgICRmaXJzdG9mdGhlbW9udGggPSBHZXQtRGF0ZSAtRGF5IDEKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGb3VuZCB0aGUgZmlyc3Qgb2YgdGhlIG1vbnRoIGFzICRmaXJzdG9mdGhlbW9udGguIgogICAgICAgIHN3aXRjaCAoJGZpcnN0b2Z0aGVtb250aC5EYXlPZldlZWspCiAgICAgICAgewogICAgICAgICAgICAiU3VuZGF5IiAgICB7JHBhdGNoVHVlc2RheSA9ICRmaXJzdG9mdGhlbW9udGguQWRkRGF5cygyMyk7IGJyZWFrfSAKICAgICAgICAgICAgIk1vbmRheSIgICAgeyRwYXRjaFR1ZXNkYXkgPSAkZmlyc3RvZnRoZW1vbnRoLkFkZERheXMoMjIpOyBicmVha30gCiAgICAgICAgICAgICJUdWVzZGF5IiAgIHskcGF0Y2hUdWVzZGF5ID0gJGZpcnN0b2Z0aGVtb250aC5BZGREYXlzKDIxKTsgYnJlYWt9IAogICAgICAgICAgICAiV2VkbmVzZGF5IiB7JHBhdGNoVHVlc2RheSA9ICRmaXJzdG9mdGhlbW9udGguQWRkRGF5cygyNyk7IGJyZWFrfSAKICAgICAgICAgICAgIlRodXJzZGF5IiAgeyRwYXRjaFR1ZXNkYXkgPSAkZmlyc3RvZnRoZW1vbnRoLkFkZERheXMoMjYpOyBicmVha30gCiAgICAgICAgICAgICJGcmlkYXkiICAgIHskcGF0Y2hUdWVzZGF5ID0gJGZpcnN0b2Z0aGVtb250aC5BZGREYXlzKDI1KTsgYnJlYWt9IAogICAgICAgICAgICAiU2F0dXJkYXkiICB7JHBhdGNoVHVlc2RheSA9ICRmaXJzdG9mdGhlbW9udGguQWRkRGF5cygyNCk7IGJyZWFrfSAKICAgICAgICB9CiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRm91bmQgcGF0Y2ggdHVlc2RheSB0byBiZSAkcGF0Y2hUdWVzZGF5LiIKICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICAkc2VjdXJlcHdkID0gR2V0LUNvbnRlbnQgLVBhdGggJ0M6XFBhdGNoRW1haWxcUGFzc3dkLnR4dCcgfCBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nCiAgICAgICAgJGNyZWRlbnRpYWxzID0gbmV3LW9iamVjdCAtdHlwZW5hbWUgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgLWFyZ3VtZW50bGlzdCAiTWFuYWdlZC5TZXJ2aWNlcyIsJHNlY3VyZXB3ZAogICAgICAgIGlmKCRwYXRjaFR1ZXNkYXkuQWRkRGF5cygtNCkuZGF5IC1lcSAkY3VycmVudGRhdGUuZGF5KQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRm91bmQgdG9kYXkgaXMgdGhlIEZyaWRheSBiZWZvcmUgcGF0Y2hpbmcuIgogICAgICAgICAgICAkUGhyYXNlID0gIk5leHQgd2VlayBUdWVzZGF5IgogICAgICAgICAgICAkZW1haWwgPSAkdHJ1ZQogICAgICAgIH0KICAgICAgICBlbHNlaWYoJHBhdGNoVHVlc2RheS5BZGREYXlzKC0xKS5kYXkgLWVxICRjdXJyZW50ZGF0ZS5EYXkpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGb3VuZCB0b2RheSBpcyB0aGUgTW9uZGF5IGJlZm9yZSBwYXRjaGluZy4iCiAgICAgICAgICAgICRQaHJhc2UgPSAiVG9tb3Jyb3ciCiAgICAgICAgICAgICRlbWFpbCA9ICR0cnVlCgogICAgICAgIH0KICAgICAgICBFbHNlaWYoJHBhdGNoVHVlc2RheS5kYXkgLWVxICRjdXJyZW50ZGF0ZS5EYXkpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGb3VuZCB0b2RheSBpcyB0aGUgZGF5IG9mIHBhdGNoaW5nLiIKICAgICAgICAgICAgJFBocmFzZSA9ICJUb2RheSIKICAgICAgICAgICAgJGVtYWlsID0gJHRydWUKICAgICAgICAgICAgJGVtYWlsX2VuZyA9ICR0cnVlCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZvdW5kIHRvZGF5IGlzIG5vdCBlaXRoZXIgb2YgdGhlIHJpZ2h0IHBhdGNoaW5nIGRheXMuIgogICAgICAgICAgICAkZW1haWwgPSAkZmFsc2UKICAgICAgICB9CiAgICAgICAgaWYoKCRlbWFpbCAtZXEgJHRydWUpIC1hbmQgKChUZXN0LVBhdGggLVBhdGggJ0M6XERyb3Bib3ggKE1hbmFnZWQgU2VydmljZXMpXE1hbmFnZWQgU2VydmljZXMgVGVhbSBGb2xkZXJcUGF0Y2hpbmdFbWFpbHNcTWFya2V0aW5nTWFuYWdlclNlYXJjaC5jc3YnKSAtZXEgJHRydWUpKQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gSW1wb3J0aW5nIEVtYWlsIGFkZHJlc3NlcyBmcm9tIENTVi4iCiAgICAgICAgICAgICRlbWFpbHMgPSBJbXBvcnQtQ3N2IC1QYXRoICdDOlxEcm9wYm94IChNYW5hZ2VkIFNlcnZpY2VzKVxNYW5hZ2VkIFNlcnZpY2VzIFRlYW0gRm9sZGVyXFBhdGNoaW5nRW1haWxzXE1hcmtldGluZ01hbmFnZXJTZWFyY2guY3N2JyB8IFNlbGVjdC1PYmplY3QgLVByb3BlcnR5IEVtYWlsIHwgJSBlbWFpbAogICAgICAgICAgICAkU3ViamVjdCA9ICJSZW1pbmRlcjogSW50ZWdyYXRlZCBJVCBTb2x1dGlvbnMgaXMgcGF0Y2hpbmcgc2VydmVycyBvbiAkKCRwYXRjaHR1ZXNkYXkgfCBnZXQtZGF0ZSAtZm9ybWF0IEQpLiIKICAgICAgICAgICAgJEJvZHkgPSAiSGksCgokUGhyYXNlICQoJHBhdGNodHVlc2RheSB8IGdldC1kYXRlIC1mb3JtYXQgRCksIGlzIHRoZSBmb3VydGggVHVlc2RheSBvZiB0aGUgbW9udGgsIHNvIGluIGFjY29yZGFuY2Ugd2l0aCBvdXIgcGF0Y2hpbmcgc2NoZWR1bGUsIHdlIHdpbGwgYmUgcGF0Y2hpbmcgeW91ciBzZXJ2ZXJzLiBSZWJvb3RzIHdpbGwgaGFwcGVuIGFmdGVyIGhvdXJzIHN0YXJ0aW5nIGF0IDlwbS4gUGxlYXNlIHJlc3BvbmQgYmFjayB0byB0aGlzIGVtYWlsIGlmIHRoZXJlIGFyZSBjb25mbGljdHMgd2l0aCBwYXRjaGluZyB5b3VyIHNlcnZlcihzKSAkUGhyYXNlLCAkKCRwYXRjaHR1ZXNkYXkgfCBnZXQtZGF0ZSAtZm9ybWF0IEQpIQoKQW55IE1hY2hpbmVzIHdoaWNoIGhhdmUgYmVlbiBwcmV2aW91c2x5IGRpc2N1c3NlZCBhcyBiZWluZyBleGNsdWRlZCBmcm9tIHBhdGNoaW5nIHdpbGwgY29udGludWUgdG8gYmUgZXhjbHVkZWQgdW50aWwgeW91IHRlbGwgdXMgb3RoZXJ3aXNlLiBBcyBhIHJlbWluZGVyLCB3b3Jrc3RhdGF0aW9ucyBhcmUgcGF0Y2hlZCBhY2NvcmRpbmcgdG8geW91ciBhZ3JlZWQgdXBvbiBzY2hlZHVsZSBhcyBkZXRhaWxlZCBpbiB5b3VyIE1hbmFnZWQgU2VydmljZXMgYWdyZWVtZW50LgoKUGxlYXNlIGNvbnRhY3QgeW91ciBhY2NvdW50IG1hbmFnZXIgaWYgeW91IHdvdWxkIGxpa2UgdG8gcmV2aWV3IG9yIGNoYW5nZSBhbnkgb2YgeW91ciBwYXRjaGluZyBzY2hlZHVsZXMuICBUaGFuayB5b3UgZm9yIHlvdXIgY29udGludWVkIHN1cHBvcnQgb2Ygb3VyIE1hbmFnZWQgU2VydmljZXMgUHJvZ3JhbSEKCk1hbmFnZWQgU2VydmljZXMgVGVhbQpJbnRlZ3JhdGVkIElUIFNvbHV0aW9ucwo3ODEtNzQyLTIyMDAgT3B0aW9uIDIKSVRIZWxwQGludGdyYXRlZGl0LmNvbSIKCiAgICAgICAgICAgIFNlbmQtTWFpbE1lc3NhZ2UgLVNtdHBTZXJ2ZXIgMTAuMTIuMC44NSAtZnJvbSBNYW5hZ2VkLlNlcnZpY2VzQGludGVncmF0ZWRpdC5jb20gLXRvIE1hbmFnZWQuU2VydmljZXNAaW50ZWdyYXRlZGl0LmNvbSAtQmNjICRlbWFpbHMgLVN1YmplY3QgJFN1YmplY3QgLUJvZHkgJEJvZHkgLUNyZWRlbnRpYWwgJENyZWRlbnRpYWxzCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFNlbnQgZW1haWwgdG86ICRlbWFpbHMuIgogICAgICAgIH0KICAgICAgICBlbHNlaWYoKFRlc3QtUGF0aCAtUGF0aCAnQzpcRHJvcGJveCAoTWFuYWdlZCBTZXJ2aWNlcylcTWFuYWdlZCBTZXJ2aWNlcyBUZWFtIEZvbGRlclxQYXRjaGluZ0VtYWlsc1xNYXJrZXRpbmdNYW5hZ2VyU2VhcmNoLmNzdicpIC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDb3VsZG4ndCBGaW5kIENTViBmaWxlLiIKICAgICAgICAgICAgJE1hbmFnZV9FcnJvcl9TdWJqZWN0ID0gIlNvbWV0aGluZyB3ZW50IHdyb25nIHNlbmRpbmcgcGF0Y2hpbmcgZW1haWwgdG8gYWxsIGNsaWVudHMhISEiCiAgICAgICAgICAgICRNYW5hZ2VfRXJyb3JfQm9keSA9ICJUaGUgQ1NWIGZpbGUgd2Fzbid0IGZvdW5kISAgVGhpcyBDU1YgZmlsZSBzaG91bGQgYmUgb24gdGhlIGRyb3Bib3ggZm9sZGVyIGluIHRoZSBNYW5hZ2VkIFNlcnZpY2VzIFRlYW0gRm9sZGVyXFBhdGNoaW5nRW1haWxzLiAgVGhpcyBpcyBhdXRvIHN5bmNoZWQgdG8ga3V0aWwgYXQgbG9jYXRpb24gJ0M6XERyb3Bib3ggKE1hbmFnZWQgU2VydmljZXMpXE1hbmFnZWQgU2VydmljZXMgVGVhbSBGb2xkZXJcUGF0Y2hpbmdFbWFpbHNcTWFya2V0aW5nTWFuYWdlclNlYXJjaC5jc3YnISAgUGxlYXNlIGNoZWNrIG91dCBmaWxlIGltbWVkaWF0ZWx5IQpUaGFua3MsCgpEYXJyZW4iCiAgICAgICAgICAgIFNlbmQtTWFpbE1lc3NhZ2UgLVNtdHBTZXJ2ZXIgMTAuMTIuMC44NSAtZnJvbSBNYW5hZ2VkLlNlcnZpY2VzQGludGVncmF0ZWRpdC5jb20gLXRvIE1hbmFnZWQuU2VydmljZXNAaW50ZWdyYXRlZGl0LmNvbSAtU3ViamVjdCAkTWFuYWdlX0Vycm9yX1N1YmplY3QgLUJvZHkgJE1hbmFnZV9FcnJvcl9Cb2R5IC1DcmVkZW50aWFsICRDcmVkZW50aWFscwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBOb3QgU2VuZGluZyBlbWFpbCBzaW5jZSBpdCdzIG5vdCB0aGUgcmlnaHQgZGF5LiIKCiAgICAgICAgfQogICAgICAgIGlmKCRlbWFpbF9lbmcgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2VuZGluZyBlbWFpbHMgdG8gZW5naW5lZXJzLiIKICAgICAgICAgICAgJFN1YmplY3RfZW5nID0gIklNUE9SVEFOVCEhISEgIElJVFMgQ0xJRU5UIFBBVENISU5HIElTIEhBUFBFTklORyBUT05JR0hUISEhIgogICAgICAgICAgICAkQm9keV9lbmcgPSAiSGkgRXZlcnlvbmUsCiRQaHJhc2UgJCgkcGF0Y2hUdWVzZGF5IHwgZ2V0LWRhdGUgLWZvcm1hdCBEKSBpcyB0aGUgSUlUUyBjbGllbnQgcGF0Y2hpbmcgZGF5LiAgVGhlIHZhc3QgbWFqb3JpdHkgb2Ygc2VydmVycyB3aWxsIGJlIHBhdGNoZWQgdG9uaWdodCBzdGFydGluZyBhdCA5cG0uICBSZWJvb3RzIHdpbGwgaGFwcGVuIGFmdGVyIHBhdGNoaW5nLiAgUGxlYXNlIGNoZWNrIEthc2V5YSdzIFBhdGNoIE1hbmFnZW1lbnQgbW9kdWxlIGlmIHlvdSBoYXZlIGFueSBxdWVzdGlvbnMgcGVydGFpbmluZyB0byBhIHNwZWNpZmljIGNsaWVudC4KICAgICAgICAgICAgClRoYW5rcywKICAgICAgICAgICAgCk1hbmFnZWQgU2VydmljZXMgVGVhbSIKICAgICAgICAgICAgU2VuZC1NYWlsTWVzc2FnZSAtU210cFNlcnZlciAxMC4xMi4wLjg1IC1mcm9tIE1hbmFnZWQuU2VydmljZXNAaW50ZWdyYXRlZGl0LmNvbSAtdG8gRW5naW5lZXJzQGludGVncmF0ZWRpdC5jb20gLVN1YmplY3QgJFN1YmplY3RfZW5nIC1Cb2R5ICRCb2R5X2VuZyAtQ3JlZGVudGlhbCAkQ3JlZGVudGlhbHMKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2VudCBlbWFpbCB0byBlbmdpbmVlcnMuIgogICAgICAgIH0KICAgIH0KICAgIEVuZAogICAgewogICAgICAgIGlmKCRFcnJvckxvZykKICAgICAgICB7CiAgICAgICAgICAgICRMb2dQYXRoID0gIiRlbnY6d2luZGlyXFRlbXBccGF0Y2hlbWFpbF9JSVRTLnR4dCIKICAgICAgICAgICAgZm9yZWFjaCgkYm9vYm9vIGluICRib29ib29zKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJGJvb2JvbyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzIC0gc2NyaXB0IHRvIGNyZWF0ZSB0YXNrIHRocm91Z2ggcG93ZXJzaGVsbC4gVGhpcyBpcyBhIHNwZWNpZmljIHRhc2sgZm9yIFVTUEcuIFRoZSBzY3JpcHQgaXMgcHV0IGhlcmUgYXMgaXQgY291bGQgbm90IGJlIHB1c2hlZCB0aHJvdWdoIEFnZW50IHByb2NlZHVyZQouRGVzY3JpcHRpb24gLSBUaGUgc2NyaXB0IHJlZ2lzdGVycyBhIHRhc2sgYnkgdGhlIG5hbWUgcmVib290cG9wdXAgd2l0aCB0aGUgcHMxIGZpbGUgYW5kIHRoZSB0cmlnZ2VycyBhbmQgb3B0aW9ucwouZXhhbXBsZSAtIFJlZ2lzdGVyLVNjaGVkdWxlZEpvYiAKIz4KCmZ1bmN0aW9uIENyZWF0ZS1VU1BHdGFza3JlYm9vdHBvcHVwIHsKICAgICRkYXRlID0gR2V0LWRhdGUKICAgICR0cmlnZ2VyID0gTmV3LUpvYlRyaWdnZXIgLU9uY2UgLUF0ICRkYXRlIC1SZXBldGl0aW9uSW50ZXJ2YWwgKE5ldy1UaW1lU3BhbiAtaG91cnMgMSkgLVJlcGVhdEluZGVmaW5pdGVseQogICAgJG9wdGlvbiA9IE5ldy1TY2hlZHVsZWRKb2JPcHRpb24gLUNvbnRpbnVlSWZHb2luZ09uQmF0dGVyeSAtU3RhcnRJZk9uQmF0dGVyeQogICAgUmVnaXN0ZXItU2NoZWR1bGVkSm9iIC1uYW1lIHJlYm9vdHBvcHVwIC1GaWxlUGF0aCBDOlxJSVRTX01nbXRcVGVtcFxwYXRjaHJlYm9vdFxyZWJvb3RzY3JpcHQxLnBzMSAtVHJpZ2dlciAkdHJpZ2dlciAtU2NoZWR1bGVkSm9iT3B0aW9uICRvcHRpb24KfQoKPCMKLlN5bm9wc2lzIC0gVGhlIGZ1bmN0aW9uIGNyZWF0ZXMgYSBBY2NvdW50IGJ5IHRoZSBuYW1lIG9mICJpaXRzdGFzayIgdGhhdCB3aWxsIGNyZWF0ZSBhIExvY2FsIEFkbWluaXN0cmF0b3IgQWNjb3VudCBvbiB0aGUgbWFjaGluZSBhbmQgc2V0IGEgcmFuZG9tIHBhc3N3b3JkIG9mIDEwIGNoYXJhY3RlcnMKLkRlc2NyaXB0aW9uIC0gVGhlIGZ1bmN0aW9uIHVzZXMgdGhlIG5ldCB1c2VyIGNvbW1hbmQgdG8gZ2VuZXJhdGUgYW4gYWNjb3VudCBhbmQgYXNzaWduIGEgcGFzc3dvcmQgYW5kIGl0IHRoZW4gb3V0cHV0cyB0aGUgcGFzc3dvcmQgYXMgYSBzZWN1cmUgc3RyaW5nIHVuZGVyIElJVFNfU2NyaXB0cyBmb2xkZXIKVGhlIHNjcmlwdCB3aWxsIG91dHB1dCBhIGxvZyBmaWxlIHVuZGVyIEM6XFdpbmRvd3NcVGVtcFxjcmVhdGVMb2NhbEFkbWluTG9ncy50eHQgd2hpY2ggd2lsbCB0ZWxsIHVzIGlmIHRoZSBpaXRzdGFzayBhY2NvdW50IHdhcyBjcmVhdGVkLCB3aGF0IHBhc3N3b3JkIHdhcyBhc3NpZ25lZCBldGMuCi5leGFtcGxlIC0gQ3JlYXRlLUxvY2FsQWRtaW5pc3RyYXRvcgouZXhhbXBsZSAtICRjcmVkZW50aWFscyA9IENyZWF0ZS1Mb2NhbEFkbWluaXN0cmF0b3IgdGhlbiAkY3JlZGVudGlhbHMudXNlcm5hbWUgd2lsbCBiZSB0aGUgaWl0c3Rhc2sgVXNlcm5hbWUuIFRvIGdldCB0aGUgcGFzc3dvcmQgZm9yIHRoaXMgdXNlcm5hbWUgY3JlYXRlIGFub3RoZXIgdmFyaWFibGUgdGhhdCAKd2lsbCBydW4gYW5vdGhlciBmdW5jdGlvbiBnZXQtaWl0c3Rhc2twc3dkIGFuZCBmb3J3YXJkIGl0IGluIGEgdmFyaWFibGUgbGlrZSAkcGFzc3dvcmQgPSBnZXQtaWl0c3Rhc2twc3dkLiBUaGUgJHBhc3N3b3JkIHdpbGwgYmUgdGhlIHBsYWluIHRleHQgcGFzc3dvcmQgZm9yIGlpdHN0YXNrIGFjY291bnQuCiM+CgpmdW5jdGlvbiBDcmVhdGUtTG9jYWxBZG1pbmlzdHJhdG9yIHsKICAgICAgICAgICAgICAgICAgICAkYWNjb3VudGNoayA9IG5ldCBsb2NhbGdyb3VwIGFkbWluaXN0cmF0b3JzCiAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBMaXN0IG9mIGxvY2FsIGFjY291bnRzIGlzICQoJGFjY291bnRjaGspLiIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICA8IyBUZXN0IGlmIHRoZSBpaXRzdGFzayBBY2NvdW50IGFscmVhZHkgZXhpc3QgIz4KICAgICAgICAgICAgICAgICAgICBpZiAoJGFjY291bnRjaGsgLWNjb250YWlucyAnaWl0c3Rhc2snKSAKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGlpdHN0YXNrIEFjY291bnQgRXhpc3RzLiIKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFRlc3QtUGF0aCBDOlxJSVRTX1NjcmlwdHNcZVRza1Bzd2QudHh0KSAKICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIiQoR2V0LURhdGUpIC0gZmlsZSBlVHNrUHN3ZC50eHQgZXhpc3RzLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcGFzc3dvcmQgPSBHZXQtQ29udGVudCBDOlxJSVRTX1NjcmlwdHNcZVRza1Bzd2QudHh0IHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtQXNQbGFpblRleHQgLUZvcmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGlpdHN0YXNrIEFjY291bnQgYW5kIHRoZSBlbmNyeXB0ZWQgcGFzc3dvcmQgZmlsZSBFeGlzdHMuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNyZWRlbnRpYWxzID0gbmV3LW9iamVjdCAtdHlwZW5hbWUgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgLWFyZ3VtZW50bGlzdCAiaWl0c3Rhc2siLCRlcGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIiQoR2V0LURhdGUpIC0gU2luY2UgdGhlIGFjY291bnQgYW5kIHRoZSBwYXNzd29yZCBleGlzdCwgY3JlZHMgYXJlIHBhc3NlZCB0byB0aGUgY3JlZGVudGlhbCB2YXJpYWJsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgfCBPdXQtRmlsZSAtQXBwZW5kIEM6XFdpbmRvd3NcVGVtcFxjcmVhdGVMb2NhbEFkbWluTG9ncy50eHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGZpbGUgZVRza1Bzd2QudHh0IERPRVMgTk9UIGV4aXN0cy4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8IyBuZWVkIHRvIGNyZWF0ZSBhIG5ldyBwYXNzd29yZCBhbmQgYXNzaWduIHRvIHVzZXIgaWl0c3Rhc2sgIz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXNzd29yZCA9IC1qb2luICgoNjUuLjkwKSArICg5Ny4uMTIyKSArICg0OC4uNTcpICsgKDQwLi40NikgfCBHZXQtUmFuZG9tIC1Db3VudCAxMCB8ICV7W2NoYXJdJF99KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBQYXNzd29yZCBjcmVhdGVkIGJlY2F1c2UgdGhlIGVUc2tQc3dkIGZpbGUgZGlkIG5vdCBleGlzdC4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXQgdXNlciBpaXRzdGFzayAkcGFzc3dvcmQgPCMgd2hlcmUgcGFzc3dvcmQgaXMgdGhlIG5ldyBwYXNzd29yZCAgIz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGlpdHN0YXNrIHVzZXIgaXMgYXNzaWduZWQgdGhlIG5ldyBwYXNzd29yZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXNzd29yZCB8IENvbnZlcnRUby1TZWN1cmVTdHJpbmcgLUFzUGxhaW5UZXh0IC1Gb3JjZSB8IENvbnZlcnRGcm9tLVNlY3VyZVN0cmluZyB8IE91dC1GaWxlICJDOlxJSVRTX1NjcmlwdHNcZVRza1Bzd2QudHh0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBzaW5jZSBwYXNzd29yZCBmaWxlIGRpZCBub3QgZXhpc3QgbmV3IGZpbGUgY3JlYXRlZCBhbmQgcGFzc3N3b3JkIGlzIGVuY3J5cHRlZCBhbmQgc2VudCB0byB0eHQgZmlsZSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcGFzc3dvcmQgPSBHZXQtQ29udGVudCBDOlxJSVRTX1NjcmlwdHNcZVRza1Bzd2QudHh0IHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtQXNQbGFpblRleHQgLUZvcmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBwYXNzd29yZCB0YWtlbiBmcm9tIHRoZSB0ZXh0IGZpbGUgZVRza1Bzd2QgYW5kIGRlY3J5cHRlZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjcmVkZW50aWFscyA9IG5ldy1vYmplY3QgLXR5cGVuYW1lIFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNDcmVkZW50aWFsIC1hcmd1bWVudGxpc3QgImlpdHN0YXNrIiwkZXBhc3N3b3JkIC1FcnJvclZhcmlhYmxlIGNhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBjcmVkZW50aWFscyBvYmplY3QgY3JlYXRlZCB3aXRoIHVzZXJuYW1lIGFuZCB0aGUgZW5jcnlwdGVkIHBhc3N3b3JkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgfCBPdXQtRmlsZSAtQXBwZW5kIE91dC1GaWxlIEM6XFdpbmRvd3NcVGVtcFxjcmVhdGVMb2NhbEFkbWluTG9ncy50eHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIkFjY291bnQgZG9lc24ndCBleGlzdCBleGVjdXRpbmcgZWxzZSBzdGF0ZW1lbnQuIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIklmIHRoZSBlVHNrUHN3ZCBmaWxlIGV4aXN0ZWQsIGl0IHdhcyByZW1vdmVkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gQzpcSUlUU19TY3JpcHRzXGVUc2tQc3dkLnR4dCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBpaXRzdGFzayBBY2NvdW50IGRvZXMgbm90IGV4aXN0LCBjcmVhdGluZyBhIHJhbmRvbSBwYXNzd29yZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYXNzd29yZCA9IC1qb2luICgoNjUuLjkwKSArICg5Ny4uMTIyKSArICg0OC4uNTcpICsgKDQwLi40NikgfCBHZXQtUmFuZG9tIC1Db3VudCAxMCB8ICV7W2NoYXJdJF99KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSAkcGFzc3dvcmQtIHJhbmRvbSBwYXNzd29yZCBjcmVhdGVkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV0IHVzZXIgL2FkZCBpaXRzdGFzayAiJHBhc3N3b3JkIiAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIiQoR2V0LURhdGUpIC0gaWl0c3Rhc2sgdXNlciBpcyBjcmVhdGVkLCBwYXNzd29yZCBhc3NpZ25lZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldCBsb2NhbGdyb3VwIGFkbWluaXN0cmF0b3JzIGlpdHN0YXNrIC9hZGQgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGlpdHN0YXNrIEFjY291bnQgYWRkZWQgdG8gbG9jYWxncm91cCBhZG1pbmlzdHJhdG9ycy4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFzc3dvcmQgfCBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nIC1Bc1BsYWluVGV4dCAtRm9yY2UgfCBDb252ZXJ0RnJvbS1TZWN1cmVTdHJpbmcgfCBPdXQtRmlsZSAiQzpcSUlUU19TY3JpcHRzXGVUc2tQc3dkLnR4dCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgKz0gIiQoR2V0LURhdGUpIC0gaWl0c3Rhc2sgQWNjb3VudCBwYXNzd29yZCBlbmNyeXB0ZWQgYW5kIGZvcndhcmRlZCB0byBldHNrcHN3ZCBmaWxlLiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcGFzc3dvcmQgPSBHZXQtQ29udGVudCBDOlxJSVRTX1NjcmlwdHNcZVRza1Bzd2QudHh0IHwgQ29udmVydFRvLVNlY3VyZVN0cmluZyAtQXNQbGFpblRleHQgLUZvcmNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkKEdldC1EYXRlKSAtIGlpdHN0YXNrIEFjY291bnQgcGFzc3dvcmQgY29udmVydGVkIGJhY2sgdG8gc2VjdXJlIHN0cmluZy4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3JlZGVudGlhbHMgPSBuZXctb2JqZWN0IC10eXBlbmFtZSBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAtYXJndW1lbnRsaXN0ICJpaXRzdGFzayIsJGVwYXNzd29yZCAtRXJyb3JWYXJpYWJsZSBjYQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCArPSAiJChHZXQtRGF0ZSkgLSBpaXRzdGFzayBBY2NvdW50IGFuZCBwYXNzd29yZCBmb3J3YXJkZWQgdG8gdGhlIGNyZWRlbnRpYWxzIHZhcmlhYmxlICRjcmVkZW50aWFscyIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgfCBPdXQtRmlsZSBDOlxXaW5kb3dzXFRlbXBcY3JlYXRlTG9jYWxBZG1pbkxvZ3MudHh0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgcmV0dXJuICRjcmVkZW50aWFscwogICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgIAoKPCMKLlN5bm9wc2lzIC0gVGhlIGZ1bmN0aW9uIHdpbGwgZ2V0IHRoZSB1bmVuY3J5cHRlZCBwbGFpbiB0ZXh0IHBhc3N3b3JkIGZvciB0aGUgaWl0c3Rhc2sgYWNjb3VudAouRGVzY3JpcHRpb24gLSBUaGUgZnVuY3Rpb24gZ2V0cyB0aGUgZW5jcnlwdGVkIHBhc3N3b3JkIG9mIHRoZSBpaXRzdGFzayBhY2NvdW50IGZyb20gdGhlIHRleHQgZmlsZSBlVHNrUHN3ZC50eHQgdGhhdCBleGl4dCBhdCB0aGUgSUlUU19TY3JpcHQgZm9sZGVyLCBkZWNyeXB0cyBpdCBhbmQgcmV0dXJucyBhbiB1bmVuY3J5cHRlZCBwbGFpbiB0ZXh0IHBhc3N3b3JkCi5leGFtcGxlIDogVG8gZ2V0IHRoaXMgcGFzc3dvcmQgaW4gYW55IHNjcmlwdCBmb3J3YXJkIHRoZSBmdW5jdGlvbiB0byBhIHZhcmlhYmxlIGV4YW1wbGUgJGEgPSBnZXQtaWl0c3Rhc2twc3dkLCB0aGVuICRhIHdpbGwgYmUgdGhlIHBsYWluIHRleHQgcGFzc3dvcmQgZm9yIGlpdHN0YXNrIGFjY291bnQKIz4KZnVuY3Rpb24gZ2V0LWlpdHN0YXNrcHN3ZCB7CiAgICAgICAgJGVwc3dkID0gR2V0LUNvbnRlbnQgQzpcSUlUU19TY3JpcHRzXGVUc2tQc3dkLnR4dCAKICAgICAgICAkc2VjcHN3ZCA9IENvbnZlcnRUby1TZWN1cmVTdHJpbmcgJGVwc3dkIAogICAgICAgICRic3RyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2VjdXJlU3RyaW5nVG9CU1RSKCRzZWNwc3dkKQogICAgICAgICR1bnNlY3Bzd2QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0F1dG8oJGJzdHIpCiAgICAgICAgJG91dHB1dCA9ICIkdW5zZWNwc3dkIGlzIHRoZSBwYXNzd29yZCBmb3IgdGhlIGFjY291bnQiCiAgICAgICAgcmV0dXJuICR1bnNlY3Bzd2QKfQoKPCMKLlN5bm9wc2lzIC0gVGhlIGZ1bmN0aW9uIGNvbGxlY3RzIHRoZSBTeXN0ZW0gYW5kIEFwcGxpY2F0aW9uIEVycm9yIGxvZ3MgZm9yIHRoZSBsYXN0IG9uZSBtb250aC4gSWYgdGhlIGVycm9yIGhhcyBvY2N1cmVkIG1vcmUgdGhhbiAxMCB0aW1lcywgaXQgc2VuZHMgYW4gZS1tYWlsIHRvIG1zLWFsYXJtCi5EZXNjcmlwdGlvbiAtIFRoZSBmdW5jdGlvbiBnZXRzIHRoZSBzeXN0ZW0gYW5kIGFwcGxpY2F0aW9uIEVycm9yIGxvZ3MgdGhhdCBoYXZlIGhhcHBlbmVkIGluIHRoZSBsYXN0IG9uZSBtb250aCwgSXQgdGhlbiBmaW5kcyB3aGljaCBlcnJvcnMgb2NjdXJlZCBtb3JlIHRoYW4gMTAgdGltZXMuIEZvciB0aGUgc291cmNlIG9mIHRoYXQgZXZlbnQKaXQgdGhlbiBjb2xsZWN0cyB0aGUgbmV3ZXN0IDEwIGxvZ3MgYW5kIHNlbmRzIGFuIGUtbWFpbCB0byBNUyBhbGFybQouZXhhbXBsZSA6IEdldC1FdmVudExvZ3MKIz4KIGZ1bmN0aW9uIEdldC1FcnJvckV2ZW50TG9ncyB7CiAgICA8IyBDYWxjdWxhdGVzIHRoZSBkYXRlIHRoYXQgd2FzIGEgbW9udGggYmVmb3JlIGZyb20gdG9kYXkgIz4KICAgICRtb250aGFnbyA9IChHZXQtZGF0ZSkuQWRkRGF5cygtMzApCiAgICA8IyBNYWNoaW5lIG5hbWUgb24gd2hpY2ggdGhlIGZ1bmN0aW9uIGlzIHJ1bm5pbmcgIz4KICAgICRtYWNoaW5lID0gR2V0LUthc2V5YU1hY2hpbmVJRAogICAgPCMgQ3JlYXRlIGFuIGFycmF5IG9mIG9ubHkgMiBvYmplY3RzICM+CiAgICAkZXZlbnRzID0gIlN5c3RlbSIsIkFwcGxpY2F0aW9uIgogICAgPCMgJGUgYmVsb3cgaXMgZWFjaCBlbGVtZW50IG9mIHRoZSBhcnJheSAjPgogICAgZm9yZWFjaCAoJGUgaW4gJGV2ZW50cykgewogICAgICAgIDwjIGdldHMgdGhlIGVycm9yIGxvZ3Mgb2YgJGUgYmUgaXQgU3lzdGVtIG9yIEFwcGxpY2F0aW9uIGFmdGVyIGEgbW9udGggYW5kIG9mIHR5cGUgRXJyb3IgIz4KICAgICAgICAkZXJyb3Jsb2dzID0gR2V0LUV2ZW50TG9nIC1Mb2dOYW1lICRlIC1BZnRlciAkbW9udGhhZ28gLUVudHJ5VHlwZSBFcnJvciB8IFdoZXJlLU9iamVjdCB7JF8uU291cmNlIC1ub3RsaWtlICdEQ09NJ30KICAgICAgICA8IyBBbGwgdGhlIGxvZ3Mgb2YgdHlwZSAkZSBhcmUgY29sbGVjdGVkIGFuZCBncm91cGVkIHRvZ2V0aGVyIHRvIGdldCB0aGUgbmFtZSBhbmQgY291bnQgb2YgZWFjaCAjPgogICAgICAgICRjb3VudGVycm9ycyA9ICRlcnJvcmxvZ3MgfCBHcm91cC1PYmplY3QgLVByb3BlcnR5IFNvdXJjZSAtTm9FbGVtZW50IHwgU2VsZWN0LU9iamVjdCBDb3VudCxOYW1lCiAgICAgICAgICAgIDwjIGFnYWluIGZvcmVhY2ggaXMgdXNlZCB0byBpdGVyYXRlIHRocm91Z2ggdGhlIGFib3ZlIGNvbGxlY3RlZCBpbmZvcm1hdGlvbiAkYyBpcyBlYWNoIHJvdyB3aXRoIHRoZSBjb3VudCBhbmQgdGhlIG5hbWUgb2YgdGhlIGV2ZW50IGxvZyAjPgogICAgICAgICAgICBmb3JlYWNoICgkYyBpbiAkY291bnRlcnJvcnMpIHsKICAgICAgICAgICAgICAgIDwjIGlmIHRoZSBjb3VudCBpcyBtb3JlIHRoYW4gMTAsICRlIGlzIGVpdGhlciBzeXN0ZW0gb3IgYXBwbGljYXRpb24gYW5kICRjIGlzIHRoZSBzb3VyY2Ugb2YgdGhlIGV2ZW50ICM+CiAgICAgICAgICAgICAgICBpZiAoJGMuY291bnQgLWd0IDEwKSB7CiAgICAgICAgICAgICAgICAkc291cmNlID0gJGMubmFtZQogICAgICAgICAgICAgICAgJGNvdW50ID0gJGMuY291bnQKICAgICAgICAgICAgICAgICRsb2dzICs9ICJFcnJvciBldmVudCB3aXRoICRzb3VyY2UgaW4gJGUgRXZlbnQgbG9ncyBvY2N1cmVkICRjb3VudCB0aW1lcyBpbiB0aGUgbGFzdCAxIG1vbnRoLiBCZWxvdyBpcyBvbmUgc3VjaCBsb2cgKHRoZSBuZXdlc3QpIgogICAgICAgICAgICAgICAgJGxvZ3MgKz0gR2V0LUV2ZW50TG9nIC1Mb2dOYW1lICRlIC1FbnRyeVR5cGUgRXJyb3IgLVNvdXJjZSAkc291cmNlIC1OZXdlc3QgMSB8IGZsIHwgT3V0LVN0cmluZwogICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmICgkbG9ncykgewogICAgICAgICAgICAgICAgICAgIDwjIGUtbWFpbCBNU0FsYXJtIz4KICAgICAgICAgICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Cb2R5ICJPbiAkbWFjaGluZSB0aGUgZm9sbG93aW5nIFN5c3RlbSBhbmQgQXBwbGljYXRpb24gRXJyb3IgbG9ncyBoYXZlIG9jY3VyZWQgbW9yZSB0aGFuIDEwIHRpbWVzIGluIHRoZSBsYXN0IDEgbW9udGguIEJlbG93IGFyZSB0aGUgbnVtYmVycyBhbmQgdGhlIGxvZ3MuICRsb2dzIiAtc3ViamVjdCAiT24gJG1hY2hpbmUgRXJyb3IgRXZlbnQgbG9ncyBzaW5jZSAkbW9udGhhZ28iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgIAogIH0KCjwjCi5ERVNDUklQVElPTgoJRnVuY3Rpb24gdG8gTG9jayBhIHVzZXIncyBjb21wdXRlciByZW1vdGVseQouU1lOT1BTSVMKCUZ1bmN0aW9uIHRvIExvY2sgYSBjb21wdXRlci4uLmlmIGFscmVhZHkgbG9ja2VkIHRoaXMgd2lsbCBkbyBub3RoaW5nCiM+CkZ1bmN0aW9uIExvY2stVXNlci1Db21wdXRlcgp7CgoJCiRzaWduYXR1cmUgPSBAIgpbRGxsSW1wb3J0KCJ1c2VyMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSldCnB1YmxpYyBzdGF0aWMgZXh0ZXJuIGJvb2wgTG9ja1dvcmtTdGF0aW9uKCk7CiJACgokTG9ja0NvbXB1dGVyID0gQWRkLVR5cGUgLW1lbWJlckRlZmluaXRpb24gJHNpZ25hdHVyZSAtbmFtZSAiV2luMzJMb2NrV29ya1N0YXRpb24iIC1uYW1lc3BhY2UgV2luMzJGdW5jdGlvbnMgLXBhc3N0aHJ1CiRMb2NrQ29tcHV0ZXI6OkxvY2tXb3JrU3RhdGlvbigpIHwgT3V0LU51bGwKfQoKPCMKLlN5bm9wc2lzCiAgIFRoaXMgZnVuY3Rpb24gd2lsbCBnYXRoZXIgYSBsaXN0IG9mIC5leGVzIG9uIHRoZSBtYWNoaW5lIGFuZCB0aGVuIHJlcG9ydCBpZiBzb21ldGhpbmcgaXMgYWRkZWQgb3IgcmVtb3ZlZC4gCi5ERVNDUklQVElPTgogICBUaGlzIGZ1bmN0aW9uIGNoZWNrcyBmb3IgcHJvZ3JhbXMgYWdhaW5zdCBhIGNzdiBmaWxlLgouRVhBTVBMRQogICBDb21wYXJlLUV4ZWN1dGFibGVzCiM+CmZ1bmN0aW9uIENvbXBhcmUtRXhlY3V0YWJsZXMKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFBhcmFtCiAgICAoCiAgICApCgogICAgQmVnaW4KICAgIHsKICAgICAgICAkRXJyb3JMb2cgPSAkZmFsc2UKICAgICAgICAkYm9vYm9vcyA9IEAoKQogICAgICAgICRBZGRlZF9Qcm9ncmFtID0gQCgpCiAgICAgICAgJFJlbW92ZWRfUHJvZ3JhbSA9IEAoKQogICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZpbmRpbmcgZHJpdmVzIG9uIHRoZSBtYWNoaW5lLiIKICAgICAgICAkdm9sdW1lcyA9ICQoR2V0LURyaXZlU3RhdGlzdGljcykuRHJpdmUKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGb3VuZCAkKCR2b2x1bWVzLmNvdW50KSB0byBjaGVjaywgJHZvbHVtZXMuIgogICAgICAgIGlmKCghKFRlc3QtUGF0aCAtUGF0aCBDOlxJSVRTX1NjcmlwdHNcUHJvZ3JhbXNcKSkgLWFuZCAoISh0ZXN0LXBhdGggLVBhdGggJGVudjp3aW5kaXJcVGVtcFxDb21wYXJlRXhlY3V0YWJsZXNfSUlUUy50eHQpKSkKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENyZWF0aW5nIGhpZGRlbiBkaXJlY3RvcnkgZm9yIENTViBmaWxlLiIKICAgICAgICAgICAgJChOZXctSXRlbSAtSXRlbVR5cGUgRGlyZWN0b3J5IEM6XElJVFNfU2NyaXB0c1xQcm9ncmFtcykuQXR0cmlidXRlcyA9ICJIaWRkZW4iCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENyZWF0ZWQgaGlkZGVuIGRpcmVjdG9yeSBmb3IgQ1NWIGZpbGUuIgogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBDcmVhdGluZyBoaWRkZW4gbG9nIGZpbGUuIgogICAgICAgICAgICAkKE5ldy1JdGVtIC1JdGVtVHlwZSBGaWxlICRlbnY6d2luZGlyXFRlbXBcQ29tcGFyZUV4ZWN1dGFibGVzX0lJVFMudHh0KS5BdHRyaWJ1dGVzID0gIkhpZGRlbiIKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ3JlYXRlZCBoaWRkZW4gbG9nIGZpbGUuIgogICAgICAgIH0KICAgICAgICBlbHNlaWYoIShHZXQtQ2hpbGRJdGVtIC1QYXRoIEM6XElJVFNfU2NyaXB0c1xQcm9ncmFtc1wgLUZpbHRlciAqLmNzdiAtRm9yY2UpIC1hbmQgKFRlc3QtUGF0aCAtUGF0aCAkZW52OndpbmRpclxUZW1wXENvbXBhcmVFeGVjdXRhYmxlc19JSVRTLnR4dCkpCiAgICAgICAgewogICAgICAgICAgICBJZihHZXQtQ29udGVudCAtUGF0aCAkZW52OndpbmRpclxUZW1wXENvbXBhcmVFeGVjdXRhYmxlc19JSVRTLnR4dCB8IFdoZXJlLU9iamVjdCB7KCRfIC1tYXRjaCAiIC0gQ3JlYXRlZCBDU1YgZmlsZS4iKX0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRUYW1wZXIgPSAkdHJ1ZQogICAgICAgICAgICAgICAgRW1haWwtTVNhbGFybSAtQm9keSAiU29tZW9uZSBoYXMgVGFtcGVyZWQgd2l0aCB0aGUga25vd24gbGlzdCBvZiBhcHBsaWNhdGlvbnMhICBJbnNwZWN0IHRoaXMgbWFjaGluZSBmb3IgYW55IG1hbGljaW91cyBiZWhhdmlvciBpbW1lZGlhdGVseSEiCiAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTZW50IGVtYWlsIHRoYXQgdGhlIElJVFNfU2NyaXB0c1xQcm9ncmFtcyBmb2xkZXIgb3IgY3N2IGZpbGVzIGhhcyBiZWVuIHRhbXBlcmVkIHdpdGggb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uLiIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRUYW1wZXIgPSAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIFByb2Nlc3MKICAgIHsKICAgICAgICBpZigkVGFtcGVyIC1uZSAkdHJ1ZSkKICAgICAgICB7IAogICAgICAgICAgICBmb3JlYWNoKCR2b2x1bWUgaW4gJHZvbHVtZXMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRuZXdfZXhlcyArPSBHZXQtQ2hpbGRJdGVtIC1QYXRoICR2b2x1bWUgLUZpbHRlciAqLmV4ZSAtUmVjdXJzZSAtRm9yY2UgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgfCBTZWxlY3QtT2JqZWN0IC1Qcm9wZXJ0eSBOYW1lLCBGdWxsTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKEdldC1DaGlsZEl0ZW0gLVBhdGggQzpcSUlUU19TY3JpcHRzXFByb2dyYW1zXCAtRmlsdGVyICouY3N2IC1Gb3JjZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJG9sZF9leGVzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCBDOlxJSVRTX1NjcmlwdHNcUHJvZ3JhbXMgLWZpbHRlciAqLmNzdiAtRm9yY2UgfCBTb3J0LU9iamVjdCAtUHJvcGVydHkgQ3JlYXRpb25UaW1lIC1EZXNjZW5kaW5nIHwgU2VsZWN0LU9iamVjdCAtUHJvcGVydHkgQ3JlYXRpb25UaW1lLCBGdWxsbmFtZSAtRmlyc3QgMQogICAgICAgICAgICAgICAgJG9sZF9leGVzID0gJG9sZF9leGVzLmZ1bGxuYW1lIHwgSW1wb3J0LUNzdgogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRmluZGluZyBkaWZmZXJlbmNlcy4iCiAgICAgICAgICAgICAgICAkZGlmZmVyZW5jZXMgPSBDb21wYXJlLU9iamVjdCAtUmVmZXJlbmNlT2JqZWN0ICRvbGRfZXhlcy5mdWxsbmFtZSAtRGlmZmVyZW5jZU9iamVjdCAkbmV3X2V4ZXMuZnVsbG5hbWUKICAgICAgICAgICAgICAgIElmKCRkaWZmZXJlbmNlcykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTcGlsdHRpbmcgZGlmZmVyZW5jZXMgaW50byBhZGRlZCBvciByZW1vdmVkIHByb2dyYW1zLiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBObyBkaWZmZXJlbmNlcyBmb3VuZC4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkUmVtb3ZlZF9Qcm9ncmFtID0gJGRpZmZlcmVuY2VzIHwgd2hlcmUtb2JqZWN0IHsoJF8uc2lkZWluZGljYXRvciAtbWF0Y2ggIjw9Iil9IHwgU2VsZWN0LU9iamVjdCAtUHJvcGVydHkgSW5wdXRPYmplY3QKICAgICAgICAgICAgICAgIGlmKCRSZW1vdmVkX1Byb2dyYW0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRm91bmQgcHJvZ3JhbXMgdGhhdCBkb24ndCBleGlzdCBpbiB0aGUgbmV3IGxpc3QuICQoJFJlbW92ZWRfUHJvZ3JhbS5mdWxsbmFtZSkiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkQWRkZWRfUHJvZ3JhbSA9ICRkaWZmZXJlbmNlcyB8IFdoZXJlLU9iamVjdCB7KCRfLnNpZGVpbmRpY2F0b3IgLW1hdGNoICI9PiIpfSB8IFNlbGVjdC1PYmplY3QgLVByb3BlcnR5IElucHV0T2JqZWN0CiAgICAgICAgICAgICAgICBpZigkQWRkZWRfUHJvZ3JhbSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGb3VuZCBwcm9ncmFtcyB0aGF0IGRvbid0IGV4aXN0IGluIHRoZSBvbGQgbGlzdC4gJCgkQWRkZWRfUHJvZ3JhbS5mdWxsbmFtZSkiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigkQWRkZWRfUHJvZ3JhbSAtYW5kICRSZW1vdmVkX1Byb2dyYW0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRW1haWxpbmcgdGhhdCBhIHByb2dyYW0gaGFzIGJlZW4gYWRkZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgbWFjaGluZS4iCiAgICAgICAgICAgICAgICAgICAgRW1haWwtTVNhbGFybSAtTG9nZ2luZyAtU3ViamVjdCAiWyQoR2V0LUthc2V5YU1hY2hpbmVJRCldIC0gQWRkZWQgYW5kIFJlbW92ZWQgLmV4ZSBmb3VuZCBvbiBtYWNoaW5lIiAtQm9keSAiQWRkZWQ6IAogICAgICAgICAgICAgICAgICAgICQoJEFkZGVkX1Byb2dyYW0uSW5wdXRPYmplY3QpCiAgICAgICAgICAgICAgICAgICAgUmVtb3ZlZDogCiAgICAgICAgICAgICAgICAgICAgJCgkUmVtb3ZlZF9Qcm9ncmFtLklucHV0T2JqZWN0KSIKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBFbWFpbCBoYXMgYmVlbiBzZW50LiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZigkQWRkZWRfUHJvZ3JhbSAtYW5kICEkUmVtb3ZlZF9Qcm9ncmFtKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEVtYWlsaW5nIHRoYXQgYSBwcm9ncmFtIGhhcyBiZWVuIGFkZGVkLiIKICAgICAgICAgICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Mb2dnaW5nIC1TdWJqZWN0ICJbJChHZXQtS2FzZXlhTWFjaGluZUlEKV0gLSBBZGRlZCAuZXhlIGZvdW5kIG9uIG1hY2hpbmUiIC1Cb2R5ICJBZGRlZDogCiAgICAgICAgICAgICAgICAgICAgJCgkQWRkZWRfUHJvZ3JhbS5JbnB1dE9iamVjdCkiCiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRW1haWwgaGFzIGJlZW4gc2VudC4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBFbHNlaWYoISRBZGRlZF9Qcm9ncmFtIC1hbmQgJFJlbW92ZWRfUHJvZ3JhbSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTZW5kaW5nIGVtYWlsIHRoYXQgcHJvZ3JhbSBoYXMgYmVlbiByZW1vdmVkLiIKICAgICAgICAgICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Mb2dnaW5nIC1TdWJqZWN0ICJbJChHZXQtS2FzZXlhTWFjaGluZUlEKV0gLSBSZW1vdmVkIC5leGUgZm91bmQgb24gbWFjaGluZSIgLUJvZHkgIlJlbW92ZWQ6IAogICAgICAgICAgICAgICAgICAgICQoJFJlbW92ZWRfUHJvZ3JhbS5JbnB1dE9iamVjdCkiCiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRW1haWwgaGFzIGJlZW4gc2VudC4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBFbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gTm8gbmV3IG9yIHJlbW92ZWQgcHJvZ3JhbXMuIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gTm8gQ1NWIGZpbGVzIGV4aXN0IGluIFByb2dyYW1zIGRpcmVjdG9yeS4gIEFzc3VtaW5nIHRoaXMgaXMgdGhlIGZpcnN0IHJ1biBvZiB0aGUgcHJvZ3JhbS4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ3JlYXRpbmcgQ1NWIGZpbGUuIgogICAgICAgICAgICAkbmV3X2V4ZXMgfCBFeHBvcnQtQ3N2IC1QYXRoICJDOlxJSVRTX1NjcmlwdHNcUHJvZ3JhbXNcJChHZXQtZGF0ZSAtRm9ybWF0IHl5eXlNZEhtcylfcHJvZ3JhbXMuY3N2IiAtRm9yY2UKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ3JlYXRlZCBDU1YgZmlsZS4iCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENTViBzYWZlIGZpbGUgaGFzIGJlZW4gdGFtcGVyZWQgd2l0aCBvciBkZWxldGVkLiIKICAgICAgICAgICAgRW1haWwtTVNhbGFybSAtU3ViamVjdCAiWyQoR2V0LUthc2V5YU1hY2hpbmVJRCldIC0gU29tZXRoaW5nIGhhcyBjYXVzZWQgdGhlIENTViBmaWxlcyB0byBiZSBkZWxldGVkISIgLUJvZHkgIlBsZWFzZSBsb29rIGludG8gdGhpcyBtYWNoaW5lIGFuZCBmaW5kIG91dCB3aHkgdGhlIGZvbGRlciBmb3IgQ1NWIGZpbGUgZG9lc24ndCBleGlzdC4iCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEVtYWlsIGhhcyBiZWVuIHNlbnQuIgogICAgICAgIH0KICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBGaW5kaW5nIDEwIGZpbGVzIHRvIGtlZXAuIgogICAgICAgICRrZWVwID0gR2V0LUNoaWxkSXRlbSAtUGF0aCBDOlxJSVRTX1NjcmlwdHNcUHJvZ3JhbXMgLUZpbHRlciAqLmNzdiAtRm9yY2UgfCBTb3J0LU9iamVjdCAtUHJvcGVydHkgQ3JlYXRpb25UaW1lIC1EZXNjZW5kaW5nIHwgU2VsZWN0LU9iamVjdCAtRmlyc3QgMTAKICAgICAgICBGb3JlYWNoKCRmaWxlIGluICRrZWVwKQogICAgICAgIHsKICAgICAgICAgICAgJGZpbGUuYXR0cmlidXRlcyA9ICJIaWRkZW4iLCJSZWFkT25seSIKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2V0dGluZyBmaWxlLCAkKCRmaWxlLmZ1bGxuYW1lKSwgdG8gSGlkZGVuIGFuZCBSZWFkIE9ubHkuIgogICAgICAgIH0KICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBQcm9jZXNzaW5nIGFsbCBmaWxlcyB0aGF0IGRvIG5vdCBtYXRjaCB0aGUgb25lcyB0byBrZWVwLiIKICAgICAgICAkcmVtb3ZlX2NzdiA9IENvbXBhcmUtT2JqZWN0IC1SZWZlcmVuY2VPYmplY3QgJChHZXQtQ2hpbGRJdGVtIC1QYXRoIEM6XElJVFNfU2NyaXB0c1xQcm9ncmFtcyAtRmlsdGVyICouY3N2IC1Gb3JjZSkuRnVsbE5hbWUgLURpZmZlcmVuY2VPYmplY3QgJGtlZXAuZnVsbG5hbWUgfCBXaGVyZS1PYmplY3QgeygkXy5zaWRlaW5kaWNhdG9yIC1tYXRjaCAiPD0iKX0gfCBTZWxlY3QtT2JqZWN0IC1Qcm9wZXJ0eSBJbnB1dE9iamVjdAogICAgICAgIGZvcmVhY2goJGNzdiBpbiAkcmVtb3ZlX2NzdikKICAgICAgICB7CiAgICAgICAgICAgIFJlbW92ZS1JdGVtICRjc3YuaW5wdXRvYmplY3QgLUZvcmNlCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFJlbW92ZWQgZmlsZSAkKCRjc3YuaW5wdXRvYmplY3QpLiIKICAgICAgICB9CiAgICB9CiAgICBFbmQKICAgIHsKICAgICAgICBpZighJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxDb21wYXJlRXhlY3V0YWJsZXNfSUlUUy50eHQiCiAgICAgICAgICAgIGZvcmVhY2goJGJvb2JvbyBpbiAkYm9vYm9vcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIiRib29ib28iIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCiA8IwogLlN5bm9wc2lzCiAgICBGdW5jdGlvbiB0byBmaW5kIHRoZSBhY3RpdmF0aW9uIHN0YXR1cyBvZiBhIG1hY2hpbmUuCiAuREVTQ1JJUFRJT04KICAgIFRoaXMgZnVuY3Rpb24gd2lsbCBmaW5kIGlmIHRoZSBhY3RpdmF0aW9uIHN0YXR1cyBvZiBhIG1hY2hpbmUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBsaWNlbnNlZC4gSXQgY2FuIGFsc28gYWNjZXB0IGFuIGFycmF5IG9mIGNvbXB1dGVyIG5hbWVzCiAuRVhBTVBMRQogICAgR2V0LUFjdGl2YXRpb25TdGF0dXMKIC5FeGFtcGxlCiAgICBHZXQtQURDb21wdXRlciAtZmlsdGVyICogfCBTZWxlY3Qtb2JlY3QgQHtOYW1lID0gJ0NvbXB1dGVyTmFtZXMnO2V4cCA9IHskXy5uYW1lfX0gfCBHZXQtQWN0aXZhdGlvblN0YXR1cwogIz4KIGZ1bmN0aW9uIEdldC1BY3RpdmF0aW9uU3RhdHVzCiB7CiAgICAgW0NtZGxldEJpbmRpbmcoKV0KICAgICBQYXJhbQogICAgICgKICAgICAgICAgIyBQYXJhbTEgaGVscCBkZXNjcmlwdGlvbgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSwKICAgICAgICAgICAgICAgICAgICBWYWx1ZUZyb21QaXBlbGluZSA9ICR0cnVlLAogICAgICAgICAgICAgICAgICAgIFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUsCiAgICAgICAgICAgICAgICAgICAgUG9zaXRpb249MCldCiAgICAgICAgW3N0cmluZ1tdXSRDb21wdXRlck5hbWVzLAoKICAgICAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXQogICAgICAgICRFcnJvckxvZyA9ICRmYWxzZQogICAgICkKIAogICAgIEJlZ2luCiAgICAgewogICAgICAgIFthcnJheV0kYm9vYm9vcyA9ICRudWxsCiAgICAgICAgaWYoISRDb21wdXRlck5hbWVzKQogICAgICAgIHsKICAgICAgICAgICAgJENvbXB1dGVyTmFtZXMgPSAkZW52OkNPTVBVVEVSTkFNRQogICAgICAgIH0KICAgICB9CiAgICAgUHJvY2VzcwogICAgIHsKICAgICAgICAkQWN0aXZhdGlvbklzc3VlcyA9IEAoKQogICAgICAgICRPdXRwdXRzID0gQCgpCiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gUHJvY2Vzc2luZyBmb3IgbGlzdCBvZiBjb21wdXRlcnMuIgogICAgICAgIGZvcmVhY2goJGNvbXB1dGVybmFtZSBpbiAkY29tcHV0ZXJuYW1lcykKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEdldHRpbmcgbGlzdCBvZiB3aW5kb3dzIHByb2R1Y3RzLiIKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICR3aW5kb3dzID0gR2V0LVdtaU9iamVjdCAtQ2xhc3MgU29mdHdhcmVMaWNlbnNpbmdQcm9kdWN0IC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSB8IFdoZXJlLU9iamVjdCB7KCRfLk5hbWUgLW1hdGNoICJXaW5kb3dzIikgLWFuZCAoJF8uUGFydGlhbFByb2R1Y3RLZXkgLW5vdGxpa2UgJycpfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFByb2JsZW0gY29ubmVjdGlvbiB0byBtYWNoaW5lICRjb21wdXRlcm5hbWUuIgogICAgICAgICAgICB9CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZvdW5kIFdpbmRvd3MgZW50cnkgaW4gV01JIENsYXNzOiAkKCR3aW5kb3dzLm5hbWUpIGZvciAkQ29tcHV0ZXJOYW1lLiIKICAgICAgICAgICAgc3dpdGNoICgkd2luZG93cy5MaWNlbnNlU3RhdHVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiMCJ7JFN0YXR1cyA9ICJVbmxpY2Vuc2VkIjsgYnJlYWt9IAogICAgICAgICAgICAgICAgIjEieyRTdGF0dXMgPSAiTGljZW5zZWQiOyBicmVha30gCiAgICAgICAgICAgICAgICAiMiJ7JFN0YXR1cyA9ICJPT0JHcmFjZSI7IGJyZWFrfSAKICAgICAgICAgICAgICAgICIzInskU3RhdHVzID0gIk9PVEdyYWNlIjsgYnJlYWt9IAogICAgICAgICAgICAgICAgIjQieyRTdGF0dXMgPSAiTm9uR2VudWluZSI7IGJyZWFrfSAKICAgICAgICAgICAgICAgICI1InskU3RhdHVzID0gIk5vdGlmaWNhdGlvbiI7IGJyZWFrfSAKICAgICAgICAgICAgICAgICI2InskU3RhdHVzID0gIkV4dGVuZGVkR3JhY2UiOyBicmVha30gCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRm91bmQgbGljZW5zZSBzdGF0dXMgdG8gYmUgJFN0YXR1cy4iCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEJ1aWxkaW5nIGhhc2ggdGFibGUuIgogICAgICAgICAgICAkUHJvcCA9IFtvcmRlcmVkXUB7CiAgICAgICAgICAgICAgICAiQ29tcHV0ZXJOYW1lIiA9ICRDb21wdXRlck5hbWU7CiAgICAgICAgICAgICAgICAiUHJvZHVjdE5hbWUiID0gJHdpbmRvd3MubmFtZTsKICAgICAgICAgICAgICAgICJBY3RpdmF0aW9uU3RhdHVzIiA9ICRTdGF0dXM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICRPdXRwdXRzICs9IE5ldy1PYmplY3QgLVR5cGVOYW1lIHBzb2JqZWN0IC1Qcm9wZXJ0eSAkUHJvcCB8IE91dC1OdWxsCiAgICAgICAgfQogICAgICAgICRPdXRwdXRzCiAgICAgICAgZm9yZWFjaCgkT3V0cHV0IGluICRPdXRwdXRzKQogICAgICAgIHsKICAgICAgICAgICAgaWYoJE91dHB1dC5BY3RpdmF0aW9uU3RhdHVzIC1ub3RtYXRjaCAiTGljZW5zZWQiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBMaWNlbnNlIHN0YXR1cyBpcyBub3QgbGljZW5zZWQgZm9yICQoJE91dHB1dC5Db21wdXRlck5hbWUpLiAgQWRkaW5nIHRvIGNvbGxlY3Rpb24uIgogICAgICAgICAgICAgICAgJEFjdGl2YXRpb25Jc3N1ZXMgKz0gJE91dHB1dAoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE5vIGxpY2Vuc2UgaXNzdWUgZXhpc3RzIGZvciAkKCRPdXRwdXQuQ29tcHV0ZXJOYW1lKS4iCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYoJEFjdGl2YXRpb25Jc3N1ZXMpCiAgICAgICAgewogICAgICAgICAgICB0cnkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2VuZGluZyBlbWFpbCB0byBtc2FsYXJtLiIKICAgICAgICAgICAgICAgIEVtYWlsLU1TYWxhcm0gLVN1YmplY3QgIlskKEdldC1LYXNleWFNYWNoaW5lSUQpXSAtIEZvdW5kIFdpbmRvd3MgYWN0aXZhdGlvbiBpc3N1ZXMhIiAtQm9keSAkQWN0aXZhdGlvbklzc3VlcyAtTG9nZ2luZyAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2VudCBlbWFpbC4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGFuIGlzc3VlIHNlbmRpbmcgdGhlIGVtYWlsIHRvIG1zYWxhcm0uICBDaGVjayB0aGUgbG9nIGZpbGUgZm9yIEVtYWlsLU1TYWxhcm0uIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIE5vIGNvbXB1dGVycyBmb3VuZCB3aXRoIGFjdGl2YXRpb24gaXNzdWVzLiBObyBlbWFpbCB3aWxsIGJlIHNlbnQuIgogICAgICAgIH0KICAgICB9CiAgICAgRW5kCiAgICAgewogICAgICAgIGlmKCEkRXJyb3JMb2cpCiAgICAgICAgewogICAgICAgICAgICAkTG9nUGF0aCA9ICIkZW52OndpbmRpclxUZW1wXEFjdGl2YXRpb25TdGF0dXNfSUlUUy50eHQiCiAgICAgICAgICAgIGZvcmVhY2goJGJvb2JvbyBpbiAkYm9vYm9vcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIiRib29ib28iIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgfQogfQogPCMKLlN5bm9wc2lzCiAgIFRoaXMgZnVuY2F0aW9uIHdpbGwgcnVuIE5ldHdvcmsgRGV0ZWN0aXZlIHNjYW4gYW5kIHJldHVybiB0aGUgcmVzdWx0cyBvZiB0aGUgbWFjaGluZS4KLkRFU0NSSVBUSU9OCiAgIFRoaXMgZnVuY3Rpb24gd2lsbCBydW4gdGhyZWUgbmV0d29yayBkZXRlY3RpdmUgc2NhbnMuICBUaGUgbmV0d29yayBzY2FuLCBzZWN1cml0eSBzY2FuLCBhbmQgaGlwYWEgc2Nhbi4gIEl0IHdpbGwgdGhlbiB6aXAgdXAgdGhlIHJlc3VsdHMgYW5kIHNlbmQgaW50byBtc2FsYXJtLgouRVhBTVBMRQogICBSdW4tTmV0d29ya0RldGVjdGl2ZQojPgpmdW5jdGlvbiBSdW4tTmV0V29ya0RldGVjdGl2ZQp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICRib29ib29zID0gQCgpCiAgICB9CiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gQ2hlY2tpbmcgZm9yIG91dHB1dCBkaXJlY3RvcnkuIgogICAgICAgIGlmKCEoVGVzdC1QYXRoIC1QYXRoIEM6XElJVFNfU2NyaXB0c1xOZXREZXRlY3RSZXN1bHRzXCkpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBPdXRwdXQgZGlyZWN0b3J5IGRvZXMgbm90IGV4aXN0LiAgQ3JlYXRpbmcgb3V0cHV0IGRpcmVjdG9yeS4iCiAgICAgICAgICAgIE5ldy1JdGVtIC1JdGVtVHlwZSBEaXJlY3RvcnkgLVBhdGggQzpcSUlUU19TY3JpcHRzXE5ldERldGVjdFJlc3VsdHNcIC1Gb3JjZSB8IE91dC1OdWxsCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIENyZWF0ZWQgZGlyZWN0b3J5LiIKICAgICAgICB9CiAgICAgICAgRWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzLiIKICAgICAgICB9CiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU3RhcnRpbmcgcHJvY2VzcyB0byBnZW5lcmF0ZSBOZXR3b3JrIFNlY3VyaXR5IHNjYW4gbG9nIGZpbGVzLiIKICAgICAgICBDOlxJSVRTX1NjcmlwdHNcTmV0U2VjRGV0ZWN0XG5kZGMuZXhlIC1sb2NhbCAtc2lsZW50IC1vdXRkaXIgIkM6XElJVFNfU2NyaXB0c1xOZXREZXRlY3RSZXN1bHRzIgogICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZpbmlzaGVkIHByb2Nlc3NpbmcgbmV0d29yayBzZWN1cml0eSBmaWxlLiIKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTdGFydGluZyBwcm9jZXNzIHRvIGdlbmVyYXRlIFNlY3VyaXR5IHNjYW4gZmlsZS4iCiAgICAgICAgQzpcSUlUU19TY3JpcHRzXE5ldFNlY0RldGVjdFxzZGRjLmV4ZSAtY29tbW9uIC1zZGZkaXIgIkM6XElJVFNfU2NyaXB0c1xOZXREZXRlY3RSZXN1bHRzIgogICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZpbmlzaGVkIGdlbmVyYXRpbmcgc2VjdXJpdHkgc2NhbiBmaWxlLiIKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTdGFydGluZyBwcm9jZXNzIHRvIGdlbmVyYXRlIEhJUEFBIHNjYW4gZmlsZS4iCiAgICAgICAgQzpcSUlUU19TY3JpcHRzXEhpcGFhRGV0ZWN0XGhpcGFhZGMuZXhlIC1oaXBhYWRlZXAgLW91dGRpciAiQzpcSUlUU19TY3JpcHRzXE5ldERldGVjdFJlc3VsdHMiCiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gRmluaXNoZWQgZ2VuZXJhdGluZyBoaXBhYSBmaWxlLiIKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBaaXBwaW5nIGxvZyBmaWxlIGRpcmVjdG9yeS4iCiAgICAgICAgQ3JlYXRlLVppcCAtU291cmNlICJDOlxJSVRTX1NjcmlwdHNcTmV0RGV0ZWN0UmVzdWx0cyIgLURlc3RpbmF0aW9uICJDOlxJSVRTX1NjcmlwdHNcTmV0RGV0ZWN0UmVzdWx0cy56aXAiCiAgICAgICAgJGJvb2Jvb3MgKz0gIiQoR2V0LURhdGUpIC0gU2VuZGluZyBlbWFpbCB0byBtc2FsYXJtIHdpdGggemlwIGZpbGUgYXR0YWNoZWQuIgogICAgICAgIEVtYWlsLU1TYWxhcm0gLUF0dGFjaG1lbnQgIkM6XElJVFNfU2NyaXB0c1xOZXREZXRlY3RSZXN1bHRzLnppcCIgLUJvZHkgIlRoZXNlIGFyZSB0aGUgcmVzdWx0cyBvZiBhIG5ldHdvcmsgZGV0ZWN0aXZlIHNjYW4sIHNlY3VyaXR5IHNjYW4sIGFuZCBoaXBhYSBzY2FuLiIgLUxvZ2dpbmcKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBTZW50IGVtYWlsLiIKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBEZWxldGluZyBSZXN1bHRzIHppcCBmaWxlIGFuZCByZXN1bHQgZmlsZXMuIgogICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoIEM6XElJVFNfU2NyaXB0c1xOZXREZXRlY3RSZXN1bHRzLnppcCAtRm9yY2UKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBEZWxldGVkIFppcCBmaWxlLiIKICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBHZXR0aW5nIGZpbGUgbGlzdCBpbiByZXN1bHRzIGRpcmVjdG9yeS4iCiAgICAgICAgJGZpbGVzID0gR2V0LUNoaWxkSXRlbSAtUGF0aCBDOlxJSVRTX1NjcmlwdHNcTmV0RGV0ZWN0UmVzdWx0cyAtRmlsdGVyICouKiAtUmVjdXJzZQogICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIEZvdW5kIGZpbGVzICQoJGZpbGVzLmZ1bGxuYW1lKS4iCiAgICAgICAgZm9yZWFjaCgkZmlsZSBpbiAkZmlsZXMpCiAgICAgICAgewogICAgICAgICAgICAkYm9vYm9vcyArPSAiJChHZXQtRGF0ZSkgLSBSZW1vdmluZyBmaWxlICQoJGZpbGUuZnVsbG5hbWUpLiIKICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gLVBhdGggJGZpbGUuZnVsbG5hbWUgLUZvcmNlCiAgICAgICAgICAgICRib29ib29zICs9ICIkKEdldC1EYXRlKSAtIFJlbW92ZWQgZmlsZSAkKCRmaWxlLmZ1bGxuYW1lKS4iCiAgICAgICAgfSAgICAgICAgCiAgICB9CiAgICBFbmQKICAgIHsKICAgICAgICBpZighJEVycm9yTG9nKQogICAgICAgIHsKICAgICAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxOZXR3b3JrRGV0ZWN0aXZlX0lJVFMudHh0IgogICAgICAgICAgICBmb3JlYWNoKCRib29ib28gaW4gJGJvb2Jvb3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkYm9vYm9vIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBwcm9jZWR1cmUgd2lsbCBkZWxldGUgYWxsIHRoZSB0YXNrcyB1bmRlciB0YXNrIHNjaGVkdWxlciB3aGljaCBoYXZlIHRoZSBjdXN0b20gdGFza3MgcHV0IGluIGJ5IG1hbmFnZWQgc2VydmljZXMgKHRhc2tzIHN0YXJ0aW5nIHdpdGggSUlUUykuIEFsc28gaXQgd2lsbCBkZWxldGUKICAgdGhlIHByb2ZpbGUucHMxIGZpbGUgKHRlIHJlcGl0b3J5IGZvciBhbGwgSUlUUyBjb2RlKS4gVGhlIHRhc2sgd2lsbCBiZSBydW4gYXQgdGhlIHRpbWUgYSBjbGllbnQgd2lsbCBiZSBvZmYgYm9hcmRlZC4KLkRFU0NSSVBUSU9OCiAgIFRoZSBmdW5jdGlvbiBnZXRzIHRoZSBuYW1lcyBvZiBhbGwgdGhlIC54bWwgZmlsZXMgZm9yIGVhY2ggdGFzayB0aGF0IHN0YXJ0cyBoYXMgdGhlIHRhc2sgbmFtZSBvZiBJSVRTIGluIGl0IHNvbWV3aGVyZS4gSXQgd2lsbCBhbHNvIGRlbGV0ZSB0aGUgcHJvZmlsZS5wczEgZmlsZSB0aHJvdWdoIGEgUmVtb3ZlLUl0ZW0gY21kbGV0Ci5FWEFNUExFCiAgIERlbGV0ZS1JSVRTdGFza3MKIz4KZnVuY3Rpb24gRGVsZXRlLUlJVFN0YXNrcwp7CiA8IyBHZXRzIHRoZSBuYW1lIG9mIGFsbCB0aGUgLnhtbCdzIHRoYXQgZXhpc3QgZm9yIGVhY2ggY3VzdG9tIHRhc2sgZnJvbSBNYW5hZ2VkIFNlcnZpY2VzICM+CiR0YXNrID0gR2V0LUl0ZW0gQzpcV2luZG93c1xTeXN0ZW0zMlxUYXNrc1wqaWl0cyoKICAgIDwjIExvb3BzIHRocm91Z2ggdGhlIGxpc3QgYW5kIHVzZXMgY21kbGluZSB0byBkZWxldGUgZWFjaCB0YXNrIz4KICAgIGZvcmVhY2goJHQgaW4gJHRhc2spIHsKICAgIHNjaHRhc2tzIC9kZWxldGUgL3RuICR0Lm5hbWUgL2YKICAgIH0KIyBEZWxldGVzIHRoZSBwcm9maWxlLnBzMSBmaWxlClJlbW92ZS1JdGVtIEM6XFdpbmRvd3NcU3lzdGVtMzJcV2luZG93c1Bvd2VyU2hlbGxcdjEuMFxwcm9maWxlLnBzMQp9Cgo8IwouU3lub3BzaXMKICAgVGhpcyBmdW5jdGlvbiB3aWxsIGNoZWNrIHRoZSBMQVNUIFJVTiBzdGF0dXMgb2YgYWxsIElJVFMgY3VzdG9tIHRhc2tzIGluIHRhc2sgc2NoZWR1bGVyLiB3aWxsIHNlbmQgYW4gZS1tYWlsIGlmIDIgY29uc2VjdXRpdmUgcnVucyBoYXZlIGZhaWxlZAouREVTQ1JJUFRJT04uCiAgIFRoaXMgZnVuY3Rpb24gZ2V0cyBsaXN0IG9mIGFsbCBJSVRTIHRhc2tzLiBjcmVhdGVkIGEgY3N2IGZpbGUgd2l0aCB0aGUgbGFzdCBydW4gcmVzdWx0cyBvZiBlYWNoIHRhc2suIGdldHMgdGhlIHJ1biByZXN1bHQgb2YgdGhlIG1vc3QgcmVjZW50IHJ1biwgY29tcGFyZXMgdGhlIDIgcnVuIHJlc3VsdHMgYW5kIHNlbmRzIGUtbWFpbCBpZiAyIGNvbnNlY3V0aXZlIHJ1bnMgaGF2ZSBmYWlsZWQKLkVYQU1QTEUKICBjaGVjay1JSVRTdGFza3MKIz4KZnVuY3Rpb24gY2hlY2stSUlUU3Rhc2tzIHsKPCMgbGlzdCBvZiBhbGwgdGFza3MgdGhlIG5hbWVzIG9mIHdoaWNoIGhhdmUgaWl0cyBpbiBpdCAjPgokdGFzayA9IEdldC1JdGVtIEM6XFdpbmRvd3NcU3lzdGVtMzJcVGFza3NcKmlpdHMqCjwjIFRoZSBjc3YgZmlsZSBpcyBpbXBvcnRlZCwgdGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBsYXN0IHJ1biByZXN1bHQgb2YgZWFjaCB0YXNrICM+CiRsaXN0b2xkID0gSW1wb3J0LUNzdiBDOlxXaW5kb3dzXFRlbXBcdGFzay5jc3YgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKPCMgc2luY2UgdGhlIGFib3ZlIHZhcmlhYmxlIGhhcyB0aGUgREFUQSBvZiB0ZWggY3N2IGZpbGUsIGl0IGlzIGRlbGV0ZWQgIz4KUmVtb3ZlLUl0ZW0gQzpcV2luZG93c1xUZW1wXHRhc2suY3N2IC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCiAgICA8IyBmb3IgZWFjaCBpaXRzIHRhc2sgIz4KICAgIGZvcmVhY2goJHQgaW4gJHRhc2spIHsKICAgICAgICAkbGlzdG5ldyA9IHNjaHRhc2tzIC9xdWVyeSAvZm8gY3N2IC92IC90biAkdC5uYW1lIHwgQ29udmVydEZyb20tQ3N2IHwgU2VsZWN0LU9iamVjdCBUYXNrTmFtZSAsIkxhc3QgUmVzdWx0IiwiTGFzdCBSdW4gVGltZSIsIk5leHQgUnVuIFRpbWUiCiAgICAgICAgJGxpc3RuZXcgfCBFeHBvcnQtQ3N2IC1BcHBlbmQgQzpcV2luZG93c1xUZW1wXHRhc2suY3N2CiAgICAgICAgJG5ld2xhc3RydW4gPSAkbGlzdG5ldy4nTGFzdCBSdW4gVGltZScKICAgICAgICAkbmV3bGFzdHJlc3VsdCA9ICRsaXN0bmV3LidMYXN0IFJlc3VsdCcKICAgICAgICAkdGFza25hbWUgPSAkbGlzdG5ldy5UYXNrTmFtZQogICAgICAgICAgICA8IyBpZiB0aGUgdGFzayBpbiB0aGUgbG9vcCB3YXMgc3VjY2Vzc2Z1bCAnMCcuIFRoaXMgaXMgdGhlIG1vc3QgcmVjZW50IHJlc3VsdCBvZiB0aGUgdGFzayAjPgogICAgICAgICAgICBpZiAoJGxpc3RuZXcuJ0xhc3QgUmVzdWx0JyAtZXEgMCkgewogICAgICAgICAgICAgICAgJG91dHB1dCArPSAidGhlIG1vc3QgcmVjZW50IHJ1biBvZiAkdGFza25hbWUgd2FzIHN1Y2Nlc3NmdWwuIEl0IHJhbiBhdCAkbmV3bGFzdHJ1biBhbmQgc3VjY2VkZGVkIHdpdGggdGhlIGZvbGxvd2luZyByZXN1bHQgJG5ld2xhc3RyZXN1bHQuIgogICAgICAgICAgICB9CiAgICAgICAgICAgIDwjIGlmIHRoZSB0YXNrIGluIHRoZSBsb29wIGZhaWxlZCAnMScgb3IgbmVnYXRpdmUgIz4KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICA8IyBHZXRzIHRoZSBMYXN0IFJ1biByZXN1bHQgb2YgdGhlIHRhc2sgdGhlIGxvb3AgaXMgYXQgIz4KICAgICAgICAgICAgICAgIFtpbnRdJG9sZHJlcyA9ICRsaXN0b2xkLldoZXJlKHskUFNJdGVtLlRhc2tOYW1lIC1lcSAkdGFza25hbWV9KS4nTGFzdCBSZXN1bHQnCiAgICAgICAgICAgICAgICA8IyBUaGUgbGFzdCBydW4gdGltZSB0aGF0IHRoZSB0YXNrIGluIHRoZSBsb29wIHJhbiBhdCAjPgogICAgICAgICAgICAgICAgJGxhc3RkYXRlID0gJGxpc3RvbGQuV2hlcmUoeyRQU0l0ZW0uVGFza05hbWUgLWVxICR0YXNrbmFtZX0pLidMYXN0IFJ1biBUaW1lJwogICAgICAgICAgICAgICAgPCMgYmVjYXVzZSB0aGUgc2NyaXB0IGhhcyByZWFjaGVkIGhlcmUsIGl0IG1lYW5zIHRoYXQgdGhlIG1vc3QgcmVjZW50IHJlc3VsdCBpcyBmYWlsZWQgYW5kIG5vdyBpdCBpcyBjb21wYXJlZCB0byB0aGUgT0xEIHJlc3VsdHMgb2YgdGhlIHRhc2sgYW5kIHRoZSBvbGQgcnVuIHRpbWUgKGl0IHNob3VsZCBub3QgYmUgdGhlIHNhbWUpICM+CiAgICAgICAgICAgICAgICBpZiAoJG9sZHJlcyAtbHQgMCAtb3IgJG9sZHJlcyAtZXEgMSAtYW5kICRsYXN0ZGF0ZSAtbmUgJG5ld2xhc3RydW4pIHsKICAgICAgICAgICAgICAgICAgICAkbWFjaGluZSA9IEdldC1LYXNleWFNYWNoaW5lSUQKICAgICAgICAgICAgICAgICAgICBFbWFpbC1NU2FsYXJtIC1Cb2R5ICJPbiAkbWFjaGluZSAyIGNvbnNlY3V0aXZlIHJ1bnMgb2YgdGFzayAkdGFza25hbWUgaGF2ZSBGQUlMRUQuIE9uZSBydW4gZmFpbGVkIGF0ICRsYXN0ZGF0ZSBhbmQgb25lIGZhaWxlZCBhdCB0aGUgbW9zdCByZWNlbnQgcnVuLiBQbGVhc2UgaW52ZXN0aWdhdGUuIiAtc3ViamVjdCAiT24gJG1hY2hpbmUgMiBjb25zZWN1dGl2ZSBydW5zIG9mIHRhc2sgJHRhc2tuYW1lIGhhdmUgZmFpbGVkLiIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0Kz0gIlNFTlQgIEVNQUlMLiBUaGUgdGFzayAkdGFza25hbWUgaGFzIGhhZCAyIGNvbnNlY3V0aXZlIGZhaWx1cmVzLiBPbmUgcnVuIGZhaWxlZCBhdCAkbGFzdGRhdGUgYW5kIG9uZSBmYWlsZWQgYXQgdGhlIG1vc3QgcmVjZW50IHJ1bi5UaGlzIG5lZWRzIHRvIGJlIGludmVzdGlnYXRlZC4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICA8IyBJZiB0aGUgdGFzayBsYXN0IHJ1biB0aW1lIGFuZCB0aGlzIHJ1biB0aW1lIGFyZSB0aGUgc2FtZSB0aGVuIGl0IG1lYW5zIHRoYXQgdGhlIHNjcmlwdCBoYXMgbm90IHJ1biBtb3N0IHJlY2VudGx5IGJlY2F1c2UgaXQgcnVucyBldmVyeSBob3VyIHJlY29yZGVkIHRoZSBsYXN0IHJlc3VsdCBzbyB0aGlzIGlzIG5vdCBuZWVkZWQgIz4KICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ICs9ICIkdGFza25hbWUgbW9zdCByZWNlbnQgcnVuIHdhcyBhdCAkbmV3bGFzdHJ1biBhbmQgdGhlIHJlc3VsdCB3YXMgJG5ld2xhc3RyZXN1bHQuIElmIHRoZSByZXN1bHQgaXMgbGVzcyB0aGFuIDAgb3IgMS4gVGhlIHRhc2sgaGFzIGZhaWxlZCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgfQogICAgJG91dHB1dCB8IE91dC1GaWxlIEM6XFdpbmRvd3NcVGVtcFx0YXNrbG9ncy50eHQKfQoKPCMKLlN5bm9wc2lzCiAgIEF1dG9tYXRpY2FsbHkgaW5zdGFsbCBFU0VULgouREVTQ1JJUFRJT04KICAgSW5zdGFsbHMgRVNFVCBBZ2VudCBhbmQgZWl0aGVyIEVTRVQgRW5kcG9pbnQgb3IgRVNFVCBGaWxlIFNlY3VyaXR5IChpZiB3b3Jrc3RhdGlvbiBvciBzZXJ2ZXIsIGFjY29yZGluZ2x5KS4gV2lsbCBub3QgaW5zdGFsbCBjb21wb25lbnRzIHRoYXQgYXJlIGFscmVhZHkgcHJlc2VudC4gSWYgdGhlcmUncyBhbnkgZmFpbHVyZSwgd2lsbCBub3RpZnkgdGhlIHVzZXIgYW5kIE1hbmFnZWQgU2VydmljZXMuCi5JTlBVVFMKICAgdGlja2V0IChzd2l0Y2gpOiBFbmFibGUgdG8gaGF2ZSB0aGlzIHNjcmlwdCBzZW5kIGFuIGUtbWFpbCB0byBNU0FsYXJtIG9uIGNvbXBsZXRpb24sIHdoaWNoIHdpbGwgbWFrZSBhIHRpY2tldCBvbiB0aGUgTW9uaXRvcmluZyBib2FyZC4gRXZlbiBpZiBjYWxsZWQsIHdpbGwgT05MWSBzZW5kIGFuIGUtbWFpbCBpZiB0aGVyZSB3YXMgYWN0dWFsbHkgYW4gZXJyb3IKICAgKGkuZS4gd2lsbCBub3Qgc2VuZCBhbiBlLW1haWwgaWYgZXZlcnl0aGluZyByYW4gd2l0aG91dCBpbmNpZGVudCkuCi5FWEFNUExFCiAgIEluc3RhbGwtRXNldAojPgpmdW5jdGlvbiBJbnN0YWxsLUVzZXQKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFtBbGlhcygiR2V0LUVzZXQiKV0KICAgIFBhcmFtCiAgICAoCiAgICAgICAgIyBPcHRpb25hbCBzd2l0Y2ggdG8gZW5hYmxlIGNyZWF0aW5nIGEgdGlja2V0IGlmIGFueSBwcm9ibGVtcyBvY2N1ci4KICAgICAgICBbU3dpdGNoXSR0aWNrZXQKICAgICkKCiAgICBCZWdpbgogICAgewogICAgICAgICMgSW5pdGlhbGl6ZSB0aGUgbG9ncyBhcnJheQogICAgICAgICRsb2dzID0gQCgiPT09PT09PT09PT09PT09PT09PSIsIiQoR2V0LURhdGUpIC0gQmVnaW5uaW5nIEluc3RhbGwtRXNldC4iKQoKICAgICAgICAjIEluaXRpYWxpemUgdGhlIGtpbGxzd2l0Y2gKICAgICAgICAka2lsbCA9IDAKCiAgICAgICAgIyBUaGUgS2FzZXlhIHRlbXAgZm9sZGVyCiAgICAgICAgJEthc1RlbXAgPSAiQzpcSUlUU19NZ210XFRlbXAiCgogICAgICAgICMgVGhlIGRvd25sb2FkIGxvY2F0aW9uIG9mIHRoZSBFU0VUIEFnZW50CiAgICAgICAgJGFnZW50UGF0aCA9ICIkS2FzVGVtcFxFc2V0QWdlbnQubXNpIgoKICAgICAgICAjIFRoZSBkb3dubG9hZCBsb2NhdGlvbiBvZiBFU0VUIEVuZHBvaW50CiAgICAgICAgJGVuZFBhdGggPSAiJEthc1RlbXBcRXNldEVuZHBvaW50Lm1zaSIKCiAgICAgICAgIyBUaGUgZG93bmxvYWQgbG9jYXRpb24gb2YgRVNFVCBGaWxlIFNlY3VyaXR5CiAgICAgICAgJEZTUGF0aCA9ICIkS2FzVGVtcFxFc2V0RlMubXNpIgoKICAgICAgICAjIFRoZSBsb2NhdGlvbiBvZiBhbGwgZ2VuZXJhdGVkIGxvZyBmaWxlcwogICAgICAgICRMb2dSb290ID0gIiRlbnY6d2luZGlyXFRlbXAiCiAgICB9CgogICAgUHJvY2VzcwogICAgewogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENoZWNraW5nIGluc3RhbGxlZCBQb3dlclNoZWxsIHZlcnNpb24uIgogICAgICAgIGlmKENoZWNrLVBTVmVyc2lvbikKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEluc3RhbGxlZCBQb3dlclNoZWxsIHZlcnNpb24gKCQoJFBTVmVyc2lvblRhYmxlLlBTVmVyc2lvbi5NYWpvcikpIGlzIG91dGRhdGVkIGFuZCBpbmNvbXBhdGlibGUuIgogICAgICAgICAgICAka2lsbCsrCiAgICAgICAgfQoKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBDaGVja2luZyBsb2NhbCBBZGQvUmVtb3ZlIGZvciBhbnkga25vd24gc2VjdXJpdHkgcHJvZHVjdHMuIgogICAgICAgICRhdnMgPSBDaGVjay1JbnN0YWxsZWRBdgoKICAgICAgICAjIElmIGFueSBzZWN1cml0eSBwcm9kdWN0cyB3ZXJlIGZvdW5kLCByZXR1cm4gdGhhdCBpbnN0ZWFkIG9mIGNvbnRpbnVpbmcuCiAgICAgICAgaWYoJGF2cyAtbmUgIm5vbmUgZm91bmQiKQogICAgICAgIHsKICAgICAgICAgICAgIyBDb252ZXJ0IHRoZSBsaXN0LW9mLWF2cyBvYmplY3QgdG8gYW4gYXJyYXkgb2Ygc3RyaW5ncwogICAgICAgICAgICBbc3RyaW5nXSRhdmxpc3QgPSBAKCkKICAgICAgICAgICAgZm9yZWFjaCgkaXRlbSBpbiAkYXZzKXskYXZsaXN0ICs9ICJOYW1lOiAkKCRpdGVtLkRpc3BsYXlfTmFtZSk7IFVuaW5zdGFsbCBQYXRoOiAkKCRpdGVtLlVuaW5zdGFsbF9QYXRoKWBuIn0KCiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEV4aXN0aW5nIGFudGl2aXJ1cyBkZXRlY3RlZDpgbiRhdmxpc3QiCiAgICAgICAgICAgICRraWxsKysKICAgICAgICB9CiAgICAgICAgIyBPdGhlcndpc2UsIGp1c3QgYWRkIHRoZSBmYWN0IHRoYXQgbm9uZSB3ZXJlIGZvdW5kIHRvIHRoZSBwcmV2aW91cyBsb2cuCiAgICAgICAgZWxzZXskbG9nc1stMV0gKz0gIiBOb25lIGZvdW5kLiJ9CgogICAgICAgICMgRG9uJ3QgYm90aGVyIHByb2Nlc3NpbmcgKmFueXRoaW5nKiBpZiB0aGVyZSBhcmUgc25hZ3MuCiAgICAgICAgaWYoJGtpbGwgLWVxIDApCiAgICAgICAgewogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBDaGVja2luZyBpZiB0aGUgRVNFVCBBZ2VudCBpcyBhbHJlYWR5IGluc3RhbGxlZC4iCiAgICAgICAgICAgIGlmKCEoQ2hlY2stRXNldEFnZW50KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ2hlY2tpbmcgaWYgdGhlIEVTRVQgQWdlbnQgaW5zdGFsbGVyIGFscmVhZHkgZXhpc3RzLiIKICAgICAgICAgICAgICAgIGlmKCEoVGVzdC1QYXRoICRhZ2VudFBhdGgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEZldGNoaW5nIHRoZSBFU0VUIEFnZW50IGRvd25sb2FkIGxpbmsuIgogICAgICAgICAgICAgICAgICAgIHRyeXskbGluayA9IEdldC1Fc2V0TGlua30KICAgICAgICAgICAgICAgICAgICBjYXRjaAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGFuIHVuZXhwZWN0ZWQgZXJyb3Igd2hlbiBmZXRjaGluZyB0aGUgRVNFVCBBZ2VudCBkb3dubG9hZCBsaW5rOiAkKCRlcnJvclswXSkiCiAgICAgICAgICAgICAgICAgICAgICAgICRraWxsKysKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICMgT25seSBwcm9jZXNzIGlmIEdldC1Fc2V0TGluayBhY3R1YWxseSByZXR1cm5lZCBhIHZhbHVlLgogICAgICAgICAgICAgICAgICAgIGlmKCRsaW5rIC1uZSAkbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIERvd25sb2FkaW5nIEVTRVQgQWdlbnQgaW5zdGFsbGVyLiIKICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHt3Z2V0IC11cmkgJGxpbmsgLU91dEZpbGUgJGFnZW50UGF0aH0KICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGFuIGVycm9yIHdoZW4gYXR0ZW1wdGluZyB0byBkb3dubG9hZCB0aGUgRVNFVCBBZ2VudCBpbnN0YWxsZXI6ICQoJGVycm9yWzBdKSIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRraWxsKysKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBJbnN0YWxsaW5nIHRoZSBFU0VUIEFnZW50LiIKICAgICAgICAgICAgICAgIHRyeXtJbnN0YWxsLUVzZXRBZ2VudH0KICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGEgcHJvYmxlbSBpbnN0YWxsaW5nIHRoZSBFU0VUIEFnZW50OiAkKCRlcnJvclswXSkiCiAgICAgICAgICAgICAgICAgICAgJGtpbGwrKwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFU0VUIEFnZW50IGFscmVhZHkgaW5zdGFsbGVkLiJ9CgogICAgICAgICAgICAjIERPIE5PVCBpbnN0YWxsIEFWIGlmIHRoZXJlJ3Mgbm8gQWdlbnQuCiAgICAgICAgICAgIGlmKENoZWNrLUVzZXRBZ2VudCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ2hlY2tpbmcgd2hldGhlciB0aGUgbWFjaGluZSBpcyBhIHNlcnZlciBvciB3b3Jrc3RhdGlvbi4iCiAgICAgICAgICAgICAgICBpZihDaGVjay1NYWNoaW5lUm9sZSAtZXEgInNlcnZlciIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIyBWYXJpYWJsZSB0byBiZSB1c2VkIGZvciB0aWNrZXQgY3JlYXRpb24gKHNlZSBFbmQgYmxvY2spCiAgICAgICAgICAgICAgICAgICAgJHJvbGUgPSAic3J2IgoKICAgICAgICAgICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBJbnN0YWxsaW5nIEVTRVQgRmlsZSBTZWN1cml0eS4iCiAgICAgICAgICAgICAgICAgICAgdHJ5e0luc3RhbGwtRXNldEZTfQogICAgICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgYSBwcm9ibGVtIGluc3RhbGxpbmcgRVNFVCBGaWxlIFNlY3VyaXR5OiAkKCRlcnJvclswXSkiCiAgICAgICAgICAgICAgICAgICAgICAgICRraWxsKysKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlaWYoQ2hlY2stTWFjaGluZVJvbGUgLWVxICJ3b3Jrc3RhdGlvbiIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIyBWYXJpYWJsZSB0byBiZSB1c2VkIGZvciB0aWNrZXQgY3JlYXRpb24gKHNlZSBFbmQgYmxvY2spCiAgICAgICAgICAgICAgICAgICAgJHJvbGUgPSAid2tzIgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEluc3RhbGxpbmcgRVNFVCBFbmRwb2ludC4iCiAgICAgICAgICAgICAgICAgICAgdHJ5e0luc3RhbGwtRXNldEVuZHBpb250fQogICAgICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgYSBwcm9ibGVtIGluc3RhbGxpbmcgRVNFVCBFbmRwb2ludDogJCgkZXJyb3JbMF0pIgogICAgICAgICAgICAgICAgICAgICAgICAka2lsbCsrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEluc3RhbGxlZCBPUyBkZXRlcm1pbmVkIHRvIG5vdCBiZSBXaW5kb3dzIG9yIG90aGVyd2lzZSBub3QgcmVjb2duaXplZDsgY2FuY2VsbGluZyBwcm9jZWR1cmUuIgogICAgICAgICAgICAgICAgICAgICRraWxsKysKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENhbm5vdCBpbnN0YWxsIGFuIEVTRVQgQVYgLSBFU0VUIEFnZW50IGlzIG5vdCBpbnN0YWxsZWQuIgogICAgICAgICAgICAgICAgJGtpbGwrKwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUb3RhbCBraWxsc3dpdGNoIHRyaWdnZXJzOiAka2lsbCIKICAgIH0KCiAgICBFbmQKICAgIHsKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFbmQgb2YgbG9nIGZvciBJbnN0YWxsLUVzZXQuIgogICAgICAgIAogICAgICAgICMgVXBkYXRlIChvciBjcmVhdGUpIHRoZSBsb2cgZmlsZSBmb3IgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgJGxvZ3MgYXJyYXkuCiAgICAgICAgJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxJbnN0YWxsRXNldF9JSVRTLnR4dCIKICAgIAlmb3JlYWNoKCRsb2cgaW4gJGxvZ3MpCiAgICAJeyIkbG9nIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZH0KCSAgICAKICAgICAgICAjIChPcHRpb25hbCkgU2VuZCBhbiBlLW1haWwgdG8gTVNBbGFybSB0byBjcmVhdGUgYSB0aWNrZXQuIEV2ZW4gaWYgY2FsbGVkLCBvbmx5IHRyaWdnZXJzIGlmIHRoZXJlIHdhcyBhY3R1YWxseSBhIHByb2JsZW0uCiAgICAgICAgaWYoKCR0aWNrZXQpIC1hbmQgKCRraWxsIC1uZSAwKSkKICAgICAgICB7CiAgICAgICAgICAgICMgRmluZCBhbGwgRVNFVCBsb2cgZmlsZXMgYW5kIGFkZCB0aGVtIHRvICRsb2dmaWxlcy4KICAgICAgICAgICAgW2FycmF5XSRsb2dmaWxlcyA9ICRudWxsCiAgICAgICAgICAgIFthcnJheV0kZmlsZXMgPSBHZXQtQ2hpbGRJdGVtICRMb2dSb290IHwgJSBOYW1lCiAgICAgICAgICAgIGZvcmVhY2goJGZpbGUgaW4gJGZpbGVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZigkZmlsZSAtbWF0Y2ggImVzZXQuKl9JSVRTIil7JGxvZ2ZpbGVzICs9ICRmaWxlfQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIFNlbmRzIGFuIGFsZXJ0IHRvIE1TQWxhcm0sIHdoaWNoIHdpbGwgbWFrZSBhIHRpY2tldC4gRE9FUyBpbmNsdWRlIHRoZSBsb2cgZmlsZXMgYXMgYXR0YWNobWVudHMuCiAgICAgICAgICAgIEVtYWlsLU1TYWxhcm0gLUJvZHkgIkVTRVQgaW5zdGFsbCBmYWlsZWQgb24gJChHZXQtS2FzZXlhTWFjaGluZUlEKS4gU2VlIERvY3VtZW50cyBmb3IgYXR0YWNoZWQgbG9ncy4iIC1BdHRhY2htZW50ICRsb2dmaWxlcwogICAgICAgIH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIENoZWNrcyBpZiBFU0VUIEFnZW50IGlzIGluc3RhbGxlZCwgcmV0dXJucyBUUlVFIGlmIHNvLgouREVTQ1JJUFRJT04KICAgVGVzdCBpZiB0aGUgRVNFVCBBZ2VudCBleGVjdXRhYmxlIGV4aXN0cyBpbiB0aGUgdHlwaWNhbCBpbnN0YWxsYXRpb24gZGlyZWN0b3J5LiBJZiBpdCBleGlzdHMsIHJldHVybiBUUlVFLCBlbHNlIEZBTFNFLgouRVhBTVBMRQogICBDaGVjay1Fc2V0QWdlbnQKCiAgIFRydWUKLk9VVFBVVFMKICAgQm9vbGVhbgojPgpmdW5jdGlvbiBDaGVjay1Fc2V0QWdlbnQKewogICAgVGVzdC1QYXRoICIkZW52OlByb2dyYW1GaWxlc1xFU0VUXFJlbW90ZUFkbWluaXN0cmF0b3JcQWdlbnRcRVJBQWdlbnQuZXhlIgp9Cgo8IwouU3lub3BzaXMKICAgTWF0Y2ggYW4gb3JnYW5pemF0aW9uIGFuZCBhIFdpbmRvd3MgT1MgYXJjaGl0ZWN0dXJlICgzMiBvciA2NCkgdG8gZG93bmxvYWQgYW4gaW5zdGFsbGVyLiBPbmx5IHdvcmtzIG9uIGEgc2luZ2xlIG1hY2hpbmUgYXQgYSB0aW1lLgouREVTQ1JJUFRJT04KICAgRGV0ZXJtaW5lIHRoZSByb290IG9yZyAoZ3JvdXBOYW1lKSBiYXNlZCBvbiB0aGUgbG9jYWwgS2FzZXlhIElEIChtYWNoTmFtZSkuIERldGVybWluZSB0aGUgT1MgYXJjaGl0ZWN0dXJlIChtYWNoT1MpIG9mIHRoZSBtYWNoaW5lIHRoaXMgc2NyaXB0IGlzIHJ1biBvbiAod2hpY2ggd2lsbCBiZSB0aGUgc2FtZSBtYWNoaW5lIGluIG1hY2hOYW1lKS4gTWF0Y2ggbWFjaE9yZyBhbmQgbWFjaE9TIGFnYWluc3Qga2V5IEVzZXRLZXkuY3N2IHRvIGdldCBhIERyb3Bib3ggZG93bmxvYWQgbGluayB0byBhIGNvbXBhbnktc3BlY2lmaWMgRVNFVCBBZ2VudCBpbnN0YWxsZXIuCi5FWEFNUExFCiAgIEdldC1Fc2V0TGluawoKICAgaHR0cDovL3d3dy5kcm9wYm94LmNvbS9zL1t1bmlxdWVVUkxdL0FnZW50X3NjY2l0XzY0Lm1zaT9kbD0xCi5PVVRQVVRTCiAgIFVSTCAoc3RyaW5nKSBvciBudWxsCi5GVU5DVElPTkFMSVRZCiAgIERvd25sb2FkcyBhIFVSTCBsaW5rIHRvIGFuIGluc3RhbGxlci4KIz4KZnVuY3Rpb24gR2V0LUVzZXRMaW5rCnsKICAgIFtPdXRwdXRUeXBlKFtTdHJpbmddKV0KICAgIFBhcmFtCiAgICAoKQogICAgCiAgICBCZWdpbgogICAgewogICAgICAgICMgSW5pdGlhbGl6ZSB0aGUga2lsbHN3aXRjaC4KICAgICAgICAka2lsbCA9IDAKCiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBsb2dzIGFycmF5LgogICAgICAgICRsb2dzID0gQCgiPT09PT09PT09PT09PT09PT09PSIsIiQoR2V0LURhdGUpIC0gQmVnaW5uaW5nIEdldC1Fc2V0TGluay4iKQoKICAgICAgICAjIEluaXRpYWxpemUgdGhlIFVSTCB2YXJpYmxlLgogICAgICAgICRvcmdMaW5rID0gJG51bGwKICAgICAgICAKICAgICAgICAjIFZlcmlmeSB0aGUgbG9jYWwgUG93ZXJTaGVsbCB2ZXJzaW9uIGlzIHN1ZmZpY2llbnQgdG8gYWN0dWFsbHkgcnVuIHRoZSBtYWluIGZ1bmN0aW9uLgogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENoZWNraW5nIGluc3RhbGxlZCBQb3dlclNoZWxsIHZlcnNpb24gZm9yIGNvbXBhdGliaWxpdHkuIgogICAgICAgIGlmIChDaGVjay1QU1ZlcnNpb24pCiAgICAgICAgewogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBQb3dlclNoZWxsIHZlcnNpb24gaW5zdWZmaWNpZW50IHRvIHJ1biBHZXQtRXNldExpbmsuIEN1cnJlbnQgdmVyc2lvbjogJCgkUFNWZXJzaW9uVGFibGUuUFNWZXJzaW9uLk1ham9yKSIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgIH0KCiAgICAgICAgIyBWZXJpZnkgRXNldEtleSBhY3R1YWxseSBleGlzdHMgd2hlcmUgaXQgaXMgc3VwcG9zZWQgdG8gYmUuCiAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ2hlY2tpbmcgZm9yIGV4aXN0ZW5jZSBvZiBFc2V0S2V5LmNzdi4iCiAgICAgICAgaWYoIShUZXN0LVBhdGggQzpcSUlUU19TY3JpcHRzXEVzZXRLZXkuY3N2KSkKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEVzZXRLZXkuY3N2IGRvZXMgbm90IGV4aXN0ISBEb3dubG9hZCBmcmVzaCBjb3B5IG9mIEVzZXRLZXkuY3N2IHJlcXVpcmVkLiIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgICAgICBXcml0ZS1Ib3N0ICJFc2V0S2V5LmNzdiBkb2VzIG5vdCBleGlzdCEgUGxlYXNlIGRvd25sb2FkIGEgZnJlc2ggY29weSBvZiBFc2V0S2V5LmNzdi4iIC1CYWNrZ3JvdW5kQ29sb3IgQmxhY2sgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICB9ICAgICAgIAogICAgfQoKICAgIFByb2Nlc3MKICAgIHsKICAgICAgICAjIFRoaXMgaXMgdGhlIG5hbWUgb2YgdGhlIG1hY2hpbmUuIEl0IHdpbGwgYmUgY29udmVydGVkIGludG8gdGhlIG5hbWUgb2YgdGhlIG9yZyBhbmQgdGhlbiBjaGVja2VkIGFnYWluc3QgYSBzcHJlYWRzaGVldC9rZXkuCiAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gUHVsbGluZyBmdWxsIEthc2V5YSBJRC4iCiAgICAgICAgJG1hY2hOYW1lID0gR2V0LUthc2V5YU1hY2hpbmVJRAogICAgICAgIAogICAgICAgICMgUmVnRXggdGhlIG1hY2hpbmUgbmFtZSB0byBleHRyYWN0IHRoZSBncm91cCBuYW1lLiBETyBOT1Qgb3V0cHV0IHRoZSBhY3R1YWwgbWF0Y2ggcmVzdWx0LgogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIFB1bGxpbmcgZ3JvdXAgbmFtZSBmcm9tIG1hY2hpbmUgbmFtZSAnJG1hY2hOYW1lJy4iCiAgICAgICAgVHJ5CiAgICAgICAgewogICAgICAgICAgICAkbWFjaE5hbWUgLW1hdGNoICdbXHctXSskJyB8IE91dC1OdWxsCiAgICAgICAgICAgIFtTdHJpbmddJGdyb3VwTmFtZSA9ICRtYXRjaGVzWzBdCiAgICAgICAgfQogICAgICAgIENhdGNoCiAgICAgICAgewogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBDb3VsZCBub3QgcnVuIFJlZ0V4IG9uIGdpdmVuIG1hY2hpbmUgbmFtZSAnJG1hY2hOYW1lJy4gRXJyb3I6ICQoJEVycm9yWzBdKSIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgIH0KCiAgICAgICAgIyBHZXQgdGhlIE9TIGFyY2hpdGVjdHVyZSBvZiB0aGUgdGFyZ2V0IChXaW5kb3dzKSBtYWNoaW5lLiBETyBOT1Qgb3V0cHV0IHRoZSBhY3R1YWwgbWF0Y2ggcmVzdWx0LgogICAgICAgIFRyeQogICAgICAgIHsKICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gRmV0Y2hpbmcgT1MgYXJjaGl0ZWN0dXJlLiIKICAgICAgICAgICAgKEdldC1XbWlPYmplY3QgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5PU0FyY2hpdGVjdHVyZSAtbWF0Y2ggJ1xkKycgfCBPdXQtTnVsbAogICAgICAgICAgICBbSW50XSRtYWNoT1M9JG1hdGNoZXNbMF0KICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENvdWxkIG5vdCBkZXRlcm1pbmUgT1MgYXJjaGl0ZWN0dXJlLiIKICAgICAgICAgICAgJGtpbGwrKwogICAgICAgIH0KICAgICAgICAKICAgICAgICAjIElmIHRoZXJlIGhhdmUgYmVlbiBhbnkgaXNzdWVzICh3aGljaCB3b3VsZCBjYXVzZSAka2lsbCAvPSAwKSwgZG9uJ3QgcHJvY2VzcyB0aGUgcmVzdCBvZiB0aGUgUHJvY2VzcyBibG9jay4KICAgICAgICBpZigka2lsbCAtZXEgMCkKICAgICAgICB7CiAgICAgICAgICAgICMgSW1wb3J0IHRoZSBrZXkgYW5kIHNlYXJjaCBmb3IgdGhlIGdyb3VwIGFuZCBPUyBhcmNoaXRlY3R1cmUuIFNhdmUgdGhlIHJlc3VsdCB0byBhIGNvbnRhaW5lci4KICAgICAgICAgICAgVHJ5eyRvcmdMaW5rID0gKEltcG9ydC1Dc3YgIkM6XElJVFNfU2NyaXB0c1xFc2V0S2V5LmNzdiIgfCB3aGVyZXskXy5tYWNoT3JnIC1lcSAkZ3JvdXBOYW1lfSB8IHdoZXJleyRfLm1hY2hPUyAtZXEgJG1hY2hPU30gfCAlIGxpbmspfQogICAgICAgICAgICBDYXRjaHskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFcnJvciB3aGlsZSBpbXBvcnRpbmcgRXNldEtleS5jc3Y6ICQoJEVycm9yWzBdKSJ9CiAgICAgICAgfQogICAgICAgIGVsc2UgeyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIFNraXBwaW5nIHJlbWFpbmluZyBQcm9jZXNzIGJsb2NrLiBLaWxsc3dpdGNoIHRyaWdnZXIgY291bnQgPSAka2lsbCJ9CiAgICAgICAgCiAgICAgICAgIyBPdXRwdXQgdGhlIGNvbnRhaW5lciB3aXRoIHRoZSBFU0VUIGxpbmsuCiAgICAgICAgZWNobyAkb3JnTGluawogICAgfQoKICAgIEVuZAogICAgewogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEVuZCBvZiBsb2cgZm9yIEdldC1Fc2V0TGluay4iCiAgICAgICAgCiAgICAgICAgIyBVcGRhdGUgKG9yIGNyZWF0ZSkgdGhlIGxvZyBmaWxlIGZvciB0aGlzIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRlbnRzIG9mIHRoZSAkbG9ncyBhcnJheS4KICAgICAgICAkTG9nUGF0aCA9ICIkZW52OndpbmRpclxUZW1wXEdldEVzZXRMaW5rX0lJVFMudHh0IgogICAgICAgIGZvcmVhY2goJGxvZyBpbiAkbG9ncyl7IiRsb2ciIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgSW5zdGFsbHMgdGhlIEVTRVQgQWdlbnQuCi5ERVNDUklQVElPTgogICBMb29rcyBmb3IgYSBzcGVjaWZpYyBFU0VUIEFnZW50IGluc3RhbGxlciBpbiBhbiBleHBlY3RlZCBkaXJlY3RvcnkgYW5kIGF0dGVtcHRzIHRvIGV4ZWN1dGUgaXQgc2lsZW50bHkuIERPRVMgTk9UIGNoZWNrIGlmIEVTRVQgQWdlbnQgYWxyZWFkeSBpbnN0YWxsZWQgKHdpbGwgY2F1c2UgcmVwYWlyIG9yIGluLXBsYWNlIHVwZ3JhZGUgaWYgc28pLgojPgpmdW5jdGlvbiBJbnN0YWxsLUVzZXRBZ2VudAp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgpCgogICAgQmVnaW4KICAgIHsKICAgICAgICAjIEluaXRpYWxpemUgdGhlIGxvZ3MgYXJyYXkuCgkgICAgJGxvZ3M9QCgiPT09PT09PT09PT09PT09PT09PSIsIiQoR2V0LURhdGUpIC0gQmVnaW5uaW5nIEluc3RhbGwtRXNldEFnZW50LiIpCgogICAgICAgICMgRVNFVCBBZ2VudCBpbnN0YWxsZXIgcGF0aC4KICAgICAgICAkQWdlbnRQYXRoID0gIkM6XElJVFNfTWdtdFxUZW1wXEVzZXRBZ2VudC5tc2kiCiAgICB9CiAgICAKICAgIFByb2Nlc3MKICAgIHsKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBWZXJpZnlpbmcgRVNFVCBBZ2VudCBpbnN0YWxsZXIgZXhpc3RzLiIKICAgICAgICBpZihUZXN0LVBhdGggJEFnZW50UGF0aCkKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEF0dGVtcHRpbmcgdG8gaW5zdGFsbCBFU0VUIEFnZW50LiIKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1zaWV4ZWMgL2kgJEFnZW50UGF0aCAvcW4gUkVCT09UPSJSZWFsbHlTdXBwcmVzcyIKCiAgICAgICAgICAgICAgICAjIEdpdmUgdGhlIHByb2NlZHVyZSB0aW1lIHRvIGFjdHVhbGx5IGluc3RhbGwuCiAgICAgICAgICAgICAgICBzbGVlcCAzMAoKICAgICAgICAgICAgICAgICMgVmVyaWZ5IGlmIGFnZW50IHdhcyBpbnN0YWxsZWQgb3Igbm90LgogICAgICAgICAgICAgICAgaWYoQ2hlY2stRXNldEFnZW50KXskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFU0VUIEFnZW50IGlzIGluc3RhbGxlZC4ifQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoeyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENvdWxkIG5vdCBpbnN0YWxsIEVTRVQgQWdlbnQuIEVycm9yOiAkKCRlcnJvclswXSkifQogICAgICAgIH0KICAgICAgICBlbHNleyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEV4cGVjdGVkIEVTRVQgQWdlbnQgaW5zdGFsbGVyIGRvZXMgbm90IGV4aXN0LiJ9CiAgICAgICAgCiAgICB9CgogICAgRW5kCiAgICB7CiAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gRW5kIG9mIGxvZyBmb3IgSW5zdGFsbC1Fc2V0QWdlbnQuIgogICAgICAgIAogICAgICAgICMgVXBkYXRlIChvciBjcmVhdGUpIHRoZSBsb2cgZmlsZSBmb3IgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgJGxvZ3MgYXJyYXkuCiAgICAJJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxJbnN0YWxsRXNldEFnZW50X0lJVFMudHh0IgogICAgCWZvcmVhY2goJGxvZyBpbiAkbG9ncykKICAgIAl7IiRsb2ciIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRMb2dQYXRoIC1Gb3JjZSAtQXBwZW5kfQogICAgfQp9Cgo8IwouU3lub3BzaXMKICAgQ2hlY2tzIGlmIEVTRVQgRW5kcG9pbnQgaXMgaW5zdGFsbGVkLCByZXR1cm5zIFRSVUUgaWYgc28uCi5ERVNDUklQVElPTgogICBUZXN0IGlmIHRoZSBFU0VUIEVuZHBvaW50IGV4ZWN1dGFibGUgZXhpc3RzIGluIHRoZSB0eXBpY2FsIGluc3RhbGxhdGlvbiBkaXJlY3RvcnkuIElmIGl0IGV4aXN0cywgcmV0dXJuIFRSVUUsIGVsc2UgRkFMU0UuCi5FWEFNUExFCiAgIENoZWNrLUVzZXRFbmRwb2ludAoKICAgVHJ1ZQouT1VUUFVUUwogICBCb29sZWFuCiM+CmZ1bmN0aW9uIENoZWNrLUVzZXRFbmRwb2ludAp7CiAgICBUZXN0LVBhdGggIiRlbnY6UHJvZ3JhbUZpbGVzXEVTRVRcRVNFVCBFbmRwb2ludCBBbnRpdmlydXNcZWd1aS5leGUiCn0KCjwjCi5TeW5vcHNpcwogICBEb3dubG9hZHMgdGhlIEVTRVQgRW5kcG9pbnQgaW5zdGFsbGVyLgouREVTQ1JJUFRJT04KICAgRG93bmxvYWRzIGEgY2xpZW50LWdlbmVyaWMgYnV0IE9TLXNwZWNpZmljIGluc3RhbGxlciBmb3IgRVNFVCBFbmRwb2ludC4gVGhlIGRvd25sb2FkZWQgZmlsZSBpcyBhbHdheXMgbmFtZWQgRXNldEVuZHBvaW50Lm1zaS4KIz4KZnVuY3Rpb24gRG93bmxvYWQtRXNldEVuZHBvaW50CnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbQogICAgKCkKCiAgICBCZWdpbgogICAgewogICAgICAgICMgSW5pdGlhbGl6ZSB0aGUgbG9ncyBhcnJheS4KCSAgICAkbG9ncz1AKCI9PT09PT09PT09PT09PT09PT09IiwiJChHZXQtRGF0ZSkgLSBCZWdpbm5pbmcgRG93bmxvYWQtRXNldEVuZHBvaW50LiIpCgogICAgICAgICMgRGVjbGFyaW5nIE9TIGFyY2hpdGVjdHVyZSBjb250YWluZXIgaGVyZSBzbyB0aGF0IEkgY2FuIGNoZWNrIGZvciAobGFjayBvZikgY29udGVudCBsYXRlci4KICAgICAgICBbSW50XSRPUyA9ICRudWxsCgogICAgICAgICMgRG93bmxvYWQgbGluayBmb3IgMzItYml0IEVuZHBvaW50CiAgICAgICAgJHVybDMyID0gImh0dHA6Ly93d3cuZHJvcGJveC5jb20vcy82OWxtazh1ZzdibmFneXYvZW5kcG9pbnRfMzIubXNpP2RsPTEiCiAgICAgICAgCiAgICAgICAgIyBEb3dubG9hZCBsaW5rIGZvciAzMi1iaXQgRW5kcG9pbnQKICAgICAgICAkdXJsNjQgPSAiaHR0cDovL3d3dy5kcm9wYm94LmNvbS9zLzEyYXYyMm1sM3E1anhpcy9lbmRwb2ludF82NC5tc2k/ZGw9MSIKCiAgICAgICAgIyBGaWxlIG5hbWUgYW5kIHBhdGggZm9yIGRvd25sb2FkZWQgaW5zdGFsbGVyCiAgICAgICAgJG91dCA9ICJDOlxJSVRTX01nbXRcVGVtcFxFc2V0RW5kcG9pbnQubXNpIgogICAgfQogICAgCiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgIyBHZXQgdGhlIE9TIGFyY2hpdGVjdHVyZSBvZiB0aGUgdGFyZ2V0IChXaW5kb3dzKSBtYWNoaW5lLiBETyBOT1Qgb3V0cHV0IHRoZSBhY3R1YWwgbWF0Y2ggcmVzdWx0LgogICAgICAgIFRyeQogICAgICAgIHsKICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gRmV0Y2hpbmcgT1MgYXJjaGl0ZWN0dXJlLiIKICAgICAgICAgICAgKEdldC1XbWlPYmplY3QgV2luMzJfT3BlcmF0aW5nU3lzdGVtKS5PU0FyY2hpdGVjdHVyZSAtbWF0Y2ggJ1xkKycgfCBPdXQtTnVsbAogICAgICAgICAgICAkT1M9JG1hdGNoZXNbMF0KICAgICAgICB9CiAgICAgICAgQ2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGQgbm90IGRldGVybWluZSBPUyBhcmNoaXRlY3R1cmUuIn0KCiAgICAgICAgIyBEb3dubG9hZCB0aGUgaW5zdGFsbGVyIHRoYXQgbWF0Y2hlcyB0aGUgT1MgYXJjaGl0ZWN0dXJlLgogICAgICAgIGlmKCRPUykKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEF0dGVtcHRpbmcgdG8gZG93bmxvYWQgaW5zdGFsbGVyIHRoYXQgbWF0Y2hlcyBPUyBhcmNoaXRlY3R1cmUuIgogICAgICAgICAgICAKICAgICAgICAgICAgaWYoKCRPUyAtZXEgMzIpIC1vciAoJE9TIC1lcSA4NikpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRyeXt3Z2V0IC11cmkgJHVybDMyIC1vdXRmaWxlICRvdXR9CiAgICAgICAgICAgICAgICBjYXRjaHskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBpbnN0YWxsZXI6ICQoJGVycm9yWzBdKSJ9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCRPUyAtZXEgNjQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRyeXt3Z2V0IC11cmkgJHVybDY0IC1vdXRmaWxlICRvdXR9CiAgICAgICAgICAgICAgICBjYXRjaHskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBpbnN0YWxsZXI6ICQoJGVycm9yWzBdKSJ9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBPUyBhcmNoaXRlY3R1cmUgbWlzcmVhZC4gR2l2ZW4gdmFsdWU6ICRPUyJ9CiAgICAgICAgfQogICAgfQogICAgCiAgICBFbmQKICAgIHsKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFbmQgb2YgbG9nIGZvciBEb3dubG9hZC1Fc2V0QWdlbnQuIgogICAgICAgIAogICAgICAgICMgVXBkYXRlIChvciBjcmVhdGUpIHRoZSBsb2cgZmlsZSBmb3IgdGhpcyBmdW5jdGlvbiB3aXRoIHRoZSBjb250ZW50cyBvZiB0aGUgJGxvZ3MgYXJyYXkuCiAgICAJJExvZ1BhdGggPSAiJGVudjp3aW5kaXJcVGVtcFxEb3dubG9hZEVzZXRFbmRwb2ludF9JSVRTLnR4dCIKICAgIAlmb3JlYWNoKCRsb2cgaW4gJGxvZ3MpeyIkbG9nIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIEluc3RhbGxzIEVTRVQgRW5kcG9pbnQuCi5ERVNDUklQVElPTgogICBMb29rcyBmb3IgYSBzcGVjaWZpYyBFU0VUIEVuZHBvaW50IGluc3RhbGxlciBpbiBhbiBleHBlY3RlZCBkaXJlY3RvcnkgYW5kIGF0dGVtcHRzIHRvIGV4ZWN1dGUgaXQgc2lsZW50bHkuIERPRVMgTk9UIGNoZWNrIGlmIEVTRVQgRW5kcG9pbnQgYWxyZWFkeSBpbnN0YWxsZWQgKHdpbGwgY2F1c2UgcmVwYWlyIG9yIGluLXBsYWNlIHVwZ3JhZGUgaWYgc28pLgojPgpmdW5jdGlvbiBJbnN0YWxsLUVzZXRFbmRwb2ludAp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0KICAgICgpCgogICAgQmVnaW4KICAgIHsKICAgICAgICAjIEluaXRpYWxpemUgdGhlIGxvZ3MgYXJyYXkuCgkgICAgJGxvZ3M9QCgiPT09PT09PT09PT09PT09PT09PSIsIiQoR2V0LURhdGUpIC0gQmVnaW5uaW5nIEluc3RhbGwtRXNldEVuZHBvaW50LiIpCgogICAgICAgICMgRVNFVCBFbmRwb2ludCBpbnN0YWxsZXIgcGF0aC4KICAgICAgICAkRW5kcG9pbnRQYXRoID0gIkM6XElJVFNfTWdtdFxUZW1wXEVzZXRFbmRwb2ludC5tc2kiCiAgICB9CiAgICAKICAgIFByb2Nlc3MKICAgIHsKICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBWZXJpZnlpbmcgRVNFVCBFbmRwb2ludCBpbnN0YWxsZXIgZXhpc3RzLiIKICAgICAgICBpZighKFRlc3QtUGF0aCAkRW5kcG9pbnRQYXRoKSkKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIERvd25sb2FkaW5nIEVTRVQgRW5kcG9pbnQgaW5zdGFsbGVyLiIKICAgICAgICAgICAgdHJ5e0Rvd25sb2FkLUVzZXRFbmRwb2ludH0KICAgICAgICAgICAgY2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGFuIGVycm9yIGRvd25sb2FkaW5nIHRoZSBpbnN0YWxsZXI6ICQoJGVycm9yWzBdKSJ9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKFRlc3QtUGF0aCAkRW5kcG9pbnRQYXRoKQogICAgICAgIHsKICAgICAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQXR0ZW1wdGluZyB0byBpbnN0YWxsIEVTRVQgRW5kcG9pbnQuIgogICAgICAgICAgICB0cnkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgbXNpZXhlYyAvaSAkRW5kcG9pbnRQYXRoIC9xbiBSRUJPT1Q9IlJlYWxseVN1cHByZXNzIgoKICAgICAgICAgICAgICAgICMgR2l2ZSB0aGUgcHJvY2VkdXJlIHRpbWUgdG8gYWN0dWFsbHkgaW5zdGFsbC4KICAgICAgICAgICAgICAgIHNsZWVwIDMwCgogICAgICAgICAgICAgICAgIyBWZXJpZnkgaWYgRW5kcG9pbnQgd2FzIGluc3RhbGxlZCBvciBub3QuCiAgICAgICAgICAgICAgICBpZihDaGVjay1Fc2V0RW5kcG9pbnQpeyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEVTRVQgRW5kcG9pbnQgaXMgaW5zdGFsbGVkLiJ9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGQgbm90IGluc3RhbGwgRVNFVCBFbmRwb2ludC4gRXJyb3I6ICQoJGVycm9yWzBdKSJ9CiAgICAgICAgfQogICAgfQoKICAgIEVuZAogICAgewogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEVuZCBvZiBsb2cgZm9yIEluc3RhbGwtRXNldEVuZHBvaW50LiIKICAgICAgICAKICAgICAgICAkTG9nUGF0aCA9ICIkZW52OndpbmRpclxUZW1wXEluc3RhbGxFc2V0RW5kcG9pbnRfSUlUUy50eHQiCiAgICAJZm9yZWFjaCgkbG9nIGluICRsb2dzKQogICAgCXsiJGxvZyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmR9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBDaGVja3MgaWYgRVNFVCBGaWxlIFNlY3VyaXR5IGlzIGluc3RhbGxlZCwgcmV0dXJucyBUUlVFIGlmIHNvLgouREVTQ1JJUFRJT04KICAgVGVzdCBpZiB0aGUgRVNFVCBGaWxlIFNlY3VyaXR5IGV4ZWN1dGFibGUgZXhpc3RzIGluIHRoZSB0eXBpY2FsIGluc3RhbGxhdGlvbiBkaXJlY3RvcnkuIElmIGl0IGV4aXN0cywgcmV0dXJuIFRSVUUsIGVsc2UgRkFMU0UuCi5FWEFNUExFCiAgIENoZWNrLUVzZXRGUwoKICAgVHJ1ZQouT1VUUFVUUwogICBCb29sZWFuCiM+CmZ1bmN0aW9uIENoZWNrLUVzZXRGUwp7CiAgICBUZXN0LVBhdGggIiRlbnY6UHJvZ3JhbUZpbGVzXEVTRVRcRVNFVCBGaWxlIFNlY3VyaXR5XGVndWkuZXhlIgp9Cgo8IwouU3lub3BzaXMKICAgRG93bmxvYWRzIHRoZSBFU0VUIEZpbGUgU2VjdXJpdHkgaW5zdGFsbGVyLgouREVTQ1JJUFRJT04KICAgRG93bmxvYWRzIGEgY2xpZW50LWdlbmVyaWMgYnV0IE9TLXNwZWNpZmljIGluc3RhbGxlciBmb3IgRVNFVCBGaWxlIFNlY3VyaXR5LiBUaGUgZG93bmxvYWRlZCBmaWxlIGlzIGFsd2F5cyBuYW1lZCBFc2V0RlMubXNpLgojPgpmdW5jdGlvbiBEb3dubG9hZC1Fc2V0RlMKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFBhcmFtCiAgICAoKQoKICAgIEJlZ2luCiAgICB7CiAgICAgICAgIyBJbml0aWFsaXplIHRoZSBsb2dzIGFycmF5LgoJICAgICRsb2dzPUAoIj09PT09PT09PT09PT09PT09PT0iLCIkKEdldC1EYXRlKSAtIEJlZ2lubmluZyBEb3dubG9hZC1Fc2V0RlMuIikKCiAgICAgICAgIyBEZWNsYXJpbmcgT1MgYXJjaGl0ZWN0dXJlIGNvbnRhaW5lciBoZXJlIHNvIHRoYXQgSSBjYW4gY2hlY2sgZm9yIChsYWNrIG9mKSBjb250ZW50IGxhdGVyLgogICAgICAgIFtJbnRdJE9TID0gJG51bGwKCiAgICAgICAgIyBEb3dubG9hZCBsaW5rIGZvciAzMi1iaXQgRmlsZSBTZWN1cml0eQogICAgICAgICR1cmwzMiA9ICJodHRwOi8vd3d3LmRyb3Bib3guY29tL3MvdHZiYmpyMTNrNmZoNWo2L2ZpbGUtc2VjdXJpdHlfMzIubXNpP2RsPTEiCiAgICAgICAgCiAgICAgICAgIyBEb3dubG9hZCBsaW5rIGZvciAzMi1iaXQgRmlsZSBTZWN1cml0eQogICAgICAgICR1cmw2NCA9ICJodHRwOi8vd3d3LmRyb3Bib3guY29tL3MveXI3ZTVyNjZoZGpnZHVxL2ZpbGUtc2VjdXJpdHlfNjQubXNpP2RsPTEiCgogICAgICAgICMgRmlsZSBuYW1lIGFuZCBwYXRoIGZvciBkb3dubG9hZGVkIGluc3RhbGxlcgogICAgICAgICRvdXQgPSAiQzpcSUlUU19NZ210XFRlbXBcRXNldEZTLm1zaSIKICAgIH0KICAgIAogICAgUHJvY2VzcwogICAgewogICAgICAgICMgR2V0IHRoZSBPUyBhcmNoaXRlY3R1cmUgb2YgdGhlIHRhcmdldCAoV2luZG93cykgbWFjaGluZS4gRE8gTk9UIG91dHB1dCB0aGUgYWN0dWFsIG1hdGNoIHJlc3VsdC4KICAgICAgICBUcnkKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIEZldGNoaW5nIE9TIGFyY2hpdGVjdHVyZS4iCiAgICAgICAgICAgIChHZXQtV21pT2JqZWN0IFdpbjMyX09wZXJhdGluZ1N5c3RlbSkuT1NBcmNoaXRlY3R1cmUgLW1hdGNoICdcZCsnIHwgT3V0LU51bGwKICAgICAgICAgICAgJE9TPSRtYXRjaGVzWzBdCiAgICAgICAgfQogICAgICAgIENhdGNoeyRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENvdWxkIG5vdCBkZXRlcm1pbmUgT1MgYXJjaGl0ZWN0dXJlLiJ9CgogICAgICAgICMgRG93bmxvYWQgdGhlIGluc3RhbGxlciB0aGF0IG1hdGNoZXMgdGhlIE9TIGFyY2hpdGVjdHVyZS4KICAgICAgICBpZigkT1MpCiAgICAgICAgewogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBBdHRlbXB0aW5nIHRvIGRvd25sb2FkIGluc3RhbGxlciB0aGF0IG1hdGNoZXMgT1MgYXJjaGl0ZWN0dXJlLiIKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCgkT1MgLWVxIDMyKSAtb3IgKCRPUyAtZXEgODYpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0cnl7d2dldCAtdXJpICR1cmwzMiAtb3V0ZmlsZSAkb3V0fQogICAgICAgICAgICAgICAgY2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgaW5zdGFsbGVyOiAkKCRlcnJvclswXSkifQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZigkT1MgLWVxIDY0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0cnl7d2dldCAtdXJpICR1cmw2NCAtb3V0ZmlsZSAkb3V0fQogICAgICAgICAgICAgICAgY2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gVGhlcmUgd2FzIGEgcHJvYmxlbSBkb3dubG9hZGluZyB0aGUgaW5zdGFsbGVyOiAkKCRlcnJvclswXSkifQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2V7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gT1MgYXJjaGl0ZWN0dXJlIG1pc3JlYWQuIEdpdmVuIHZhbHVlOiAkT1MifQogICAgICAgIH0KICAgIH0KICAgIAogICAgRW5kCiAgICB7CiAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gRW5kIG9mIGxvZyBmb3IgRG93bmxvYWQtRXNldEZTLiIKICAgICAgICAKICAgICAgICAjIFVwZGF0ZSAob3IgY3JlYXRlKSB0aGUgbG9nIGZpbGUgZm9yIHRoaXMgZnVuY3Rpb24gd2l0aCB0aGUgY29udGVudHMgb2YgdGhlICRsb2dzIGFycmF5LgogICAgCSRMb2dQYXRoID0gIiRlbnY6d2luZGlyXFRlbXBcRG93bmxvYWRFc2V0RlNfSUlUUy50eHQiCiAgICAJZm9yZWFjaCgkbG9nIGluICRsb2dzKXsiJGxvZyIgfCBPdXQtRmlsZSAtRmlsZVBhdGggJExvZ1BhdGggLUZvcmNlIC1BcHBlbmR9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBJbnN0YWxscyB0aGUgRVNFVCBGaWxlIFNlY3VyaXR5LgouREVTQ1JJUFRJT04KICAgTG9va3MgZm9yIGEgc3BlY2lmaWMgRVNFVCBGaWxlIFNlY3VyaXR5IGluc3RhbGxlciBpbiBhbiBleHBlY3RlZCBkaXJlY3RvcnkgYW5kIGF0dGVtcHRzIHRvIGV4ZWN1dGUgaXQgc2lsZW50bHkuIERPRVMgTk9UIGNoZWNrIGlmIEVTRVQgRmlsZSBTZWN1cml0eSBhbHJlYWR5IGluc3RhbGxlZCAod2lsbCBjYXVzZSByZXBhaXIgb3IgaW4tcGxhY2UgdXBncmFkZSBpZiBzbykuCiM+CmZ1bmN0aW9uIEluc3RhbGwtRXNldEZTCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbQogICAgKCkKCiAgICBCZWdpbgogICAgewogICAgICAgICMgSW5pdGlhbGl6ZSB0aGUgbG9ncyBhcnJheS4KCSAgICAkbG9ncz1AKCI9PT09PT09PT09PT09PT09PT09IiwiJChHZXQtRGF0ZSkgLSBCZWdpbm5pbmcgSW5zdGFsbC1Fc2V0RlMuIikKCiAgICAgICAgIyBFU0VUIEZpbGUgU2VjdXJpdHkgaW5zdGFsbGVyIHBhdGguCiAgICAgICAgJEZTUGF0aCA9ICJDOlxJSVRTX01nbXRcVGVtcFxFc2V0RlMubXNpIgoKICAgICAgICAjIEtpbGxzd2l0Y2gKICAgICAgICAka2lsbCA9IDAKICAgIH0KICAgIAogICAgUHJvY2VzcwogICAgewogICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIENoZWNraW5nIGZvciB0aGUgaW5zdGFsbGVyLiIKICAgICAgICBpZighKFRlc3QtUGF0aCAkRlNQYXRoKSkKICAgICAgICB7CiAgICAgICAgICAgICRsb2dzICs9ICIkKEdldC1EYXRlKSAtIERvd25sb2FkaW5nIHRoZSBpbnN0YWxsZXIuIgogICAgICAgICAgICB0cnl7RG93bmxvYWQtRXNldEZTfQogICAgICAgICAgICBjYXRjaAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBUaGVyZSB3YXMgYSBwcm9ibGVtIGRvd25sb2FkaW5nIHRoZSBpbnN0YWxsZXI6ICQoJGVycm9yWzBdKSIKICAgICAgICAgICAgICAgICRraWxsKysKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZigka2lsbCAtZXEgMCkKICAgICAgICB7ICAgIAogICAgICAgICAgICAkbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBBdHRlbXB0aW5nIHRvIGluc3RhbGwgRVNFVCBGaWxlIFNlY3VyaXR5LiIKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIG1zaWV4ZWMgL2kgJEZTUGF0aCAvcW4gUkVCT09UPSJSZWFsbHlTdXBwcmVzcyIKCiAgICAgICAgICAgICAgICAjIEdpdmUgdGhlIHByb2NlZHVyZSB0aW1lIHRvIGFjdHVhbGx5IGluc3RhbGwuCiAgICAgICAgICAgICAgICBzbGVlcCAzMAoKICAgICAgICAgICAgICAgICMgVmVyaWZ5IGlmIEZTIHdhcyBpbnN0YWxsZWQgb3Igbm90LgogICAgICAgICAgICAgICAgaWYoQ2hlY2stRXNldEZTKXskbG9ncyArPSAiJChHZXQtRGF0ZSkgLSBFU0VUIEZpbGUgU2VjdXJpdHkgaXMgaW5zdGFsbGVkLiJ9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2h7JGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gQ291bGQgbm90IGluc3RhbGwgRVNFVCBGaWxlIFNlY3VyaXR5LiBFcnJvcjogJCgkZXJyb3JbMF0pIn0KICAgICAgICB9CiAgICAgICAgCiAgICB9CgogICAgRW5kCiAgICB7CiAgICAgICAgJGxvZ3MgKz0gIiQoR2V0LURhdGUpIC0gRW5kIG9mIGxvZyBmb3IgSW5zdGFsbC1Fc2V0RlMuIgogICAgICAgIAogICAgICAgICRMb2dQYXRoID0gIiRlbnY6d2luZGlyXFRlbXBcSW5zdGFsbEVzZXRGU19JSVRTLnR4dCIKICAgIAlmb3JlYWNoKCRsb2cgaW4gJGxvZ3MpCiAgICAJeyIkbG9nIiB8IE91dC1GaWxlIC1GaWxlUGF0aCAkTG9nUGF0aCAtRm9yY2UgLUFwcGVuZH0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIERldGVybWluZXMgaWYgV2luZG93cyBtYWNoaW5lIGlzIHNlcnZlciBvciB3b3Jrc3RhdGlvbi4gUmV0dXJucyAic2VydmVyIiwgIndvcmtzdGF0aW9uIiwgb3IgImNhbm5vdCBkZXRlcm1pbmUiLgouREVTQ1JJUFRJT04KICAgTG9va3MgdXAgdGhlIGhvc3QgbWFjaGluZSdzIE9TIGFuZCBjaGVja3MgaXQgYWdhaW5zdCBhIGxpc3Qgb2Yga25vd24gT1Nlcy4gUmVjb2duaXplZCBXaW5kb3dzIE9TZXMgd2lsbCByZXR1cm4gInNlcnZlciIgb3IgIndvcmtzdGF0aW9uIjsgYW55dGhpbmcgZWxzZSAoaW5jbHVkaW5nIHVucmVjb2duaXplZCBXaW5kb3dzIE9TZXMpIHdpbGwgcmV0dXJuICJjYW5ub3QgZGV0ZXJtaW5lIi4KLkVYQU1QTEUKICAgRXhlY3V0ZWQgb24gV2luZG93cyBTZXJ2ZXIgMjAxMiBSMjoKICAgIENoZWNrLU1hY2hpbmVSb2xlCgogICAgc2VydmVyCi5FWEFNUExFCiAgIEV4ZWN1dGVkIG9uIFdpbmRvd3MgMTA6CiAgICBDaGVjay1NYWNoaW5lUm9sZQoKICAgIHdvcmtzdGF0aW9uCi5FWEFNUExFCiAgIEV4ZWN1dGVkIG9uIGEgTWFjOgogICAgQ2hlY2stTWFjaGluZVJvbGUKCiAgICBjYW5ub3QgZGV0ZXJtaW5lCi5PVVRQVVRTCiAgIHN0cmluZyAoInNlcnZlciIsIndvcmtzdGF0aW9uIiwgb3IgImNhbm5vdCBkZXRlcm1pbmUiKQouRlVOQ1RJT05BTElUWQogICBQcmltYXJpbHkgdXNlZCBhcyBhIGhlbHBlciBmdW5jdGlvbiB3aGVuIHRoZXJlIGlzIGEgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGJldHdlZW4gYSBzZXJ2ZXIgYW5kIGEgd29ya3N0YXRpb24gaG9zdCB3aXRob3V0IGZvcmVrbm93bGVkZ2UsIAogICBzdWNoIGFzIHJ1bm5pbmcgb25lIG9mIHR3byBpbnN0YWxsZXJzIChzZXJ2ZXIgb3Igd29ya3N0YXRpb24gdmVyc2lvbikgd2l0aG91dCBoYXZpbmcgZGlyZWN0IGFjY2VzcyB0byBvciBrbm93bGVkZ2Ugb2YgZWl0aGVyLgojPgpmdW5jdGlvbiBDaGVjay1NYWNoaW5lUm9sZQp7CiAgICBbQWxpYXMoImNtciIsIkdldC1Sb2xlIildCiAgICBbT3V0cHV0VHlwZShbU3RyaW5nXSldCiAgICBQYXJhbQogICAgKCkKCiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgIyBHZXQgdGhlIE9TIHByb3BlciBuYW1lLgogICAgICAgICRvcyA9IChnd21pIC1DbGFzcyBXaW4zMl9PcGVyYXRpbmdTeXN0ZW0pLkNhcHRpb24KCiAgICAgICAgaWYoJG9zIC1tYXRjaCAiV2luZG93cyIpCiAgICAgICAgewogICAgICAgICAgICBpZigkb3MgLW1hdGNoICJTZXJ2ZXIiKXtlY2hvICJzZXJ2ZXIifQogICAgICAgICAgICBlbHNle2VjaG8gIndvcmtzdGF0aW9uIn0KICAgICAgICB9CiAgICAgICAgZWxzZXtlY2hvICJjYW5ub3QgZGV0ZXJtaW5lIn0KICAgIH0KfQoKPCMKLlN5bm9wc2lzCiAgIENoZWNrcyBpZiBrbm93biBhbnRpdmlydXMgcHJvZ3JhbXMgYXJlIGN1cnJlbnRseSBpbnN0YWxsZWQgb24gaG9zdCBtYWNoaW5lLiBSZXR1cm5zIGFueSBmb3VuZCBhbmQgdGhlaXIgdW5pbnN0YWxsIHN0cmluZywgZWxzZSAibm9uZSBmb3VuZCIuCi5ERVNDUklQVElPTgogICBDaGVja3MgZm9yIHRoZSBleGlzdGVuY2Ugb2YgdmFyaW91cyBrbm93biBBVnMgaW4gaG9zdCBtYWNoaW5lJ3MgQWRkL1JlbW92ZS4gSWYgaXQgZGV0ZWN0cyBhbnksIHJldHVybnMgYSB0YWJsZSBvZiBwcm9kdWN0cyBhbmQgcmVsYXRlZCB1bmluc3RhbGwgc3RyaW5ncy4gT3RoZXJ3aXNlLCBpdCByZXR1cm5zICJub25lIGZvdW5kIi4KLkVYQU1QTEUKICAgQ29tcHV0ZXIgd2l0aCBubyBBVjoKICAgQ2hlY2stSW5zdGFsbGVkQVYKCiAgIG5vbmUgZm91bmQKLkVYQU1QTEUKICAgQ29tcHV0ZXIgd2l0aCBBVkc6CiAgIENoZWNrLUluc3RhbGxlZEFWCgogICBBVkcgQW50aXZpcnVzCi5FWEFNUExFCiAgIENvbXB1dGVyIHdpdGggQVZHICphbmQqIEVTRVQ6CiAgIENoZWNrLUluc3RhbGxlZEF2CgogICBBVkcKICAgRVNFVCBFbmRwb2ludCBBbnRpdmlydXMKIz4KZnVuY3Rpb24gQ2hlY2stSW5zdGFsbGVkQXYKewogICAgW0FsaWFzKCJDaGVjay1BViIpXQogICAgW091dHB1dFR5cGUoW3N0cmluZ10pXQogICAgUGFyYW0KICAgICgpCgogICAgQmVnaW4KICAgIHsKICAgICAgICAjIEluaXRpYWxpemUgdGhlICRhdnMgY29udGFpbmVyLgogICAgICAgIFtzdHJpbmddJGF2cyA9ICRudWxsCgogICAgICAgICMgTGlzdCBvZiBrbm93biBBViBwcm9kdWN0cy4KICAgICAgICAkS25vd25BViA9IEAoIkF2YXN0IiwiQVZHIiwiRVNFVCBFbmRwb2ludCIsIkVTRVQgRmlsZSBTZWN1cml0eSIsIkthc3BlcnNreSIsIk5vcnRvbiIsIlN5bWFudGVjIikKICAgIH0KCiAgICBQcm9jZXNzCiAgICB7CiAgICAgICAgIyBHbyB0aHJvdWdoIHRoZSBsb2NhbCBtYWNoaW5lJ3MgQWRkL1JlbW92ZSBsaXN0IGFuZCBjaGVjayBmb3IgYW55dGhpbmcgd2l0aCB0aGV5IGtleXdvcmRzIGdpdmVuIGluICRLbm93bkFWcy4gQWRkIGFueSBmb3VuZCB0byAkYXZzLgogICAgICAgIGZvcmVhY2goJGl0ZW0gaW4gJEtub3duQVYpCiAgICAgICAgewogICAgICAgICAgICAkYXZzICs9IEdldC1JbnN0YWxsZWRQcm9ncmFtcyB8IHdoZXJleygkXy5kaXNwbGF5X25hbWUgLW1hdGNoICRpdGVtKX0KICAgICAgICB9CiAgICB9CgogICAgRW5kCiAgICB7CiAgICAgICAgaWYoJGF2cyl7ZWNobyAkYXZzfQogICAgICAgIGVsc2V7ZWNobyAibm9uZSBmb3VuZCJ9CiAgICB9Cn0KCjwjCi5TeW5vcHNpcwogICBUaGlzIHNjcmlwdCBjcmVhdGVzIGEgdHh0IGZpbGUgd2l0aCB0aGUgbmFtZXMgb2YgdGhlIHVzZXJzIGFuZCB0aGVpciBQYXNzd29yZCBhZ2UuIFRoZSBzY3JpcHQgYWxzbyBjcmVhdGVzIGFub3RoZXIgdHh0IGZpbGUgd2hlcmUgdGhlIHVzZXJzIHN0YXR1cyBpcyBlaXRoZXIgRGlzYWJsZWQgb3IgcGFzc3dvcmQgd2FzIG5ldmVyIHNldAouREVTQ1JJUFRJT04KICAgVGhlIHNjcmlwdCBmaW5kcyB0aGUgYWdlIG9mIHRoZSBwYXNzd29yZCBmb3IgYWxsIHRoZSB1c2VycyB3aGljaCBhcmUgZW5hYmxlZCBhbmQgZm9yIHdoaWNoIHRoZSBwYXNzd29yZCB3YXMgc2V0IGF0bGVhc3Qgb25jZS4gdXNlciBuZWVkcyB0byBlbnRlciB0aGUgbnVtYmVyIG9mIGRheXMgdGhhdCBoZSB3YW50cyB0aGUgbGFzdCBwYXNzd29yZCBzZXQgZGF0ZSB0byBiZSBvbGRlciB0aGFuLiBPdXRwdXQgd2lsbCBiZSBzZW50IHRvIHR4dCBmaWxlcy4KLkVYQU1QTEUKICAgR2V0LUFEVXNlclBhZ2UgLTkwICh3aGVyZSA5MCBpcyB0aGUgbnVtYmVyIG9mIGRheXMgdGhhdCB3ZSB3YW50IHRoZSBsYXN0cGFzc3dvcmRzZXQgdG8gYmUgb2xkZXIgdGhhbikKLk9VVFBVVAogICAgT3V0cHV0IGlzIHNlbnQgYXQgMiBwbGFjZXMKICAgIEM6XElJVFNfTWdtdFxUZW1wXGxpc3RQLnR4dCB3aWxsIGJlIHRoZSBsaXN0IG9mIHVzZXJzIGZvciB3aGljaCB0aGUgcGFzc3dvcmQgd2FzIG5ldmVyIHNldCBBTkQgdGhlIHVzZXJzIHdoaWNoIGFyZSBEaXNhYmxlZCBhdCB0aGlzIHRpbWUKICAgIEM6XElJVFNfTWdtdFxUZW1wXHBhc3N3b3JkYWdlLnR4dCB3aWxsIGJlIHRoZSBsaXN0IG9mIGN1cnJlbnQgdXNlcnMgdGhlIHBhc3N3b3JkIGZvciB3aGljaCB3YXMgbGFzdCBzZXQgbW9yZSB0aGFuIHRoZSBkYXlzIHlvdSBzcGVjaWZpZWQuCiAgCiM+CgoKZnVuY3Rpb24gR2V0LUFEVXNlclBhZ2UgewpbY21kbGV0QmluZGluZygpXQpQYXJhbQooCiAgICAjIFVzZXJzIHdobyBoYXZlIHRoZSBwYXNzd29yZHMgZ3JlYXRlciB0aGFuIHRoaXMgbnVtYmVyIG9mIGRheXMKICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWU9JHRydWUpXQogICAgJG51bWRheXMKKQokbGlzdFAgPSAiQzpcSUlUU19NZ210XFRlbXBcbGlzdFAudHh0IgokdGVzdHBhdGggPSBUZXN0LVBhdGggJGxpc3RQCiR0eHRwYXNzID0gIkM6XElJVFNfTWdtdFxUZW1wXHBhc3N3b3JkYWdlLnR4dCIKJHRlc3RwYXRoUCA9IFRlc3QtUGF0aCAkdHh0cGFzcwogICAgaWYoJHRlc3RwYXRoIC1lcSAkdHJ1ZSl7CiAgICAgICAgaWYoJHRlc3RwYXRoUCAtZXEgJHRydWUpewogICAgICAgIFJlbW92ZS1JdGVtICR0eHRwYXNzCiAgICAgICAgUmVtb3ZlLUl0ZW0gJGxpc3RQCiAgICAgICAgTmV3LUl0ZW0gLVBhdGggQzpcSUlUU19NZ210XFRlbXBcbGlzdFAudHh0IC1JdGVtVHlwZSAiZmlsZSIKICAgICAgICBOZXctSXRlbSAtUGF0aCBDOlxJSVRTX01nbXRcVGVtcFxwYXNzd29yZGFnZS50eHQgLUl0ZW1UeXBlICJmaWxlIgogICAgICAgIH0KICAgICAgICBlbHNlewogICAgICAgICAgICBOZXctSXRlbSAtUGF0aCBDOlxJSVRTX01nbXRcVGVtcFxsaXN0UC50eHQgLUl0ZW1UeXBlICJmaWxlIgogICAgICAgICAgICBOZXctSXRlbSAtUGF0aCBDOlxJSVRTX01nbXRcVGVtcFxwYXNzd29yZGFnZS50eHQgLUl0ZW1UeXBlICJmaWxlIgogICAgICAgIH0KICAgIH0KICAgIGVsc2V7CiAgICAgICBOZXctSXRlbSAtUGF0aCBDOlxJSVRTX01nbXRcVGVtcFxsaXN0UC50eHQgLUl0ZW1UeXBlICJmaWxlIgogICAgfQpJbXBvcnQtTW9kdWxlIEFjdGl2ZURpcmVjdG9yeQokcGRjRW0gPSAoZ2V0LWFkZG9tYWluY29udHJvbGxlciAtZGlzY292ZXIgLXNlcnZpY2UgUHJpbWFyeURDKS5OYW1lCiRob3N0TSA9IChHZXQtV21pT2JqZWN0IHdpbjMyX2NvbXB1dGVyc3lzdGVtKS5uYW1lCiRkYXRlID0gR2V0LURhdGUKaWYoJHBkY0VtIC1lcSAkaG9zdE0pIHsKICAgICR1c2VyID0gR2V0LUFEVXNlciAtZmlsdGVyICogLVByb3BlcnRpZXMgKgogICAgZm9yZWFjaCgkdSBpbiAkdXNlcil7CiAgICAgICAgaWYoJHUuUGFzc3dvcmRMYXN0U2V0IC1lcSAkbnVsbCkgewogICAgICAgICAgICAkdXNlck4gPSAkdS5OYW1lCiAgICAgICAgICAgIEFkZC1Db250ZW50ICRsaXN0UCAiVGhlIFBhc3N3b3JkTGFzdFNldCB2YWx1ZSBmb3IgJHVzZXJOIGhhcyBhIE51bGwgdmFsdWUiICAgICAKICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAkZGF0ZW9mUCA9ICR1LlBhc3N3b3JkTGFzdFNldAogICAgICAgICRhZ2UgPSAoJGRhdGUgLSAkZGF0ZW9mUCkuRGF5cwogICAgICAgICRlbmFibGUgPSAkdS5FbmFibGVkCiAgICAgICAgaWYoJGVuYWJsZSAtZXEgJHRydWUpewogICAgICAgICAgICBpZigkYWdlIC1ndCAkbnVtZGF5cykgewogICAgICAgICAgICAkdSB8IFNlbGVjdC1PYmplY3QgQHtOYW1lPSJVc2VyIjtFeHByZXNzaW9uID0geyRfLk5hbWV9fSxAe05hbWU9IlBhc3N3b3JkTGFzdFNldCI7RXhwcmVzc2lvbj17JF8uUGFzc3dvcmRMYXN0U2V0fX0sQHtOYW1lPSJQYXNzd29yZE5ldmVyRXhwaXJlcyI7RXhwcmVzc2lvbj17JF8uUGFzc3dvcmROZXZlckV4cGlyZXN9fSxAe05hbWU9IkFnZUFzb2ZUb2RheSI7RXhwcmVzc2lvbj17JGFnZX19IHwgT3V0LUZpbGUgLUFwcGVuZCBDOlxJSVRTX01nbXRcVGVtcFxQYXNzd29yZGFnZS50eHQKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgJHVzZXJOID0gJHUuTmFtZQogICAgICAgICAgICBBZGQtQ29udGVudCAkbGlzdFAgIlRoZSAkdXNlck4gUEFTU1dPUkQgaXMgbGVzcyB0aGFuICRudW1kYXlzIG9sZC4iCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZXsKICAgICAgICAkdXNlciA9ICR1Lk5hbWUKICAgICAgICBBZGQtQ29udGVudCAkbGlzdFAgIlRoZSBhY2NvdW50IGZvciAkdXNlciBpcyBEaXNhYmxlZCIKICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CmVsc2UgewogICAgQWRkLUNvbnRlbnQgJGxpc3RQICJPbiAkZGF0ZSB0aGUgY29tbWFuZCBBRFVzZXJQYWdlIHdhcyBydW4gb24gJGhvc3RNIG1hY2hpbmUgd2hpY2ggaXMgTk9UIGEgUERDRW11bGF0b3IiCn0KfQoKPCMKLlN5bm9wc2lzCiAgIERlbGV0ZXMgYWxsIEVTRVQgaW5zdGFsbGF0aW9uIGZpbGVzIGZyb20gdGhlIEthc2V5YSB3b3JraW5nIGZvbGRlci4KLkRFU0NSSVBUSU9OCiAgIEZpbmRzIGFsbCBmaWxlcyBpbiBDOlxJSVRTX01nbXRcVGVtcCB0aGF0IG1hdGNoIHRoZSBmb3JtYXQgKGNhc2UtaW5zZW5zaXRpdmUpICJFU0VUKi5tc2kiIGFuZCBkZWxldGVzIHRoZW0uCiM+CmZ1bmN0aW9uIERlbGV0ZS1Fc2V0SW5zdGFsbGVycwp7CiAgICBQYXJhbSgpCgogICAgQmVnaW4KICAgIHsKICAgICAgICAjIEthc2V5YSBhZ2VudCB3b3JraW5nIGZvbGRlci4KICAgICAgICAkd29ya2luZyA9ICJDOlxJSVRTX01nbXRcVGVtcCIKCiAgICAgICAgIyBBbGwgZmlsZXMgaW4gJHdvcmtpbmcuCiAgICAgICAgJGZpbGVzID0gZ2NpICR3b3JraW5nCiAgICB9CgogICAgUHJvY2VzcwogICAgewogICAgICAgIGZvcmVhY2goJGZpbGUgaW4gJGZpbGVzKQogICAgICAgIHsKICAgICAgICAgICAgaWYoJGZpbGUuTmFtZSAtbWF0Y2ggJ0VTRVQuKlwubXNpJykKICAgICAgICAgICAge1JlbW92ZS1JdGVtICIkd29ya2luZ1wkKCRmaWxlLm5hbWUpIn0KICAgICAgICB9CiAgICB9Cn0=
