Configure-BackupPolicyAzure.ps1,279d5e26108bed0f27ee93727247b526,Scan result is 1. IsMalware: 0,PCMKICAgIC5TWU5PUFNJUwogICAgU2NyaXB0IHRvIENvbmZpZ3VyZSBCYWNrdXAgUG9saWN5IG9uIEF6dXJlIEJhY2t1cCBTZXJ2ZXIgCgogICAgLkRFU0NSSVBUSU9OCiAgICBTY3JpcHQgdG8gY3JlYXRlIE5ldyBiYWNrdXAgdmF1bHQgaW4gQXp1cmUgUmVzb3VyY2UgTWFuYWdlciBQb3J0YWwKCiAgICAuUEFSQU1FVEVSIENsaWVudElECgogICAgQ2xpZW50IElEIHRvIGJlIHVzZWQgZm9yIHRoaXMgc2NyaXB0LgoKICAgIC5QQVJBTUVURVIgQXp1cmVVc2VyTmFtZQoKICAgIFVzZXIgbmFtZSBmb3IgQXp1cmUgbG9naW4uIFRoaXMgc2hvdWxkIGJlIGFuIE9yZ2FuaXphdGlvbmFsIGFjY291bnQgKG5vdCBIb3RtYWlsL091dGxvb2sgYWNjb3VudCkKCiAgICAuUEFSQU1FVEVSIEF6dXJlUGFzc3dvcmQKCiAgICBQYXNzd29yZCBmb3IgQXp1cmUgdXNlciBhY2NvdW50LgoKICAgIC5QQVJBTUVURVIgQXp1cmVTdWJzY3JpcHRpb25JRAoKICAgIEF6dXJlIFN1YnNjcmlwdGlvbiBJRCB0byB1c2UgZm9yIHRoaXMgYWN0aXZpdHkuCgogICAgLlBBUkFNRVRFUiBSZXNvdXJjZUdyb3VwTmFtZQoKICAgIE5hbWUgb2YgdGhlIFJlc291cmNlIEdyb3VwIG5hbWUgdG8gYmUgdXNlZCBmb3IgdGhpcyBjb21tYW5kLgoKICAgIC5QQVJBTUVURVIgTG9jYXRpb24KCiAgICBBenVyZSBMb2NhdGlvbiB0byB1c2UgZm9yIGNyZWF0aW5nL3NhdmluZy9hY2Nlc3NpbmcgcmVzb3VyY2VzIChzaG91bGQgYmUgYSB2YWxpZCBsb2NhdGlvbi4gUmVmZXIgdG8gaHR0cHM6Ly9henVyZS5taWNyb3NvZnQuY29tL2VuLXVzL3JlZ2lvbnMvIGZvciBtb3JlIGRldGFpbHMuKQoKICAgIC5QQVJBTUVURVIgVk1OYW1lCgogICAgQXp1cmUgdmlydHVhbCBNYWNoaW5lIHdoaWNoIGhhcyB0aGUgYmFja3VwIGFnZW50IGFuZCBiYWNrdXBwb2xpY3kgd2lsbCBiZSBjb25maWd1cmVkLgoKICAgIC5QQVJBTUVURVIgRGF5c09mV2VlawogICAgU3BlY2lmeSB0aGUgV2Vla2RheXMgb24gd2hpY2ggeW91IHdhbnQgdG8gcGVyZm9ybSBiYWNrdXAuIFZhbGlkIHZhbHVlcyBmb3IgdGhpcyBwYXJhbWV0ZXIgYXJlOgogICAgIlN1bmRheSIKICAgICJNb25kYXkiCiAgICAiVHVlc2RheSIKICAgICJXZWRuZXNkYXkiCiAgICAiVGh1cnNkYXkiCiAgICAiRnJpZGF5IgogICAgIlNhdHVyZGF5IgoKICAgIC5QQVJBTUVURVIgVGltZXNPZkRheQogICAgU3BlY2lmeSB0aGUgdGltZSB2YWx1ZSBpbiBISDpNTSAoMjQgSHJzKSB0aW1lIGZvcm1hdC4gWW91IGNhbiBzcGVjaWZ5IG11bHRpcGxlIHZhbHVlcyBzZXBlcmF0ZWQgYnkgY29tbWEuCgogICAgLlBBUkFNRVRFUiBFeGNsdWRlCiAgICBMaXN0IG9mIGZpbGVzIHlvdSB3YW50IHRvIGV4Y2x1ZGUgZnJvbSBiYWNrdXAgc2NoZWR1bGUuIFRoaXMgc2hvdWxkIGJlIGEgdmFsaWQgcGF0aC4KICAgIGUuZy4gQzpcVGVtcFx0ZXN0LnR4dCwiQzpcTXkgRmlsZXNcVGVzdEZpbGUudHh0IixDOlxUZXN0Rm9sZGVyXFRlc3RGaWxlLnR4dAoKICAgIC5QQVJBTUVURVIgSW5jbHVkZQogICAgTGlzdCBvZiBmaWxlcyB5b3Ugd2FudCB0byBpbmNsdWRlIGluIGJhY2t1cCBzY2hlZHVsZS4gVGhpcyBzaG91bGQgYmUgYSB2YWxpZCBwYXRoLgogICAgZS5nLiBDOlxUZW1wXHRlc3QudHh0LCJDOlxNeSBGaWxlc1xUZXN0RmlsZS50eHQiLEM6XFRlc3RGb2xkZXJcVGVzdEZpbGUudHh0CgogICAgLlBBUkFNRVRFUiBSZXRlbnRpb25EYXlzCiAgICBTcGVjaWZ5IG51bWJlciBvZiBkYXlzIHlvdSB3bmF0IHRvIHJldGFpbiB0aGUgYmFja3VwIGRhdGEuCgogICAgLlBBUkFNRVRFUiBOb25Xb3JrSG91ckJhbmR3aWR0aAogICAgU3BlY2lmaWVzIHRoZSBiYW5kd2lkdGggdGhyb3R0bGluZyBzZXR0aW5nIHRvIGJlIHVzZWQgdG8gbGltaXQgdGhlIG5ldHdvcmsgYmFuZHdpZHRoIGNvbnN1bWVkIGJ5IGRhdGEgdHJhbnNmZXJzIGR1cmluZyBub24td29yayBob3Vycy4gCgogICAgLlBBUkFNRVRFUiBXb3JrSG91ckJhbmR3aWR0aAogICAgU3BlY2lmaWVzIHRoZSBiYW5kd2lkdGggdGhyb3R0bGluZyBzZXR0aW5nIHRvIGJlIHVzZWQgdG8gbGltaXQgdGhlIG5ldHdvcmsgYmFuZHdpZHRoIGNvbnN1bWVkIGJ5IGRhdGEgdHJhbnNmZXJzIGR1cmluZyB3b3JrIGhvdXJzLgoKICAgIC5JTlBVVFMKICAgIEFsbCBwYXJhbWV0ZXIgdmFsdWVzIGluIFN0cmluZyBmb3JtYXQuCgogICAgLk9VVFBVVFMKICAgIFN0cmluZy4gUmVzdWx0IG9mIHRoZSBjb21tYW5kIG91dHB1dC4KCiAgICAuTk9URVMKICAgICBQdXJwb3NlIG9mIHNjcmlwdDogVGhlIHNjcmlwdCBpcyB0byBjcmVhdGUgYSBiYWNrdXAgcG9saWN5IGluIEF6dXJlIFZNCiAgICAgTWluaW11bSByZXF1aXJlbWVudHM6IFBvd2VyU2hlbGwgVmVyc2lvbiAyLjAuMAogICAgIEluaXRpYWxseSB3cml0dGVuIGJ5OiBCaGFza2FyIERlc2hhcmFqdQogICAgIFVwZGF0ZS9yZXZpc2lvbiBIaXN0b3J5OgogICAgID09PT09PT09PT09PT09PT09PT09PT09CiAgICAgVXBkYXRlZCBieSAgICAgICAgRGF0ZSAgICAgICAgICAgIFJlYXNvbgogICAgID09PT09PT09PT0gICAgICAgID09PT0gICAgICAgICAgICA9PT09PT0KICAgICBTYXZpbmRyYVNpbmdoICAgICAyNi1NYXktMTYgICAgICAgQ2hhbmdlZCBNYW5kYXRvcnk9JFRydWUgdG8gTWFuZGF0b3J5PSRGYWxzZSBmb3IgYWxsIHBhcmFtZXRlcnMuCgogICAgLkVYQU1QTEUKICAgIEM6XFBTPiAuXENvbmZpZ3VyZS1CYWNrdXBQb2xpY3lBenVyZS5wczEgLUNsaWVudElEIDEyMzQ1NiAtQXp1cmVVc2VyTmFtZSBiaGFza2FyLmRlc2hhcmFqdUBuZXRlbnJpY2guY29tIC1BenVyZVBhc3N3b3JkIFBANTV3MHJkMSAtQXp1cmVTdWJzY3JpcHRpb25JRCBjYTY4NTk4Yy1lY2MzLTRhYmMtYjdhMi0xZWNlZjMzZjI3OGQgLURheXNPZldlZWsgJ01vbmRheSxUdWVzZGF5LFdlZG5lc2RheSxUaHVyc2RheSxGcmlkYXknIC1UaW1lc09mRGF5ICcxNjowMCcgLUV4Y2x1ZGUgJ2M6XFRlbXAsQzpcV2luZG93cycgLUluY2x1ZGUgJ2M6XCxkOlwnIC1SZXRlbnRpb25EYXlzIDcgCgogICAgLkVYQU1QTEUKICAgIEM6XFBTPiAuXENvbmZpZ3VyZS1CYWNrdXBQb2xpY3lBenVyZS5wczEgLUNsaWVudElEIDEyMzQ1NiAtQXp1cmVVc2VyTmFtZSBiaGFza2FyLmRlc2hhcmFqdUBuZXRlbnJpY2guY29tIC1BenVyZVBhc3N3b3JkIFBANTV3MHJkMSAtQXp1cmVTdWJzY3JpcHRpb25JRCBjYTY4NTk4Yy1lY2MzLTRhYmMtYjdhMi0xZWNlZjMzZjI3OGQgLUF6dXJlU3Vic2NyaXB0aW9uSUQgLURheXNPZldlZWsgJ01vbmRheSxUdWVzZGF5LFdlZG5lc2RheSxUaHVyc2RheSxGcmlkYXknIC1UaW1lc09mRGF5ICcxNjowMCcgLUV4Y2x1ZGUgJ2M6XFRlbXAsQzpcV2luZG93cycgLUluY2x1ZGUgJ2M6XCxkOlwnIC1SZXRlbnRpb25EYXlzIDcgLU5vbldvcmtIb3VyQmFuZHdpZHRoIDEyMzQ1NjcgLVdvcmtIb3VyQmFuZHdpZHRoIDEyMzQ1NgoKICAgIC5MSU5LCiAgICBodHRwOi8vd3d3Lm5ldGVucmljaC5jb20vCiM+CgpbQ21kbGV0QmluZGluZygpXQpQYXJhbQooCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kQ2xpZW50SUQsCgogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtzdHJpbmddJEF6dXJlVXNlck5hbWUsCgogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtzdHJpbmddJEF6dXJlUGFzc3dvcmQsCgogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtzdHJpbmddJEF6dXJlU3Vic2NyaXB0aW9uSUQsCgoJW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtTdHJpbmddJFJlc291cmNlR3JvdXBOYW1lLAoKCVtQYXJhbWV0ZXIoVmFsdWVGcm9tUGlwZWxpbmVCeVByb3BlcnR5TmFtZSldCiAgICBbU3RyaW5nXSRMb2NhdGlvbiwKICAgIAogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtzdHJpbmddJFZNTmFtZSwKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kRGF5c09mV2VlaywKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kVGltZXNPZkRheSwKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kRXhjbHVkZSwKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kSW5jbHVkZSwKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kUmV0ZW50aW9uRGF5cywKCiAgICBbUGFyYW1ldGVyKFZhbHVlRnJvbVBpcGVsaW5lQnlQcm9wZXJ0eU5hbWUpXQogICAgW3N0cmluZ10kTm9uV29ya0hvdXJCYW5kd2lkdGgsCgogICAgW1BhcmFtZXRlcihWYWx1ZUZyb21QaXBlbGluZUJ5UHJvcGVydHlOYW1lKV0KICAgIFtzdHJpbmddJFdvcmtIb3VyQmFuZHdpZHRoCikKCkJlZ2luCnsKICAgICMgTmFtZSB0aGUgTG9nIGZpbGUgYmFzZWQgb24gc2NyaXB0IG5hbWUKICAgIFtEYXRlVGltZV0kTG9nRmlsZVRpbWUgPSBHZXQtRGF0ZQogICAgJEZpbGVUaW1lU3RhbXAgPSAkTG9nRmlsZVRpbWUuVG9TdHJpbmcoImRkLU1NTS15eXl5X0hIbW1zcyIpCiAgICAkTG9nRmlsZU5hbWUgPSAiJENsaWVudElELSQoJE15SW52b2NhdGlvbi5NeUNvbW1hbmQuTmFtZS5SZXBsYWNlKCcucHMxJywnJykpLSRGaWxlVGltZVN0YW1wLmxvZyIKICAgICRMb2dGaWxlUGF0aCA9ICJDOlxORVBvcnRhbFwkTG9nRmlsZU5hbWUiCgogICAgJFNjcmlwdFVwbG9hZENvbmZpZyA9ICRudWxsCiAgICBGdW5jdGlvbiBHZXQtQmxvYlVSSUZvckxvZ0ZpbGUKICAgIHsKICAgICAgICBUcnkKICAgICAgICB7CiAgICAgICAgICAgICRVQyA9IFNlbGVjdC1YbWwgLVBhdGggIkM6XE5FUG9ydGFsXE5FUG9ydGFsQXBwLkNvbmZpZyIgLVhQYXRoIGNvbmZpZ3VyYXRpb24vYXBwU2V0dGluZ3MgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgfCBTZWxlY3QgLUV4cGFuZFByb3BlcnR5IE5vZGUgfCBTZWxlY3QgLUV4cGFuZFByb3BlcnR5IGFkZAogICAgICAgICAgICAkVXBsb2FkQ29uZmlnID0gW29yZGVyZWRdQHt9OyAkVUMgfCAlIHsgJFVwbG9hZENvbmZpZyArPSBAeyAkXy5rZXkgPSAkXy5WYWx1ZSB9IH0KICAgICAgICAgICAgJFNjcmlwdDpTY3JpcHRVcGxvYWRDb25maWcgPSBbUFNDdXN0b21PYmplY3RdJFVwbG9hZENvbmZpZwoKICAgICAgICAgICAgJENvbnRhaW5lciA9ICRTY3JpcHRVcGxvYWRDb25maWcuQ29udGFpbmVyCiAgICAgICAgICAgICRTdG9yYWdlQWNjTmFtZSA9ICRTY3JpcHRVcGxvYWRDb25maWcuU3RvcmFnZUFjY05hbWUKICAgICAgICAgICAgJFN0b3JhZ2VBY2NLZXkgPSAkU2NyaXB0VXBsb2FkQ29uZmlnLlN0b3JhZ2VBY2NLZXkKCiAgICAgICAgICAgICgkY29udGV4dCA9IE5ldy1BenVyZVN0b3JhZ2VDb250ZXh0IC1TdG9yYWdlQWNjb3VudE5hbWUgJFN0b3JhZ2VBY2NOYW1lIC1TdG9yYWdlQWNjb3VudEtleSAkU3RvcmFnZUFjY0tleSAtRXJyb3JBY3Rpb24gU3RvcCkgfCBPdXQtTnVsbAogICAgICAgIH0KICAgICAgICBDYXRjaAogICAgICAgIHsKICAgICAgICAgICAgUmV0dXJuICJFcnJvciBwcm9jZXNzaW5nIGJsb2IgVVJJLiBDaGVjayBpZiBzdG9yYWdlIGNyZWRlbnRpYWxzIGFyZSBjb3JyZWN0IGluICdDOlxORVBvcnRhbFxORVBvcnRhbEFwcC5Db25maWcnIgogICAgICAgIH0KICAgICAgICBSZXR1cm4gIiQoJGNvbnRleHQuQmxvYkVuZFBvaW50KSQoJFNjcmlwdFVwbG9hZENvbmZpZy5Db250YWluZXIpLyQoJExvZ0ZpbGVuYW1lKSIKICAgIH0KCiAgICAkTG9nRmlsZUJsb2JVUkkgPSBHZXQtQmxvYlVSSUZvckxvZ0ZpbGUKCiAgICAjID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0KICAgICMgV3JpdGUtTG9nIGZ1bmN0aW9uIGRlZmluYXRpb24KICAgICMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICAgRnVuY3Rpb24gV3JpdGUtTG9nRmlsZQogICAgewogICAgICAgIFBhcmFtKFtTdHJpbmddJEZpbGVQYXRoLCBbU3RyaW5nXSRMb2dUZXh0LCBbU3dpdGNoXSRPdmVyd3JpdGUgPSAkZmFsc2UpCgogICAgICAgIFtEYXRlVGltZV0kTG9nVGltZSA9IEdldC1EYXRlCiAgICAgICAgJFRpbWVTdGFtcCA9ICRMb2dUaW1lLlRvU3RyaW5nKCJkZC1NTU0teXl5eSBoaDptbTpzcyB0dCIpCiAgICAgICAgJElucHV0TGluZSA9ICJbJFRpbWVTdGFtcF0gOiAkTG9nVGV4dCIKCiAgICAgICAgSWYoJEZpbGVQYXRoIC1saWtlICIqLj8/PyIpCiAgICAgICAgeyAkQ2hlY2tQYXRoID0gU3BsaXQtUGF0aCAkRmlsZVBhdGg7IH0KICAgICAgICBFbHNlCiAgICAgICAgeyAkQ2hlY2tQYXRoID0gJEZpbGVQYXRoIH0KCiAgICAgICAgSWYoVGVzdC1QYXRoIC1QYXRoICRDaGVja1BhdGggLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpCiAgICAgICAgewogICAgICAgICAgICAjIENvcnJlY3QgcGF0aCBOb3cgY2hlY2sgaWYgaXQgaXMgYSBGaWxlIG9yIEZvbGRlcgogICAgICAgICAgICAoJElzRm9sZGVyID0gKEdldC1JdGVtICRGaWxlUGF0aCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgLWlzIFtTeXN0ZW0uSU8uRGlyZWN0b3J5SW5mb10pIHwgT3V0LU51bGwKICAgICAgICAgICAgSWYoJElzRm9sZGVyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBJZigkRmlsZVBhdGguRW5kc1dpdGgoIlwiKSkgeyAkRmlsZVBhdGggPSAkRmlsZVBhdGguVHJpbUVuZCgxKSB9CiAgICAgICAgICAgICAgICAkRmlsZVBhdGggPSAiJEZpbGVQYXRoXExvZ18kKCRMb2dUaW1lLlRvU3RyaW5nKCdkZC1NTU0teXl5eV9oaC5tbS5zcycpKS5sb2ciCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgRWxzZQogICAgICAgIHsKICAgICAgICAgICAgVHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIElmKC1ub3QoJEZpbGVQYXRoIC1saWtlICIqLj8/PyIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIElmKCRGaWxlUGF0aC5FbmRzV2l0aCgiXCIpKSB7ICRGaWxlUGF0aCA9ICRGaWxlUGF0aC5UcmltRW5kKDEpIH0KICAgICAgICAgICAgICAgICAgICAkRmlsZVBhdGggPSAiJEZpbGVQYXRoXExvZ18kKCRMb2dUaW1lLlRvU3RyaW5nKCdkZC1NTU0teXl5eV9ISC5tbS5zcycpKS5sb2ciCiAgICAgICAgICAgICAgICAgICAgKE5ldy1JdGVtIC1QYXRoICRGaWxlUGF0aCAtSXRlbVR5cGUgRmlsZSAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3ApIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAoTmV3LUl0ZW0gLVBhdGggJENoZWNrUGF0aCAtSXRlbVR5cGUgRGlyZWN0b3J5IC1Gb3JjZSAtRXJyb3JBY3Rpb24gU3RvcCkgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIENhdGNoCiAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAiRXJyb3IgY3JlYXRpbmcgb3V0cHV0IGZvbGRlciBmb3IgTG9nIGZpbGUgJChTcGxpdC1QYXRoICRGaWxlUGF0aCkuYG4kKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSkiCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIElmKCRPdmVyd3JpdGUpCiAgICAgICAgewogICAgICAgICAgICAkSW5wdXRMaW5lIHwgT3V0LUZpbGUgLUZpbGVQYXRoICRGaWxlUGF0aCAtRm9yY2UKICAgICAgICB9CiAgICAgICAgRWxzZQogICAgICAgIHsKICAgICAgICAgICAgJElucHV0TGluZSB8IE91dC1GaWxlIC1GaWxlUGF0aCAkRmlsZVBhdGggLUZvcmNlIC1BcHBlbmQKICAgICAgICB9CiAgICB9CgogICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICIjIyMjWyBTY3JpcHQgRXhlY3V0aW9uIHN0YXJ0ZWQ6ICQoJE15SW52b2NhdGlvbi5NeUNvbW1hbmQuTmFtZSkuIEZvciBDbGllbnQgSUQ6ICRDbGllbnRJRCBdIyMjIyIgLU92ZXJ3cml0ZQoKICAgICMgQ2hlY2sgbWludW11bSByZXF1aXJlZCB2ZXJzaW9uIG9mIEF6dXJlIFBvd2VyU2hlbGwKICAgICRBenVyZVBTVmVyc2lvbiA9IChHZXQtTW9kdWxlIC1MaXN0QXZhaWxhYmxlIC1OYW1lIEF6dXJlIC1FcnJvckFjdGlvbiBTdG9wKS5WZXJzaW9uCiAgICBJZigkQXp1cmVQU1ZlcnNpb24gLWdlICRTY3JpcHRVcGxvYWRDb25maWcuUmVxdWlyZWRQU1ZlcnNpb24pCiAgICB7CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJSZXF1aXJlZCB2ZXJzaW9uIG9mIEF6dXJlIFBvd2VyU2hlbGwgaXMgYXZhaWxhYmxlLiIKICAgIH0KICAgIEVsc2UgCiAgICB7CiAgICAgICAgJE9iak91dCA9ICJSZXF1aXJlZCB2ZXJzaW9uIG9mIEF6dXJlIFBvd2VyU2hlbGwgbm90IGF2YWlsYWJsZS4gU3RvcHBpbmcgZXhlY3V0aW9uLmBuRG93bmxvYWQgYW5kIGluc3RhbGwgcmVxdWlyZWQgdmVyc2lvbiBmcm9tOiBodHRwOi8vYWthLm1zL3dlYnBpLWF6cHMuYAogICAgICAgIGByYG5SZXF1aXJlZCB2ZXJzaW9uIG9mIEF6dXJlIFBvd2VyU2hlbGwgaXMgJCgkU2NyaXB0VXBsb2FkQ29uZmlnLlJlcXVpcmVkUFNWZXJzaW9uKS4gQ3VycmVudCB2ZXJzaW9uIG9uIGhvc3QgbWFjaGluZSBpcyAkKCRBenVyZVBTVmVyc2lvbi5Ub1N0cmluZygpKS4iCiAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICIkT2JqT3V0YHJgbjwjQmxvYkZpbGVSZWFkeUZvclVwbG9hZCM+IgogICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgRXhpdAogICAgfQoKICAgIEZ1bmN0aW9uIFZhbGlkYXRlLUFsbFBhcmFtZXRlcnMKICAgIHsKICAgICAgICAjIDEuIFZhbGlkYXRlIGFsbCBwYXJhbWV0ZXJzCiAgICAgICAgVHJ5CiAgICAgICAgewogICAgICAgICAgICAjIFZhbGlkYXRlIHBhcmFtZXRlcjogQ2xpZW50SUQKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJWYWxpZGF0aW5nIFBhcmFtZXRlcnM6IENsaWVudElELiBPbmx5IEVSUk9ScyB3aWxsIGJlIGxvZ2dlZC4iCiAgICAgICAgICAgIElmKFtTdHJpbmddOjpJc051bGxPckVtcHR5KCRDbGllbnRJRCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGlvbiBmYWlsZWQuIENsaWVudElEIHBhcmFtZXRlciB2YWx1ZSBpcyBlbXB0eS5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIlZhbGlkYXRpb24gZmFpbGVkLiBDbGllbnRJRCBwYXJhbWV0ZXIgdmFsdWUgaXMgZW1wdHkuIgogICAgICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgRXhpdAogICAgICAgICAgICB9CgogICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlZhbGlkYXRpbmcgUGFyYW1ldGVyczogRGF5c09mV2VlayIKICAgICAgICAgICAgSWYoW1N0cmluZ106OklzTnVsbE9yRW1wdHkoJERheXNPZldlZWspKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlZhbGlkYXRpb24gZmFpbGVkLiBEYXlzT2ZXZWVrIHBhcmFtZXRlciB2YWx1ZSBpcyBlbXB0eS5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIlZhbGlkYXRpb24gZmFpbGVkLiBEYXlzT2ZXZWVrIHBhcmFtZXRlciB2YWx1ZSBpcyBlbXB0eS4nIgogICAgICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgRXhpdAogICAgICAgICAgICB9CiAgICAgICAgICAgIElmKCREYXlzT2ZXZWVrLkNvbnRhaW5zKCIsIikpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiRGF5c09mV2VlayBwYXJhbWV0ZXIgdmFsdWUgaXMgcmVjZWl2ZWQgYXMgYW4gQXJyYXkuIFNwbGl0dGluZyB0aGUgdmFsdWVzLiIKICAgICAgICAgICAgICAgICRhcnJEYXlzT2ZXZWVrID0gJERheXNPZldlZWsuU3BsaXQoIiwiKQogICAgICAgICAgICAgICAgRm9yRWFjaCAoJERheSBpbiAkYXJyRGF5c09mV2VlaykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgICAgICB7IFtEYXlvZndlZWtdJERheSB8IE91dC1OdWxsIH0KICAgICAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBEYXlzT2ZXZWVrOiAkRGF5YHJgbjwjQmxvYkZpbGVSZWFkeUZvclVwbG9hZCM+IgogICAgICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkludmFsaWQgdmFsdWUgcGFzc2VkIHRocm91Z2ggcGFyYW1ldGVyIERheXNPZldlZWs6ICckRGF5JyIKICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgIHsgW0RheW9md2Vla10kRGF5c09mV2VlayB8IE91dC1OdWxsIH0KICAgICAgICAgICAgICAgIENhdGNoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBEYXlzT2ZXZWVrOiAkRGF5c09mV2Vla2ByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkludmFsaWQgdmFsdWUgcGFzc2VkIHRocm91Z2ggcGFyYW1ldGVyIERheXNPZldlZWs6ICckRGF5c09mV2VlayciCiAgICAgICAgICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGluZyBQYXJhbWV0ZXJzOiBUaW1lc09mRGF5IgogICAgICAgICAgICBJZihbU3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkVGltZXNPZkRheSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGlvbiBmYWlsZWQuIFRpbWVzT2ZEYXkgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiVmFsaWRhdGlvbiBmYWlsZWQuIFRpbWVzT2ZEYXkgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LiciCiAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSWYoJFRpbWVzT2ZEYXkuQ29udGFpbnMoIiwiKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJUaW1lc09mRGF5IHBhcmFtZXRlciB2YWx1ZSBpcyByZWNlaXZlZCBhcyBhbiBBcnJheS4gU3BsaXR0aW5nIHRoZSB2YWx1ZXMuIgogICAgICAgICAgICAgICAgJGFyclRpbWVzT2ZEYXkgPSAkVGltZXNPZkRheS5TcGxpdCgiLCIpCiAgICAgICAgICAgICAgICBGb3JFYWNoICgkVGltZSBpbiAkYXJyVGltZXNPZkRheSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgICAgICB7IFt0aW1lc3Bhbl0kVGltZSB8IE91dC1OdWxsIH0KICAgICAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBUaW1lc09mRGF5OiAkVGltZWByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAgICAgJE9iak91dCA9ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBUaW1lc09mRGF5OiAnJFRpbWUnIgogICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICAgICAgRXhpdAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBFbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRyeQogICAgICAgICAgICAgICAgeyBbdGltZXNwYW5dJFRpbWVzT2ZEYXkgfCBPdXQtTnVsbCB9CiAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgVGltZXNPZkRheTogJFRpbWVzT2ZEYXkiCiAgICAgICAgICAgICAgICAgICAgJE9iak91dCA9ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBUaW1lc09mRGF5OiAnJFRpbWVzT2ZEYXknIgogICAgICAgICAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICAgICAgRXhpdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlZhbGlkYXRpbmcgUGFyYW1ldGVyczogRXhjbHVkZSIKICAgICAgICAgICAgSWYoW1N0cmluZ106OklzTnVsbE9yRW1wdHkoJEV4Y2x1ZGUpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIkV4Y2x1ZGUgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LiBUaGUgdmFsdWUgd2FzIG9wdGlvbmFsLiIKICAgICAgICAgICAgfQogICAgICAgICAgICBFbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIElmKCRFeGNsdWRlLkNvbnRhaW5zKCIsIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJFeGNsdWRlIHBhcmFtZXRlciB2YWx1ZSBpcyByZWNlaXZlZCBhcyBhbiBBcnJheS4gU3BsaXR0aW5nIHRoZSB2YWx1ZXMuIgogICAgICAgICAgICAgICAgICAgICRhcnJFeGNsdWRlID0gJEV4Y2x1ZGUuU3BsaXQoIiwiKQogICAgICAgICAgICAgICAgICAgIEZvckVhY2ggKCRFeEZpbGVQYXRoIGluICRhcnJFeGNsdWRlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgSWYgKFRlc3QtUGF0aCAkRXhGaWxlUGF0aCkKICAgICAgICAgICAgICAgICAgICAgICAgeyAgfQogICAgICAgICAgICAgICAgICAgICAgICBFbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiQ2FuIG5vdCB2YWxpZGF0ZSBwYXRoIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBFeGNsdWRlOiAkRXhGaWxlUGF0aGByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiQ2FuIG5vdCB2YWxpZGF0ZSBwYXRoIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBFeGNsdWRlOiAnJEV4RmlsZVBhdGgnIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgI0V4aXQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIEVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBJZiAoVGVzdC1QYXRoICRFeGNsdWRlKQogICAgICAgICAgICAgICAgICAgIHsgIH0KICAgICAgICAgICAgICAgICAgICBFbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIkNhbiBub3QgdmFsaWRhdGUgcGF0aCBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgRXhjbHVkZTogJEV4Y2x1ZGVgcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiQ2FuIG5vdCB2YWxpZGF0ZSBwYXRoIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBFeGNsdWRlOiAnJEV4Y2x1ZGUnIgogICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICAgICAgI0V4aXQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGluZyBQYXJhbWV0ZXJzOiBJbmNsdWRlIgogICAgICAgICAgICBJZihbU3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkSW5jbHVkZSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGlvbiBmYWlsZWQuIEluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiVmFsaWRhdGlvbiBmYWlsZWQuIEluY2x1ZGUgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LiciCiAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgSWYoJEluY2x1ZGUuQ29udGFpbnMoIiwiKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJJbmNsdWRlIHBhcmFtZXRlciB2YWx1ZSBpcyByZWNlaXZlZCBhcyBhbiBBcnJheS4gU3BsaXR0aW5nIHRoZSB2YWx1ZXMuIgogICAgICAgICAgICAgICAgJGFyckluY2x1ZGUgPSAkSW5jbHVkZS5TcGxpdCgiLCIpCiAgICAgICAgICAgICAgICBGb3JFYWNoICgkSW5GaWxlUGF0aCBpbiAkYXJySW5jbHVkZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBJZiAoVGVzdC1QYXRoICRJbkZpbGVQYXRoKQogICAgICAgICAgICAgICAgICAgIHsgIH0KICAgICAgICAgICAgICAgICAgICBFbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIkNhbiBub3QgdmFsaWRhdGUgcGF0aCBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgSW5jbHVkZTogJEluRmlsZVBhdGhgcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiQ2FuIG5vdCB2YWxpZGF0ZSBwYXRoIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBJbmNsdWRlOiAnJEluRmlsZVBhdGgnIgogICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICAgICAgI0V4aXQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBJZiAoVGVzdC1QYXRoICRJbmNsdWRlKQogICAgICAgICAgICAgICAgeyAgfQogICAgICAgICAgICAgICAgRWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiQ2FuIG5vdCB2YWxpZGF0ZSBwYXRoIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBJbmNsdWRlOiAkSW5jbHVkZWByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkNhbiBub3QgdmFsaWRhdGUgcGF0aCBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgSW5jbHVkZTogJyRJbmNsdWRlJyIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgICAgICNFeGl0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGluZyBQYXJhbWV0ZXJzOiBSZXRlbnRpb25EYXlzIgogICAgICAgICAgICBJZihbU3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkUmV0ZW50aW9uRGF5cykpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmFsaWRhdGlvbiBmYWlsZWQuIFJldGVudGlvbkRheXMgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiVmFsaWRhdGlvbiBmYWlsZWQuIFJldGVudGlvbkRheXMgcGFyYW1ldGVyIHZhbHVlIGlzIGVtcHR5LiciCiAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgVHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFtJbnQzMl0kUmV0ZW50aW9uRGF5cyA9ICRSZXRlbnRpb25EYXlzCiAgICAgICAgICAgIH0KICAgICAgICAgICAgQ2F0Y2gKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJJbnZhbGlkIHZhbHVlIHBhc3NlZCB0aHJvdWdoIHBhcmFtZXRlciBSZXRlbnRpb25EYXlzIChJbnRlZ2VyIGV4cGVjdGQpOiAkUmV0ZW50aW9uRGF5c2ByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICRPYmpPdXQgPSAiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgUmV0ZW50aW9uRGF5cyAoSW50ZWdlciBleHBlY3RkKTogJyRSZXRlbnRpb25EYXlzJyIKICAgICAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJWYWxpZGF0aW5nIFBhcmFtZXRlcnM6IE5vbldvcmtIb3VyQmFuZHdpZHRoIgogICAgICAgICAgICBJZihbU3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkTm9uV29ya0hvdXJCYW5kd2lkdGgpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIk5vbldvcmtIb3VyQmFuZHdpZHRoIHBhcmFtZXRlciB2YWx1ZSBpcyBlbXB0eS4gVGhlIHZhbHVlIHdhcyBvcHRpb25hbC4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBbSW50MzJdJE5vbldvcmtIb3VyQmFuZHdpZHRoID0gJE5vbldvcmtIb3VyQmFuZHdpZHRoCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgTm9uV29ya0hvdXJCYW5kd2lkdGggKEludGVnZXIgZXhwZWN0ZCk6ICROb25Xb3JrSG91ckJhbmR3aWR0aGByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkludmFsaWQgdmFsdWUgcGFzc2VkIHRocm91Z2ggcGFyYW1ldGVyIE5vbldvcmtIb3VyQmFuZHdpZHRoIChJbnRlZ2VyIGV4cGVjdGQpOiAnJE5vbldvcmtIb3VyQmFuZHdpZHRoJyIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJWYWxpZGF0aW5nIFBhcmFtZXRlcnM6IFdvcmtIb3VyQmFuZHdpZHRoIgogICAgICAgICAgICBJZihbU3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkV29ya0hvdXJCYW5kd2lkdGgpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIldvcmtIb3VyQmFuZHdpZHRoIHBhcmFtZXRlciB2YWx1ZSBpcyBlbXB0eS4gVGhlIHZhbHVlIHdhcyBvcHRpb25hbC4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBbSW50MzJdJFdvcmtIb3VyQmFuZHdpZHRoID0gJFdvcmtIb3VyQmFuZHdpZHRoCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiSW52YWxpZCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCBwYXJhbWV0ZXIgV29ya0hvdXJCYW5kd2lkdGggKEludGVnZXIgZXhwZWN0ZCk6ICRXb3JrSG91ckJhbmR3aWR0aGByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkludmFsaWQgdmFsdWUgcGFzc2VkIHRocm91Z2ggcGFyYW1ldGVyIFdvcmtIb3VyQmFuZHdpZHRoIChJbnRlZ2VyIGV4cGVjdGQpOiAnJFdvcmtIb3VyQmFuZHdpZHRoJyIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJBbGwgcGFyYW1ldGVycyB2YWxpZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIKICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiRXJyb3Igd2hpbGUgdmFsaWRhdGluZyBwYXJhbWV0ZXJzOiAkKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSlgcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICRPYmpPdXQgPSAiRXJyb3Igd2hpbGUgdmFsaWRhdGluZyBwYXJhbWV0ZXJzOiAkKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSkiCiAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICBFeGl0CiAgICAgICAgfQogICAgfQoKICAgIEZ1bmN0aW9uIExvZ2luLVRvQXp1cmVBY2NvdW50CiAgICB7CiAgICAgICAgVHJ5CiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIkF0dGVtcHRpbmcgdG8gbG9naW4gdG8gQXp1cmUgUk0gc3Vic2NyaXB0aW9uLiIgCiAgICAgICAgICAgICRTZWN1cmVQYXNzd29yZCA9IENvbnZlcnRUby1TZWN1cmVTdHJpbmcgLUFzUGxhaW5UZXh0ICRBenVyZVBhc3N3b3JkIC1Gb3JjZQogICAgICAgICAgICAkQ3JlZCA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgLUFyZ3VtZW50TGlzdCAkQXp1cmVVc2VyTmFtZSwgJHNlY3VyZVBhc3N3b3JkCiAgICAgICAgICAgIChMb2dpbi1BenVyZVJtQWNjb3VudCAtQ3JlZGVudGlhbCAkQ3JlZCAtU3Vic2NyaXB0aW9uSWQgJEF6dXJlU3Vic2NyaXB0aW9uSUQgLUVycm9yQWN0aW9uIFN0b3ApIHwgT3V0LU51bGwKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJMb2dpbiB0byBBenVyZSBSTSBzdWNjZXNzZnVsLiIKICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgICRPYmpPdXQgPSAiRXJyb3IgbG9nZ2luZyBpbiB0byBBenVyZSBBY2NvdW50LmBuJCgkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIiRPYmpPdXRgcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICBFeGl0CiAgICAgICAgfQogICAgfQp9CgpQcm9jZXNzCnsKICAgICMgMS4gVmFsaWRhdGUgYWxsIHBhcmFtZXRlcnMKICAgIFZhbGlkYXRlLUFsbFBhcmFtZXRlcnMKCiAgICAjIDIuIExvZ2luIGludG8gQXp1cmUgQWNjb3VudCAKICAgIExvZ2luLVRvQXp1cmVBY2NvdW50CgogICAgIyAzLiBDaGVja2luZyBmb3IgdGhlIHJlb3N1cmNlIGdyb3VwIGV4aXN0ZW5jZQogICAgVHJ5CiAgICB7CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJDaGVja2luZyBleGlzdGFuY2Ugb2YgcmVzb3VyY2UgZ3JvdXAgJyRSZXNvdXJjZUdyb3VwTmFtZSciCiAgICAgICAgJFJlc291cmNlR3JvdXAgPSAkbnVsbAogICAgICAgICgkUmVzb3VyY2VHcm91cCA9IEdldC1BenVyZVJtUmVzb3VyY2VHcm91cCAtTmFtZSAkUmVzb3VyY2VHcm91cE5hbWUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgLVdhcm5pbmdBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgfCBPdXQtTnVsbAogICAgICAgIElmKCRSZXNvdXJjZUdyb3VwIC1uZSAkbnVsbCkgIyBSZXNvdXJjZSBHcm91cCBhbHJlYWR5IGV4aXN0cwogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJSZXNvdXJjZSBHcm91cCBhbHJlYWR5IGV4aXN0cyIKICAgICAgICB9CiAgICAgICAgRWxzZQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJUaGUgcmVzb3VyY2UgZ3JvdXAgJFJlc291cmNlR3JvdXBOYW1lIGRvZXMgbm90IGV4aXN0LmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgJE9iak91dCA9ICJUaGUgcmVzb3VyY2UgZ3JvdXAgJFJlc291cmNlR3JvdXBOYW1lIGRvZXMgbm90IGV4aXN0LiIKICAgICAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgIEV4aXQKICAgICAgICB9CiAgICB9CiAgICBDYXRjaAogICAgewogICAgICAgICRPYmpPdXQgPSAiRXJyb3Igd2hpbGUgZ2V0dGluZyBBenVyZSBSZXNvdXJjZSBHcm91cCBkZXRhaWxzLiQoJEVycm9yWzBdLkV4Y2VwdGlvbi5NZXNzYWdlKSIKICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiJE9iak91dGByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICBFeGl0CiAgICB9CgogICAgIyAzLiBDaGVja2luZyBmb3IgdGhlIFZNIGV4aXN0ZW5jZQogICAgVHJ5CiAgICB7CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJWZXJpZnlpbmcgdGhlIFZNIGV4aXN0ZW5jZSBpbiB0aGUgc3Vic2NyaXB0aW9uLiIgCgogICAgICAgICgkVk1FeGlzdCA9IEdldC1BenVyZVJNVk0gLVJlc291cmNlR3JvdXBOYW1lICRSZXNvdXJjZUdyb3VwTmFtZSAtTmFtZSAkVk1OYW1lIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlIC1XYXJuaW5nQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHwgT3V0LU51bGwKICAgICAgICBpZigkVk1FeGlzdCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVmlydHVhbCBNYWNoaW5lICRWTU5hbWUgaXMgYWxyZWFkeSBleGlzdC4iIAogICAgICAgICAgICAoJFZNU3RhdHVzID0gR2V0LUF6dXJlUk1WTSAtUmVzb3VyY2VHcm91cE5hbWUgJFJlc291cmNlR3JvdXBOYW1lIC1OYW1lICRWTU5hbWUgLVN0YXR1cyAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSAtV2FybmluZ0FjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB8IE91dC1OdWxsCiAgICAgICAgICAgICRzdGF0ZSA9ICRWTVN0YXR1cy5TdGF0dXNlcyB8IFdoZXJlLU9iamVjdCB7JF8uRGlzcGxheVN0YXR1cyAtZXEgIlZNIFJ1bm5pbmcifQogICAgICAgICAgICBpZigkc3RhdGUuY29kZSAtZXEgJ1Bvd2VyU3RhdGUvcnVubmluZycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlRoZSBWaXJ0dWFsIE1hY2hpbmUgJFZNTmFtZSBpcyBhbHJlYWR5IHJ1bm5pbmcgc3RhdGUuIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJUaGUgVmlydHVhbCBNYWNoaW5lICRWTU5hbWUgaXMgbm90IGluIGEgcnVubmluZyBzdGF0ZS5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIlRoZSBWaXJ0dWFsIE1hY2hpbmUgJFZNTmFtZSBpcyBub3QgaW4gYSBydW5uaW5nIHN0YXRlLiIKICAgICAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlRoZSBWaXJ0dWFsIE1hY2hpbmUgJFZNTmFtZSBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcmVzb3VyY2UgZ3JvdXAgJFJlc291cmNlR3JvdXBOYW1lLmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgJE9iak91dCA9ICJUaGUgVmlydHVhbCBNYWNoaW5lICRWTU5hbWUgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHJlc291cmNlIGdyb3VwICRSZXNvdXJjZUdyb3VwTmFtZS4iCiAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICBFeGl0CiAgICAgICAgfQogICAgfQogICAgY2F0Y2gKICAgIHsKICAgICAgICAkT2JqT3V0ID0gIkVycm9yIHdoaWxlIGNoZWNraW5nIFZpcnR1bCBNYWNoaW5lICRWTU5hbWUgaW4gdGhlICRSZXNvdXJjZUdyb3VwTmFtZS4kKCRFcnJvclswXS5FeGNlcHRpb24uTWVzc2FnZSkiCiAgICAgICAgJG91dHB1dCA9IChAeyJSZXNwb25zZSIgPSBbQXJyYXldJE9iak91dDsgU3RhdHVzID0gIkZhaWxlZCI7IEJsb2JVUkkgPSAkTG9nRmlsZUJsb2JVUkl9IHwgQ29udmVydFRvLUpzb24pLlRvU3RyaW5nKCkuUmVwbGFjZSgnXHUwMDI3JywiJyIpCiAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIiRPYmpPdXRgcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgRXhpdAogICAgfQoKICAgICMgNC4gSW5zdGFsbCBleHRlbnNpb24gdG8gY29uZmlndXJlIHRoZSBiYWNrdXBwb2xpY3kKICAgIFRyeQogICAgewogICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiQ2hlY2tpbmcgZm9yIHRoZSBleGlzdGluZyBjdXN0b20gc2NyaXB0IGV4dGVuc2lvbnMuIgogICAgICAgICRleHRlbnNpb25zID0gJFZNRXhpc3QuRXh0ZW5zaW9ucyB8IFdoZXJlLU9iamVjdCB7JF8uVmlydHVhbE1hY2hpbmVFeHRlbnNpb25UeXBlIC1lcSAnQ3VzdG9tU2NyaXB0RXh0ZW5zaW9uJ30KICAgICAgICBpZigkZXh0ZW5zaW9ucykKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiUmVtb3ZpbmcgdGhlIGV4aXN0aW5nIEN1c3RvbVNjcmlwdCBleHRlbnNpb25zLiIKICAgICAgICAgICAgKCRSZW1vdmVTdGF0ZSA9IFJlbW92ZS1BenVyZVJtVk1FeHRlbnNpb24gLVJlc291cmNlR3JvdXBOYW1lICRSZXNvdXJjZUdyb3VwTmFtZSAtVk1OYW1lICRWTU5hbWUgLU5hbWUgJCgkZXh0ZW5zaW9ucy5OYW1lKSAtRm9yY2UgLUVycm9yQWN0aW9uIFN0b3AgLVdhcm5pbmdBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgfCBPdXQtTnVsbAogICAgICAgICAgICBpZigkUmVtb3ZlU3RhdGUuU3RhdHVzQ29kZSAtZXEgJ09LJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJTdWNjZXNzZnVsbHkgcmVtb3ZlZCB0aGUgZXhpc3RpbmcgZXh0ZW5zaW9uIGFuZCBhZGRpbmcgbmV3IGhhbmRsZS4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlVuYWJsZSB0byByZW1vdmUgdGhlIGV4aXN0aW5nIGV4dGVuc2lvbi5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIlVuYWJsZSB0byByZW1vdmUgdGhlIGV4aXN0aW5nIGV4dGVuc2lvbi4iCiAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgICAgICAgICBFeGl0CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICRFeHRlbnNpb25OYW1lID0gIkJhY2t1cFBvbGljeSIKICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlRyeWluZyB0byBTZXQgdGhlIEV4dGVuc2lvbiBmb3IgQmFja3VwIFBvbGljeSBDb25maWd1cmF0aW9uLiIKCiAgICAgICAgaWYoJE5vbldvcmtIb3VyQmFuZHdpZHRoIC1hbmQgJFdvcmtIb3VyQmFuZHdpZHRoKQogICAgICAgIHsKICAgICAgICAgICAgKCRCYWNrdXBJbnN0YWxsRXh0ZW5zaW9uU3RhdHVzID0gU2V0LUF6dXJlUm1WTUN1c3RvbVNjcmlwdEV4dGVuc2lvbiAtTmFtZSAkRXh0ZW5zaW9uTmFtZSAtRmlsZVVyaSAiaHR0cHM6Ly9hdXRvbWF0aW9udGVzdC5ibG9iLmNvcmUud2luZG93cy5uZXQvY3VzdG9tc2NyaXB0ZmlsZXMvQ29uZmlndXJlLUJhY2t1cFBvbGljeUF6dXJlQ1MucHMxIiAtUnVuIENvbmZpZ3VyZS1CYWNrdXBQb2xpY3lBenVyZUNTLnBzMSAtQXJndW1lbnQgIiREYXlzT2ZXZWVrICRUaW1lc09mRGF5ICRFeGNsdWRlICRJbmNsdWRlICRSZXRlbnRpb25EYXlzICROb25Xb3JrSG91ckJhbmR3aWR0aCAkV29ya0hvdXJCYW5kd2lkdGgiIC1SZXNvdXJjZUdyb3VwTmFtZSAkUmVzb3VyY2VHcm91cE5hbWUgLUxvY2F0aW9uICRMb2NhdGlvbiAtVk1OYW1lICRWTU5hbWUgLVR5cGVIYW5kbGVyVmVyc2lvbiAxLjggLUVycm9yQWN0aW9uIFN0b3AgLVdhcm5pbmdBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgfCBPdXQtTnVsbAogICAgICAgIH0KICAgICAgICBFbHNlIAogICAgICAgIHsKICAgICAgICAgICAgKCRCYWNrdXBJbnN0YWxsRXh0ZW5zaW9uU3RhdHVzID0gU2V0LUF6dXJlUm1WTUN1c3RvbVNjcmlwdEV4dGVuc2lvbiAtTmFtZSAkRXh0ZW5zaW9uTmFtZSAtRmlsZVVyaSAiaHR0cHM6Ly9hdXRvbWF0aW9udGVzdC5ibG9iLmNvcmUud2luZG93cy5uZXQvY3VzdG9tc2NyaXB0ZmlsZXMvQ29uZmlndXJlLUJhY2t1cFBvbGljeUF6dXJlQ1MucHMxIiAtUnVuIENvbmZpZ3VyZS1CYWNrdXBQb2xpY3lBenVyZUNTLnBzMSAtQXJndW1lbnQgIiREYXlzT2ZXZWVrICRUaW1lc09mRGF5ICRFeGNsdWRlICRJbmNsdWRlICRSZXRlbnRpb25EYXlzIiAtUmVzb3VyY2VHcm91cE5hbWUgJFJlc291cmNlR3JvdXBOYW1lIC1Mb2NhdGlvbiAkTG9jYXRpb24gLVZNTmFtZSAkVk1OYW1lIC1UeXBlSGFuZGxlclZlcnNpb24gMS44IC1FcnJvckFjdGlvbiBTdG9wIC1XYXJuaW5nQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHwgT3V0LU51bGwgICAgCiAgICAgICAgfQoKICAgICAgICBpZigkQmFja3VwSW5zdGFsbEV4dGVuc2lvblN0YXR1cy5TdGF0dXNDb2RlIC1lcSAnT0snKQogICAgICAgIHsKICAgICAgICAgICAgKCRJbnN0YWxsYXRpb25TdGF0dXMgPSBHZXQtQXp1cmVSbVZNRXh0ZW5zaW9uIC1OYW1lICRFeHRlbnNpb25OYW1lIC1SZXNvdXJjZUdyb3VwTmFtZSAkUmVzb3VyY2VHcm91cE5hbWUgLVZNTmFtZSAkVk1OYW1lIC1TdGF0dXMgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUgLVdhcm5pbmdBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgfCBPdXQtTnVsbAogICAgICAgICAgICBpZigkSW5zdGFsbGF0aW9uU3RhdHVzIC1uZSAkbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgd2hpbGUoJEluc3RhbGxhdGlvblN0YXR1cy5Qcm92aXNpb25pbmdTdGF0ZSAtbm90aW4gKCdTdWNjZWVkZWQnLCdGYWlsZWQnKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAoJEluc3RhbGxhdGlvblN0YXR1cyA9IEdldC1BenVyZVJtVk1FeHRlbnNpb24gLU5hbWUgJEV4dGVuc2lvbk5hbWUgLVJlc291cmNlR3JvdXBOYW1lICRSZXNvdXJjZUdyb3VwTmFtZSAtVk1OYW1lICRWTU5hbWUgLVN0YXR1cyAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSAtV2FybmluZ0FjdGlvbiBTaWxlbnRseUNvbnRpbnVlKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgKCRTY3JpcHRTdGF0dXMgPSBHZXQtQXp1cmVSTVZNIC1OYW1lICRWTU5hbWUgLVJlc291cmNlR3JvdXBOYW1lICRSZXNvdXJjZUdyb3VwTmFtZSAtU3RhdHVzIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlIC1XYXJuaW5nQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICRFeHRTY3JpcHRTdGF0dXMgPSAkU2NyaXB0U3RhdHVzLkV4dGVuc2lvbnMgfCBXaGVyZS1PYmplY3QgeyRfLk5hbWUgLWVxICRFeHRlbnNpb25OYW1lfQogICAgICAgICAgICAgICAgaWYoKCRFeHRTY3JpcHRTdGF0dXMuU3RhdHVzZXMuQ29kZSAtZXEgJ1Byb3Zpc2lvbmluZ1N0YXRlL3N1Y2NlZWRlZCcpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRtZXNzYWdlMSA9ICgkRXh0U2NyaXB0U3RhdHVzLlN1YnN0YXR1c2VzIHwgV2hlcmUtT2JqZWN0IHskXy5jb2RlIC1jb250YWlucyAnU3RkT3V0J30pLk1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZTIgPSAoJEV4dFNjcmlwdFN0YXR1cy5TdWJzdGF0dXNlcyB8IFdoZXJlLU9iamVjdCB7JF8uY29kZSAtY29udGFpbnMgJ1N0ZEVycid9KS5NZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgaWYoKCRtZXNzYWdlMSAtZXEgJG51bGwpIC1hbmQgKCRtZXNzYWdlMiAtZXEgJG51bGwpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJCYWNrdXAgUG9saWNpZXMgaGF2ZSBiZWVuIGNvbmZpZ3VyZWQgc3VjY2Vzc2Z1bGx5IG9uICRWTU5hbWUuYHJgbjwjQmxvYkZpbGVSZWFkeUZvclVwbG9hZCM+IgogICAgICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkJhY2t1cCBQb2xpY2llcyBoYXZlIGJlZW4gY29uZmlndXJlZCBzdWNjZXNzZnVsbHkgb24gJFZNTmFtZS4iCiAgICAgICAgICAgICAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJTdWNjZXNzIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgRWxzZSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiQmFja3VwIFBvbGljaWVzIGhhdmUgbm90IGJlZW4gY29uZmlndXJlZCBzdWNjZXNzZnVsbHkgb24gJFZNTmFtZS4kbWVzc2FnZTEuJG1lc3NhZ2UyLmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAgICAgJE9iak91dCA9ICJCYWNrdXAgUG9saWNpZXMgaGF2ZSBub3QgYmVlbiBjb25maWd1cmVkIHN1Y2Nlc3NmdWxseSBvbiAkVk1OYW1lLiRtZXNzYWdlMS4kbWVzc2FnZTIuIgogICAgICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgICAgICAgICAgRXhpdCAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIlByb3Zpc2lvbmluZyB0aGUgc2NyaXB0IGZvciBCYWNrdXAgUG9saWN5IENvbmZpZ3VyYXRpb24gd2FzIGZhaWxlZCBvbiAkVk1OYW1lLmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIlByb3Zpc2lvbmluZyB0aGUgc2NyaXB0IGZvciBCYWNrdXAgUG9saWN5IENvbmZpZ3VyYXRpb24gd2FzIGZhaWxlZCBvbiAkVk1OYW1lLiIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVGhlIGV4dGVuc2lvbiB3YXMgbm90IGluc3RhbGxlZCBmb3IgY29uZmlndXJpbmcgdGhlIEJhY2t1cCBQb2xpY3kgb24gVk0gJFZNTmFtZS5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAkT2JqT3V0ID0gIkV4dGVuc2lvbiB3YXMgaW5zdGFsbGVkIGZvciBjb25maWd1cmluZyB0aGUgQmFja3VwIFBvbGljeSBvbiBWTSAkVk1OYW1lLiIKICAgICAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRvdXRwdXQKICAgICAgICAgICAgICAgIEV4aXQKICAgICAgICAgICAgfSAgICAgICAgICAgCiAgICAgICAgfQogICAgICAgIEVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVW5hYmxlIHRvIGluc3RhbGwgdGhlIGN1c3RvbSBzY3JpcHQgZXh0ZW5zaW9uIEZvciBCYWNrdXAgUG9saWN5IENvbmZpZ3VyYXRpb24gZm9yIFZpcnR1YWwgTWFjaGluZSAkVk1OYW1lLmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAgICAgJE9iak91dCA9ICJVbmFibGUgdG8gaW5zdGFsbCB0aGUgY3VzdG9tIHNjcmlwdCBleHRlbnNpb24gRm9yIEJhY2t1cCBQb2xpY3kgQ29uZmlndXJhdGlvbiBmb3IgVmlydHVhbCBNYWNoaW5lICRWTU5hbWUiCiAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgJG91dHB1dAogICAgICAgICAgICBFeGl0ICAgICAgICAgICAgCiAgICAgICAgfQogICAgfQogICAgY2F0Y2gKICAgIHsKICAgICAgICAkT2JqT3V0ID0gIkVycm9yIHdoaWxlIHNldHRpbmcgdGhlIHNjcmlwdCBmb3IgY29uZmlndXJpbmcgdGhlIGJhY2t1cCBwb2xpY3kgb24gJFZNTmFtZSB2aXJ0dWFsIE1hY2hpbmUuJCgkRXJyb3JbMF0uRXhjZXB0aW9uLk1lc3NhZ2UpIgogICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgICAgIFdyaXRlLU91dHB1dCAkb3V0cHV0CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICIkT2JqT3V0YHJgbjwjQmxvYkZpbGVSZWFkeUZvclVwbG9hZCM+IgogICAgICAgIEV4aXQKICAgIH0KCiAgICAjIDcuIEN1c3RvbSBzY3JpcHQgQ2xlYW51cCBhY3Rpdml0eSB0byBhdm9pZCBzY3JpcHQgcmVydW4gb24gVmlydHVhbCBNYWNoaW5lIHJlc3RhcnRzCiAgICBUcnkgCiAgICB7CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJDaGVja2luZyBmb3IgdGhlIGV4aXN0aW5nIGN1c3RvbSBzY3JpcHQgZXh0ZW5zaW9ucy4iCiAgICAgICAgKCRWTU9iakV4dGVuc2lvbiA9IEdldC1BenVyZVJtVm0gLU5hbWUgJFZNTmFtZSAtUmVzb3VyY2Vncm91cE5hbWUgJFJlc291cmNlR3JvdXBOYW1lIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlIC1XYXJuaW5nQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHwgT3V0LU51bGwKICAgICAgICBpZigkVk1PYmpFeHRlbnNpb24gLW5lICRudWxsKQogICAgICAgIHsKICAgICAgICAgICAgJGV4dGVuc2lvbnMgPSAkVk1PYmpFeHRlbnNpb24uRXh0ZW5zaW9ucyB8IFdoZXJlLU9iamVjdCB7JF8uVmlydHVhbE1hY2hpbmVFeHRlbnNpb25UeXBlIC1lcSAnQ3VzdG9tU2NyaXB0RXh0ZW5zaW9uJ30KICAgICAgICAgICAgaWYoJGV4dGVuc2lvbnMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiUmVtb3ZpbmcgdGhlIGV4aXN0aW5nIEN1c3RvbVNjcmlwdCBleHRlbnNpb25zLiIKICAgICAgICAgICAgICAgICgkUmVtb3ZlU3RhdGUgPSBSZW1vdmUtQXp1cmVSbVZNRXh0ZW5zaW9uIC1SZXNvdXJjZUdyb3VwTmFtZSAkUmVzb3VyY2VHcm91cE5hbWUgLVZNTmFtZSAkVk1OYW1lIC1OYW1lICQoJGV4dGVuc2lvbnMuTmFtZSkgLUZvcmNlIC1FcnJvckFjdGlvbiBTdG9wIC1XYXJuaW5nQWN0aW9uIFNpbGVudGx5Q29udGludWUpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIGlmKCRSZW1vdmVTdGF0ZS5TdGF0dXNDb2RlIC1lcSAnT0snKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiU3VjY2Vzc2Z1bGx5IHJlbW92ZWQgdGhlIGV4aXN0aW5nIGV4dGVuc2lvbiBhbmQgYWRkaW5nIG5ldyBoYW5kbGUuIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUxvZ0ZpbGUgLUZpbGVQYXRoICRMb2dGaWxlUGF0aCAtTG9nVGV4dCAiVW5hYmxlIHRvIHJlbW92ZSB0aGUgZXhpc3RpbmcgZXh0ZW5zaW9ucy5gcmBuPCNCbG9iRmlsZVJlYWR5Rm9yVXBsb2FkIz4iCiAgICAgICAgICAgICAgICAgICAgJE9iak91dCA9ICJVbmFibGUgdG8gcmVtb3ZlIHRoZSBleGlzdGluZyBleHRlbnNpb25zLiIKICAgICAgICAgICAgICAgICAgICAkb3V0cHV0ID0gKEB7IlJlc3BvbnNlIiA9IFtBcnJheV0kT2JqT3V0OyBTdGF0dXMgPSAiRmFpbGVkIjsgQmxvYlVSSSA9ICRMb2dGaWxlQmxvYlVSSX0gfCBDb252ZXJ0VG8tSnNvbikuVG9TdHJpbmcoKS5SZXBsYWNlKCdcdTAwMjcnLCInIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBFbHNlIAogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJVbmFibGUgdG8gZmV0Y2ggdGhlIFZtIGluZm9ybWF0aW9uIHRvIHJlbW92ZSBleHRlbnNpb24uYHJgbjwjQmxvYkZpbGVSZWFkeUZvclVwbG9hZCM+IgogICAgICAgICAgICAkT2JqT3V0ID0gIlVuYWJsZSB0byBmZXRjaCB0aGUgVm0gaW5mb3JtYXRpb24gdG8gcmVtb3ZlIGV4dGVuc2lvbi4iCiAgICAgICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKSAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KICAgIENhdGNoCiAgICB7CiAgICAgICAgV3JpdGUtTG9nRmlsZSAtRmlsZVBhdGggJExvZ0ZpbGVQYXRoIC1Mb2dUZXh0ICJFcnJvciB3aGlsZSByZW1vdmluZyB0aGUgZXh0ZW5zaW9uLmByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKICAgICAgICAkT2JqT3V0ID0gIkVycm9yIHdoaWxlIHJlbW92aW5nIHRoZSBleHRlbnNpb24uIgogICAgICAgICRvdXRwdXQgPSAoQHsiUmVzcG9uc2UiID0gW0FycmF5XSRPYmpPdXQ7IFN0YXR1cyA9ICJGYWlsZWQiOyBCbG9iVVJJID0gJExvZ0ZpbGVCbG9iVVJJfSB8IENvbnZlcnRUby1Kc29uKS5Ub1N0cmluZygpLlJlcGxhY2UoJ1x1MDAyNycsIiciKQogICAgfQp9CkVuZAp7CiAgICBXcml0ZS1Mb2dGaWxlIC1GaWxlUGF0aCAkTG9nRmlsZVBhdGggLUxvZ1RleHQgIiMjIyNbIFNjcmlwdCBleGVjdXRpb24gY29tcGxldGVkIGN1Y2Nlc3NmdWxseTogJCgkTXlJbnZvY2F0aW9uLk15Q29tbWFuZC5OYW1lKSBdIyMjI2ByYG48I0Jsb2JGaWxlUmVhZHlGb3JVcGxvYWQjPiIKfQ==
