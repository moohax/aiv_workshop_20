Assert-That.ps1,7e6bc40c1c7ad0a773995e9defc6c8b4,Scan result is 1. IsMalware: 0,IyBDb3B5cmlnaHQgMjAxMiAtIDIwMTUgQWFyb24gSmVuc2VuCiMgCiMgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CiMgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgojIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAojIAojICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKIyAKIyBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCiMgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKIyBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KIyBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCiMgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgpmdW5jdGlvbiBBc3NlcnQtVGhhdAp7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICBBc3NlcnRzIHRoYXQgYW4gb2JqZWN0IG1lZXRzIGNlcnRhaW4gY29uZGl0aW9ucyBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiB3aGVuIHRoZXkgYXJlbid0LgoKICAgIC5ERVNDUklQVElPTgogICAgVGhlIGBBc3NlcnQtVGhhdGAgZnVuY3Rpb24gY2hlY2tzIHRoYXQgYSBnaXZlbiBzZXQgb2YgY29uZGlpb25zIGFyZSB0cnVlIGFuZCBpZiB0aGV5IGFyZW4ndCwgaXQgdGhyb3dzIGEgYEJsYWRlLkFzc2VydGlvbkV4Y2VwdGlvbmAuCgogICAgLkVYQU1QTEUKICAgIEFzc2VydC1UaGF0IHsgdGhyb3cgJ0Z1YmFyIScgfSAtVGhyb3dzIFtNYW5hZ2VtZW50LkF1dG9tYXRpb24uUnVudGltZUV4Y2VwdGlvbl0KCiAgICBEZW1vbnN0cmF0ZXMgaG93IHRvIGNoZWNrIHRoYXQgYSBzY3JpcHQgYmxvY2sgdGhyb3dzIGFuIGV4Y2VwdGlvbi4KICAgIAogICAgLkVYQU1QTEUKICAgIEFzc2VydC1UaGF0IHsgfSAtRG9lc05vdFRocm93RXhjZXB0aW9uCiAgICAKICAgIERlbW9uc3RyYXRlcyBob3cgdG8gY2hlY2sgdGhhdCBhIHNjcmlwdCBibG9jayBkb2Vzbid0IHRocm93IGFuIGV4Y2VwdGlvbi4KCiAgICAuRVhBTVBMRQogICAgQXNzZXJ0LVRoYXQgQCggMSwgMiwgMyApIC1Db250YWlucyAyCgogICAgRGVtb25zdHJhdGVzIGhvdyB0byBjaGVjayBpZiBhbiBhcnJheSwgbGlzdCwgb3Igb3RoZXIgY29sbGVjdGlvbiBjb250YWlucyBhbiBvYmplY3QuCgogICAgLkVYQU1QTEUKICAgIEFzc2VydC1UaGF0IEB7ICdmdWJhcicgPSAnc25hZnUnIH0gLUNvbnRhaW5zICdmdWJhcicKCiAgICBEZW1vbnN0cmF0ZXMgaG93IHRvIGNoZWNrIGlmIGEgaGFzaHRhYmxlL2RpY3Rpb25hcnkgb2JqZWN0IGNvbnRhaW5zIGEgdmFsdWUuCgogICAgLkVYQU1QTEUKICAgIEFzc2VydC1UaGF0ICdmdWJhcicgLUNvbnRhaW5zICdVQkEnCgogICAgRGVtb25zdHJhdGVzIGhvdyB0byBjaGVjayBpZiBhIHN0cmluZyBjb250YWlucyBhIHN1YnN0cmluZy4gVGhlIHNlYXJjaCBpcyBjYXNlLWluc2Vuc2l0aXZlLgogICAgIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBwYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSxQb3NpdGlvbj0wKV0KICAgICAgICBbb2JqZWN0XQogICAgICAgICMgVGhlIG9iamVjdCB3aG9zZSBjb25kaXRpb25zIHlvdSdyZSBjaGVja2luZy4KICAgICAgICAkSW5wdXRPYmplY3QsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFBhcmFtZXRlclNldE5hbWU9J0NvbnRhaW5zJyldCiAgICAgICAgW29iamVjdF0KICAgICAgICAjIEFzc2VydHMgdGhhdCBgSW5wdXRPYmplY3RgIGNvbnRhaW5zIGEgdmFsdWUuIGBJbnB1dE9iamVjdGAgY2FuIGJlIGFuIGFycmF5LCBsaXN0LCBoYXNodGFibGUsIGRpY3Rpb25hcnksIGNvbGxlY3Rpb24gb3IgYSBzaW5nbGUgc3RyaW5nLiBJZiBgSW5wdXRPYmplY3RgIGlzIGFub3RoZXIgdHlwZSwgaXQgaXMgZmlyc3QgY29udmVydGVkIHRvIGEgc3RyaW5nIGJlZm9yZSBiZWluZyBzZWFyY2hlZC4KICAgICAgICAjCiAgICAgICAgIyBJZiBgSW5wdXRPYmplY3RgIGlzIGFuIGFycmF5IG9yIGxpc3QsIHRoaXMgZnVuY3Rpb24gdXNlcyBQb3dlclNoZWxsJ3MgYC1jb250YWluc2Agb3BlcmF0b3IgdG8gZGV0ZXJtaW5lIGlmIGl0IGNvbnRhaW5zIGBDb250YWluc2AsIGUuZy4gYCRJbnB1dE9iamVjdCAtY29udGFpbnMgJENvbnRhaW5zYC4KICAgICAgICAjCiAgICAgICAgIyBJZiBgSW5wdXRPYmplY3RgIGlzIGEgZGljdGlvbmFyeSwgdGhpcyBmdW5jdGlvbiB1c2VzIGl0cyBgQ29udGFpbnNgIG1ldGhvZCB0byBkZXRlcm1pbmUgaWYgaXQgY29udGFpbnMgYENvbnRhaW5zYCwgZS5nLiBgJElucHV0T2JqZWN0LkNvbnRhaW5zKCRDb250YWlucylgLgogICAgICAgICMKICAgICAgICAjIElmIGBJbnB1dE9iamVjdGAgaXMgYSBjb2xsZWN0aW9uLCB0aGlzIGZ1bmN0aW9uIGVudW1lcmF0ZXMgdGhyb3VnaCBlYWNoIGl0ZW0gaW4gdGhlIGNvbGxlY3Rpb24gYW5kIHVzZXMgUG93ZXJTaGVsbCdzIGAtZXFgIG9wZXJhdG9yIHRvIGRldGVybWluZSBpZiBpdCBtYXRjaGVzL2lzIGVxdWFsIHRvIGBDb250YWluc2AgZS5nLgogICAgICAgICMKICAgICAgICAjICAgICBmb3JlYWNoKCAkaXRlbSBpbiAkSW5wdXRPYmplY3QuR2V0RW51bWVyYXRvcigpICkKICAgICAgICAjICAgICB7CiAgICAgICAgIyAgICAgICAgIGlmKCAkaXRlbSAtZXEgJENvbnRhaW5zICkKICAgICAgICAjICAgICAgICAgewogICAgICAgICMgICAgICAgICB9CiAgICAgICAgIyAgICAgfQogICAgICAgICMKICAgICAgICAjIEluIGFsbCBvdGhlciBjYXNlcywgYElucHV0T2JqZWN0YCBhbmQgYENvbnRhaW5zYCBhcmUgY29udmVydGVkIHRvIHN0cmluZ3MgYW5kIGNvbXBhcmVkIHVzaW5nIHRoZSBgLWxpa2VgIG9wZXJhdG9yLiBBbnkgd2lsZGNhcmRzIGluIGBDb250YWluc2AgYXJlIGVzY2FwZWQgYW5kIGl0IGlzIHdyYXBwZWQgaW4gdGhlIGAqYCB3aWxkY2FyZCwgZS5nLiBgJElucHV0T2JqZWN0IC1saWtlICgnKnswfSonIC1mIFtNYW5hZ2VtZW50LkF1dG9tYXRpb24uV2lsZGNhcmRQYXR0ZXJuXTo6RXNjYXBlKCRDb250YWlucykpYC4KICAgICAgICAkQ29udGFpbnMsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFBhcmFtZXRlclNldE5hbWU9J0RvZXNOb3RDb250YWluJyldCiAgICAgICAgW29iamVjdF0KICAgICAgICAjIEFzc2VydHMgdGhhdCBgSW5wdXRPYmplY3RgIGRvZXMgbm90IGNvbnRhaW4gYSB2YWx1ZS4gYElucHV0T2JqZWN0YCBjYW4gYmUgYW4gYXJyYXksIGxpc3QsIGhhc2h0YWJsZSwgZGljdGlvbmFyeSwgY29sbGVjdGlvbiBvciBhIHNpbmdsZSBzdHJpbmcuIElmIGBJbnB1dE9iamVjdGAgaXMgYW5vdGhlciB0eXBlLCBpdCBpcyBmaXJzdCBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlYXJjaGVkLgogICAgICAgICMKICAgICAgICAjIElmIGBJbnB1dE9iamVjdGAgaXMgYW4gYXJyYXkgb3IgbGlzdCwgdGhpcyBmdW5jdGlvbiB1c2VzIFBvd2VyU2hlbGwncyBgLWNvbnRhaW5zYCBvcGVyYXRvciB0byBkZXRlcm1pbmUgaWYgaXQgY29udGFpbnMgYENvbnRhaW5zYCwgZS5nLiBgJElucHV0T2JqZWN0IC1jb250YWlucyAkQ29udGFpbnNgLgogICAgICAgICMKICAgICAgICAjIElmIGBJbnB1dE9iamVjdGAgaXMgYSBkaWN0aW9uYXJ5LCB0aGlzIGZ1bmN0aW9uIHVzZXMgaXRzIGBDb250YWluc2AgbWV0aG9kIHRvIGRldGVybWluZSBpZiBpdCBjb250YWlucyBgQ29udGFpbnNgLCBlLmcuIGAkSW5wdXRPYmplY3QuQ29udGFpbnMoJENvbnRhaW5zKWAuCiAgICAgICAgIwogICAgICAgICMgSWYgYElucHV0T2JqZWN0YCBpcyBhIGNvbGxlY3Rpb24sIHRoaXMgZnVuY3Rpb24gZW51bWVyYXRlcyB0aHJvdWdoIGVhY2ggaXRlbSBpbiB0aGUgY29sbGVjdGlvbiBhbmQgdXNlcyBQb3dlclNoZWxsJ3MgYC1lcWAgb3BlcmF0b3IgdG8gZGV0ZXJtaW5lIGlmIGl0IG1hdGNoZXMvaXMgZXF1YWwgdG8gYENvbnRhaW5zYCBlLmcuCiAgICAgICAgIwogICAgICAgICMgICAgIGZvcmVhY2goICRpdGVtIGluICRJbnB1dE9iamVjdC5HZXRFbnVtZXJhdG9yKCkgKQogICAgICAgICMgICAgIHsKICAgICAgICAjICAgICAgICAgaWYoICRpdGVtIC1lcSAkQ29udGFpbnMgKQogICAgICAgICMgICAgICAgICB7CiAgICAgICAgIyAgICAgICAgIH0KICAgICAgICAjICAgICB9CiAgICAgICAgIwogICAgICAgICMgSW4gYWxsIG90aGVyIGNhc2VzLCBgSW5wdXRPYmplY3RgIGFuZCBgQ29udGFpbnNgIGFyZSBjb252ZXJ0ZWQgdG8gc3RyaW5ncyBhbmQgY29tcGFyZWQgdXNpbmcgdGhlIGAtbGlrZWAgb3BlcmF0b3IuIEFueSB3aWxkY2FyZHMgaW4gYENvbnRhaW5zYCBhcmUgZXNjYXBlZCBhbmQgaXQgaXMgd3JhcHBlZCBpbiB0aGUgYCpgIHdpbGRjYXJkLCBlLmcuIGAkSW5wdXRPYmplY3QgLWxpa2UgKCcqezB9KicgLWYgW01hbmFnZW1lbnQuQXV0b21hdGlvbi5XaWxkY2FyZFBhdHRlcm5dOjpFc2NhcGUoJENvbnRhaW5zKSlgLgogICAgICAgICREb2VzTm90Q29udGFpbiwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsUGFyYW1ldGVyU2V0TmFtZT0nRG9lc05vdFRocm93RXhjZXB0aW9uJyldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAjIEFzc2VydHMgdGhhdCB0aGUgc2NyaXB0IGJsb2NrIGdpdmVuIGJ5IGBJbnB1dE9iamVjdGAgZG9lcyBub3QgdGhyb3cgYW4gZXhjZXB0aW9uLgogICAgICAgICREb2VzTm90VGhyb3dFeGNlcHRpb24sCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlLFBhcmFtZXRlclNldE5hbWU9J1Rocm93c0V4Y2VwdGlvbicpXQogICAgICAgIFtUeXBlXQogICAgICAgICMgVGhlIHR5cGUgb2YgdGhlIGV4Y2VwdGlvbiBgJElucHV0T2JqZWN0YCBzaG91bGQgdGhyb3cuIFdoZW4gdGhpcyBwYXJhbWV0ZXIgaXMgcHJvdmlkZWQsICRJTnB1dE9iamVjdCBzaG91bGQgYmUgYSBzY3JpcHQgYmxvY2suCiAgICAgICAgJFRocm93cywKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSdUaHJvd3NFeGNlcHRpb24nKV0KICAgICAgICBbc3RyaW5nXQogICAgICAgICMgVXNlZCB3aXRoIHRoZSBgVGhyb3dzYCBzd2l0Y2guIENoZWNrcyB0aGF0IHRoZSB0aHJvd24gZXhjZXB0aW9uIG1lc3NhZ2UgbWF0Y2hlcyBhIHJlZ3VsYXIgcmV4cHJlc3Npb24uCiAgICAgICAgJEFuZE1lc3NhZ2VNYXRjaGVzLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J0NvbnRhaW5zJyxQb3NpdGlvbj0xKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J0RvZXNOb3RDb250YWluJyxQb3NpdGlvbj0xKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWU9J1Rocm93c0V4Y2VwdGlvbicsUG9zaXRpb249MSldCiAgICAgICAgW3N0cmluZ10KICAgICAgICAjIFRoZSBtZXNzYWdlIHRvIHNob3cgd2hlbiB0aGUgYXNzZXJ0aW9uIGZhaWxzLgogICAgICAgICRNZXNzYWdlCiAgICApCgogICAgU2V0LVN0cmljdE1vZGUgLVZlcnNpb24gJ0xhdGVzdCcKCiAgICBzd2l0Y2goICRQU0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lICkKICAgIHsKICAgICAgICAnQ29udGFpbnMnCiAgICAgICAgewogICAgICAgICAgICAkaW50ZXJmYWNlcyA9ICRJbnB1dE9iamVjdC5HZXRUeXBlKCkuR2V0SW50ZXJmYWNlcygpCiAgICAgICAgICAgICRmYWlsdXJlTWVzc2FnZSA9IEAnCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KezB9Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCmRvZXMgbm90IGNvbnRhaW4KCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KezF9Ci0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCnsyfQonQCAtZiAkSW5wdXRPYmplY3QsJENvbnRhaW5zLCRNZXNzYWdlCgogICAgICAgICAgICBpZiggKCRpbnRlcmZhY2VzIHwgV2hlcmUtT2JqZWN0IHsgJF8uTmFtZSAtZXEgJ0lMaXN0JyB9ICkgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiggJElucHV0T2JqZWN0IC1ub3Rjb250YWlucyAkQ29udGFpbnMgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEZhaWwgJGZhaWx1cmVNZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCAoJGludGVyZmFjZXMgfCBXaGVyZS1PYmplY3QgeyAkXy5OYW1lIC1lcSAnSURpY3Rpb25hcnknIH0pICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoIC1ub3QgJElucHV0T2JqZWN0LkNvbnRhaW5zKCAkQ29udGFpbnMgKSApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgRmFpbCAkZmFpbHVyZU1lc3NhZ2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoICgkaW50ZXJmYWNlcyB8IFdoZXJlLU9iamVjdCB7ICRfLk5hbWUgLWVxICdJQ29sbGVjdGlvbicgfSApICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGZvdW5kID0gJGZhbHNlCiAgICAgICAgICAgICAgICBmb3JlYWNoKCAkaXRlbSBpbiAkSW5wdXRPYmplY3QuR2V0RW51bWVyYXRvcigpICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiggJGl0ZW0gLWVxICRDb250YWlucyApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkZm91bmQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiggLW5vdCAkZm91bmQgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEZhaWwgJGZhaWx1cmVNZXNzYWdlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiggJElucHV0T2JqZWN0LlRvU3RyaW5nKCkgLW5vdGxpa2UgKCcqezB9KicgLWYgW01hbmFnZW1lbnQuQXV0b21hdGlvbi5XaWxkY2FyZFBhdHRlcm5dOjpFc2NhcGUoJENvbnRhaW5zLlRvU3RyaW5nKCkpKSApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgRmFpbCAkZmFpbHVyZU1lc3NhZ2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJ0RvZXNOb3RDb250YWluJwogICAgICAgIHsKICAgICAgICAgICAgJGludGVyZmFjZXMgPSAkSW5wdXRPYmplY3QuR2V0VHlwZSgpLkdldEludGVyZmFjZXMoKQogICAgICAgICAgICAkZmFpbHVyZU1lc3NhZ2UgPSBAJwotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnswfQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb250YWlucwoKLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp7MX0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKezJ9CidAIC1mICRJbnB1dE9iamVjdCwkRG9lc05vdENvbnRhaW4sJE1lc3NhZ2UKCiAgICAgICAgICAgIGlmKCAoJGludGVyZmFjZXMgfCBXaGVyZS1PYmplY3QgeyAkXy5OYW1lIC1lcSAnSUxpc3QnIH0gKSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmKCAkSW5wdXRPYmplY3QgLWNvbnRhaW5zICREb2VzTm90Q29udGFpbiApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgRmFpbCAkZmFpbHVyZU1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoICgkaW50ZXJmYWNlcyB8IFdoZXJlLU9iamVjdCB7ICRfLk5hbWUgLWVxICdJRGljdGlvbmFyeScgfSkgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiggJElucHV0T2JqZWN0LkNvbnRhaW5zKCAkRG9lc05vdENvbnRhaW4gKSApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgRmFpbCAkZmFpbHVyZU1lc3NhZ2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoICgkaW50ZXJmYWNlcyB8IFdoZXJlLU9iamVjdCB7ICRfLk5hbWUgLWVxICdJQ29sbGVjdGlvbicgfSApICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGZvdW5kID0gJGZhbHNlCiAgICAgICAgICAgICAgICBmb3JlYWNoKCAkaXRlbSBpbiAkSW5wdXRPYmplY3QuR2V0RW51bWVyYXRvcigpICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiggJGl0ZW0gLWVxICREb2VzTm90Q29udGFpbiApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkZm91bmQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiggJGZvdW5kICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBGYWlsICRmYWlsdXJlTWVzc2FnZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYoICRDb250YWlucyAtZXEgJG51bGwgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRDb250YWlucyA9ICcnCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoICRJbnB1dE9iamVjdC5Ub1N0cmluZygpIC1saWtlICgnKnswfSonIC1mIFtNYW5hZ2VtZW50LkF1dG9tYXRpb24uV2lsZGNhcmRQYXR0ZXJuXTo6RXNjYXBlKCREb2VzTm90Q29udGFpbi5Ub1N0cmluZygpKSkgKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEZhaWwgJGZhaWx1cmVNZXNzYWdlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICdEb2VzTm90VGhyb3dFeGNlcHRpb24nCiAgICAgICAgewogICAgICAgICAgICBpZiggJElucHV0T2JqZWN0IC1pc25vdCBbc2NyaXB0YmxvY2tdICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgJ1doZW4gdXNpbmcgYERvZXNOb3RUaHJvd0V4Y2VwdGlvbmAgcGFyYW1ldGVyLCBgLUlucHV0T2JqZWN0YCBtdXN0IGJlIGEgU2NyaXB0QmxvY2suJwogICAgICAgICAgICB9CgogICAgICAgICAgICB0cnkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrICRJbnB1dE9iamVjdAogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEZhaWwgKCdTY3JpcHQgYmxvY2sgdGhyZXcgYW4gZXhjZXB0aW9uOiB7MH17MX17Mn17MX17M30nIC1mICRfLkV4Y2VwdGlvbi5NZXNzYWdlLChbRW52aXJvbm1lbnRdOjpOZXdMaW5lKSwkXy5TY3JpcHRTdGFja1RyYWNlLCRNZXNzYWdlKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAnVGhyb3dzRXhjZXB0aW9uJwogICAgICAgIHsKICAgICAgICAgICAgaWYoICRJbnB1dE9iamVjdCAtaXNub3QgW3NjcmlwdGJsb2NrXSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRocm93ICdXaGVuIHVzaW5nIGBUaHJvd3NgIHBhcmFtZXRlciwgYC1JbnB1dE9iamVjdGAgbXVzdCBiZSBhIFNjcmlwdEJsb2NrLicKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHRocmV3RXhjZXB0aW9uID0gJGZhbHNlCiAgICAgICAgICAgICRleCA9ICRudWxsCiAgICAgICAgICAgIHRyeQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJElucHV0T2JqZWN0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGV4ID0gJF8uRXhjZXB0aW9uCiAgICAgICAgICAgICAgICBpZiggJGV4IC1pcyAkVGhyb3dzICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkdGhyZXdFeGNlcHRpb24gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEZhaWwgKCdFeHBlY3RlZCBTY3JpcHRCbG9jayB0byB0aHJvdyBhIHswfSBleGNlcHRpb24sIGJ1dCBpdCB0aHJldzogezF9ICB7Mn0nIC1mICRUaHJvd3MsJGV4LCRNZXNzYWdlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiggLW5vdCAkdGhyZXdFeGNlcHRpb24gKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBGYWlsICgnU2NyaXB0QmxvY2sgZGlkIG5vdCB0aHJvdyBhICcnezB9JycgZXhjZXB0aW9uLiB7MX0nIC1mICRUaHJvd3MuRnVsbE5hbWUsJE1lc3NhZ2UpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCAkQW5kTWVzc2FnZU1hdGNoZXMgKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiggJGV4Lk1lc3NhZ2UgLW5vdG1hdGNoICRBbmRNZXNzYWdlTWF0Y2hlcyApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgRmFpbCAoJ0V4Y2VwdGlvbiBtZXNzYWdlICcnezB9JycgZG9lc24nJ3QgbWF0Y2ggJyd7MX0nJy4nIC1mICRleC5NZXNzYWdlLCRBbmRNZXNzYWdlTWF0Y2hlcykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQ==
