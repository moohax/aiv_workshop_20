AzureWebsitePublishModule.psm1,ed12464c18716b33f4f40eedc05eeba1,Scan result is 1. IsMalware: 0,w6/Cu8K/IyAgQXp1cmVXZWJTaXRlUHVibGlzaE1vZHVsZS5wc20xIGlzIGEgV2luZG93cyBQb3dlclNoZWxsIHNjcmlwdCBtb2R1bGUuIFRoaXMgbW9kdWxlIGV4cG9ydHMgV2luZG93cyBQb3dlclNoZWxsIGZ1bmN0aW9ucyB0aGF0IGF1dG9tYXRlIGxpZmUgY3ljbGUgbWFuYWdlbWVudCBmb3Igd2ViIGFwcGxpY2F0aW9ucy4gWW91IGNhbiB1c2UgdGhlIGZ1bmN0aW9ucyBhcyBpcyBvciBjdXN0b21pemUgdGhlbSBmb3IgeW91ciBhcHBsaWNhdGlvbiBhbmQgcHVibGlzaGluZyBlbnZpcm9ubWVudC4KClNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDMKCiMgQSB2YXJpYWJsZSB0byBzYXZlIG9yaWdpbmFsIHN1YnNjcmlwdGlvbi4KJFNjcmlwdDpvcmlnaW5hbEN1cnJlbnRTdWJzY3JpcHRpb24gPSAkbnVsbAoKIyBBIHZhcmlhYmxlIHRvIHNhdmUgb3JpZ2luYWwgc3RvcmFnZSBhY2NvdW50LgokU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN0b3JhZ2VBY2NvdW50ID0gJG51bGwKCiMgQSB2YXJpYWJsZSB0byBzYXZlIHN0b3JhZ2UgYWNjb3VudCBvZiB1c2VyIHNwZWNpZmllZCBzdWJzY3JpcHRpb24uCiRTY3JpcHQ6b3JpZ2luYWxTdG9yYWdlQWNjb3VudE9mVXNlclNwZWNpZmllZFN1YnNjcmlwdGlvbiA9ICRudWxsCgojIEEgdmFyaWFibGUgdG8gc2F2ZSBzdWJzY3JpcHRpb24gbmFtZS4KJFNjcmlwdDp1c2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uID0gJG51bGwKCgo8IwouU1lOT1BTSVMKUHJlcGVuZHMgdGhlIGRhdGUgYW5kIHRpbWUgdG8gYSBtZXNzYWdlLgoKLkRFU0NSSVBUSU9OClByZXBlbmRzIHRoZSBkYXRlIGFuZCB0aW1lIHRvIGEgbWVzc2FnZS4gVGhpcyBmdW5jdGlvbiBpcyBkZXNpZ25lZCBmb3IgbWVzc2FnZXMgd3JpdHRlbiB0byB0aGUgRXJyb3IgYW5kIFZlcmJvc2Ugc3RyZWFtcy4KCi5QQVJBTUVURVIgIE1lc3NhZ2UKU3BlY2lmaWVzIHRoZSBtZXNzYWdlcyB3aXRob3V0IHRoZSBkYXRlLgoKLklOUFVUUwpTeXN0ZW0uU3RyaW5nCgouT1VUUFVUUwpTeXN0ZW0uU3RyaW5nCgouRVhBTVBMRQpQUyBDOlw+IEZvcm1hdC1EZXZUZXN0TWVzc2FnZVdpdGhUaW1lIC1NZXNzYWdlICJBZGRpbmcgZmlsZSAkZmlsZW5hbWUgdG8gdGhlIGRpcmVjdG9yeSIKMi81LzIwMTQgMTowMzowOCBQTSAtIEFkZGluZyBmaWxlICRmaWxlbmFtZSB0byB0aGUgZGlyZWN0b3J5CgouTElOSwpXcml0ZS1WZXJib3NlV2l0aFRpbWUKCi5MSU5LCldyaXRlLUVycm9yV2l0aFRpbWUKIz4KZnVuY3Rpb24gRm9ybWF0LURldlRlc3RNZXNzYWdlV2l0aFRpbWUKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkdHJ1ZSwgVmFsdWVGcm9tUGlwZWxpbmUgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTWVzc2FnZQogICAgKQoKICAgIHJldHVybiAoKEdldC1EYXRlIC1Gb3JtYXQgRykgICsgJyAtICcgKyAkTWVzc2FnZSkKfQoKCjwjCgouU1lOT1BTSVMKV3JpdGVzIGFuIGVycm9yIG1lc3NhZ2UgcHJlZml4ZWQgd2l0aCB0aGUgY3VycmVudCB0aW1lLgoKLkRFU0NSSVBUSU9OCldyaXRlcyBhbiBlcnJvciBtZXNzYWdlIHByZWZpeGVkIHdpdGggdGhlIGN1cnJlbnQgdGltZS4gVGhpcyBmdW5jdGlvbiBjYWxscyB0aGUgRm9ybWF0LURldlRlc3RNZXNzYWdlV2l0aFRpbWUgZnVuY3Rpb24gdG8gcHJlcGVuZCB0aGUgdGltZSBiZWZvcmUgd3JpdGluZyB0aGUgbWVzc2FnZSB0byB0aGUgRXJyb3Igc3RyZWFtLgoKLlBBUkFNRVRFUiAgTWVzc2FnZQpTcGVjaWZpZXMgdGhlIG1lc3NhZ2UgaW4gdGhlIGVycm9yIG1lc3NhZ2UgY2FsbC4gWW91IGNhbiBwaXBlIHRoZSBtZXNzYWdlIHN0cmluZyB0byB0aGUgZnVuY3Rpb24uCgouSU5QVVRTClN5c3RlbS5TdHJpbmcKCi5PVVRQVVRTCk5vbmUuIFRoZSBmdW5jdGlvbiB3cml0ZXMgdG8gdGhlIEVycm9yIHN0cmVhbS4KCi5FWEFNUExFClBTIEM6PiBXcml0ZS1FcnJvcldpdGhUaW1lIC1NZXNzYWdlICJGYWlsZWQuIENhbm5vdCBmaW5kIHRoZSBmaWxlLiIKCldyaXRlLUVycm9yOiAyLzYvMjAxNCA4OjM3OjI5IEFNIC0gRmFpbGVkLiBDYW5ub3QgZmluZCB0aGUgZmlsZS4KICsgQ2F0ZWdvcnlJbmZvICAgICA6IE5vdFNwZWNpZmllZDogKDopIFtXcml0ZS1FcnJvcl0sIFdyaXRlRXJyb3JFeGNlcHRpb24KICsgRnVsbHlRdWFsaWZpZWRFcnJvcklkIDogTWljcm9zb2Z0LlBvd2VyU2hlbGwuQ29tbWFuZHMuV3JpdGVFcnJvckV4Y2VwdGlvbgoKLkxJTksKV3JpdGUtRXJyb3IKCiM+CmZ1bmN0aW9uIFdyaXRlLUVycm9yV2l0aFRpbWUKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkdHJ1ZSwgVmFsdWVGcm9tUGlwZWxpbmUgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTWVzc2FnZQogICAgKQoKICAgICRNZXNzYWdlIHwgRm9ybWF0LURldlRlc3RNZXNzYWdlV2l0aFRpbWUgfCBXcml0ZS1FcnJvcgp9CgoKPCMKLlNZTk9QU0lTCldyaXRlcyBhIHZlcmJvc2UgbWVzc2FnZSBwcmVmaXhlZCB3aXRoIHRoZSBjdXJyZW50IHRpbWUuCgouREVTQ1JJUFRJT04KV3JpdGVzIGEgdmVyYm9zZSBtZXNzYWdlIHByZWZpeGVkIHdpdGggdGhlIGN1cnJlbnQgdGltZS4gQmVjYXVzZSBpdCBjYWxscyBXcml0ZS1WZXJib3NlLCB0aGUgbWVzc2FnZSBkaXNwbGF5cyBvbmx5IHdoZW4gdGhlIHNjcmlwdCBydW5zIHdpdGggdGhlIFZlcmJvc2UgcGFyYW1ldGVyIG9yIHdoZW4gdGhlIFZlcmJvc2VQcmVmZXJlbmNlIHByZWZlcmVuY2UgaXMgc2V0IHRvIENvbnRpbnVlLgoKLlBBUkFNRVRFUiAgTWVzc2FnZQpTcGVjaWZpZXMgdGhlIG1lc3NhZ2UgaW4gdGhlIHZlcmJvc2UgbWVzc2FnZSBjYWxsLiBZb3UgY2FuIHBpcGUgdGhlIG1lc3NhZ2Ugc3RyaW5nIHRvIHRoZSBmdW5jdGlvbi4KCi5JTlBVVFMKU3lzdGVtLlN0cmluZwoKLk9VVFBVVFMKTm9uZS4gVGhlIGZ1bmN0aW9uIHdyaXRlcyB0byB0aGUgVmVyYm9zZSBzdHJlYW0uCgouRVhBTVBMRQpQUyBDOj4gV3JpdGUtVmVyYm9zZVdpdGhUaW1lIC1NZXNzYWdlICJUaGUgb3BlcmF0aW9uIHN1Y2NlZWRlZC4iClBTIEM6PgpQUyBDOlw+IFdyaXRlLVZlcmJvc2VXaXRoVGltZSAtTWVzc2FnZSAiVGhlIG9wZXJhdGlvbiBzdWNjZWVkZWQuIiAtVmVyYm9zZQpWRVJCT1NFOiAxLzI3LzIwMTQgMTE6MDI6MzcgQU0gLSBUaGUgb3BlcmF0aW9uIHN1Y2NlZWRlZC4KCi5FWEFNUExFClBTIEM6XHBzLXRlc3Q+ICJUaGUgb3BlcmF0aW9uIHN1Y2NlZWRlZC4iIHwgV3JpdGUtVmVyYm9zZVdpdGhUaW1lIC1WZXJib3NlClZFUkJPU0U6IDEvMjcvMjAxNCAxMTowMTozOCBBTSAtIFRoZSBvcGVyYXRpb24gc3VjY2VlZGVkLgoKLkxJTksKV3JpdGUtVmVyYm9zZQojPgpmdW5jdGlvbiBXcml0ZS1WZXJib3NlV2l0aFRpbWUKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkdHJ1ZSwgVmFsdWVGcm9tUGlwZWxpbmUgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTWVzc2FnZQogICAgKQoKICAgICRNZXNzYWdlIHwgRm9ybWF0LURldlRlc3RNZXNzYWdlV2l0aFRpbWUgfCBXcml0ZS1WZXJib3NlCn0KCgo8IwouU1lOT1BTSVMKV3JpdGVzIGEgaG9zdCBtZXNzYWdlIHByZWZpeGVkIHdpdGggdGhlIGN1cnJlbnQgdGltZS4KCi5ERVNDUklQVElPTgpUaGlzIGZ1bmN0aW9uIHdyaXRlcyBhIG1lc3NhZ2UgdG8gdGhlIGhvc3QgcHJvZ3JhbSAoV3JpdGUtSG9zdCkgcHJlZml4ZWQgd2l0aCB0aGUgY3VycmVudCB0aW1lLiBUaGUgZWZmZWN0IG9mIHdyaXRpbmcgdG8gdGhlIGhvc3QgcHJvZ3JhbSB2YXJpZXMuIE1vc3QgcHJvZ3JhbXMgdGhhdCBob3N0IFdpbmRvd3MgUG93ZXJTaGVsbCB3cml0ZSB0aGVzZSBtZXNzYWdlcyB0byBzdGFuZGFyZCBvdXRwdXQuCgouUEFSQU1FVEVSICBNZXNzYWdlClNwZWNpZmllcyB0aGUgYmFzZSBtZXNzYWdlIHdpdGhvdXQgdGhlIGRhdGUuIFlvdSBjYW4gcGlwZSB0aGUgbWVzc2FnZSBzdHJpbmcgdG8gdGhlIGZ1bmN0aW9uLgoKLklOUFVUUwpTeXN0ZW0uU3RyaW5nCgouT1VUUFVUUwpOb25lLiBUaGUgZnVuY3Rpb24gd3JpdGVzIHRoZSBtZXNzYWdlIHRvIHRoZSBob3N0IHByb2dyYW0uCgouRVhBTVBMRQpQUyBDOj4gV3JpdGUtSG9zdFdpdGhUaW1lIC1NZXNzYWdlICJUaGUgb3BlcmF0aW9uIHN1Y2NlZWRlZC4iCjEvMjcvMjAxNCAxMTowMjozNyBBTSAtIFRoZSBvcGVyYXRpb24gc3VjY2VlZGVkLgoKLkxJTksKV3JpdGUtSG9zdAojPgpmdW5jdGlvbiBXcml0ZS1Ib3N0V2l0aFRpbWUKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkdHJ1ZSwgVmFsdWVGcm9tUGlwZWxpbmUgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTWVzc2FnZQogICAgKQogICAgCiAgICBpZiAoKEdldC1WYXJpYWJsZSBTZW5kSG9zdE1lc3NhZ2VzVG9PdXRwdXQgLVNjb3BlIEdsb2JhbCAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkgLWFuZCAkR2xvYmFsOlNlbmRIb3N0TWVzc2FnZXNUb091dHB1dCkKICAgIHsKICAgICAgICBpZiAoIShHZXQtVmFyaWFibGUgLVNjb3BlIEdsb2JhbCBBenVyZVdlYkFwcFB1Ymxpc2hPdXRwdXQgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpIC1vciAhJEdsb2JhbDpBenVyZVdlYkFwcFB1Ymxpc2hPdXRwdXQpCiAgICAgICAgewogICAgICAgICAgICBOZXctVmFyaWFibGUgLU5hbWUgQXp1cmVXZWJBcHBQdWJsaXNoT3V0cHV0IC1WYWx1ZSBAKCkgLVNjb3BlIEdsb2JhbCAtRm9yY2UKICAgICAgICB9CgogICAgICAgICRHbG9iYWw6QXp1cmVXZWJBcHBQdWJsaXNoT3V0cHV0ICs9ICRNZXNzYWdlIHwgRm9ybWF0LURldlRlc3RNZXNzYWdlV2l0aFRpbWUKICAgIH0KICAgIGVsc2UgCiAgICB7CiAgICAgICAgJE1lc3NhZ2UgfCBGb3JtYXQtRGV2VGVzdE1lc3NhZ2VXaXRoVGltZSB8IFdyaXRlLUhvc3QKICAgIH0KfQoKCjwjCi5TWU5PUFNJUwpSZXR1cm5zICR0cnVlIGlmIGEgcHJvcGVydHkgb3IgbWV0aG9kIGlzIGEgbWVtYmVyIG9mIHRoZSBvYmplY3QuIE90aGVyd2lzZSwgJGZhbHNlLgoKLkRFU0NSSVBUSU9OClJldHVybnMgJHRydWUgaWYgdGhlIHByb3BlcnR5IG9yIG1ldGhvZCBpcyBhIG1lbWJlciBvZiB0aGUgb2JqZWN0LiBUaGlzIGZ1bmN0aW9uIHJldHVybnMgJGZhbHNlIGZvciBzdGF0aWMgbWV0aG9kcyBvZiB0aGUgY2xhc3MgYW5kIGZvciB2aWV3cywgc3VjaCBhcyBQU0Jhc2UgYW5kIFBTT2JqZWN0LgoKLlBBUkFNRVRFUiAgT2JqZWN0ClNwZWNpZmllcyB0aGUgb2JqZWN0IGluIHRoZSB0ZXN0LiBFbnRlciBhIHZhcmlhYmxlIHRoYXQgY29udGFpbnMgYW4gb2JqZWN0IG9yIGFuIGV4cHJlc3Npb24gdGhhdCByZXR1cm5zIGFuIG9iamVjdC4gWW91IGNhbm5vdCBzcGVjaWZ5IHR5cGVzLCBzdWNoIGFzIFtEYXRlVGltZV0gb3IgcGlwZSBvYmplY3RzIHRvIHRoaXMgZnVuY3Rpb24uCgouUEFSQU1FVEVSICBNZW1iZXIKU3BlY2lmaWVzIHRoZSBuYW1lIG9mIHRoZSBwcm9wZXJ0eSBvciBtZXRob2QgaW4gdGhlIHRlc3QuIFdoZW4gc3BlY2lmeWluZyBhIG1ldGhvZCwgb21pdCBwYXJlbnRoZXNlcyB0aGF0IGZvbGxvdyB0aGUgbWV0aG9kIG5hbWUuCgouSU5QVVRTCk5vbmUuIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgdGFrZSBpbnB1dCBmcm9tIHRoZSBwaXBlbGluZS4KCi5PVVRQVVRTClN5c3RlbS5Cb29sZWFuCgouRVhBTVBMRQpQUyBDOlw+IFRlc3QtTWVtYmVyIC1PYmplY3QgKEdldC1EYXRlKSAtTWVtYmVyIERheU9mV2VlawpUcnVlCgouRVhBTVBMRQpQUyBDOlw+ICRkYXRlID0gR2V0LURhdGUKUFMgQzpcPiBUZXN0LU1lbWJlciAtT2JqZWN0ICRkYXRlIC1NZW1iZXIgQWRkRGF5cwpUcnVlCgouRVhBTVBMRQpQUyBDOlw+IFtEYXRlVGltZV06OklzTGVhcFllYXIoKEdldC1EYXRlKS5ZZWFyKQpUcnVlClBTIEM6XD4gVGVzdC1NZW1iZXIgLU9iamVjdCAoR2V0LURhdGUpIC1NZW1iZXIgSXNMZWFwWWVhcgpGYWxzZQoKLkxJTksKR2V0LU1lbWJlcgojPgpmdW5jdGlvbiBUZXN0LU1lbWJlcgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbT2JqZWN0XQogICAgICAgICRPYmplY3QsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE1lbWJlcgogICAgKQoKICAgIHJldHVybiAkbnVsbCAtbmUgKCRPYmplY3QgfCBHZXQtTWVtYmVyIC1OYW1lICRNZW1iZXIpCn0KCgo8IwouU1lOT1BTSVMKUmV0dXJucyAkdHJ1ZSBpZiB0aGUgdmVyc2lvbiBvZiB0aGUgQXp1cmUgbW9kdWxlIGlzIDAuNy40IG9yIGxhdGVyLiBFbHNlLCAkZmFsc2UuCgouREVTQ1JJUFRJT04KVGVzdC1BenVyZU1vZHVsZVZlcnNpb24gcmV0dXJucyAkdHJ1ZSBpZiB0aGUgdmVyc2lvbiBvZiB0aGUgQXp1cmUgbW9kdWxlIGlzIDAuNy40IG9yIGxhdGVyLiBJdCByZXR1cm5zICRmYWxzZSBpZiB0aGUgbW9kdWxlIGlzbid0IGluc3RhbGxlZCBvciBpcyBhbiBlYXJsaWVyIHZlcnNpb24uIFRoaXMgZnVuY3Rpb24gaGFzIG5vIHBhcmFtZXRlcnMuCgouSU5QVVRTCk5vbmUKCi5PVVRQVVRTClN5c3RlbS5Cb29sZWFuCgouRVhBTVBMRQpQUyBDOlw+IEdldC1Nb2R1bGUgQXp1cmUgLUxpc3RBdmFpbGFibGUKUFMgQzpcPiAjTm8gbW9kdWxlClBTIEM6XD4gVGVzdC1BenVyZU1vZHVsZVZlcnNpb24KRmFsc2UKCi5FWEFNUExFClBTIEM6XD4gKEdldC1Nb2R1bGUgQXp1cmUgLUxpc3RBdmFpbGFibGUpLlZlcnNpb24KCk1ham9yICBNaW5vciAgQnVpbGQgIFJldmlzaW9uCi0tLS0tICAtLS0tLSAgLS0tLS0gIC0tLS0tLS0tCjAgICAgICA3ICAgICAgNCAgICAgIC0xCgpQUyBDOlw+IFRlc3QtQXp1cmVNb2R1bGVWZXJzaW9uClRydWUKCi5MSU5LCkdldC1Nb2R1bGUKCi5MSU5LClBTTW9kdWxlSW5mbyBvYmplY3QgKGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9zeXN0ZW0ubWFuYWdlbWVudC5hdXRvbWF0aW9uLnBzbW9kdWxlaW5mbyh2PXZzLjg1KS5hc3B4KQojPgpmdW5jdGlvbiBUZXN0LUF6dXJlTW9kdWxlVmVyc2lvbgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICAgICAgW1N5c3RlbS5WZXJzaW9uXQogICAgICAgICRWZXJzaW9uCiAgICApCgogICAgcmV0dXJuICgkVmVyc2lvbi5NYWpvciAtZ3QgMCkgLW9yICgkVmVyc2lvbi5NaW5vciAtZ3QgNykgLW9yICgkVmVyc2lvbi5NaW5vciAtZXEgNyAtYW5kICRWZXJzaW9uLkJ1aWxkIC1nZSA0KQp9CgoKPCMKLlNZTk9QU0lTClJldHVybnMgJHRydWUgaWYgdGhlIGluc3RhbGxlZCBBenVyZSBtb2R1bGUgdmVyc2lvbiBpcyAwLjcuNCBvciBsYXRlci4KCi5ERVNDUklQVElPTgpUZXN0LUF6dXJlTW9kdWxlIHJldHVybnMgJHRydWUgaWYgdGhlIGluc3RhbGxlZCBBenVyZSBtb2R1bGUgdmVyc2lvbiBpcyAwLjcuNCBvciBsYXRlci4gUmV0dXJucyAkZmFsc2UgaWYgdGhlIG1vZHVsZSBpc24ndCBpbnN0YWxsZWQgb3IgaXMgYW4gZWFybGllciB2ZXJzaW9uLiBUaGlzIGZ1bmN0aW9uIGhhcyBubyBwYXJhbWV0ZXJzLgoKLklOUFVUUwpOb25lCgouT1VUUFVUUwpTeXN0ZW0uQm9vbGVhbgoKLkVYQU1QTEUKUFMgQzpcPiBHZXQtTW9kdWxlIEF6dXJlIC1MaXN0QXZhaWxhYmxlClBTIEM6XD4gI05vIG1vZHVsZQpQUyBDOlw+IFRlc3QtQXp1cmVNb2R1bGUKRmFsc2UKCi5FWEFNUExFClBTIEM6XD4gKEdldC1Nb2R1bGUgQXp1cmUgLUxpc3RBdmFpbGFibGUpLlZlcnNpb24KCk1ham9yICBNaW5vciAgQnVpbGQgIFJldmlzaW9uCi0tLS0tICAtLS0tLSAgLS0tLS0gIC0tLS0tLS0tCiAgICAwICAgICAgNyAgICAgIDQgICAgICAtMQoKUFMgQzpcPiBUZXN0LUF6dXJlTW9kdWxlClRydWUKCi5MSU5LCkdldC1Nb2R1bGUKCi5MSU5LClBTTW9kdWxlSW5mbyBvYmplY3QgKGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9zeXN0ZW0ubWFuYWdlbWVudC5hdXRvbWF0aW9uLnBzbW9kdWxlaW5mbyh2PXZzLjg1KS5hc3B4KQojPgpmdW5jdGlvbiBUZXN0LUF6dXJlTW9kdWxlCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCgogICAgJG1vZHVsZSA9IEdldC1Nb2R1bGUgLU5hbWUgQXp1cmUKCiAgICBpZiAoISRtb2R1bGUpCiAgICB7CiAgICAgICAgJG1vZHVsZSA9IEdldC1Nb2R1bGUgLU5hbWUgQXp1cmUgLUxpc3RBdmFpbGFibGUKCiAgICAgICAgaWYgKCEkbW9kdWxlIC1vciAhKFRlc3QtQXp1cmVNb2R1bGVWZXJzaW9uICRtb2R1bGUuVmVyc2lvbikpCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gJGZhbHNlOwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ0NvbnRpbnVlJwogICAgICAgICAgICBJbXBvcnQtTW9kdWxlIC1OYW1lIEF6dXJlIC1HbG9iYWwgLVZlcmJvc2U6JGZhbHNlCiAgICAgICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAnU3RvcCcKCiAgICAgICAgICAgIHJldHVybiAkdHJ1ZQogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICByZXR1cm4gKFRlc3QtQXp1cmVNb2R1bGVWZXJzaW9uICRtb2R1bGUuVmVyc2lvbikKICAgIH0KfQoKCjwjCi5TWU5PUFNJUwpTYXZlcyB0aGUgY3VycmVudCBNaWNyb3NvZnQgQXp1cmUgc3Vic2NyaXB0aW9uIGluIHRoZSAkU2NyaXB0Om9yaWdpbmFsU3Vic2NyaXB0aW9uIHZhcmlhYmxlIGluIHNjcmlwdCBzY29wZS4KCi5ERVNDUklQVElPTgpUaGUgQmFja3VwLVN1YnNjcmlwdGlvbiBmdW5jdGlvbiBzYXZlcyB0aGUgY3VycmVudCBNaWNyb3NvZnQgQXp1cmUgc3Vic2NyaXB0aW9uIChHZXQtQXp1cmVTdWJzY3JpcHRpb24gLUN1cnJlbnQpIGFuZCBpdHMgc3RvcmFnZSBhY2NvdW50LCBhbmQgdGhlIHN1YnNjcmlwdGlvbiB0aGF0IGlzIGNoYW5nZWQgYnkgdGhpcyBzY3JpcHQgKCRVc2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uKSBhbmQgaXRzIHN0b3JhZ2UgYWNjb3VudCwgaW4gc2NyaXB0IHNjb3BlLiBCeSBzYXZpbmcgdGhlIHZhbHVlcywgeW91IGNhbiB1c2UgYSBmdW5jdGlvbiwgc3VjaCBhcyBSZXN0b3JlLVN1YnNjcmlwdGlvbiwgdG8gcmVzdG9yZSB0aGUgb3JpZ2luYWwgY3VycmVudCBzdWJzY3JpcHRpb24gYW5kIHN0b3JhZ2UgYWNjb3VudCB0byBjdXJyZW50IHN0YXR1cyBpZiB0aGUgY3VycmVudCBzdGF0dXMgaGFzIGNoYW5nZWQuCgouUEFSQU1FVEVSIFVzZXJTcGVjaWZpZWRTdWJzY3JpcHRpb24KU3BlY2lmaWVzIHRoZSBuYW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gaW4gd2hpY2ggdGhlIG5ldyByZXNvdXJjZXMgd2lsbCBiZSBjcmVhdGVkIGFuZCBwdWJsaXNoZWQuIFRoZSBmdW5jdGlvbiBzYXZlcyB0aGUgbmFtZXMgb2YgdGhlIHN1YnNjcmlwdGlvbiBhbmQgaXRzIHN0b3JhZ2UgYWNjb3VudHMgaW4gc2NyaXB0IHNjb3BlLiBUaGlzIHBhcmFtZXRlciBpcyByZXF1aXJlZC4KCi5JTlBVVFMKTm9uZQoKLk9VVFBVVFMKTm9uZQoKLkVYQU1QTEUKUFMgQzpcPiBCYWNrdXAtU3Vic2NyaXB0aW9uIC1Vc2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uIENvbnRvc28KUFMgQzpcPgoKLkVYQU1QTEUKUFMgQzpcPiBCYWNrdXAtU3Vic2NyaXB0aW9uIC1Vc2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uIENvbnRvc28gLVZlcmJvc2UKVkVSQk9TRTogQmFja3VwLVN1YnNjcmlwdGlvbjogU3RhcnQKVkVSQk9TRTogQmFja3VwLVN1YnNjcmlwdGlvbjogT3JpZ2luYWwgc3Vic2NyaXB0aW9uIGlzIE1pY3Jvc29mdCBBenVyZSBNU0ROIC0gVmlzdWFsIFN0dWRpbyBVbHRpbWF0ZQpWRVJCT1NFOiBCYWNrdXAtU3Vic2NyaXB0aW9uOiBFbmQKIz4KZnVuY3Rpb24gQmFja3VwLVN1YnNjcmlwdGlvbgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbQWxsb3dFbXB0eVN0cmluZygpXQogICAgICAgIFtzdHJpbmddCiAgICAgICAgJFVzZXJTcGVjaWZpZWRTdWJzY3JpcHRpb24KICAgICkKCiAgICBXcml0ZS1WZXJib3NlV2l0aFRpbWUgJ0JhY2t1cC1TdWJzY3JpcHRpb246IFN0YXJ0JwoKICAgICRTY3JpcHQ6b3JpZ2luYWxDdXJyZW50U3Vic2NyaXB0aW9uID0gR2V0LUF6dXJlU3Vic2NyaXB0aW9uIC1DdXJyZW50IC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCiAgICBpZiAoJFNjcmlwdDpvcmlnaW5hbEN1cnJlbnRTdWJzY3JpcHRpb24pCiAgICB7CiAgICAgICAgV3JpdGUtVmVyYm9zZVdpdGhUaW1lICgnQmFja3VwLVN1YnNjcmlwdGlvbjogT3JpZ2luYWwgc3Vic2NyaXB0aW9uIGlzICcgKyAkU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN1YnNjcmlwdGlvbi5TdWJzY3JpcHRpb25OYW1lKQogICAgICAgICRTY3JpcHQ6b3JpZ2luYWxDdXJyZW50U3RvcmFnZUFjY291bnQgPSAkU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN1YnNjcmlwdGlvbi5DdXJyZW50U3RvcmFnZUFjY291bnROYW1lCiAgICB9CiAgICAKICAgICRTY3JpcHQ6dXNlclNwZWNpZmllZFN1YnNjcmlwdGlvbiA9ICRVc2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uCiAgICBpZiAoJFNjcmlwdDp1c2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uKQogICAgeyAgICAgICAgCiAgICAgICAgJHVzZXJTdWJzY3JpcHRpb24gPSBHZXQtQXp1cmVTdWJzY3JpcHRpb24gLVN1YnNjcmlwdGlvbk5hbWUgJFNjcmlwdDp1c2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCiAgICAgICAgaWYgKCR1c2VyU3Vic2NyaXB0aW9uKQogICAgICAgIHsKICAgICAgICAgICAgJFNjcmlwdDpvcmlnaW5hbFN0b3JhZ2VBY2NvdW50T2ZVc2VyU3BlY2lmaWVkU3Vic2NyaXB0aW9uID0gJHVzZXJTdWJzY3JpcHRpb24uQ3VycmVudFN0b3JhZ2VBY2NvdW50TmFtZQogICAgICAgIH0gICAgICAgIAogICAgfQoKICAgIFdyaXRlLVZlcmJvc2VXaXRoVGltZSAnQmFja3VwLVN1YnNjcmlwdGlvbjogRW5kJwp9CgoKPCMKLlNZTk9QU0lTClJlc3RvcmVzIHRvICJjdXJyZW50IiBzdGF0dXMgdGhlIE1pY3Jvc29mdCBBenVyZSBzdWJzY3JpcHRpb24gdGhhdCBpcyBzYXZlZCBpbiB0aGUgJFNjcmlwdDpvcmlnaW5hbFN1YnNjcmlwdGlvbiB2YXJpYWJsZSBpbiBzY3JpcHQgc2NvcGUuCgouREVTQ1JJUFRJT04KVGhlIFJlc3RvcmUtU3Vic2NyaXB0aW9uIGZ1bmN0aW9uIG1ha2VzIHRoZSBzdWJzY3JpcHRpb24gdGhhdCBpcyBzYXZlZCBpbiB0aGUgJFNjcmlwdDpvcmlnaW5hbFN1YnNjcmlwdGlvbiB2YXJpYWJsZSB0aGUgY3VycmVudCBzdWJzY3JpcHRpb24gKGFnYWluKS4gSWYgdGhlIG9yaWdpbmFsIHN1YnNjcmlwdGlvbiBoYXMgYSBzdG9yYWdlIGFjY291bnQsIHRoaXMgZnVuY3Rpb24gbWFrZXMgdGhhdCBzdG9yYWdlIGFjY291bnQgY3VycmVudCBmb3IgdGhlIGN1cnJlbnQgc3Vic2NyaXB0aW9uLiAgVGhlIGZ1bmN0aW9uIHJlc3RvcmVzIHRoZSBzdWJzY3JpcHRpb24gb25seSBpZiB0aGVyZSBpcyBhIG5vbi1udWxsICRTdWJzY3JpcHRpb25OYW1lIHZhcmlhYmxlIGluIHRoZSBlbnZpcm9ubWVudC4gT3RoZXJ3aXNlLCBpdCBleGl0cy4gIElmIHRoZSAkU3Vic2NyaXB0aW9uTmFtZSBpcyBwb3B1bGF0ZWQsIGJ1dCAkU2NyaXB0Om9yaWdpbmFsU3Vic2NyaXB0aW9uIGlzICRudWxsLCBSZXN0b3JlLVN1YnNjcmlwdGlvbiB1c2VzIHRoZSBTZWxlY3QtQXp1cmVTdWJzY3JpcHRpb24gY21kbGV0IHRvIGNsZWFyIHRoZSBDdXJyZW50IGFuZCBEZWZhdWx0IHNldHRpbmdzIGZvciBzdWJzY3JpcHRpb25zIGluIE1pY3Jvc29mdCBBenVyZSBQb3dlclNoZWxsLiAgVGhpcyBmdW5jdGlvbiBkb2Vzbid0IGhhdmUgcGFyYW1ldGVycywgaXQgdGFrZXMgbm8gaW5wdXQsIGFuZCBpdCByZXR1cm5zIG5vdGhpbmcgKHZvaWQpLiBZb3UgY2FuIHVzZSAtVmVyYm9zZSB0byB3cml0ZSBtZXNzYWdlcyB0byB0aGUgVmVyYm9zZSBzdHJlYW0uCgouSU5QVVRTCk5vbmUKCi5PVVRQVVRTCk5vbmUKCi5FWEFNUExFClBTIEM6XD4gUmVzdG9yZS1TdWJzY3JpcHRpb24KUFMgQzpcPgoKLkVYQU1QTEUKUFMgQzpcPiBSZXN0b3JlLVN1YnNjcmlwdGlvbiAtVmVyYm9zZQpWRVJCT1NFOiBSZXN0b3JlLVN1YnNjcmlwdGlvbjogU3RhcnQKVkVSQk9TRTogUmVzdG9yZS1TdWJzY3JpcHRpb246IEVuZAojPgpmdW5jdGlvbiBSZXN0b3JlLVN1YnNjcmlwdGlvbgp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0oKQoKICAgIFdyaXRlLVZlcmJvc2VXaXRoVGltZSAnUmVzdG9yZS1TdWJzY3JpcHRpb246IFN0YXJ0JwoKICAgIGlmICgkU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN1YnNjcmlwdGlvbikKICAgIHsKICAgICAgICBpZiAoJFNjcmlwdDpvcmlnaW5hbEN1cnJlbnRTdG9yYWdlQWNjb3VudCkKICAgICAgICB7CiAgICAgICAgICAgIFNldC1BenVyZVN1YnNjcmlwdGlvbiBgCiAgICAgICAgICAgICAgICAtU3Vic2NyaXB0aW9uTmFtZSAkU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN1YnNjcmlwdGlvbi5TdWJzY3JpcHRpb25OYW1lIGAKICAgICAgICAgICAgICAgIC1DdXJyZW50U3RvcmFnZUFjY291bnROYW1lICRTY3JpcHQ6b3JpZ2luYWxDdXJyZW50U3RvcmFnZUFjY291bnQKICAgICAgICB9CgogICAgICAgIFNlbGVjdC1BenVyZVN1YnNjcmlwdGlvbiAtU3Vic2NyaXB0aW9uTmFtZSAkU2NyaXB0Om9yaWdpbmFsQ3VycmVudFN1YnNjcmlwdGlvbi5TdWJzY3JpcHRpb25OYW1lCiAgICB9CiAgICBlbHNlIAogICAgewogICAgICAgIFNlbGVjdC1BenVyZVN1YnNjcmlwdGlvbiAtTm9DdXJyZW50CiAgICAgICAgU2VsZWN0LUF6dXJlU3Vic2NyaXB0aW9uIC1Ob0RlZmF1bHQKICAgIH0KICAgIAogICAgaWYgKCRTY3JpcHQ6dXNlclNwZWNpZmllZFN1YnNjcmlwdGlvbiAtYW5kICRTY3JpcHQ6b3JpZ2luYWxTdG9yYWdlQWNjb3VudE9mVXNlclNwZWNpZmllZFN1YnNjcmlwdGlvbikKICAgIHsKICAgICAgICBTZXQtQXp1cmVTdWJzY3JpcHRpb24gYAogICAgICAgICAgICAtU3Vic2NyaXB0aW9uTmFtZSAkU2NyaXB0OnVzZXJTcGVjaWZpZWRTdWJzY3JpcHRpb24gYAogICAgICAgICAgICAtQ3VycmVudFN0b3JhZ2VBY2NvdW50TmFtZSAkU2NyaXB0Om9yaWdpbmFsU3RvcmFnZUFjY291bnRPZlVzZXJTcGVjaWZpZWRTdWJzY3JpcHRpb24KICAgIH0KCiAgICBXcml0ZS1WZXJib3NlV2l0aFRpbWUgJ1Jlc3RvcmUtU3Vic2NyaXB0aW9uOiBFbmQnCn0KCgo8IwouU1lOT1BTSVMKVmFsaWRhdGVzIHRoZSBjb25maWcgZmlsZSBhbmQgcmV0dXJucyBhIGhhc2h0YWJsZSBvZiBjb25maWcgZmlsZSB2YWx1ZXMuCgouREVTQ1JJUFRJT04KVGhlIFJlYWQtQ29uZmlnRmlsZSBmdW5jdGlvbiB2YWxpZGF0ZXMgdGhlIEpTT04gY29uZmlndXJhdGlvbiBmaWxlIGFuZCByZXR1cm5zIGEgaGFzaCB0YWJsZSBvZiBzZWxlY3RlZCB2YWx1ZXMuCi0tIEl0IGJlZ2lucyBieSBjb252ZXJ0aW5nIHRoZSBKU09OIGZpbGUgdG8gYSBQU0N1c3RvbU9iamVjdC4gVGhlIHdlYnNpdGUgaGFzaCB0YWJsZSBoYXMgdGhlIGZvbGxvd2luZyBrZXlzOgotLSBMb2NhdGlvbjogV2Vic2l0ZSBsb2NhdGlvbgotLSBEYXRhYmFzZXM6IFdlYnNpdGUgU1FMIGRhdGFiYXNlcwoKLlBBUkFNRVRFUiAgQ29uZmlndXJhdGlvbkZpbGUKU3BlY2lmaWVzIHRoZSBwYXRoIGFuZCBuYW1lIG9mIHRoZSBKU09OIGNvbmZpZ3VyYXRpb24gZmlsZSBmb3IgeW91ciB3ZWIgcHJvamVjdC4gVmlzdWFsIFN0dWRpbyBnZW5lcmF0ZXMgdGhlIEpTT04gZmlsZSBhdXRvbWF0aWNhbGx5IHdoZW4geW91IGNyZWF0ZSBhIHdlYiBwcm9qZWN0IGFuZCBzdG9yZXMgaXQgaW4gdGhlIFB1Ymxpc2hTY3JpcHRzIGZvbGRlciBpbiB5b3VyIHNvbHV0aW9uLgoKLlBBUkFNRVRFUiBIYXNXZWJEZXBsb3lQYWNrYWdlCkluZGljYXRlcyB0aGF0IHRoZXJlIGlzIGEgd2ViIGRlcGxveSBwYWNrYWdlIFpJUCBmaWxlIGZvciB0aGUgd2ViIGFwcGxpY2F0aW9uLiBUbyBzcGVjaWZ5IGEgdmFsdWUgb2YgJHRydWUsIHVzZSAtSGFzV2ViRGVwbG95UGFja2FnZSBvciBIYXNXZWJEZXBsb3lQYWNrYWdlOiR0cnVlLiBUbyBzcGVjaWZ5IGEgdmFsdWUgb2YgZmFsc2UsIHVzZSBIYXNXZWJEZXBsb3lQYWNrYWdlOiRmYWxzZS5UaGlzIHBhcmFtZXRlciBpcyByZXF1aXJlZC4KCi5JTlBVVFMKTm9uZS4gWW91IGNhbm5vdCBwaXBlIGlucHV0IHRvIHRoaXMgZnVuY3Rpb24uCgouT1VUUFVUUwpTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlCgouRVhBTVBMRQpQUyBDOlw+IFJlYWQtQ29uZmlnRmlsZSAtQ29uZmlndXJhdGlvbkZpbGUgPHBhdGg+IC1IYXNXZWJEZXBsb3lQYWNrYWdlCgoKTmFtZSAgICAgICAgICAgICAgICAgICAgICAgICAgIFZhbHVlICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCi0tLS0gICAgICAgICAgICAgICAgICAgICAgICAgICAtLS0tLSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIApkYXRhYmFzZXMgICAgICAgICAgICAgICAgICAgICAge0B7Y29ubmVjdGlvblN0cmluZ05hbWU9OyBkYXRhYmFzZU5hbWU9OyBzZXJ2ZXJOYW1lPTsgdXNlcj07IHBhc3N3b3JkPX19ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKd2Vic2l0ZSAgICAgICAgICAgICAgICAgICAgICAgIEB7bmFtZT0ibXlzaXRlIjsgbG9jYXRpb249Ildlc3QgVVMiO30gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKIz4KZnVuY3Rpb24gUmVhZC1Db25maWdGaWxlCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBwYXJhbQogICAgKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7VGVzdC1QYXRoICRfIC1QYXRoVHlwZSBMZWFmfSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ29uZmlndXJhdGlvbkZpbGUKICAgICkKCiAgICBXcml0ZS1WZXJib3NlV2l0aFRpbWUgJ1JlYWQtQ29uZmlnRmlsZTogU3RhcnQnCgogICAgIyBHZXQgdGhlIGNvbnRlbnRzIG9mIHRoZSBKU09OIGZpbGUgKC1yYXcgaWdub3JlcyBsaW5lIGJyZWFrcykgYW5kIGNvbnZlcnQgaXQgdG8gYSBQU0N1c3RvbU9iamVjdAogICAgJGNvbmZpZyA9IEdldC1Db250ZW50ICRDb25maWd1cmF0aW9uRmlsZSAtUmF3IHwgQ29udmVydEZyb20tSnNvbgoKICAgIGlmICghJGNvbmZpZykKICAgIHsKICAgICAgICB0aHJvdyAoJ1JlYWQtQ29uZmlnRmlsZTogQ29udmVydEZyb20tSnNvbiBmYWlsZWQ6ICcgKyAkZXJyb3JbMF0pCiAgICB9CgogICAgIyBEZXRlcm1pbmUgd2hldGhlciB0aGUgZW52aXJvbm1lbnRTZXR0aW5ncyBvYmplY3QgaGFzICd3ZWJTaXRlJyBwcm9wZXJ0aWVzIChyZWdhcmRsZXNzIG9mIHRoZSBwcm9wZXJ0eSB2YWx1ZSkKICAgICRoYXNXZWJzaXRlUHJvcGVydHkgPSAgVGVzdC1NZW1iZXIgLU9iamVjdCAkY29uZmlnLmVudmlyb25tZW50U2V0dGluZ3MgLU1lbWJlciAnd2ViU2l0ZScKCiAgICBpZiAoISRoYXNXZWJzaXRlUHJvcGVydHkpCiAgICB7CiAgICAgICAgdGhyb3cgJ1JlYWQtQ29uZmlnRmlsZTogVGhlIGNvbmZpZ3VyYXRpb24gZmlsZSBkb2VzIG5vdCBoYXZlIGEgd2ViU2l0ZSBwcm9wZXJ0eS4nCiAgICB9CgogICAgIyBCdWlsZCBhIGhhc2ggdGFibGUgZnJvbSB0aGUgdmFsdWVzIGluIHRoZSBQU0N1c3RvbU9iamVjdAogICAgJHJldHVybk9iamVjdCA9IE5ldy1PYmplY3QgLVR5cGVOYW1lIEhhc2h0YWJsZQoKICAgICRyZXR1cm5PYmplY3QuQWRkKCduYW1lJywgJGNvbmZpZy5lbnZpcm9ubWVudFNldHRpbmdzLndlYlNpdGUubmFtZSkKICAgICRyZXR1cm5PYmplY3QuQWRkKCdsb2NhdGlvbicsICRjb25maWcuZW52aXJvbm1lbnRTZXR0aW5ncy53ZWJTaXRlLmxvY2F0aW9uKQoKICAgIGlmIChUZXN0LU1lbWJlciAtT2JqZWN0ICRjb25maWcuZW52aXJvbm1lbnRTZXR0aW5ncyAtTWVtYmVyICdkYXRhYmFzZXMnKQogICAgewogICAgICAgICRyZXR1cm5PYmplY3QuQWRkKCdkYXRhYmFzZXMnLCAkY29uZmlnLmVudmlyb25tZW50U2V0dGluZ3MuZGF0YWJhc2VzKQogICAgfQoKICAgIFdyaXRlLVZlcmJvc2VXaXRoVGltZSAnUmVhZC1Db25maWdGaWxlOiBFbmQnCgogICAgcmV0dXJuICRyZXR1cm5PYmplY3QKfQoKCjwjCi5TWU5PUFNJUwpDcmVhdGVzIGEgTWljcm9zb2Z0IEF6dXJlIFdlYnNpdGUuCgouREVTQ1JJUFRJT04KQ3JlYXRlcyBhIE1pY3Jvc29mdCBBenVyZSBXZWJzaXRlIHdpdGggdGhlIHNwZWNpZmljIG5hbWUgYW5kIGxvY2F0aW9uLiBUaGlzIGZ1bmN0aW9uIGNhbGxzIHRoZSBOZXctQXp1cmVXZWJzaXRlIGNtZGxldCBpbiB0aGUgQXp1cmUgbW9kdWxlLiBJZiB0aGUgc3Vic2NyaXB0aW9uIGRvZXMgbm90IHlldCBoYXZlIGEgd2Vic2l0ZSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZSwgdGhpcyBmdW5jdGlvbiBjcmVhdGVzIHRoZSB3ZWJzaXRlIGFuZCByZXR1cm5zIGEgd2Vic2l0ZSBvYmplY3QuIE90aGVyd2lzZSwgaXQgcmV0dXJucyB0aGUgZXhpc3Rpbmcgd2Vic2l0ZS4KCi5QQVJBTUVURVIgIE5hbWUKU3BlY2lmaWVzIGEgbmFtZSBmb3IgdGhlIG5ldyB3ZWJzaXRlLiBUaGUgbmFtZSBtdXN0IGJlIHVuaXF1ZSBpbiBNaWNyb3NvZnQgQXp1cmUuIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLgoKLlBBUkFNRVRFUiAgTG9jYXRpb24KU3BlY2lmaWVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgd2Vic2l0ZS4gVmFsaWQgdmFsdWVzIGFyZSB0aGUgTWljcm9zb2Z0IEF6dXJlIGxvY2F0aW9ucywgc3VjaCBhcyAiV2VzdCBVUyIuIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLgoKLklOUFVUUwpOT05FLgoKLk9VVFBVVFMKTWljcm9zb2Z0LldpbmRvd3NBenVyZS5Db21tYW5kcy5VdGlsaXRpZXMuV2Vic2l0ZXMuU2VydmljZXMuV2ViRW50aXRpZXMuU2l0ZQoKLkVYQU1QTEUKQWRkLUF6dXJlV2Vic2l0ZSAtTmFtZSBUZXN0U2l0ZSAtTG9jYXRpb24gIldlc3QgVVMiCgpOYW1lICAgICAgIDogY29udG9zbwpTdGF0ZSAgICAgIDogUnVubmluZwpIb3N0IE5hbWVzIDogY29udG9zby5henVyZXdlYnNpdGVzLm5ldAoKLkxJTksKTmV3LUF6dXJlV2Vic2l0ZQojPgpmdW5jdGlvbiBBZGQtQXp1cmVXZWJzaXRlCnsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBwYXJhbQogICAgKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJExvY2F0aW9uCiAgICApCgogICAgV3JpdGUtVmVyYm9zZVdpdGhUaW1lICdBZGQtQXp1cmVXZWJzaXRlOiBTdGFydCcKICAgICR3ZWJzaXRlID0gR2V0LUF6dXJlV2Vic2l0ZSAtTmFtZSAkTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQoKICAgIGlmICgkd2Vic2l0ZSkKICAgIHsKICAgICAgICBXcml0ZS1Ib3N0V2l0aFRpbWUgKCdBZGQtQXp1cmVXZWJzaXRlOiBBbiBleGlzdGluZyB3ZWJzaXRlICcgKwogICAgICAgICR3ZWJzaXRlLk5hbWUgKyAnIHdhcyBmb3VuZCcpCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgaWYgKFRlc3QtQXp1cmVOYW1lIC1XZWJzaXRlIC1OYW1lICROYW1lKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtRXJyb3JXaXRoVGltZSAoJ1dlYnNpdGUgezB9IGFscmVhZHkgZXhpc3RzJyAtZiAkTmFtZSkKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJHdlYnNpdGUgPSBOZXctQXp1cmVXZWJzaXRlIC1OYW1lICROYW1lIC1Mb2NhdGlvbiAkTG9jYXRpb24KICAgICAgICB9CiAgICB9CgogICAgJHdlYnNpdGUgfCBPdXQtU3RyaW5nIHwgV3JpdGUtVmVyYm9zZVdpdGhUaW1lCiAgICBXcml0ZS1WZXJib3NlV2l0aFRpbWUgJ0FkZC1BenVyZVdlYnNpdGU6IEVuZCcKCiAgICByZXR1cm4gJHdlYnNpdGUKfQoKPCMKLlNZTk9QU0lTClJldHVybnMgJFRydWUgd2hlbiB0aGUgVVJMIGlzIGFic29sdXRlIGFuZCBpdHMgc2NoZW1lIGlzIGh0dHBzLgoKLkRFU0NSSVBUSU9OClRoZSBUZXN0LUh0dHBzVXJsIGZ1bmN0aW9uIGNvbnZlcnRzIHRoZSBpbnB1dCBVUkwgdG8gYSBTeXN0ZW0uVXJpIG9iamVjdC4gUmV0dXJucyAkVHJ1ZSB3aGVuIHRoZSBVUkwgaXMgYWJzb2x1dGUgKG5vdCByZWxhdGl2ZSkgYW5kIGl0cyBzY2hlbWUgaXMgaHR0cHMuIElmIGVpdGhlciBpcyBmYWxzZSwgb3IgdGhlIGlucHV0IHN0cmluZyBjYW5ub3QgYmUgY29udmVydGVkIHRvIGEgVVJMLCB0aGUgZnVuY3Rpb24gcmV0dXJucyAkZmFsc2UuCgouUEFSQU1FVEVSIFVybApTcGVjaWZpZXMgdGhlIFVSTCB0byB0ZXN0LiBFbnRlciBhIFVSTCBzdHJpbmcsCgouSU5QVVRTCk5PTkUuCgouT1VUUFVUUwpTeXN0ZW0uQm9vbGVhbgoKLkVYQU1QTEUKUFMgQzpcPiRwcm9maWxlLnB1Ymxpc2hVcmwKd2F3cy1wcm9kLWJheS0wMDEucHVibGlzaC5henVyZXdlYnNpdGVzLndpbmRvd3MubmV0OjQ0MwoKUFMgQzpcPlRlc3QtSHR0cHNVcmwgLVVybCAnd2F3cy1wcm9kLWJheS0wMDEucHVibGlzaC5henVyZXdlYnNpdGVzLndpbmRvd3MubmV0OjQ0MycKRmFsc2UKIz4KZnVuY3Rpb24gVGVzdC1IdHRwc1VybAp7CgogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRVcmwKICAgICkKCiAgICAjIElmICR1cmkgY2Fubm90IGJlIGNvbnZlcnRlZCB0byBhIFN5c3RlbS5Vcmkgb2JqZWN0LCBUZXN0LUh0dHBzVXJsIHJldHVybnMgJGZhbHNlCiAgICAkdXJpID0gJFVybCAtYXMgW1N5c3RlbS5VcmldCgogICAgcmV0dXJuICR1cmkuSXNBYnNvbHV0ZVVyaSAtYW5kICR1cmkuU2NoZW1lIC1lcSAnaHR0cHMnCn0KCgo8IwouU1lOT1BTSVMKQ3JlYXRlcyBhIHN0cmluZyB0aGF0IGxldHMgeW91IGNvbm5lY3QgdG8gYSBNaWNyb3NvZnQgQXp1cmUgU1FMIGRhdGFiYXNlLgoKLkRFU0NSSVBUSU9OClRoZSBHZXQtQXp1cmVTUUxEYXRhYmFzZUNvbm5lY3Rpb25TdHJpbmcgZnVuY3Rpb24gYXNzZW1ibGVzIGEgY29ubmVjdGlvbiBzdHJpbmcgdG8gY29ubmVjdCB0byBhIE1pY3Jvc29mdCBBenVyZSBTUUwgZGF0YWJhc2UuCgouUEFSQU1FVEVSICBEYXRhYmFzZVNlcnZlck5hbWUKU3BlY2lmaWVzIHRoZSBuYW1lIG9mIGFuIGV4aXN0aW5nIGRhdGFiYXNlIHNlcnZlciBpbiB0aGUgTWljcm9zb2Z0IEF6dXJlIHN1YnNjcmlwdGlvbi4gQWxsIE1pY3Jvc29mdCBBenVyZSBTUUwgZGF0YWJhc2VzIG11c3QgYmUgYXNzb2NpYXRlZCB3aXRoIGEgU1FMIGRhdGFiYXNlIHNlcnZlci4gVG8gZ2V0IHRoZSBzZXJ2ZXIgbmFtZSwgdXNlIHRoZSBHZXQtQXp1cmVTcWxEYXRhYmFzZVNlcnZlciBjbWRsZXQgKEF6dXJlIG1vZHVsZSkuIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLgoKLlBBUkFNRVRFUiAgRGF0YWJhc2VOYW1lClNwZWNpZmllcyB0aGUgbmFtZSBmb3IgdGhlIFNRTCBkYXRhYmFzZS4gVGhpcyBjYW4gYmUgYW4gZXhpc3RpbmcgU1FMIGRhdGFiYXNlIG9yIGEgbmFtZSB1c2VkIGZvciBhIG5ldyBTUUwgZGF0YWJhc2UuIFRoaXMgcGFyYW1ldGVyIGlzIHJlcXVpcmVkLgoKLlBBUkFNRVRFUiAgVXNlcm5hbWUKU3BlY2lmaWVzIHRoZSBuYW1lIG9mIHRoZSBTUUwgZGF0YWJhc2UgYWRtaW5pc3RyYXRvci4gVGhlIHVzZXJuYW1lIHdpbGwgYmUgJFVzZXJuYW1lQERhdGFiYXNlU2VydmVyTmFtZS4gVGhpcyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQuCgouUEFSQU1FVEVSICBQYXNzd29yZApTcGVjaWZpZXMgYSBwYXNzd29yZCBmb3IgdGhlIFNRTCBkYXRhYmFzZSBhZG1pbmlzdHJhdG9yLiBFbnRlciBhIHBhc3N3b3JkIGluIHBsYWluIHRleHQuIFNlY3VyZSBzdHJpbmdzIGFyZSBub3QgcGVybWl0dGVkLiBUaGlzIHBhcmFtZXRlciBpcyByZXF1aXJlZC4KCi5JTlBVVFMKTm9uZS4KCi5PVVRQVVRTClN5c3RlbS5TdHJpbmcKCi5FWEFNUExFClBTIEM6XD4gJFNlcnZlck5hbWUgPSAoR2V0LUF6dXJlU3FsRGF0YWJhc2VTZXJ2ZXIpLlNlcnZlck5hbWVbMF0KUFMgQzpcPiBHZXQtQXp1cmVTUUxEYXRhYmFzZUNvbm5lY3Rpb25TdHJpbmcgLURhdGFiYXNlU2VydmVyTmFtZSAkU2VydmVyTmFtZSBgCiAgICAgICAgLURhdGFiYXNlTmFtZSAndGVzdGRiJyAtVXNlck5hbWUgJ2FkbWluJyAgLVBhc3N3b3JkICdwYXNzd29yZCcKClNlcnZlcj10Y3A6dGVzdHNlcnZlci5kYXRhYmFzZS53aW5kb3dzLm5ldCwxNDMzO0RhdGFiYXNlPXRlc3RkYjtVc2VyIElEPWFkbWluQHRlc3RzZXJ2ZXI7UGFzc3dvcmQ9cGFzc3dvcmQ7VHJ1c3RlZF9Db25uZWN0aW9uPUZhbHNlO0VuY3J5cHQ9VHJ1ZTtDb25uZWN0aW9uIFRpbWVvdXQ9MjA7CiM+CmZ1bmN0aW9uIEdldC1BenVyZVNRTERhdGFiYXNlQ29ubmVjdGlvblN0cmluZwp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICREYXRhYmFzZVNlcnZlck5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJERhdGFiYXNlTmFtZSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVXNlck5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBhc3N3b3JkCiAgICApCgogICAgcmV0dXJuICgnU2VydmVyPXRjcDp7MH0uZGF0YWJhc2Uud2luZG93cy5uZXQsMTQzMztEYXRhYmFzZT17MX07JyArCiAgICAgICAgICAgJ1VzZXIgSUQ9ezJ9QHswfTsnICsKICAgICAgICAgICAnUGFzc3dvcmQ9ezN9OycgKwogICAgICAgICAgICdUcnVzdGVkX0Nvbm5lY3Rpb249RmFsc2U7JyArCiAgICAgICAgICAgJ0VuY3J5cHQ9VHJ1ZTsnICsKICAgICAgICAgICAnQ29ubmVjdGlvbiBUaW1lb3V0PTIwOycpIGAKICAgICAgICAgICAtZiAkRGF0YWJhc2VTZXJ2ZXJOYW1lLCAkRGF0YWJhc2VOYW1lLCAkVXNlck5hbWUsICRQYXNzd29yZAp9CgoKPCMKLlNZTk9QU0lTCkNyZWF0ZXMgTWljcm9zb2Z0IEF6dXJlIFNRTCBkYXRhYmFzZXMgZnJvbSB0aGUgdmFsdWVzIGluIHRoZSBKU09OIGNvbmZpZ3VhdGlvbiBmaWxlIHRoYXQgVmlzdWFsIFN0dWRpbyBnZW5lcmF0ZXMuCgouREVTQ1JJUFRJT04KVGhlIEFkZC1BenVyZVNRTERhdGFiYXNlcyBmdW5jdGlvbiB0YWtlcyBpbmZvcm1hdGlvbiBmcm9tIHRoZSBkYXRhYmFzZXMgc2VjdGlvbiBvZiB0aGUgSlNPTiBmaWxlLiBUaGlzIGZ1bmN0aW9uLCBBZGQtQXp1cmVTUUxEYXRhYmFzZXMgKHBsdXJhbCksIGNhbGxzIHRoZSBBZGQtQXp1cmVTUUxEYXRhYmFzZSAoc2luZ3VsYXIpIGZ1bmN0aW9uIGZvciBlYWNoIFNRTCBkYXRhYmFzZSBpbiB0aGUgSlNPTiBmaWxlLiBBZGQtQXp1cmVTUUxEYXRhYmFzZSAoc2luZ3VsYXIpIGNhbGxzIHRoZSBOZXctQXp1cmVTcWxEYXRhYmFzZSBjbWRsZXQgKEF6dXJlIG1vZHVsZSksIHdoaWNoIGNyZWF0ZXMgdGhlIFNRTCBkYXRhYmFzZXMuIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgcmV0dXJuIGEgZGF0YWJhc2Ugb2JqZWN0LiBJdCByZXR1cm5zIGEgaGFzaHRhYmxlIG9mIHZhbHVlcyB0aGF0IHdlcmUgdXNlZCB0byBjcmVhdGUgdGhlIGRhdGFiYXNlcy4KCi5QQVJBTUVURVIgRGF0YWJhc2VDb25maWcKIFRha2VzIGFuIGFycmF5IG9mIFBTQ3VzdG9tT2JqZWN0cyB0aGF0IG9yaWdpbmF0ZSBpbiB0aGUgSlNPTiBmaWxlIHRoYXQgdGhlIFJlYWQtQ29uZmlnRmlsZSBmdW5jdGlvbiByZXR1cm5zIHdoZW4gdGhlIEpTT04gZmlsZSBoYXMgYSB3ZWJzaXRlIHByb3BlcnR5LiBJdCBpbmNsdWRlcyB0aGUgZW52aXJvbm1lbnRTZXR0aW5ncy5kYXRhYmFzZXMgcHJvcGVydGllcy4gWW91IGNhbiBwaXBlIHRoZSBsaXN0IHRvIHRoaXMgZnVuY3Rpb24uClBTIEM6XD4gJGNvbmZpZyA9IFJlYWQtQ29uZmlnRmlsZSA8bmFtZT4uanNvbgpQUyBDOlw+ICREYXRhYmFzZUNvbmZpZyA9ICRjb25maWcuZGF0YWJhc2VzfCB3aGVyZSB7JF8uY29ubmVjdGlvblN0cmluZ05hbWV9ClBTIEM6XD4gJERhdGFiYXNlQ29uZmlnCmNvbm5lY3Rpb25TdHJpbmdOYW1lOiBEZWZhdWx0IENvbm5lY3Rpb24KZGF0YWJhc2VuYW1lIDogVGVzdERCMQplZGl0aW9uICAgOgpzaXplICAgICA6IDEKY29sbGF0aW9uICA6IFNRTF9MYXRpbjFfR2VuZXJhbF9DUDFfQ0lfQVMKc2VydmVydHlwZSAgOiBOZXcgU1FMIERhdGFiYXNlIFNlcnZlcgpzZXJ2ZXJuYW1lICA6IHIwNDB0dnQyZ3gKdXNlciAgICAgOiBkYnVzZXIKcGFzc3dvcmQgICA6IFRlc3QuMTIzCmxvY2F0aW9uICAgOiBXZXN0IFVTCgouUEFSQU1FVEVSICBEYXRhYmFzZVNlcnZlclBhc3N3b3JkClNwZWNpZmllcyB0aGUgcGFzc3dvcmQgZm9yIHRoZSBTUUwgZGF0YWJhc2Ugc2VydmVyIGFkbWluaXN0cmF0b3IuIEVudGVyIGEgaGFzaHRhYmxlIHdpdGggTmFtZSBhbmQgUGFzc3dvcmQga2V5cy4gVGhlIHZhbHVlIG9mIE5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIFNRTCBkYXRhYmFzZSBzZXJ2ZXIuIFRoZSB2YWx1ZSBvZiBQYXNzd29yZCBpcyB0aGUgYWRtaW5pc3RyYXRvciBwYXNzd29yZC4gRm9yIGV4YW1wbGU6IEBOYW1lID0gIlRlc3REQjEiOyBQYXNzd29yZCA9ICJwYXNzd29yZCIgVGhpcyBwYXJhbWV0ZXIgaXMgb3B0aW9uYWwuIElmIHlvdSBvbWl0IGl0IG9yIHRoZSBTUUwgZGF0YWJhc2Ugc2VydmVyIG5hbWUgZG9lc24ndCBtYXRjaCB0aGUgdmFsdWUgb2YgdGhlIHNlcnZlck5hbWUgcHJvcGVydHkgb2YgdGhlICREYXRhYmFzZUNvbmZpZyBvYmplY3QsIHRoZSBmdW5jdGlvbiB1c2VzIHRoZSBQYXNzd29yZCBwcm9wZXJ0eSBvZiB0aGUgJERhdGFiYXNlQ29uZmlnIG9iamVjdCBmb3IgdGhlIFNRTCBkYXRhYmFzZSBpbiB0aGUgY29ubmVjdGlvbiBzdHJpbmcuCgouUEFSQU1FVEVSIENyZWF0ZURhdGFiYXNlClZlcmlmaWVzIHRoYXQgeW91IHdhbnQgdG8gY3JlYXRlIGEgZGF0YWJhc2UuIFRoaXMgcGFyYW1ldGVyIGlzIG9wdGlvbmFsLgoKLklOUFVUUwpTeXN0ZW0uQ29sbGVjdGlvbnMuSGFzaHRhYmxlW10KCi5PVVRQVVRTClN5c3RlbS5Db2xsZWN0aW9ucy5IYXNodGFibGUKCi5FWEFNUExFClBTIEM6XD4gJGNvbmZpZyA9IFJlYWQtQ29uZmlnRmlsZSA8bmFtZT4uanNvbgpQUyBDOlw+ICREYXRhYmFzZUNvbmZpZyA9ICRjb25maWcuZGF0YWJhc2VzfCB3aGVyZSB7JF8uY29ubmVjdGlvblN0cmluZ05hbWV9ClBTIEM6XD4gJERhdGFiYXNlQ29uZmlnIHwgQWRkLUF6dXJlU1FMRGF0YWJhc2VzCgpOYW1lICAgICAgICAgICAgICAgICAgICAgICAgICAgVmFsdWUKLS0tLSAgICAgICAgICAgICAgICAgICAgICAgICAgIC0tLS0tCkNvbm5lY3Rpb25TdHJpbmcgICAgICAgICAgICAgICBTZXJ2ZXI9dGNwOnRlc3RkYjEuZGF0YWJhc2Uud2luZG93cy5uZXQsMTQzMztEYXRhYmFzZT10ZXN0ZGI7VXNlciBJRD1hZG1pbkB0ZXN0ZGIxO1Bhc3N3b3JkPXBhc3N3b3JkO1RydXN0ZWRfQ29ubmVjdGlvbj1GYWxzZTtFbmNyeXB0PVRydWU7Q29ubmVjdGlvbiBUaW1lb3V0PTIwOwpOYW1lICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVmYXVsdCBDb25uZWN0aW9uClR5cGUgICAgICAgICAgICAgICAgICAgICAgICAgICBTUUxBenVyZQoKLkxJTksKR2V0LUF6dXJlU1FMRGF0YWJhc2VDb25uZWN0aW9uU3RyaW5nCgouTElOSwpDcmVhdGUtQXp1cmVTUUxEYXRhYmFzZQojPgpmdW5jdGlvbiBBZGQtQXp1cmVTUUxEYXRhYmFzZXMKewogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtCiAgICAoCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkdHJ1ZSwgVmFsdWVGcm9tUGlwZWxpbmUgPSAkdHJ1ZSldCiAgICAgICAgW1BTQ3VzdG9tT2JqZWN0XQogICAgICAgICREYXRhYmFzZUNvbmZpZywKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkZmFsc2UpXQogICAgICAgIFtBbGxvd051bGwoKV0KICAgICAgICBbSGFzaHRhYmxlW11dCiAgICAgICAgJERhdGFiYXNlU2VydmVyUGFzc3dvcmQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRDcmVhdGVEYXRhYmFzZSA9ICRmYWxzZQogICAgKQoKICAgIGJlZ2luCiAgICB7CiAgICAgICAgV3JpdGUtVmVyYm9zZVdpdGhUaW1lICdBZGQtQXp1cmVTUUxEYXRhYmFzZXM6IFN0YXJ0JwogICAgfQogICAgcHJvY2VzcwogICAgewogICAgICAgIFdyaXRlLVZlcmJvc2VXaXRoVGltZSAoJ0FkZC1BenVyZVNRTERhdGFiYXNlczogQ3JlYXRpbmcgJyArICREYXRhYmFzZUNvbmZpZy5kYXRhYmFzZU5hbWUpCgogICAgICAgIGlmICgkQ3JlYXRlRGF0YWJhc2UpCiAgICAgICAgewogICAgICAgICAgICAjIENyZWF0ZXMgYSBuZXcgU1FMIGRhdGFiYXNlIHdpdGggdGhlIERhdGFiYXNlQ29uZmlnIHZhbHVlcyAodW5sZXNzIG9uZSBhbHJlYWR5IGV4aXN0cykKICAgICAgICAgICAgIyBUaGUgY29tbWFuZCBvdXRwdXQgaXMgc3VwcHJlc3NlZC4KICAgICAgICAgICAgQWRkLUF6dXJlU1FMRGF0YWJhc2UgLURhdGFiYXNlQ29uZmlnICREYXRhYmFzZUNvbmZpZyB8IE91dC1OdWxsCiAgICAgICAgfQoKICAgICAgICAkc2VydmVyUGFzc3dvcmQgPSAkbnVsbAogICAgICAgIGlmICgkRGF0YWJhc2VTZXJ2ZXJQYXNzd29yZCkKICAgICAgICB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRjcmVkZW50aWFsIGluICREYXRhYmFzZVNlcnZlclBhc3N3b3JkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgIGlmICgkY3JlZGVudGlhbC5OYW1lIC1lcSAkRGF0YWJhc2VDb25maWcuc2VydmVyTmFtZSkKICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgJHNlcnZlclBhc3N3b3JkID0gJGNyZWRlbnRpYWwucGFzc3dvcmQgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKICAgICAgICB9CgogICAgICAgIGlmICghJHNlcnZlclBhc3N3b3JkKQogICAgICAgIHsKICAgICAgICAgICAgJHNlcnZlclBhc3N3b3JkID0gJERhdGFiYXNlQ29uZmlnLnBhc3N3b3JkCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gQHsKICAgICAgICAgICAgTmFtZSA9ICREYXRhYmFzZUNvbmZpZy5jb25uZWN0aW9uU3RyaW5nTmFtZTsKICAgICAgICAgICAgVHlwZSA9ICdTUUxBenVyZSc7CiAgICAgICAgICAgIENvbm5lY3Rpb25TdHJpbmcgPSBHZXQtQXp1cmVTUUxEYXRhYmFzZUNvbm5lY3Rpb25TdHJpbmcgYAogICAgICAgICAgICAgICAgLURhdGFiYXNlU2VydmVyTmFtZSAkRGF0YWJhc2VDb25maWcuc2VydmVyTmFtZSBgCiAgICAgICAgICAgICAgICAtRGF0YWJhc2VOYW1lICREYXRhYmFzZUNvbmZpZy5kYXRhYmFzZU5hbWUgYAogICAgICAgICAgICAgICAgLVVzZXJOYW1lICREYXRhYmFzZUNvbmZpZy51c2VyIGAKICAgICAgICAgICAgICAgIC1QYXNzd29yZCAkc2VydmVyUGFzc3dvcmQgfQogICAgfQogICAgZW5kCiAgICB7CiAgICAgICAgV3JpdGUtVmVyYm9zZVdpdGhUaW1lICdBZGQtQXp1cmVTUUxEYXRhYmFzZXM6IEVuZCcKICAgIH0KfQoKCjwjCi5TWU5PUFNJUwpDcmVhdGVzIGEgbmV3IE1pY3Jvc29mdCBBenVyZSBTUUwgZGF0YWJhc2UuCgouREVTQ1JJUFRJT04KVGhlIEFkZC1BenVyZVNRTERhdGFiYXNlIGZ1bmN0aW9uIGNyZWF0ZXMgYSBNaWNyb3NvZnQgQXp1cmUgU1FMIGRhdGFiYXNlIGZyb20gdGhlIGRhdGEgaW4gdGhlIEpTT04gY29uZmlndXJhdGlvbiBmaWxlIHRoYXQgVmlzdWFsIFN0dWRpbyBnZW5lcmF0ZXMgYW5kIHJldHVybnMgdGhlIG5ldyBkYXRhYmFzZS4gSWYgdGhlIHN1YnNjcmlwdGlvbiBhbHJlYWR5IGhhcyBhIFNRTCBkYXRhYmFzZSB3aXRoIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UgbmFtZSBpbiB0aGUgc3BlY2lmaWVkIFNRTCBkYXRhYmFzZSBzZXJ2ZXIsIHRoZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBleGlzdGluZyBkYXRhYmFzZS4gVGhpcyBmdW5jdGlvbiBjYWxscyB0aGUgTmV3LUF6dXJlU3FsRGF0YWJhc2UgY21kbGV0IChBenVyZSBtb2R1bGUpLCB3aGljaCBhY3R1YWxseSBjcmVhdGVzIHRoZSBTUUwgZGF0YWJhc2UuCgouUEFSQU1FVEVSIERhdGFiYXNlQ29uZmlnClRha2VzIGEgUFNDdXN0b21PYmplY3QgdGhhdCBvcmlnaW5hdGVzIGluIHRoZSBKU09OIGNvbmZpZ3VyYXRpb24gZmlsZSB0aGF0IHRoZSBSZWFkLUNvbmZpZ0ZpbGUgZnVuY3Rpb24gcmV0dXJucyB3aGVuIHRoZSBKU09OIGZpbGUgaGFzIGEgd2Vic2l0ZSBwcm9wZXJ0eS4gSXQgaW5jbHVkZXMgdGhlIGVudmlyb25tZW50U2V0dGluZ3MuZGF0YWJhc2VzIHByb3BlcnRpZXMuIFlvdSBjYW5ub3QgcGlwZSB0aGUgb2JqZWN0IHRvIHRoaXMgZnVuY3Rpb24uIFZpc3VhbCBTdHVkaW8gZ2VuZXJhdGVzIGEgSlNPTiBjb25maWd1cmF0aW9uIGZpbGUgZm9yIGFsbCB3ZWIgcHJvamVjdHMgYW5kIHN0b3JlcyBpdCBpbiB0aGUgUHVibGlzaFNjcmlwdHMgZm9sZGVyIG9mIHlvdXIgc29sdXRpb24uCgouSU5QVVRTCk5vbmUuIFRoaXMgZnVuY3Rpb24gZG9lcyBub3QgdGFrZSBpbnB1dCBmcm9tIHRoZSBwaXBlbGluZQoKLk9VVFBVVFMKTWljcm9zb2Z0LldpbmRvd3NBenVyZS5Db21tYW5kcy5TcWxEYXRhYmFzZS5TZXJ2aWNlcy5TZXJ2ZXIuRGF0YWJhc2UKCi5FWEFNUExFClBTIEM6XD4gJGNvbmZpZyA9IFJlYWQtQ29uZmlnRmlsZSA8bmFtZT4uanNvbgpQUyBDOlw+ICREYXRhYmFzZUNvbmZpZyA9ICRjb25maWcuZGF0YWJhc2VzIHwgd2hlcmUgY29ubmVjdGlvblN0cmluZ05hbWUKUFMgQzpcPiAkRGF0YWJhc2VDb25maWcKCmNvbm5lY3Rpb25TdHJpbmdOYW1lICAgIDogRGVmYXVsdCBDb25uZWN0aW9uCmRhdGFiYXNlbmFtZSA6IFRlc3REQjEKZWRpdGlvbiAgICAgIDoKc2l6ZSAgICAgICAgIDogMQpjb2xsYXRpb24gICAgOiBTUUxfTGF0aW4xX0dlbmVyYWxfQ1AxX0NJX0FTCnNlcnZlcnR5cGUgICA6IE5ldyBTUUwgRGF0YWJhc2UgU2VydmVyCnNlcnZlcm5hbWUgICA6IHIwNDB0dnQyZ3gKdXNlciAgICAgICAgIDogZGJ1c2VyCnBhc3N3b3JkICAgICA6IFRlc3QuMTIzCmxvY2F0aW9uICAgICA6IFdlc3QgVVMKClBTIEM6XD4gQWRkLUF6dXJlU1FMRGF0YWJhc2UgLURhdGFiYXNlQ29uZmlnICREYXRhYmFzZUNvbmZpZwoKLkxJTksKQWRkLUF6dXJlU1FMRGF0YWJhc2VzCgouTElOSwpOZXctQXp1cmVTUUxEYXRhYmFzZQojPgpmdW5jdGlvbiBBZGQtQXp1cmVTUUxEYXRhYmFzZQp7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgcGFyYW0KICAgICgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICAgICAgW09iamVjdF0KICAgICAgICAkRGF0YWJhc2VDb25maWcKICAgICkKCiAgICBXcml0ZS1WZXJib3NlV2l0aFRpbWUgJ0FkZC1BenVyZVNRTERhdGFiYXNlOiBTdGFydCcKCiAgICAjIEZhaWwgaWYgdGhlIHBhcmFtZXRlciB2YWx1ZSBkb2Vzbid0IGhhdmUgdGhlIHNlcnZlck5hbWUgcHJvcGVydHksIG9yIHRoZSBzZXJ2ZXJOYW1lIHByb3BlcnR5IHZhbHVlIGlzbid0IHBvcHVsYXRlZC4KICAgIGlmICgtbm90IChUZXN0LU1lbWJlciAkRGF0YWJhc2VDb25maWcgJ3NlcnZlck5hbWUnKSAtb3IgLW5vdCAkRGF0YWJhc2VDb25maWcuc2VydmVyTmFtZSkKICAgIHsKICAgICAgICB0aHJvdyAnQWRkLUF6dXJlU1FMRGF0YWJhc2U6IFRoZSBkYXRhYmFzZSBzZXJ2ZXJOYW1lIChyZXF1aXJlZCkgaXMgbWlzc2luZyBmcm9tIHRoZSBEYXRhYmFzZUNvbmZpZyB2YWx1ZS4nCiAgICB9CgogICAgIyBGYWlsIGlmIHRoZSBwYXJhbWV0ZXIgdmFsdWUgZG9lc24ndCBoYXZlIHRoZSBkYXRhYmFzZW5hbWUgcHJvcGVydHksIG9yIHRoZSBkYXRhYmFzZW5hbWUgcHJvcGVydHkgdmFsdWUgaXNuJ3QgcG9wdWxhdGVkLgogICAgaWYgKC1ub3QgKFRlc3QtTWVtYmVyICREYXRhYmFzZUNvbmZpZyAnZGF0YWJhc2VOYW1lJykgLW9yIC1ub3QgJERhdGFiYXNlQ29uZmlnLmRhdGFiYXNlTmFtZSkKICAgIHsKICAgICAgICB0aHJvdyAnQWRkLUF6dXJlU1FMRGF0YWJhc2U6IFRoZSBkYXRhYmFzZW5hbWUgKHJlcXVpcmVkKSBpcyBtaXNzaW5nIGZyb20gdGhlIERhdGFiYXNlQ29uZmlnIHZhbHVlLicKICAgIH0KCiAgICAkRGJTZXJ2ZXIgPSAkbnVsbAoKICAgIGlmIChUZXN0LUh0dHBzVXJsICREYXRhYmFzZUNvbmZpZy5zZXJ2ZXJOYW1lKQogICAgewogICAgICAgICRhYnNvbHV0ZURiU2VydmVyID0gJERhdGFiYXNlQ29uZmlnLnNlcnZlck5hbWUgLWFzIFtTeXN0ZW0uVXJpXQogICAgICAgICRzdWJzY3JpcHRpb24gPSBHZXQtQXp1cmVTdWJzY3JpcHRpb24gLUN1cnJlbnQgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKCiAgICAgICAgaWYgKCRzdWJzY3JpcHRpb24gLWFuZCAkc3Vic2NyaXB0aW9uLlNlcnZpY2VFbmRwb2ludCAtYW5kICRzdWJzY3JpcHRpb24uU3Vic2NyaXB0aW9uSWQpCiAgICAgICAgewogICAgICAgICAgICAkYWJzb2x1dGVEYlNlcnZlclJlZ2V4ID0gJ2h0dHBzOlwvXC97MH1cL3sxfVwvc2VydmljZXNcL3NxbHNlcnZlcnNcL3NlcnZlcnNcLyguKylcLmRhdGFiYXNlXC53aW5kb3dzXC5uZXRcL2RhdGFiYXNlcycgLWYgYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN1YnNjcmlwdGlvbi5zZXJ2aWNlRW5kcG9pbnQuSG9zdCwgJHN1YnNjcmlwdGlvbi5TdWJzY3JpcHRpb25JZAoKICAgICAgICAgICAgaWYgKCRhYnNvbHV0ZURiU2VydmVyIC1tYXRjaCAkYWJzb2x1dGVEYlNlcnZlclJlZ2V4IC1hbmQgJE1hdGNoZXMuQ291bnQgLWVxIDIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAkRGJTZXJ2ZXIgPSAkTWF0Y2hlc1sxXQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGlmICghJERiU2VydmVyKQogICAgewogICAgICAgICREYlNlcnZlciA9ICREYXRhYmFzZUNvbmZpZy5zZXJ2ZXJOYW1lCiAgICB9CgogICAgJGRiID0gR2V0LUF6dXJlU3FsRGF0YWJhc2UgLVNlcnZlck5hbWUgJERiU2VydmVyIC1EYXRhYmFzZU5hbWUgJERhdGFiYXNlQ29uZmlnLmRhdGFiYXNlTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZQoKICAgIGlmICgkZGIpCiAgICB7CiAgICAgICAgV3JpdGUtSG9zdFdpdGhUaW1lICgnQ3JlYXRlLUF6dXJlU1FMRGF0YWJhc2U6IFVzaW5nIGV4aXN0aW5nIGRhdGFiYXNlICcgKyAkZGIuTmFtZSkKICAgICAgICAkZGIgfCBPdXQtU3RyaW5nIHwgV3JpdGUtVmVyYm9zZVdpdGhUaW1lCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJHBhcmFtID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgSGFzaHRhYmxlCiAgICAgICAgJHBhcmFtLkFkZCgnc2VydmVyTmFtZScsICREYlNlcnZlcikKICAgICAgICAkcGFyYW0uQWRkKCdkYXRhYmFzZU5hbWUnLCAkRGF0YWJhc2VDb25maWcuZGF0YWJhc2VOYW1lKQoKICAgICAgICBpZiAoKFRlc3QtTWVtYmVyICREYXRhYmFzZUNvbmZpZyAnc2l6ZScpIC1hbmQgJERhdGFiYXNlQ29uZmlnLnNpemUpCiAgICAgICAgewogICAgICAgICAgICAkcGFyYW0uQWRkKCdNYXhTaXplR0InLCAkRGF0YWJhc2VDb25maWcuc2l6ZSkKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJHBhcmFtLkFkZCgnTWF4U2l6ZUdCJywgMSkKICAgICAgICB9CgogICAgICAgICMgSWYgdGhlICREYXRhYmFzZUNvbmZpZyBvYmplY3QgaGFzIGEgY29sbGF0aW9uIHByb3BlcnR5IGFuZCBpdCdzIG5vdCBudWxsIG9yIGVtcHR5CiAgICAgICAgaWYgKChUZXN0LU1lbWJlciAkRGF0YWJhc2VDb25maWcgJ2NvbGxhdGlvbicpIC1hbmQgJERhdGFiYXNlQ29uZmlnLmNvbGxhdGlvbikKICAgICAgICB7CiAgICAgICAgICAgICRwYXJhbS5BZGQoJ0NvbGxhdGlvbicsICREYXRhYmFzZUNvbmZpZy5jb2xsYXRpb24pCiAgICAgICAgfQoKICAgICAgICAjIElmIHRoZSAkRGF0YWJhc2VDb25maWcgb2JqZWN0IGhhcyBhbiBlZGl0aW9uIHByb3BlcnR5IGFuZCBpdCdzIG5vdCBudWxsIG9yIGVtcHR5CiAgICAgICAgaWYgKChUZXN0LU1lbWJlciAkRGF0YWJhc2VDb25maWcgJ2VkaXRpb24nKSAtYW5kICREYXRhYmFzZUNvbmZpZy5lZGl0aW9uKQogICAgICAgIHsKICAgICAgICAgICAgJHBhcmFtLkFkZCgnRWRpdGlvbicsICREYXRhYmFzZUNvbmZpZy5lZGl0aW9uKQogICAgICAgIH0KCiAgICAgICAgIyBXcml0ZSB0aGUgaGFzaCB0YWJsZSB0byB0aGUgVmVyYm9zZSBzdHJlYW0KICAgICAgICAkcGFyYW0gfCBPdXQtU3RyaW5nIHwgV3JpdGUtVmVyYm9zZVdpdGhUaW1lCiAgICAgICAgIyBDYWxsIE5ldy1BenVyZVNxbERhdGFiYXNlIHdpdGggc3BsYXR0aW5nIChzdXBwcmVzcyB0aGUgb3V0cHV0KQogICAgICAgICRkYiA9IE5ldy1BenVyZVNxbERhdGFiYXNlIEBwYXJhbQogICAgfQoKICAgIFdyaXRlLVZlcmJvc2VXaXRoVGltZSAnQWRkLUF6dXJlU1FMRGF0YWJhc2U6IEVuZCcKICAgIHJldHVybiAkZGIKfQo=
