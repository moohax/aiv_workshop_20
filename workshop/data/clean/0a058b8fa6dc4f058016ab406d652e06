xDscDiagnostics.psm1,19fc4bb4286d1a2c13a116b3ed9c82b7,Scan result is 1. IsMalware: 0,PCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICMgIFRoaXMgc2NyaXB0IGVuYWJsZXMgYSB1c2VyIHRvIGRpYWdub3NlIGVycm9ycyBjYXVzZWQgYnkgYSBEU0Mgb3BlcmF0aW9uLiBJbiBzaG9ydCwgdGhlIGZvbGxvd2luZyBjb21tYW5kcyB3b3VsZCBoZWxwIHlvdSBkaWFnbm9zZSBlcnJvcnMKICMgIFRvIGdldCB0aGUgbGFzdCAxMCBvcGVyYXRpb25zIGluIERTQyB0aGF0IHNob3cgdGhlaXIgUmVzdWx0IHN0YXR1cyAoZmFpbHVyZSAsIHN1Y2Nlc3MpICAgICAgICAgOiBHZXQteERzY09wZXJhdGlvbgogIyAgVG8gZ2V0IGEgbGlzdCBvZiBsYXN0IG4gKHNheSwgMTMpIERTQyBvcGVyYXRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBHZXQteERzY09wZXJhdGlvbiAtTmV3ZXN0IDEzCiAjICBUbyBzZWUgZGV0YWlscyBvZiB0aGUgbGFzdCBvcGVyYXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFRyYWNlLXhEc2NPcGVyYXRpb24KICMgIFRPIHZpZXcgdHJhY2UgZGV0YWlscyBvZiB0aGUgdGhpcmQgbGFzdCBvcGVyYXRpb24gcnVuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogVHJhY2UteERzY09wZXJhdGlvbiAzCiAjICBUbyB2aWV3IHRyYWNlIGRldGFpbHMgb2YgYW4gb3BlcmF0aW9uIHdpdGggSm9iIElEICRqSUQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFRyYWNlLXhEc2NPcGVyYXRpb24gLUpvYklEICRqSUQKICMgIFRvIFZpZXcgdHJhY2UgZGV0YWlscyBvZiBtdWx0aXBsZSBjb21wdXRlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogVHJhY2UteERzY09wZXJhdGlvbiAtQ29tcHV0ZXJOYW1lIEAoIlBOMjUxMTNEMDg5MSIsIlBOMjUxMTNEMDg5MCIpIAogIyAgVG8gZW5hYmxlIHRoZSBkZWJ1ZyBldmVudCBjaGFubmVsIGZvciBEU0MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIC1DaGFubmVsIERlYnVnIC1TdGF0dXMgRW5hYmxlZAogIyAgVG8gZW5hYmxlIHRoZSBhbmFseXRpYyBldmVudCBjaGFubmVsIGZvciBEU0Mgb24gYW5vdGhlciBjb21wdXRlciAoc2F5LCB3aXRoIG5hbWUgQUJDKSAgICAgICAgOiBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIC1DaGFubmVsIEFuYWx5dGljIC1TdGF0dXMgRW5hYmxlZCAtQ29tcHV0ZXJOYW1lIEFCQwogIyAgVG8gZGlzYWJsZSB0aGUgYW5hbHl0aWMgZXZlbnQgY2hhbm5lbCBmb3IgRFNDIG9uIGFub3RoZXIgY29tcHV0ZXIgKHNheSwgd2l0aCBuYW1lIEFCQykgICAgICAgOiBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIC1DaGFubmVsIEFuYWx5dGljIC1TdGF0dXMgRGlzYWJsZWQgLUNvbXB1dGVyTmFtZSBBQkMKICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjPgoKI3JlZ2lvbiBHbG9iYWwgdmFyaWFibGVzCgogJFNjcmlwdDpEc2NWZXJib3NlRXZlbnRJZHNBbmRQcm9wZXJ0eUluZGV4ID0gQHs0MTAwID0gMzs0MTE3ID0gMjs0MDk4ID0gM307CiAkU2NyaXB0OkRzY0xvZ05hbWUgPSAiTWljcm9zb2Z0LXdpbmRvd3MtZHNjIgogJFNjcmlwdDpSZWRpcmVjdE91dHB1dCA9ICRmYWxzZQogJFNjcmlwdDpUZW1wb3JhcnlIdG1Mb2NhdGlvbiA9ICIkZW52OlRFTVAvZHNjcmVwb3J0IgogJFNjcmlwdDpTdWNjZXNzUmVzdWx0ID0gIlN1Y2Nlc3MiCiAkU2NyaXB0OkZhaWx1cmVSZXN1bHQgPSAiRmFpbHVyZSIKICRTY3JpcHQ6VGhpc0NyZWRlbnRpYWwgPSAiIgogJFNjcmlwdDpUaGlzQ29tcHV0ZXJOYW1lID0gJGVudjpDT01QVVRFUk5BTUUKICRTY3JpcHQ6VXNpbmdDb21wdXRlck5hbWUgPSAkZmFsc2UKICRTY3JpcHQ6Rm9ybWF0dGluZ0ZpbGUgPSAieERzY0RpYWdub3N0aWNzRm9ybWF0LnBzMXhtbCIKICRTY3JpcHQ6UnVuRmlyc3RUaW1lID0gJHRydWUKIAojZW5kcmVnaW9uCgojcmVnaW9uIENhY2hlIGZvciBldmVudHMKICRTY3JpcHQ6TGF0ZXN0R3JvdXBlZEV2ZW50cyA9IEB7fSAjSGFzaHRhYmxlIG9mICJDb21wdXRlcm5hbWUiLCAiR3JvdXBlZEV2ZW50cyIKICRTY3JpcHQ6TGF0ZXN0RXZlbnQgPSBAe30gICAgICAgICAgI0hhc2h0YWJsZSBvZiAiQ29tcHV0ZXJOYW1lIiwgIkxhdGVzdEV2ZW50IGxvZ2dlZCIKCiNlbmRyZWdpb24KCiNyZWdpb24gRXhwb3J0ZWQgRnVuY3Rpb25zCgogPCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCi5TWU5PUFNJUyAKVHJhY2VzIHRocm91Z2ggYW55IERTQyBvcGVyYXRpb24gc2VsZWN0ZWQgZnJvbSBhbW9uZyBhbGwgb3BlcmF0aW9ucyB1c2luZyBpdHMgdW5pcXVlIHNlcXVlbmNlIElEIChvYnRhaW5lZCBmcm9tIEdldC14RHNjT3BlcmF0aW9uKSwgb3IgZnJvbSBpdHMgdW5pcXVlIEpvYiBJRAoKLkRFU0NSSVBUSU9OClRoaXMgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsIGxvb2sgdGhyb3VnaCBhbGwgdGhlIGV2ZW50IGxvZ3MgZm9yIERTQywgYW5kIG91dHB1dCB0aGUgcmVzdWx0cyBpbiB0aGUgZm9ybSBvZiBhbiBvYmplY3QsIHRoYXQgY29udGFpbnMgdGhlIGV2ZW50IHR5cGUsIGV2ZW50IG1lc3NhZ2UsIHRpbWUgY3JlYXRlZCwgY29tcHV0ZXIgbmFtZSwgam9iIGlkLCBzZXF1ZW5jZSBudW1iZXIsIGFuZCB0aGUgZXZlbnQgaW5mb3JtYXRpb24uIAoKCi5QQVJBTUVURVIgU2VxdWVuY2VJZApFYWNoIG9wZXJhdGlvbiBpbiBEU0MgaGFzIGEgY2VydGFpbiBTZXF1ZW5jZSBJRCwgb3JkZXJlZCBieSB0aW1lIG9mIGNyZWF0aW9uIG9mIHRoZXNlIERTQyBvcGVyYXRpb25zLiBUaGUgc2VxdWVuY2UgSURzIGNhbiBiZSBvYnRhaW5lZCBieSBydW5uaW5nIEdldC14RHNjT3BlcmF0aW9uCkJ5IG1lbnRpb25pbmcgYSBzZXF1ZW5jZSBJRCwgdGhlIHRyYWNlIG9mIHRoZSBjb3JyZXNwb25kaW5nIERTQyBvcGVyYXRpb24gaXMgb3V0cHV0LgoKLlBBUkFNRVRFUiBKb2JJZApUaGUgZXZlbnQgdmlld2VyIHNob3dzIGVhY2ggRFNDIGV2ZW50IHN0YXJ0IHdpdGggYSB1bmlxdWUgam9iIElEIGZvciBlYWNoIG9wZXJhdGlvbi4gSWYgdGhpcyBqb2IgaWQgaXMgc3BlY2lmaWVkIHdpdGggdGhpcyBwYXJhbWV0ZXIsIHRoZW4gYWxsIGRpYWdub3N0aWMgbWVzc2FnZXMgZGlzcGxheWVkIGFyZSB0YWtlbiBmcm9tIHRoZSBkc2Mgb3BlcmF0aW9uIHBlcnRhaW5pbmcgdG8gdGhpcyBqb2IgaWQuCgoKLlBBUkFNRVRFUiBDb21wdXRlck5hbWUKVGhlIG5hbWVzIG9mIGNvbXB1dGVycyBpbiB3aGljaCB5b3Ugd291bGQgbGlrZSB0byB0cmFjZSB0aGUgcGFzdCBEU0Mgb3BlcmF0aW9ucwoKCi5QQVJBTUVURVIgQ3JlZGVudGlhbApUaGUgY3JlZGVudGlhbCBuZWVkZWQgdG8gYWNjZXNzIHRoZSBjb21wdXRlcnMgc3BlY2lmaWVkIGluc2lkZSBDb21wdXRlck5hbWUgcGFyYW1ldGVycwoKLkVYQU1QTEUKVG8gT2J0YWluIHRoZSBkaWFnbm9zdGljIGluZm9ybWF0aW9uIGZvciB0aGUgbGF0ZXN0IG9wZXJhdGlvbiAgICAgICAgICAgICAgICA6IApUcmFjZS14RHNjT3BlcmF0aW9uIAouRVhBTVBMRQpUbyBvYnRhaW4gdGhlIGRpYWdub3N0aWMgaW5mb3JtYXRpb24gZm9yIHRoZSB0aGlyZCBsYXRlc3Qgb3BlcmF0aW9uICAgICAgICAgIDogClRyYWNlLXhEc2NPcGVyYXRpb24gLXNlcXVlbmNlSWQgMwouRVhBTVBMRQpUbyBkaWFnbm9zZSBhbiBvcGVyYXRpb24gd2l0aCBqb2IgSWQgMTExMTIyMjItMTExMS0xMTIyLTExMjItMTExMTIyMjIxMTExICAgIDogClRyYWNlLXhEc2NPcGVyYXRpb24gLUpvYklkIDExMTEyMjIyLTExMTEtMTEyMi0xMTIyLTExMTEyMjIyMTExMQouRVhBTVBMRQpUbyBHZXQgTG9ncyBmcm9tIGEgcmVtb3RlIGNvbXB1dGVyICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogClRyYWNlLXhEc2NPcGVyYXRpb24gLUNvbXB1dGVyTmFtZSBYWVogLXNlcXVlbmNlSUQgMgoKVG8gR2V0IGxvZ3MgZnJvbSBhIHJlbW90ZSBjb21wdXRlciB3aXRoIGNyZWRlbnRpYWxzICAgICAgICAgICAgICAgICAgICAgICAgICA6IApUcmFjZS14RHNjT3BlcmF0aW9uIC1Db21wdXRlcm5hbWUgWFlaIC1DcmVkZW50aWFsICRteWNyZWRlbnRpYWwgLXNlcXVlbmNlSUQgMgoKVG8gZ2V0IGxvZ3MgZnJvbSBtdWx0aXBsZSByZW1vdGUgY29tcHV0ZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IApUcmFjZS14RHNjT3BlcmF0aW9uIC1Db21wdXRlck5hbWUgQCgiUE4yNTExM0QwODkxIiAsICJQTjI1MTEzRDA4OTAiKQpQbGVhc2Ugbm90ZSB0aGF0IHRvIHBlcmZvcm0gYWN0aW9ucyBvbiB0aGUgcmVtb3RlIGNvbXB1dGVyICwgaGF2ZSB0aGUgZmlyZXdhbGwgZm9yIHJlbW90ZSBjb25maWd1cmF0aW9uIGVuYWJsZWQuIFRoaXMgY2FuIGJlIGRvbmUgd2l0aCB0aGUgZm9sbG93aW5nIGNvbW1hbmQ6CkM6PiBOZXctTmV0RmlyZXdhbGxSdWxlIC1OYW1lICJTZXJ2aWNlIFJlbW90ZUFkbWluIiAtQWN0aW9uIEFsbG93CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIz4KZnVuY3Rpb24gVHJhY2UteERzY09wZXJhdGlvbgp7CiAgICAKICAgIFtjbWRsZXRCaW5kaW5nKCldCiAgICBwYXJhbSgKICAgICAgICBbVUludDMyXSRTZXF1ZW5jZUlEID0gMSwgI2xhdGVzdCBpcyBieSBkZWZhdWx0CiAgICAgICAgW0d1aWRdJEpvYklkLAogICAgICAgIFtTdHJpbmdbXV0kQ29tcHV0ZXJOYW1lLAogICAgICAgIFtwc2NyZWRlbnRpYWxdJENyZWRlbnRpYWwpCiAgICBBZGQtQ2xhc3NUeXBlcwogICAgaWYoJENvbXB1dGVyTmFtZSkKICAgIHsKICAgICAgICAkU2NyaXB0OlVzaW5nQ29tcHV0ZXJOYW1lID0gJHRydWUgIAogICAgICAgICRhcmdzID0gJFBTQm91bmRQYXJhbWV0ZXJzCiAgICAgICAgJG51bGwgPSAkYXJncy5SZW1vdmUoIkNvbXB1dGVyTmFtZSIpCiAgICAgICAgJG51bGwgPSAkYXJncy5SZW1vdmUoIkNyZWRlbnRpYWwiKQogICAgICAgICAgICAKICAgICAgIGZvcmVhY2goJHRoaXNDb21wdXRlck5hbWUgaW4gJENvbXB1dGVyTmFtZSkKICAgICAgIHsKICAgICAgICAgICAgTG9nRHNjRGlhZ25vc3RpY3MgLVZlcmJvc2UgIkdhdGhlcmluZyBsb2dzIGZvciBDb21wdXRlciAkdGhpc0NvbXB1dGVyTmFtZSAuLi4iCiAgICAgICAgICAgICRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZSA9ICR0aGlzQ29tcHV0ZXJOYW1lCiAgICAgICAgICAgICRTY3JpcHQ6VGhpc0NyZWRlbnRpYWwgPSAkQ3JlZGVudGlhbAogICAgICAgICAgICBUcmFjZS1Ec2NPcGVyYXRpb25JbnRlcm5hbCAgQFBTQm91bmRQYXJhbWV0ZXJzCiAgICAgICAgICAgIAogICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZSA9ICRlbnY6Q09NUFVURVJOQU1FCiAgICAgICAgVHJhY2UtRHNjT3BlcmF0aW9uSW50ZXJuYWwgQFBTQm91bmRQYXJhbWV0ZXJzCiAgICAgICAgICRTY3JpcHQ6VXNpbmdDb21wdXRlck5hbWUgPSAkZmFsc2UgIAogICAgfQp9CiAKICA8IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKLlNZTk9QU0lTIApHaXZlcyBhIGxpc3Qgb2YgYWxsIERTQyBvcGVyYXRpb25zIHRoYXQgd2VyZSBleGVjdXRlZCAuIEVhY2ggRFNDIG9wZXJhdGlvbiBoYXMgc2VxdWVuY2UgSWQgaW5mb3JtYXRpb24gLCBhbmQgam9iIGlkIGluZm9ybWF0aW9uCkl0IHJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMsIGVhY2ggb2Ygd2hpY2ggY29udGFpbiBpbmZvcm1hdGlvbiBvbiBhIGRpc3RpbmN0IERTQyBvcGVyYXRpb24gLiBIZXJlIGEgRFNDIG9wZXJhdGlvbiBpcyByZWZlcnJlZCB0byBhbnkgc2luZ2xlIERTQyBleGVjdXRpb24sIHN1Y2ggYXMgc3RhcnQtZHNjY29uZmlndXJhdGlvbiwgdGVzdC1kc2Njb25maWd1cmF0aW9uIGV0Yy4gVGhlc2Ugd2lsbCBsb2cgZXZlbnRzIHdpdGggYSB1bmlxdWUgam9iSUQgKGd1aWQpIGlkZW50aWZ5aW5nIHRoZSBEU0Mgb3BlcmF0aW9uLiAKCldoZW4geW91IHJ1biBHZXQteERzY09wZXJhdGlvbiwgeW91IHdpbGwgc2VlIGEgbGlzdCBvZiBwYXN0IERTQyBvcGVyYXRpb25zICwgYW5kIHlvdSBjb3VsZCB1c2UgdGhlIGZvbGxvd2luZyBkZXRhaWxzIGZyb20gdGhlIG91dHB1dCB0byB0cmFjZSBhbnkgb2YgdGhlbSBpbmRpdmlkdWFsbHkuCi0gSm9iIElEIDogQnkgdXNpbmcgdGhpcyBHVUlELCB5b3UgY2FuIHNlYXJjaCBmb3IgdGhlIGV2ZW50cyBpbiBFdmVudCB2aWV3ZXIsIG9yIHJ1biBUcmFjZS14RHNjT3BlcmF0aW9uIC1qb2JJRCA8cmVxdWlyZWQgSm9iaWQ+IHRvIG9idGFpbiBhbGwgZXZlbnQgZGV0YWlscyBvZiB0aGF0IG9wZXJhdGlvbgotIFNlcXVlbmNlIElkIDogQnkgdXNpbmcgdGhpcyBpZGVudGlmaWVyLCB5b3UgY291bGQgcnVuIFRyYWNlLXhEc2NPcGVyYXRpb24gPHNlcXVlbmNlSWQ+IHRvIGdldCBhbGwgZXZlbnQgZGV0YWlscyBvZiB0aGF0IHBhcnRpY3VsYXIgZHNjIG9wZXJhdGlvbi4KCgouREVTQ1JJUFRJT04KVGhpcyB3aWxsIGxpc3QgYWxsIHRoZSBEU0Mgb3BlcmF0aW9ucyB0aGF0IHdlcmUgcnVuIGluIHRoZSBwYXN0IGluIHRoZSBjb21wdXRlci4gQnkgRGVmYXVsdCwgaXQgd2lsbCBsaXN0IGxhc3QgMTAgb3BlcmF0aW9ucy4gCgouUEFSQU1FVEVSIE5ld2VzdApCeSBkZWZhdWx0IDEwIGxhc3QgRFNDIG9wZXJhdGlvbnMgYXJlIHB1bGxlZCBvdXQgZnJvbSB0aGUgZXZlbnQgbG9ncy4gVG8gaGF2ZSBtb3JlLCB5b3UgY291bGQgdXNlIGVudGVyIGFub3RoZXIgbnVtYmVyIHdpdGggdGhpcyBwYXJhbWV0ZXIuYSBQUyBPYmplY3Qgd2l0aCBhbGwgdGhlIGluZm9ybWF0aW9uIG91dHB1dCB0byB0aGUgc2NyZWVuIGNhbiBiZSBuYXZpZ2F0ZWQgYnkgdGhlIHVzZXIgYXMgcmVxdWlyZWQuCgoKLkVYQU1QTEUKUFMgQzpcPiBHZXQteERzY09wZXJhdGlvbiAyMCAjTGlzdHMgbGFzdCAyMCBvcGVyYXRpb25zClBTIEM6XD4gR2V0LXhEc2NPcGVyYXRpb24gLUNvbXB1dGVyTmFtZSBAKCJYWVoiICwgIkFCQyIpIC1DcmVkZW50aWFsICRjcmVkICNMaXN0cyBvcGVyYXRpb25zIGZvciB0aGUgYXJyYXkgb2YgY29tcHV0ZXJuYW1lcyBwYXNzZWQgaW4uCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjPgoKZnVuY3Rpb24gR2V0LXhEc2NPcGVyYXRpb24KewogICAgW2NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtKAogICAgICAgIFtVSW50MzJdJE5ld2VzdCA9IDEwLCAKICAgICAgICBbU3RyaW5nW11dJENvbXB1dGVyTmFtZSwKICAgICAgICBbcHNjcmVkZW50aWFsXSRDcmVkZW50aWFsKQogICAgQWRkLUNsYXNzVHlwZXMKICAgIGlmKCRDb21wdXRlck5hbWUpCiAgICB7CiAgICAgICAgJFNjcmlwdDpVc2luZ0NvbXB1dGVyTmFtZSA9ICR0cnVlICAKICAgICAgICAkYXJncyA9ICRQU0JvdW5kUGFyYW1ldGVycwogICAgICAgICRudWxsID0gJGFyZ3MuUmVtb3ZlKCJDb21wdXRlck5hbWUiKQogICAgICAgICRudWxsID0gJGFyZ3MuUmVtb3ZlKCJDcmVkZW50aWFsIikKICAgICAgICAgICAgCiAgICAgICBmb3JlYWNoKCR0aGlzQ29tcHV0ZXJOYW1lIGluICRDb21wdXRlck5hbWUpCiAgICAgICB7CiAgICAgICAgICAgIExvZ0RzY0RpYWdub3N0aWNzIC1WZXJib3NlICJHYXRoZXJpbmcgbG9ncyBmb3IgQ29tcHV0ZXIgJHRoaXNDb21wdXRlck5hbWUiCiAgICAgICAgICAgICRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZSA9ICR0aGlzQ29tcHV0ZXJOYW1lCiAgICAgICAgICAgICRTY3JpcHQ6VGhpc0NyZWRlbnRpYWwgPSAkQ3JlZGVudGlhbAogICAgICAgICAgICBHZXQtRHNjT3BlcmF0aW9uSW50ZXJuYWwgIEBQU0JvdW5kUGFyYW1ldGVycwogICAgICAgICAgICAKICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkU2NyaXB0OlRoaXNDb21wdXRlck5hbWUgPSAkZW52OkNPTVBVVEVSTkFNRQogICAgICAgIEdldC1Ec2NPcGVyYXRpb25JbnRlcm5hbCBAUFNCb3VuZFBhcmFtZXRlcnMKICAgICAgICAgJFNjcmlwdDpVc2luZ0NvbXB1dGVyTmFtZSA9ICRmYWxzZSAgCiAgICB9Cgp9Cgo8IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKLlNZTk9QU0lTIApTZXRzIGFueSBEU0MgRXZlbnQgbG9nIChPcGVyYXRpb25hbCwgYW5hbHl0aWMsIGRlYnVnICkKCi5ERVNDUklQVElPTgpUaGlzIGNtZGxldCB3aWxsIHNldCBhIERTQyBsb2cgd2hlbiBydW4gd2l0aCBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIDxjaGFubmVsIE5hbWU+LgoKLlBBUkFNRVRFUiBDaGFubmVsCk1hbmRhdG9yeSBwYXJhbWV0ZXIgOiBOYW1lIG9mIHRoZSBjaGFubmVsIG9mIHRoZSBldmVudCBsb2cgdG8gYmUgc2V0IC0gSXQgaGFzIHRvIGJlIG9uZSBvZiBPcGVyYXRpb25hbCwgQW5hbHl0aWMgb3IgZGVidWcKCi5QQVJBTUVURVIgU3RhdHVzCk1hbmRhdG9yeSBQYXJhbWV0ZXIgOiBUaGlzIGlzIGEgc3RyaW5nIHBhcmFtZXRlciB3aGljaCBpcyBlaXRoZXIgIkVuYWJsZWQiIG9yICJkaXNhYmxlZCIgcmVwcmVzZW50aW5nIHRoZSByZXF1aXJlZCBmaW5hbCBzdGF0dXMgb2YgdGhlIGxvZyBjaGFubmVsLiBJZiB0aGlzIHZhbHVlIGlzICJlbmFibGVkIiwgdGhlbiB0aGUgY2hhbm5lbCBpcyBlbmFibGVkLgoKLlBBUkFNRVRFUiBDb21wdXRlck5hbWUKU3RyaW5nIHBhcmFtZXRlciB0aGF0IGNhbiBiZSB1c2VkIHRvIHNldCB0aGUgZXZlbnQgbG9nIGNoYW5uZWwgb24gYSByZW1vdGUgY29tcHV0ZXIgLiBOb3RlIDogSXQgbWF5IG5lZWQgYSBjcmVkZW50aWFsCgouUEFSQU1FVEVSIENyZWRlbnRpYWwKQ3JlZGVudGlhbCB0byBiZSBwYXNzZWQgaW4gc28gdGhhdCB0aGUgb3BlcmF0aW9uIGNhbiBiZSBwZXJmb3JtZWQgb24gdGhlIHJlbW90ZSBjb21wdXRlcgoKLkVYQU1QTEUKQzpcUFM+IFVwZGF0ZS14RHNjRXZlbnRMb2dTdGF0dXMgIkFuYWx5dGljIiAtU3RhdHVzICJFbmFibGVkIgpDOlxQUz4gVXBkYXRlLXhEc2NFdmVudExvZ1N0YXR1cyAtQ2hhbm5lbCAiRGVidWciIC1Db21wdXRlck5hbWUgIkFCQyIgCkM6XFBTPiBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIC1DaGFubmVsICJEZWJ1ZyIgLUNvbXB1dGVyTmFtZSAiQUJDIiAtU3RhdHVzIERpc2FibGVkCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIz4KIGZ1bmN0aW9uIFVwZGF0ZS14RHNjRXZlbnRMb2dTdGF0dXMKIHsKICAgIFtjbWRsZXRCaW5kaW5nKCldCiAgICBwYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSldCiAgICAgICAgW1ZhbGlkYXRlU2V0KCdBbmFseXRpYycgLCAnRGVidWcnICwgJ09wZXJhdGlvbmFsJyldCiAgICAgICAgW1N0cmluZ10kQ2hhbm5lbCwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkpXQogICAgICAgIFtWYWxpZGF0ZVNldCgnRW5hYmxlZCcgLCAnRGlzYWJsZWQnKV0KICAgICAgICBbU3RyaW5nXSRTdGF0dXMsCgogICAgICAgIFtTdHJpbmddJENvbXB1dGVyTmFtZSwKCiAgICAgICAgW1BTQ3JlZGVudGlhbF0kQ3JlZGVudGlhbAogICAgKQoKICAgICRMb2dOYW1lID0gIk1pY3Jvc29mdC1XaW5kb3dzLURzYyIKICAgICRzdGF0dXNFbmFibGVkID0gJGZhbHNlCiAgICAkZXZlbnRMb2dGdWxsTmFtZSA9ICIkTG9nTmFtZS8kQ2hhbm5lbCIKICAgIGlmKCRTdGF0dXMgLWVxICJFbmFibGVkIikKICAgIHsKICAgICAgICAgICAgJHN0YXR1c0VuYWJsZWQgPSAkdHJ1ZQogICAgfQogICAgI0Zvcm0gdGhlIGJhc2ljIGNvbW1hbmQgd2hpY2ggd2lsbCBlbmFibGUvZGlzYWJsZSBhbnkgZXZlbnQgbG9nCiAgICAkY29tbWFuZFRvRXhlY3V0ZSA9ICJ3ZXZ0dXRpbCBzZXQtbG9nICRldmVudExvZ0Z1bGxOYW1lIC9lOiRzdGF0dXNFbmFibGVkIC9xOiRzdGF0dXNFbmFibGVkICAgIgogICAgCiAgICBMb2dEc2NEaWFnbm9zdGljcyAtVmVyYm9zZSAiQ2hhbmdpbmcgc3RhdHVzIG9mIHRoZSBsb2cgJGV2ZW50TG9nRnVsbE5hbWUgdG8gJFN0YXR1cyIKICAgICNJZiB0aGVyZSBpcyBubyBjb21wdXRlciBuYW1lIHNwZWNpZmllZCwganVzdCBpbnZva2UgdGhlIGNvbW1hbmQgaW4gdGhlIHNhbWUgY29tcHV0ZXIKICAgIGlmKCEkQ29tcHV0ZXJOYW1lKQogICAgewogICAgICAgICAgICAKICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAkY29tbWFuZFRvRXhlY3V0ZQogICAgfQogICAgZWxzZQogICAgewoKICAgICAgICAjRm9yIGFueSBvdGhlciBjb21wdXRlciwgaW52b2tlIGNvbW1hbmQuCiAgICAgICAgJHNjcmlwdFRvU2V0Q2hhbm5lbCA9IFtTY3JpcHRibG9ja106OkNyZWF0ZSgkY29tbWFuZFRvRXhlY3V0ZSkKICAgICAgICAgICAgCiAgICAgICAgaWYoJENyZWRlbnRpYWwpCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJHNjcmlwdFRvU2V0Q2hhbm5lbCAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUgIC1DcmVkZW50aWFsICRDcmVkZW50aWFsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIEludm9rZS1Db21tYW5kIC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZSAtU2NyaXB0QmxvY2sgJHNjcmlwdFRvU2V0Q2hhbm5lbAogICAgICAgIH0KICAgIH0KICAgIExvZ0RzY0RpYWdub3N0aWNzIC1WZXJib3NlICJUaGUgJENoYW5uZWwgZXZlbnQgbG9nIGhhcyBiZWVuICRTdGF0dXMuICIKICAgIAoKIH0KI2VuZHJlZ2lvbgoKI3JlZ2lvbiBGdW5jdGlvblRvb2xzCgojRnVuY3Rpb24gdG8gT3V0cHV0IGVycm9ycywgdmVyYm9zZSBtZXNzYWdlcyBvciB3YXJuaW5nCmZ1bmN0aW9uIExvZ0RzY0RpYWdub3N0aWNzCnsKICAgIHBhcmFtKCR0ZXh0ICwgW1N3aXRjaF0kRXJyb3IgLCBbU3dpdGNoXSRWZXJib3NlICwgIFtTd2l0Y2hdJFdhcm5pbmcpCiAgICAkZm9ybWF0dGVkVGV4dCA9ICJYRHNjRGlhZ25vc3RpY3MgOiAkdGV4dCIKICAgIGlmKCRFcnJvcikKICAgIHsKICAgICAgICBXcml0ZS1FcnJvciAgICRmb3JtYXR0ZWRUZXh0CiAgICB9CiAgICBlbHNlaWYoJFZlcmJvc2UpCiAgICB7CiAgICAgICAgV3JpdGUtVmVyYm9zZSAkZm9ybWF0dGVkVGV4dAogICAgfQogICAgCiAgICBlbHNlaWYoJFdhcm5pbmcpCiAgICB7CiAgICAgICAgV3JpdGUtV2FybmluZyAkZm9ybWF0dGVkVGV4dAogICAgfQoKfQpmdW5jdGlvbiBBZGQtQ2xhc3NUeXBlcwp7CiAgICAjV2UgZG9uJ3Qgd2FudCB0byBhZGQgdGhlIHNhbWUgdHlwZXMgYWdhaW4gYW5kIGFnYWluLgogICAgaWYoJFNjcmlwdDpSdW5GaXJzdFRpbWUpCiAgICB7CiAgICAgICAgJHBhdGhUb0Zvcm1hdHRpbmdGaWxlID0gKEpvaW4tUGF0aCAgJFBTU2NyaXB0Um9vdCAkU2NyaXB0OkZvcm1hdHRpbmdGaWxlKQogICAgICAgICRDbGFzc0RlZmluaXRpb25Hcm91cGVkRXZlbnRzID0gQCIKICAgICAgICAgICAgdXNpbmcgU3lzdGVtOwogICAgICAgICAgICB1c2luZyBTeXN0ZW0uR2xvYmFsaXphdGlvbjsKICAgICAgICAgICAgdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zOwogICAgICAgICAgICBuYW1lc3BhY2UgTWljcm9zb2Z0LlBvd2VyU2hlbGwueERzY0RpYWdub3N0aWNzCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHB1YmxpYyBjbGFzcyBHcm91cGVkRXZlbnRzIHsKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIGludCBTZXF1ZW5jZUlkOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgU3lzdGVtLkRhdGVUaW1lIFRpbWVDcmVhdGVkOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgc3RyaW5nIENvbXB1dGVyTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIEd1aWQ/IEpvYklEID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIFN5c3RlbS5BcnJheSBBbGxFdmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBpbnQgTnVtYmVyT2ZFdmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBTeXN0ZW0uQXJyYXkgQW5hbHl0aWNFdmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBTeXN0ZW0uQXJyYXkgRGVidWdFdmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBTeXN0ZW0uQXJyYXkgTm9uVmVyYm9zZUV2ZW50czsKICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIFN5c3RlbS5BcnJheSBWZXJib3NlRXZlbnRzOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgU3lzdGVtLkFycmF5IE9wZXJhdGlvbmFsRXZlbnRzOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgU3lzdGVtLkFycmF5IEVycm9yRXZlbnRzOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgU3lzdGVtLkFycmF5IFdhcm5pbmdFdmVudHM7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgUmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoiQAogICAgICAgICRDbGFzc0RlZmluaXRpb25UcmFjZU91dHB1dCA9IEAiCiAgICAgICAgICAgICAgIHVzaW5nIFN5c3RlbTsKICAgICAgICAgICAgICAgdXNpbmcgU3lzdGVtLkdsb2JhbGl6YXRpb247CiAgICAgICAgICAgICAgIG5hbWVzcGFjZSBNaWNyb3NvZnQuUG93ZXJTaGVsbC54RHNjRGlhZ25vc3RpY3MKICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgcHVibGljIGVudW0gRXZlbnRUeXBlIHsKICAgICAgICAgICAgICAgICAgICAgICAgREVCVUcsCiAgICAgICAgICAgICAgICAgICAgICAgIEFOQUxZVElDLAogICAgICAgICAgICAgICAgICAgICAgICBPUEVSQVRJT05BTCwKICAgICAgICAgICAgICAgICAgICAgICAgRVJST1IsCiAgICAgICAgICAgICAgICAgICAgICAgIFZFUkJPU0UKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgIHB1YmxpYyBjbGFzcyBUcmFjZU91dHB1dCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBFdmVudFR5cGUgRXZlbnRUeXBlOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgU3lzdGVtLkRhdGVUaW1lIFRpbWVDcmVhdGVkOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgc3RyaW5nIE1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBzdHJpbmcgQ29tcHV0ZXJOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgR3VpZD8gSm9iSUQgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgaW50IFNlcXVlbmNlSUQ7CiAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBTeXN0ZW0uRGlhZ25vc3RpY3MuRXZlbnRpbmcuUmVhZGVyLkV2ZW50UmVjb3JkIEV2ZW50OwogICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgCiJACiAgICAgICAgQWRkLVR5cGUgLUxhbmd1YWdlIENTaGFycCAtVHlwZURlZmluaXRpb24gJENsYXNzRGVmaW5pdGlvbkdyb3VwZWRFdmVudHMKICAgICAgICBBZGQtVHlwZSAtTGFuZ3VhZ2UgQ1NoYXJwIC1UeXBlRGVmaW5pdGlvbiAkQ2xhc3NEZWZpbml0aW9uVHJhY2VPdXRwdXQKICAgICAgICAjVXBkYXRlLVR5cGVEYXRhIC1UeXBlTmFtZSBUcmFjZU91dHB1dCAtRGVmYXVsdERpc3BsYXlQcm9wZXJ0eVNldCBFdmVudFR5cGUsIFRpbWVDcmVhdGVkLCBNZXNzYWdlIAogICAgICAgIFVwZGF0ZS1Gb3JtYXREYXRhICAtUHJlcGVuZFBhdGggJHBhdGhUb0Zvcm1hdHRpbmdGaWxlIAogICAgICAgIAogICAgICAgICRTY3JpcHQ6UnVuRmlyc3RUaW1lID0gJGZhbHNlOyAjU28gaXQgZG9lc250IGRvIGl0IHRoZSBzZWNvbmQgdGltZS4KICAgIH0KfQoKZnVuY3Rpb24gR2V0LUFsbEdyb3VwZWREc2NFdmVudHMKewogICAgJGdyb3VwZWRFdmVudHMgPSAkbnVsbAogICAgJGxhdGVzdEV2ZW50ID0gR2V0LUxhdGVzdEV2ZW50CiAgICBMb2dEc2NEaWFnbm9zdGljcyAtVmVyYm9zZSAiQ29sbGVjdGluZyBhbGwgZXZlbnRzIGZyb20gdGhlIERTQyBsb2dzIgogICAgaWYoJFNjcmlwdDpMYXRlc3RFdmVudFskU2NyaXB0OlRoaXNDb21wdXRlck5hbWVdKQogICAgewogICAgICAgICNDaGVjayBpZiB0aGVyZSB3ZXJlIGFueSBkaWZmZXJlbmNlcyBiZXR3ZWVuIHRoZSBsYXRlc3QgZXZlbnQgYW5kIHRoZSBsYXRlc3QgZXZlbnQgaW4gdGggZWNhY2hlCiAgICAgICAgJGNvbXBhcmVSZXN1bHQgPSBDb21wYXJlLU9iamVjdCAkU2NyaXB0OkxhdGVzdEV2ZW50WyRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZV0gJGxhdGVzdEV2ZW50IC1Qcm9wZXJ0eSBUaW1lQ3JlYXRlZCwgTWVzc2FnZQogICAgICAgICNDb21wYXJlIG9iamVjdCByZXN1bHQgd2lsbCBiZSBudWxsIGlmIHRoZXkncmUgYm90aCBlcXVhbAogICAgICAgIGlmKCgkY29tcGFyZVJlc3VsdCAtZXEgJG51bGwpIC1hbmQgJFNjcmlwdDpMYXRlc3RHcm91cGVkRXZlbnRzWyRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZV0pCiAgICAgICAgewogICAgICAgICAgICAjIHRoaXMgbWVhbnMgbm8gbmV3IGV2ZW50cyB3ZXJlIGdlbmVyYXRlZCBhbmQgeW91IGNhbiB1c2UgdGhlIGV2ZW50IGNhY2hlLgogICAgICAgICAgICAkZ3JvdXBlZEV2ZW50cyA9ICRTY3JpcHQ6TGF0ZXN0R3JvdXBlZEV2ZW50c1skU2NyaXB0OlRoaXNDb21wdXRlck5hbWVdCiAgICAgICAgICAgIHJldHVybiAkZ3JvdXBlZEV2ZW50cwogICAgICAgIH0KICAgICAgICAKICAgIH0KICAgICNpZiBjYWNoZSBuZWVkcyB0byBiZSByZXBsYWNlZCwgaXQgd2lsbCBub3QgcmV0dXJuIGluIHRoZSBwcmV2aW91cyBsaW5lIGFuZCB3aWxsIGNvbWUgaGVyZS4KICAgICAgICAKICAgICAgICAjU2F2ZSBpdCB0byBjYWNoZQogICAgJGFsbEV2ZW50cyA9IEdldC1BbGxEc2NFdmVudHMKICAgIGlmKCEkYWxsRXZlbnRzKQogICAgewogICAgICAgIExvZ0RzY0RpYWdub3N0aWNzIC1FcnJvciAiRXJyb3IgOiBDb3VsZCBub3QgZmluZCBhbnkgZXZlbnRzLiBFaXRoZXIgYSBEU0Mgb3BlcmF0aW9uIGhhcyBub3QgYmVlbiBydW4sIG9yIHRoZSBldmVudCBsb2dzIGFyZSB0dXJuZWQgb2ZmIC4gUGxlYXNlIGVuc3VyZSB0aGUgZXZlbnQgbG9ncyBhcmUgdHVybmVkIG9uIGluIERTQy4gVG8gc2V0IGFuIGV2ZW50IGxvZywgcnVuIHRoZSBjb21tYW5kIHdldnR1dGlsIFNldC1Mb2cgPGNoYW5uZWxOYW1lPiAvZTp0cnVlLCBleGFtcGxlOiB3ZXZ0dXRpbCBzZXQtbG9nICdNaWNyb3NvZnQtV2luZG93cy1Ec2MvT3BlcmF0aW9uYWwnIC9lOnRydWUgL3E6dHJ1ZSIKICAgICAgICByZXR1cm4KICAgIH0KICAgICRncm91cGVkRXZlbnRzID0gJGFsbEV2ZW50cyB8IEdyb3VwIHskXy5Qcm9wZXJ0aWVzWzBdLlZhbHVlfSAKICAgIAogICAgJFNjcmlwdDpMYXRlc3RFdmVudFskU2NyaXB0OlRoaXNDb21wdXRlck5hbWVdID0gJGxhdGVzdEV2ZW50CiAgICAkU2NyaXB0OkxhdGVzdEdyb3VwZWRFdmVudHNbJFNjcmlwdDpUaGlzQ29tcHV0ZXJOYW1lXSA9ICRncm91cGVkRXZlbnRzCiAgICAKCiAgICAjZ3JvdXAgYmFzZWQgb24gdGhlaXIgSm9iIElkcwogICAgcmV0dXJuICRncm91cGVkRXZlbnRzCn0KCiNXcmFwcGVyIG92ZXIgR2V0LVdpbkV2ZW50LCB0aGF0IHdpbGwgY2FsbCBpbnRvIGEgY29tcHV0ZXIgaWYgcmVxdWlyZWQuCiBmdW5jdGlvbiBHZXQtV2luRXZlbnQKIHsKICAgICRyZXN1bHRBcnJheSA9ICIiCiAgICB0cnkKICAgIHsKICAgICAgICAgaWYoJFNjcmlwdDpVc2luZ0NvbXB1dGVyTmFtZSkKICAgICAgICB7CiAgICAgICAgCiAgICAgICAgICAgIGlmKCRTY3JpcHQ6VGhpc0NyZWRlbnRpYWwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRyZXN1bHRBcnJheSA9IE1pY3Jvc29mdC5Qb3dlclNoZWxsLkRpYWdub3N0aWNzXEdldC1XaW5FdmVudCBAYXJncyAtQ29tcHV0ZXJOYW1lICRTY3JpcHQ6VGhpc0NvbXB1dGVyTmFtZSAtQ3JlZGVudGlhbCAkU2NyaXB0OlRoaXNDcmVkZW50aWFsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkcmVzdWx0QXJyYXkgPSBNaWNyb3NvZnQuUG93ZXJTaGVsbC5EaWFnbm9zdGljc1xHZXQtV2luRXZlbnQgQGFyZ3MgLUNvbXB1dGVyTmFtZSAkU2NyaXB0OlRoaXNDb21wdXRlck5hbWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgJHJlc3VsdEFycmF5ID0gTWljcm9zb2Z0LlBvd2VyU2hlbGwuRGlhZ25vc3RpY3NcR2V0LVdpbkV2ZW50IEBhcmdzCiAgICAgICAgfQogICAgfQogICAgY2F0Y2gKICAgIHsKICAgICAgICBMb2dEc2NEaWFnbm9zdGljcyAtRXJyb3IgIkdldC1XaW5ldmVudCBmYWlsZWQgd2l0aCBlcnJvciA6ICRfICIKICAgICAgICB0aHJvdyAiQ2Fubm90IHJlYWQgZXZlbnRzIGZyb20gY29tcHV0ZXIgJFNjcmlwdDpUaGlzQ29tcHV0ZXJOYW1lLiBQbGVhc2UgY2hlY2sgaWYgdGhlIGZpcmV3YWxsIGlzIGVuYWJsZWQuIFJ1biB0aGlzIGNvbW1hbmQgaW4gdGhlIHJlbW90ZSBtYWNoaW5lIHRvIGVuYWJsZSBmaXJld2FsbCBmb3IgcmVtb3RlIGFkbWluaXN0cmF0aW9uIDogTmV3LU5ldEZpcmV3YWxsUnVsZSAtTmFtZSAnU2VydmljZSBSZW1vdGVBZG1pbicgLUFjdGlvbiBBbGxvdyAiCiAgICB9CiAgICByZXR1cm4gJHJlc3VsdEFycmF5Cgp9CiAjR2V0cyB0aGUgSk9CIElEIG9mIHRoZSBtb3N0IHJlY2VudGx5IGV4ZWN1dGVkIHNjcmlwdC4KIGZ1bmN0aW9uIEdldC1Ec2NMYXRlc3RKb2JJZAogewogICAgCiAgICAjQ29sbGVjdCBvcGVyYXRpb25hbCBldmVudHMgLCB0aGV5J3JlIG9yZGVyZWQgZnJvbSBuZXdlc3QgdG8gb2xkZXN0LgogICAgCiAgICAkYWxsRXZlbnRzID0gR2V0LVdpbkV2ZW50IC1Mb2dOYW1lICIkU2NyaXB0OkRzY0xvZ05hbWUvb3BlcmF0aW9uYWwiIC1NYXhFdmVudHMgMiAtZWEgSWdub3JlCiAgICBpZigkYWxsRXZlbnRzIC1lcSAkbnVsbCkKICAgIHsKICAgICAgICByZXR1cm4gIk5PSk9CSUQiCiAgICB9CiAgICAkbGF0ZXN0RXZlbnQgPSAkYWxsRXZlbnRzWzBdICNTaW5jZSBpdCBleHRyYWN0cyBpdCBpbiBhIHNvcnRlZCBvcmRlci4KCiAgICAjRXh0cmFjdCBqdXN0IHRoZSBqb2JJZCBmcm9tIHRoZSBzdHJpbmcgbGlrZSA6IEpvYiA6IHs8am9iaWQ+fQogICAgIyRqb2JJbmZvID0gKCgoKCRsYXRlc3RFdmVudC5NZXNzYWdlIC1zcGxpdCAoIjoiLDIpKVswXSAtc3BsaXQgImpvYiB7IilbMV0pIC1zcGxpdCAifSIpWzBdCiAgICAkam9iSW5mbyA9ICRsYXRlc3RFdmVudC5Qcm9wZXJ0aWVzWzBdLnZhbHVlCiAgICAgICAgCiAgICByZXR1cm4gJGpvYkluZm8uVG9TdHJpbmcoKQogfQogZnVuY3Rpb24gR2V0LUxhdGVzdEV2ZW50CiB7CiAgICAkYWxsRXZlbnRzID0gR2V0LVdpbkV2ZW50IC1Mb2dOYW1lICIkU2NyaXB0OkRzY0xvZ05hbWUvb3BlcmF0aW9uYWwiIC1NYXhFdmVudHMgMiAtZWEgSWdub3JlCiAgICBpZigkYWxsRXZlbnRzIC1lcSAkbnVsbCkKICAgIHsKICAgICAgICByZXR1cm4gIk5PRVZFTlQiCiAgICB9CiAgICAkbGF0ZXN0RXZlbnQgPSAkYWxsRXZlbnRzWzBdICNTaW5jZSBpdCBleHRyYWN0cyBpdCBpbiBhIHNvcnRlZCBvcmRlci4KICAgIHJldHVybiAkbGF0ZXN0RXZlbnQKIH0KICNGdW5jdGlvbiB0byBnZXQgYWxsIGRzYyBldmVudHMgaW4gdGhlIGV2ZW50IGxvZyAtIG5vdCBleHBvc2VkIGJ5IHRoZSBtb2R1bGUKIGZ1bmN0aW9uIEdldC1BbGxEc2NFdmVudHMKIHsKICAgICNJZiB5b3Ugd2FudCBhIHNwZWNpZmljIGNoYW5uZWwgZXZlbnRzLCBydW4gaXQgYXMgR2V0LUFsbERzY0V2ZW50cyAKICAgIHBhcmFtCiAgICAoICAKICAgICAgIFtzdHJpbmdbXV0kQ2hhbm5lbFR5cGUgPSBAKCJEZWJ1ZyIgLCAiQW5hbHl0aWMiICwgIk9wZXJhdGlvbmFsIikgLAogICAgICAgJE90aGVyUGFyYW1ldGVycyA9IEB7fQogICAgICAgCiAgICApCiAgICBpZigkQ2hhbm5lbFR5cGUuVG9Mb3dlcigpLkNvbnRhaW5zKCJvcGVyYXRpb25hbCIpKSAKICAgIHsgCiAgICAgICAgCiAgICAgICAgJG9wZXJhdGlvbmFsRXZlbnRzID0gR2V0LVdpbkV2ZW50IC1Mb2dOYW1lICIkU2NyaXB0OkRzY0xvZ05hbWUvb3BlcmF0aW9uYWwiICBAT3RoZXJQYXJhbWV0ZXJzIC1lYSBJZ25vcmUKICAgICAgICAkYWxsRXZlbnRzID0gJG9wZXJhdGlvbmFsRXZlbnRzCiAgICAKICAgIH0KICAgIGlmKCRDaGFubmVsVHlwZS5Ub0xvd2VyKCkuQ29udGFpbnMoImFuYWx5dGljIikpCiAgICB7CiAgICAgICAgJGFuYWx5dGljRXZlbnRzID0gR2V0LVdpbkV2ZW50IC1Mb2dOYW1lICIkU2NyaXB0OkRzY0xvZ05hbWUvYW5hbHl0aWMiIC1PbGRlc3QgIC1lYSBJZ25vcmUgQE90aGVyUGFyYW1ldGVycwogICAgICAgIGlmKCRhbmFseXRpY0V2ZW50cyAtbmUgJG51bGwpICAgIAogICAgICAgIHsgCgogICAgICAgICAgICAgICAgI0NvbnZlcnQgdG8gYW4gYXJyYXkgdHlwZSBiZWZvcmUgYWRkaW5nIGFub3RoZXIgdHlwZSAtIHRvIGF2b2lkIHRoZSBlcnJvciAiTWV0aG9kIGludm9jYXRpb24gZmFpbGVkIHdpdGggbm8gb3BfYWRkaXRpb24gb3BlcmF0b3IiCiAgICAgICAgICAgICAgICAkYWxsRXZlbnRzID0gW1N5c3RlbS5BcnJheV0kYWxsRXZlbnRzICsgJGFuYWx5dGljRXZlbnRzCiAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgIH0KCiAgICBpZigkQ2hhbm5lbFR5cGUuVG9Mb3dlcigpLkNvbnRhaW5zKCJkZWJ1ZyIpKQogICAgewogICAgICAgICRkZWJ1Z0V2ZW50cyA9IEdldC1XaW5FdmVudCAtTG9nTmFtZSAiJFNjcmlwdDpEc2NMb2dOYW1lL2RlYnVnIiAtT2xkZXN0IC1lYSBJZ25vcmUgQE90aGVyUGFyYW1ldGVycwogICAgICAgIGlmKCRkZWJ1Z0V2ZW50cyAtbmUgJG51bGwpICAgIAogICAgICAgIHsgCiAgICAgICAgICAgICAgICAkYWxsRXZlbnRzID0gW1N5c3RlbS5BcnJheV0kYWxsRXZlbnRzICsgJGRlYnVnRXZlbnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICB9CiAgICB9CiAgICAKICAgIHJldHVybiAkYWxsRXZlbnRzCiB9CgoKICMgIEZ1bmN0aW9uIHRvIHByb21wdCB0aGUgdXNlciB0byBzZXQgYW4gZXZlbnQgbG9nLCBmb3IgdGhlIGNoYW5uZWwgcGFzc2VkIGluIGFzIHBhcmFtZXRlcgogIwogZnVuY3Rpb24gVGVzdC1Ec2NFdmVudExvZ1N0YXR1cwogewogICAgcGFyYW0oJENoYW5uZWwgPSAiQW5hbHl0aWMiKQogICAgJExvZ0RldGFpbHMgPSBHZXQtV2luRXZlbnQgLUxpc3RMb2cgIiRTY3JpcHQ6RHNjTG9nTmFtZS8kQ2hhbm5lbCIKICAgIGlmKCQoJExvZ0RldGFpbHMuSXNFbmFibGVkKSkKICAgIHsKICAgICAgICByZXR1cm4gJHRydWUKICAgIH0KICAgIExvZ0RzY0RpYWdub3N0aWNzIC1XYXJuaW5nICJUaGUgJENoYW5uZWwgbG9nIGlzIG5vdCBlbmFibGVkLiBUbyBlbmFibGUgaXQsIHBsZWFzZSBydW4gdGhlIGZvbGxvd2luZyBjb21tYW5kOiBgbiAgICAgICAgVXBkYXRlLXhEc2NFdmVudExvZ1N0YXR1cyAtQ2hhbm5lbCAkQ2hhbm5lbCAtU3RhdHVzIEVuYWJsZWQgYG5Gb3IgbW9yZSBoZWxwIG9uIHRoaXMgY21kbGV0IHJ1biBHZXQtSGVscCBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzIgogICAgICAgIAogICAgcmV0dXJuICRmYWxzZQoKIH0KCiAjVGhpcyBmdW5jdGlvbiBnZXRzIGFsbCB0aGUgRFNDIHJ1bnMgdGhhdCBhcmUgcmVjb3JkZWQgaW50byB0aGUgZXZlbnQgbG9nLgogZnVuY3Rpb24gR2V0LVNpbmdsZURzY09wZXJhdGlvbgogewogICAgI0lmIHlvdSBzcGVjaWZ5IGEgc2VxdWVuY2UgSUQsIHRoZW4gdGhlIGRpYWdub3NpcyB3aWxsIGJlIGZvciB0aGF0IHNlcXVlbmNlIElELgogICAgcGFyYW0oCiAgICAgICAgICBbVWludDMyXSRpbmRleEluQXJyYXkgPSAwLAogICAgICAgICAgW0d1aWRdJEpvYklkCiAgICAgICAgICApCgogICAgI0dldCBhbGwgZXZlbnRzIAogICAgJGdyb3VwZWRFdmVudHMgPSBHZXQtQWxsR3JvdXBlZERzY0V2ZW50cwogICAgaWYoISRncm91cGVkRXZlbnRzKQogICAgewogICAgICAgIHJldHVybgogICAgfQogICAgI0lmIHRoZXJlIGlzIGEgam9iIElEIHByZXNlbnQsIGlnbm9yZSB0aGUgSW5kZXhJbkFycmF5LCBzZWFyY2ggYmFzZWQgb24gam9iSUQKICAgIGlmKCRKb2JJZCkKICAgIHsKICAgICAgICBMb2dEc2NEaWFnbm9zdGljcyAtVmVyYm9zZSAiTG9va2luZyBhdCBFdmVudCBUcmFjZSBmb3IgdGhlIGdpdmVuIEpvYiBJRCAkSm9iSWQiCiAgICAgICAgJGluZGV4SW5BcnJheSA9IDA7CiAgICAgICAgZm9yZWFjaCgkZXZlbnRHcm91cCBpbiAkZ3JvdXBlZEV2ZW50cykKICAgICAgICB7CgogICAgICAgICAgICAjQ2hlY2sgaWYgdGhlIEpvYiBJRCBpcyBwcmVzZW50IGluIGFueSAKICAgICAgICAgICAgaWYoJCgkZXZlbnRHcm91cC5OYW1lKSAtbWF0Y2ggJEpvYklkKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAkaW5kZXhJbkFycmF5ICsrCiAgICAgICAgfQogICAgICAgIGlmKCRpbmRleEluQXJyYXkgLWdlICRncm91cGVkRXZlbnRzLkNvdW50KQogICAgICAgIHsKCiAgICAgICAgICAgICNUaGlzIG1lYW5zIHRoZSBqb2IgaWQgZG9lc24ndCBleGlzdAogICAgICAgICAgICBMb2dEc2NEaWFnbm9zdGljcyAtRXJyb3IgIlRoZSBKb2IgSUQgRW50ZXJlZCAkSm9iSWQsIGRvZXMgbm90IGV4aXN0IGFtb25nIHRoZSBkc2Mgb3BlcmF0aW9ucy4gVG8gZ2V0IGEgbGlzdCBvZiBwcmV2aW91c2x5IHJ1biBEU0Mgb3BlcmF0aW9ucywgcnVuIHRoaXMgY29tbWFuZCA6IEdldC14RHNjT3BlcmF0aW9uIgogICAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICB9CiAgICAkcmVxdWlyZWRSZWNvcmQgPSAkZ3JvdXBlZEV2ZW50c1skaW5kZXhJbkFycmF5XQogICAgaWYoJHJlcXVpcmVkUmVjb3JkIC1lcSAkbnVsbCkKICAgIHsKICAgICAgICBMb2dEc2NEaWFnbm9zdGljcyAtRXJyb3IgIkNvdWxkIG5vdCBvYnRhaW4gdGhlIHJlcXVpcmVkIHJlY29yZCEgIgogICAgICAgIHJldHVybgogICAgfQogICAgJGVycm9yVGV4dCA9ICJbTm9uZV0iCiAgICAkdGhpc1J1bnNPdXRwdXRFdmVudHMgPSBTcGxpdC1TaW5nbGVEc2NHcm91cGVkUmVjb3JkIC1zaW5nbGVSZWNvcmRJbkdyb3VwZWRFdmVudHMgJHJlcXVpcmVkUmVjb3JkIC1pbmRleCAkaW5kZXhJbkFycmF5CiAgICAgICAgCiAgICAkdGhpc1J1bnNPdXRwdXRFdmVudHMKCiB9CiAgCiBmdW5jdGlvbiBTcGxpdC1TaW5nbGVEc2NHcm91cGVkUmVjb3JkCiB7CiAgICBwYXJhbSgKICAgICRzaW5nbGVSZWNvcmRJbkdyb3VwZWRFdmVudHMsCiAgICAkaW5kZXgpCiAgICAgICAgICAgIAogICAgICAgICAgICAjJHNpbmdsZU91dHB1dFJlY29yZCA9IE5ldy1PYmplY3QgcHNvYmplY3QgCiAgICAgICAgICAgICRzdGF0dXMgPSAkU2NyaXB0OlN1Y2Nlc3NSZXN1bHQKICAgICAgICAgICAgJGVycm9yRXZlbnRzID0gQCgpCiAgICAgICAgICAgICRjb2xfQWxsRXZlbnRzID0gQCgpCiAgICAgICAgICAgICRjb2xfdmVyYm9zZUV2ZW50cyA9IEAoKQogICAgICAgICAgICAkY29sX2FuYWx5dGljRXZlbnRzID0gQCgpCiAgICAgICAgICAgICRjb2xfZGVidWdFdmVudHMgPSBAKCkKICAgICAgICAgICAgJGNvbF9vcGVyYXRpb25hbEV2ZW50cyA9IEAoKQogICAgICAgICAgICAkY29sX3dhcm5pbmdFdmVudHMgPSBAKCkKICAgICAgICAgICAgJGNvbF9ub25WZXJib3NlRXZlbnRzID0gQCgpCgogICAgICAgICAgICAjV2Ugd2FudCB0byBub3cgYWRkIGEgY29sdW1uIGZvciBlYWNoIGV2ZW50IHRoYXQgc2F5cyAic3RhdXMgYXMgc3VjY2VzcyBvciBmYWlsdXJlIgogICAgICAgICAgICAkb25lR3JvdXAgPSAkc2luZ2xlUmVjb3JkSW5Hcm91cGVkRXZlbnRzLkdyb3VwCiAgICAgICAgICAgICRjb2x1bW5fVGltZSA9ICRvbmVHcm91cFswXS5UaW1lQ3JlYXRlZAogICAgICAgICAgICAkb25lR3JvdXB8ICV7CiAgICAgICAgICAgICAgICAkdGhpc0V2ZW50ID0gJF8KICAgICAgICAgICAgICAgICR0aGlzVHlwZSA9ICIiCiAgICAgICAgICAgICAgICAkdGltZUNyZWF0ZWRPZkV2ZW50ID0gJF8uVGltZUNyZWF0ZWQKICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkXy5sZXZlbCAtZXEgMikgI3doaWNoIG1lYW5zIHRoZXJlJ3MgYW4gZXJyb3IKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkc3RhdHVzID0gIiRTY3JpcHQ6RmFpbHVyZVJlc3VsdCIKICAgICAgICAgICAgICAgICAgICAkZXJyb3JFdmVudHMgKz0gJF8KICAgICAgICAgICAgICAgICAgICAkdGhpc1R5cGU9IFtNaWNyb3NvZnQuUG93ZXJTaGVsbC54RHNjRGlhZ25vc3RpY3MuRXZlbnRUeXBlXTo6RVJST1IKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZigkXy5MZXZlbERpc3BsYXlOYW1lIC1saWtlICJ3YXJuaW5nIikgeyAkY29sX3dhcm5pbmdFdmVudHMgKz0gJF8gfQogICAgICAgICAgICAgICAgaWYoJF8uQ29udGFpbmVyTG9nLmVuZHNXaXRoKCJvcGVyYXRpb25hbCIpKSAKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgJGNvbF9vcGVyYXRpb25hbEV2ZW50cyArPSAkXyA7IAogICAgICAgICAgICAgICAgICAgICRjb2xfbm9uVmVyYm9zZUV2ZW50cyArPSAkXyAKCiAgICAgICAgICAgICAgICAgICAgI09ubHkgaWYgaXRzIG5vdCBhbiBlcnJvciBtZXNzYWdlLCBtYXJrIGl0IGFzIE9QZXJhdGlvbmFsIHRhZwogICAgICAgICAgICAgICAgICAgIGlmKCEkdGhpc1R5cGUpCiAgICAgICAgICAgICAgICAgICAgeyR0aGlzVHlwZSA9IFtNaWNyb3NvZnQuUG93ZXJTaGVsbC54RHNjRGlhZ25vc3RpY3MuRXZlbnRUeXBlXTo6T1BFUkFUSU9OQUx9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlaWYoJF8uQ29udGFpbmVyTG9nLmVuZHNXaXRoKCJkZWJ1ZyIpKSB7ICRjb2xfZGVidWdFdmVudHMgKz0gJF8gOyAkdGhpc1R5cGUgPSBbTWljcm9zb2Z0LlBvd2VyU2hlbGwueERzY0RpYWdub3N0aWNzLkV2ZW50VHlwZV06OkRFQlVHIH0KICAgICAgICAgICAgICAgIGVsc2VpZigkXy5Db250YWluZXJMb2cuZW5kc1dpdGgoImFuYWx5dGljIikpIAogICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAkY29sX2FuYWx5dGljRXZlbnRzICs9ICRfICAKICAgICAgICAgICAgICAgICAgICBpZigkXy5JZCAtaW4gJFNjcmlwdDpEc2NWZXJib3NlRXZlbnRJZHNBbmRQcm9wZXJ0eUluZGV4LktleXMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkY29sX3ZlcmJvc2VFdmVudHMgKz0gJF8KICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXNUeXBlID0gW01pY3Jvc29mdC5Qb3dlclNoZWxsLnhEc2NEaWFnbm9zdGljcy5FdmVudFR5cGVdOjpWRVJCT1NFCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjb2xfbm9uVmVyYm9zZUV2ZW50cyArPSAkXwogICAgICAgICAgICAgICAgICAgICAgICAkdGhpc1R5cGUgPSBbTWljcm9zb2Z0LlBvd2VyU2hlbGwueERzY0RpYWdub3N0aWNzLkV2ZW50VHlwZV06OkFOQUxZVElDCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGV2ZW50TWVzc2FnZUZyb21FdmVudCA9IEdldC1NZXNzYWdlRnJvbUV2ZW50ICR0aGlzRXZlbnQgLXZlcmJvc2VUeXBlCiAgICAgICAgICAgICAgICAjQWRkIGV2ZW50IHdpdGggaXRzIHRhZyAKCiAgICAgICAgICAgICAgICAkdGhpc09iamVjdD0gTmV3LU9iamVjdCBQU29iamVjdCAtUHJvcGVydHkgQHtUaW1lQ3JlYXRlZCA9ICR0aW1lQ3JlYXRlZE9mRXZlbnQ7IEV2ZW50VHlwZSA9ICR0aGlzVHlwZTsgRXZlbnQgPSAkdGhpc0V2ZW50OyBNZXNzYWdlID0gJGV2ZW50TWVzc2FnZUZyb21FdmVudH0KICAgICAgICAgICAgICAgICRkZWZhdWx0UHJvcGVydGllcyA9IEAoJ1RpbWVDcmVhdGVkJyAsICdNZXNzYWdlJyAsICdFdmVudFR5cGUnKQogICAgICAgICAgICAgICAgJGRlZmF1bHREaXNwbGF5UHJvcGVydHlTZXQgPSBOZXctT2JqZWN0IFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNQcm9wZXJ0eVNldCgnRGVmYXVsdERpc3BsYXlQcm9wZXJ0eVNldCcgLCBbc3RyaW5nW11dJGRlZmF1bHRQcm9wZXJ0aWVzKQogICAgICAgICAgICAgICAgJGRlZmF1bHRNZW1iZXJzID0gW1N5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNNZW1iZXJJbmZvW11dQCgkZGVmYXVsdERpc3BsYXlQcm9wZXJ0eVNldCkKICAgICAgICAgICAgICAgICR0aGlzT2JqZWN0IHwgQWRkLU1lbWJlciBNZW1iZXJTZXQgUFNTdGFuZGFyZE1lbWJlcnMgJGRlZmF1bHRNZW1iZXJzCgogICAgICAgICAgICAgICAgJGNvbF9BbGxFdmVudHMgICs9ICR0aGlzT2JqZWN0CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGpvYklkV2l0aG91dFBhcmVudGhlc2lzID0gKCQoJHNpbmdsZVJlY29yZEluR3JvdXBlZEV2ZW50cy5OYW1lKS5zcGxpdCgne30nKSlbMV0gI1JlbW92ZSBwYXJhbnRoZXNpcyB0aGF0IGNvbWVzIGluIHRoZSBqb2IgaWQKICAgICAgICAgICAgaWYoISRqb2JJZFdpdGhvdXRQYXJlbnRoZXNpcykgeyRqb2JJZFdpdGhvdXRQYXJlbnRoZXNpcyA9ICRudWxsfQoKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZCA9IE5ldy1PYmplY3QgTWljcm9zb2Z0LlBvd2VyU2hlbGwueERzY0RpYWdub3N0aWNzLkdyb3VwZWRFdmVudHMgLXByb3BlcnR5IEB7CiAgICAgICAgICAgICAgICAgICBTZXF1ZW5jZUlEID0gJGluZGV4OwogICAgICAgICAgICAgICAgICAgQ29tcHV0ZXJOYW1lID0gJFNjcmlwdDpUaGlzQ29tcHV0ZXJOYW1lOwogICAgICAgICAgICAgICAgICAgSm9iSWQgPSAkam9iSWRXaXRob3V0UGFyZW50aGVzaXM7CiAgICAgICAgICAgICAgICAgICBUaW1lQ3JlYXRlZCA9ICRjb2x1bW5fVGltZTsKICAgICAgICAgICAgICAgICAgIFJlc3VsdCA9ICRzdGF0dXM7CiAgICAgICAgICAgICAgICAgICBOdW1iZXJPZkV2ZW50cyA9ICRzaW5nbGVSZWNvcmRJbkdyb3VwZWRFdmVudHMuQ291bnQ7fQogICAgICAgICAgICAKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZC5BbGxFdmVudHMgPSAkY29sX0FsbEV2ZW50cyB8IFNvcnQtT2JqZWN0IFRpbWVDcmVhdGVkOwogICAgICAgICAgICAkc2luZ2xlT3V0cHV0UmVjb3JkLkFuYWx5dGljRXZlbnRzID0gJGNvbF9hbmFseXRpY0V2ZW50cyA7CiAgICAgICAgICAgICRzaW5nbGVPdXRwdXRSZWNvcmQuV2FybmluZ0V2ZW50cyA9ICRjb2xfd2FybmluZ0V2ZW50cyB8IFNvcnQtT2JqZWN0IFRpbWVDcmVhdGVkIDsKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZC5PcGVyYXRpb25hbEV2ZW50cyA9ICRjb2xfb3BlcmF0aW9uYWxFdmVudHM7CiAgICAgICAgICAgICRzaW5nbGVPdXRwdXRSZWNvcmQuRGVidWdFdmVudHMgPSAkY29sX2RlYnVnRXZlbnRzIDsKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZC5WZXJib3NlRXZlbnRzID0gJGNvbF92ZXJib3NlRXZlbnRzICA7CiAgICAgICAgICAgICRzaW5nbGVPdXRwdXRSZWNvcmQuTm9uVmVyYm9zZUV2ZW50cyA9ICRjb2xfbm9uVmVyYm9zZUV2ZW50cyB8IFNvcnQtT2JqZWN0IFRpbWVDcmVhdGVkOwogICAgICAgICAgICAkc2luZ2xlT3V0cHV0UmVjb3JkLkVycm9yRXZlbnRzID0gJGVycm9yRXZlbnRzOwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuICRzaW5nbGVPdXRwdXRSZWNvcmQKIH0KCiBmdW5jdGlvbiBHZXQtTWVzc2FnZUZyb21FdmVudCgkRXZlbnRSZWNvcmQgLCBbc3dpdGNoXSR2ZXJib3NlVHlwZSkKIHsKICAgIAogICAgI1lvdSBuZWVkIHRvIHJlbW92ZSB0aGUgam9iIElEIGFuZCBzZW5kIGJhY2sgdGhlIG1lc3NhZ2UKICAgIGlmKCRFdmVudFJlY29yZC5JZCAtaW4gJFNjcmlwdDpEc2NWZXJib3NlRXZlbnRJZHNBbmRQcm9wZXJ0eUluZGV4LktleXMgLWFuZCAkdmVyYm9zZVR5cGUpCiAgICB7CiAgICAgICAgJHJlcXVpcmVkSW5kZXggPSAkU2NyaXB0OkRzY1ZlcmJvc2VFdmVudElkc0FuZFByb3BlcnR5SW5kZXhbJCgkRXZlbnRSZWNvcmQuSWQpXQogICAgICAgIHJldHVybiAkRXZlbnRSZWNvcmQuUHJvcGVydGllc1skcmVxdWlyZWRJbmRleF0uVmFsdWUKICAgIH0KICAgIAogICAgJE5vbkpvYklkVGV4dCA9ICgkRXZlbnRSZWNvcmQuTWVzc2FnZSAtc3BsaXQoW0Vudmlyb25tZW50XTo6TmV3TGluZSAsIDIpKVsxXQoKICAgCiAgICByZXR1cm4gJE5vbkpvYklkVGV4dAogICAgCiB9CgoKIGZ1bmN0aW9uIEdldC1Ec2NFcnJvck1lc3NhZ2UKIHsKICAgIHBhcmFtKDwjW1N5c3RlbS5EaWFnbm9zdGljcy5FdmVudGluZy5SZWFkZXIuRXZlbnRSZWNvcmRbXV0jPiRFcnJvclJlY29yZHMpCiAgICAkY2ltRXJyb3JJZCA9IDQxMzEKICAgIAogICAgJGVycm9yVGV4dCA9ICIiCiAgICBmb3JlYWNoKCRSZWNvcmQgaW4gJEVycm9yUmVjb3JkcykKICAgIHsKICAgICAgICAjZ28gdGhyb3VnaCBlYWNoIHJlY29yZCwgYW5kIGdldCB0aGUgc2luZ2xlIGVycm9yIG1lc3NhZ2UgcmVxdWlyZWQgZm9yIHRoYXQgcmVjb3JkLgogICAgICAgICRvdXRwdXRFcnJvck1lc3NhZ2UgPSBHZXQtU2luZ2xlUmVsZXZhbnRFcnJvck1lc3NhZ2UgLWVycm9yRXZlbnQgJFJlY29yZAogICAgICAgIGlmKCRSZWNvcmQuSWQgLWVxICRjaW1FcnJvcklkKQogICAgICAgIHsKICAgICAgICAgICAgJGVycm9yVGV4dCA9ICIkb3V0cHV0RXJyb3JNZXNzYWdlICRlcnJvclRleHQiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRlcnJvclRleHQgPSAiJGVycm9yVGV4dCAkb3V0cHV0RXJyb3JNZXNzYWdlIgogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAgJGVycm9yVGV4dAoKfQogCiBmdW5jdGlvbiBHZXQtU2luZ2xlUmVsZXZhbnRFcnJvck1lc3NhZ2UoPCNbU3lzdGVtLkRpYWdub3N0aWNzLkV2ZW50aW5nLlJlYWRlci5FdmVudFJlY29yZF0jPiRlcnJvckV2ZW50KQogewogICAgJHJlcXVpcmVkUHJvcGVydHlJbmRleCA9IEB7NDExNiA9IDI7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MTMxID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgIDQxODMgPSAtMTsjbWVhbnMgZnVsbCBtZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICA0MTI5ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MTkyID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MTkzID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MTk0ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MTg1ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgICA0MDk3ID0gNjsKICAgICAgICAgICAgICAgICAgICAgICAgIDQxMDMgPSA1OwogICAgICAgICAgICAgICAgICAgICAgICAgNDEwNCA9IDR9CiAgICAkY2ltRXJyb3JJZCA9IDQxMzEKICAgICRlcnJvclRleHQgPSAiIgogICAgJG91dHB1dEVycm9yTWVzc2FnZSA9ICIiCiAgICAkZXZlbnRJZCA9ICRlcnJvckV2ZW50LklkCiAgICAkcHJvcGVydHlJbmRleCA9ICRyZXF1aXJlZFByb3BlcnR5SW5kZXhbJGV2ZW50SWRdCiAgICBpZigkcHJvcGVydHlJbmRleCAtbmUgLTEpCiAgICB7CgogICAgICAgICNUaGlzIG1lYW5zIFlvdSBuZWVkIGp1c3QgdGhlIHByb3BlcnR5IGZyb20gdGhlIGluZGljZXMgaGFzaAogICAgICAgICRvdXRwdXRFcnJvck1lc3NhZ2UgPSAkZXJyb3JFdmVudC5Qcm9wZXJ0aWVzWyRwcm9wZXJ0eUluZGV4XS5WYWx1ZQoKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkb3V0cHV0RXJyb3JNZXNzYWdlID0gR2V0LU1lc3NhZ2VGcm9tRXZlbnQgLUV2ZW50UmVjb3JkICRlcnJvckV2ZW50CiAgICB9CiAgICByZXR1cm4gJG91dHB1dEVycm9yTWVzc2FnZQogICAgCn0KCiBmdW5jdGlvbiBUcmFjZS1Ec2NPcGVyYXRpb25JbnRlcm5hbAogewogICAgW2NtZGxldEJpbmRpbmcoKV0KICAgIHBhcmFtKAogICAgICAgIFtVSW50MzJdJFNlcXVlbmNlSUQgPSAxLCAjbGF0ZXN0IGlzIGJ5IGRlZmF1bHQKICAgICAgICBbR3VpZF0kSm9iSWQKICAgICAgICAKICAgICAgICApCiAgICAKCiAgICAjcmVnaW9uIFZhcmlhYmxlQ2hlY2tzCiAgICAkaW5kZXhJbkFycmF5ID0gKCRTZXF1ZW5jZUlkLTEpOyAjU2luY2UgaXQgaXMgaW5kZXhlZCBmcm9tIDAKCiAgICBpZigkaW5kZXhJbkFycmF5IC1sdCAwKQogICAgewogICAgICAgIExvZ0RzY0RpYWdub3N0aWNzIC1FcnJvciAiUGxlYXNlIGVudGVyIGEgdmFsaWQgU2VxdWVuY2UgSUQgLiBBbGwgc2VxdWVuY2UgSURzIGNhbiBiZSBzZWVuIGFmdGVyIHJ1bm5pbmcgY29tbWFuZCBHZXQteERzY09wZXJhdGlvbiAuICIgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICAgICByZXR1cm4KICAgIH0gCiAgICAkbnVsbCA9IFRlc3QtRHNjRXZlbnRMb2dTdGF0dXMgLUNoYW5uZWwgIkFuYWx5dGljIiAKICAgICRudWxsID0gVGVzdC1Ec2NFdmVudExvZ1N0YXR1cyAtQ2hhbm5lbCAiRGVidWciCiAgICAKICAgICNlbmRyZWdpb24KCiAgICAjRmlyc3QgZ2V0IHRoZSB3aG9sZSBvYmplY3Qgc2V0IG9mIHRoYXQgb3BlcmF0aW9uCiAgICAkdGhpc1JVbnNPdXRwdXRFdmVudHMgPSAiIgogICAgaWYoISRKb2JJZCkKICAgIHsKICAgICAgICAkdGhpc1J1bnNPdXRwdXRFdmVudHMgPSBHZXQtU2luZ2xlRHNjT3BlcmF0aW9uIC1JbmRleEluQXJyYXkgJGluZGV4SW5BcnJheSAKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkdGhpc1J1bnNPdXRwdXRFdmVudHMgPSBHZXQtU2luZ2xlRHNjT3BlcmF0aW9uIC1JbmRleEluQXJyYXkgJGluZGV4SW5BcnJheSAtSm9iSWQgJEpvYklkCiAgICB9CiAgICBpZighJHRoaXNSdW5zT3V0cHV0RXZlbnRzKQogICAgewogICAgICAgIHJldHVybjsKICAgIH0KCiAgICAjTm93IHdlIHBsYXkgd2l0aCBpdC4KICAgICRyZXN1bHQ9JHRoaXNSdW5zT3V0cHV0RXZlbnRzLlJlc3VsdAoKICAgICAgICAjUGFyc2UgdGhlIGVycm9yIGV2ZW50cyBhbmQgc3RvcmUgdGhlbSBpbiBlcnJvciB0ZXh0LgogICAgICAgICRlcnJvckV2ZW50cyAgPSAkdGhpc1J1bnNPdXRwdXRFdmVudHMuRXJyb3JFdmVudHMgCiAgICAgICAgJGVycm9yVGV4dCA9IEdldC1Ec2NFcnJvck1lc3NhZ2UgLUVycm9yUmVjb3JkcyAgJGVycm9yRXZlbnRzIAogICAgICAgIAogICAgICAgI05vdyBHZXQgYWxsIGxvZ3Mgd2hpY2ggYXJlIG5vbiB2ZXJib3NlIAogICAgICAgICRub25WZXJib3NlTWVzc2FnZXMgPSBAKCkKICAgICAgIAogICAgICAgICRhbGxFdmVudE1lc3NhZ2VPYmplY3QgPSBAKCkKICAgICAgICAkdGhpc1J1bnNPdXRwdXRFdmVudHMuQWxsRXZlbnRzIHwgJXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkVGhpc0V2ZW50ID0gJF8uRXZlbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkVGhpc01lc3NhZ2UgPSAkXy5NZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFRoaXNUeXBlID0gJF8uRXZlbnRUeXBlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFRoaXNUaW1lQ3JlYXRlZCA9ICRfLlRpbWVDcmVhdGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI1NhdmUgYSBoYXNodGFibGUgYXMgYSBtZXNzYWdlIHZhbHVlIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkdGhpc1J1bnNPdXRwdXRFdmVudHMuSm9iSWQpIHskdGhpc0pvYklkID0gJG51bGx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7JHRoaXNKb2JJZCA9ICR0aGlzUnVuc091dHB1dEV2ZW50cy5Kb2JJZH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYWxsRXZlbnRNZXNzYWdlT2JqZWN0ICs9IE5ldy1PYmplY3QgTWljcm9zb2Z0LlBvd2VyU2hlbGwueERzY0RpYWdub3N0aWNzLlRyYWNlT3V0cHV0IC1Qcm9wZXJ0eSBAe0V2ZW50VHlwZSA9ICRUaGlzVHlwZTtUaW1lQ3JlYXRlZCA9ICRUaGlzVGltZUNyZWF0ZWQ7TWVzc2FnZSA9ICRUaGlzTWVzc2FnZTtDb21wdXRlck5hbWUgPSAkU2NyaXB0OlRoaXNDb21wdXRlck5hbWU7Sm9iSUQgPSAkdGhpc0pvYklkO1NlcXVlbmNlSUQgPSAkU2VxdWVuY2VJRDtFdmVudCA9ICRUaGlzRXZlbnR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAKICAgICAgICByZXR1cm4gJGFsbEV2ZW50TWVzc2FnZU9iamVjdAogICAgICAgIAp9CgogI0ludGVybmFsIGZ1bmN0aW9uIGNhbGxlZCBieSBHZXQteERzY09wZXJhdGlvbgogZnVuY3Rpb24gR2V0LURzY09wZXJhdGlvbkludGVybmFsKCkKIHsKICAgIHBhcmFtCiAgICAoW1VJbnQzMl0kTmV3ZXN0ID0gMTApCiAgICAgICAgI0dyb3VwbyBhbGwgZXZlbnRzCiAgICAgICAgJGdyb3VwZWRFdmVudHMgPSBHZXQtQWxsR3JvdXBlZERzY0V2ZW50cwogICAgCiAgICAgICAgJERpYWdub3NlZEdyb3VwID0gJGdyb3VwZWRFdmVudHMKCiAgICAgICAgI0RlZmluZSB0aGUgdHlwZSB0aGF0IHlvdSB3YW50IHRoZSBvdXRwdXQgaW4KICAgICAgIAogICAgICAgICRpbmRleCA9IDEKICAgICAgICBmb3JlYWNoKCRzaW5nbGVSZWNvcmRJbkdyb3VwZWRFdmVudHMgaW4gJERpYWdub3NlZEdyb3VwKQogICAgICAgIHsKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZCA9IFNwbGl0LVNpbmdsZURzY0dyb3VwZWRSZWNvcmQgLXNpbmdsZVJlY29yZEluR3JvdXBlZEV2ZW50cyAkc2luZ2xlUmVjb3JkSW5Hcm91cGVkRXZlbnRzIC1pbmRleCAkaW5kZXgKICAgICAgICAgICAgJHNpbmdsZU91dHB1dFJlY29yZAogICAgICAgICAgICBpZigkaW5kZXggLWdlICROZXdlc3QpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgICRpbmRleCsrCiAgICAgICAgICAgICAgCiAgICAgICAgfQogfQogCiNlbmRyZWdpb24KIAogZnVuY3Rpb24gQ2xlYXItRHNjRGlhZ25vc3RpY3NDYWNoZQogewogICAgTG9nRHNjRGlhZ25vc3RpY3MgLVZlcmJvc2UgIkNsZWFyaW5nIERpYWdub3N0aWNzIENhY2hlIgogICAgJFNjcmlwdDpMYXRlc3RHcm91cGVkRXZlbnRzID0gQHt9CiAgICAkU2NyaXB0OkxhdGVzdEV2ZW50ID0gQHt9CgogfQogCkV4cG9ydC1Nb2R1bGVNZW1iZXIgLUZ1bmN0aW9uIFRyYWNlLXhEc2NPcGVyYXRpb24sIEdldC14RHNjT3BlcmF0aW9uLCBVcGRhdGUteERzY0V2ZW50TG9nU3RhdHVzCg==
