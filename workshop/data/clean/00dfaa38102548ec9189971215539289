stormcenter.psm1,ed4eee8aaaea8ac0c781bd84f50a85d4,Scan result is 1. IsMalware: 0,w6/Cu8K/RnVuY3Rpb24gR2V0LUlTQ0luZm9jb24gewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IGluZm9zY29uIHN0YXR1cwogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IGluZm9jb24gc3RhdHVzCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NJbmZvY29uCiAgICAgICAgCiM+CiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCBodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvaW5mb2NvbikuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgJGluZm9jb24gPSAkeG1scmVzdWx0cy5pbmZvY29uLnN0YXR1cwogICAgICAgIHJldHVybiAkaW5mb2NvbgogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ0hhbmRsZXIgewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IElTQyBoYW5kbGVyIG9uIGR1dHkKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBoYW5kbGVyIG9uIGR1dHkKICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ0hhbmRsZXIKICAgICAgICAKIz4KICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0IGh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9oYW5kbGVyKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICAkaGFuZGxlciA9ICR4bWxyZXN1bHRzLmhhbmRsZXIubmFtZQogICAgICAgIHJldHVybiAkaGFuZGxlcgogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ0JhY2tzY2F0dGVyIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBiYWNrc2NhdHRlciBkYXRhCiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgYmFja3NjYXR0ZXIgZGF0YQogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDQmFja3NjYXR0ZXIgMjAxNy0wNi0yMSAxMAogICAgICAgIAojPgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSREYXRlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkludDMyXTo6UGFyc2UoJF8pKSkgewogICAgICAgICAgICAgICAgICAgICRpbnR2YWwgPSBbU3lzdGVtLkludDMyXTo6UGFyc2UoJF8pCiAgICAgICAgICAgICAgICAgICAgaWYoJGludHZhbCAtbHQgMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAkdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtpbnRdJFJvd0NvdW50CiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9iYWNrc2NhdHRlci97MH0vezF9IiAtZiAkRGF0ZSwgJFJvd0NvdW50CiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLmJhY2tzY2F0dGVyLnNvdXJjZXBvcnQgfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NJcCB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgaXAgYWRkcmVzcyBkYXRhCiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgaXAgYWRkcmVzcyBkYXRhCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NJcCA3MC45MS4xNDUuMTAKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgSWYgKFtib29sXSgkXyAtYXMgW2lwYWRkcmVzc10pKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmdbXV0kSXBBZGRyZXNzCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9pcC97MH0iIC1mICRJcEFkZHJlc3MKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICAkdGFibGUgPSBAe30KICAgICAgICAkeG1scmVzdWx0cy5pcC5DaGlsZE5vZGVzIHwgRm9yZWFjaCB7aWYoJF8uTmFtZSAtZXEgImFzbmFtZSIpIHsgJHRhYmxlWyJhc25hbWUiXSA9IFtyZWdleF06Om1hdGNoKCRfLklubmVyWG1sLCdcPFwhXFtDREFUQVxbKFteXF1dKylcXScpLkdyb3Vwc1sxXS5WYWx1ZX0gZWxzZWlmKCRfLk5hbWUgLWVxICJ0aHJlYXRmZWVkcyIpIHsgJGNvdW50ZXIgPSAxOyBGb3JlYWNoKCR0aHJlYXRmZWVkIGluICRfLkNoaWxkTm9kZXMpIHsgJHRhYmxlWyJ0aHJlYXRmZWVkJGNvdW50ZXIiXSA9ICR0aHJlYXRmZWVkLk5hbWUgKyAiKEZpcnN0OnswfSwgTGFzdDp7MX0pIiAtZiAkdGhyZWF0ZmVlZFsiZmlyc3RzZWVuIl0uSW5uZXJYbWwsJHRocmVhdGZlZWRbImxhc3RzZWVuIl0uSW5uZXJYbWwgOyAkY291bnRlcisrIH0gJHRhYmxlWyJ0aHJlYXRmZWVkY291bnQiXSA9ICRjb3VudGVyLTF9IGVsc2UgeyR0YWJsZVskXy5OYW1lXSA9ICRfLklubmVyWG1sfX0KICAgICAgICByZXR1cm4gJHRhYmxlLkdldEVudW1lcmF0b3IoKSB8IHNvcnQgLVByb3BlcnR5IE5hbWUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NQb3J0IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBwb3J0IGRhdGEKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBwb3J0IGRhdGEKICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ1BvcnQgODAKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUG9ydAogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvcG9ydC97MH0iIC1mICRQb3J0CiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgJHRhYmxlID0gQHt9CiAgICAgICAgJHhtbHJlc3VsdHMucG9ydC5DaGlsZE5vZGVzIHwgRm9yZWFjaCB7aWYoJF8uTmFtZSAtZXEgInNlcnZpY2VzIikgeyAkY291bnRlciA9IDE7IEZvcmVhY2goJHNlcnZpY2UgaW4gJF8uQ2hpbGROb2RlcykgeyAkdGFibGVbInNlcnZpY2UkY291bnRlciJdID0gJHNlcnZpY2UuTmFtZSArICIoU2VydmljZTp7MH0sIE5hbWU6ezF9KSIgLWYgJHNlcnZpY2VbInNlcnZpY2UiXS5Jbm5lclhtbCwkc2VydmljZVsibmFtZSJdLklubmVyWG1sIDsgJGNvdW50ZXIrKyB9ICR0YWJsZVsic2VydmljZWNvdW50Il0gPSAkY291bnRlci0xfSBlbHNlaWYoJF8uTmFtZSAtZXEgImRhdGEiKSB7IEZvcmVhY2goJGRhdGEgaW4gJF8uQ2hpbGROb2RlcykgeyAkdGFibGVbJGRhdGEuTmFtZV0gPSAkZGF0YS5Jbm5lclhtbCA7IH0gfSBlbHNlIHskdGFibGVbJF8uTmFtZV0gPSAkXy5Jbm5lclhtbH19CiAgICAgICAgcmV0dXJuICR0YWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1BvcnREYXRlIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBwb3J0IGRhdGEgYnkgZGF0ZQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IHBvcnQgZGF0YSBieSBkYXRlCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NQb3J0IDgwIDIwMTctMDYtMjEKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUG9ydCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGUKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgIGlmKCRTb3J0QnkgLWVxICIiKSB7ICRTb3J0QnkgPSAicG9ydGRhdGUiIH0KICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9wb3J0ZGF0ZS97MH0vezF9IiAtZiAkUG9ydCwgJERhdGUKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICAkdGFibGUgPSBAe30KICAgICAgICAkeG1scmVzdWx0cy5wb3J0ZGF0ZS5DaGlsZE5vZGVzIHwgRm9yZWFjaCB7aWYoJF8uTmFtZSAtZXEgImRhdGEiKSB7IEZvcmVhY2goJGRhdGEgaW4gJF8uQ2hpbGROb2RlcykgeyAkdGFibGVbJGRhdGEuTmFtZV0gPSAkZGF0YS5Jbm5lclhtbCA7IH0gfSBlbHNlIHskdGFibGVbJF8uTmFtZV0gPSAkXy5Jbm5lclhtbH19CiAgICAgICAgcmV0dXJuICR0YWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1RvcFBvcnRzIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCB0b3AgcG9ydHMKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCB0b3AgcG9ydHMKICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ1RvcFBvcnRzIDIwMTctMDYtMjEgMTAgcmVjb3JkcwogICAgICAgIAojPgogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSREYXRlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkludDMyXTo6UGFyc2UoJF8pKSkgewogICAgICAgICAgICAgICAgICAgICRpbnR2YWwgPSBbU3lzdGVtLkludDMyXTo6UGFyc2UoJF8pCiAgICAgICAgICAgICAgICAgICAgaWYoJGludHZhbCAtbHQgMSl7CiAgICAgICAgICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICAkdHJ1ZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtpbnRdJFJvd0NvdW50LAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgJHRydWUKICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRTb3J0QnkKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgIGlmKCRTb3J0QnkgLWVxICIiKSB7ICRTb3J0QnkgPSAicmVjb3JkcyIgfQogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL3RvcHBvcnRzL3syfS97MH0vezF9IiAtZiAkUm93Q291bnQsICREYXRlLCAkU29ydEJ5CiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLnRvcHBvcnRzLnBvcnQgfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NUb3BJcHMgewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IHRvcCBJUCBhZGRyZXNzZXMKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCB0b3AgSVAgQWRkcmVzc2VzCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NUb3BJcHMgMjAxNy0wNi0yMSAxMCByZWNvcmRzCiAgICAgICAgCiM+CiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUm93Q291bnQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlLFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICAkdHJ1ZQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFNvcnRCeQogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgaWYoJFNvcnRCeSAtZXEgIiIpIHsgJFNvcnRCeSA9ICJyZWNvcmRzIiB9CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvdG9waXBzL3syfS97MH0vezF9IiAtZiAkUm93Q291bnQsICREYXRlLCAkU29ydEJ5CiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLnRvcGlwcy5pcGFkZHJlc3MgfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NTb3VyY2VzIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCB0b3AgU291cmNlIGlwIGFkZHJlc3NlcyBsYXN0IDMwIGRheXMKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBzb3VyY2UgSVAgQWRkcmVzc2VzIGxhc3QgMzAgZGF5cwogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDU291cmNlcyAyMDE3LTA2LTIxIDEwIGF0dGFja3MKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uRGF0ZVRpbWVdOjpQYXJzZUV4YWN0KCRfLCJ5eXl5LU1NLWRkIixbU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm9dOjpJbnZhcmlhbnRDdWx0dXJlKSkpIHsKICAgICAgICAgICAgICAgICAgICAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW3N0cmluZ10kRGF0ZSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5JbnQzMl06OlBhcnNlKCRfKSkpIHsKICAgICAgICAgICAgICAgICAgICAkaW50dmFsID0gW1N5c3RlbS5JbnQzMl06OlBhcnNlKCRfKQogICAgICAgICAgICAgICAgICAgIGlmKCRpbnR2YWwgLWx0IDEpewogICAgICAgICAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbaW50XSRSb3dDb3VudCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UsVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgICR0cnVlCiAgICAgICAgfSldCiAgICAgICAgW3N0cmluZ10kU29ydEJ5CiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICBpZigkU29ydEJ5IC1lcSAiIikgeyAkU29ydEJ5ID0gImF0dGFja3MiIH0KICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9zb3VyY2VzL3syfS97MH0vezF9IiAtZiAkUm93Q291bnQsICREYXRlLCAkU29ydEJ5CiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLnNvdXJjZXMuZGF0YSB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1BvcnRIaXN0b3J5IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBwb3J0IGhpc3RvcnkgYnkgZGF0ZSByYW5nZQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IHBvcnQgaGlzdG9yeSBieSBkYXRlIHJhbmdlCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NQb3J0SGlzdG9yeSA4MCAyMDE3LTA2LTIwIDIwMTctMDYtMjEKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUG9ydCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFN0YXJ0RGF0ZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJEVuZERhdGUKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL3BvcnRoaXN0b3J5L3swfS97MX0vezJ9IiAtZiAkUG9ydCwgJFN0YXJ0RGF0ZSwgJEVuZERhdGUKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICByZXR1cm4gJHhtbHJlc3VsdHMucG9ydGhpc3RvcnkucG9ydGluZm8gfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NBc251bSB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgQVMgaW5mb3JtYXRpb24KICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCB0aGUgQVMgaW5mb3JtYXRpb24KICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ0FzbnVtIDQ4MzcgMTAKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kQXNudW0sCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUm93Q291bnQKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL2FzbnVtL3swfS97MX0iIC1mICRSb3dDb3VudCwgJEFzbnVtCiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLmFzbnVtLmRhdGEgfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NEYWlseVN1bW1hcnkgewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IGRhaWx5IHN1bW1hcnkgYnkgZGF0ZSByYW5nZQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IGRhaWx5IHN1bW1hcnkgYnkgZGF0ZSByYW5nZQogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDRGFpbHlTdW1tYXJ5IDIwMTctMDYtMjAgMjAxNy0wNi0yMQogICAgICAgIAojPgogICAgUGFyYW0oICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFN0YXJ0RGF0ZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJEVuZERhdGUKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL2RhaWx5c3VtbWFyeS97MH0vezF9IiAtZiAkU3RhcnREYXRlLCAkRW5kRGF0ZQogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfQogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy5kYWlseXN1bW1hcnkuZGFpbHkgfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NEYWlseTQwNFN1bW1hcnkgewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IGRhaWx5IDQwNCBwcm9qZWN0IHN1bW1hcnkgYnkgZGF0ZSByYW5nZQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IGRhaWx5IDQwNCBwcm9qZWN0IHN1bW1hcnkgYnkgZGF0ZSByYW5nZQogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDRGFpbHk0MDRTdW1tYXJ5IDIwMTctMDYtMTkgMjAxNy0wNi0yMQogICAgICAgIAojPgogICAgUGFyYW0oICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFN0YXJ0RGF0ZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJEVuZERhdGUKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL2RhaWx5NDA0c3VtbWFyeS97MH0vezF9IiAtZiAkU3RhcnREYXRlLCAkRW5kRGF0ZQogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfQogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy5kYWlseTQwNHN1bW1hcnkuRGFpbHk0MDREYXRhIHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQpGdW5jdGlvbiBHZXQtSVNDRGFpbHk0MDREZXRhaWwgewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IGRhaWx5IDQwNCBwcm9qZWN0IGRldGFpbHMKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBkYWlseSA0MDQgcHJvamVjdCBkZXRhaWxzCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NEYWlseTQwNERldGFpbCAyMDE3LTA2LTIxIDEwCiAgICAgICAgCiM+CiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUm93Q291bnQKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL2RhaWx5NDA0ZGV0YWlsL3swfS97MX0iIC1mICREYXRlLCAkUm93Q291bnQKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICByZXR1cm4gJHhtbHJlc3VsdHMuZGFpbHk0MDRkZXRhaWwuZGF0YSB8ICUgeyAkdWEgPSBbcmVnZXhdOjptYXRjaCgkXy51c2VyX2FnZW50LklubmVyWG1sLCdcPFwhXFtDREFUQVxbKFteXF1dKylcXScpLkdyb3Vwc1sxXS5WYWx1ZTsgJF8udXNlcl9hZ2VudC5Jbm5lclRleHQgPSAkdWE7ICRfIH0gfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NHbG9zc2FyeSB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgdGhlIGdsb3NzYXJ5CiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgdGhlIGdsb3NzYXJ5CiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NHbG9zc2FyeQogICAgICAgIAojPgogICAgUGFyYW0oCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9nbG9zc2FyeSIKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICByZXR1cm4gJHhtbHJlc3VsdHMuZ2xvc3NhcnkuaXRlbSB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1RocmVhdEZlZWRzIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCB0aGUgVGhyZWF0IEZlZWRzCiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgdGhlIHRocmVhdCBmZWVkcwogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDVGhyZWF0RmVlZHMKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvdGhyZWF0ZmVlZHMvIgogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfQogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy50aHJlYXRmZWVkcy50aHJlYXRmZWVkIHwgJSB7IHRyeSB7ICRuYW1lID0gW3JlZ2V4XTo6bWF0Y2goJF8ubmFtZS5Jbm5lclhtbCwnXDxcIVxbQ0RBVEFcWyhbXlxdXSspXF0nKS5Hcm91cHNbMV0uVmFsdWU7ICRfLm5hbWUuSW5uZXJUZXh0ID0gJG5hbWU7IH0gY2F0Y2gge30gOyB0cnkgeyAkZGVzY3JpcHRpb24gPSBbcmVnZXhdOjptYXRjaCgkXy5kZXNjcmlwdGlvbi5Jbm5lclhtbCwnXDxcIVxbQ0RBVEFcWyhbXlxdXSspXF0nKS5Hcm91cHNbMV0uVmFsdWU7ICRfLmRlc2NyaXB0aW9uLklubmVyVGV4dCA9ICRkZXNjcmlwdGlvbjsgfSBjYXRjaCB7fTsgJF8gfSB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1RocmVhdEZlZWRzUGVyRGF5IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBUaHJlYXQgRmVlZHMgcGVyIGRheQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IFRocmVhdCBGZWVkcyBwZXIgZGF5CiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NUaHJlYXRGZWVkc1BlckRheSAyMDE3LTA2LTE5IDIwMTctMDYtMjEKICAgICAgICAKIz4KICAgIFBhcmFtKCAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRTdGFydERhdGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRFbmREYXRlCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS90aHJlYXRmZWVkcy9wZXJkYXkvezB9L3sxfSIgLWYgJFN0YXJ0RGF0ZSwgJEVuZERhdGUKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICByZXR1cm4gJHhtbHJlc3VsdHMudGhyZWF0ZmVlZHMuZGF5IHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQpGdW5jdGlvbiBHZXQtSVNDVGhyZWF0RmVlZHNCeURhdGFGZWVkIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBUaHJlYXQgRmVlZHMgcGVyIGRheSBieSBkYXRhIGZlZWQKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBUaHJlYXQgRmVlZHMgcGVyIGRheSBieSBkYXRhIGZlZWQKICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ1RocmVhdEZlZWRzQnlEYXRhRmVlZCAyMDE3LTA2LTE5IDIwMTctMDYtMjQgYmxvY2tsaXN0ZGUxMTAKICAgICAgICAKIz4KICAgIFBhcmFtKCAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRTdGFydERhdGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnksVmFsdWVGcm9tUGlwZWxpbmUpXQogICAgICAgIFtWYWxpZGF0ZVNjcmlwdCh7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZigoW1N5c3RlbS5EYXRlVGltZV06OlBhcnNlRXhhY3QoJF8sInl5eXktTU0tZGQiLFtTeXN0ZW0uR2xvYmFsaXphdGlvbi5DdWx0dXJlSW5mb106OkludmFyaWFudEN1bHR1cmUpKSkgewogICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggewogICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRFbmREYXRlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgJHRydWUKICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSREYXRhRmVlZAogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvdGhyZWF0ZmVlZHMvZmVlZHBlcmRheS97MH0vezF9L3syfSIgLWYgJFN0YXJ0RGF0ZSwgJEVuZERhdGUsICREYXRhRmVlZAogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfQogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy50aHJlYXRmZWVkcy5mZWVkZGF5IHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQpGdW5jdGlvbiBHZXQtSVNDVGhyZWF0RmVlZElwcyB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgVGhyZWF0IGZlZWQgaXBzIHBlciBkYXkgYnkgZGF0YSBmZWVkCiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgVGhyZWF0IGZlZWQgaXBzIHBlciBkYXkgYnkgZGF0YSBmZWVkCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NUaHJlYXRGZWVkSXBzIDIwMTctMDYtMTkgMjAxNy0wNi0yNCBibG9ja2xpc3RkZTExMAogICAgICAgIAojPgogICAgUGFyYW0oICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFN0YXJ0RGF0ZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJEVuZERhdGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICAkdHJ1ZQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGFGZWVkCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS90aHJlYXRsaXN0L3syfS97MH0vezF9IiAtZiAkU3RhcnREYXRlLCAkRW5kRGF0ZSwgJERhdGFGZWVkCiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLnRocmVhdGxpc3QuQ2hpbGROb2RlcyB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1RocmVhdEZlZWRCeUNhdGVnb3J5IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBUaHJlYXQgZmVlZCBpcHMgcGVyIGRheSBieSBjYXRlZ29yeQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IFRocmVhdCBmZWVkIGlwcyBwZXIgZGF5IGJ5IGNhdGVnb3J5CiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NUaHJlYXRGZWVkQnlDYXRlZ29yeSAyMDE3LTA2LTE5IDIwMTctMDYtMjQgYm90cwogICAgICAgIAojPgogICAgUGFyYW0oICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFN0YXJ0RGF0ZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJEVuZERhdGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICAkdHJ1ZQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJENhdGVnb3J5CiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS90aHJlYXRjYXRlZ29yeS97Mn0vezB9L3sxfSIgLWYgJFN0YXJ0RGF0ZSwgJEVuZERhdGUsICRDYXRlZ29yeQogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfQogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy50aHJlYXRjYXRlZ29yeS5DaGlsZE5vZGVzIHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQpGdW5jdGlvbiBHZXQtSVNDV2ViSG9uZXlwb3RTdW1tYXJ5IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCB3ZWIgaG9uZXlwb3Qgc3VtbWFyeQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IHdlYiBob25leXBvdCBzdW1tYXJ5CiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NXZWJIb25leXBvdFN1bW1hcnkgMjAxNy0wNi0xOQogICAgICAgIAojPgogICAgUGFyYW0oICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGUKICAgICkKICAgIEJlZ2luIHsKICAgIH0KICAgIFByb2Nlc3MgewogICAgICAgICR1cmwgPSAiaHR0cHM6Ly9pc2Muc2Fucy5lZHUvYXBpL3dlYmhvbmV5cG90c3VtbWFyeS97MH0iIC1mICREYXRlCiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9CiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLndlYmhvbmV5cG90c3VtbWFyeSB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ1dlYkhvbmV5cG90QnlUeXBlIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCB3ZWIgaG9uZXlwb3QgYnkgdHlwZQogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IHdlYiBob25leXBvdCBieSB0eXBlCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NXZWJIb25leXBvdEJ5VHlwZQogICAgICAgIAojPgogICAgUGFyYW0oCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS93ZWJob25leXBvdGJ5dHlwZSIgLWYgJERhdGUKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0KICAgICAgICByZXR1cm4gJHhtbHJlc3VsdHMud2ViaG9uZXlwb3RieXR5cGUuaXRlbSB8IEZvcm1hdC1UYWJsZQogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ09wZW5JT0NMb2dzIHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBmaXJld2FsbCBsb2dzIGluIE9wZW5JT0MgZm9ybWF0CiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgZmlyZXdhbGwgbG9ncyBpbiBPcGVuSU9DIGZvcm1hdCwgcmV0dXJucyByYXcgeG1sCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NPcGVuSU9DTG9ncyAyMDE3LTA2LTIxIDEwCiAgICAgICAgCiM+CiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGlmKChbU3lzdGVtLkRhdGVUaW1lXTo6UGFyc2VFeGFjdCgkXywieXl5eS1NTS1kZCIsW1N5c3RlbS5HbG9iYWxpemF0aW9uLkN1bHR1cmVJbmZvXTo6SW52YXJpYW50Q3VsdHVyZSkpKSB7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBjYXRjaCB7CiAgICAgICAgICAgICAgICAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJERhdGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUm93Q291bnQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoJF8gLWVxICIwIil7CiAgICAgICAgICAgICAgICAgICAgJHRydWUKICAgICAgICAgICAgICAgIH1lbHNlaWYoKFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykpKSB7CiAgICAgICAgICAgICAgICAgICAgJGludHZhbCA9IFtTeXN0ZW0uSW50MzJdOjpQYXJzZSgkXykKICAgICAgICAgICAgICAgICAgICBpZigkaW50dmFsIC1sdCAxKXsKICAgICAgICAgICAgICAgICAgICAgICAgJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICAgICAgICAgICR0cnVlCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW2ludF0kUGFnZU51bWJlcgogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvb3BlbmlvY3NvdXJjZXMvezB9L3sxfS97Mn0iIC1mICREYXRlLCAkUm93Q291bnQsICRQYWdlTnVtYmVyCiAgICAgICAgdHJ5ewogICAgICAgICAgICBbeG1sXSR4bWxyZXN1bHRzID0gKHdnZXQgJHVybCkuQ29udGVudAogICAgICAgIH1jYXRjaHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiRmFpbGVkIHRvIGNvbm5lY3QgdG8gQVBJIGJlY2F1c2UgJCgkXy5FeGNlcHRpb24uTWVzc2FnZSkgJCgkdXJsKSIKICAgICAgICB9ICAgICAgICAKICAgICAgICAkU3RyaW5nV3JpdGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uU3RyaW5nV3JpdGVyIAogICAgICAgICRYbWxXcml0ZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5YTWwuWG1sVGV4dFdyaXRlciAkU3RyaW5nV3JpdGVyIAogICAgICAgICR4bWxXcml0ZXIuRm9ybWF0dGluZyA9IMOi4oKsxZNpbmRlbnRlZMOi4oKsIAogICAgICAgICR4bWxXcml0ZXIuSW5kZW50YXRpb24gPSAkSW5kZW50IAogICAgICAgICR4bWxyZXN1bHRzLldyaXRlQ29udGVudFRvKCRYbWxXcml0ZXIpIAogICAgICAgICRYbWxXcml0ZXIuRmx1c2goKSAKICAgICAgICAkU3RyaW5nV3JpdGVyLkZsdXNoKCkgCiAgICAgICAgcmV0dXJuICRTdHJpbmdXcml0ZXIuVG9TdHJpbmcoKSAKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NNU1BhdGNoRGF5IHsKPCMKICAgIC5TWU5PUFNJUwogICAgICAgIEdldCBNaWNyb3NvZnQgUGF0Y2ggZGF5IGRldGFpbHMsICpOT1RJQ0UqIGRlcHJlY2F0ZWQgYXMgaXRzIG5vIGxvbmdlciB1cGRhdGVkCiAgICAuREVTQ1JJUFRJT04KICAgICAgICBVc2UgdGhlIElTQyBTQU5TIEFQSSB0byBnZXQgbWljcm9zb2Z0IHBhdGNoIGRheSBkZXRhaWxzCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NNU1BhdGNoRGF5IDIwMTctMDYtMjEKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uRGF0ZVRpbWVdOjpQYXJzZUV4YWN0KCRfLCJ5eXl5LU1NLWRkIixbU3lzdGVtLkdsb2JhbGl6YXRpb24uQ3VsdHVyZUluZm9dOjpJbnZhcmlhbnRDdWx0dXJlKSkpIHsKICAgICAgICAgICAgICAgICAgICAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIHsKICAgICAgICAgICAgICAgICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfSldCiAgICAgICAgW3N0cmluZ10kRGF0ZQogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgV3JpdGUtV2FybmluZyAtTWVzc2FnZSAiKk5PVElDRSogZGVwcmVjYXRlZCIKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9nZXRtc3BhdGNoZGF5L3swfSIgLWYgJERhdGUKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0gICAgICAgIAogICAgICAgICRTdHJpbmdXcml0ZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJpbmdXcml0ZXIgCiAgICAgICAgJFhtbFdyaXRlciA9IE5ldy1PYmplY3QgU3lzdGVtLlhNbC5YbWxUZXh0V3JpdGVyICRTdHJpbmdXcml0ZXIgCiAgICAgICAgJHhtbFdyaXRlci5Gb3JtYXR0aW5nID0gw6LigqzFk2luZGVudGVkw6LigqwgCiAgICAgICAgJHhtbFdyaXRlci5JbmRlbnRhdGlvbiA9ICRJbmRlbnQgCiAgICAgICAgJHhtbHJlc3VsdHMuV3JpdGVDb250ZW50VG8oJFhtbFdyaXRlcikgCiAgICAgICAgJFhtbFdyaXRlci5GbHVzaCgpIAogICAgICAgICRTdHJpbmdXcml0ZXIuRmx1c2goKSAKICAgICAgICByZXR1cm4gJFN0cmluZ1dyaXRlci5Ub1N0cmluZygpIAogICAgfQogICAgRW5kIHt9Cn0KRnVuY3Rpb24gR2V0LUlTQ01TUGF0Y2ggewo8IwogICAgLlNZTk9QU0lTCiAgICAgICAgR2V0IHNwZWNpZmljIE1pY3Jvc29mdCBQYXRjaCBkZXRhaWwKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBzcGVjaWZpYyBtaWNyb3NvZnQgcGF0Y2ggZGV0YWlsCiAgICAuRVhBTVBMRQogICAgICAgIEdldC1JU0NNU1BhdGNoIE1TMTYtMDIzCiAgICAgICAgCiM+CiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSxWYWx1ZUZyb21QaXBlbGluZSldCiAgICAgICAgW1ZhbGlkYXRlU2NyaXB0KHsKICAgICAgICAgICAgJHRydWUKICAgICAgICB9KV0KICAgICAgICBbc3RyaW5nXSRQYXRjaAogICAgKQogICAgQmVnaW4gewogICAgfQogICAgUHJvY2VzcyB7CiAgICAgICAgJHVybCA9ICJodHRwczovL2lzYy5zYW5zLmVkdS9hcGkvZ2V0bXNwYXRjaC97MH0iIC1mICRQYXRjaAogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfSAgICAgICAgCiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLmdldG1zcGF0Y2ggfCAlIHsgdHJ5IHsgJF8uYWZmZWN0ZWQuSW5uZXJUZXh0ID0gW3JlZ2V4XTo6bWF0Y2goJF8uYWZmZWN0ZWQuSW5uZXJYbWwsJ1w8XCFcW0NEQVRBXFsoW15cXV0rKVxdJykuR3JvdXBzWzFdLlZhbHVlOyB9IGNhdGNoIHt9IDsgJF87IH0gfCBGb3JtYXQtVGFibGUKICAgIH0KICAgIEVuZCB7fQp9CkZ1bmN0aW9uIEdldC1JU0NNU1BhdGNoQ1ZFcyB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgc3BlY2lmaWMgTWljcm9zb2Z0IFBhdGNoIENWRXMKICAgIC5ERVNDUklQVElPTgogICAgICAgIFVzZSB0aGUgSVNDIFNBTlMgQVBJIHRvIGdldCBzcGVjaWZpYyBtaWNyb3NvZnQgcGF0Y2ggQ1ZFcwogICAgLkVYQU1QTEUKICAgICAgICBHZXQtSVNDTVNQYXRjaENWRXMgTVMxNi0wMjMKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICAkdHJ1ZQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFBhdGNoCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9nZXRtc3BhdGNoY3Zlcy97MH0iIC1mICRQYXRjaAogICAgICAgIHRyeXsKICAgICAgICAgICAgW3htbF0keG1scmVzdWx0cyA9ICh3Z2V0ICR1cmwpLkNvbnRlbnQKICAgICAgICB9Y2F0Y2h7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgLU1lc3NhZ2UgIkZhaWxlZCB0byBjb25uZWN0IHRvIEFQSSBiZWNhdXNlICQoJF8uRXhjZXB0aW9uLk1lc3NhZ2UpICQoJHVybCkiCiAgICAgICAgfSAgICAgICAgCiAgICAgICAgcmV0dXJuICR4bWxyZXN1bHRzLmdldG1zcGF0Y2hjdmVzLmdldG1zcGF0Y2hjdmVzIHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQpGdW5jdGlvbiBHZXQtSVNDTVNQYXRjaEtCcyB7CjwjCiAgICAuU1lOT1BTSVMKICAgICAgICBHZXQgc3BlY2lmaWMgTWljcm9zb2Z0IFBhdGNoIEtCcwogICAgLkRFU0NSSVBUSU9OCiAgICAgICAgVXNlIHRoZSBJU0MgU0FOUyBBUEkgdG8gZ2V0IHNwZWNpZmljIG1pY3Jvc29mdCBwYXRjaCBLQnMKICAgIC5FWEFNUExFCiAgICAgICAgR2V0LUlTQ01TUGF0Y2hLQnMgTVMxNi0wMjMKICAgICAgICAKIz4KICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5LFZhbHVlRnJvbVBpcGVsaW5lKV0KICAgICAgICBbVmFsaWRhdGVTY3JpcHQoewogICAgICAgICAgICAkdHJ1ZQogICAgICAgIH0pXQogICAgICAgIFtzdHJpbmddJFBhdGNoCiAgICApCiAgICBCZWdpbiB7CiAgICB9CiAgICBQcm9jZXNzIHsKICAgICAgICAkdXJsID0gImh0dHBzOi8vaXNjLnNhbnMuZWR1L2FwaS9nZXRtc3BhdGNocmVwbGFjZXMvezB9IiAtZiAkUGF0Y2gKICAgICAgICB0cnl7CiAgICAgICAgICAgIFt4bWxdJHhtbHJlc3VsdHMgPSAod2dldCAkdXJsKS5Db250ZW50CiAgICAgICAgfWNhdGNoewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nIC1NZXNzYWdlICJGYWlsZWQgdG8gY29ubmVjdCB0byBBUEkgYmVjYXVzZSAkKCRfLkV4Y2VwdGlvbi5NZXNzYWdlKSAkKCR1cmwpIgogICAgICAgIH0gICAgICAgIAogICAgICAgIHJldHVybiAkeG1scmVzdWx0cy5nZXRtc3BhdGNocmVwbGFjZXMuZ2V0bXNwYXRjaHJlcGxhY2VzIHwgRm9ybWF0LVRhYmxlCiAgICB9CiAgICBFbmQge30KfQ==
