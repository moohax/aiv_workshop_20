Invoke-TokenManipulation.ps1,42dfab4ade95cf782c765bf3e4a3b90a,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uCnsKPCMKLlNZTk9QU0lTCgpUaGlzIHNjcmlwdCByZXF1aXJlcyBBZG1pbmlzdHJhdG9yIHByaXZpbGVnZXMuIEl0IGNhbiBlbnVtZXJhdGUgdGhlIExvZ29uIFRva2VucyBhdmFpbGFibGUgYW5kIHVzZSB0aGVtIHRvIGNyZWF0ZSBuZXcgcHJvY2Vzc2VzLiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlCmFub3RoZXJzIHVzZXJzIGNyZWRlbnRpYWxzIG92ZXIgdGhlIG5ldHdvcmsgYnkgY3JlYXRpbmcgYSBwcm9jZXNzIHdpdGggdGhlaXIgbG9nb24gdG9rZW4uIFRoaXMgd2lsbCB3b3JrIGV2ZW4gd2l0aCBXaW5kb3dzIDguMSBMU0FTUyBwcm90ZWN0aW9ucy4KVGhpcyBmdW5jdGlvbmFsaXR5IGlzIHZlcnkgc2ltaWxhciB0byB0aGUgaW5jb2duaXRvIHRvb2wgKHdpdGggc29tZSBkaWZmZXJlbmNlcywgYW5kIGRpZmZlcmVudCB1c2UgZ29hbHMpLgoKVGhpcyBzY3JpcHQgY2FuIGFsc28gbWFrZSB0aGUgUG93ZXJTaGVsbCB0aHJlYWQgaW1wZXJzb25hdGUgYW5vdGhlciB1c2VycyBMb2dvbiBUb2tlbi4gVW5mb3J0dW5hdGVseSB0aGlzIGRvZXNuJ3Qgd29yayB3ZWxsLCBiZWNhdXNlIFBvd2VyU2hlbGwKY3JlYXRlcyBuZXcgdGhyZWFkcyB0byBkbyB0aGluZ3MsIGFuZCB0aG9zZSB0aHJlYWRzIHdpbGwgdXNlIHRoZSBQcmltYXJ5IHRva2VuIG9mIHRoZSBQb3dlclNoZWxsIHByb2Nlc3MgKHlvdXIgb3JpZ2luYWwgdG9rZW4pIGFuZCBub3QgdGhlIHRva2VuCnRoYXQgb25lIHRocmVhZCBpcyBpbXBlcnNvbmF0aW5nLiBCZWNhdXNlIG9mIHRoaXMsIHlvdSBjYW5ub3QgdXNlIHRocmVhZCBpbXBlcnNvbmF0aW9uIHRvIGltcGVyc29uYXRlIGEgdXNlciBhbmQgdGhlbiB1c2UgUG93ZXJTaGVsbCByZW1vdGluZyB0byBjb25uZWN0CnRvIGFub3RoZXIgc2VydmVyIGFzIHRoYXQgdXNlciAoaXQgd2lsbCBhdXRoZW50aWNhdGUgdXNpbmcgdGhlIHByaW1hcnkgdG9rZW4gb2YgdGhlIHByb2Nlc3MsIHdoaWNoIGlzIHlvdXIgb3JpZ2luYWwgbG9nb24gdG9rZW4pLgoKQmVjYXVzZSBvZiB0aGlzIGxpbWl0YXRpb24sIHRoZSByZWNvbW1lbmRlZCB3YXkgdG8gdXNlIHRoaXMgc2NyaXB0IGlzIHRvIHVzZSBDcmVhdGVQcm9jZXNzIHRvIGNyZWF0ZSBhIG5ldyBQb3dlclNoZWxsIHByb2Nlc3Mgd2l0aCBhbm90aGVyIHVzZXJzIExvZ29uIApUb2tlbiwgYW5kIHRoZW4gdXNlIHRoaXMgcHJvY2VzcyB0byBwaXZvdC4gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBlbnRpcmUgcHJvY2VzcyBpcyBjcmVhdGVkIHVzaW5nIHRoZSBvdGhlciB1c2VycyBMb2dvbiBUb2tlbiwgc28gaXQgd2lsbCB1c2UgdGhlaXIKY3JlZGVudGlhbHMgZm9yIHRoZSBhdXRoZW50aWNhdGlvbi4KCklNUE9SVEFOVDogSWYgeW91IGFyZSBjcmVhdGluZyBhIHByb2Nlc3MsIGJ5IGRlZmF1bHQgdGhpcyBzY3JpcHQgd2lsbCBtb2RpZnkgdGhlIEFDTCBvZiB0aGUgY3VycmVudCB1c2VycyBkZXNrdG9wIHRvIGFsbG93IGZ1bGwgY29udHJvbCB0byAiRXZlcnlvbmUiLiAKVGhpcyBpcyBkb25lIHNvIHRoYXQgdGhlIFVJIG9mIHRoZSBwcm9jZXNzIGlzIHNob3duLiBJZiB5b3UgZG8gbm90IG5lZWQgdGhlIFVJLCB1c2UgdGhlIC1Ob1VJIGZsYWcgdG8gcHJldmVudCB0aGUgQUNMIGZyb20gYmVpbmcgbW9kaWZpZWQuIFRoaXMgQUNMCmlzIG5vdCBwZXJtZW5hbnQsIGFzIGluLCB3aGVuIHRoZSBjdXJyZW50IGxvZ3Mgb2ZmIHRoZSBBQ0wgaXMgY2xlYXJlZC4gSXQgaXMgc3RpbGwgcHJlZmVycmFibGUgdG8gbm90IG1vZGlmeSB0aGluZ3MgdW5sZXNzIHRoZXkgbmVlZCB0byBiZSBtb2RpZmllZCB0aG91Z2gsCnNvIEkgY3JlYXRlZCB0aGUgTm9VSSBmbGFnLiBBTFNPOiBXaGVuIGNyZWF0aW5nIGEgcHJvY2VzcywgdGhlIHNjcmlwdCB3aWxsIHJlcXVlc3QgU2VTZWN1cml0eVByaXZpbGVnZSBzbyBpdCBjYW4gZW51bWVyYXRlIGFuZCBtb2RpZnkgdGhlIEFDTCBvZiB0aGUgZGVza3RvcC4KVGhpcyBjb3VsZCBzaG93IHVwIGluIGxvZ3MgZGVwZW5kaW5nIG9uIHRoZSBsZXZlbCBvZiBtb25pdG9yaW5nLgoKClBFUk1JU1NJT05TIFJFUVVJUkVEOgpTZVNlY3VyaXR5UHJpdmlsZWdlOiBOZWVkZWQgaWYgbGF1bmNoaW5nIGEgcHJvY2VzcyB3aXRoIGEgVUkgdGhhdCBuZWVkcyB0byBiZSByZW5kZXJlZC4gVXNpbmcgdGhlIC1Ob1VJIGZsYWcgYmxvY2tzIHRoaXMuClNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlIDogTmVlZGVkIGlmIGxhdW5jaGluZyBhIHByb2Nlc3Mgd2hpbGUgdGhlIHNjcmlwdCBpcyBydW5uaW5nIGluIFNlc3Npb24gMC4KCgpJbXBvcnRhbnQgZGlmZmVyZW5jZXMgZnJvbSBpbmNvZ25pdG86CkZpcnN0IG9mIGFsbCwgeW91IHNob3VsZCBwcm9iYWJseSByZWFkIHRoZSBpbmNvZ25pdG8gd2hpdGUgcGFwZXIgdG8gdW5kZXJzdGFuZCB3aGF0IGluY29nbml0byBkb2VzLiBJZiB5b3UgdXNlIGluY29nbml0bywgeW91J2xsIG5vdGljZSBpdCBkaWZmZXJlbnRpYXRlcwpiZXR3ZWVuICJJbXBlcnNvbmF0aW9uIiBhbmQgIkRlbGVnYXRpb24iIHRva2Vucy4gVGhpcyBpcyBiZWNhdXNlIGluY29nbml0byBjYW4gYmUgdXNlZCBpbiBzaXR1YXRpb25zIHdoZXJlIHlvdSBnZXQgcmVtb3RlIGNvZGUgZXhlY3V0aW9uIGFnYWluc3QgYSBzZXJ2aWNlCndoaWNoIGhhcyB0aHJlYWRzIGltcGVyc29uYXRpbmcgbXVsdGlwbGUgdXNlcnMuIEluY29nbml0byBjYW4gZW51bWVyYXRlIGFsbCB0b2tlbnMgYXZhaWxhYmxlIHRvIHRoZSBzZXJ2aWNlIHByb2Nlc3MsIGFuZCBpbXBlcnNvbmF0ZSB0aGVtICh3aGljaCBtaWdodCBhbGxvdwp5b3UgdG8gZWxldmF0ZSBwcml2aWxlZ2VzKS4gVGhpcyBzY3JpcHQgbXVzdCBiZSBydW4gYXMgYWRtaW5pc3RyYXRvciwgYW5kIGJlY2F1c2UgeW91IGFyZSBhbHJlYWR5IGFuIGFkbWluaXN0cmF0b3IsIHRoZSBwcmltYXJ5IHVzZSBvZiB0aGlzIHNjcmlwdCBpcyBmb3IgcGl2b3RpbmcKd2l0aG91dCBkdW1waW5nIGNyZWRlbnRpYWxzLiAKCkluIHRoaXMgc2l0dWF0aW9uLCBJbXBlcnNvbmF0aW9uIHZzIERlbGVnYXRpb24gZG9lcyBub3QgbWF0dGVyIGJlY2F1c2UgYW4gYWRtaW5pc3RyYXRvciBjYW4gdHVybiBhbnkgdG9rZW4gaW4gdG8gYSBwcmltYXJ5IHRva2VuIChkZWxlZ2F0aW9uIHJpZ2h0cykuIFdoYXQgZG9lcwptYXR0ZXIgaXMgdGhlIGxvZ29uIHR5cGUgdXNlZCB0byBjcmVhdGUgdGhlIGxvZ29uIHRva2VuLiBJZiBhIHVzZXIgY29ubmVjdHMgdXNpbmcgTmV0d29yayBMb2dvbiAoYWthIHR5cGUgMyBsb2dvbiksIHRoZSBjb21wdXRlciB3aWxsIG5vdCBoYXZlIGFueSBjcmVkZW50aWFscyBmb3IgCnRoZSB1c2VyLiBTaW5jZSB0aGUgY29tcHV0ZXIgaGFzIG5vIGNyZWRlbnRpYWxzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdG9rZW4sIGl0IHdpbGwgbm90IGJlIHBvc3NpYmxlIHRvIGF1dGhlbnRpY2F0ZSBvZmYtYm94IHdpdGggdGhlIHRva2VuLiBBbGwgb3RoZXIgbG9nb24gdHlwZXMKc2hvdWxkIGhhdmUgY3JlZGVudGlhbHMgYXNzb2NpYXRlZCB3aXRoIHRoZW0gKHN1Y2ggYXMgSW50ZXJhY3RpdmUgbG9nb24sIFNlcnZpY2UgbG9nb24sIFJlbW90ZSBpbnRlcmFjdGl2ZSBsb2dvbiwgZXRjKS4gVGhlcmVmb3JlLCB0aGlzIHNjcmlwdCBsb29rcwpmb3IgdG9rZW5zIHdoaWNoIHdlcmUgY3JlYXRlZCB3aXRoIGRlc2lyYWJsZSBsb2dvbiB0b2tlbnMgKGFuZCBvbmx5IGRpc3BsYXlzIHRoZW0gYnkgZGVmYXVsdCkuCgpJbiBhIG51dHNoZWxsLCBpbnN0ZWFkIG9mIHdvcnJ5aW5nIGFib3V0ICJkZWxlZ2F0aW9uIHZzIGltcGVyc29uYXRpb24iIHRva2VucywgeW91IHNob3VsZCB3b3JyeSBhYm91dCBOZXR3b3JrTG9nb24gKGJhZCkgdnMgTm9uLU5ldHdvcmtMb2dvbiAoZ29vZCkuCgoKUG93ZXJTcGxvaXQgRnVuY3Rpb246IEludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbgpBdXRob3I6IEpvZSBCaWFsZWssIFR3aXR0ZXI6IEBKb3NlcGhCaWFsZWsKTGljZW5zZTogQlNEIDMtQ2xhdXNlClJlcXVpcmVkIERlcGVuZGVuY2llczogTm9uZQpPcHRpb25hbCBEZXBlbmRlbmNpZXM6IE5vbmUKVmVyc2lvbjogMS4xMQooMS4xIC0+IDEuMTE6IFBhc3NUaHJ1IG9mIFN5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzIG9iamVjdCBhZGRlZCBieSBSdW5lIE1hcmlib2UsIGh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9pbi9ydW5lbWFyaWJvZSkKCi5ERVNDUklQVElPTgoKTGlzdHMgYXZhaWxhYmxlIGxvZ29uIHRva2Vucy4gQ3JlYXRlcyBwcm9jZXNzZXMgd2l0aCBvdGhlciB1c2VycyBsb2dvbiB0b2tlbnMsIGFuZCBpbXBlcnNvbmF0ZXMgbG9nb24gdG9rZW5zIGluIHRoZSBjdXJyZW50IHRocmVhZC4KCi5QQVJBTUVURVIgRW51bWVyYXRlCgpTd2l0Y2guIFNwZWNpZmljcyB0byBlbnVtZXJhdGUgbG9nb24gdG9rZW5zIGF2YWlsYWJsZS4gQnkgZGVmYXVsdCB0aGlzIHdpbGwgb25seSBsaXN0IHVucWl1ZSB1c2FibGUgdG9rZW5zIChub3QgbmV0d29yay1sb2dvbiB0b2tlbnMpLgoKLlBBUkFNRVRFUiBSZXZUb1NlbGYKClN3aXRjaC4gU3RvcHMgaW1wZXJzb25hdGluZyBhbiBhbHRlcm5hdGUgdXNlcnMgVG9rZW4uCgouUEFSQU1FVEVSIFNob3dBbGwKClN3aXRjaC4gRW51bWVyYXRlIGFsbCBMb2dvbiBUb2tlbnMgKGluY2x1ZGluZyBub24tdW5pcXVlIHRva2VucyBhbmQgTmV0d29ya0xvZ29uIHRva2VucykuCgouUEFSQU1FVEVSIEltcGVyc29uYXRlVXNlcgoKU3dpdGNoLiBXaWxsIGltcGVyc29uYXRlIGFuIGFsdGVybmF0ZSB1c2VycyBsb2dvbiB0b2tlbiBpbiB0aGUgUG93ZXJTaGVsbCB0aHJlYWQuIENhbiBzcGVjaWZ5IHRoZSB0b2tlbiB0byB1c2UgYnkgVXNlcm5hbWUsIFByb2Nlc3NJZCwgb3IgVGhyZWFkSWQuCiAgICBUaGlzIG1vZGUgaXMgbm90IHJlY29tbWVuZGVkIGJlY2F1c2UgUG93ZXJTaGVsbCBpcyBoZWF2aWx5IHRocmVhZGVkIGFuZCBtYW55IGFjdGlvbnMgd29uJ3QgYmUgZG9uZSBpbiB0aGUgY3VycmVudCB0aHJlYWQuIFVzZSBDcmVhdGVQcm9jZXNzIGluc3RlYWQuCiAgICAKLlBBUkFNRVRFUiBDcmVhdGVQcm9jZXNzCgpTcGVjaWZ5IGEgcHJvY2VzcyB0byBjcmVhdGUgd2l0aCBhbiBhbHRlcm5hdGUgdXNlcnMgbG9nb24gdG9rZW4uIENhbiBzcGVjaWZ5IHRoZSB0b2tlbiB0byB1c2UgYnkgVXNlcm5hbWUsIFByb2Nlc3NJZCwgb3IgVGhyZWFkSWQuCiAgICAKLlBBUkFNRVRFUiBXaG9BbUkKClN3aXRjaC4gRGlzcGxheXMgdGhlIGNyZWRlbnRpYWxzIHRoZSBQb3dlclNoZWxsIHRocmVhZCBpcyBydW5uaW5nIHVuZGVyLgoKLlBBUkFNRVRFUiBVc2VybmFtZQoKU3BlY2lmeSB0aGUgVG9rZW4gdG8gdXNlIGJ5IHVzZXJuYW1lLiBUaGlzIHdpbGwgY2hvb3NlIGEgbm9uLU5ldHdvcmtMb2dvbiB0b2tlbiBiZWxvbmdpbmcgdG8gdGhlIHVzZXIuCgouUEFSQU1FVEVSIFByb2Nlc3NJZAoKU3BlY2lmeSB0aGUgVG9rZW4gdG8gdXNlIGJ5IFByb2Nlc3NJZC4gVGhpcyB3aWxsIHVzZSB0aGUgcHJpbWFyeSB0b2tlbiBvZiB0aGUgcHJvY2VzcyBzcGVjaWZpZWQuCgouUEFSQU1FVEVSIFByb2Nlc3MKClNwZWNpZnkgdGhlIHRva2VuIHRvIHVzZSBieSBwcm9jZXNzIG9iamVjdCAod2lsbCB1c2UgdGhlIHByb2Nlc3NJZCB1bmRlciB0aGUgY292ZXJzKS4gVGhpcyB3aWxsIGltcGVyc29uYXRlIHRoZSBwcmltYXJ5IHRva2VuIG9mIHRoZSBwcm9jZXNzLgoKLlBBUkFNRVRFUiBUaHJlYWRJZAoKU3BlY2lmeSB0aGUgVG9rZW4gdG8gdXNlIGJ5IFRocmVhZElkLiBUaGlzIHdpbGwgdXNlIHRoZSB0b2tlbiBvZiB0aGUgdGhyZWFkIHNwZWNpZmllZC4KCi5QQVJBTUVURVIgUHJvY2Vzc0FyZ3MKClNwZWNpZnkgdGhlIGFyZ3VtZW50cyB0byBzdGFydCB0aGUgc3BlY2lmaWVkIHByb2Nlc3Mgd2l0aCB3aGVuIHVzaW5nIHRoZSAtQ3JlYXRlUHJvY2VzcyBtb2RlLgoKLlBBUkFNRVRFUiBOb1VJCgpJZiB5b3UgYXJlIGNyZWF0aW5nIGEgcHJvY2VzcyB3aGljaCBkb2Vzbid0IG5lZWQgYSBVSSB0byBiZSByZW5kZXJlZCwgdXNlIHRoaXMgZmxhZy4gVGhpcyB3aWxsIHByZXZlbnQgdGhlIHNjcmlwdCBmcm9tIG1vZGlmeWluZyB0aGUgRGVza3RvcCBBQ0wncyBvZiB0aGUgCmN1cnJlbnQgdXNlci4gSWYgdGhpcyBmbGFnIGlzbid0IHNldCBhbmQgLUNyZWF0ZVByb2Nlc3MgaXMgdXNlZCwgdGhpcyBzY3JpcHQgd2lsbCBtb2RpZnkgdGhlIEFDTCdzIG9mIHRoZSBjdXJyZW50IHVzZXJzIGRlc2t0b3AgdG8gYWxsb3cgZnVsbCBjb250cm9sCnRvICJFdmVyeW9uZSIuCgouUEFSQU1FVEVSIFBhc3NUaHJ1CgpJZiB5b3UgYXJlIGNyZWF0aW5nIGEgcHJvY2VzcywgdGhpcyB3aWxsIHBhc3MgdGhlIFN5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzIG9iamVjdCB0byB0aGUgcGlwZWxpbmUuCgogICAgCi5FWEFNUExFCgpJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUVudW1lcmF0ZQoKTGlzdHMgYWxsIHVuaXF1ZSB1c2FibGUgdG9rZW5zIG9uIHRoZSBjb21wdXRlci4KCi5FWEFNUExFCgpJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUNyZWF0ZVByb2Nlc3MgImNtZC5leGUiIC1Vc2VybmFtZSAibnQgYXV0aG9yaXR5XHN5c3RlbSIKClNwYXducyBjbWQuZXhlIGFzIFNZU1RFTS4KCi5FWEFNUExFCgpJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUltcGVyc29uYXRlVXNlciAtVXNlcm5hbWUgIm50IGF1dGhvcml0eVxzeXN0ZW0iCgpNYWtlcyB0aGUgY3VycmVudCBQb3dlclNoZWxsIHRocmVhZCBpbXBlcnNvbmF0ZSBTWVNURU0uCgouRVhBTVBMRQoKSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1DcmVhdGVQcm9jZXNzICJjbWQuZXhlIiAtUHJvY2Vzc0lkIDUwMAoKU3Bhd25zIGNtZC5leGUgdXNpbmcgdGhlIHByaW1hcnkgdG9rZW4gYmVsb25naW5nIHRvIHByb2Nlc3MgSUQgNTAwLgoKLkVYQU1QTEUKCkludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbiAtU2hvd0FsbAoKTGlzdHMgYWxsIHRva2VucyBhdmFpbGFibGUgb24gdGhlIGNvbXB1dGVyLCBpbmNsdWRpbmcgbm9uLXVuaXF1ZSB0b2tlbnMgYW5kIHRva2VucyBjcmVhdGVkIHVzaW5nIE5ldHdvcmtMb2dvbi4KCi5FWEFNUExFCgpJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUNyZWF0ZVByb2Nlc3MgImNtZC5leGUiIC1UaHJlYWRJZCA1MDAKClNwYXducyBjbWQuZXhlIHVzaW5nIHRoZSB0b2tlbiBiZWxvbmdpbmcgdG8gdGhyZWFkIElEIDUwMC4KCi5FWEFNUExFCgpHZXQtUHJvY2VzcyB3aW5pbml0IHwgSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1DcmVhdGVQcm9jZXNzICJjbWQuZXhlIgoKU3Bhd25zIGNtZC5leGUgdXNpbmcgdGhlIHByaW1hcnkgdG9rZW4gb2YgTFNBU1MuZXhlLiBUaGlzIHBpcGVzIHRoZSBvdXRwdXQgb2YgR2V0LVByb2Nlc3MgdG8gdGhlICItUHJvY2VzcyIgcGFyYW1ldGVyIG9mIHRoZSBzY3JpcHQuCgouRVhBTVBMRQoKKEdldC1Qcm9jZXNzIHdpbmluaXQgfCBJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUNyZWF0ZVByb2Nlc3MgImNtZC5leGUiIC1QYXNzVGhydSkuV2FpdEZvckV4aXQoKQoKU3Bhd25zIGNtZC5leGUgdXNpbmcgdGhlIHByaW1hcnkgdG9rZW4gb2YgTFNBU1MuZXhlLiBUaGVuIGhvbGRzIHRoZSBzcGF3bmluZyBQb3dlclNoZWxsIHNlc3Npb24gdW50aWwgdGhhdCBwcm9jZXNzIGhhcyBleGl0ZWQuCgouRVhBTVBMRQoKR2V0LVByb2Nlc3Mgd2luaW5pdCB8IEludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbiAtSW1wZXJzb25hdGVVc2VyCgpNYWtlcyB0aGUgY3VycmVudCB0aHJlYWQgaW1wZXJzb25hdGUgdGhlIGxzYXNzIHNlY3VyaXR5IHRva2VuLgoKLk5PVEVTClRoaXMgc2NyaXB0IHdhcyBpbnNwaXJlZCBieSBpbmNvZ25pdG8uIAoKU2V2ZXJhbCBvZiB0aGUgZnVuY3Rpb25zIHVzZWQgaW4gdGhpcyBzY3JpcHQgd2VyZSB3cml0dGVuIGJ5IE1hdHQgR3JhZWJlcihUd2l0dGVyOiBAbWF0dGlmZXN0YXRpb24sIEJsb2c6IGh0dHA6Ly93d3cuZXhwbG9pdC1tb25kYXkuY29tLykuCkJJRyBUSEFOS1MgdG8gTWF0dCBHcmFlYmVyIGZvciBoZWxwaW5nIGRlYnVnLgoKLkxJTksKCkJsb2c6IGh0dHA6Ly9jbHltYjNyLndvcmRwcmVzcy5jb20vCkdpdGh1YiByZXBvOiBodHRwczovL2dpdGh1Yi5jb20vY2x5bWIzci9Qb3dlclNoZWxsCkJsb2cgb24gdGhpcyBzY3JpcHQ6IGh0dHA6Ly9jbHltYjNyLndvcmRwcmVzcy5jb20vMjAxMy8xMS8wMy9wb3dlcnNoZWxsLWFuZC10b2tlbi1pbXBlcnNvbmF0aW9uLwoKIz4KCiAgICBbQ21kbGV0QmluZGluZyhEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZT0iRW51bWVyYXRlIildCiAgICBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiRW51bWVyYXRlIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkRW51bWVyYXRlLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiUmV2VG9TZWxmIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkUmV2VG9TZWxmLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiU2hvd0FsbCIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFNob3dBbGwsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJJbXBlcnNvbmF0ZVVzZXIiKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRJbXBlcnNvbmF0ZVVzZXIsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJDcmVhdGVQcm9jZXNzIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ3JlYXRlUHJvY2VzcywKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIldob0FtSSIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFdob0FtSSwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkltcGVyc29uYXRlVXNlciIpXQogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJDcmVhdGVQcm9jZXNzIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVXNlcm5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJJbXBlcnNvbmF0ZVVzZXIiKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIpXQogICAgICAgIFtJbnRdCiAgICAgICAgJFByb2Nlc3NJZCwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkltcGVyc29uYXRlVXNlciIsIFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIsIFZhbHVlRnJvbVBpcGVsaW5lPSR0cnVlKV0KICAgICAgICBbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdCiAgICAgICAgJFByb2Nlc3MsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJJbXBlcnNvbmF0ZVVzZXIiKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIpXQogICAgICAgICRUaHJlYWRJZCwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkNyZWF0ZVByb2Nlc3MiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQcm9jZXNzQXJncywKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkNyZWF0ZVByb2Nlc3MiKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICROb1VJLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFBhc3NUaHJ1CiAgICApCiAgIAogICAgU2V0LVN0cmljdE1vZGUgLVZlcnNpb24gMgoKICAgICNGdW5jdGlvbiB3cml0dGVuIGJ5IE1hdHQgR3JhZWJlciwgVHdpdHRlcjogQG1hdHRpZmVzdGF0aW9uLCBCbG9nOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8KICAgIEZ1bmN0aW9uIEdldC1EZWxlZ2F0ZVR5cGUKICAgIHsKICAgICAgICBQYXJhbQogICAgICAgICgKICAgICAgICAgICAgW091dHB1dFR5cGUoW1R5cGVdKV0KICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCldCiAgICAgICAgICAgIFtUeXBlW11dCiAgICAgICAgICAgICRQYXJhbWV0ZXJzID0gKE5ldy1PYmplY3QgVHlwZVtdKDApKSwKICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSApXQogICAgICAgICAgICBbVHlwZV0KICAgICAgICAgICAgJFJldHVyblR5cGUgPSBbVm9pZF0KICAgICAgICApCgogICAgICAgICREb21haW4gPSBbQXBwRG9tYWluXTo6Q3VycmVudERvbWFpbgogICAgICAgICREeW5Bc3NlbWJseSA9IE5ldy1PYmplY3QgU3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHlOYW1lKCdSZWZsZWN0ZWREZWxlZ2F0ZScpCiAgICAgICAgJEFzc2VtYmx5QnVpbGRlciA9ICREb21haW4uRGVmaW5lRHluYW1pY0Fzc2VtYmx5KCREeW5Bc3NlbWJseSwgW1N5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQXNzZW1ibHlCdWlsZGVyQWNjZXNzXTo6UnVuKQogICAgICAgICRNb2R1bGVCdWlsZGVyID0gJEFzc2VtYmx5QnVpbGRlci5EZWZpbmVEeW5hbWljTW9kdWxlKCdJbk1lbW9yeU1vZHVsZScsICRmYWxzZSkKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdNeURlbGVnYXRlVHlwZScsICdDbGFzcywgUHVibGljLCBTZWFsZWQsIEFuc2lDbGFzcywgQXV0b0NsYXNzJywgW1N5c3RlbS5NdWx0aWNhc3REZWxlZ2F0ZV0pCiAgICAgICAgJENvbnN0cnVjdG9yQnVpbGRlciA9ICRUeXBlQnVpbGRlci5EZWZpbmVDb25zdHJ1Y3RvcignUlRTcGVjaWFsTmFtZSwgSGlkZUJ5U2lnLCBQdWJsaWMnLCBbU3lzdGVtLlJlZmxlY3Rpb24uQ2FsbGluZ0NvbnZlbnRpb25zXTo6U3RhbmRhcmQsICRQYXJhbWV0ZXJzKQogICAgICAgICRDb25zdHJ1Y3RvckJ1aWxkZXIuU2V0SW1wbGVtZW50YXRpb25GbGFncygnUnVudGltZSwgTWFuYWdlZCcpCiAgICAgICAgJE1ldGhvZEJ1aWxkZXIgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lTWV0aG9kKCdJbnZva2UnLCAnUHVibGljLCBIaWRlQnlTaWcsIE5ld1Nsb3QsIFZpcnR1YWwnLCAkUmV0dXJuVHlwZSwgJFBhcmFtZXRlcnMpCiAgICAgICAgJE1ldGhvZEJ1aWxkZXIuU2V0SW1wbGVtZW50YXRpb25GbGFncygnUnVudGltZSwgTWFuYWdlZCcpCiAgICAgICAgCiAgICAgICAgV3JpdGUtT3V0cHV0ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgIH0KCgogICAgI0Z1bmN0aW9uIHdyaXR0ZW4gYnkgTWF0dCBHcmFlYmVyLCBUd2l0dGVyOiBAbWF0dGlmZXN0YXRpb24sIEJsb2c6IGh0dHA6Ly93d3cuZXhwbG9pdC1tb25kYXkuY29tLwogICAgRnVuY3Rpb24gR2V0LVByb2NBZGRyZXNzCiAgICB7CiAgICAgICAgUGFyYW0KICAgICAgICAoCiAgICAgICAgICAgIFtPdXRwdXRUeXBlKFtJbnRQdHJdKV0KICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSApXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkTW9kdWxlLAogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkVHJ1ZSApXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkUHJvY2VkdXJlCiAgICAgICAgKQoKICAgICAgICAjIEdldCBhIHJlZmVyZW5jZSB0byBTeXN0ZW0uZGxsIGluIHRoZSBHQUMKICAgICAgICAkU3lzdGVtQXNzZW1ibHkgPSBbQXBwRG9tYWluXTo6Q3VycmVudERvbWFpbi5HZXRBc3NlbWJsaWVzKCkgfAogICAgICAgICAgICBXaGVyZS1PYmplY3QgeyAkXy5HbG9iYWxBc3NlbWJseUNhY2hlIC1BbmQgJF8uTG9jYXRpb24uU3BsaXQoJ1xcJylbLTFdLkVxdWFscygnU3lzdGVtLmRsbCcpIH0KICAgICAgICAkVW5zYWZlTmF0aXZlTWV0aG9kcyA9ICRTeXN0ZW1Bc3NlbWJseS5HZXRUeXBlKCdNaWNyb3NvZnQuV2luMzIuVW5zYWZlTmF0aXZlTWV0aG9kcycpCiAgICAgICAgIyBHZXQgYSByZWZlcmVuY2UgdG8gdGhlIEdldE1vZHVsZUhhbmRsZSBhbmQgR2V0UHJvY0FkZHJlc3MgbWV0aG9kcwogICAgICAgICRHZXRNb2R1bGVIYW5kbGUgPSAkVW5zYWZlTmF0aXZlTWV0aG9kcy5HZXRNZXRob2QoJ0dldE1vZHVsZUhhbmRsZScpCiAgICAgICAgJEdldFByb2NBZGRyZXNzID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRQcm9jQWRkcmVzcycpCiAgICAgICAgIyBHZXQgYSBoYW5kbGUgdG8gdGhlIG1vZHVsZSBzcGVjaWZpZWQKICAgICAgICAkS2VybjMySGFuZGxlID0gJEdldE1vZHVsZUhhbmRsZS5JbnZva2UoJG51bGwsIEAoJE1vZHVsZSkpCiAgICAgICAgJHRtcFB0ciA9IE5ldy1PYmplY3QgSW50UHRyCiAgICAgICAgJEhhbmRsZVJlZiA9IE5ldy1PYmplY3QgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkhhbmRsZVJlZigkdG1wUHRyLCAkS2VybjMySGFuZGxlKQoKICAgICAgICAjIFJldHVybiB0aGUgYWRkcmVzcyBvZiB0aGUgZnVuY3Rpb24KICAgICAgICBXcml0ZS1PdXRwdXQgJEdldFByb2NBZGRyZXNzLkludm9rZSgkbnVsbCwgQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkhhbmRsZVJlZl0kSGFuZGxlUmVmLCAkUHJvY2VkdXJlKSkKICAgIH0KCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjV2luMzJDb25zdGFudHMKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICRDb25zdGFudHMgPSBAewogICAgICAgIEFDQ0VTU19TWVNURU1fU0VDVVJJVFkgPSAweDAxMDAwMDAwCiAgICAgICAgUkVBRF9DT05UUk9MID0gMHgwMDAyMDAwMAogICAgICAgIFNZTkNIUk9OSVpFID0gMHgwMDEwMDAwMAogICAgICAgIFNUQU5EQVJEX1JJR0hUU19BTEwgPSAweDAwMUYwMDAwCiAgICAgICAgVE9LRU5fUVVFUlkgPSA4CiAgICAgICAgVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMgPSAweDIwCiAgICAgICAgRVJST1JfTk9fVE9LRU4gPSAweDNmMAogICAgICAgIFNFQ1VSSVRZX0RFTEVHQVRJT04gPSAzCiAgICAgICAgREFDTF9TRUNVUklUWV9JTkZPUk1BVElPTiA9IDB4NAogICAgICAgIEFDQ0VTU19BTExPV0VEX0FDRV9UWVBFID0gMHgwCiAgICAgICAgU1RBTkRBUkRfUklHSFRTX1JFUVVJUkVEID0gMHgwMDBGMDAwMAogICAgICAgIERFU0tUT1BfR0VORVJJQ19BTEwgPSAweDAwMEYwMUZGCiAgICAgICAgV1JJVEVfREFDID0gMHgwMDA0MDAwMAogICAgICAgIE9CSkVDVF9JTkhFUklUX0FDRSA9IDB4MQogICAgICAgIEdSQU5UX0FDQ0VTUyA9IDB4MQogICAgICAgIFRSVVNURUVfSVNfTkFNRSA9IDB4MQogICAgICAgIFRSVVNURUVfSVNfU0lEID0gMHgwCiAgICAgICAgVFJVU1RFRV9JU19VU0VSID0gMHgxCiAgICAgICAgVFJVU1RFRV9JU19XRUxMX0tOT1dOX0dST1VQID0gMHg1CiAgICAgICAgVFJVU1RFRV9JU19HUk9VUCA9IDB4MgogICAgICAgIFBST0NFU1NfUVVFUllfSU5GT1JNQVRJT04gPSAweDQwMAogICAgICAgIFRPS0VOX0FTU0lHTl9QUklNQVJZID0gMHgxCiAgICAgICAgVE9LRU5fRFVQTElDQVRFID0gMHgyCiAgICAgICAgVE9LRU5fSU1QRVJTT05BVEUgPSAweDQKICAgICAgICBUT0tFTl9RVUVSWV9TT1VSQ0UgPSAweDEwCiAgICAgICAgU1RBTkRBUkRfUklHSFRTX1JFQUQgPSAweDIwMDAwCiAgICAgICAgVG9rZW5TdGF0aXN0aWNzID0gMTAKICAgICAgICBUT0tFTl9BTExfQUNDRVNTID0gMHhmMDFmZgogICAgICAgIE1BWElNVU1fQUxMT1dFRCA9IDB4MDIwMDAwMDAKICAgICAgICBUSFJFQURfQUxMX0FDQ0VTUyA9IDB4MWYwM2ZmCiAgICAgICAgRVJST1JfSU5WQUxJRF9QQVJBTUVURVIgPSAweDU3CiAgICAgICAgTE9HT05fTkVUQ1JFREVOVElBTFNfT05MWSA9IDB4MgogICAgICAgIFNFX1BSSVZJTEVHRV9FTkFCTEVEID0gMHgyCiAgICAgICAgU0VfUFJJVklMRUdFX0VOQUJMRURfQllfREVGQVVMVCA9IDB4MQogICAgICAgIFNFX1BSSVZJTEVHRV9SRU1PVkVEID0gMHg0CiAgICB9CgogICAgJFdpbjMyQ29uc3RhbnRzID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgJENvbnN0YW50cwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjV2luMzJTdHJ1Y3R1cmVzCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjRGVmaW5lIGFsbCB0aGUgc3RydWN0dXJlcy9lbnVtcyB0aGF0IHdpbGwgYmUgdXNlZAogICAgIyAgIFRoaXMgYXJ0aWNsZSBzaG93cyB5b3UgaG93IHRvIGRvIHRoaXMgd2l0aCByZWZsZWN0aW9uOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8yMDEyLzA3L3N0cnVjdHMtYW5kLWVudW1zLXVzaW5nLXJlZmxlY3Rpb24uaHRtbAogICAgJERvbWFpbiA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluCiAgICAkRHluYW1pY0Fzc2VtYmx5ID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUoJ0R5bmFtaWNBc3NlbWJseScpCiAgICAkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bmFtaWNBc3NlbWJseSwgW1N5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQXNzZW1ibHlCdWlsZGVyQWNjZXNzXTo6UnVuKQogICAgJE1vZHVsZUJ1aWxkZXIgPSAkQXNzZW1ibHlCdWlsZGVyLkRlZmluZUR5bmFtaWNNb2R1bGUoJ0R5bmFtaWNNb2R1bGUnLCAkZmFsc2UpCiAgICAkQ29uc3RydWN0b3JJbmZvID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsQXNBdHRyaWJ1dGVdLkdldENvbnN0cnVjdG9ycygpWzBdCgogICAgI0VOVU1zCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVFbnVtKCdUT0tFTl9JTkZPUk1BVElPTl9DTEFTUycsICdQdWJsaWMnLCBbVUludDMyXSkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblVzZXInLCBbVUludDMyXSAxKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Hcm91cHMnLCBbVUludDMyXSAyKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Qcml2aWxlZ2VzJywgW1VJbnQzMl0gMykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuT3duZXInLCBbVUludDMyXSA0KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5QcmltYXJ5R3JvdXAnLCBbVUludDMyXSA1KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5EZWZhdWx0RGFjbCcsIFtVSW50MzJdIDYpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblNvdXJjZScsIFtVSW50MzJdIDcpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblR5cGUnLCBbVUludDMyXSA4KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5JbXBlcnNvbmF0aW9uTGV2ZWwnLCBbVUludDMyXSA5KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5TdGF0aXN0aWNzJywgW1VJbnQzMl0gMTApIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblJlc3RyaWN0ZWRTaWRzJywgW1VJbnQzMl0gMTEpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblNlc3Npb25JZCcsIFtVSW50MzJdIDEyKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Hcm91cHNBbmRQcml2aWxlZ2VzJywgW1VJbnQzMl0gMTMpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblNlc3Npb25SZWZlcmVuY2UnLCBbVUludDMyXSAxNCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuU2FuZEJveEluZXJ0JywgW1VJbnQzMl0gMTUpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkF1ZGl0UG9saWN5JywgW1VJbnQzMl0gMTYpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbk9yaWdpbicsIFtVSW50MzJdIDE3KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5FbGV2YXRpb25UeXBlJywgW1VJbnQzMl0gMTgpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkxpbmtlZFRva2VuJywgW1VJbnQzMl0gMTkpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkVsZXZhdGlvbicsIFtVSW50MzJdIDIwKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5IYXNSZXN0cmljdGlvbnMnLCBbVUludDMyXSAyMSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuQWNjZXNzSW5mb3JtYXRpb24nLCBbVUludDMyXSAyMikgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuVmlydHVhbGl6YXRpb25BbGxvd2VkJywgW1VJbnQzMl0gMjMpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblZpcnR1YWxpemF0aW9uRW5hYmxlZCcsIFtVSW50MzJdIDI0KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5JbnRlZ3JpdHlMZXZlbCcsIFtVSW50MzJdIDI1KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5VSUFjY2VzcycsIFtVSW50MzJdIDI2KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5NYW5kYXRvcnlQb2xpY3knLCBbVUludDMyXSAyNykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuTG9nb25TaWQnLCBbVUludDMyXSAyOCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuSXNBcHBDb250YWluZXInLCBbVUludDMyXSAyOSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuQ2FwYWJpbGl0aWVzJywgW1VJbnQzMl0gMzApIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkFwcENvbnRhaW5lclNpZCcsIFtVSW50MzJdIDMxKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5BcHBDb250YWluZXJOdW1iZXInLCBbVUludDMyXSAzMikgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuVXNlckNsYWltQXR0cmlidXRlcycsIFtVSW50MzJdIDMzKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5EZXZpY2VDbGFpbUF0dHJpYnV0ZXMnLCBbVUludDMyXSAzNCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuUmVzdHJpY3RlZFVzZXJDbGFpbUF0dHJpYnV0ZXMnLCBbVUludDMyXSAzNSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuUmVzdHJpY3RlZERldmljZUNsYWltQXR0cmlidXRlcycsIFtVSW50MzJdIDM2KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5EZXZpY2VHcm91cHMnLCBbVUludDMyXSAzNykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuUmVzdHJpY3RlZERldmljZUdyb3VwcycsIFtVSW50MzJdIDM4KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5TZWN1cml0eUF0dHJpYnV0ZXMnLCBbVUludDMyXSAzOSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuSXNSZXN0cmljdGVkJywgW1VJbnQzMl0gNDApIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdNYXhUb2tlbkluZm9DbGFzcycsIFtVSW50MzJdIDQxKSB8IE91dC1OdWxsCiAgICAkVE9LRU5fSU5GT1JNQVRJT05fQ0xBU1MgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1NUUlVDVHMKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMQVJHRV9JTlRFR0VSJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgOCkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG93UGFydCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdIaWdoUGFydCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJExBUkdFX0lOVEVHRVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBMVUlECiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTFVJRCcsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0sIDgpCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvd1BhcnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSGlnaFBhcnQnLCBbSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJExVSUQgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBUT0tFTl9TVEFUSVNUSUNTCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnVE9LRU5fU1RBVElTVElDUycsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Rva2VuSWQnLCAkTFVJRCwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQXV0aGVudGljYXRpb25JZCcsICRMVUlELCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdFeHBpcmF0aW9uVGltZScsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUb2tlblR5cGUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSW1wZXJzb25hdGlvbkxldmVsJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0R5bmFtaWNDaGFyZ2VkJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0R5bmFtaWNBdmFpbGFibGUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnR3JvdXBDb3VudCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQcml2aWxlZ2VDb3VudCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNb2RpZmllZElkJywgJExVSUQsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVE9LRU5fU1RBVElTVElDUyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IExTQV9VTklDT0RFX1NUUklORwogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xTQV9VTklDT0RFX1NUUklORycsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xlbmd0aCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYXhpbXVtTGVuZ3RoJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0J1ZmZlcicsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJExTQV9VTklDT0RFX1NUUklORyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IExTQV9MQVNUX0lOVEVSX0xPR09OX0lORk8KICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMU0FfTEFTVF9JTlRFUl9MT0dPTl9JTkZPJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTGFzdFN1Y2Nlc3NmdWxMb2dvbicsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMYXN0RmFpbGVkTG9nb24nLCAkTEFSR0VfSU5URUdFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRmFpbGVkQXR0ZW1wdENvdW50U2luY2VMYXN0U3VjY2Vzc2Z1bExvZ29uJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkTFNBX0xBU1RfSU5URVJfTE9HT05fSU5GTyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IFNFQ1VSSVRZX0xPR09OX1NFU1NJT05fREFUQQogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1NFQ1VSSVRZX0xPR09OX1NFU1NJT05fREFUQScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpemUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9naW5JRCcsICRMVUlELCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdVc2VybmFtZScsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvZ2luRG9tYWluJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQXV0aGVudGljYXRpb25QYWNrYWdlJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9nb25UeXBlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Nlc3Npb24nLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2lkJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvZ2luVGltZScsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2dpblNlcnZlcicsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0Ruc0RvbWFpbk5hbWUnLCAkTFNBX1VOSUNPREVfU1RSSU5HLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdVcG4nLCAkTFNBX1VOSUNPREVfU1RSSU5HLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdVc2VyRmxhZ3MnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTGFzdExvZ29uSW5mbycsICRMU0FfTEFTVF9JTlRFUl9MT0dPTl9JTkZPLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2dvblNjcmlwdCcsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Byb2ZpbGVQYXRoJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSG9tZURpcmVjdG9yeScsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0hvbWVEaXJlY3RvcnlEcml2ZScsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvZ29mZlRpbWUnLCAkTEFSR0VfSU5URUdFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnS2lja09mZlRpbWUnLCAkTEFSR0VfSU5URUdFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUGFzc3dvcmRMYXN0U2V0JywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Bhc3N3b3JkQ2FuQ2hhbmdlJywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Bhc3N3b3JkTXVzdENoYW5nZScsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFNFQ1VSSVRZX0xPR09OX1NFU1NJT05fREFUQSA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IFNUQVJUVVBJTkZPCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnU1RBUlRVUElORk8nLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdjYicsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdscFJlc2VydmVkJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2xwRGVza3RvcCcsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdscFRpdGxlJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3WCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1knLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZHdYU2l6ZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1lTaXplJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3WENvdW50Q2hhcnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZHdZQ291bnRDaGFycycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd0ZpbGxBdHRyaWJ1dGUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZHdGbGFncycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCd3U2hvd1dpbmRvdycsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdjYlJlc2VydmVkMicsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdscFJlc2VydmVkMicsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdoU3RkSW5wdXQnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnaFN0ZE91dHB1dCcsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdoU3RkRXJyb3InLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRTVEFSVFVQSU5GTyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IFBST0NFU1NfSU5GT1JNQVRJT04KICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdQUk9DRVNTX0lORk9STUFUSU9OJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnaFByb2Nlc3MnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnaFRocmVhZCcsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1Byb2Nlc3NJZCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1RocmVhZElkJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkUFJPQ0VTU19JTkZPUk1BVElPTiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IFRPS0VOX0VMRVZBVElPTgogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1RPS0VOX0VMRVZBVElPTicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Rva2VuSXNFbGV2YXRlZCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFRPS0VOX0VMRVZBVElPTiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IExVSURfQU5EX0FUVFJJQlVURVMKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMVUlEX0FORF9BVFRSSUJVVEVTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMTIpCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0x1aWQnLCAkTFVJRCwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQXR0cmlidXRlcycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJExVSURfQU5EX0FUVFJJQlVURVMgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAgICAgCiAgICAjU3RydWN0IFRPS0VOX1BSSVZJTEVHRVMKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdUT0tFTl9QUklWSUxFR0VTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgMTYpCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ByaXZpbGVnZUNvdW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ByaXZpbGVnZXMnLCAkTFVJRF9BTkRfQVRUUklCVVRFUywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUT0tFTl9QUklWSUxFR0VTID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgQUNFX0hFQURFUgogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0FDRV9IRUFERVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2VUeXBlJywgW0J5dGVdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2VGbGFncycsIFtCeXRlXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWNlU2l6ZScsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJEFDRV9IRUFERVIgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBBQ0wKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdBQ0wnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2xSZXZpc2lvbicsIFtCeXRlXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2J6MScsIFtCeXRlXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQWNsU2l6ZScsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2VDb3VudCcsIFtVSW50MTZdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTYnoyJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkQUNMID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgQUNFX0hFQURFUgogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0FDQ0VTU19BTExPV0VEX0FDRScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0hlYWRlcicsICRBQ0VfSEVBREVSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdNYXNrJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NpZFN0YXJ0JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkQUNDRVNTX0FMTE9XRURfQUNFID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgVFJVU1RFRQogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1RSVVNURUUnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdwTXVsdGlwbGVUcnVzdGVlJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ011bHRpcGxlVHJ1c3RlZU9wZXJhdGlvbicsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUcnVzdGVlRm9ybScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUcnVzdGVlVHlwZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdwdHN0ck5hbWUnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUUlVTVEVFID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgRVhQTElDSVRfQUNDRVNTCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnRVhQTElDSVRfQUNDRVNTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZ3JmQWNjZXNzUGVybWlzc2lvbnMnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZ3JmQWNjZXNzTW9kZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdncmZJbmhlcml0YW5jZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdUcnVzdGVlJywgJFRSVVNURUUsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkRVhQTElDSVRfQUNDRVNTID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAjV2luMzJGdW5jdGlvbnMKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICRPcGVuUHJvY2Vzc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIE9wZW5Qcm9jZXNzCiAgICAkT3BlblByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbVUludDMyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgJE9wZW5Qcm9jZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5Qcm9jZXNzQWRkciwgJE9wZW5Qcm9jZXNzRGVsZWdhdGUpCgogICAgJE9wZW5Qcm9jZXNzVG9rZW5BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBPcGVuUHJvY2Vzc1Rva2VuCiAgICAkT3BlblByb2Nlc3NUb2tlbkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgJE9wZW5Qcm9jZXNzVG9rZW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlblByb2Nlc3NUb2tlbkFkZHIsICRPcGVuUHJvY2Vzc1Rva2VuRGVsZWdhdGUpICAgIAoKICAgICRHZXRUb2tlbkluZm9ybWF0aW9uQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgR2V0VG9rZW5JbmZvcm1hdGlvbgogICAgJEdldFRva2VuSW5mb3JtYXRpb25EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgJFRPS0VOX0lORk9STUFUSU9OX0NMQVNTLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICRHZXRUb2tlbkluZm9ybWF0aW9uID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldFRva2VuSW5mb3JtYXRpb25BZGRyLCAkR2V0VG9rZW5JbmZvcm1hdGlvbkRlbGVnYXRlKSAgICAKCiAgICAkU2V0VGhyZWFkVG9rZW5BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBTZXRUaHJlYWRUb2tlbgogICAgJFNldFRocmVhZFRva2VuRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgJFNldFRocmVhZFRva2VuID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFNldFRocmVhZFRva2VuQWRkciwgJFNldFRocmVhZFRva2VuRGVsZWdhdGUpICAgIAoKICAgICRJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlckFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyCiAgICAkSW1wZXJzb25hdGVMb2dnZWRPblVzZXJEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSkgKFtCb29sXSkKICAgICRJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlckFkZHIsICRJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlckRlbGVnYXRlKQoKICAgICRSZXZlcnRUb1NlbGZBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBSZXZlcnRUb1NlbGYKICAgICRSZXZlcnRUb1NlbGZEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQCgpIChbQm9vbF0pCiAgICAkUmV2ZXJ0VG9TZWxmID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFJldmVydFRvU2VsZkFkZHIsICRSZXZlcnRUb1NlbGZEZWxlZ2F0ZSkKCiAgICAkTHNhR2V0TG9nb25TZXNzaW9uRGF0YUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mgc2VjdXIzMi5kbGwgTHNhR2V0TG9nb25TZXNzaW9uRGF0YQogICAgJExzYUdldExvZ29uU2Vzc2lvbkRhdGFEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW1VJbnQzMl0pCiAgICAkTHNhR2V0TG9nb25TZXNzaW9uRGF0YSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMc2FHZXRMb2dvblNlc3Npb25EYXRhQWRkciwgJExzYUdldExvZ29uU2Vzc2lvbkRhdGFEZWxlZ2F0ZSkKCiAgICAkQ3JlYXRlUHJvY2Vzc1dpdGhUb2tlbldBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBDcmVhdGVQcm9jZXNzV2l0aFRva2VuVwogICAgJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSkgKFtCb29sXSkKICAgICRDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVQcm9jZXNzV2l0aFRva2VuV0FkZHIsICRDcmVhdGVQcm9jZXNzV2l0aFRva2VuV0RlbGVnYXRlKQoKICAgICRtZW1zZXRBZGRyID0gR2V0LVByb2NBZGRyZXNzIG1zdmNydC5kbGwgbWVtc2V0CiAgICAkbWVtc2V0RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnQzMl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAkbWVtc2V0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJG1lbXNldEFkZHIsICRtZW1zZXREZWxlZ2F0ZSkKCiAgICAkRHVwbGljYXRlVG9rZW5FeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIER1cGxpY2F0ZVRva2VuRXgKICAgICREdXBsaWNhdGVUb2tlbkV4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAkRHVwbGljYXRlVG9rZW5FeCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCREdXBsaWNhdGVUb2tlbkV4QWRkciwgJER1cGxpY2F0ZVRva2VuRXhEZWxlZ2F0ZSkKCiAgICAkTG9va3VwQWNjb3VudFNpZFdBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBMb29rdXBBY2NvdW50U2lkVwogICAgJExvb2t1cEFjY291bnRTaWRXRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAkTG9va3VwQWNjb3VudFNpZFcgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9va3VwQWNjb3VudFNpZFdBZGRyLCAkTG9va3VwQWNjb3VudFNpZFdEZWxlZ2F0ZSkKCiAgICAkQ2xvc2VIYW5kbGVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDbG9zZUhhbmRsZQogICAgJENsb3NlSGFuZGxlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0pIChbQm9vbF0pCiAgICAkQ2xvc2VIYW5kbGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ2xvc2VIYW5kbGVBZGRyLCAkQ2xvc2VIYW5kbGVEZWxlZ2F0ZSkKCiAgICAkTHNhRnJlZVJldHVybkJ1ZmZlckFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mgc2VjdXIzMi5kbGwgTHNhRnJlZVJldHVybkJ1ZmZlcgogICAgJExzYUZyZWVSZXR1cm5CdWZmZXJEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSkgKFtVSW50MzJdKQogICAgJExzYUZyZWVSZXR1cm5CdWZmZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTHNhRnJlZVJldHVybkJ1ZmZlckFkZHIsICRMc2FGcmVlUmV0dXJuQnVmZmVyRGVsZWdhdGUpCgogICAgJE9wZW5UaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBPcGVuVGhyZWFkCiAgICAkT3BlblRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtVSW50MzJdLCBbQm9vbF0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAkT3BlblRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuVGhyZWFkQWRkciwgJE9wZW5UaHJlYWREZWxlZ2F0ZSkKCiAgICAkT3BlblRocmVhZFRva2VuQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgT3BlblRocmVhZFRva2VuCiAgICAkT3BlblRocmVhZFRva2VuRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbQm9vbF0sIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICRPcGVuVGhyZWFkVG9rZW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlblRocmVhZFRva2VuQWRkciwgJE9wZW5UaHJlYWRUb2tlbkRlbGVnYXRlKQoKICAgICRDcmVhdGVQcm9jZXNzQXNVc2VyV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIENyZWF0ZVByb2Nlc3NBc1VzZXJXCiAgICAkQ3JlYXRlUHJvY2Vzc0FzVXNlcldEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtCb29sXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgJENyZWF0ZVByb2Nlc3NBc1VzZXJXID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVByb2Nlc3NBc1VzZXJXQWRkciwgJENyZWF0ZVByb2Nlc3NBc1VzZXJXRGVsZWdhdGUpCgogICAgJE9wZW5XaW5kb3dTdGF0aW9uV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgdXNlcjMyLmRsbCBPcGVuV2luZG93U3RhdGlvblcKICAgICRPcGVuV2luZG93U3RhdGlvbldEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgJE9wZW5XaW5kb3dTdGF0aW9uVyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuV2luZG93U3RhdGlvbldBZGRyLCAkT3BlbldpbmRvd1N0YXRpb25XRGVsZWdhdGUpCgogICAgJE9wZW5EZXNrdG9wQUFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgdXNlcjMyLmRsbCBPcGVuRGVza3RvcEEKICAgICRPcGVuRGVza3RvcEFEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbU3RyaW5nXSwgW1VJbnQzMl0sIFtCb29sXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICRPcGVuRGVza3RvcEEgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlbkRlc2t0b3BBQWRkciwgJE9wZW5EZXNrdG9wQURlbGVnYXRlKQoKICAgICRJbXBlcnNvbmF0ZVNlbGZBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBJbXBlcnNvbmF0ZVNlbGYKICAgICRJbXBlcnNvbmF0ZVNlbGZEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50MzJdKSAoW0Jvb2xdKQogICAgJEltcGVyc29uYXRlU2VsZiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRJbXBlcnNvbmF0ZVNlbGZBZGRyLCAkSW1wZXJzb25hdGVTZWxmRGVsZWdhdGUpCgogICAgJExvb2t1cFByaXZpbGVnZVZhbHVlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBBZHZhcGkzMi5kbGwgTG9va3VwUHJpdmlsZWdlVmFsdWVBCiAgICAkTG9va3VwUHJpdmlsZWdlVmFsdWVEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbU3RyaW5nXSwgW1N0cmluZ10sICRMVUlELk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICRMb29rdXBQcml2aWxlZ2VWYWx1ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMb29rdXBQcml2aWxlZ2VWYWx1ZUFkZHIsICRMb29rdXBQcml2aWxlZ2VWYWx1ZURlbGVnYXRlKQoKICAgICRBZGp1c3RUb2tlblByaXZpbGVnZXNBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBBZGp1c3RUb2tlblByaXZpbGVnZXMKICAgICRBZGp1c3RUb2tlblByaXZpbGVnZXNEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0Jvb2xdLCAkVE9LRU5fUFJJVklMRUdFUy5NYWtlQnlSZWZUeXBlKCksIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0pIChbQm9vbF0pCiAgICAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEFkanVzdFRva2VuUHJpdmlsZWdlc0FkZHIsICRBZGp1c3RUb2tlblByaXZpbGVnZXNEZWxlZ2F0ZSkKCiAgICAkR2V0Q3VycmVudFRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEdldEN1cnJlbnRUaHJlYWQKICAgICRHZXRDdXJyZW50VGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoKSAoW0ludFB0cl0pCiAgICAkR2V0Q3VycmVudFRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRDdXJyZW50VGhyZWFkQWRkciwgJEdldEN1cnJlbnRUaHJlYWREZWxlZ2F0ZSkKCiAgICAkR2V0U2VjdXJpdHlJbmZvQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgR2V0U2VjdXJpdHlJbmZvCiAgICAkR2V0U2VjdXJpdHlJbmZvRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCksIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbVUludDMyXSkKICAgICRHZXRTZWN1cml0eUluZm8gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0U2VjdXJpdHlJbmZvQWRkciwgJEdldFNlY3VyaXR5SW5mb0RlbGVnYXRlKQoKICAgICRTZXRTZWN1cml0eUluZm9BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBTZXRTZWN1cml0eUluZm8KICAgICRTZXRTZWN1cml0eUluZm9EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSkgKFtVSW50MzJdKQogICAgJFNldFNlY3VyaXR5SW5mbyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRTZXRTZWN1cml0eUluZm9BZGRyLCAkU2V0U2VjdXJpdHlJbmZvRGVsZWdhdGUpCgogICAgJEdldEFjZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIEdldEFjZQogICAgJEdldEFjZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0ludFB0cl0pCiAgICAkR2V0QWNlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldEFjZUFkZHIsICRHZXRBY2VEZWxlZ2F0ZSkKCiAgICAkTG9va3VwQWNjb3VudFNpZFdBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBMb29rdXBBY2NvdW50U2lkVwogICAgJExvb2t1cEFjY291bnRTaWRXRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAkTG9va3VwQWNjb3VudFNpZFcgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9va3VwQWNjb3VudFNpZFdBZGRyLCAkTG9va3VwQWNjb3VudFNpZFdEZWxlZ2F0ZSkKCiAgICAkQWRkQWNjZXNzQWxsb3dlZEFjZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIEFkZEFjY2Vzc0FsbG93ZWRBY2UKICAgICRBZGRBY2Nlc3NBbGxvd2VkQWNlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbQm9vbF0pCiAgICAkQWRkQWNjZXNzQWxsb3dlZEFjZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRBZGRBY2Nlc3NBbGxvd2VkQWNlQWRkciwgJEFkZEFjY2Vzc0FsbG93ZWRBY2VEZWxlZ2F0ZSkKCiAgICAkQ3JlYXRlV2VsbEtub3duU2lkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgQ3JlYXRlV2VsbEtub3duU2lkCiAgICAkQ3JlYXRlV2VsbEtub3duU2lkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgJENyZWF0ZVdlbGxLbm93blNpZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVXZWxsS25vd25TaWRBZGRyLCAkQ3JlYXRlV2VsbEtub3duU2lkRGVsZWdhdGUpCgogICAgJFNldEVudHJpZXNJbkFjbFdBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBTZXRFbnRyaWVzSW5BY2xXCiAgICAkU2V0RW50cmllc0luQWNsV0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtVSW50MzJdLCAkRVhQTElDSVRfQUNDRVNTLk1ha2VCeVJlZlR5cGUoKSwgW0ludFB0cl0sIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtVSW50MzJdKQogICAgJFNldEVudHJpZXNJbkFjbFcgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkU2V0RW50cmllc0luQWNsV0FkZHIsICRTZXRFbnRyaWVzSW5BY2xXRGVsZWdhdGUpCgogICAgJExvY2FsRnJlZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIExvY2FsRnJlZQogICAgJExvY2FsRnJlZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAkTG9jYWxGcmVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExvY2FsRnJlZUFkZHIsICRMb2NhbEZyZWVEZWxlZ2F0ZSkKCiAgICAkTG9va3VwUHJpdmlsZWdlTmFtZVdBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBMb29rdXBQcml2aWxlZ2VOYW1lVwogICAgJExvb2t1cFByaXZpbGVnZU5hbWVXRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgJExvb2t1cFByaXZpbGVnZU5hbWVXID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExvb2t1cFByaXZpbGVnZU5hbWVXQWRkciwgJExvb2t1cFByaXZpbGVnZU5hbWVXRGVsZWdhdGUpCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKICAgICNVc2VkIHRvIGFkZCA2NGJpdCBtZW1vcnkgYWRkcmVzc2VzCiAgICBGdW5jdGlvbiBBZGQtU2lnbmVkSW50QXNVbnNpZ25lZAogICAgewogICAgICAgIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkdHJ1ZSldCiAgICAgICAgW0ludDY0XQogICAgICAgICRWYWx1ZTEsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICR0cnVlKV0KICAgICAgICBbSW50NjRdCiAgICAgICAgJFZhbHVlMgogICAgICAgICkKICAgICAgICAKICAgICAgICBbQnl0ZVtdXSRWYWx1ZTFCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkVmFsdWUxKQogICAgICAgIFtCeXRlW11dJFZhbHVlMkJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTIpCiAgICAgICAgW0J5dGVbXV0kRmluYWxCeXRlcyA9IFtCaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcyhbVUludDY0XTApCgogICAgICAgIGlmICgkVmFsdWUxQnl0ZXMuQ291bnQgLWVxICRWYWx1ZTJCeXRlcy5Db3VudCkKICAgICAgICB7CiAgICAgICAgICAgICRDYXJyeU92ZXIgPSAwCiAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJFZhbHVlMUJ5dGVzLkNvdW50OyAkaSsrKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjQWRkIGJ5dGVzCiAgICAgICAgICAgICAgICBbVUludDE2XSRTdW0gPSAkVmFsdWUxQnl0ZXNbJGldICsgJFZhbHVlMkJ5dGVzWyRpXSArICRDYXJyeU92ZXIKCiAgICAgICAgICAgICAgICAkRmluYWxCeXRlc1skaV0gPSAkU3VtIC1iYW5kIDB4MDBGRgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZiAoKCRTdW0gLWJhbmQgMHhGRjAwKSAtZXEgMHgxMDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJENhcnJ5T3ZlciA9IDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkQ2FycnlPdmVyID0gMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJDYW5ub3QgYWRkIGJ5dGVhcnJheXMgb2YgZGlmZmVyZW50IHNpemVzIgogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gW0JpdENvbnZlcnRlcl06OlRvSW50NjQoJEZpbmFsQnl0ZXMsIDApCiAgICB9CgoKICAgICNFbmFibGUgU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UsIG5lZWRlZCB0byBxdWVyeSBzZWN1cml0eSBpbmZvcm1hdGlvbiBmb3IgZGVza3RvcCBEQUNMCiAgICBmdW5jdGlvbiBFbmFibGUtU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UKICAgIHsgICAKICAgICAgICBbSW50UHRyXSRUaHJlYWRIYW5kbGUgPSAkR2V0Q3VycmVudFRocmVhZC5JbnZva2UoKQogICAgICAgIGlmICgkVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gZ2V0IHRoZSBoYW5kbGUgdG8gdGhlIGN1cnJlbnQgdGhyZWFkIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBbSW50UHRyXSRUaHJlYWRUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgW0Jvb2xdJFJlc3VsdCA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQoKICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRFcnJvckNvZGUgLWVxICRXaW4zMkNvbnN0YW50cy5FUlJPUl9OT19UT0tFTikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFJlc3VsdCA9ICRJbXBlcnNvbmF0ZVNlbGYuSW52b2tlKCRXaW4zMkNvbnN0YW50cy5TRUNVUklUWV9ERUxFR0FUSU9OKQogICAgICAgICAgICAgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFJlc3VsdCA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKICAgICAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAoW0NvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uXSAkRXJyb3JDb2RlKQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRUaHJlYWRIYW5kbGUpIHwgT3V0LU51bGwKICAgIAogICAgICAgICRMdWlkU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kTFVJRCkKICAgICAgICAkTHVpZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkTHVpZFNpemUpCiAgICAgICAgJEx1aWRPYmplY3QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTHVpZFB0ciwgW1R5cGVdJExVSUQpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJEx1aWRQdHIpCgogICAgICAgICRSZXN1bHQgPSAkTG9va3VwUHJpdmlsZWdlVmFsdWUuSW52b2tlKCRudWxsLCAiU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UiLCBbUmVmXSAkTHVpZE9iamVjdCkKCiAgICAgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQogICAgICAgIH0KCiAgICAgICAgW1VJbnQzMl0kTHVpZEFuZEF0dHJpYnV0ZXNTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRMVUlEX0FORF9BVFRSSUJVVEVTKQogICAgICAgICRMdWlkQW5kQXR0cmlidXRlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkTHVpZEFuZEF0dHJpYnV0ZXNTaXplKQogICAgICAgICRMdWlkQW5kQXR0cmlidXRlcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMdWlkQW5kQXR0cmlidXRlc1B0ciwgW1R5cGVdJExVSURfQU5EX0FUVFJJQlVURVMpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJEx1aWRBbmRBdHRyaWJ1dGVzUHRyKQoKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXMuTHVpZCA9ICRMdWlkT2JqZWN0CiAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVzLkF0dHJpYnV0ZXMgPSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQKCiAgICAgICAgW1VJbnQzMl0kVG9rZW5Qcml2U2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kVE9LRU5fUFJJVklMRUdFUykKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb2tlblByaXZTaXplKQogICAgICAgICRUb2tlblByaXZpbGVnZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5Qcml2aWxlZ2VzUHRyLCBbVHlwZV0kVE9LRU5fUFJJVklMRUdFUykKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5Qcml2aWxlZ2VzUHRyKQogICAgICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlQ291bnQgPSAxCiAgICAgICAgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VzID0gJEx1aWRBbmRBdHRyaWJ1dGVzCgogICAgICAgICRHbG9iYWw6VG9rZW5Qcml2ID0gJFRva2VuUHJpdmlsZWdlcwoKICAgICAgICAkUmVzdWx0ID0gJEFkanVzdFRva2VuUHJpdmlsZWdlcy5JbnZva2UoJFRocmVhZFRva2VuLCAkZmFsc2UsIFtSZWZdICRUb2tlblByaXZpbGVnZXMsICRUb2tlblByaXZTaXplLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8pCiAgICAgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQogICAgICAgIH0KCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkVGhyZWFkVG9rZW4pIHwgT3V0LU51bGwKICAgIH0KCgogICAgI0VuYWJsZSBTZVNlY3VyaXR5UHJpdmlsZWdlLCBuZWVkZWQgdG8gcXVlcnkgc2VjdXJpdHkgaW5mb3JtYXRpb24gZm9yIGRlc2t0b3AgREFDTAogICAgZnVuY3Rpb24gRW5hYmxlLVByaXZpbGVnZQogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKCldCiAgICAgICAgICAgIFtWYWxpZGF0ZVNldCgiU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UiLCAiU2VBdWRpdFByaXZpbGVnZSIsICJTZUJhY2t1cFByaXZpbGVnZSIsICJTZUNoYW5nZU5vdGlmeVByaXZpbGVnZSIsICJTZUNyZWF0ZUdsb2JhbFByaXZpbGVnZSIsCiAgICAgICAgICAgICAgICAiU2VDcmVhdGVQYWdlZmlsZVByaXZpbGVnZSIsICJTZUNyZWF0ZVBlcm1hbmVudFByaXZpbGVnZSIsICJTZUNyZWF0ZVN5bWJvbGljTGlua1ByaXZpbGVnZSIsICJTZUNyZWF0ZVRva2VuUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZURlYnVnUHJpdmlsZWdlIiwgIlNlRW5hYmxlRGVsZWdhdGlvblByaXZpbGVnZSIsICJTZUltcGVyc29uYXRlUHJpdmlsZWdlIiwgIlNlSW5jcmVhc2VCYXNlUHJpb3JpdHlQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlSW5jcmVhc2VRdW90YVByaXZpbGVnZSIsICJTZUluY3JlYXNlV29ya2luZ1NldFByaXZpbGVnZSIsICJTZUxvYWREcml2ZXJQcml2aWxlZ2UiLCAiU2VMb2NrTWVtb3J5UHJpdmlsZWdlIiwgIlNlTWFjaGluZUFjY291bnRQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlTWFuYWdlVm9sdW1lUHJpdmlsZWdlIiwgIlNlUHJvZmlsZVNpbmdsZVByb2Nlc3NQcml2aWxlZ2UiLCAiU2VSZWxhYmVsUHJpdmlsZWdlIiwgIlNlUmVtb3RlU2h1dGRvd25Qcml2aWxlZ2UiLCAiU2VSZXN0b3JlUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZVNlY3VyaXR5UHJpdmlsZWdlIiwgIlNlU2h1dGRvd25Qcml2aWxlZ2UiLCAiU2VTeW5jQWdlbnRQcml2aWxlZ2UiLCAiU2VTeXN0ZW1FbnZpcm9ubWVudFByaXZpbGVnZSIsICJTZVN5c3RlbVByb2ZpbGVQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlU3lzdGVtdGltZVByaXZpbGVnZSIsICJTZVRha2VPd25lcnNoaXBQcml2aWxlZ2UiLCAiU2VUY2JQcml2aWxlZ2UiLCAiU2VUaW1lWm9uZVByaXZpbGVnZSIsICJTZVRydXN0ZWRDcmVkTWFuQWNjZXNzUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZVVuZG9ja1ByaXZpbGVnZSIsICJTZVVuc29saWNpdGVkSW5wdXRQcml2aWxlZ2UiKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFByaXZpbGVnZQogICAgICAgICkKCiAgICAgICAgW0ludFB0cl0kVGhyZWFkSGFuZGxlID0gJEdldEN1cnJlbnRUaHJlYWQuSW52b2tlKCkKICAgICAgICBpZiAoJFRocmVhZEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGdldCB0aGUgaGFuZGxlIHRvIHRoZSBjdXJyZW50IHRocmVhZCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgW0ludFB0cl0kVGhyZWFkVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgIFtCb29sXSRSZXN1bHQgPSAkT3BlblRocmVhZFRva2VuLkludm9rZSgkVGhyZWFkSGFuZGxlLCAkV2luMzJDb25zdGFudHMuVE9LRU5fUVVFUlkgLWJvciAkV2luMzJDb25zdGFudHMuVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMsICRmYWxzZSwgW1JlZl0kVGhyZWFkVG9rZW4pCiAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKCiAgICAgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkRXJyb3JDb2RlIC1lcSAkV2luMzJDb25zdGFudHMuRVJST1JfTk9fVE9LRU4pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRSZXN1bHQgPSAkSW1wZXJzb25hdGVTZWxmLkludm9rZSgkV2luMzJDb25zdGFudHMuU0VDVVJJVFlfREVMRUdBVElPTikKICAgICAgICAgICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRSZXN1bHQgPSAkT3BlblRocmVhZFRva2VuLkludm9rZSgkVGhyZWFkSGFuZGxlLCAkV2luMzJDb25zdGFudHMuVE9LRU5fUVVFUlkgLWJvciAkV2luMzJDb25zdGFudHMuVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMsICRmYWxzZSwgW1JlZl0kVGhyZWFkVG9rZW4pCiAgICAgICAgICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgKFtDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbl0gJEVycm9yQ29kZSkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkVGhyZWFkSGFuZGxlKSB8IE91dC1OdWxsCiAgICAKICAgICAgICAkTHVpZFNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSUQpCiAgICAgICAgJEx1aWRQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJEx1aWRTaXplKQogICAgICAgICRMdWlkT2JqZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEx1aWRQdHIsIFtUeXBlXSRMVUlEKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkUHRyKQoKICAgICAgICAkUmVzdWx0ID0gJExvb2t1cFByaXZpbGVnZVZhbHVlLkludm9rZSgkbnVsbCwgJFByaXZpbGVnZSwgW1JlZl0gJEx1aWRPYmplY3QpCgogICAgICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICB9CgogICAgICAgIFtVSW50MzJdJEx1aWRBbmRBdHRyaWJ1dGVzU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kTFVJRF9BTkRfQVRUUklCVVRFUykKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJEx1aWRBbmRBdHRyaWJ1dGVzU2l6ZSkKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTHVpZEFuZEF0dHJpYnV0ZXNQdHIsIFtUeXBlXSRMVUlEX0FORF9BVFRSSUJVVEVTKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkQW5kQXR0cmlidXRlc1B0cikKCiAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVzLkx1aWQgPSAkTHVpZE9iamVjdAogICAgICAgICRMdWlkQW5kQXR0cmlidXRlcy5BdHRyaWJ1dGVzID0gJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVECgogICAgICAgIFtVSW50MzJdJFRva2VuUHJpdlNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgJFRva2VuUHJpdmlsZWdlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5Qcml2U2l6ZSkKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc1B0ciwgW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFRva2VuUHJpdmlsZWdlc1B0cikKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzLlByaXZpbGVnZUNvdW50ID0gMQogICAgICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcyA9ICRMdWlkQW5kQXR0cmlidXRlcwoKICAgICAgICAkR2xvYmFsOlRva2VuUHJpdiA9ICRUb2tlblByaXZpbGVnZXMKCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQXR0ZW1wdGluZyB0byBlbmFibGUgcHJpdmlsZWdlOiAkUHJpdmlsZWdlIgogICAgICAgICRSZXN1bHQgPSAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzLkludm9rZSgkVGhyZWFkVG9rZW4sICRmYWxzZSwgW1JlZl0gJFRva2VuUHJpdmlsZWdlcywgJFRva2VuUHJpdlNpemUsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybykKICAgICAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCiAgICAgICAgfQoKICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRUaHJlYWRUb2tlbikgfCBPdXQtTnVsbAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkVuYWJsZWQgcHJpdmlsZWdlOiAkUHJpdmlsZWdlIgogICAgfQoKCiAgICAjQ2hhbmdlIHRoZSBBQ0wgb2YgdGhlIFdpbmRvd1N0YXRpb24gYW5kIERlc2t0b3AKICAgIGZ1bmN0aW9uIFNldC1EZXNrdG9wQUNMcwogICAgewogICAgICAgIEVuYWJsZS1Qcml2aWxlZ2UgLVByaXZpbGVnZSBTZVNlY3VyaXR5UHJpdmlsZWdlCgogICAgICAgICNDaGFuZ2UgdGhlIHByaXZpbGVnZSBmb3IgdGhlIGN1cnJlbnQgd2luZG93IHN0YXRpb24gdG8gYWxsb3cgZnVsbCBwcml2aWxlZ2UgZm9yIGFsbCB1c2VycwogICAgICAgICRXaW5kb3dTdGF0aW9uU3RyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCJXaW5TdGEwIikKICAgICAgICAkaFdpbnN0YSA9ICRPcGVuV2luZG93U3RhdGlvblcuSW52b2tlKCRXaW5kb3dTdGF0aW9uU3RyLCAkZmFsc2UsICRXaW4zMkNvbnN0YW50cy5BQ0NFU1NfU1lTVEVNX1NFQ1VSSVRZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlJFQURfQ09OVFJPTCAtYm9yICRXaW4zMkNvbnN0YW50cy5XUklURV9EQUMpCgogICAgICAgIGlmICgkaFdpbnN0YSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICB9CgogICAgICAgIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lIC1oT2JqZWN0ICRoV2luc3RhCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkaFdpbnN0YSkgfCBPdXQtTnVsbAoKICAgICAgICAjQ2hhbmdlIHRoZSBwcml2aWxlZ2UgZm9yIHRoZSBjdXJyZW50IGRlc2t0b3AgdG8gYWxsb3cgZnVsbCBwcml2aWxlZ2UgZm9yIGFsbCB1c2VycwogICAgICAgICRoRGVza3RvcCA9ICRPcGVuRGVza3RvcEEuSW52b2tlKCJkZWZhdWx0IiwgMCwgJGZhbHNlLCAkV2luMzJDb25zdGFudHMuREVTS1RPUF9HRU5FUklDX0FMTCAtYm9yICRXaW4zMkNvbnN0YW50cy5XUklURV9EQUMpCiAgICAgICAgaWYgKCRoRGVza3RvcCAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICB9CgogICAgICAgIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lIC1oT2JqZWN0ICRoRGVza3RvcAogICAgICAgICRDbG9zZUhhbmRsZS5JbnZva2UoJGhEZXNrdG9wKSB8IE91dC1OdWxsCiAgICB9CgoKICAgIGZ1bmN0aW9uIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtJbnRQdHJdJGhPYmplY3QKICAgICAgICAgICAgKQoKICAgICAgICBbSW50UHRyXSRwcFNpZE93bmVyID0gW0ludFB0cl06Olplcm8KICAgICAgICBbSW50UHRyXSRwcHNpZEdyb3VwID0gW0ludFB0cl06Olplcm8KICAgICAgICBbSW50UHRyXSRwcERhY2wgPSBbSW50UHRyXTo6WmVybwogICAgICAgIFtJbnRQdHJdJHBwU2FjbCA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgW0ludFB0cl0kcHBTZWN1cml0eURlc2NyaXB0b3IgPSBbSW50UHRyXTo6WmVybwogICAgICAgICMweDcgaXMgd2luZG93IHN0YXRpb24sIGNoYW5nZSBmb3Igb3RoZXIgdHlwZXMKICAgICAgICAkcmV0VmFsID0gJEdldFNlY3VyaXR5SW5mby5JbnZva2UoJGhPYmplY3QsIDB4NywgJFdpbjMyQ29uc3RhbnRzLkRBQ0xfU0VDVVJJVFlfSU5GT1JNQVRJT04sIFtSZWZdJHBwU2lkT3duZXIsIFtSZWZdJHBwU2lkR3JvdXAsIFtSZWZdJHBwRGFjbCwgW1JlZl0kcHBTYWNsLCBbUmVmXSRwcFNlY3VyaXR5RGVzY3JpcHRvcikKICAgICAgICBpZiAoJHJldFZhbCAtbmUgMCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJVbmFibGUgdG8gY2FsbCBHZXRTZWN1cml0eUluZm8uIEVycm9yQ29kZTogJHJldFZhbCIKICAgICAgICB9CgogICAgICAgIGlmICgkcHBEYWNsIC1uZSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICRBY2xPYmogPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkcHBEYWNsLCBbVHlwZV0kQUNMKQoKICAgICAgICAgICAgI0FkZCBhbGwgdXNlcnMgdG8gYWNsCiAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMjAwMAogICAgICAgICAgICAkcEFsbFVzZXJzU2lkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRSZWFsU2l6ZSkKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkQ3JlYXRlV2VsbEtub3duU2lkLkludm9rZSgxLCBbSW50UHRyXTo6WmVybywgJHBBbGxVc2Vyc1NpZCwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgI0ZvciB1c2VyICJFdmVyeW9uZSIKICAgICAgICAgICAgJFRydXN0ZWVTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRUUlVTVEVFKQogICAgICAgICAgICAkVHJ1c3RlZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVHJ1c3RlZVNpemUpCiAgICAgICAgICAgICRUcnVzdGVlT2JqID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRydXN0ZWVQdHIsIFtUeXBlXSRUUlVTVEVFKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVHJ1c3RlZVB0cikKICAgICAgICAgICAgJFRydXN0ZWVPYmoucE11bHRpcGxlVHJ1c3RlZSA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRUcnVzdGVlT2JqLk11bHRpcGxlVHJ1c3RlZU9wZXJhdGlvbiA9IDAKICAgICAgICAgICAgJFRydXN0ZWVPYmouVHJ1c3RlZUZvcm0gPSAkV2luMzJDb25zdGFudHMuVFJVU1RFRV9JU19TSUQKICAgICAgICAgICAgJFRydXN0ZWVPYmouVHJ1c3RlZVR5cGUgPSAkV2luMzJDb25zdGFudHMuVFJVU1RFRV9JU19XRUxMX0tOT1dOX0dST1VQCiAgICAgICAgICAgICRUcnVzdGVlT2JqLnB0c3RyTmFtZSA9ICRwQWxsVXNlcnNTaWQKCiAgICAgICAgICAgICNHaXZlIGZ1bGwgcGVybWlzc2lvbgogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3NTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRFWFBMSUNJVF9BQ0NFU1MpCiAgICAgICAgICAgICRFeHBsaWNpdEFjY2Vzc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkRXhwbGljaXRBY2Nlc3NTaXplKQogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkRXhwbGljaXRBY2Nlc3NQdHIsIFtUeXBlXSRFWFBMSUNJVF9BQ0NFU1MpCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRFeHBsaWNpdEFjY2Vzc1B0cikKICAgICAgICAgICAgJEV4cGxpY2l0QWNjZXNzLmdyZkFjY2Vzc1Blcm1pc3Npb25zID0gMHhmMDNmZgogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MuZ3JmQWNjZXNzTW9kZSA9ICRXaW4zMmNvbnN0YW50cy5HUkFOVF9BQ0NFU1MKICAgICAgICAgICAgJEV4cGxpY2l0QWNjZXNzLmdyZkluaGVyaXRhbmNlID0gJFdpbjMyQ29uc3RhbnRzLk9CSkVDVF9JTkhFUklUX0FDRQogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MuVHJ1c3RlZSA9ICRUcnVzdGVlT2JqCgogICAgICAgICAgICBbSW50UHRyXSROZXdEYWNsID0gW0ludFB0cl06Olplcm8KCiAgICAgICAgICAgICRSZXRWYWwgPSAkU2V0RW50cmllc0luQWNsVy5JbnZva2UoMSwgW1JlZl0kRXhwbGljaXRBY2Nlc3MsICRwcERhY2wsIFtSZWZdJE5ld0RhY2wpCiAgICAgICAgICAgIGlmICgkUmV0VmFsIC1uZSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3IgY2FsbGluZyBTZXRFbnRyaWVzSW5BY2xXOiAkUmV0VmFsIgogICAgICAgICAgICB9CgogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkcEFsbFVzZXJzU2lkKQoKICAgICAgICAgICAgaWYgKCROZXdEYWNsIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgIk5ldyBEQUNMIGlzIG51bGwiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMweDcgaXMgd2luZG93IHN0YXRpb24sIGNoYW5nZSBmb3Igb3RoZXIgdHlwZXMKICAgICAgICAgICAgJFJldFZhbCA9ICRTZXRTZWN1cml0eUluZm8uSW52b2tlKCRoT2JqZWN0LCAweDcsICRXaW4zMkNvbnN0YW50cy5EQUNMX1NFQ1VSSVRZX0lORk9STUFUSU9OLCAkcHBTaWRPd25lciwgJHBwU2lkR3JvdXAsICROZXdEYWNsLCAkcHBTYWNsKQogICAgICAgICAgICBpZiAoJFJldFZhbCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIlNldFNlY3VyaXR5SW5mbyBmYWlsZWQuIFJldHVybiB2YWx1ZTogJFJldFZhbCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJExvY2FsRnJlZS5JbnZva2UoJHBwU2VjdXJpdHlEZXNjcmlwdG9yKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgfQoKCiAgICAjR2V0IHRoZSBwcmltYXJ5IHRva2VuIGZvciB0aGUgc3BlY2lmaWVkIHByb2Nlc3NJZAogICAgZnVuY3Rpb24gR2V0LVByaW1hcnlUb2tlbgogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgIFtVSW50MzJdCiAgICAgICAgICAgICRQcm9jZXNzSWQsCgogICAgICAgICAgICAjT3BlbiB0aGUgdG9rZW4gd2l0aCBhbGwgcHJpdmlsZWdlcy4gUmVxdWlyZXMgU1lTVEVNIGJlY2F1c2Ugc29tZSBvZiB0aGUgcHJpdmlsZWdlcyBhcmUgcmVzdHJpY3RlZCB0byBTWVNURU0uCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoKV0KICAgICAgICAgICAgW1N3aXRjaF0KICAgICAgICAgICAgJEZ1bGxQcml2cwogICAgICAgICkKCiAgICAgICAgaWYgKCRGdWxsUHJpdnMpCiAgICAgICAgewogICAgICAgICAgICAkVG9rZW5Qcml2cyA9ICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BTExfQUNDRVNTCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRUb2tlblByaXZzID0gJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0FTU0lHTl9QUklNQVJZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0RVUExJQ0FURSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9JTVBFUlNPTkFURSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAKICAgICAgICB9CgogICAgICAgICRSZXR1cm5TdHJ1Y3QgPSBOZXctT2JqZWN0IFBTT2JqZWN0CgogICAgICAgICRoUHJvY2VzcyA9ICRPcGVuUHJvY2Vzcy5JbnZva2UoJFdpbjMyQ29uc3RhbnRzLlBST0NFU1NfUVVFUllfSU5GT1JNQVRJT04sICR0cnVlLCBbVUludDMyXSRQcm9jZXNzSWQpCiAgICAgICAgJFJldHVyblN0cnVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGhQcm9jZXNzIC1WYWx1ZSAkaFByb2Nlc3MKICAgICAgICBpZiAoJGhQcm9jZXNzIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICNJZiBhIHByb2Nlc3MgaXMgYSBwcm90ZWN0ZWQgcHJvY2VzcyBpdCBjYW5ub3QgYmUgZW51bWVyYXRlZC4gVGhpcyBjYWxsIHNob3VsZCBvbmx5IGZhaWwgZm9yIHByb3RlY3RlZCBwcm9jZXNzZXMuCiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkZhaWxlZCB0byBvcGVuIHByb2Nlc3MgaGFuZGxlIGZvciBQcm9jZXNzSWQ6ICRQcm9jZXNzSWQuIFByb2Nlc3NOYW1lICQoKEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lkKS5OYW1lKS4gRXJyb3IgY29kZTogJEVycm9yQ29kZSAuIFRoaXMgaXMgbGlrZWx5IGJlY2F1c2UgdGhpcyBpcyBhIHByb3RlY3RlZCBwcm9jZXNzLiIKICAgICAgICAgICAgcmV0dXJuICRudWxsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJGhQcm9jVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAkU3VjY2VzcyA9ICRPcGVuUHJvY2Vzc1Rva2VuLkludm9rZSgkaFByb2Nlc3MsICRUb2tlblByaXZzLCBbUmVmXSRoUHJvY1Rva2VuKQoKICAgICAgICAgICAgI0Nsb3NlIHRoZSBoYW5kbGUgdG8gaFByb2Nlc3MgKHRoZSBwcm9jZXNzIGhhbmRsZSkKICAgICAgICAgICAgaWYgKC1ub3QgJENsb3NlSGFuZGxlLkludm9rZSgkaFByb2Nlc3MpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIGNsb3NlIHByb2Nlc3MgaGFuZGxlLCB0aGlzIGlzIHVuZXhwZWN0ZWQuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgICAgICAkaFByb2Nlc3MgPSBbSW50UHRyXTo6WmVybwoKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UgLW9yICRoUHJvY1Rva2VuIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBnZXQgcHJvY2Vzc2VzIHByaW1hcnkgdG9rZW4uIFByb2Nlc3NJZDogJFByb2Nlc3NJZC4gUHJvY2Vzc05hbWUgJCgoR2V0LVByb2Nlc3MgLUlkICRQcm9jZXNzSWQpLk5hbWUpLiBFcnJvcjogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgIHJldHVybiAkbnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFJldHVyblN0cnVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGhQcm9jVG9rZW4gLVZhbHVlICRoUHJvY1Rva2VuCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkUmV0dXJuU3RydWN0CiAgICB9CgoKICAgIGZ1bmN0aW9uIEdldC1UaHJlYWRUb2tlbgogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgIFtVSW50MzJdCiAgICAgICAgICAgICRUaHJlYWRJZAogICAgICAgICkKCiAgICAgICAgJFRva2VuUHJpdnMgPSAkV2luMzJDb25zdGFudHMuVE9LRU5fQUxMX0FDQ0VTUwoKICAgICAgICAkUmV0U3RydWN0ID0gTmV3LU9iamVjdCBQU09iamVjdAogICAgICAgIFtJbnRQdHJdJGhUaHJlYWRUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCgogICAgICAgICRoVGhyZWFkID0gJE9wZW5UaHJlYWQuSW52b2tlKCRXaW4zMkNvbnN0YW50cy5USFJFQURfQUxMX0FDQ0VTUywgJGZhbHNlLCAkVGhyZWFkSWQpCiAgICAgICAgaWYgKCRoVGhyZWFkIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIGlmICgkRXJyb3JDb2RlIC1uZSAkV2luMzJDb25zdGFudHMuRVJST1JfSU5WQUxJRF9QQVJBTUVURVIpICNUaGUgdGhyZWFkIHByb2JhYmx5IG5vIGxvbmdlciBleGlzdHMKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIG9wZW4gdGhyZWFkIGhhbmRsZSBmb3IgVGhyZWFkSWQ6ICRUaHJlYWRJZC4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRoVGhyZWFkLCAkVG9rZW5Qcml2cywgJGZhbHNlLCBbUmVmXSRoVGhyZWFkVG9rZW4pCiAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgaWYgKCgkRXJyb3JDb2RlIC1uZSAkV2luMzJDb25zdGFudHMuRVJST1JfTk9fVE9LRU4pIC1hbmQgICNUaGlzIGVycm9yIGlzIHJldHVybmVkIHdoZW4gdGhlIHRocmVhZCBpc24ndCBpbXBlcnNvbmF0ZWQKICAgICAgICAgICAgICAgICAoJEVycm9yQ29kZSAtbmUgJFdpbjMyQ29uc3RhbnRzLkVSUk9SX0lOVkFMSURfUEFSQU1FVEVSKSkgI1Byb2JhYmx5IG1lYW5zIHRoZSB0aHJlYWQgd2FzIGNsb3NlZAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBjYWxsIE9wZW5UaHJlYWRUb2tlbiBmb3IgVGhyZWFkSWQ6ICRUaHJlYWRJZC4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlN1Y2Nlc3NmdWxseSBxdWVyaWVkIHRocmVhZCB0b2tlbiIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgI0Nsb3NlIHRoZSBoYW5kbGUgdG8gaFRocmVhZCAodGhlIHRocmVhZCBoYW5kbGUpCiAgICAgICAgICAgIGlmICgtbm90ICRDbG9zZUhhbmRsZS5JbnZva2UoJGhUaHJlYWQpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIGNsb3NlIHRocmVhZCBoYW5kbGUsIHRoaXMgaXMgdW5leHBlY3RlZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICB9CiAgICAgICAgICAgICRoVGhyZWFkID0gW0ludFB0cl06Olplcm8KICAgICAgICB9CgogICAgICAgICRSZXRTdHJ1Y3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBoVGhyZWFkVG9rZW4gLVZhbHVlICRoVGhyZWFkVG9rZW4KICAgICAgICByZXR1cm4gJFJldFN0cnVjdAogICAgfQoKCiAgICAjR2V0cyBpbXBvcnRhbnQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuIHN1Y2ggYXMgdGhlIGxvZ29uIHR5cGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBsb2dvbgogICAgZnVuY3Rpb24gR2V0LVRva2VuSW5mb3JtYXRpb24KICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuCiAgICAgICAgKQoKICAgICAgICAkUmV0dXJuT2JqID0gJG51bGwKCiAgICAgICAgJFRva2VuU3RhdHNTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRUT0tFTl9TVEFUSVNUSUNTKQogICAgICAgIFtJbnRQdHJdJFRva2VuU3RhdHNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuU3RhdHNTaXplKQogICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5TdGF0aXN0aWNzLCAkVG9rZW5TdGF0c1B0ciwgJFRva2VuU3RhdHNTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkdldFRva2VuSW5mb3JtYXRpb24gZmFpbGVkLiBFcnJvciBjb2RlOiAkRXJyb3JDb2RlIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkVG9rZW5TdGF0cyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRUb2tlblN0YXRzUHRyLCBbVHlwZV0kVE9LRU5fU1RBVElTVElDUykKCiAgICAgICAgICAgICNRdWVyeSBMU0EgdG8gZGV0ZXJtaW5lIHdoYXQgdGhlIGxvZ29udHlwZSBvZiB0aGUgc2Vzc2lvbiBpcyB0aGF0IHRoZSB0b2tlbiBjb3Jyb3Nwb25kcyB0bywgYXMgd2VsbCBhcyB0aGUgdXNlcm5hbWUvZG9tYWluIG9mIHRoZSBsb2dvbgogICAgICAgICAgICAkTHVpZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSUQpKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkVG9rZW5TdGF0cy5BdXRoZW50aWNhdGlvbklkLCAkTHVpZFB0ciwgJGZhbHNlKQoKICAgICAgICAgICAgW0ludFB0cl0kTG9nb25TZXNzaW9uRGF0YVB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRSZXR1cm5WYWwgPSAkTHNhR2V0TG9nb25TZXNzaW9uRGF0YS5JbnZva2UoJEx1aWRQdHIsIFtSZWZdJExvZ29uU2Vzc2lvbkRhdGFQdHIpCiAgICAgICAgICAgIGlmICgkUmV0dXJuVmFsIC1uZSAwIC1hbmQgJExvZ29uU2Vzc2lvbkRhdGFQdHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDYWxsIHRvIExzYUdldExvZ29uU2Vzc2lvbkRhdGEgZmFpbGVkLiBFcnJvciBjb2RlOiAkUmV0dXJuVmFsLiBMb2dvblNlc3Npb25EYXRhUHRyID0gJExvZ29uU2Vzc2lvbkRhdGFQdHIiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkTG9nb25TZXNzaW9uRGF0YSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMb2dvblNlc3Npb25EYXRhUHRyLCBbVHlwZV0kU0VDVVJJVFlfTE9HT05fU0VTU0lPTl9EQVRBKQogICAgICAgICAgICAgICAgaWYgKCRMb2dvblNlc3Npb25EYXRhLlVzZXJuYW1lLkJ1ZmZlciAtbmUgW0ludFB0cl06Olplcm8gLWFuZCAKICAgICAgICAgICAgICAgICAgICAkTG9nb25TZXNzaW9uRGF0YS5Mb2dpbkRvbWFpbi5CdWZmZXIgLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICNHZXQgdGhlIHVzZXJuYW1lIGFuZCBkb21haW5uYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgdG9rZW4KICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkTG9nb25TZXNzaW9uRGF0YS5Vc2VybmFtZS5CdWZmZXIsICRMb2dvblNlc3Npb25EYXRhLlVzZXJuYW1lLkxlbmd0aC8yKQogICAgICAgICAgICAgICAgICAgICREb21haW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkTG9nb25TZXNzaW9uRGF0YS5Mb2dpbkRvbWFpbi5CdWZmZXIsICRMb2dvblNlc3Npb25EYXRhLkxvZ2luRG9tYWluLkxlbmd0aC8yKQoKICAgICAgICAgICAgICAgICAgICAjSWYgVXNlck5hbWUgaXMgZm9yIHRoZSBjb21wdXRlciBhY2NvdW50LCBmaWd1cmUgb3V0IHdoYXQgYWNjb3VudCBpdCBhY3R1YWxseSBpcyAoU1lTVEVNLCBORVRXT1JLIFNFUlZJQ0UpCiAgICAgICAgICAgICAgICAgICAgI09ubHkgZG8gdGhpcyBmb3IgdGhlIGNvbXB1dGVyIGFjY291bnQgYmVjYXVzZSBvdGhlciBhY2NvdW50cyByZXR1cm4gY29ycmVjdGx5LiBBbHNvLCBkb2luZyB0aGlzIGZvciBhIGRvbWFpbiBhY2NvdW50IAogICAgICAgICAgICAgICAgICAgICNyZXN1bHRzIGluIHF1ZXJ5aW5nIHRoZSBkb21haW4gY29udHJvbGxlciB3aGljaCBpcyB1bndhbnRlZC4KICAgICAgICAgICAgICAgICAgICBpZiAoJFVzZXJuYW1lIC1pZXEgIiQoJGVudjpDT01QVVRFUk5BTUUpYCQiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kU2l6ZSA9IDEwMAogICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSROdW1Vc2VybmFtZUNoYXIgPSAkU2l6ZSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kTnVtRG9tYWluQ2hhciA9ICRTaXplIC8gMgogICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRTaWROYW1lVXNlID0gMAogICAgICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWVCdWZmZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICREb21haW5CdWZmZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJExvb2t1cEFjY291bnRTaWRXLkludm9rZShbSW50UHRyXTo6WmVybywgJExvZ29uU2Vzc2lvbkRhdGEuU2lkLCAkVXNlcm5hbWVCdWZmZXIsIFtSZWZdJE51bVVzZXJuYW1lQ2hhciwgJERvbWFpbkJ1ZmZlciwgW1JlZl0kTnVtRG9tYWluQ2hhciwgW1JlZl0kU2lkTmFtZVVzZSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFVzZXJuYW1lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdVbmkoJFVzZXJuYW1lQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJERvbWFpbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nVW5pKCREb21haW5CdWZmZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRXJyb3IgY2FsbGluZyBMb29rdXBBY2NvdW50U2lkVy4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFVzZXJuYW1lQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWVCdWZmZXIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkRG9tYWluQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAkRG9tYWluQnVmZmVyID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogPSBOZXctT2JqZWN0IFBTT2JqZWN0CiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIERvbWFpbiAtVmFsdWUgJERvbWFpbgogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBVc2VybmFtZSAtVmFsdWUgJFVzZXJuYW1lICAgIAogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBoVG9rZW4gLVZhbHVlICRoVG9rZW4KICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTG9nb25UeXBlIC1WYWx1ZSAkTG9nb25TZXNzaW9uRGF0YS5Mb2dvblR5cGUKCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSBhZGRpdGlvbmFsIGluZm8gYWJvdXQgdGhlIHRva2VuIHN1Y2ggYXMgaWYgaXQgaXMgZWxldmF0ZWQKICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSXNFbGV2YXRlZCAtVmFsdWUgJGZhbHNlCgogICAgICAgICAgICAgICAgICAgICRUb2tlbkVsZXZhdGlvblNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFRPS0VOX0VMRVZBVElPTikKICAgICAgICAgICAgICAgICAgICAkVG9rZW5FbGV2YXRpb25QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuRWxldmF0aW9uU2l6ZSkKICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRSZWFsU2l6ZSA9IDAKICAgICAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRHZXRUb2tlbkluZm9ybWF0aW9uLkludm9rZSgkaFRva2VuLCAkVE9LRU5fSU5GT1JNQVRJT05fQ0xBU1M6OlRva2VuRWxldmF0aW9uLCAkVG9rZW5FbGV2YXRpb25QdHIsICRUb2tlbkVsZXZhdGlvblNpemUsIFtSZWZdJFJlYWxTaXplKQogICAgICAgICAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiR2V0VG9rZW5JbmZvcm1hdGlvbiBmYWlsZWQgdG8gcmV0cmlldmUgVG9rZW5FbGV2YXRpb24gc3RhdHVzLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkVG9rZW5FbGV2YXRpb24gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5lbGV2YXRpb25QdHIsIFtUeXBlXSRUT0tFTl9FTEVWQVRJT04pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkVG9rZW5FbGV2YXRpb24uVG9rZW5Jc0VsZXZhdGVkIC1uZSAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqLklzRWxldmF0ZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlbkVsZXZhdGlvblB0cikKCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSB0aGUgdG9rZW4gdHlwZSB0byBkZXRlcm1pbmUgaWYgdGhlIHRva2VuIGlzIGEgcHJpbWFyeSBvciBpbXBlcnNvbmF0aW9uIHRva2VuCiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRva2VuVHlwZSAtVmFsdWUgIlVuYWJsZVRvUmV0cmlldmUiCgogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFRva2VuVHlwZVNpemUgPSA0CiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kVG9rZW5UeXBlUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb2tlblR5cGVTaXplKQogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5UeXBlLCAkVG9rZW5UeXBlUHRyLCAkVG9rZW5UeXBlU2l6ZSwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbkltcGVyc29uYXRpb25MZXZlbCBzdGF0dXMuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5UeXBlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuVHlwZVB0ciwgW1R5cGVdW1VJbnQzMl0pCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCgkVG9rZW5UeXBlKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxIHskUmV0dXJuT2JqLlRva2VuVHlwZSA9ICJQcmltYXJ5In0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgeyRSZXR1cm5PYmouVG9rZW5UeXBlID0gIkltcGVyc29uYXRpb24ifQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlblR5cGVQdHIpCgoKICAgICAgICAgICAgICAgICAgICAjUXVlcnkgdGhlIGltcGVyc29uYXRpb24gbGV2ZWwgaWYgdGhlIHRva2VuIGlzIGFuIEltcGVyc29uYXRpb24gdG9rZW4KICAgICAgICAgICAgICAgICAgICBpZiAoJFJldHVybk9iai5Ub2tlblR5cGUgLWllcSAiSW1wZXJzb25hdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSW1wZXJzb25hdGlvbkxldmVsIC1WYWx1ZSAiVW5hYmxlVG9SZXRyaWV2ZSIKCiAgICAgICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJEltcGVyc29uYXRpb25MZXZlbFNpemUgPSA0CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEltcGVyc29uYXRpb25MZXZlbFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkSW1wZXJzb25hdGlvbkxldmVsU2l6ZSkgI3NpemVvZiB1aW50MzIKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kUmVhbFNpemUgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5JbXBlcnNvbmF0aW9uTGV2ZWwsICRJbXBlcnNvbmF0aW9uTGV2ZWxQdHIsICRJbXBlcnNvbmF0aW9uTGV2ZWxTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbkltcGVyc29uYXRpb25MZXZlbCBzdGF0dXMuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJEltcGVyc29uYXRpb25MZXZlbCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRJbXBlcnNvbmF0aW9uTGV2ZWxQdHIsIFtUeXBlXVtVSW50MzJdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgkSW1wZXJzb25hdGlvbkxldmVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eUFub255bW91cyIgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eUlkZW50aWZpY2F0aW9uIiB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiB7ICRSZXR1cm5PYmouSW1wZXJzb25hdGlvbkxldmVsID0gIlNlY3VyaXR5SW1wZXJzb25hdGlvbiIgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eURlbGVnYXRpb24iIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkSW1wZXJzb25hdGlvbkxldmVsUHRyKQogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSB0aGUgdG9rZW4gc2Vzc2lvbmlkCiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNlc3Npb25JRCAtVmFsdWUgIlVua25vd24iCgogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFRva2VuU2Vzc2lvbklkU2l6ZSA9IDQKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRUb2tlblNlc3Npb25JZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5TZXNzaW9uSWRTaXplKQogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5TZXNzaW9uSWQsICRUb2tlblNlc3Npb25JZFB0ciwgJFRva2VuU2Vzc2lvbklkU2l6ZSwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbiBTZXNzaW9uSWQuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5TZXNzaW9uSWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5TZXNzaW9uSWRQdHIsIFtUeXBlXVtVSW50MzJdKQogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqLlNlc3Npb25JRCA9ICRUb2tlblNlc3Npb25JZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5TZXNzaW9uSWRQdHIpCgoKICAgICAgICAgICAgICAgICAgICAjUXVlcnkgdGhlIHRva2VuIHByaXZpbGVnZXMKICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUHJpdmlsZWdlc0VuYWJsZWQgLVZhbHVlIEAoKQogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQcml2aWxlZ2VzQXZhaWxhYmxlIC1WYWx1ZSBAKCkKCiAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5Qcml2aWxlZ2VzU2l6ZSA9IDEwMDAKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRUb2tlblByaXZpbGVnZXNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuUHJpdmlsZWdlc1NpemUpCiAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kUmVhbFNpemUgPSAwCiAgICAgICAgICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkR2V0VG9rZW5JbmZvcm1hdGlvbi5JbnZva2UoJGhUb2tlbiwgJFRPS0VOX0lORk9STUFUSU9OX0NMQVNTOjpUb2tlblByaXZpbGVnZXMsICRUb2tlblByaXZpbGVnZXNQdHIsICRUb2tlblByaXZpbGVnZXNTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkdldFRva2VuSW5mb3JtYXRpb24gZmFpbGVkIHRvIHJldHJpZXZlIFRva2VuIFNlc3Npb25JZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc1B0ciwgW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjTG9vcCB0aHJvdWdoIGVhY2ggcHJpdmlsZWdlCiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFByaXZpbGVnZXNCYXNlUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFRva2VuUHJpdmlsZWdlc1B0ciAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6T2Zmc2V0T2YoW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMsICJQcml2aWxlZ2VzIikpKQogICAgICAgICAgICAgICAgICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZVNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSURfQU5EX0FUVFJJQlVURVMpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VDb3VudDsgJGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJpdmlsZWdlc0Jhc2VQdHIgKCRMdWlkQW5kQXR0cmlidXRlU2l6ZSAqICRpKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMdWlkQW5kQXR0cmlidXRlUHRyLCBbVHlwZV0kTFVJRF9BTkRfQVRUUklCVVRFUykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjTG9va3VwIHByaXZpbGVnZSBuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRQcml2aWxlZ2VOYW1lU2l6ZSA9IDYwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJpdmlsZWdlTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkUHJpdmlsZWdlTmFtZVNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUEx1aWQgPSAkTHVpZEFuZEF0dHJpYnV0ZVB0ciAjVGhlIEx1aWQgc3RydWN0dXJlIGlzIHRoZSBmaXJzdCBvYmplY3QgaW4gdGhlIEx1aWRBbmRBdHRyaWJ1dGVzIHN0cnVjdHVyZSwgc28gYSBwdHIgdG8gTHVpZEFuZEF0dHJpYnV0ZXMgYWxzbyBwb2ludHMgdG8gTHVpZAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJExvb2t1cFByaXZpbGVnZU5hbWVXLkludm9rZShbSW50UHRyXTo6WmVybywgJFBMdWlkLCAkUHJpdmlsZWdlTmFtZVB0ciwgW1JlZl0kUHJpdmlsZWdlTmFtZVNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkNhbGwgdG8gTG9va3VwUHJpdmlsZWdlTmFtZVcgZmFpbGVkLiBFcnJvciBjb2RlOiAkRXJyb3JDb2RlLiBSZWFsU2l6ZTogJFByaXZpbGVnZU5hbWVTaXplIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByaXZpbGVnZU5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkUHJpdmlsZWdlTmFtZVB0cikKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjR2V0IHRoZSBwcml2aWxlZ2UgYXR0cmlidXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByaXZpbGVnZVN0YXR1cyA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRW5hYmxlZCA9ICRmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkTHVpZEFuZEF0dHJpYnV0ZS5BdHRyaWJ1dGVzIC1lcSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFbmFibGVkID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCRMdWlkQW5kQXR0cmlidXRlLkF0dHJpYnV0ZXMgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVEX0JZX0RFRkFVTFQpIC1lcSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRURfQllfREVGQVVMVCkgI2VuYWJsZWQgYnkgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFbmFibGVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJEx1aWRBbmRBdHRyaWJ1dGUuQXR0cmlidXRlcyAtYmFuZCAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQpIC1lcSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQpICNlbmFibGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEVuYWJsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgkTHVpZEFuZEF0dHJpYnV0ZS5BdHRyaWJ1dGVzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5TRV9QUklWSUxFR0VfUkVNT1ZFRCkgLWVxICRXaW4zMkNvbnN0YW50cy5TRV9QUklWSUxFR0VfUkVNT1ZFRCkgI1NFX1BSSVZJTEVHRV9SRU1PVkVELiBUaGlzIHNob3VsZCBuZXZlciBleGlzdC4gV3JpdGUgYSB3YXJuaW5nIGlmIGl0IGlzIGZvdW5kIHNvIEkgY2FuIGludmVzdGlnYXRlIHdoeS9ob3cgaXQgd2FzIGZvdW5kLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuZXhwZWN0ZWQgYmVoYXZpb3I6IEZvdW5kIGEgdG9rZW4gd2l0aCBTRV9QUklWSUxFR0VfUkVNT1ZFRC4gUGxlYXNlIHJlcG9ydCB0aGlzIGFzIGEgYnVnLiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRFbmFibGVkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmouUHJpdmlsZWdlc0VuYWJsZWQgKz0gLCRQcml2aWxlZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iai5Qcml2aWxlZ2VzQXZhaWxhYmxlICs9ICwkUHJpdmlsZWdlTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRQcml2aWxlZ2VOYW1lUHRyKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlblByaXZpbGVnZXNQdHIpCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGwgdG8gTHNhR2V0TG9nb25TZXNzaW9uRGF0YSBzdWNjZWVkZWQuIFRoaXMgU0hPVUxEIGJlIFNZU1RFTSBzaW5jZSB0aGVyZSBpcyBubyBkYXRhLiAkKCRMb2dvblNlc3Npb25EYXRhLlVzZXJOYW1lLkxlbmd0aCkiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgI0ZyZWUgTG9nb25TZXNzaW9uRGF0YQogICAgICAgICAgICAgICAgJG50c3RhdHVzID0gJExzYUZyZWVSZXR1cm5CdWZmZXIuSW52b2tlKCRMb2dvblNlc3Npb25EYXRhUHRyKQogICAgICAgICAgICAgICAgJExvZ29uU2Vzc2lvbkRhdGFQdHIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgaWYgKCRudHN0YXR1cyAtbmUgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDYWxsIHRvIExzYUZyZWVSZXR1cm5CdWZmZXIgZmFpbGVkLiBFcnJvciBjb2RlOiAkbnRzdGF0dXMiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkUHRyKQogICAgICAgICAgICAkTHVpZFB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgfQoKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5TdGF0c1B0cikKICAgICAgICAkVG9rZW5TdGF0c1B0ciA9IFtJbnRQdHJdOjpaZXJvCgogICAgICAgIHJldHVybiAkUmV0dXJuT2JqCiAgICB9CgoKICAgICNUYWtlcyBhbiBhcnJheSBvZiBUb2tlbk9iamVjdHMgYnVpbHQgYnkgdGhlIHNjcmlwdCBhbmQgcmV0dXJucyB0aGUgdW5pcXVlIG9uZXMKICAgIGZ1bmN0aW9uIEdldC1VbmlxdWVUb2tlbnMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbT2JqZWN0W11dCiAgICAgICAgICAgICRBbGxUb2tlbnMKICAgICAgICApCgogICAgICAgICRUb2tlbkJ5VXNlciA9IEB7fQogICAgICAgICRUb2tlbkJ5RW5hYmxlZFByaXYgPSBAe30KICAgICAgICAkVG9rZW5CeUF2YWlsYWJsZVByaXYgPSBAe30KCiAgICAgICAgI0ZpbHRlciB0b2tlbnMgYnkgdXNlcgogICAgICAgIGZvcmVhY2ggKCRUb2tlbiBpbiAkQWxsVG9rZW5zKQogICAgICAgIHsKICAgICAgICAgICAgJEtleSA9ICRUb2tlbi5Eb21haW4gKyAiXCIgKyAkVG9rZW4uVXNlcm5hbWUKICAgICAgICAgICAgaWYgKC1ub3QgJFRva2VuQnlVc2VyLkNvbnRhaW5zS2V5KCRLZXkpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjRmlsdGVyIG91dCBuZXR3b3JrIGxvZ29ucyBhbmQganVuayBXaW5kb3dzIGFjY291bnRzLiBUaGlzIGZpbHRlciBlbGltaW5hdGVzIGFjY291bnRzIHdoaWNoIHdvbid0IGhhdmUgY3JlZHMgYmVjYXVzZQogICAgICAgICAgICAgICAgIyAgICB0aGV5IGFyZSBuZXR3b3JrIGxvZ29ucyAodHlwZSAzKSBvciBsb2dvbnMgZm9yIHdoaWNoIHRoZSBjcmVkcyBkb24ndCBtYXR0ZXIgbGlrZSBMT0NPQUwgU0VSVklDRSwgRFdNLCBldGMuLgogICAgICAgICAgICAgICAgaWYgKCRUb2tlbi5Mb2dvblR5cGUgLW5lIDMgLWFuZAogICAgICAgICAgICAgICAgICAgICRUb2tlbi5Vc2VybmFtZSAtaW5vdG1hdGNoICJeRFdNLVxkKyQiIC1hbmQKICAgICAgICAgICAgICAgICAgICAkVG9rZW4uVXNlcm5hbWUgLWlub3RtYXRjaCAiXkxPQ0FMXHNTRVJWSUNFJCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFRva2VuQnlVc2VyLkFkZCgkS2V5LCAkVG9rZW4pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjSWYgVG9rZW5zIGhhdmUgZXF1YWwgZWxldmF0aW9uIGxldmVscywgY29tcGFyZSB0aGVpciBwcml2aWxlZ2VzLgogICAgICAgICAgICAgICAgaWYoJFRva2VuLklzRWxldmF0ZWQgLWVxICRUb2tlbkJ5VXNlclskS2V5XS5Jc0VsZXZhdGVkKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmICgoJFRva2VuLlByaXZpbGVnZXNFbmFibGVkLkNvdW50ICsgJFRva2VuLlByaXZpbGVnZXNBdmFpbGFibGUuQ291bnQpIC1ndCAoJFRva2VuQnlVc2VyWyRLZXldLlByaXZpbGVnZXNFbmFibGVkLkNvdW50ICsgJFRva2VuQnlVc2VyWyRLZXldLlByaXZpbGVnZXNBdmFpbGFibGUuQ291bnQpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFRva2VuQnlVc2VyWyRLZXldID0gJFRva2VuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgI0lmIHRoZSBuZXcgdG9rZW4gaXMgZWxldmF0ZWQgYW5kIHRoZSBjdXJyZW50IHRva2VuIGlzbid0LCB1c2UgdGhlIG5ldyB0b2tlbgogICAgICAgICAgICAgICAgZWxzZWlmICgoJFRva2VuLklzRWxldmF0ZWQgLWVxICR0cnVlKSAtYW5kICgkVG9rZW5CeVVzZXJbJEtleV0uSXNFbGV2YXRlZCAtZXEgJGZhbHNlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkVG9rZW5CeVVzZXJbJEtleV0gPSAkVG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgI0ZpbHRlciB0b2tlbnMgYnkgcHJpdmlsZWdlCiAgICAgICAgZm9yZWFjaCAoJFRva2VuIGluICRBbGxUb2tlbnMpCiAgICAgICAgewogICAgICAgICAgICAkRnVsbG5hbWUgPSAiJCgkVG9rZW4uRG9tYWluKVwkKCRUb2tlbi5Vc2VybmFtZSkiCgogICAgICAgICAgICAjRmlsdGVyIGN1cnJlbnRseSBlbmFibGVkIHByaXZpbGVnZXMKICAgICAgICAgICAgZm9yZWFjaCAoJFByaXZpbGVnZSBpbiAkVG9rZW4uUHJpdmlsZWdlc0VuYWJsZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkVG9rZW5CeUVuYWJsZWRQcml2LkNvbnRhaW5zS2V5KCRQcml2aWxlZ2UpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCRUb2tlbkJ5RW5hYmxlZFByaXZbJFByaXZpbGVnZV0gLW5vdGNvbnRhaW5zICRGdWxsbmFtZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5RW5hYmxlZFByaXZbJFByaXZpbGVnZV0gKz0gLCRGdWxsbmFtZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkVG9rZW5CeUVuYWJsZWRQcml2LkFkZCgkUHJpdmlsZWdlLCBAKCRGdWxsbmFtZSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICNGaWx0ZXIgY3VycmVudGx5IGF2YWlsYWJsZSAoYnV0IG5vdCBlbmFibGUpIHByaXZpbGVnZXMKICAgICAgICAgICAgZm9yZWFjaCAoJFByaXZpbGVnZSBpbiAkVG9rZW4uUHJpdmlsZWdlc0F2YWlsYWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRUb2tlbkJ5QXZhaWxhYmxlUHJpdi5Db250YWluc0tleSgkUHJpdmlsZWdlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigkVG9rZW5CeUF2YWlsYWJsZVByaXZbJFByaXZpbGVnZV0gLW5vdGNvbnRhaW5zICRGdWxsbmFtZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5QXZhaWxhYmxlUHJpdlskUHJpdmlsZWdlXSArPSAsJEZ1bGxuYW1lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5QXZhaWxhYmxlUHJpdi5BZGQoJFByaXZpbGVnZSwgQCgkRnVsbG5hbWUpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkUmV0dXJuRGljdCA9IEB7CiAgICAgICAgICAgIFRva2VuQnlVc2VyID0gJFRva2VuQnlVc2VyCiAgICAgICAgICAgIFRva2VuQnlFbmFibGVkUHJpdiA9ICRUb2tlbkJ5RW5hYmxlZFByaXYKICAgICAgICAgICAgVG9rZW5CeUF2YWlsYWJsZVByaXYgPSAkVG9rZW5CeUF2YWlsYWJsZVByaXYKICAgICAgICB9CgogICAgICAgIHJldHVybiAoTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgJFJldHVybkRpY3QpCiAgICB9CgoKICAgIGZ1bmN0aW9uIEludm9rZS1JbXBlcnNvbmF0ZVVzZXIKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuCiAgICAgICAgKQoKICAgICAgICAjRHVwbGljYXRlIHRoZSB0b2tlbiBzbyBpdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYSBuZXcgcHJvY2VzcwogICAgICAgIFtJbnRQdHJdJE5ld0hUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgJFN1Y2Nlc3MgPSAkRHVwbGljYXRlVG9rZW5FeC5JbnZva2UoJGhUb2tlbiwgJFdpbjMyQ29uc3RhbnRzLk1BWElNVU1fQUxMT1dFRCwgW0ludFB0cl06Olplcm8sIDMsIDEsIFtSZWZdJE5ld0hUb2tlbikgI3RvZG8gZG9lcyB0aGlzIG5lZWQgdG8gYmUgZnJlZWQKICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkR1cGxpY2F0ZVRva2VuRXggZmFpbGVkLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyLkludm9rZSgkTmV3SFRva2VuKQogICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yY29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlci4gRXJyb3IgY29kZTogJEVycm9yY29kZSIKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJFN1Y2Nlc3MgPSAkQ2xvc2VIYW5kbGUuSW52b2tlKCROZXdIVG9rZW4pCiAgICAgICAgJE5ld0hUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDbG9zZUhhbmRsZSBmYWlsZWQgdG8gY2xvc2UgTmV3SFRva2VuLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJFN1Y2Nlc3MKICAgIH0KCgogICAgZnVuY3Rpb24gQ3JlYXRlLVByb2Nlc3NXaXRoVG9rZW4KICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuLAoKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkUHJvY2Vzc05hbWUsCgogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTIpXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkUHJvY2Vzc0FyZ3MsCgogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTMpXQogICAgICAgICAgICBbU3dpdGNoXQogICAgICAgICAgICAkUGFzc1RocnUKICAgICAgICApCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiRW50ZXJpbmcgQ3JlYXRlLVByb2Nlc3NXaXRoVG9rZW4iCiAgICAgICAgI0R1cGxpY2F0ZSB0aGUgdG9rZW4gc28gaXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IHByb2Nlc3MKICAgICAgICBbSW50UHRyXSROZXdIVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgICRTdWNjZXNzID0gJER1cGxpY2F0ZVRva2VuRXguSW52b2tlKCRoVG9rZW4sICRXaW4zMkNvbnN0YW50cy5NQVhJTVVNX0FMTE9XRUQsIFtJbnRQdHJdOjpaZXJvLCAzLCAxLCBbUmVmXSROZXdIVG9rZW4pCiAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJEdXBsaWNhdGVUb2tlbkV4IGZhaWxlZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkU3RhcnR1cEluZm9TaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRTVEFSVFVQSU5GTykKICAgICAgICAgICAgW0ludFB0cl0kU3RhcnR1cEluZm9QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFN0YXJ0dXBJbmZvU2l6ZSkKICAgICAgICAgICAgJG1lbXNldC5JbnZva2UoJFN0YXJ0dXBJbmZvUHRyLCAwLCAkU3RhcnR1cEluZm9TaXplKSB8IE91dC1OdWxsCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OldyaXRlSW50MzIoJFN0YXJ0dXBJbmZvUHRyLCAkU3RhcnR1cEluZm9TaXplKSAjVGhlIGZpcnN0IHBhcmFtZXRlciAoY2IpIGlzIGEgRFdPUkQgd2hpY2ggaXMgdGhlIHNpemUgb2YgdGhlIHN0cnVjdAoKICAgICAgICAgICAgJFByb2Nlc3NJbmZvU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kUFJPQ0VTU19JTkZPUk1BVElPTikKICAgICAgICAgICAgW0ludFB0cl0kUHJvY2Vzc0luZm9QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFByb2Nlc3NJbmZvU2l6ZSkKCiAgICAgICAgICAgICRQcm9jZXNzTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbFVuaSgiJFByb2Nlc3NOYW1lIikKICAgICAgICAgICAgJFByb2Nlc3NBcmdzUHRyID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgaWYgKC1ub3QgW1N0cmluZ106OklzTnVsbE9yRW1wdHkoJFByb2Nlc3NBcmdzKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFByb2Nlc3NBcmdzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCJgIiRQcm9jZXNzTmFtZWAiICRQcm9jZXNzQXJncyIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRGdW5jdGlvbk5hbWUgPSAiIgogICAgICAgICAgICBpZiAoW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXTo6R2V0Q3VycmVudFByb2Nlc3MoKS5TZXNzaW9uSWQgLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNDYW5ub3QgdXNlIENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XIHdoZW4gaW4gU2Vzc2lvbjAgYmVjYXVzZSBDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyB0aHJvd3MgYW4gQUNDRVNTX0RFTklFRCBlcnJvci4gSSBiZWxpZXZlIGl0IGlzIGJlY2F1c2UKICAgICAgICAgICAgICAgICN0aGlzIEFQSSBhdHRlbXB0cyB0byBtb2RpZnkgdGhlIGRlc2t0b3AgQUNMLiBJIHdvdWxkIGp1c3QgdXNlIHRoaXMgQVBJIGFsbCB0aGUgdGltZSwgYnV0IGl0IHJlcXVpcmVzIHRoYXQgSSBlbmFibGUgU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UKICAgICAgICAgICAgICAgICN3aGljaCBpcyBub3QgaWRlYWwuIAogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiUnVubmluZyBpbiBTZXNzaW9uIDAuIEVuYWJsaW5nIFNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlIGFuZCBjYWxsaW5nIENyZWF0ZVByb2Nlc3NBc1VzZXJXIHRvIGNyZWF0ZSBhIHByb2Nlc3Mgd2l0aCBhbHRlcm5hdGUgdG9rZW4uIgogICAgICAgICAgICAgICAgRW5hYmxlLVByaXZpbGVnZSAtUHJpdmlsZWdlIFNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlCiAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRDcmVhdGVQcm9jZXNzQXNVc2VyVy5JbnZva2UoJE5ld0hUb2tlbiwgJFByb2Nlc3NOYW1lUHRyLCAkUHJvY2Vzc0FyZ3NQdHIsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybywgJGZhbHNlLCAwLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8sICRTdGFydHVwSW5mb1B0ciwgJFByb2Nlc3NJbmZvUHRyKQogICAgICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9ICJDcmVhdGVQcm9jZXNzQXNVc2VyVyIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIk5vdCBydW5uaW5nIGluIFNlc3Npb24gMCwgY2FsbGluZyBDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyB0byBjcmVhdGUgYSBwcm9jZXNzIHdpdGggYWx0ZXJuYXRlIHRva2VuLiIKICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XLkludm9rZSgkTmV3SFRva2VuLCAweDAsICRQcm9jZXNzTmFtZVB0ciwgJFByb2Nlc3NBcmdzUHRyLCAwLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8sICRTdGFydHVwSW5mb1B0ciwgJFByb2Nlc3NJbmZvUHRyKQogICAgICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9ICJDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNGcmVlIHRoZSBoYW5kbGVzIHJldHVybmVkIGluIHRoZSBQcm9jZXNzSW5mbyBzdHJ1Y3R1cmUKICAgICAgICAgICAgICAgICRQcm9jZXNzSW5mbyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRQcm9jZXNzSW5mb1B0ciwgW1R5cGVdJFBST0NFU1NfSU5GT1JNQVRJT04pCiAgICAgICAgICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRQcm9jZXNzSW5mby5oUHJvY2VzcykgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkUHJvY2Vzc0luZm8uaFRocmVhZCkgfCBPdXQtTnVsbAoKICAgICAgICAjUGFzcyBjcmVhdGVkIFN5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzIG9iamVjdCB0byBwaXBlbGluZQogICAgICAgIGlmICgkUGFzc1RocnUpIHsKICAgICAgICAgICAgI1JldHJpZXZpbmcgY3JlYXRlZCBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2VzcyBvYmplY3QKICAgICAgICAgICAgJHJldHVyblByb2Nlc3MgPSBHZXQtUHJvY2VzcyAtSWQgJFByb2Nlc3NJbmZvLmR3UHJvY2Vzc0lkCgogICAgICAgICAgICAjQ2FjaGluZyBwcm9jZXNzIGhhbmRsZSBzbyB3ZSBkb24ndCBsb3NlIGl0IHdoZW4gdGhlIHByb2Nlc3MgZXhpdHMKICAgICAgICAgICAgJG51bGwgPSAkcmV0dXJuUHJvY2Vzcy5IYW5kbGUKCiAgICAgICAgICAgICNQYXNzaW5nIFN5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzIG9iamVjdCB0byBwaXBlbGluZQogICAgICAgICAgICAkcmV0dXJuUHJvY2VzcwogICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICIkRnVuY3Rpb25OYW1lIGZhaWxlZC4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgI0ZyZWUgU3RhcnR1cEluZm8gbWVtb3J5IGFuZCBQcm9jZXNzSW5mbyBtZW1vcnkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFN0YXJ0dXBJbmZvUHRyKQogICAgICAgICAgICAkU3RhcnR1cEluZm9QdHIgPSBbSW50cHRyXTo6WmVybwogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkUHJvY2Vzc0luZm9QdHIpCiAgICAgICAgICAgICRQcm9jZXNzSW5mb1B0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06Olplcm9GcmVlR2xvYmFsQWxsb2NVbmljb2RlKCRQcm9jZXNzTmFtZVB0cikKICAgICAgICAgICAgJFByb2Nlc3NOYW1lUHRyID0gW0ludFB0cl06Olplcm8KCiAgICAgICAgICAgICNDbG9zZSBoYW5kbGUgZm9yIHRoZSB0b2tlbiBkdXBsaWNhdGVkIHdpdGggRHVwbGljYXRlVG9rZW5FeAogICAgICAgICAgICAkU3VjY2VzcyA9ICRDbG9zZUhhbmRsZS5JbnZva2UoJE5ld0hUb2tlbikKICAgICAgICAgICAgJE5ld0hUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiQ2xvc2VIYW5kbGUgZmFpbGVkIHRvIGNsb3NlIE5ld0hUb2tlbi4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKCiAgICBmdW5jdGlvbiBGcmVlLUFsbFRva2VucwogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgIFtQU09iamVjdFtdXQogICAgICAgICAgICAkVG9rZW5JbmZvT2JqcwogICAgICAgICkKCiAgICAgICAgZm9yZWFjaCAoJE9iaiBpbiAkVG9rZW5JbmZvT2JqcykKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJENsb3NlSGFuZGxlLkludm9rZSgkT2JqLmhUb2tlbikKICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJGYWlsZWQgdG8gY2xvc2UgdG9rZW4gaGFuZGxlIGluIEZyZWUtQWxsVG9rZW5zLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJE9iai5oVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgIH0KICAgIH0KCgogICAgI0VudW1lcmF0ZSBhbGwgdG9rZW5zIG9uIHRoZSBzeXN0ZW0uIFJldHVybnMgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIHRoZSB0b2tlbiBhbmQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuLgogICAgZnVuY3Rpb24gRW51bS1BbGxUb2tlbnMKICAgIHsKICAgICAgICAkQWxsVG9rZW5zID0gQCgpCgogICAgICAgICNGaXJzdCBHZXRTeXN0ZW0uIFRoZSBzY3JpcHQgY2Fubm90IGVudW1lcmF0ZSBhbGwgdG9rZW5zIHVubGVzcyBpdCBpcyBzeXN0ZW0gZm9yIHNvbWUgcmVhc29uLiBMdWNraWx5IGl0IGNhbiBpbXBlcnNvbmF0ZSBhIHN5c3RlbSB0b2tlbi4KICAgICAgICAjRXZlbiBpZiBhbHJlYWR5IHJ1bm5pbmcgYXMgc3lzdGVtLCBsYXRlciBwYXJ0cyBvbiB0aGUgc2NyaXB0IGRlcGVuZCBvbiBoYXZpbmcgYSBTWVNURU0gdG9rZW4gd2l0aCBtb3N0IHByaXZpbGVnZXMsIHNvIGltcGVyc29uYXRlIHRoZSB3aW5pbml0IHRva2VuLgogICAgICAgICRzeXN0ZW1Ub2tlbkluZm8gPSBHZXQtUHJpbWFyeVRva2VuIC1Qcm9jZXNzSWQgKEdldC1Qcm9jZXNzIHdpbmluaXQgfCB3aGVyZSB7JF8uU2Vzc2lvbklkIC1lcSAwfSkuSWQKICAgICAgICBpZiAoJHN5c3RlbVRva2VuSW5mbyAtZXEgJG51bGwgLW9yICgtbm90IChJbnZva2UtSW1wZXJzb25hdGVVc2VyIC1oVG9rZW4gJHN5c3RlbVRva2VuSW5mby5oUHJvY1Rva2VuKSkpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJVbmFibGUgdG8gaW1wZXJzb25hdGUgU1lTVEVNLCB0aGUgc2NyaXB0IHdpbGwgbm90IGJlIGFibGUgdG8gZW51bWVyYXRlIGFsbCB0b2tlbnMiCiAgICAgICAgfQoKICAgICAgICBpZiAoJHN5c3RlbVRva2VuSW5mbyAtbmUgJG51bGwgLWFuZCAkc3lzdGVtVG9rZW5JbmZvLmhQcm9jVG9rZW4gLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIHsKICAgICAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkc3lzdGVtVG9rZW5JbmZvLmhQcm9jVG9rZW4pIHwgT3V0LU51bGwKICAgICAgICAgICAgJHN5c3RlbVRva2VuSW5mbyA9ICRudWxsCiAgICAgICAgfQoKICAgICAgICAkUHJvY2Vzc0lkcyA9IGdldC1wcm9jZXNzIHwgd2hlcmUgeyRfLm5hbWUgLWlub3RtYXRjaCAiXmNzcnNzJCIgLWFuZCAkXy5uYW1lIC1pbm90bWF0Y2ggIl5zeXN0ZW0kIiAtYW5kICRfLmlkIC1uZSAwfQoKICAgICAgICAjR2V0IGFsbCB0b2tlbnMKICAgICAgICBmb3JlYWNoICgkUHJvY2VzcyBpbiAkUHJvY2Vzc0lkcykKICAgICAgICB7CiAgICAgICAgICAgICRQcmltYXJ5VG9rZW5JbmZvID0gKEdldC1QcmltYXJ5VG9rZW4gLVByb2Nlc3NJZCAkUHJvY2Vzcy5JZCAtRnVsbFByaXZzKQoKICAgICAgICAgICAgI0lmIGEgcHJvY2VzcyBpcyBhIHByb3RlY3RlZCBwcm9jZXNzLCBpdCdzIHByaW1hcnkgdG9rZW4gY2Fubm90IGJlIG9idGFpbmVkLiBEb24ndCB0cnkgdG8gZW51bWVyYXRlIGl0LgogICAgICAgICAgICBpZiAoJFByaW1hcnlUb2tlbkluZm8gLW5lICRudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBbSW50UHRyXSRoVG9rZW4gPSBbSW50UHRyXSRQcmltYXJ5VG9rZW5JbmZvLmhQcm9jVG9rZW4KCiAgICAgICAgICAgICAgICBpZiAoJGhUb2tlbiAtbmUgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgI0dldCB0aGUgTFVJRCBjb3Jyb3Nwb25kaW5nIHRvIHRoZSBsb2dvbgogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogPSBHZXQtVG9rZW5JbmZvcm1hdGlvbiAtaFRva2VuICRoVG9rZW4KICAgICAgICAgICAgICAgICAgICBpZiAoJFJldHVybk9iaiAtbmUgJG51bGwpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUHJvY2Vzc0lkIC1WYWx1ZSAkUHJvY2Vzcy5JZAoKICAgICAgICAgICAgICAgICAgICAgICAgJEFsbFRva2VucyArPSAkUmV0dXJuT2JqCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkNvdWxkbid0IHJldHJpZXZlIHRva2VuIGZvciBQcm9jZXNzOiAkKCRQcm9jZXNzLk5hbWUpLiBQcm9jZXNzSWQ6ICQoJFByb2Nlc3MuSWQpIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRUaHJlYWQgaW4gJFByb2Nlc3MuVGhyZWFkcykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkVGhyZWFkVG9rZW5JbmZvID0gR2V0LVRocmVhZFRva2VuIC1UaHJlYWRJZCAkVGhyZWFkLklkCiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kaFRva2VuID0gKCRUaHJlYWRUb2tlbkluZm8uaFRocmVhZFRva2VuKQoKICAgICAgICAgICAgICAgICAgICBpZiAoJGhUb2tlbiAtbmUgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqID0gR2V0LVRva2VuSW5mb3JtYXRpb24gLWhUb2tlbiAkaFRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkUmV0dXJuT2JqIC1uZSAkbnVsbCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRocmVhZElkIC1WYWx1ZSAkVGhyZWFkLklkCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkQWxsVG9rZW5zICs9ICRSZXR1cm5PYmoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRBbGxUb2tlbnMKICAgIH0KCgogICAgZnVuY3Rpb24gSW52b2tlLVJldmVydFRvU2VsZgogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTApXQogICAgICAgICAgICBbU3dpdGNoXQogICAgICAgICAgICAkU2hvd091dHB1dAogICAgICAgICkKCiAgICAgICAgJFN1Y2Nlc3MgPSAkUmV2ZXJ0VG9TZWxmLkludm9rZSgpCgogICAgICAgIGlmICgkU2hvd091dHB1dCkKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkU3VjY2VzcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJSZXZlcnRUb1NlbGYgd2FzIHN1Y2Nlc3NmdWwuIFJ1bm5pbmcgYXM6ICQoW0Vudmlyb25tZW50XTo6VXNlckRvbWFpbk5hbWUpXCQoW0Vudmlyb25tZW50XTo6VXNlck5hbWUpIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJSZXZlcnRUb1NlbGYgZmFpbGVkLiBSdW5uaW5nIGFzOiAkKFtFbnZpcm9ubWVudF06OlVzZXJEb21haW5OYW1lKVwkKFtFbnZpcm9ubWVudF06OlVzZXJOYW1lKSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCgogICAgI01haW4gZnVuY3Rpb24KICAgIGZ1bmN0aW9uIE1haW4KICAgIHsKICAgICAgICBpZiAoLW5vdCAoW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzUHJpbmNpcGFsXSBbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKSkuSXNJblJvbGUoW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzQnVpbHRJblJvbGVdICJBZG1pbmlzdHJhdG9yIikpCiAgICAgICAgewogICAgICAgICAgICBpZiAoLW5vdCAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWllcSAiUmV2VG9TZWxmIikpewogICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIlNjcmlwdCBtdXN0IGJlIHJ1biBhcyBhZG1pbmlzdHJhdG9yIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjSWYgcnVubmluZyBpbiBzZXNzaW9uIDAsIGZvcmNlIE5vVUkKICAgICAgICBpZiAoW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXTo6R2V0Q3VycmVudFByb2Nlc3MoKS5TZXNzaW9uSWQgLWVxIDApCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1WZXJib3NlICJSdW5uaW5nIGluIFNlc3Npb24gMCwgZm9yY2luZyBOb1VJIChwcm9jZXNzZXMgaW4gU2Vzc2lvbiAwIGNhbm5vdCBoYXZlIGEgVUkpIgogICAgICAgICAgICAkTm9VSSA9ICR0cnVlCiAgICAgICAgfQoKICAgICAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWllcSAiUmV2VG9TZWxmIikKICAgICAgICB7CiAgICAgICAgICAgIEludm9rZS1SZXZlcnRUb1NlbGYgLVNob3dPdXRwdXQKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJDcmVhdGVQcm9jZXNzIiAtb3IgJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWllcSAiSW1wZXJzb25hdGVVc2VyIikKICAgICAgICB7CiAgICAgICAgICAgICRBbGxUb2tlbnMgPSBFbnVtLUFsbFRva2VucwogICAgICAgICAgICAKICAgICAgICAgICAgI1NlbGVjdCB0aGUgdG9rZW4gdG8gdXNlCiAgICAgICAgICAgIFtJbnRQdHJdJGhUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRVbmlxdWVUb2tlbnMgPSAoR2V0LVVuaXF1ZVRva2VucyAtQWxsVG9rZW5zICRBbGxUb2tlbnMpLlRva2VuQnlVc2VyCiAgICAgICAgICAgIGlmICgkVXNlcm5hbWUgLW5lICRudWxsIC1hbmQgJFVzZXJuYW1lIC1uZSAnJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRVbmlxdWVUb2tlbnMuQ29udGFpbnNLZXkoJFVzZXJuYW1lKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaFRva2VuID0gJFVuaXF1ZVRva2Vuc1skVXNlcm5hbWVdLmhUb2tlbgogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlNlbGVjdGluZyB0b2tlbiBieSB1c2VybmFtZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiQSB0b2tlbiBiZWxvbmdpbmcgdG8gdGhlIHNwZWNpZmllZCB1c2VybmFtZSB3YXMgbm90IGZvdW5kLiBVc2VybmFtZTogJCgkVXNlcm5hbWUpIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoICRQcm9jZXNzSWQgLW5lICRudWxsIC1hbmQgJFByb2Nlc3NJZCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJFRva2VuIGluICRBbGxUb2tlbnMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgkVG9rZW4gfCBHZXQtTWVtYmVyIFByb2Nlc3NJZCkgLWFuZCAkVG9rZW4uUHJvY2Vzc0lkIC1lcSAkUHJvY2Vzc0lkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGhUb2tlbiA9ICRUb2tlbi5oVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VsZWN0aW5nIHRva2VuIGJ5IFByb2Nlc3NJRCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCRoVG9rZW4gLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJBIHRva2VuIGJlbG9uZ2luZyB0byBQcm9jZXNzSWQgJCgkUHJvY2Vzc0lkKSBjb3VsZCBub3QgYmUgZm91bmQuIEVpdGhlciB0aGUgcHJvY2VzcyBkb2Vzbid0IGV4aXN0IG9yIGl0IGlzIGEgcHJvdGVjdGVkIHByb2Nlc3MgYW5kIGNhbm5vdCBiZSBvcGVuZWQuIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJFRocmVhZElkIC1uZSAkbnVsbCAtYW5kICRUaHJlYWRJZCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJFRva2VuIGluICRBbGxUb2tlbnMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgkVG9rZW4gfCBHZXQtTWVtYmVyIFRocmVhZElkKSAtYW5kICRUb2tlbi5UaHJlYWRJZCAtZXEgJFRocmVhZElkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGhUb2tlbiA9ICRUb2tlbi5oVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VsZWN0aW5nIHRva2VuIGJ5IFRocmVhZElkIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoJGhUb2tlbiAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkEgdG9rZW4gYmVsb25naW5nIHRvIFRocmVhZElkICQoJFRocmVhZElkKSBjb3VsZCBub3QgYmUgZm91bmQuIEVpdGhlciB0aGUgdGhyZWFkIGRvZXNuJ3QgZXhpc3Qgb3IgdGhlIHRocmVhZCBpcyBpbiBhIHByb3RlY3RlZCBwcm9jZXNzIGFuZCBjYW5ub3QgYmUgb3BlbmVkLiIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYgKCRQcm9jZXNzIC1uZSAkbnVsbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJFRva2VuIGluICRBbGxUb2tlbnMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgaWYgKCgkVG9rZW4gfCBHZXQtTWVtYmVyIFByb2Nlc3NJZCkgLWFuZCAkVG9rZW4uUHJvY2Vzc0lkIC1lcSAkUHJvY2Vzcy5JZCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRoVG9rZW4gPSAkVG9rZW4uaFRva2VuCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlNlbGVjdGluZyB0b2tlbiBieSBQcm9jZXNzIG9iamVjdCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCRoVG9rZW4gLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJBIHRva2VuIGJlbG9uZ2luZyB0byBQcm9jZXNzICQoJFByb2Nlc3MuTmFtZSkgUHJvY2Vzc0lkICQoJFByb2Nlc3MuSWQpIGNvdWxkIG5vdCBiZSBmb3VuZC4gRWl0aGVyIHRoZSBwcm9jZXNzIGRvZXNuJ3QgZXhpc3Qgb3IgaXQgaXMgYSBwcm90ZWN0ZWQgcHJvY2VzcyBhbmQgY2Fubm90IGJlIG9wZW5lZC4iIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiTXVzdCBzdXBwbHkgYSBVc2VybmFtZSwgUHJvY2Vzc0lkLCBUaHJlYWRJZCwgb3IgUHJvY2VzcyBvYmplY3QiICAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICB9CgogICAgICAgICAgICAjVXNlIHRoZSB0b2tlbiBmb3IgdGhlIHNlbGVjdGVkIGFjdGlvbgogICAgICAgICAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWllcSAiQ3JlYXRlUHJvY2VzcyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgtbm90ICROb1VJKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFNldC1EZXNrdG9wQUNMcwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIENyZWF0ZS1Qcm9jZXNzV2l0aFRva2VuIC1oVG9rZW4gJGhUb2tlbiAtUHJvY2Vzc05hbWUgJENyZWF0ZVByb2Nlc3MgLVByb2Nlc3NBcmdzICRQcm9jZXNzQXJncyAtUGFzc1RocnU6JFBhc3NUaHJ1CgogICAgICAgICAgICAgICAgSW52b2tlLVJldmVydFRvU2VsZgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJEltcGVyc29uYXRlVXNlcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgSW52b2tlLUltcGVyc29uYXRlVXNlciAtaFRva2VuICRoVG9rZW4gfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJSdW5uaW5nIEFzOiAkKFtFbnZpcm9ubWVudF06OlVzZXJEb21haW5OYW1lKVwkKFtFbnZpcm9ubWVudF06OlVzZXJOYW1lKSIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgRnJlZS1BbGxUb2tlbnMgLVRva2VuSW5mb09ianMgJEFsbFRva2VucwogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1pZXEgIldob0FtSSIpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIiQoW0Vudmlyb25tZW50XTo6VXNlckRvbWFpbk5hbWUpXCQoW0Vudmlyb25tZW50XTo6VXNlck5hbWUpIgogICAgICAgIH0KICAgICAgICBlbHNlICNFbnVtZXJhdGUgdG9rZW5zCiAgICAgICAgewogICAgICAgICAgICAkQWxsVG9rZW5zID0gRW51bS1BbGxUb2tlbnMKCiAgICAgICAgICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJTaG93QWxsIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRBbGxUb2tlbnMKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAoR2V0LVVuaXF1ZVRva2VucyAtQWxsVG9rZW5zICRBbGxUb2tlbnMpLlRva2VuQnlVc2VyLlZhbHVlcwogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnZva2UtUmV2ZXJ0VG9TZWxmCgogICAgICAgICAgICBGcmVlLUFsbFRva2VucyAtVG9rZW5JbmZvT2JqcyAkQWxsVG9rZW5zCiAgICAgICAgfQogICAgfQoKCiAgICAjU3RhcnQgdGhlIG1haW4gZnVuY3Rpb24KICAgIE1haW4KfQo=
