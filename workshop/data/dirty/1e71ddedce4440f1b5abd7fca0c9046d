Inveigh-Relay.ps1,5dbef7bddaf50624e840ccbce2816594,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLUludmVpZ2hSZWxheQp7CjwjCi5TWU5PUFNJUwpJbnZva2UtSW52ZWlnaFJlbGF5IHBlcmZvcm1zIE5UTE12MiBIVFRQIHRvIFNNQiByZWxheSB3aXRoIHBzZXhlYyBzdHlsZSBjb21tYW5kIGV4ZWN1dGlvbi4KCi5ERVNDUklQVElPTgpJbnZva2UtSW52ZWlnaFJlbGF5IGN1cnJlbnRseSBzdXBwb3J0cyBOVExNdjIgSFRUUCB0byBTTUIxL1NNQjIgcmVsYXkgd2l0aCBwc2V4ZWMgc3R5bGUgY29tbWFuZCBleGVjdXRpb24uCgogICAgSFRUUC9IVFRQUyB0byBTTUIgTlRMTXYyIHJlbGF5IHdpdGggZ3JhbnVsYXIgY29udHJvbAogICAgU3VwcG9ydHMgU01CMSBhbmQgU01CMiB0YXJnZXRzCiAgICBEb2VzIG5vdCByZXF1aXJlIHByaXZlbGVnZWQgYWNjZXNzIG9uIHRoZSBJbnZva2UtSW52ZWlnaFJlbGF5IGhvc3QKICAgIFRoZSBJbnZva2UtSW52ZWlnaFJlbGF5IGhvc3QgY2FuIGJlIHRhcmdldGVkIGZvciBwcml2aWxlZ2UgZXNjYWxhdGlvbgogICAgTlRMTXYxL05UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZSBvdmVyIEhUVFAvSFRUUFMKICAgIEdyYW51bGFyIGNvbnRyb2wgb2YgY29uc29sZSBhbmQgZmlsZSBvdXRwdXQKCi5QQVJBTUVURVIgQ2hhbGxlbmdlCkRlZmF1bHQgPSBSYW5kb206IDE2IGNoYXJhY3RlciBoZXggTlRMTSBjaGFsbGVuZ2UgZm9yIHVzZSB3aXRoIHRoZSBIVFRQIGxpc3RlbmVyLiBJZiBsZWZ0IGJsYW5rLCBhIHJhbmRvbQpjaGFsbGVuZ2Ugd2lsbCBiZSBnZW5lcmF0ZWQgZm9yIGVhY2ggcmVxdWVzdC4gTm90ZSB0aGF0IGR1cmluZyBTTUIgcmVsYXkgYXR0ZW1wdHMsIHRoZSBjaGFsbGVuZ2Ugd2lsbCBiZQpwdWxsZWQgZnJvbSB0aGUgU01CIHJlbGF5IHRhcmdldC4gCgouUEFSQU1FVEVSIENvbW1hbmQKQ29tbWFuZCB0byBleGVjdXRlIG9uIFNNQiByZWxheSB0YXJnZXQuIFVzZSBQb3dlclNoZWxsIGNoYXJhY3RlciBlc2NhcGVzIHdoZXJlIG5lY2Vzc2FyeS4KCi5QQVJBTUVURVIgQ29uc29sZU91dHB1dApEZWZhdWx0ID0gRGlzYWJsZWQ6IChMb3cvTWVkaXVtL1kvTikgRW5hYmxlL0Rpc2FibGUgcmVhbCB0aW1lIGNvbnNvbGUgb3V0cHV0LiBJZiB1c2luZyB0aGlzIG9wdGlvbiB0aHJvdWdoIGEKc2hlbGwsIHRlc3QgdG8gZW5zdXJlIHRoYXQgaXQgZG9lc24ndCBoYW5nIHRoZSBzaGVsbC4gTWVkaXVtIGFuZCBMb3cgY2FuIGJlIHVzZWQgdG8gcmVkdWNlIG91dHB1dC4KCi5QQVJBTUVURVIgQ29uc29sZVF1ZXVlTGltaXQKRGVmYXVsdCA9IFVubGltaXRlZDogTWF4aW11bSBudW1iZXIgb2YgcXVldWVkIHVwIGNvbnNvbGUgbG9nIGVudHJpZXMgd2hlbiBub3QgdXNpbmcgdGhlIHJlYWwgdGltZSBjb25zb2xlLgoKLlBBUkFNRVRFUiBDb25zb2xlU3RhdHVzCihJbnRlZ2VyKSBJbnRlcnZhbCBpbiBtaW51dGVzIGZvciBkaXNwbGF5aW5nIGFsbCB1bmlxdWUgY2FwdHVyZWQgaGFzaGVzIGFuZCBjcmVkZW50aWFscy4gVGhpcyBpcyB1c2VmdWwgZm9yCmRpc3BsYXlpbmcgZnVsbCBjYXB0dXJlIGxpc3RzIHdoZW4gcnVubmluZyB0aHJvdWdoIGEgc2hlbGwgdGhhdCBkb2VzIG5vdCBoYXZlIGFjY2VzcyB0byB0aGUgc3VwcG9ydCBmdW5jdGlvbnMuCgouUEFSQU1FVEVSIENvbnNvbGVVbmlxdWUKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIGRpc3BsYXlpbmcgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcyBmb3Igb25seSB1bmlxdWUgSVAsIGRvbWFpbi9ob3N0bmFtZSwKYW5kIHVzZXJuYW1lIGNvbWJpbmF0aW9ucyB3aGVuIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCBpcyBlbmFibGVkLgoKLlBBUkFNRVRFUiBGaWxlT3V0cHV0CkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgcmVhbCB0aW1lIGZpbGUgb3V0cHV0LgoKLlBBUkFNRVRFUiBGaWxlT3V0cHV0RGlyZWN0b3J5CkRlZmF1bHQgPSBXb3JraW5nIERpcmVjdG9yeTogVmFsaWQgcGF0aCB0byBhbiBvdXRwdXQgZGlyZWN0b3J5IGZvciBsb2cgYW5kIGNhcHR1cmUgZmlsZXMuIEZpbGVPdXRwdXQgbXVzdCBhbHNvIGJlCmVuYWJsZWQuCgouUEFSQU1FVEVSIEhUVFAKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIEhUVFAgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmUuCgouUEFSQU1FVEVSIEhUVFBJUApEZWZhdWx0ID0gQW55OiBJUCBhZGRyZXNzIGZvciB0aGUgSFRUUC9IVFRQUyBsaXN0ZW5lci4KCi5QQVJBTUVURVIgSFRUUFBvcnQKRGVmYXVsdCA9IDgwOiBUQ1AgcG9ydCBmb3IgdGhlIEhUVFAgbGlzdGVuZXIuCgouUEFSQU1FVEVSIEhUVFBTCkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgSFRUUFMgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmUuIFdhcm5pbmcsIGEgY2VydCB3aWxsIGJlIGluc3RhbGxlZCBpbgp0aGUgbG9jYWwgc3RvcmUuIElmIHRoZSBzY3JpcHQgZG9lcyBub3QgZXhpdCBncmFjZWZ1bGx5LCBtYW51YWxseSByZW1vdmUgdGhlIGNlcnRpZmljYXRlLiBUaGlzIGZlYXR1cmUgcmVxdWlyZXMKbG9jYWwgYWRtaW5pc3RyYXRvciBhY2Nlc3MuCgouUEFSQU1FVEVSIEhUVFBTUG9ydApEZWZhdWx0ID0gNDQzOiBUQ1AgcG9ydCBmb3IgdGhlIEhUVFBTIGxpc3RlbmVyLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRJc3N1ZXIKRGVmYXVsdCA9IEludmVpZ2g6IFRoZSBpc3N1ZXIgZmllbGQgZm9yIHRoZSBjZXJ0IHRoYXQgd2lsbCBiZSBpbnN0YWxsZWQgZm9yIEhUVFBTLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRTdWJqZWN0CkRlZmF1bHQgPSBsb2NhbGhvc3Q6IFRoZSBzdWJqZWN0IGZpZWxkIGZvciB0aGUgY2VydCB0aGF0IHdpbGwgYmUgaW5zdGFsbGVkIGZvciBIVFRQUy4KCi5QQVJBTUVURVIgSFRUUFNGb3JjZUNlcnREZWxldGUKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBGb3JjZSBkZWxldGlvbiBvZiBhbiBleGlzdGluZyBjZXJ0aWZpY2F0ZSB0aGF0IG1hdGNoZXMgSFRUUFNDZXJ0SXNzdWVyIGFuZApIVFRQU0NlcnRTdWJqZWN0LgoKLlBBUkFNRVRFUiBIVFRQUmVzZXREZWxheQpEZWZhdWx0ID0gRmlyZWZveDogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2Yga2V5d29yZHMgdG8gdXNlIGZvciBmaWx0ZXJpbmcgYnJvd3NlciB1c2VyIGFnZW50cy4gTWF0Y2hpbmcgYnJvd3NlcnMKd2lsbCBoYXZlIGEgZGVsYXkgYmVmb3JlIHRoZWlyIGNvbm5lY3Rpb25zIGFyZSByZXNldCB3aGVuIEludmVpZ2ggZG9lc24ndCByZWNlaXZlIGRhdGEuIFRoaXMgY2FuIGluY3JlYXNlIHRoZQpjaGFuY2Ugb2YgY2FwdHVyaW5nL3JlbGF5aW5nIGF1dGhlbnRpY2F0aW9uIHRocm91Z2ggYSBwb3B1cCBib3ggd2l0aCBzb21lIGJyb3dzZXJzIChGaXJlZm94KS4KCi5QQVJBTUVURVIgSFRUUFJlc2V0RGVsYXlUaW1lb3V0CkRlZmF1bHQgPSAzMCBTZWNvbmRzOiBIVFRQUmVzZXREZWxheSB0aW1lb3V0IGluIHNlY29uZHMuCgouUEFSQU1FVEVSIExvZ091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RvcmluZyBsb2cgbWVzc2FnZXMgaW4gbWVtb3J5LgoKLlBBUkFNRVRFUiBNYWNoaW5lQWNjb3VudHMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBzaG93aW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzIGZyb20gbWFjaGluZSBhY2NvdW50cy4KCi5QQVJBTUVURVIgT3V0cHV0U3RyZWFtT25seQpEZWZhdWx0ID0gRGlzYWJsZWQ6IEVuYWJsZS9EaXNhYmxlIGZvcmNpbmcgYWxsIG91dHB1dCB0byB0aGUgc3RhbmRhcmQgb3V0cHV0IHN0cmVhbS4gVGhpcyBjYW4gYmUgaGVscGZ1bCBpZgpydW5uaW5nIEludmVpZ2ggUmVsYXkgdGhyb3VnaCBhIHNoZWxsIHRoYXQgZG9lcyBub3QgcmV0dXJuIG90aGVyIG91dHB1dCBzdHJlYW1zLiBOb3RlIHRoYXQgeW91IHdpbGwgbm90IHNlZSB0aGUKdmFyaW91cyB5ZWxsb3cgd2FybmluZyBtZXNzYWdlcyBpZiBlbmFibGVkLgoKLlBBUkFNRVRFUiBQcm94eVJlbGF5CkRlZmF1bHQgPSBEaXNhYmxlZDogKFkvTik6IEVuYWJsZS9EaXNhYmxlIHJlbGF5aW5nIHByb3h5IGF1dGhlbnRpY2F0aW9uLgoKLlBBUkFNRVRFUiBQcm94eUlQCkRlZmF1bHQgPSBBbnk6IElQIGFkZHJlc3MgZm9yIHRoZSBwcm94eSBsaXN0ZW5lci4KCi5QQVJBTUVURVIgUHJveHlQb3J0CkRlZmF1bHQgPSA4MTgyOiBUQ1AgcG9ydCBmb3IgdGhlIHByb3h5IGxpc3RlbmVyLgoKLlBBUkFNRVRFUiBQcm94eUlnbm9yZQpEZWZhdWx0ID0gRmlyZWZveDogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2Yga2V5d29yZHMgdG8gdXNlIGZvciBmaWx0ZXJpbmcgYnJvd3NlciB1c2VyIGFnZW50cy4gTWF0Y2hpbmcgYnJvd3NlcnMKd2lsbCBub3QgYmUgc2VudCB0aGUgd3BhZC5kYXQgZmlsZSB1c2VkIGZvciBjYXB0dXJpbmcgcHJveHkgYXV0aGVudGljYXRpb25zLiBGaXJlZm94IGRvZXMgbm90IHdvcmsgY29ycmVjdGx5CndpdGggdGhlIHByb3h5IHNlcnZlciBmYWlsb3ZlciBzZXR1cC4gRmlyZWZveCB3aWxsIGJlIGxlZnQgdW5hYmxlIHRvIGNvbm5lY3QgdG8gYW55IHNpdGVzIHVudGlsIHRoZSBwcm94eSBpcwpjbGVhcmVkLiBSZW1vdmUgIkZpcmVmb3giIGZyb20gdGhpcyBsaXN0IHRvIGF0dGFjayBGaXJlZm94LiBJZiBhdHRhY2tpbmcgRmlyZWZveCwgY29uc2lkZXIgc2V0dGluZwotU3Bvb2ZlclJlcGVhdCBOIHRvIGxpbWl0IGF0dGFja3MgYWdhaW5zdCBhIHNpbmdsZSB0YXJnZXQgc28gdGhhdCB2aWN0aW1zIGNhbiByZWNvdmVyIEZpcmVmb3ggY29ubmVjdGl2aXR5IGJ5CmNsb3NpbmcgYW5kIHJlb3BlbmluZy4KCi5QQVJBTUVURVIgUmVsYXlBdXRvRGlzYWJsZQpEZWZhdWx0ID0gRW5hYmxlOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBhdXRvbWF0aWNhbHkgZGlzYWJsaW5nIFNNQiByZWxheSBhZnRlciBhIHN1Y2Nlc3NmdWwgY29tbWFuZCBleGVjdXRpb24gb24KdGFyZ2V0LgoKLlBBUkFNRVRFUiBSZWxheUF1dG9FeGl0CkRlZmF1bHQgPSBFbmFibGU6IChZL04pIEVuYWJsZS9EaXNhYmxlIGF1dG9tYXRpY2FseSBleGl0aW5nIGFmdGVyIGEgcmVsYXkgaXMgZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3Mgb3IgZXJyb3IuCgouUEFSQU1FVEVSIFJ1blRpbWUKKEludGVnZXIpIFJ1biB0aW1lIGR1cmF0aW9uIGluIG1pbnV0ZXMuCgouUEFSQU1FVEVSIFNlcnZpY2UKRGVmYXVsdCA9IDIwIENoYXJhY3RlciBSYW5kb206IE5hbWUgb2YgdGhlIHNlcnZpY2UgdG8gY3JlYXRlIGFuZCBkZWxldGUgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgU2hvd0hlbHAKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHRoZSBoZWxwIG1lc3NhZ2VzIGF0IHN0YXJ0dXAuCgouUEFSQU1FVEVSIFNNQjEKKFN3aXRjaCkgRm9yY2UgU01CMS4gVGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgdG8gcGVyZm9ybSBTTUIgdmVyc2lvbiBuZWdvdGlhdGlvbiBhbmQgdXNlIFNNQjIgaWYgc3VwcG9ydGVkIGJ5IHRoZQp0YXJnZXQuCgouUEFSQU1FVEVSIFN0YXJ0dXBDaGVja3MKRGVmYXVsdCA9IEVuYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIGNoZWNrcyBmb3IgaW4gdXNlIHBvcnRzIGFuZCBydW5uaW5nIHNlcnZpY2VzIG9uIHN0YXJ0dXAuCgouUEFSQU1FVEVSIFN0YXR1c091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RhcnR1cCBhbmQgc2h1dGRvd24gbWVzc2FnZXMuCgouUEFSQU1FVEVSIFRhcmdldApJUCBhZGRyZXNzIG9mIHN5c3RlbSB0byB0YXJnZXQgZm9yIFNNQiByZWxheS4KCi5QQVJBTUVURVIgVG9vbApEZWZhdWx0ID0gMDogKDAvMS8yKSBFbmFibGUvRGlzYWJsZSBmZWF0dXJlcyBmb3IgYmV0dGVyIG9wZXJhdGlvbiB0aHJvdWdoIGV4dGVybmFsIHRvb2xzIHN1Y2ggYXMgTWV0ZXJwcmV0ZXIncwpQb3dlclNoZWxsIGV4dGVuc2lvbiwgTWV0YXNwbG9pdCdzIEludGVyYWN0aXZlIFBvd2VyU2hlbGwgU2Vzc2lvbnMgcGF5bG9hZHMgYW5kIEVtcGlyZS4KMCA9IE5vbmUsIDEgPSBNZXRhc3Bsb2l0L01ldGVycHJldGVyLCAyID0gRW1waXJlIAoKLlBBUkFNRVRFUiBVc2VybmFtZXMKRGVmYXVsdCA9IEFsbCBVc2VybmFtZXM6IENvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHVzZXJuYW1lcyB0byB1c2UgZm9yIHJlbGF5IGF0dGFja3MuIEFjY2VwdHMgYm90aCB1c2VybmFtZSBhbmQKZG9tYWluXHVzZXJuYW1lIGZvcm1hdC4gCgouUEFSQU1FVEVSIFdQQURBdXRoCkRlZmF1bHQgPSBOVExNOiAoQW5vbnltb3VzL05UTE0pIEhUVFAvSFRUUFMgc2VydmVyIGF1dGhlbnRpY2F0aW9uIHR5cGUgZm9yIHdwYWQuZGF0IHJlcXVlc3RzLiBTZXR0aW5nIHRvCkFub255bW91cyBjYW4gcHJldmVudCBicm93c2VyIGxvZ2luIHByb21wdHMuCgouUEFSQU1FVEVSIFdQQURBdXRoSWdub3JlCkRlZmF1bHQgPSBGaXJlZm94OiBDb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiBrZXl3b3JkcyB0byB1c2UgZm9yIGZpbHRlcmluZyBicm93c2VyIHVzZXIgYWdlbnRzLiBNYXRjaGluZyBicm93c2Vycwp3aWxsIGJlIHNraXBwZWQgZm9yIE5UTE0gYXV0aGVudGljYXRpb24uIFRoaXMgY2FuIGJlIHVzZWQgdG8gZmlsdGVyIG91dCBicm93c2VycyBsaWtlIEZpcmVmb3ggdGhhdCBkaXNwbGF5IGxvZ2luCnBvcHVwcyBmb3IgYXV0aGVudGljYXRlZCB3cGFkLmRhdCByZXF1ZXN0cyBzdWNoIGFzIEZpcmVmb3guICAKCi5FWEFNUExFCkludm9rZS1JbnZlaWdoIC1IVFRQIE4KSW52b2tlLUludmVpZ2hSZWxheSAtVGFyZ2V0IDE5Mi4xNjguMi41NSAtQ29tbWFuZCAibmV0IHVzZXIgSW52ZWlnaCBTcHJpbmcyMDE3IC9hZGQgJiYgbmV0IGxvY2FsZ3JvdXAgYWRtaW5pc3RyYXRvcnMgSW52ZWlnaCAvYWRkIgoKLkxJTksKaHR0cHM6Ly9naXRodWIuY29tL0tldmluLVJvYmVydHNvbi9JbnZlaWdoCiM+CgojIFBhcmFtZXRlciBkZWZhdWx0IHZhbHVlcyBjYW4gYmUgbW9kaWZpZWQgaW4gdGhpcyBzZWN0aW9uOgpbQ21kbGV0QmluZGluZygpXQpwYXJhbQooIAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJEhUVFBSZXNldERlbGF5ID0gIkZpcmVmb3giLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFByb3h5SWdub3JlID0gIkZpcmVmb3giLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFVzZXJuYW1lcyA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bQXJyYXldJFdQQURBdXRoSWdub3JlID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJENvbnNvbGVRdWV1ZUxpbWl0ID0gIi0xIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW0ludF0kQ29uc29sZVN0YXR1cyA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRIVFRQUG9ydCA9ICI4MCIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJEhUVFBTUG9ydCA9ICI0NDMiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRIVFRQUmVzZXREZWxheVRpbWVvdXQgPSAiMzAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRQcm94eVBvcnQgPSAiODQ5MiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJFJ1blRpbWUgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bU3RyaW5nXSRDb21tYW5kID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTdHJpbmddJEhUVFBTQ2VydElzc3VlciA9ICJJbnZlaWdoIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N0cmluZ10kSFRUUFNDZXJ0U3ViamVjdCA9ICJsb2NhbGhvc3QiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3RyaW5nXSRTZXJ2aWNlLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXVtTdHJpbmddJFRhcmdldCA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kQ29uc29sZVVuaXF1ZSA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJEZpbGVPdXRwdXQgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRIVFRQID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kSFRUUFMgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRIVFRQU0ZvcmNlQ2VydERlbGV0ZSA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJExvZ091dHB1dCA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE1hY2hpbmVBY2NvdW50cyA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE91dHB1dFN0cmVhbU9ubHkgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRQcm94eSA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJFJlbGF5QXV0b0Rpc2FibGUgPSAiWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRSZWxheUF1dG9FeGl0ID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kU2hvd0hlbHAgPSAiWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRTdGFydHVwQ2hlY2tzID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kU3RhdHVzT3V0cHV0ID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIiwiTG93IiwiTWVkaXVtIildW1N0cmluZ10kQ29uc29sZU91dHB1dCA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCIwIiwiMSIsIjIiKV1bU3RyaW5nXSRUb29sID0gIjAiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIkFub255bW91cyIsIk5UTE0iKV1bU3RyaW5nXSRXUEFEQXV0aCA9ICJOVExNIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2NyaXB0KHtUZXN0LVBhdGggJF99KV1bU3RyaW5nXSRGaWxlT3V0cHV0RGlyZWN0b3J5ID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVBhdHRlcm4oJ15bQS1GYS1mMC05XXsxNn0kJyldW1N0cmluZ10kQ2hhbGxlbmdlID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTd2l0Y2hdJFNNQjEsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNjcmlwdCh7JF8gLW1hdGNoIFtTeXN0ZW0uTmV0LklQQWRkcmVzc10kX30pXVtTdHJpbmddJEhUVFBJUCA9ICIwLjAuMC4wIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2NyaXB0KHskXyAtbWF0Y2ggW1N5c3RlbS5OZXQuSVBBZGRyZXNzXSRffSldW1N0cmluZ10kUHJveHlJUCA9ICIwLjAuMC4wIiwKICAgIFtwYXJhbWV0ZXIoVmFsdWVGcm9tUmVtYWluaW5nQXJndW1lbnRzPSR0cnVlKV0kaW52YWxpZF9wYXJhbWV0ZXIKKQoKaWYgKCRpbnZhbGlkX3BhcmFtZXRlcikKewogICAgV3JpdGUtT3V0cHV0ICJFcnJvcjokKCRpbnZhbGlkX3BhcmFtZXRlcikgaXMgbm90IGEgdmFsaWQgcGFyYW1ldGVyLiIKICAgIHRocm93Cn0KCiRpbnZlaWdoX3ZlcnNpb24gPSAiMS4zIgoKaWYoJFByb3h5SVAgLWVxICcwLjAuMC4wJykKeyAKICAgICRwcm94eV9XUEFEX0lQID0gKFRlc3QtQ29ubmVjdGlvbiAxMjcuMC4wLjEgLWNvdW50IDEgfCBTZWxlY3QtT2JqZWN0IC1FeHBhbmRQcm9wZXJ0eSBJcHY0QWRkcmVzcykKfQoKaWYoISRGaWxlT3V0cHV0RGlyZWN0b3J5KQp7IAogICAgJG91dHB1dF9kaXJlY3RvcnkgPSAkUFdELlBhdGgKfQplbHNlCnsKICAgICRvdXRwdXRfZGlyZWN0b3J5ID0gJEZpbGVPdXRwdXREaXJlY3RvcnkKfQoKaWYoISRpbnZlaWdoKQp7CiAgICAkZ2xvYmFsOmludmVpZ2ggPSBbSGFzaFRhYmxlXTo6U3luY2hyb25pemVkKEB7fSkKICAgICRpbnZlaWdoLmNsZWFydGV4dF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmxvZyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLlBPU1RfcmVxdWVzdF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2gudmFsaWRfaG9zdF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0Cn0KCmlmKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCnsKICAgIFdyaXRlLU91dHB1dCAiRXJyb3I6SW52b2tlLUludmVpZ2hSZWxheSBpcyBhbHJlYWR5IHJ1bm5pbmcsIHVzZSBTdG9wLUludmVpZ2giCiAgICB0aHJvdwp9CgppZighJGludmVpZ2gucnVubmluZykKewogICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5QT1NUX3JlcXVlc3RfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5jb25zb2xlX2lucHV0ID0gJHRydWUKICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAkaW52ZWlnaC5maWxlX291dHB1dCA9ICRmYWxzZQogICAgJGludmVpZ2guSFRUUFNfZXhpc3RpbmdfY2VydGlmaWNhdGUgPSAkZmFsc2UKICAgICRpbnZlaWdoLkhUVFBTX2ZvcmNlX2NlcnRpZmljYXRlX2RlbGV0ZSA9ICRmYWxzZQogICAgJGludmVpZ2gubG9nX291dHB1dCA9ICR0cnVlCiAgICAkaW52ZWlnaC5jbGVhcnRleHRfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1DbGVhcnRleHQudHh0IgogICAgJGludmVpZ2gubG9nX291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtTG9nLnR4dCIKICAgICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSA9ICRvdXRwdXRfZGlyZWN0b3J5ICsgIlxJbnZlaWdoLU5UTE12MS50eHQiCiAgICAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1OVExNdjIudHh0IgogICAgJGludmVpZ2guUE9TVF9yZXF1ZXN0X291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtRm9ybUlucHV0LnR4dCIKfQoKaWYoJFN0YXJ0dXBDaGVja3MgLWVxICdZJykKewoKICAgICRmaXJld2FsbF9zdGF0dXMgPSBuZXRzaCBhZHZmaXJld2FsbCBzaG93IGFsbHByb2ZpbGVzIHN0YXRlIHwgV2hlcmUtT2JqZWN0IHskXyAtbWF0Y2ggJ09OJ30KCiAgICBpZigkSFRUUCAtZXEgJ1knKQogICAgewogICAgICAgICRIVFRQX3BvcnRfY2hlY2sgPSBuZXRzdGF0IC1hbnAgVENQIHwgZmluZHN0ciBMSVNURU5JTkcgfCBmaW5kc3RyIC9DOiIkSFRUUElQYDokSFRUUFBvcnQgIgogICAgfQoKICAgIGlmKCRIVFRQUyAtZXEgJ1knKQogICAgewogICAgICAgICRIVFRQU19wb3J0X2NoZWNrID0gbmV0c3RhdCAtYW5wIFRDUCB8IGZpbmRzdHIgTElTVEVOSU5HIHwgZmluZHN0ciAvQzoiJEhUVFBJUGA6JEhUVFBTUG9ydCAiCiAgICB9CgogICAgaWYoJFByb3h5IC1lcSAnWScpCiAgICB7CiAgICAgICAgJHByb3h5X3BvcnRfY2hlY2sgPSBuZXRzdGF0IC1hbnAgVENQIHwgZmluZHN0ciBMSVNURU5JTkcgfCBmaW5kc3RyIC9DOiIkSFRUUElQYDokUHJveHlQb3J0ICIKICAgIH0KCn0KCiRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgPSAkdHJ1ZQokaW52ZWlnaC5TTUJfcmVsYXkgPSAkdHJ1ZQoKaWYoJFN0YXR1c091dHB1dCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfb3V0cHV0ID0gJHRydWUKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19vdXRwdXQgPSAkZmFsc2UKfQoKaWYoJE91dHB1dFN0cmVhbU9ubHkgLWVxICdZJykKewogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJHRydWUKfQplbHNlCnsKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICRmYWxzZQp9CgppZigkVG9vbCAtZXEgMSkgIyBNZXRhc3Bsb2l0IEludGVyYWN0aXZlIFBvd2VyU2hlbGwgUGF5bG9hZHMgYW5kIE1ldGVycHJldGVyJ3MgUG93ZXJTaGVsbCBFeHRlbnNpb24KewogICAgJGludmVpZ2gudG9vbCA9IDEKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICR0cnVlCiAgICAkaW52ZWlnaC5uZXdsaW5lID0gIiIKICAgICRDb25zb2xlT3V0cHV0ID0gIk4iCn0KZWxzZWlmKCRUb29sIC1lcSAyKSAjIFBvd2VyU2hlbGwgRW1waXJlCnsKICAgICRpbnZlaWdoLnRvb2wgPSAyCiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkdHJ1ZQogICAgJGludmVpZ2guY29uc29sZV9pbnB1dCA9ICRmYWxzZQogICAgJGludmVpZ2gubmV3bGluZSA9ICJgbiIKICAgICRMb2dPdXRwdXQgPSAiTiIKICAgICRTaG93SGVscCA9ICJOIgoKICAgIHN3aXRjaCAoJENvbnNvbGVPdXRwdXQpCiAgICB7CgogICAgICAgICdMb3cnCiAgICAgICAgewogICAgICAgICAgICAkQ29uc29sZU91dHB1dCA9ICJMb3ciCiAgICAgICAgfQoKICAgICAgICAnTWVkaXVtJwogICAgICAgIHsKICAgICAgICAgICAgJENvbnNvbGVPdXRwdXQgPSAiTWVkaXVtIgogICAgICAgIH0KCiAgICAgICAgZGVmYXVsdAogICAgICAgIHsKICAgICAgICAgICAgJENvbnNvbGVPdXRwdXQgPSAiWSIKICAgICAgICB9CgogICAgfQoKfQplbHNlCnsKICAgICRpbnZlaWdoLnRvb2wgPSAwCiAgICAkaW52ZWlnaC5uZXdsaW5lID0gIiIKfQoKIyBXcml0ZSBzdGFydHVwIG1lc3NhZ2VzCiRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkludmVpZ2ggUmVsYXkgJGludmVpZ2hfdmVyc2lvbiBzdGFydGVkIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikgPiAkbnVsbAoKaWYoJEZpbGVPdXRwdXQgLWVxICdZJykKewogICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgJGludmVpZ2hfdmVyc2lvbiBzdGFydGVkIikgPiAkbnVsbAp9CgppZigkTG9nT3V0cHV0IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBSZWxheSBzdGFydGVkIikgPiAkbnVsbAogICAgJGludmVpZ2gubG9nX291dHB1dCA9ICR0cnVlCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5sb2dfb3V0cHV0ID0gJGZhbHNlCn0KCmlmKCRmaXJld2FsbF9zdGF0dXMpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIldpbmRvd3MgRmlyZXdhbGwgPSBFbmFibGVkIikgID4gJG51bGwKCiAgICAkZmlyZXdhbGxfcnVsZXMgPSBOZXctT2JqZWN0IC1jb21PYmplY3QgSE5ldENmZy5Gd1BvbGljeTIKICAgICRmaXJld2FsbF9wb3dlcnNoZWxsID0gJGZpcmV3YWxsX3J1bGVzLnJ1bGVzIHwgV2hlcmUtT2JqZWN0IHskXy5FbmFibGVkIC1lcSAkdHJ1ZSAtYW5kICRfLkRpcmVjdGlvbiAtZXEgMX0gfFNlbGVjdC1PYmplY3QgLVByb3BlcnR5IE5hbWUgfCBTZWxlY3QtU3RyaW5nICJXaW5kb3dzIFBvd2VyU2hlbGx9IgoKICAgIGlmKCRmaXJld2FsbF9wb3dlcnNoZWxsKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIldpbmRvd3MgRmlyZXdhbGwgLSBQb3dlclNoZWxsLmV4ZSA9IEFsbG93ZWQiKSAgPiAkbnVsbAogICAgfQoKfQoKaWYoJEhUVFAgLWVxICdZJykKewoKICAgIGlmKCRIVFRQX3BvcnRfY2hlY2spCiAgICB7CiAgICAgICAgJEhUVFAgPSAiTiIKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQIENhcHR1cmUvUmVsYXkgRGlzYWJsZWQgRHVlIFRvIEluIFVzZSBQb3J0ICRIVFRQUG9ydCIpICA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBDYXB0dXJlL1JlbGF5ID0gRW5hYmxlZCIpICA+ICRudWxsCgogICAgICAgIGlmKCRIVFRQSVApCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQIElQIEFkZHJlc3MgPSAkSFRUUElQIikgPiAkbnVsbAogICAgICAgIH0KCiAgICAgICAgaWYoJEhUVFBQb3J0IC1uZSA4MCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgUG9ydCA9ICRIVFRQUG9ydCIpID4gJG51bGwKICAgICAgICB9CiAgICB9Cgp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBDYXB0dXJlL1JlbGF5ID0gRGlzYWJsZWQiKSAgPiAkbnVsbAp9CgppZigkSFRUUFMgLWVxICdZJykKewoKICAgIGlmKCRIVFRQU19wb3J0X2NoZWNrKQogICAgewogICAgICAgICRIVFRQUyA9ICJOIgogICAgICAgICRpbnZlaWdoLkhUVFBTID0gJGZhbHNlCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZS9SZWxheSBEaXNhYmxlZCBEdWUgVG8gSW4gVXNlIFBvcnQgJEhUVFBTUG9ydCIpICA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyID0gJEhUVFBTQ2VydElzc3VlcgogICAgICAgICAgICAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9DTiA9ICRIVFRQU0NlcnRTdWJqZWN0CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENlcnRpZmljYXRlIElzc3VlciA9ICIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9pc3N1ZXIpICA+ICRudWxsCiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENlcnRpZmljYXRlIENOID0gIiArICRpbnZlaWdoLmNlcnRpZmljYXRlX0NOKSAgPiAkbnVsbAogICAgICAgICAgICAkY2VydGlmaWNhdGVfY2hlY2sgPSAoR2V0LUNoaWxkSXRlbSBDZXJ0OlxMb2NhbE1hY2hpbmVcTXkgfCBXaGVyZS1PYmplY3QgeyRfLklzc3VlciAtbWF0Y2ggJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyfSkKCiAgICAgICAgICAgIGlmKCEkY2VydGlmaWNhdGVfY2hlY2spCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICMgY3JlZGl0IHRvIHN1YlRlZSBmb3IgY2VydCBjcmVhdGlvbiBjb2RlIGh0dHBzOi8vZ2l0aHViLmNvbS9zdWJUZWUvSW50ZXJjZXB0b3IKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9kaXN0aW5ndWlzaGVkX25hbWUgPSBuZXctb2JqZWN0IC1jb20gIlg1MDlFbnJvbGxtZW50LkNYNTAwRGlzdGluZ3Vpc2hlZE5hbWUiCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfZGlzdGluZ3Vpc2hlZF9uYW1lLkVuY29kZSggIkNOPSIgKyAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9DTiwgJGNlcnRpZmljYXRlX2Rpc3Rpbmd1aXNoZWRfbmFtZS5YNTAwTmFtZUZsYWdzLlg1MDBOYW1lRmxhZ3MuWENOX0NFUlRfTkFNRV9TVFJfTk9ORSkKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9pc3N1ZXJfZGlzdGluZ3Vpc2hlZF9uYW1lID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DWDUwMERpc3Rpbmd1aXNoZWROYW1lIgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2lzc3Vlcl9kaXN0aW5ndWlzaGVkX25hbWUuRW5jb2RlKCJDTj0iICsgJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyLCAkY2VydGlmaWNhdGVfZGlzdGluZ3Vpc2hlZF9uYW1lLlg1MDBOYW1lRmxhZ3MuWDUwME5hbWVGbGFncy5YQ05fQ0VSVF9OQU1FX1NUUl9OT05FKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2tleSA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ1g1MDlQcml2YXRlS2V5IgogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2tleS5Qcm92aWRlck5hbWUgPSAiTWljcm9zb2Z0IEVuaGFuY2VkIFJTQSBhbmQgQUVTIENyeXB0b2dyYXBoaWMgUHJvdmlkZXIiCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfa2V5LktleVNwZWMgPSAyCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfa2V5Lkxlbmd0aCA9IDIwNDgKCQkJICAgICRjZXJ0aWZpY2F0ZV9rZXkuTWFjaGluZUNvbnRleHQgPSAxCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfa2V5LkNyZWF0ZSgpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc2VydmVyX2F1dGhfT0lEID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DT2JqZWN0SWQiCgkJCSAgICAkY2VydGlmaWNhdGVfc2VydmVyX2F1dGhfT0lELkluaXRpYWxpemVGcm9tVmFsdWUoIjEuMy42LjEuNS41LjcuMy4xIikKCQkJICAgICRjZXJ0aWZpY2F0ZV9lbmhhbmNlZF9rZXlfdXNhZ2VfT0lEID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DT2JqZWN0SWRzLjEiCgkJCSAgICAkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX09JRC5hZGQoJGNlcnRpZmljYXRlX3NlcnZlcl9hdXRoX09JRCkKCQkJICAgICRjZXJ0aWZpY2F0ZV9lbmhhbmNlZF9rZXlfdXNhZ2VfZXh0ZW5zaW9uID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DWDUwOUV4dGVuc2lvbkVuaGFuY2VkS2V5VXNhZ2UiCgkJCSAgICAkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX2V4dGVuc2lvbi5Jbml0aWFsaXplRW5jb2RlKCRjZXJ0aWZpY2F0ZV9lbmhhbmNlZF9rZXlfdXNhZ2VfT0lEKQoJCQkgICAgJGNlcnRpZmljYXRlID0gbmV3LW9iamVjdCAtY29tICJYNTA5RW5yb2xsbWVudC5DWDUwOUNlcnRpZmljYXRlUmVxdWVzdENlcnRpZmljYXRlIgoJCQkgICAgJGNlcnRpZmljYXRlLkluaXRpYWxpemVGcm9tUHJpdmF0ZUtleSgyLCRjZXJ0aWZpY2F0ZV9rZXksIiIpCgkJCSAgICAkY2VydGlmaWNhdGUuU3ViamVjdCA9ICRjZXJ0aWZpY2F0ZV9kaXN0aW5ndWlzaGVkX25hbWUKCQkJICAgICRjZXJ0aWZpY2F0ZS5Jc3N1ZXIgPSAkY2VydGlmaWNhdGVfaXNzdWVyX2Rpc3Rpbmd1aXNoZWRfbmFtZQoJCQkgICAgJGNlcnRpZmljYXRlLk5vdEJlZm9yZSA9IChnZXQtZGF0ZSkuQWRkRGF5cygtMjcxKQoJCQkgICAgJGNlcnRpZmljYXRlLk5vdEFmdGVyID0gJGNlcnRpZmljYXRlLk5vdEJlZm9yZS5BZGREYXlzKDgyNCkKCQkJICAgICRjZXJ0aWZpY2F0ZV9oYXNoX2FsZ29yaXRobV9PSUQgPSBOZXctT2JqZWN0IC1Db21PYmplY3QgWDUwOUVucm9sbG1lbnQuQ09iamVjdElkCgkJCSAgICAkY2VydGlmaWNhdGVfaGFzaF9hbGdvcml0aG1fT0lELkluaXRpYWxpemVGcm9tQWxnb3JpdGhtTmFtZSgxLDAsMCwiU0hBMjU2IikKCQkJICAgICRjZXJ0aWZpY2F0ZS5IYXNoQWxnb3JpdGhtID0gJGNlcnRpZmljYXRlX2hhc2hfYWxnb3JpdGhtX09JRAogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlLlg1MDlFeHRlbnNpb25zLkFkZCgkY2VydGlmaWNhdGVfZW5oYW5jZWRfa2V5X3VzYWdlX2V4dGVuc2lvbikKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9iYXNpY19jb25zdHJhaW50cyA9IG5ldy1vYmplY3QgLWNvbSAiWDUwOUVucm9sbG1lbnQuQ1g1MDlFeHRlbnNpb25CYXNpY0NvbnN0cmFpbnRzIgoJCQkgICAgJGNlcnRpZmljYXRlX2Jhc2ljX2NvbnN0cmFpbnRzLkluaXRpYWxpemVFbmNvZGUoInRydWUiLDEpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGUuWDUwOUV4dGVuc2lvbnMuQWRkKCRjZXJ0aWZpY2F0ZV9iYXNpY19jb25zdHJhaW50cykKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZS5FbmNvZGUoKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX2Vucm9sbG1lbnQgPSBuZXctb2JqZWN0IC1jb20gIlg1MDlFbnJvbGxtZW50LkNYNTA5RW5yb2xsbWVudCIKCQkJICAgICRjZXJ0aWZpY2F0ZV9lbnJvbGxtZW50LkluaXRpYWxpemVGcm9tUmVxdWVzdCgkY2VydGlmaWNhdGUpCgkJCSAgICAkY2VydGlmaWNhdGVfZGF0YSA9ICRjZXJ0aWZpY2F0ZV9lbnJvbGxtZW50LkNyZWF0ZVJlcXVlc3QoMCkKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9lbnJvbGxtZW50Lkluc3RhbGxSZXNwb25zZSgyLCRjZXJ0aWZpY2F0ZV9kYXRhLDAsIiIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jZXJ0aWZpY2F0ZSA9IChHZXQtQ2hpbGRJdGVtIENlcnQ6XExvY2FsTWFjaGluZVxNeSB8IFdoZXJlLU9iamVjdCB7JF8uSXNzdWVyIC1tYXRjaCAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9pc3N1ZXJ9KQogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkdHJ1ZQogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZS9SZWxheSA9IEVuYWJsZWQiKSAgPiAkbnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIGlmKCRIVFRQU0ZvcmNlQ2VydERlbGV0ZSAtZXEgJ1knKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBTX2ZvcmNlX2NlcnRpZmljYXRlX2RlbGV0ZSA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUFNfZXhpc3RpbmdfY2VydGlmaWNhdGUgPSAkdHJ1ZQogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZSA9IFVzaW5nIEV4aXN0aW5nIENlcnRpZmljYXRlIikgID4gJG51bGwKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgY2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQUyA9ICJOIgogICAgICAgICAgICAkaW52ZWlnaC5IVFRQUyA9ICRmYWxzZQogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQUyBDYXB0dXJlL1JlbGF5IERpc2FibGVkIER1ZSBUbyBDZXJ0aWZpY2F0ZSBFcnJvciIpICA+ICRudWxsCiAgICAgICAgfQoKICAgIH0KCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQUyBDYXB0dXJlL1JlbGF5ID0gRGlzYWJsZWQiKSAgPiAkbnVsbAp9CgppZigkSFRUUCAtZXEgJ1knIC1vciAkSFRUUFMgLWVxICdZJykKewoKICAgIGlmKCRDaGFsbGVuZ2UpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiTlRMTSBDaGFsbGVuZ2UgPSAkQ2hhbGxlbmdlIikgID4gJG51bGwKICAgIH0KCiAgICBpZigkTWFjaGluZUFjY291bnRzIC1lcSAnTicpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiTWFjaGluZSBBY2NvdW50IENhcHR1cmUgPSBEaXNhYmxlZCIpID4gJG51bGwKICAgICAgICAkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzID0gJGZhbHNlCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyA9ICR0cnVlCiAgICB9CgogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiV1BBRCBBdXRoZW50aWNhdGlvbiA9ICRXUEFEQXV0aCIpID4gJG51bGwKCiAgICBpZigkV1BBREF1dGggLWVxICJOVExNIikKICAgIHsKICAgICAgICAkV1BBREF1dGhJZ25vcmUgPSAoJFdQQURBdXRoSWdub3JlIHwgV2hlcmUtT2JqZWN0IHskXyAtYW5kICRfLlRyaW0oKX0pCgogICAgICAgIGlmKCRXUEFEQXV0aElnbm9yZS5Db3VudCAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIldQQUQgTlRMTSBBdXRoZW50aWNhdGlvbiBJZ25vcmUgTGlzdCA9ICIgKyAoJFdQQURBdXRoSWdub3JlIC1qb2luICIsIikpICA+ICRudWxsCiAgICAgICAgfQoKICAgIH0KCiAgICAkSFRUUFJlc2V0RGVsYXkgPSAoJEhUVFBSZXNldERlbGF5IHwgV2hlcmUtT2JqZWN0IHskXyAtYW5kICRfLlRyaW0oKX0pCgogICAgaWYoJEhUVFBSZXNldERlbGF5LkNvdW50IC1ndCAwKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgUmVzZXQgRGVsYXkgTGlzdCA9ICIgKyAoJEhUVFBSZXNldERlbGF5IC1qb2luICIsIikpICA+ICRudWxsCiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUCBSZXNldCBEZWxheSBUaW1lb3V0ID0gJEhUVFBSZXNldERlbGF5VGltZW91dCBTZWNvbmRzIikgPiAkbnVsbAogICAgfQoKfQoKaWYoJFByb3h5IC1lcSAnWScpCnsKCiAgICBpZigkcHJveHlfcG9ydF9jaGVjaykKICAgIHsKICAgICAgICAkSFRUUCA9ICJOIgogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlByb3h5IENhcHR1cmUvUmVsYXkgRGlzYWJsZWQgRHVlIFRvIEluIFVzZSBQb3J0ICRQcm94eVBvcnQiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlByb3h5IENhcHR1cmUvUmVsYXkgPSBFbmFibGVkIikgID4gJG51bGwKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcm94eSBQb3J0ID0gJFByb3h5UG9ydCIpID4gJG51bGwKICAgICAgICAkUHJveHlQb3J0RmFpbG92ZXIgPSAkUHJveHlQb3J0ICsgMQogICAgICAgICRXUEFEUmVzcG9uc2UgPSAiZnVuY3Rpb24gRmluZFByb3h5Rm9yVVJMKHVybCxob3N0KXtyZXR1cm4gYCJQUk9YWSAkcHJveHlfV1BBRF9JUGA6JFByb3h5UG9ydDsgUFJPWFkgJHByb3h5X1dQQURfSVBgOiRQcm94eVBvcnRGYWlsb3ZlcjsgRElSRUNUYCI7fSIKICAgICAgICAkUHJveHlJZ25vcmUgPSAoJFByb3h5SWdub3JlIHwgV2hlcmUtT2JqZWN0IHskXyAtYW5kICRfLlRyaW0oKX0pCgogICAgICAgIGlmKCRQcm94eUlnbm9yZS5Db3VudCAtZ3QgMCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlByb3h5IElnbm9yZSBMaXN0ID0gIiArICgkUHJveHlJZ25vcmUgLWpvaW4gIiwiKSkgID4gJG51bGwKICAgICAgICB9CgogICAgfQoKfQoKJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgVGFyZ2V0ID0gJFRhcmdldCIpID4gJG51bGwKCmlmKCRVc2VybmFtZXMpCnsKCiAgICBpZigkVXNlcm5hbWVzLkNvdW50IC1lcSAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlbGF5IFVzZXJuYW1lID0gIiArICgkVXNlcm5hbWVzIC1qb2luICIsIikpID4gJG51bGwKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWxheSBVc2VybmFtZXMgPSAiICsgKCRVc2VybmFtZXMgLWpvaW4gIiwiKSkgPiAkbnVsbAogICAgfQoKfQoKaWYoJFJlbGF5QXV0b0Rpc2FibGUgLWVxICdZJykKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgQXV0byBEaXNhYmxlID0gRW5hYmxlZCIpID4gJG51bGwKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlbGF5IEF1dG8gRGlzYWJsZSA9IERpc2FibGVkIikgPiAkbnVsbAp9CgppZigkUmVsYXlBdXRvRXhpdCAtZXEgJ1knKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWxheSBBdXRvIEV4aXQgPSBFbmFibGVkIikgPiAkbnVsbAp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVsYXkgQXV0byBFeGl0ID0gRGlzYWJsZWQiKSA+ICRudWxsCn0KCmlmKCRTZXJ2aWNlKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWxheSBTZXJ2aWNlID0gJFNlcnZpY2UiKSA+ICRudWxsCn0KCmlmKCRTTUIxKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJTTUIgVmVyc2lvbiA9IFNNQjEiKSA+ICRudWxsCiAgICAkU01CX3ZlcnNpb24gPSAnU01CMScKfQoKaWYoJENvbnNvbGVPdXRwdXQgLW5lICdOJykKewogICAgCiAgICBpZigkQ29uc29sZU91dHB1dCAtZXEgJ1knKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCA9IEVuYWJsZWQiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCA9ICRDb25zb2xlT3V0cHV0IikgID4gJG51bGwKICAgIH0KCiAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICR0cnVlCgogICAgaWYoJENvbnNvbGVTdGF0dXMgLWVxIDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiQ29uc29sZSBTdGF0dXMgPSAkQ29uc29sZVN0YXR1cyBNaW51dGUiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZWlmKCRDb25zb2xlU3RhdHVzIC1ndCAxKQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkNvbnNvbGUgU3RhdHVzID0gJENvbnNvbGVTdGF0dXMgTWludXRlcyIpICA+ICRudWxsCiAgICB9Cgp9CmVsc2UKewoKICAgIGlmKCRpbnZlaWdoLnRvb2wgLWVxIDEpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVhbCBUaW1lIENvbnNvbGUgT3V0cHV0IERpc2FibGVkIER1ZSBUbyBFeHRlcm5hbCBUb29sIFNlbGVjdGlvbiIpID4gJG51bGwKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgQ29uc29sZSBPdXRwdXQgPSBEaXNhYmxlZCIpID4gJG51bGwKICAgIH0KCn0KCmlmKCRDb25zb2xlVW5pcXVlIC1lcSAnWScpCnsKICAgICRpbnZlaWdoLmNvbnNvbGVfdW5pcXVlID0gJHRydWUKfQplbHNlCnsKICAgICRpbnZlaWdoLmNvbnNvbGVfdW5pcXVlID0gJGZhbHNlCn0KCmlmKCRGaWxlT3V0cHV0IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBGaWxlIE91dHB1dCA9IEVuYWJsZWQiKSA+ICRudWxsCiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJPdXRwdXQgRGlyZWN0b3J5ID0gJG91dHB1dF9kaXJlY3RvcnkiKSA+ICRudWxsCiAgICAkaW52ZWlnaC5maWxlX291dHB1dCA9ICR0cnVlCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgRmlsZSBPdXRwdXQgPSBEaXNhYmxlZCIpID4gJG51bGwKfQoKaWYoJFJ1blRpbWUgLWVxIDEpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJ1biBUaW1lID0gJFJ1blRpbWUgTWludXRlIikgPiAkbnVsbAp9CmVsc2VpZigkUnVuVGltZSAtZ3QgMSkKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUnVuIFRpbWUgPSAkUnVuVGltZSBNaW51dGVzIikgPiAkbnVsbAp9CgppZigkU2hvd0hlbHAgLWVxICdZJykKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUnVuIFN0b3AtSW52ZWlnaCB0byBzdG9wIEludmVpZ2gtUmVsYXkiKSA+ICRudWxsCiAgICAgICAgCiAgICBpZigkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJQcmVzcyBhbnkga2V5IHRvIHN0b3AgcmVhbCB0aW1lIGNvbnNvbGUgb3V0cHV0IikgPiAkbnVsbAogICAgfQoKfQoKaWYoJGludmVpZ2guc3RhdHVzX291dHB1dCkKewoKICAgIHdoaWxlKCRpbnZlaWdoLnN0YXR1c19xdWV1ZS5Db3VudCAtZ3QgMCkKICAgIHsKCiAgICAgICAgc3dpdGNoIC1XaWxkY2FyZCAoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgIHsKCiAgICAgICAgICAgIHskXyAtbGlrZSAiKiBEaXNhYmxlZCBEdWUgVG8gKiIgLW9yICRfIC1saWtlICJSdW4gU3RvcC1JbnZlaWdoIHRvIHN0b3AgSW52ZWlnaC1SZWxheSIgLW9yICRfIC1saWtlICJXaW5kb3dzIEZpcmV3YWxsID0gRW5hYmxlZCJ9CiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZygkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICB9Cgp9CgokcHJvY2Vzc19JRCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2Vzc106OkdldEN1cnJlbnRQcm9jZXNzKCkgfCBTZWxlY3QtT2JqZWN0IC1leHBhbmQgaWQKJHByb2Nlc3NfSUQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHByb2Nlc3NfSUQpKQokcHJvY2Vzc19JRCA9ICRwcm9jZXNzX0lEIC1yZXBsYWNlICItMDAtMDAiLCIiCltCeXRlW11dJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyA9ICRwcm9jZXNzX0lELlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KCiMgQmVnaW4gU2NyaXB0QmxvY2tzCgojIFNoYXJlZCBCYXNpYyBGdW5jdGlvbnMgU2NyaXB0QmxvY2sKJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2sgPQp7CgogICAgZnVuY3Rpb24gRGF0YUxlbmd0aDIKICAgIHsKICAgICAgICBwYXJhbSAoW0ludF0kbGVuZ3RoX3N0YXJ0LFtCeXRlW11dJHN0cmluZ19leHRyYWN0X2RhdGEpCgogICAgICAgICRzdHJpbmdfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1VJbnQxNigkc3RyaW5nX2V4dHJhY3RfZGF0YVskbGVuZ3RoX3N0YXJ0Li4oJGxlbmd0aF9zdGFydCArIDEpXSwwKQogICAgICAgIHJldHVybiAkc3RyaW5nX2xlbmd0aAogICAgfQoKICAgIGZ1bmN0aW9uIERhdGFMZW5ndGg0CiAgICB7CiAgICAgICAgcGFyYW0gKFtJbnRdJGxlbmd0aF9zdGFydCxbQnl0ZVtdXSRzdHJpbmdfZXh0cmFjdF9kYXRhKQoKICAgICAgICAkc3RyaW5nX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MzIoJHN0cmluZ19leHRyYWN0X2RhdGFbJGxlbmd0aF9zdGFydC4uKCRsZW5ndGhfc3RhcnQgKyAzKV0sMCkKICAgICAgICByZXR1cm4gJHN0cmluZ19sZW5ndGgKICAgIH0KCiAgICBmdW5jdGlvbiBEYXRhVG9TdHJpbmcKICAgIHsKICAgICAgICBwYXJhbSAoW0ludF0kc3RyaW5nX3N0YXJ0LFtJbnRdJHN0cmluZ19sZW5ndGgsW0J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19kYXRhID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkc3RyaW5nX2V4dHJhY3RfZGF0YVskc3RyaW5nX3N0YXJ0Li4oJHN0cmluZ19zdGFydCArICRzdHJpbmdfbGVuZ3RoIC0gMSldKQogICAgICAgICRzdHJpbmdfZGF0YSA9ICRzdHJpbmdfZGF0YSAtcmVwbGFjZSAiLTAwIiwiIgogICAgICAgICRzdHJpbmdfZGF0YSA9ICRzdHJpbmdfZGF0YS5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJHN0cmluZ19leHRyYWN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkc3RyaW5nX2RhdGEsMCwkc3RyaW5nX2RhdGEuTGVuZ3RoKQogICAgICAgIHJldHVybiAkc3RyaW5nX2V4dHJhY3QKICAgIH0KCn0KCiMgSXJraW4gRnVuY3Rpb25zIFNjcmlwdEJsb2NrCiRpcmtpbl9mdW5jdGlvbnNfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeQogICAgewogICAgICAgIHBhcmFtKCRwYWNrZXRfb3JkZXJlZF9kaWN0aW9uYXJ5KQoKICAgICAgICBGb3JFYWNoKCRmaWVsZCBpbiAkcGFja2V0X29yZGVyZWRfZGljdGlvbmFyeS5WYWx1ZXMpCiAgICAgICAgewogICAgICAgICAgICAkYnl0ZV9hcnJheSArPSAkZmllbGQKICAgICAgICB9CgogICAgICAgIHJldHVybiAkYnl0ZV9hcnJheQogICAgfQoKICAgICNOZXRCSU9TCgogICAgZnVuY3Rpb24gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSgpCiAgICB7CiAgICAgICAgcGFyYW0oW0ludF0kcGFja2V0X2hlYWRlcl9sZW5ndGgsW0ludF0kcGFja2V0X2RhdGFfbGVuZ3RoKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfbmV0Ymlvc19zZXNzaW9uX3NlcnZpY2VfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X2hlYWRlcl9sZW5ndGggKyAkcGFja2V0X2RhdGFfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2VfbGVuZ3RoID0gJHBhY2tldF9uZXRiaW9zX3Nlc3Npb25fc2VydmljZV9sZW5ndGhbMi4uMF0KCiAgICAgICAgJHBhY2tldF9OZXRCSU9TU2Vzc2lvblNlcnZpY2UgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfTmV0QklPU1Nlc3Npb25TZXJ2aWNlLkFkZCgiTmV0QklPU1Nlc3Npb25TZXJ2aWNlX01lc3NhZ2VfVHlwZSIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9OZXRCSU9TU2Vzc2lvblNlcnZpY2UuQWRkKCJOZXRCSU9TU2Vzc2lvblNlcnZpY2VfTGVuZ3RoIixbQnl0ZVtdXSgkcGFja2V0X25ldGJpb3Nfc2Vzc2lvbl9zZXJ2aWNlX2xlbmd0aCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X05ldEJJT1NTZXNzaW9uU2VydmljZQogICAgfQoKICAgICNTTUIxCgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQkhlYWRlcigpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2NvbW1hbmQsW0J5dGVbXV0kcGFja2V0X2ZsYWdzLFtCeXRlW11dJHBhY2tldF9mbGFnczIsW0J5dGVbXV0kcGFja2V0X3RyZWVfSUQsW0J5dGVbXV0kcGFja2V0X3Byb2Nlc3NfSUQsW0J5dGVbXV0kcGFja2V0X3VzZXJfSUQpCgogICAgICAgICRwYWNrZXRfU01CSGVhZGVyID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9Qcm90b2NvbCIsW0J5dGVbXV0oMHhmZiwweDUzLDB4NGQsMHg0MikpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfQ29tbWFuZCIsJHBhY2tldF9jb21tYW5kKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX0Vycm9yQ2xhc3MiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9FcnJvckNvZGUiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfRmxhZ3MiLCRwYWNrZXRfZmxhZ3MpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfRmxhZ3MyIiwkcGFja2V0X2ZsYWdzMikKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9Qcm9jZXNzSURIaWdoIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CSGVhZGVyLkFkZCgiU01CSGVhZGVyX1NpZ25hdHVyZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQkhlYWRlci5BZGQoIlNNQkhlYWRlcl9SZXNlcnZlZDIiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfVHJlZUlEIiwkcGFja2V0X3RyZWVfSUQpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfUHJvY2Vzc0lEIiwkcGFja2V0X3Byb2Nlc3NfSUQpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfVXNlcklEIiwkcGFja2V0X3VzZXJfSUQpCiAgICAgICAgJHBhY2tldF9TTUJIZWFkZXIuQWRkKCJTTUJIZWFkZXJfTXVsdGlwbGV4SUQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQkhlYWRlcgogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtTdHJpbmddJHBhY2tldF92ZXJzaW9uKQoKICAgICAgICBpZigkcGFja2V0X3ZlcnNpb24gLWVxICdTTUIxJykKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dJHBhY2tldF9ieXRlX2NvdW50ID0gMHgwYywweDAwCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dJHBhY2tldF9ieXRlX2NvdW50ID0gMHgyMiwweDAwICAKICAgICAgICB9CgogICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X0J5dGVDb3VudCIsJHBhY2tldF9ieXRlX2NvdW50KQogICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1JlcXVlc3RlZERpYWxlY3RzX0RpYWxlY3RfQnVmZmVyRm9ybWF0IixbQnl0ZVtdXSgweDAyKSkKICAgICAgICAkcGFja2V0X1NNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXF1ZXN0ZWREaWFsZWN0c19EaWFsZWN0X05hbWUiLFtCeXRlW11dKDB4NGUsMHg1NCwweDIwLDB4NGMsMHg0ZCwweDIwLDB4MzAsMHgyZSwweDMxLDB4MzIsMHgwMCkpCgogICAgICAgIGlmKCRwYWNrZXRfdmVyc2lvbiAtbmUgJ1NNQjEnKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9TTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfUmVxdWVzdGVkRGlhbGVjdHNfRGlhbGVjdF9CdWZmZXJGb3JtYXQyIixbQnl0ZVtdXSgweDAyKSkKICAgICAgICAgICAgJHBhY2tldF9TTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfUmVxdWVzdGVkRGlhbGVjdHNfRGlhbGVjdF9OYW1lMiIsW0J5dGVbXV0oMHg1MywweDRkLDB4NDIsMHgyMCwweDMyLDB4MmUsMHgzMCwweDMwLDB4MzIsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1JlcXVlc3RlZERpYWxlY3RzX0RpYWxlY3RfQnVmZmVyRm9ybWF0MyIsW0J5dGVbXV0oMHgwMikpCiAgICAgICAgICAgICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1JlcXVlc3RlZERpYWxlY3RzX0RpYWxlY3RfTmFtZTMiLFtCeXRlW11dKDB4NTMsMHg0ZCwweDQyLDB4MjAsMHgzMiwweDJlLDB4M2YsMHgzZiwweDNmLDB4MDApKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfc2VjdXJpdHlfYmxvYikKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2J5dGVfY291bnQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VjdXJpdHlfYmxvYi5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9ieXRlX2NvdW50ID0gJHBhY2tldF9ieXRlX2NvdW50WzAsMV0KICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VjdXJpdHlfYmxvYi5MZW5ndGggKyA1KQogICAgICAgICRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGggPSAkcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoWzAsMV0KCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X1dvcmRDb3VudCIsW0J5dGVbXV0oMHgwYykpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X0FuZFhDb21tYW5kIixbQnl0ZVtdXSgweGZmKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9BbmRYT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9NYXhCdWZmZXIiLFtCeXRlW11dKDB4ZmYsMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X01heE1weENvdW50IixbQnl0ZVtdXSgweDAyLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9WQ051bWJlciIsW0J5dGVbXV0oMHgwMSwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0LkFkZCgiU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3RfU2Vzc2lvbktleSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X1NlY3VyaXR5QmxvYkxlbmd0aCIsJHBhY2tldF9ieXRlX2NvdW50KQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9SZXNlcnZlZDIiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9DYXBhYmlsaXRpZXMiLFtCeXRlW11dKDB4NDQsMHgwMCwweDAwLDB4ODApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9CeXRlQ291bnQiLCRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdC5BZGQoIlNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0X1NlY3VyaXR5QmxvYiIsJHBhY2tldF9zZWN1cml0eV9ibG9iKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9OYXRpdmVPUyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CU2Vzc2lvblNldHVwQW5kWFJlcXVlc3QuQWRkKCJTTUJTZXNzaW9uU2V0dXBBbmRYUmVxdWVzdF9OYXRpdmVMQU5NYW5hZ2UiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0IAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfcGF0aCkKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3BhdGhfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3BhdGguTGVuZ3RoICsgNykKICAgICAgICAkcGFja2V0X3BhdGhfbGVuZ3RoID0gJHBhY2tldF9wYXRoX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MDQpKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfQW5kWENvbW1hbmQiLFtCeXRlW11dKDB4ZmYpKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfQW5kWE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QuQWRkKCJTTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0X0ZsYWdzIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdC5BZGQoIlNNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3RfUGFzc3dvcmRMZW5ndGgiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9CeXRlQ291bnQiLCRwYWNrZXRfcGF0aF9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9QYXNzd29yZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9UcmVlIiwkcGFja2V0X3BhdGgpCiAgICAgICAgJHBhY2tldF9TTUJUcmVlQ29ubmVjdEFuZFhSZXF1ZXN0LkFkZCgiU01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdF9TZXJ2aWNlIixbQnl0ZVtdXSgweDNmLDB4M2YsMHgzZiwweDNmLDB4M2YsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQlRyZWVDb25uZWN0QW5kWFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CTlRDcmVhdGVBbmRYUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X25hbWVkX3BpcGUpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9uYW1lZF9waXBlLkxlbmd0aCkKICAgICAgICAkcGFja2V0X25hbWVkX3BpcGVfbGVuZ3RoID0gJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aFswLDFdCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2ZpbGVfbmFtZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfbmFtZWRfcGlwZS5MZW5ndGggLSAxKQogICAgICAgICRwYWNrZXRfZmlsZV9uYW1lX2xlbmd0aCA9ICRwYWNrZXRfZmlsZV9uYW1lX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MTgpKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQW5kWENvbW1hbmQiLFtCeXRlW11dKDB4ZmYpKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQW5kWE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X1Jlc2VydmVkMiIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9GaWxlTmFtZUxlbiIsJHBhY2tldF9maWxlX25hbWVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQ3JlYXRlRmxhZ3MiLFtCeXRlW11dKDB4MTYsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfUm9vdEZJRCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9BY2Nlc3NNYXNrIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAyKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X0FsbG9jYXRpb25TaXplIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfRmlsZUF0dHJpYnV0ZXMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfU2hhcmVBY2Nlc3MiLFtCeXRlW11dKDB4MDcsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfRGlzcG9zaXRpb24iLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQ3JlYXRlT3B0aW9ucyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJOVENyZWF0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CTlRDcmVhdGVBbmRYUmVxdWVzdF9JbXBlcnNvbmF0aW9uIixbQnl0ZVtdXSgweDAyLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQk5UQ3JlYXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJOVENyZWF0ZUFuZFhSZXF1ZXN0X1NlY3VyaXR5RmxhZ3MiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfQnl0ZUNvdW50IiwkcGFja2V0X25hbWVkX3BpcGVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdC5BZGQoIlNNQk5UQ3JlYXRlQW5kWFJlcXVlc3RfRmlsZW5hbWUiLCRwYWNrZXRfbmFtZWRfcGlwZSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CTlRDcmVhdGVBbmRYUmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJSZWFkQW5kWFJlcXVlc3QoKQogICAgewogICAgICAgICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MGEpKQogICAgICAgICRwYWNrZXRfU01CUmVhZEFuZFhSZXF1ZXN0LkFkZCgiU01CUmVhZEFuZFhSZXF1ZXN0X0FuZFhDb21tYW5kIixbQnl0ZVtdXSgweGZmKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfQW5kWE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9GSUQiLFtCeXRlW11dKDB4MDAsMHg0MCkpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9NYXhDb3VudExvdyIsW0J5dGVbXV0oMHg1OCwweDAyKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9NaW5Db3VudCIsW0J5dGVbXV0oMHg1OCwweDAyKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9Vbmtub3duIixbQnl0ZVtdXSgweGZmLDB4ZmYsMHhmZiwweGZmKSkKICAgICAgICAkcGFja2V0X1NNQlJlYWRBbmRYUmVxdWVzdC5BZGQoIlNNQlJlYWRBbmRYUmVxdWVzdF9SZW1haW5pbmciLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QuQWRkKCJTTUJSZWFkQW5kWFJlcXVlc3RfQnl0ZUNvdW50IixbQnl0ZVtdXSgweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUJSZWFkQW5kWFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2ZpbGVfSUQsW0ludF0kcGFja2V0X1JQQ19sZW5ndGgpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF93cml0ZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfUlBDX2xlbmd0aCkKICAgICAgICAkcGFja2V0X3dyaXRlX2xlbmd0aCA9ICRwYWNrZXRfd3JpdGVfbGVuZ3RoWzAsMV0KCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X1dvcmRDb3VudCIsW0J5dGVbXV0oMHgwZSkpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9BbmRYQ29tbWFuZCIsW0J5dGVbXV0oMHhmZikpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9BbmRYT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfRklEIiwkcGFja2V0X2ZpbGVfSUQpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9PZmZzZXQiLFtCeXRlW11dKDB4ZWEsMHgwMywweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfUmVzZXJ2ZWQyIixbQnl0ZVtdXSgweGZmLDB4ZmYsMHhmZiwweGZmKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X1dyaXRlTW9kZSIsW0J5dGVbXV0oMHgwOCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X1JlbWFpbmluZyIsJHBhY2tldF93cml0ZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TTUJXcml0ZUFuZFhSZXF1ZXN0LkFkZCgiU01CV3JpdGVBbmRYUmVxdWVzdF9EYXRhTGVuZ3RoSGlnaCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X0RhdGFMZW5ndGhMb3ciLCRwYWNrZXRfd3JpdGVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfRGF0YU9mZnNldCIsW0J5dGVbXV0oMHgzZiwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQldyaXRlQW5kWFJlcXVlc3QuQWRkKCJTTUJXcml0ZUFuZFhSZXF1ZXN0X0hpZ2hPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdC5BZGQoIlNNQldyaXRlQW5kWFJlcXVlc3RfQnl0ZUNvdW50IiwkcGFja2V0X3dyaXRlX2xlbmd0aCkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CV3JpdGVBbmRYUmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJDbG9zZVJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtIChbQnl0ZVtdXSRwYWNrZXRfZmlsZV9JRCkKCiAgICAgICAgJHBhY2tldF9TTUJDbG9zZVJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CQ2xvc2VSZXF1ZXN0LkFkZCgiU01CQ2xvc2VSZXF1ZXN0X1dvcmRDb3VudCIsW0J5dGVbXV0oMHgwMykpCiAgICAgICAgJHBhY2tldF9TTUJDbG9zZVJlcXVlc3QuQWRkKCJTTUJDbG9zZVJlcXVlc3RfRklEIiwkcGFja2V0X2ZpbGVfSUQpCiAgICAgICAgJHBhY2tldF9TTUJDbG9zZVJlcXVlc3QuQWRkKCJTTUJDbG9zZVJlcXVlc3RfTGFzdFdyaXRlIixbQnl0ZVtdXSgweGZmLDB4ZmYsMHhmZiwweGZmKSkKICAgICAgICAkcGFja2V0X1NNQkNsb3NlUmVxdWVzdC5BZGQoIlNNQkNsb3NlUmVxdWVzdF9CeXRlQ291bnQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQkNsb3NlUmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUJUcmVlRGlzY29ubmVjdFJlcXVlc3QoKQogICAgewogICAgICAgICRwYWNrZXRfU01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQlRyZWVEaXNjb25uZWN0UmVxdWVzdC5BZGQoIlNNQlRyZWVEaXNjb25uZWN0UmVxdWVzdF9Xb3JkQ291bnQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0LkFkZCgiU01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0X0J5dGVDb3VudCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CVHJlZURpc2Nvbm5lY3RSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQkxvZ29mZkFuZFhSZXF1ZXN0KCkKICAgIHsKICAgICAgICAkcGFja2V0X1NNQkxvZ29mZkFuZFhSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQkxvZ29mZkFuZFhSZXF1ZXN0LkFkZCgiU01CTG9nb2ZmQW5kWFJlcXVlc3RfV29yZENvdW50IixbQnl0ZVtdXSgweDAyKSkKICAgICAgICAkcGFja2V0X1NNQkxvZ29mZkFuZFhSZXF1ZXN0LkFkZCgiU01CTG9nb2ZmQW5kWFJlcXVlc3RfQW5kWENvbW1hbmQiLFtCeXRlW11dKDB4ZmYpKQogICAgICAgICRwYWNrZXRfU01CTG9nb2ZmQW5kWFJlcXVlc3QuQWRkKCJTTUJMb2dvZmZBbmRYUmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJMb2dvZmZBbmRYUmVxdWVzdC5BZGQoIlNNQkxvZ29mZkFuZFhSZXF1ZXN0X0FuZFhPZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUJMb2dvZmZBbmRYUmVxdWVzdC5BZGQoIlNNQkxvZ29mZkFuZFhSZXF1ZXN0X0J5dGVDb3VudCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CTG9nb2ZmQW5kWFJlcXVlc3QKICAgIH0KCiAgICAjU01CMgoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIySGVhZGVyKCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfY29tbWFuZCxbSW50XSRwYWNrZXRfbWVzc2FnZV9JRCxbQnl0ZVtdXSRwYWNrZXRfdHJlZV9JRCxbQnl0ZVtdXSRwYWNrZXRfc2Vzc2lvbl9JRCkKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X21lc3NhZ2VfSUQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfbWVzc2FnZV9JRCkgKyAweDAwLDB4MDAsMHgwMCwweDAwCgogICAgICAgICRwYWNrZXRfU01CMkhlYWRlciA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9Qcm90b2NvbElEIixbQnl0ZVtdXSgweGZlLDB4NTMsMHg0ZCwweDQyKSkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4NDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9DcmVkaXRDaGFyZ2UiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9DaGFubmVsU2VxdWVuY2UiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX0NvbW1hbmQiLCRwYWNrZXRfY29tbWFuZCkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9GbGFncyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9OZXh0Q29tbWFuZCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9NZXNzYWdlSUQiLCRwYWNrZXRfbWVzc2FnZV9JRCkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX1Jlc2VydmVkMiIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIySGVhZGVyLkFkZCgiU01CMkhlYWRlcl9UcmVlSUQiLCRwYWNrZXRfdHJlZV9JRCkKICAgICAgICAkcGFja2V0X1NNQjJIZWFkZXIuQWRkKCJTTUIySGVhZGVyX1Nlc3Npb25JRCIsJHBhY2tldF9zZXNzaW9uX0lEKQogICAgICAgICRwYWNrZXRfU01CMkhlYWRlci5BZGQoIlNNQjJIZWFkZXJfU2lnbmF0dXJlIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CMkhlYWRlcgogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0KCkKICAgIHsKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgyNCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X0RpYWxlY3RDb3VudCIsW0J5dGVbXV0oMHgwMiwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1NlY3VyaXR5TW9kZSIsW0J5dGVbXV0oMHgwMSwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfQ2FwYWJpbGl0aWVzIixbQnl0ZVtdXSgweDQwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QuQWRkKCJTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0X0NsaWVudEdVSUQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfTmVnb3RpYXRlQ29udGV4dE9mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9OZWdvdGlhdGVDb250ZXh0Q291bnQiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9SZXNlcnZlZDIiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0LkFkZCgiU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdF9EaWFsZWN0IixbQnl0ZVtdXSgweDAyLDB4MDIpKQogICAgICAgICRwYWNrZXRfU01CMk5lZ290aWF0ZVByb3RvY29sUmVxdWVzdC5BZGQoIlNNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3RfRGlhbGVjdDIiLFtCeXRlW11dKDB4MTAsMHgwMikpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMlNlc3Npb25TZXR1cFJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9zZWN1cml0eV9ibG9iKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VjdXJpdHlfYmxvYi5MZW5ndGgpCiAgICAgICAgJHBhY2tldF9zZWN1cml0eV9ibG9iX2xlbmd0aCA9ICRwYWNrZXRfc2VjdXJpdHlfYmxvYl9sZW5ndGhbMCwxXQoKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgxOSwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfRmxhZ3MiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25TZXR1cFJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvblNldHVwUmVxdWVzdF9TZWN1cml0eU1vZGUiLFtCeXRlW11dKDB4MDEpKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25TZXR1cFJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvblNldHVwUmVxdWVzdF9DYXBhYmlsaXRpZXMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25TZXR1cFJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvblNldHVwUmVxdWVzdF9DaGFubmVsIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfU2VjdXJpdHlCdWZmZXJPZmZzZXQiLFtCeXRlW11dKDB4NTgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyU2Vzc2lvblNldHVwUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0X1NlY3VyaXR5QnVmZmVyTGVuZ3RoIiwkcGFja2V0X3NlY3VyaXR5X2Jsb2JfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25TZXR1cFJlcXVlc3QuQWRkKCJTTUIyU2Vzc2lvblNldHVwUmVxdWVzdF9QcmV2aW91c1Nlc3Npb25JRCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25TZXR1cFJlcXVlc3RfQnVmZmVyIiwkcGFja2V0X3NlY3VyaXR5X2Jsb2IpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0IAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIyVHJlZUNvbm5lY3RSZXF1ZXN0KCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfcGF0aCkKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X3BhdGhfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3BhdGguTGVuZ3RoKQogICAgICAgICRwYWNrZXRfcGF0aF9sZW5ndGggPSAkcGFja2V0X3BhdGhfbGVuZ3RoWzAsMV0KCiAgICAgICAgJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJUcmVlQ29ubmVjdFJlcXVlc3QuQWRkKCJTTUIyVHJlZUNvbm5lY3RSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MDksMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVDb25uZWN0UmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJUcmVlQ29ubmVjdFJlcXVlc3QuQWRkKCJTTUIyVHJlZUNvbm5lY3RSZXF1ZXN0X1BhdGhPZmZzZXQiLFtCeXRlW11dKDB4NDgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyVHJlZUNvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVDb25uZWN0UmVxdWVzdF9QYXRoTGVuZ3RoIiwkcGFja2V0X3BhdGhfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CMlRyZWVDb25uZWN0UmVxdWVzdC5BZGQoIlNNQjJUcmVlQ29ubmVjdFJlcXVlc3RfQnVmZmVyIiwkcGFja2V0X3BhdGgpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJUcmVlQ29ubmVjdFJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMkNyZWF0ZVJlcXVlc3RGaWxlKCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfbmFtZWRfcGlwZSkKCiAgICAgICAgJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9uYW1lZF9waXBlLkxlbmd0aCkKICAgICAgICAkcGFja2V0X25hbWVkX3BpcGVfbGVuZ3RoID0gJHBhY2tldF9uYW1lZF9waXBlX2xlbmd0aFswLDFdCgogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDM5LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0ZsYWdzIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9SZXF1ZXN0ZWRPcGxvY2tMZXZlbCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfSW1wZXJzb25hdGlvbiIsW0J5dGVbXV0oMHgwMiwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfU01CQ3JlYXRlRmxhZ3MiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfRGVzaXJlZEFjY2VzcyIsW0J5dGVbXV0oMHgwMywweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfRmlsZUF0dHJpYnV0ZXMiLFtCeXRlW11dKDB4ODAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX1NoYXJlQWNjZXNzIixbQnl0ZVtdXSgweDAxLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9DcmVhdGVEaXNwb3NpdGlvbiIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfQ3JlYXRlT3B0aW9ucyIsW0J5dGVbXV0oMHg0MCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfTmFtZU9mZnNldCIsW0J5dGVbXV0oMHg3OCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9OYW1lTGVuZ3RoIiwkcGFja2V0X25hbWVkX3BpcGVfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU01CMkNyZWF0ZVJlcXVlc3RGaWxlLkFkZCgiU01CMkNyZWF0ZVJlcXVlc3RGaWxlX0NyZWF0ZUNvbnRleHRzT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZS5BZGQoIlNNQjJDcmVhdGVSZXF1ZXN0RmlsZV9DcmVhdGVDb250ZXh0c0xlbmd0aCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyQ3JlYXRlUmVxdWVzdEZpbGUuQWRkKCJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfQnVmZmVyIiwkcGFja2V0X25hbWVkX3BpcGUpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJDcmVhdGVSZXF1ZXN0RmlsZQogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIyUmVhZFJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtIChbQnl0ZVtdXSRwYWNrZXRfZmlsZV9JRCkKCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MzEsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfUGFkZGluZyIsW0J5dGVbXV0oMHg1MCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfRmxhZ3MiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X0xlbmd0aCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MTAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X0ZpbGVJRCIsJHBhY2tldF9maWxlX0lEKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X01pbmltdW1Db3VudCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfQ2hhbm5lbCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfUmVtYWluaW5nQnl0ZXMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0LkFkZCgiU01CMlJlYWRSZXF1ZXN0X1JlYWRDaGFubmVsSW5mb09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJSZWFkUmVxdWVzdC5BZGQoIlNNQjJSZWFkUmVxdWVzdF9SZWFkQ2hhbm5lbEluZm9MZW5ndGgiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyUmVhZFJlcXVlc3QuQWRkKCJTTUIyUmVhZFJlcXVlc3RfQnVmZmVyIixbQnl0ZVtdXSgweDMwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CMlJlYWRSZXF1ZXN0CiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9maWxlX0lELFtJbnRdJHBhY2tldF9SUENfbGVuZ3RoKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfd3JpdGVfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X1JQQ19sZW5ndGgpCgogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDMxLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfRGF0YU9mZnNldCIsW0J5dGVbXV0oMHg3MCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X0xlbmd0aCIsJHBhY2tldF93cml0ZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9PZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9GaWxlSUQiLCRwYWNrZXRfZmlsZV9JRCkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X0NoYW5uZWwiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfUmVtYWluaW5nQnl0ZXMiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMldyaXRlUmVxdWVzdC5BZGQoIlNNQjJXcml0ZVJlcXVlc3RfV3JpdGVDaGFubmVsSW5mb09mZnNldCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QuQWRkKCJTTUIyV3JpdGVSZXF1ZXN0X1dyaXRlQ2hhbm5lbEluZm9MZW5ndGgiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyV3JpdGVSZXF1ZXN0LkFkZCgiU01CMldyaXRlUmVxdWVzdF9GbGFncyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJXcml0ZVJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMkNsb3NlUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0gKFtCeXRlW11dJHBhY2tldF9maWxlX0lEKQoKICAgICAgICAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU01CMkNsb3NlUmVxdWVzdC5BZGQoIlNNQjJDbG9zZVJlcXVlc3RfU3RydWN0dXJlU2l6ZSIsW0J5dGVbXV0oMHgxOCwweDAwKSkKICAgICAgICAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QuQWRkKCJTTUIyQ2xvc2VSZXF1ZXN0X0ZsYWdzIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNsb3NlUmVxdWVzdC5BZGQoIlNNQjJDbG9zZVJlcXVlc3RfUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMkNsb3NlUmVxdWVzdC5BZGQoIlNNQjJDbG9zZVJlcXVlc3RfRmlsZUlEIiwkcGFja2V0X2ZpbGVfSUQpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NNQjJDbG9zZVJlcXVlc3QKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdCgpCiAgICB7CiAgICAgICAgJHBhY2tldF9TTUIyVHJlZURpc2Nvbm5lY3RSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJUcmVlRGlzY29ubmVjdFJlcXVlc3QuQWRkKCJTTUIyVHJlZURpc2Nvbm5lY3RSZXF1ZXN0X1N0cnVjdHVyZVNpemUiLFtCeXRlW11dKDB4MDQsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TTUIyVHJlZURpc2Nvbm5lY3RSZXF1ZXN0LkFkZCgiU01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdF9SZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU01CMlRyZWVEaXNjb25uZWN0UmVxdWVzdAogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTTUIyU2Vzc2lvbkxvZ29mZlJlcXVlc3QoKQogICAgewogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NNQjJTZXNzaW9uTG9nb2ZmUmVxdWVzdC5BZGQoIlNNQjJTZXNzaW9uTG9nb2ZmUmVxdWVzdF9TdHJ1Y3R1cmVTaXplIixbQnl0ZVtdXSgweDA0LDB4MDApKQogICAgICAgICRwYWNrZXRfU01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0LkFkZCgiU01CMlNlc3Npb25Mb2dvZmZSZXF1ZXN0X1Jlc2VydmVkIixbQnl0ZVtdXSgweDAwLDB4MDApKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TTUIyU2Vzc2lvbkxvZ29mZlJlcXVlc3QKICAgIH0KCiAgICAjTlRMTQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXROVExNU1NQTmVnb3RpYXRlKCkKICAgIHsKICAgICAgICBwYXJhbShbQnl0ZVtdXSRwYWNrZXRfbmVnb3RpYXRlX2ZsYWdzLFtCeXRlW11dJHBhY2tldF92ZXJzaW9uKQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfTlRMTVNTUF9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKDMyICsgJHBhY2tldF92ZXJzaW9uLkxlbmd0aCkKICAgICAgICAkcGFja2V0X05UTE1TU1BfbGVuZ3RoID0gJHBhY2tldF9OVExNU1NQX2xlbmd0aFswXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzEgPSAkcGFja2V0X05UTE1TU1BfbGVuZ3RoWzBdICsgMzIKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfQVNOX2xlbmd0aF8yID0gJHBhY2tldF9OVExNU1NQX2xlbmd0aFswXSArIDIyCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X0FTTl9sZW5ndGhfMyA9ICRwYWNrZXRfTlRMTVNTUF9sZW5ndGhbMF0gKyAyMAogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzQgPSAkcGFja2V0X05UTE1TU1BfbGVuZ3RoWzBdICsgMgoKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfSW5pdGlhbENvbnRleHRUb2tlbklEIixbQnl0ZVtdXSgweDYwKSkgIyB0aGUgQVNOLjEga2V5IG5hbWVzIGFyZSBsaWtlbHkgbm90IGFsbCBjb3JyZWN0CiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9Jbml0aWFsY29udGV4dFRva2VuTGVuZ3RoIiwkcGFja2V0X0FTTl9sZW5ndGhfMSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX1RoaXNNZWNoSUQiLFtCeXRlW11dKDB4MDYpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfVGhpc01lY2hMZW5ndGgiLFtCeXRlW11dKDB4MDYpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfT0lEIixbQnl0ZVtdXSgweDJiLDB4MDYsMHgwMSwweDA1LDB4MDUsMHgwMikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9Jbm5lckNvbnRleHRUb2tlbklEIixbQnl0ZVtdXSgweGEwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0lubmVyQ29udGV4dFRva2VuTGVuZ3RoIiwkcGFja2V0X0FTTl9sZW5ndGhfMikKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0lubmVyQ29udGV4dFRva2VuSUQyIixbQnl0ZVtdXSgweDMwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0lubmVyQ29udGV4dFRva2VuTGVuZ3RoMiIsJHBhY2tldF9BU05fbGVuZ3RoXzMpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9NZWNoVHlwZXNJRCIsW0J5dGVbXV0oMHhhMCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9NZWNoVHlwZXNMZW5ndGgiLFtCeXRlW11dKDB4MGUpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFR5cGVzSUQyIixbQnl0ZVtdXSgweDMwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUeXBlc0xlbmd0aDIiLFtCeXRlW11dKDB4MGMpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFR5cGVzSUQzIixbQnl0ZVtdXSgweDA2KSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lY2hUeXBlc0xlbmd0aDMiLFtCeXRlW11dKDB4MGEpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFR5cGUiLFtCeXRlW11dKDB4MmIsMHgwNiwweDAxLDB4MDQsMHgwMSwweDgyLDB4MzcsMHgwMiwweDAyLDB4MGEpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFRva2VuSUQiLFtCeXRlW11dKDB4YTIpKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfTWVjaFRva2VuTGVuZ3RoIiwkcGFja2V0X0FTTl9sZW5ndGhfNCkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX05UTE1TU1BJRCIsW0J5dGVbXV0oMHgwNCkpCiAgICAgICAgJHBhY2tldF9OVExNU1NQTmVnb3RpYXRlLkFkZCgiTlRMTVNTUE5lZ290aWF0ZV9OVExNU1NQTGVuZ3RoIiwkcGFja2V0X05UTE1TU1BfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfSWRlbnRpZmllciIsW0J5dGVbXV0oMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX01lc3NhZ2VUeXBlIixbQnl0ZVtdXSgweDAxLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX05lZ290aWF0ZUZsYWdzIiwkcGFja2V0X25lZ290aWF0ZV9mbGFncykKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0NhbGxpbmdXb3Jrc3RhdGlvbkRvbWFpbiIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BOZWdvdGlhdGUuQWRkKCJOVExNU1NQTmVnb3RpYXRlX0NhbGxpbmdXb3Jrc3RhdGlvbk5hbWUiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCgogICAgICAgIGlmKCRwYWNrZXRfdmVyc2lvbikKICAgICAgICB7CiAgICAgICAgICAgICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZS5BZGQoIk5UTE1TU1BOZWdvdGlhdGVfVmVyc2lvbiIsJHBhY2tldF92ZXJzaW9uKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRwYWNrZXRfTlRMTVNTUE5lZ290aWF0ZQogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXROVExNU1NQQXV0aCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X05UTE1fcmVzcG9uc2UpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF9OVExNU1NQX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9OVExNX3Jlc3BvbnNlLkxlbmd0aCkKICAgICAgICAkcGFja2V0X05UTE1TU1BfbGVuZ3RoID0gJHBhY2tldF9OVExNU1NQX2xlbmd0aFsxLDBdCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X0FTTl9sZW5ndGhfMSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9OVExNX3Jlc3BvbnNlLkxlbmd0aCArIDEyKQogICAgICAgICRwYWNrZXRfQVNOX2xlbmd0aF8xID0gJHBhY2tldF9BU05fbGVuZ3RoXzFbMSwwXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzIgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfTlRMTV9yZXNwb25zZS5MZW5ndGggKyA4KQogICAgICAgICRwYWNrZXRfQVNOX2xlbmd0aF8yID0gJHBhY2tldF9BU05fbGVuZ3RoXzJbMSwwXQogICAgICAgIFtCeXRlW11dJHBhY2tldF9BU05fbGVuZ3RoXzMgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfTlRMTV9yZXNwb25zZS5MZW5ndGggKyA0KQogICAgICAgICRwYWNrZXRfQVNOX2xlbmd0aF8zID0gJHBhY2tldF9BU05fbGVuZ3RoXzNbMSwwXQoKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoLkFkZCgiTlRMTVNTUEF1dGhfQVNOSUQiLFtCeXRlW11dKDB4YTEsMHg4MikpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTkxlbmd0aCIsJHBhY2tldF9BU05fbGVuZ3RoXzEpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTklEMiIsW0J5dGVbXV0oMHgzMCwweDgyKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoLkFkZCgiTlRMTVNTUEF1dGhfQVNOTGVuZ3RoMiIsJHBhY2tldF9BU05fbGVuZ3RoXzIpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX0FTTklEMyIsW0J5dGVbXV0oMHhhMiwweDgyKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoLkFkZCgiTlRMTVNTUEF1dGhfQVNOTGVuZ3RoMyIsJHBhY2tldF9BU05fbGVuZ3RoXzMpCiAgICAgICAgJHBhY2tldF9OVExNU1NQQXV0aC5BZGQoIk5UTE1TU1BBdXRoX05UTE1TU1BJRCIsW0J5dGVbXV0oMHgwNCwweDgyKSkKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoLkFkZCgiTlRMTVNTUEF1dGhfTlRMTVNTUExlbmd0aCIsJHBhY2tldF9OVExNU1NQX2xlbmd0aCkKICAgICAgICAkcGFja2V0X05UTE1TU1BBdXRoLkFkZCgiTlRMTVNTUEF1dGhfTlRMTVJlc3BvbnNlIiwkcGFja2V0X05UTE1fcmVzcG9uc2UpCgogICAgICAgIHJldHVybiAkcGFja2V0X05UTE1TU1BBdXRoCiAgICB9CgogICAgI1JQQwoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRSUENCaW5kKCkKICAgIHsKICAgICAgICBwYXJhbShbSW50XSRwYWNrZXRfY2FsbF9JRCxbQnl0ZVtdXSRwYWNrZXRfbWF4X2ZyYWcsW0J5dGVbXV0kcGFja2V0X251bV9jdHhfaXRlbXMsW0J5dGVbXV0kcGFja2V0X2NvbnRleHRfSUQsW0J5dGVbXV0kcGFja2V0X1VVSUQsW0J5dGVbXV0kcGFja2V0X1VVSURfdmVyc2lvbikKCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2NhbGxfSURfYnl0ZXMgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfY2FsbF9JRCkKCiAgICAgICAgJHBhY2tldF9SUENCaW5kID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1ZlcnNpb24iLFtCeXRlW11dKDB4MDUpKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVmVyc2lvbk1pbm9yIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1BhY2tldFR5cGUiLFtCeXRlW11dKDB4MGIpKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfUGFja2V0RmxhZ3MiLFtCeXRlW11dKDB4MDMpKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfRGF0YVJlcHJlc2VudGF0aW9uIixbQnl0ZVtdXSgweDEwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ZyYWdMZW5ndGgiLFtCeXRlW11dKDB4NDgsMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoTGVuZ3RoIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ2FsbElEIiwkcGFja2V0X2NhbGxfSURfYnl0ZXMpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9NYXhYbWl0RnJhZyIsW0J5dGVbXV0oMHhiOCwweDEwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX01heFJlY3ZGcmFnIixbQnl0ZVtdXSgweGI4LDB4MTApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXNzb2NHcm91cCIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9OdW1DdHhJdGVtcyIsJHBhY2tldF9udW1fY3R4X2l0ZW1zKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVW5rbm93biIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ29udGV4dElEIiwkcGFja2V0X2NvbnRleHRfSUQpCiAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9OdW1UcmFuc0l0ZW1zIixbQnl0ZVtdXSgweDAxKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1Vua25vd24yIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZSIsJHBhY2tldF9VVUlEKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlVmVyIiwkcGFja2V0X1VVSURfdmVyc2lvbikKICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlck1pbm9yIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVHJhbnNmZXJTeW50YXgiLFtCeXRlW11dKDB4MDQsMHg1ZCwweDg4LDB4OGEsMHhlYiwweDFjLDB4YzksMHgxMSwweDlmLDB4ZTgsMHgwOCwweDAwLDB4MmIsMHgxMCwweDQ4LDB4NjApKQogICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVHJhbnNmZXJTeW50YXhWZXIiLFtCeXRlW11dKDB4MDIsMHgwMCwweDAwLDB4MDApKQoKICAgICAgICBpZigkcGFja2V0X251bV9jdHhfaXRlbXNbMF0gLWVxIDIpCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRDIiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTnVtVHJhbnNJdGVtczIiLFtCeXRlW11dKDB4MDEpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1Vua25vd24zIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2UyIixbQnl0ZVtdXSgweGM0LDB4ZmUsMHhmYywweDk5LDB4NjAsMHg1MiwweDFiLDB4MTAsMHhiYiwweGNiLDB4MDAsMHhhYSwweDAwLDB4MjEsMHgzNCwweDdhKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXIyIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlck1pbm9yMiIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9UcmFuc2ZlclN5bnRheDIiLFtCeXRlW11dKDB4MmMsMHgxYywweGI3LDB4NmMsMHgxMiwweDk4LDB4NDAsMHg0NSwweDAzLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4VmVyMiIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgfQogICAgICAgIGVsc2VpZigkcGFja2V0X251bV9jdHhfaXRlbXNbMF0gLWVxIDMpCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRDIiLFtCeXRlW11dKDB4MDEsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTnVtVHJhbnNJdGVtczIiLFtCeXRlW11dKDB4MDEpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1Vua25vd24zIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2UyIixbQnl0ZVtdXSgweDQzLDB4MDEsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhjMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQ2KSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9JbnRlcmZhY2VWZXIyIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlck1pbm9yMiIsW0J5dGVbXV0oMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9UcmFuc2ZlclN5bnRheDIiLFtCeXRlW11dKDB4MzMsMHgwNSwweDcxLDB4NzEsMHhiYSwweGJlLDB4MzcsMHg0OSwweDgzLDB4MTksMHhiNSwweGRiLDB4ZWYsMHg5YywweGNjLDB4MzYpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4VmVyMiIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ29udGV4dElEMyIsW0J5dGVbXV0oMHgwMiwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9OdW1UcmFuc0l0ZW1zMyIsW0J5dGVbXV0oMHgwMSkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVW5rbm93bjQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZTMiLFtCeXRlW11dKDB4NDMsMHgwMSwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGMwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDYpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0ludGVyZmFjZVZlcjMiLFtCeXRlW11dKDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSW50ZXJmYWNlVmVyTWlub3IzIixbQnl0ZVtdXSgweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX1RyYW5zZmVyU3ludGF4MyIsW0J5dGVbXV0oMHgyYywweDFjLDB4YjcsMHg2YywweDEyLDB4OTgsMHg0MCwweDQ1LDB4MDMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfVHJhbnNmZXJTeW50YXhWZXIzIixbQnl0ZVtdXSgweDAxLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoVHlwZSIsW0J5dGVbXV0oMHgwYSkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQXV0aExldmVsIixbQnl0ZVtdXSgweDA0KSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoUGFkTGVuZ3RoIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoUmVzZXJ2ZWQiLFtCeXRlW11dKDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NvbnRleHRJRDQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0lkZW50aWZpZXIiLFtCeXRlW11dKDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTWVzc2FnZVR5cGUiLFtCeXRlW11dKDB4MDEsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX05lZ290aWF0ZUZsYWdzIixbQnl0ZVtdXSgweDk3LDB4ODIsMHgwOCwweGUyKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9DYWxsaW5nV29ya3N0YXRpb25Eb21haW4iLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ2FsbGluZ1dvcmtzdGF0aW9uTmFtZSIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9PU1ZlcnNpb24iLFtCeXRlW11dKDB4MDYsMHgwMSwweGIxLDB4MWQsMHgwMCwweDAwLDB4MDAsMHgwZikpCiAgICAgICAgfQoKICAgICAgICBpZigkcGFja2V0X2NhbGxfSUQgLWVxIDMpCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0F1dGhUeXBlIixbQnl0ZVtdXSgweDBhKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9BdXRoTGV2ZWwiLFtCeXRlW11dKDB4MDIpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0F1dGhQYWRMZW5ndGgiLFtCeXRlW11dKDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0F1dGhSZXNlcnZlZCIsW0J5dGVbXV0oMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfQ29udGV4dElEMyIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfSWRlbnRpZmllciIsW0J5dGVbXV0oMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9NZXNzYWdlVHlwZSIsW0J5dGVbXV0oMHgwMSwweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgICAgICRwYWNrZXRfUlBDQmluZC5BZGQoIlJQQ0JpbmRfTmVnb3RpYXRlRmxhZ3MiLFtCeXRlW11dKDB4OTcsMHg4MiwweDA4LDB4ZTIpKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX0NhbGxpbmdXb3Jrc3RhdGlvbkRvbWFpbiIsW0J5dGVbXV0oMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAgICAgJHBhY2tldF9SUENCaW5kLkFkZCgiUlBDQmluZF9DYWxsaW5nV29ya3N0YXRpb25OYW1lIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICAgICAkcGFja2V0X1JQQ0JpbmQuQWRkKCJSUENCaW5kX09TVmVyc2lvbiIsW0J5dGVbXV0oMHgwNiwweDAxLDB4YjEsMHgxZCwweDAwLDB4MDAsMHgwMCwweDBmKSkKICAgICAgICB9CgogICAgICAgIHJldHVybiAkcGFja2V0X1JQQ0JpbmQKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0UlBDUmVxdWVzdCgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2ZsYWdzLFtJbnRdJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCxbSW50XSRwYWNrZXRfYXV0aF9sZW5ndGgsW0ludF0kcGFja2V0X2F1dGhfcGFkZGluZyxbQnl0ZVtdXSRwYWNrZXRfY2FsbF9JRCxbQnl0ZVtdXSRwYWNrZXRfY29udGV4dF9JRCxbQnl0ZVtdXSRwYWNrZXRfb3BudW0sW0J5dGVbXV0kcGFja2V0X2RhdGEpCgogICAgICAgIGlmKCRwYWNrZXRfYXV0aF9sZW5ndGggLWd0IDApCiAgICAgICAgewogICAgICAgICAgICAkcGFja2V0X2Z1bGxfYXV0aF9sZW5ndGggPSAkcGFja2V0X2F1dGhfbGVuZ3RoICsgJHBhY2tldF9hdXRoX3BhZGRpbmcgKyA4CiAgICAgICAgfQoKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfd3JpdGVfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X3NlcnZpY2VfbGVuZ3RoICsgMjQgKyAkcGFja2V0X2Z1bGxfYXV0aF9sZW5ndGggKyAkcGFja2V0X2RhdGEuTGVuZ3RoKQogICAgICAgIFtCeXRlW11dJHBhY2tldF9mcmFnX2xlbmd0aCA9ICRwYWNrZXRfd3JpdGVfbGVuZ3RoWzAsMV0KICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfYWxsb2NfaGludCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCArICRwYWNrZXRfZGF0YS5MZW5ndGgpCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2F1dGhfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkcGFja2V0X2F1dGhfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfYXV0aF9sZW5ndGggPSAkcGFja2V0X2F1dGhfbGVuZ3RoWzAsMV0KCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X1ZlcnNpb24iLFtCeXRlW11dKDB4MDUpKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfVmVyc2lvbk1pbm9yIixbQnl0ZVtdXSgweDAwKSkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X1BhY2tldFR5cGUiLFtCeXRlW11dKDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfUGFja2V0RmxhZ3MiLCRwYWNrZXRfZmxhZ3MpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9EYXRhUmVwcmVzZW50YXRpb24iLFtCeXRlW11dKDB4MTAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfRnJhZ0xlbmd0aCIsJHBhY2tldF9mcmFnX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X0F1dGhMZW5ndGgiLCRwYWNrZXRfYXV0aF9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9DYWxsSUQiLCRwYWNrZXRfY2FsbF9JRCkKICAgICAgICAkcGFja2V0X1JQQ1JlcXVlc3QuQWRkKCJSUENSZXF1ZXN0X0FsbG9jSGludCIsJHBhY2tldF9hbGxvY19oaW50KQogICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfQ29udGV4dElEIiwkcGFja2V0X2NvbnRleHRfSUQpCiAgICAgICAgJHBhY2tldF9SUENSZXF1ZXN0LkFkZCgiUlBDUmVxdWVzdF9PcG51bSIsJHBhY2tldF9vcG51bSkKCiAgICAgICAgaWYoJHBhY2tldF9kYXRhLkxlbmd0aCkKICAgICAgICB7CiAgICAgICAgICAgICRwYWNrZXRfUlBDUmVxdWVzdC5BZGQoIlJQQ1JlcXVlc3RfRGF0YSIsJHBhY2tldF9kYXRhKQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICRwYWNrZXRfUlBDUmVxdWVzdAogICAgfQoKICAgICNTQ00KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U0NNT3BlblNDTWFuYWdlclcoKQogICAgewogICAgICAgIHBhcmFtIChbQnl0ZVtdXSRwYWNrZXRfc2VydmljZSxbQnl0ZVtdXSRwYWNrZXRfc2VydmljZV9sZW5ndGgpCgogICAgICAgIFtCeXRlW11dJHBhY2tldF93cml0ZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VydmljZS5MZW5ndGggKyA5MikKICAgICAgICBbQnl0ZVtdXSRwYWNrZXRfZnJhZ19sZW5ndGggPSAkcGFja2V0X3dyaXRlX2xlbmd0aFswLDFdCiAgICAgICAgW0J5dGVbXV0kcGFja2V0X2FsbG9jX2hpbnQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwYWNrZXRfc2VydmljZS5MZW5ndGggKyA2OCkKICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMSA9IFtTdHJpbmddKDEuLjIgfCBGb3JFYWNoLU9iamVjdCB7InswOlgyfSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gMSAtTWF4aW11bSAyNTUpfSkKICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMSA9ICRwYWNrZXRfcmVmZXJlbnRfSUQxLlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMSArPSAweDAwLDB4MDAKICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMiA9IFtTdHJpbmddKDEuLjIgfCBGb3JFYWNoLU9iamVjdCB7InswOlgyfSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gMSAtTWF4aW11bSAyNTUpfSkKICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMiA9ICRwYWNrZXRfcmVmZXJlbnRfSUQyLlNwbGl0KCIgIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkcGFja2V0X3JlZmVyZW50X0lEMiArPSAweDAwLDB4MDAKCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX01hY2hpbmVOYW1lX1JlZmVyZW50SUQiLCRwYWNrZXRfcmVmZXJlbnRfSUQxKQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19NYWNoaW5lTmFtZV9NYXhDb3VudCIsJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfTWFjaGluZU5hbWVfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfTWFjaGluZU5hbWVfQWN0dWFsQ291bnQiLCRwYWNrZXRfc2VydmljZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX01hY2hpbmVOYW1lIiwkcGFja2V0X3NlcnZpY2UpCiAgICAgICAgJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVy5BZGQoIlNDTU9wZW5TQ01hbmFnZXJXX0RhdGFiYXNlX1JlZmVyZW50SUQiLCRwYWNrZXRfcmVmZXJlbnRfSUQyKQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19EYXRhYmFzZV9OYW1lTWF4Q291bnQiLFtCeXRlW11dKDB4MGYsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNT3BlblNDTWFuYWdlclcuQWRkKCJTQ01PcGVuU0NNYW5hZ2VyV19EYXRhYmFzZV9OYW1lT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfRGF0YWJhc2VfTmFtZUFjdHVhbENvdW50IixbQnl0ZVtdXSgweDBmLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfRGF0YWJhc2UiLFtCeXRlW11dKDB4NTMsMHgwMCwweDY1LDB4MDAsMHg3MiwweDAwLDB4NzYsMHgwMCwweDY5LDB4MDAsMHg2MywweDAwLDB4NjUsMHgwMCwweDczLDB4MDAsMHg0MSwweDAwLDB4NjMsMHgwMCwweDc0LDB4MDAsMHg2OSwweDAwLDB4NzYsMHgwMCwweDY1LDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfVW5rbm93biIsW0J5dGVbXV0oMHhiZiwweGJmKSkKICAgICAgICAkcGFja2V0X1NDTU9wZW5TQ01hbmFnZXJXLkFkZCgiU0NNT3BlblNDTWFuYWdlcldfQWNjZXNzTWFzayIsW0J5dGVbXV0oMHgzZiwweDAwLDB4MDAsMHgwMCkpCiAgICAKICAgICAgICByZXR1cm4gJHBhY2tldF9TQ01PcGVuU0NNYW5hZ2VyVwogICAgfQoKICAgIGZ1bmN0aW9uIEdldC1QYWNrZXRTQ01DcmVhdGVTZXJ2aWNlVygpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2NvbnRleHRfaGFuZGxlLFtCeXRlW11dJHBhY2tldF9zZXJ2aWNlLFtCeXRlW11dJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCwKICAgICAgICAgICAgICAgIFtCeXRlW11dJHBhY2tldF9jb21tYW5kLFtCeXRlW11dJHBhY2tldF9jb21tYW5kX2xlbmd0aCkKICAgICAgICAgICAgICAgIAogICAgICAgICRwYWNrZXRfcmVmZXJlbnRfSUQgPSBbU3RyaW5nXSgxLi4yIHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgJHBhY2tldF9yZWZlcmVudF9JRCA9ICRwYWNrZXRfcmVmZXJlbnRfSUQuU3BsaXQoIiAiKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRwYWNrZXRfcmVmZXJlbnRfSUQgKz0gMHgwMCwweDAwCgogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19Db250ZXh0SGFuZGxlIiwkcGFja2V0X2NvbnRleHRfaGFuZGxlKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19TZXJ2aWNlTmFtZV9NYXhDb3VudCIsJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfU2VydmljZU5hbWVfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfU2VydmljZU5hbWVfQWN0dWFsQ291bnQiLCRwYWNrZXRfc2VydmljZV9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VOYW1lIiwkcGFja2V0X3NlcnZpY2UpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0Rpc3BsYXlOYW1lX1JlZmVyZW50SUQiLCRwYWNrZXRfcmVmZXJlbnRfSUQpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0Rpc3BsYXlOYW1lX01heENvdW50IiwkcGFja2V0X3NlcnZpY2VfbGVuZ3RoKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19EaXNwbGF5TmFtZV9PZmZzZXQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19EaXNwbGF5TmFtZV9BY3R1YWxDb3VudCIsJHBhY2tldF9zZXJ2aWNlX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfRGlzcGxheU5hbWUiLCRwYWNrZXRfc2VydmljZSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfQWNjZXNzTWFzayIsW0J5dGVbXV0oMHhmZiwweDAxLDB4MGYsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VUeXBlIixbQnl0ZVtdXSgweDEwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfU2VydmljZVN0YXJ0VHlwZSIsW0J5dGVbXV0oMHgwMywweDAwLDB4MDAsMHgwMCkpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX1NlcnZpY2VFcnJvckNvbnRyb2wiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19CaW5hcnlQYXRoTmFtZV9NYXhDb3VudCIsJHBhY2tldF9jb21tYW5kX2xlbmd0aCkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfQmluYXJ5UGF0aE5hbWVfT2Zmc2V0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfQmluYXJ5UGF0aE5hbWVfQWN0dWFsQ291bnQiLCRwYWNrZXRfY29tbWFuZF9sZW5ndGgpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX0JpbmFyeVBhdGhOYW1lIiwkcGFja2V0X2NvbW1hbmQpCiAgICAgICAgJHBhY2tldF9TQ01DcmVhdGVTZXJ2aWNlVy5BZGQoIlNDTUNyZWF0ZVNlcnZpY2VXX05VTExQb2ludGVyIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfVGFnSUQiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19OVUxMUG9pbnRlcjIiLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDApKQogICAgICAgICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcuQWRkKCJTQ01DcmVhdGVTZXJ2aWNlV19EZXBlbmRTaXplIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfTlVMTFBvaW50ZXIzIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfTlVMTFBvaW50ZXI0IixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKICAgICAgICAkcGFja2V0X1NDTUNyZWF0ZVNlcnZpY2VXLkFkZCgiU0NNQ3JlYXRlU2VydmljZVdfUGFzc3dvcmRTaXplIixbQnl0ZVtdXSgweDAwLDB4MDAsMHgwMCwweDAwKSkKCiAgICAgICAgcmV0dXJuICRwYWNrZXRfU0NNQ3JlYXRlU2VydmljZVcKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U0NNU3RhcnRTZXJ2aWNlVygpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2NvbnRleHRfaGFuZGxlKQoKICAgICAgICAkcGFja2V0X1NDTVN0YXJ0U2VydmljZVcgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICRwYWNrZXRfU0NNU3RhcnRTZXJ2aWNlVy5BZGQoIlNDTVN0YXJ0U2VydmljZVdfQ29udGV4dEhhbmRsZSIsJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKICAgICAgICAkcGFja2V0X1NDTVN0YXJ0U2VydmljZVcuQWRkKCJTQ01TdGFydFNlcnZpY2VXX1Vua25vd24iLFtCeXRlW11dKDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCkpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NDTVN0YXJ0U2VydmljZVcKICAgIH0KCiAgICBmdW5jdGlvbiBHZXQtUGFja2V0U0NNRGVsZXRlU2VydmljZVcoKQogICAgewogICAgICAgIHBhcmFtKFtCeXRlW11dJHBhY2tldF9jb250ZXh0X2hhbmRsZSkKCiAgICAgICAgJHBhY2tldF9TQ01EZWxldGVTZXJ2aWNlVyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLlNwZWNpYWxpemVkLk9yZGVyZWREaWN0aW9uYXJ5CiAgICAgICAgJHBhY2tldF9TQ01EZWxldGVTZXJ2aWNlVy5BZGQoIlNDTURlbGV0ZVNlcnZpY2VXX0NvbnRleHRIYW5kbGUiLCRwYWNrZXRfY29udGV4dF9oYW5kbGUpCgogICAgICAgIHJldHVybiAkcGFja2V0X1NDTURlbGV0ZVNlcnZpY2VXCiAgICB9CgogICAgZnVuY3Rpb24gR2V0LVBhY2tldFNDTUNsb3NlU2VydmljZUhhbmRsZSgpCiAgICB7CiAgICAgICAgcGFyYW0oW0J5dGVbXV0kcGFja2V0X2NvbnRleHRfaGFuZGxlKQoKICAgICAgICAkcGFja2V0X1NDTV9DbG9zZVNlcnZpY2VXID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuU3BlY2lhbGl6ZWQuT3JkZXJlZERpY3Rpb25hcnkKICAgICAgICAkcGFja2V0X1NDTV9DbG9zZVNlcnZpY2VXLkFkZCgiU0NNQ2xvc2VTZXJ2aWNlV19Db250ZXh0SGFuZGxlIiwkcGFja2V0X2NvbnRleHRfaGFuZGxlKQoKICAgICAgICByZXR1cm4gJHBhY2tldF9TQ01fQ2xvc2VTZXJ2aWNlVwogICAgfQoKfQoKIyBTTUIgTlRMTSBGdW5jdGlvbnMgU2NyaXB0QmxvY2sgLSBmdW5jdGlvbiBmb3IgcGFyc2luZyBOVExNIGNoYWxsZW5nZQokU01CX05UTE1fZnVuY3Rpb25zX3NjcmlwdGJsb2NrID0KewogICAgZnVuY3Rpb24gU01CTlRMTUNoYWxsZW5nZQogICAgewogICAgICAgIHBhcmFtIChbQnl0ZVtdXSRwYXlsb2FkX2J5dGVzKQoKICAgICAgICAkcGF5bG9hZCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJHBheWxvYWRfYnl0ZXMpCiAgICAgICAgJHBheWxvYWQgPSAkcGF5bG9hZCAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAkTlRMTV9pbmRleCA9ICRwYXlsb2FkLkluZGV4T2YoIjRFNTQ0QzRENTM1MzUwMDAiKQoKICAgICAgICBpZigkcGF5bG9hZC5TdWJTdHJpbmcoKCROVExNX2luZGV4ICsgMTYpLDgpIC1lcSAiMDIwMDAwMDAiKQogICAgICAgIHsKICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJHBheWxvYWQuU3ViU3RyaW5nKCgkTlRMTV9pbmRleCArIDQ4KSwxNikKICAgICAgICB9CgogICAgICAgIHJldHVybiAkTlRMTV9jaGFsbGVuZ2UKICAgIH0KCn0KCiMgU01CIFJlbGF5IENoYWxsZW5nZSBTY3JpcHRCbG9jayAtIGdhdGhlcnMgTlRMTSBzZXJ2ZXIgY2hhbGxlbmdlIGZyb20gcmVsYXkgdGFyZ2V0CiRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrID0KewogICAgZnVuY3Rpb24gU01CUmVsYXlDaGFsbGVuZ2UKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJEhUVFBfcmVxdWVzdF9ieXRlcywkU01CX3ZlcnNpb24pCgogICAgICAgIGlmKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtID0gJFNNQl9yZWxheV9zb2NrZXQuR2V0U3RyZWFtKCkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFNNQl9jbGllbnRfcmVjZWl2ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CiAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnTmVnb3RpYXRlU01CJwogICAgICAgIAogICAgICAgIDpTTUJfcmVsYXlfY2hhbGxlbmdlX2xvb3Agd2hpbGUoJFNNQl9jbGllbnRfc3RhZ2UgLW5lICdleGl0JykKICAgICAgICB7CiAgICAgICAgCiAgICAgICAgICAgIHN3aXRjaCAoJFNNQl9jbGllbnRfc3RhZ2UpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAnTmVnb3RpYXRlU01CJwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHg3MiAweDE4IDB4MDEsMHg0OCAweGZmLDB4ZmYgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAweDAwLDB4MDAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJOZWdvdGlhdGVQcm90b2NvbFJlcXVlc3QgJFNNQl92ZXJzaW9uCiAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkgPiAkbnVsbAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5GbHVzaCgpICAgIAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkgPiAkbnVsbAoKICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbNC4uN10pIC1lcSAnZmYtNTMtNGQtNDInKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl92ZXJzaW9uID0gJ1NNQjEnCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ05UTE1TU1BOZWdvdGlhdGUnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ05lZ290aWF0ZVNNQjInCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZigoJFNNQl92ZXJzaW9uIC1lcSAnU01CMScgLWFuZCBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMzldKSAtZXEgJzBmJykgLW9yICgkU01CX3ZlcnNpb24gLW5lICdTTUIxJyAtYW5kIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVs3MF0pIC1lcSAnMDMnKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgZGlzYWJsZWQgZHVlIHRvIFNNQiBzaWduaW5nIHJlcXVpcmVtZW50IG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3JlY2VpdmUgPSAkbnVsbAogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXkgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnZXhpdCcKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGRpc2FibGVkIGR1ZSB0byBTTUIgc2lnbmluZyByZXF1aXJlbWVudCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgZGlzYWJsZWQgZHVlIHRvIFNNQiBzaWduaW5nIHJlcXVpcmVtZW50IG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICdOZWdvdGlhdGVTTUIyJwogICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAkU01CMl90cmVlX0lEID0gMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICRTTUJfc2Vzc2lvbl9JRCA9IDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgPSAxCiAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDAsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lEICAKICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyTmVnb3RpYXRlUHJvdG9jb2xSZXF1ZXN0CiAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKSA+ICRudWxsCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkZsdXNoKCkgICAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKSA+ICRudWxsCiAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnTlRMTVNTUE5lZ290aWF0ZScKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAnTlRMTVNTUE5lZ290aWF0ZScKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl92ZXJzaW9uIC1lcSAnU01CMScpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4NzMgMHgxOCAweDAxLDB4NDggMHhmZiwweGZmICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgMHgwMCwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTlRMTVNTUF9uZWdvdGlhdGUgPSBHZXQtUGFja2V0TlRMTVNTUE5lZ290aWF0ZSAweDA3LDB4ODIsMHgwOCwweGEyICRIVFRQX3JlcXVlc3RfYnl0ZXNbKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoLTgpLi4oJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTVNTUF9uZWdvdGlhdGUgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05UTE1TU1BfbmVnb3RpYXRlICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0ICROVExNU1NQX25lZ290aWF0ZQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwMSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OVExNU1NQX25lZ290aWF0ZSA9IEdldC1QYWNrZXROVExNU1NQTmVnb3RpYXRlIDB4MDcsMHg4MiwweDA4LDB4YTIgJEhUVFBfcmVxdWVzdF9ieXRlc1soJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgtOCkuLigkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCldCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1TU1BfbmVnb3RpYXRlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OVExNU1NQX25lZ290aWF0ZSAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMlNlc3Npb25TZXR1cFJlcXVlc3QgJE5UTE1TU1BfbmVnb3RpYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpID4gJG51bGwKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uRmx1c2goKSAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpID4gJG51bGwKICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdleGl0JwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIHJldHVybiAkU01CX2NsaWVudF9yZWNlaXZlCiAgICB9Cgp9CgojIFNNQiBSZWxheSBSZXNwb25zZSBTY3JpcHRCbG9jayAtIHNlbmRzIE5UTE0gcmVwb25zZSB0byByZWxheSB0YXJnZXQKJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jayA9CnsKICAgIGZ1bmN0aW9uIFNNQlJlbGF5UmVzcG9uc2UKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJEhUVFBfcmVxdWVzdF9ieXRlcywkU01CX3ZlcnNpb24sJFNNQl91c2VyX0lELCRTTUJfc2Vzc2lvbl9JRCkKICAgIAogICAgICAgICRTTUJfY2xpZW50X3JlY2VpdmUgPSBOZXctT2JqZWN0IFN5c3RlbS5CeXRlW10gMTAyNAoKICAgICAgICBpZigkU01CX3JlbGF5X3NvY2tldCkKICAgICAgICB7CiAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtID0gJFNNQl9yZWxheV9zb2NrZXQuR2V0U3RyZWFtKCkKICAgICAgICB9CgogICAgICAgIGlmKCRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnKQogICAgICAgIHsKICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDczIDB4MTggMHgwMSwweDQ4IDB4ZmYsMHhmZiAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXJbIlNNQkhlYWRlcl9Vc2VySUQiXSA9ICRTTUJfdXNlcl9JRAogICAgICAgICAgICAkcGFja2V0X05UTE1TU1BfYXV0aCA9IEdldC1QYWNrZXROVExNU1NQQXV0aCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyCiAgICAgICAgICAgICROVExNU1NQX2F1dGggPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05UTE1TU1BfYXV0aCAgICAgIAogICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQlNlc3Npb25TZXR1cEFuZFhSZXF1ZXN0ICROVExNU1NQX2F1dGgKICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEID0gMwogICAgICAgICAgICAkU01CMl90cmVlX0lEID0gMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwMSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgJHBhY2tldF9OVExNU1NQX2F1dGggPSBHZXQtUGFja2V0TlRMTVNTUEF1dGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICROVExNU1NQX2F1dGggPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05UTE1TU1BfYXV0aCAgICAgICAgCiAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJTZXNzaW9uU2V0dXBSZXF1ZXN0ICROVExNU1NQX2F1dGgKICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhCiAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YQogICAgICAgIH0KCiAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLkZsdXNoKCkKICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKCiAgICAgICAgaWYoKCRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzkuLjEyXSkgLWVxICcwMC0wMC0wMC0wMCcpIC1vciAoJFNNQl92ZXJzaW9uIC1uZSAnU01CMScgLWFuZCBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTIuLjE1XSkgLWVxICcwMC0wMC0wMC0wMCcpKQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG9uICRUYXJnZXQiKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSBhdXRoZW50aWNhdGlvbiBzdWNjZXNzZnVsIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgfQogICAgICAgICAgICAgIAogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyAkVGFyZ2V0IikKICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCgogICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIGZhaWxlZCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFRhcmdldCIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIGlmKCEkU01CX3JlbGF5X2ZhaWxlZCkKICAgICAgICB7CgogICAgICAgICAgICBpZighJFNlcnZpY2UpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9yYW5kb20gPSBbU3RyaW5nXTo6Sm9pbigiMDAtIiwoMS4uMjAgfCBGb3JFYWNoLU9iamVjdHsiezA6WDJ9LSIgLWYgKEdldC1SYW5kb20gLU1pbmltdW0gNjUgLU1heGltdW0gOTApfSkpCiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2VfcmFuZG9tIC1yZXBsYWNlICItMDAiLCIiCiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2UuU3Vic3RyaW5nKDAsJFNNQl9zZXJ2aWNlLkxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2UuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkU01CX3NlcnZpY2UsMCwkU01CX3NlcnZpY2UuTGVuZ3RoKQogICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX3JhbmRvbSArPSAnMDAtMDAtMDAtMDAtMDAnCiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZXMgPSAkU01CX3NlcnZpY2VfcmFuZG9tLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0gICAKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfc2VydmljZSA9ICRTZXJ2aWNlCiAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZXMgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldEJ5dGVzKCRTZXJ2aWNlKQoKICAgICAgICAgICAgICAgIGlmKFtCb29sXSgkU01CX3NlcnZpY2UuTGVuZ3RoICUgMikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzICs9IDB4MDAsMHgwMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfc2VydmljZV9ieXRlcyArPSAweDAwLDB4MDAsMHgwMCwweDAwCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTTUJfc2VydmljZV9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTTUJfc2VydmljZS5MZW5ndGggKyAxKQogICAgICAgICAgICAkQ29tbWFuZCA9ICIlQ09NU1BFQyUgL0MgYCIiICsgJENvbW1hbmQgKyAiYCIiCiAgICAgICAgICAgIFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVURjguR2V0Qnl0ZXMoJENvbW1hbmQpIHwgRm9yRWFjaC1PYmplY3R7JFBzRXhlY19jb21tYW5kICs9ICJ7MDpYMn0tMDAtIiAtZiAkX30KCiAgICAgICAgICAgIGlmKFtCb29sXSgkQ29tbWFuZC5MZW5ndGggJSAyKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFBzRXhlY19jb21tYW5kICs9ICcwMC0wMCcKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRQc0V4ZWNfY29tbWFuZCArPSAnMDAtMDAtMDAtMDAnCiAgICAgICAgICAgIH0gICAgCiAgICAgICAgCiAgICAgICAgICAgICRQc0V4ZWNfY29tbWFuZF9ieXRlcyA9ICRQc0V4ZWNfY29tbWFuZC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9ICAKICAgICAgICAgICAgJFBzRXhlY19jb21tYW5kX2xlbmd0aF9ieXRlcyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFBzRXhlY19jb21tYW5kX2J5dGVzLkxlbmd0aCAvIDIpCgogICAgICAgICAgICAkU01CX3BhdGggPSAiXFwiICsgJFRhcmdldCArICJcSVBDJCIKCiAgICAgICAgICAgIGlmKCRTTUJfdmVyc2lvbiAtZXEgJ1NNQjEnKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3BhdGhfYnl0ZXMgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRTTUJfcGF0aCkgKyAweDAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3BhdGhfYnl0ZXMgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldEJ5dGVzKCRTTUJfcGF0aCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFNNQl9uYW1lZF9waXBlX1VVSUQgPSAweDgxLDB4YmIsMHg3YSwweDM2LDB4NDQsMHg5OCwweGYxLDB4MzUsMHhhZCwweDMyLDB4OTgsMHhmMCwweDM4LDB4MDAsMHgxMCwweDAzCiAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbSA9ICRTTUJfcmVsYXlfc29ja2V0LkdldFN0cmVhbSgpCiAgICAgICAgICAgICRTTUJfc3BsaXRfaW5kZXggPSA0MjU2CgogICAgICAgICAgICBpZigkU01CX3ZlcnNpb24gLWVxICdTTUIxJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnVHJlZUNvbm5lY3RBbmRYUmVxdWVzdCcKCiAgICAgICAgICAgICAgICA6U01CX2V4ZWN1dGVfbG9vcCB3aGlsZSAoJFNNQl9jbGllbnRfc3RhZ2UgLW5lICdFeGl0JykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgkU01CX2NsaWVudF9zdGFnZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnVHJlZUNvbm5lY3RBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDc1IDB4MTggMHgwMSwweDQ4IDB4ZmYsMHhmZiAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CVHJlZUNvbm5lY3RBbmRYUmVxdWVzdCAkU01CX3BhdGhfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9uYW1lZF9waXBlX2J5dGVzID0gMHg1YywweDczLDB4NzYsMHg2MywweDYzLDB4NzQsMHg2YywweDAwICMgXHN2Y2N0bAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl90cmVlX0lEID0gJFNNQl9jbGllbnRfcmVjZWl2ZVsyOCwyOV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHhhMiAweDE4IDB4MDIsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQk5UQ3JlYXRlQW5kWFJlcXVlc3QgJFNNQl9uYW1lZF9waXBlX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JQQ0JpbmQnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnUlBDQmluZCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9GSUQgPSAkU01CX2NsaWVudF9yZWNlaXZlWzQyLDQzXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDQmluZCAxIDB4YjgsMHgxMCAweDAxIDB4MDAsMHgwMCAkU01CX25hbWVkX3BpcGVfVVVJRCAweDAyLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEgKyAkUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZEFuZFhSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdPcGVuU0NNYW5hZ2VyVycKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1JlYWRBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gMTUwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmUgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJSZWFkQW5kWFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGFbIlNNQlJlYWRBbmRYUmVxdWVzdF9GSUQiXSA9ICRTTUJfRklECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFNNQl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJFNNQl9jbGllbnRfc3RhZ2VfbmV4dAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ09wZW5TQ01hbmFnZXJXJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmYgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTU9wZW5TQ01hbmFnZXJXICRTTUJfc2VydmljZV9ieXRlcyAkU01CX3NlcnZpY2VfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDAxLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9kYXRhID0gR2V0LVBhY2tldFNNQldyaXRlQW5kWFJlcXVlc3QgJFNNQl9GSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ0NoZWNrQWNjZXNzJyAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDaGVja0FjY2VzcycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTA4Li4xMTFdKSAtZXEgJzAwLTAwLTAwLTAwJyAtYW5kIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVs4OC4uMTA3XSkgLW5lICcwMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZSA9ICRTTUJfY2xpZW50X3JlY2VpdmVbODguLjEwN10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTUNyZWF0ZVNlcnZpY2VXICRTTUJfc2VydmljZV9tYW5hZ2VyX2NvbnRleHRfaGFuZGxlICRTTUJfc2VydmljZV9ieXRlcyAkU01CX3NlcnZpY2VfbGVuZ3RoICRQc0V4ZWNfY29tbWFuZF9ieXRlcyAkUHNFeGVjX2NvbW1hbmRfbGVuZ3RoX2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkU0NNX2RhdGEuTGVuZ3RoIC1sdCAkU01CX3NwbGl0X2luZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXX0ZpcnN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTExXSkgLWVxICcwNS0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb3IgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBwcml2aWxlZ2Ugb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9yIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgcHJpdmlsZWdlIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvciBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHByaXZpbGVnZSBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ3JlYXRlU2VydmljZVcgJFNNQl9zZXJ2aWNlX21hbmFnZXJfY29udGV4dF9oYW5kbGUgJFNNQl9zZXJ2aWNlX2J5dGVzICRTTUJfc2VydmljZV9sZW5ndGggJFBzRXhlY19jb21tYW5kX2J5dGVzICRQc0V4ZWNfY29tbWFuZF9sZW5ndGhfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDIsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MGMsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkQW5kWFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ1N0YXJ0U2VydmljZVcnICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlV19GaXJzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9zdGFnZV9maW5hbCA9IFtNYXRoXTo6Q2VpbGluZygkU0NNX2RhdGEuTGVuZ3RoIC8gJFNNQl9zcGxpdF9pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2hlYWRlciA9IEdldC1QYWNrZXRTTUJIZWFkZXIgMHgyZiAweDE4IDB4MDUsMHgyOCAkU01CX3RyZWVfSUQgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyAkU01CX3VzZXJfSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YV9maXJzdCA9ICRTQ01fZGF0YVswLi4oJFNNQl9zcGxpdF9pbmRleCAtIDEpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDEgMCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwICRTQ01fZGF0YV9maXJzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YVsiUlBDUmVxdWVzdF9BbGxvY0hpbnQiXSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlciA9ICRTTUJfc3BsaXRfaW5kZXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJXcml0ZUFuZFhSZXF1ZXN0ICRTTUJfRklEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9zcGxpdF9zdGFnZV9maW5hbCAtbGUgMikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfc3RhZ2UgPSAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ3JlYXRlU2VydmljZVdfTWlkZGxlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0NyZWF0ZVNlcnZpY2VXX01pZGRsZScKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9zdGFnZSsrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmYgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGFfbWlkZGxlID0gJFNDTV9kYXRhWyRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlci4uKCRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlciArICRTTUJfc3BsaXRfaW5kZXggLSAxKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlciArPSAkU01CX3NwbGl0X2luZGV4CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMCAwIDAgMCAweDAyLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBjLDB4MDAgJFNDTV9kYXRhX21pZGRsZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YVsiUlBDUmVxdWVzdF9BbGxvY0hpbnQiXSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFNDTV9kYXRhLkxlbmd0aCAtICRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlciArICRTTUJfc3BsaXRfaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGggCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9zcGxpdF9zdGFnZSAtZ2UgJFNNQl9zcGxpdF9zdGFnZV9maW5hbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXX01pZGRsZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4MmYgMHgxOCAweDA1LDB4MjggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGFfbGFzdCA9ICRTQ01fZGF0YVskU01CX3NwbGl0X2luZGV4X3RyYWNrZXIuLiRTQ01fZGF0YS5MZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMiAwIDAgMCAweDAyLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBjLDB4MDAgJFNDTV9kYXRhX2xhc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJXcml0ZUFuZFhSZXF1ZXN0ICRTTUJfRklEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aCAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnU3RhcnRTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ1N0YXJ0U2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTEyLi4xMTVdKSAtZXEgJzAwLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCJUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFRyeWluZyB0byBleGVjdXRlIFNNQiByZWxheSBjb21tYW5kIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUgPSAkU01CX2NsaWVudF9yZWNlaXZlWzkyLi4xMTFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNU3RhcnRTZXJ2aWNlVyAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwMywweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgxMywweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfaGVhZGVyICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJXcml0ZUFuZFhSZXF1ZXN0ICRTTUJfRklEICgkUlBDX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ0RlbGV0ZVNlcnZpY2VXJyAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzExMi4uMTE1XSkgLWVxICczMS0wNC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGlvbiBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRpb24gZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0aW9uIGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgIAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ0RlbGV0ZVNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICB7IAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVs4OC4uOTFdKSAtZXEgJzFkLTA0LTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGNvbW1hbmQgZXhlY3V0ZWQgb24gJFRhcmdldCIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGNvbW1hbmQgZXhlY3V0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbODguLjkxXSkgLWVxICcwMi0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBmYWlsZWQgdG8gc3RhcnQgb24gJFRhcmdldCIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBmYWlsZWQgdG8gc3RhcnQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZmFpbGVkIHRvIHN0YXJ0IG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TQ01fZGF0YSA9IEdldC1QYWNrZXRTQ01EZWxldGVTZXJ2aWNlVyAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAzICRTQ01fZGF0YS5MZW5ndGggMCAwIDB4MDQsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MDIsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRBbmRYUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnQ2xvc2VTZXJ2aWNlSGFuZGxlJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbG9zZV9zZXJ2aWNlX2hhbmRsZV9zdGFnZSA9IDEKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0Nsb3NlU2VydmljZUhhbmRsZScKICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfY2xvc2Vfc2VydmljZV9oYW5kbGVfc3RhZ2UgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBkZWxldGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xvc2Vfc2VydmljZV9oYW5kbGVfc3RhZ2UrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ2xvc2VTZXJ2aWNlSGFuZGxlICRTTUJfc2VydmljZV9jb250ZXh0X2hhbmRsZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBkZWxldGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ2xvc2VSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ2xvc2VTZXJ2aWNlSGFuZGxlICRTTUJfc2VydmljZV9tYW5hZ2VyX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDJmIDB4MTggMHgwNSwweDI4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwNSwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwMCwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CV3JpdGVBbmRYUmVxdWVzdCAkU01CX0ZJRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUJfaGVhZGVyICsgJFNNQl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0Nsb3NlUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfaGVhZGVyID0gR2V0LVBhY2tldFNNQkhlYWRlciAweDA0IDB4MTggMHgwNywweGM4ICRTTUJfdHJlZV9JRCAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQl9oZWFkZXIgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CX2RhdGEgPSBHZXQtUGFja2V0U01CQ2xvc2VSZXF1ZXN0IDB4MDAsMHg0MAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdUcmVlRGlzY29ubmVjdCcKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ1RyZWVEaXNjb25uZWN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4NzEgMHgxOCAweDA3LDB4YzggJFNNQl90cmVlX0lEICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJUcmVlRGlzY29ubmVjdFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUJfaGVhZGVyLkxlbmd0aCAkU01CX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQl9oZWFkZXIgKyAkU01CX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnTG9nb2ZmJwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnTG9nb2ZmJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQl9oZWFkZXIgPSBHZXQtUGFja2V0U01CSGVhZGVyIDB4NzQgMHgxOCAweDA3LDB4YzggMHgzNCwweGZlICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgJFNNQl91c2VyX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CX2hlYWRlciAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUJfZGF0YSA9IEdldC1QYWNrZXRTTUJMb2dvZmZBbmRYUmVxdWVzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQl9oZWFkZXIuTGVuZ3RoICRTTUJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CX2hlYWRlciArICRTTUJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdFeGl0JwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9mYWlsZWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnRXhpdCcKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9ICAKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnVHJlZUNvbm5lY3QnCgogICAgICAgICAgICAgICAgOlNNQl9leGVjdXRlX2xvb3Agd2hpbGUgKCRTTUJfY2xpZW50X3N0YWdlIC1uZSAnZXhpdCcpCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoJFNNQl9jbGllbnRfc3RhZ2UpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1RyZWVDb25uZWN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEID0gNAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDMsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMlRyZWVDb25uZWN0UmVxdWVzdCAkU01CX3BhdGhfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFNNQjJfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl90cmVlX0lEID0gMHgwMSwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9uYW1lZF9waXBlX2J5dGVzID0gMHg3MywweDAwLDB4NzYsMHgwMCwweDYzLDB4MDAsMHg2MywweDAwLDB4NzQsMHgwMCwweDZjLDB4MDAgIyBcc3ZjY3RsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA1LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJDcmVhdGVSZXF1ZXN0RmlsZSAkU01CX25hbWVkX3BpcGVfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhWyJTTUIyQ3JlYXRlUmVxdWVzdEZpbGVfU2hhcmVfQWNjZXNzIl0gPSAweDA3LDB4MDAsMHgwMCwweDAwICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSUENCaW5kJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ1JQQ0JpbmQnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbmFtZWRfcGlwZV9ieXRlcyA9IDB4NzMsMHgwMCwweDc2LDB4MDAsMHg2MywweDAwLDB4NjMsMHgwMCwweDc0LDB4MDAsMHg2YywweDAwICMgXHN2Y2N0bAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9maWxlX0lEID0gJFNNQl9jbGllbnRfcmVjZWl2ZVsxMzIuLjE0N10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENCaW5kIDEgMHhiOCwweDEwIDB4MDEgMHgwMCwweDAwICRTTUJfbmFtZWRfcGlwZV9VVUlEIDB4MDIsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZV9uZXh0ID0gJ09wZW5TQ01hbmFnZXJXJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAnUmVhZFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSAxNTAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDgsMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRDaGFyZ2UiXSA9IDB4MTAsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMlJlYWRSZXF1ZXN0ICRTTUJfZmlsZV9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTIuLjE1XSkgLW5lICcwMy0wMS0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAkU01CX2NsaWVudF9zdGFnZV9uZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnU3RhdHVzUGVuZGluZycKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdTdGF0dXNQZW5kaW5nJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEyLi4xNV0pIC1uZSAnMDMtMDEtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJFNNQl9jbGllbnRfc3RhZ2VfbmV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdPcGVuU0NNYW5hZ2VyVycKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCA9IDMwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwOSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NDTV9kYXRhID0gR2V0LVBhY2tldFNDTU9wZW5TQ01hbmFnZXJXICRTTUJfc2VydmljZV9ieXRlcyAkU01CX3NlcnZpY2VfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDAxLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9oZWFkZXIgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfaGVhZGVyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2RhdGEgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnQ2hlY2tBY2Nlc3MnICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ0NoZWNrQWNjZXNzJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMjguLjEzMV0pIC1lcSAnMDAtMDAtMDAtMDAnIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NsaWVudF9yZWNlaXZlWzEwOC4uMTI3XSkgLW5lICcwMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZSA9ICRTTUJfY2xpZW50X3JlY2VpdmVbMTA4Li4xMjddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TQ01fZGF0YSA9IEdldC1QYWNrZXRTQ01DcmVhdGVTZXJ2aWNlVyAkU01CX3NlcnZpY2VfbWFuYWdlcl9jb250ZXh0X2hhbmRsZSAkU01CX3NlcnZpY2VfYnl0ZXMgJFNNQl9zZXJ2aWNlX2xlbmd0aCAkUHNFeGVjX2NvbW1hbmRfYnl0ZXMgJFBzRXhlY19jb21tYW5kX2xlbmd0aF9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU0NNX2RhdGEKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNDTV9kYXRhLkxlbmd0aCAtbHQgJFNNQl9zcGxpdF9pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19GaXJzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMjguLjEzMV0pIC1lcSAnMDUtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBpcyBub3QgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIG9yIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgcHJpdmlsZWdlIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvciBkb2VzIG5vdCBoYXZlIHJlcXVpcmVkIHByaXZpbGVnZSBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb3IgZG9lcyBub3QgaGF2ZSByZXF1aXJlZCBwcml2aWxlZ2Ugb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJ0NyZWF0ZVNlcnZpY2VXJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwOSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDAyLDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDBjLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICgkUlBDX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdTdGFydFNlcnZpY2VXJyAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlV19GaXJzdCcKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9zdGFnZV9maW5hbCA9IFtNYXRoXTo6Q2VpbGluZygkU0NNX2RhdGEuTGVuZ3RoIC8gJFNNQl9zcGxpdF9pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YV9maXJzdCA9ICRTQ01fZGF0YVswLi4oJFNNQl9zcGxpdF9pbmRleCAtIDEpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDEgMCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwICRTQ01fZGF0YV9maXJzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YVsiUlBDUmVxdWVzdF9BbGxvY0hpbnQiXSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlciA9ICRTTUJfc3BsaXRfaW5kZXgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkU01CX3NwbGl0X3N0YWdlX2ZpbmFsIC1sZSAyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXX0xhc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zcGxpdF9zdGFnZSA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19NaWRkbGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ3JlYXRlU2VydmljZVdfTWlkZGxlJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X3N0YWdlKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhX21pZGRsZSA9ICRTQ01fZGF0YVskU01CX3NwbGl0X2luZGV4X3RyYWNrZXIuLigkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKyAkU01CX3NwbGl0X2luZGV4IC0gMSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKz0gJFNNQl9zcGxpdF9pbmRleAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDAgMCAwIDAgMHgwMiwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwYywweDAwICRTQ01fZGF0YV9taWRkbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGFbIlJQQ1JlcXVlc3RfQWxsb2NIaW50Il0gPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTQ01fZGF0YS5MZW5ndGggLSAkU01CX3NwbGl0X2luZGV4X3RyYWNrZXIgKyAkU01CX3NwbGl0X2luZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMldyaXRlUmVxdWVzdCAkU01CX2ZpbGVfSUQgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUIyX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9zcGxpdF9zdGFnZSAtZ2UgJFNNQl9zcGxpdF9zdGFnZV9maW5hbCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0NyZWF0ZVNlcnZpY2VXX01pZGRsZScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICdDcmVhdGVTZXJ2aWNlV19MYXN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEKysKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTQ01fZGF0YV9sYXN0ID0gJFNDTV9kYXRhWyRTTUJfc3BsaXRfaW5kZXhfdHJhY2tlci4uJFNDTV9kYXRhLkxlbmd0aF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfUlBDX2RhdGEgPSBHZXQtUGFja2V0UlBDUmVxdWVzdCAweDAyIDAgMCAwIDB4MDIsMHgwMCwweDAwLDB4MDAgMHgwMCwweDAwIDB4MGMsMHgwMCAkU0NNX2RhdGFfbGFzdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMldyaXRlUmVxdWVzdCAkU01CX2ZpbGVfSUQgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUIyX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkUlBDX2RhdGFfbGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdSZWFkUmVxdWVzdCcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlX25leHQgPSAnU3RhcnRTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ1N0YXJ0U2VydmljZVcnCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTMyLi4xMzVdKSAtZXEgJzAwLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFRyeWluZyB0byBleGVjdXRlIFNNQiByZWxheSBjb21tYW5kIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJUcnlpbmcgdG8gZXhlY3V0ZSBTTUIgcmVsYXkgY29tbWFuZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUgPSAkU01CX2NsaWVudF9yZWNlaXZlWzExMi4uMTMxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwOSwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNU3RhcnRTZXJ2aWNlVyAkU01CX3NlcnZpY2VfY29udGV4dF9oYW5kbGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwMywweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgxMywweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9SUENfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyV3JpdGVSZXF1ZXN0ICRTTUJfZmlsZV9JRCAoJFJQQ19kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGFfbGVuZ3RoID0gJFNNQjJfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoICsgJFJQQ19kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YSArICRSUENfZGF0YSArICRTQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnUmVhZFJlcXVlc3QnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdEZWxldGVTZXJ2aWNlVycgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jbGllbnRfcmVjZWl2ZVsxMzIuLjEzNV0pIC1lcSAnMzEtMDQtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRpb24gZmFpbGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGNyZWF0aW9uIGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGlvbiBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICdEZWxldGVTZXJ2aWNlVycKICAgICAgICAgICAgICAgICAgICAgICAgeyAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTA4Li4xMTFdKSAtZXEgJzFkLTA0LTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGNvbW1hbmQgZXhlY3V0ZWQgb24gJFRhcmdldCIpCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBjb21tYW5kIGV4ZWN1dGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGNvbW1hbmQgZXhlY3V0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfY2xpZW50X3JlY2VpdmVbMTA4Li4xMTFdKSAtZXEgJzAyLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGZhaWxlZCB0byBzdGFydCBvbiAkVGFyZ2V0IikKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBmYWlsZWQgdG8gc3RhcnQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGZhaWxlZCB0byBzdGFydCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX21lc3NhZ2VfSUQgKz0gMjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA5LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNRGVsZXRlU2VydmljZVcgJFNNQl9zZXJ2aWNlX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU0NNX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1JQQ19kYXRhID0gR2V0LVBhY2tldFJQQ1JlcXVlc3QgMHgwMyAkU0NNX2RhdGEuTGVuZ3RoIDAgMCAweDA0LDB4MDAsMHgwMCwweDAwIDB4MDAsMHgwMCAweDAyLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfUlBDX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJXcml0ZVJlcXVlc3QgJFNNQl9maWxlX0lEICgkUlBDX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YSAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSUENfZGF0YV9sZW5ndGggPSAkU01CMl9kYXRhLkxlbmd0aCArICRTQ01fZGF0YS5MZW5ndGggKyAkUlBDX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRSUENfZGF0YV9sZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3NlbmQgPSAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgKyAkU01CMl9oZWFkZXIgKyAkU01CMl9kYXRhICsgJFJQQ19kYXRhICsgJFNDTV9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uV3JpdGUoJFNNQl9jbGllbnRfc2VuZCwwLCRTTUJfY2xpZW50X3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5SZWFkKCRTTUJfY2xpZW50X3JlY2VpdmUsMCwkU01CX2NsaWVudF9yZWNlaXZlLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ1JlYWRSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2VfbmV4dCA9ICdDbG9zZVNlcnZpY2VIYW5kbGUnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2Nsb3NlX3NlcnZpY2VfaGFuZGxlX3N0YWdlID0gMQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ2xvc2VTZXJ2aWNlSGFuZGxlJwogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9jbG9zZV9zZXJ2aWNlX2hhbmRsZV9zdGFnZSAtZXEgMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAyMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xvc2Vfc2VydmljZV9oYW5kbGVfc3RhZ2UrKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ2xvc2VTZXJ2aWNlSGFuZGxlICRTTUJfc2VydmljZV9jb250ZXh0X2hhbmRsZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBkZWxldGVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfbWVzc2FnZV9JRCArPSAxCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnQ2xvc2VSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU0NNX2RhdGEgPSBHZXQtUGFja2V0U0NNQ2xvc2VTZXJ2aWNlSGFuZGxlICRTTUJfc2VydmljZV9tYW5hZ2VyX2NvbnRleHRfaGFuZGxlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlciA9IEdldC1QYWNrZXRTTUIySGVhZGVyIDB4MDksMHgwMCAkU01CMl9tZXNzYWdlX0lEICRTTUIyX3RyZWVfSUQgJFNNQl9zZXNzaW9uX0lECiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyWyJTTUIySGVhZGVyX0NyZWRpdFJlcXVlc3QiXSA9IDB4N2YsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNDTV9kYXRhID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TQ01fZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9SUENfZGF0YSA9IEdldC1QYWNrZXRSUENSZXF1ZXN0IDB4MDMgJFNDTV9kYXRhLkxlbmd0aCAwIDAgMHgwNSwweDAwLDB4MDAsMHgwMCAweDAwLDB4MDAgMHgwMCwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUlBDX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1JQQ19kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2RhdGEgPSBHZXQtUGFja2V0U01CMldyaXRlUmVxdWVzdCAkU01CX2ZpbGVfSUQgKCRSUENfZGF0YS5MZW5ndGggKyAkU0NNX2RhdGEuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJQQ19kYXRhX2xlbmd0aCA9ICRTTUIyX2RhdGEuTGVuZ3RoICsgJFNDTV9kYXRhLkxlbmd0aCArICRSUENfZGF0YS5MZW5ndGgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBHZXQtUGFja2V0TmV0QklPU1Nlc3Npb25TZXJ2aWNlICRTTUIyX2hlYWRlci5MZW5ndGggJFJQQ19kYXRhX2xlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEgKyAkUlBDX2RhdGEgKyAkU0NNX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnQ2xvc2VSZXF1ZXN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwNiwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyQ2xvc2VSZXF1ZXN0ICRTTUJfZmlsZV9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfaGVhZGVyID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9TTUIyX2hlYWRlcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQjJfZGF0YSA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gR2V0LVBhY2tldE5ldEJJT1NTZXNzaW9uU2VydmljZSAkU01CMl9oZWFkZXIuTGVuZ3RoICRTTUIyX2RhdGEuTGVuZ3RoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTmV0QklPU19zZXNzaW9uX3NlcnZpY2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X05ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zZW5kID0gJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlICsgJFNNQjJfaGVhZGVyICsgJFNNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLldyaXRlKCRTTUJfY2xpZW50X3NlbmQsMCwkU01CX2NsaWVudF9zZW5kLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uUmVhZCgkU01CX2NsaWVudF9yZWNlaXZlLDAsJFNNQl9jbGllbnRfcmVjZWl2ZS5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdGFnZSA9ICdUcmVlRGlzY29ubmVjdCcKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJ1RyZWVEaXNjb25uZWN0JwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXIgPSBHZXQtUGFja2V0U01CMkhlYWRlciAweDA0LDB4MDAgJFNNQjJfbWVzc2FnZV9JRCAkU01CMl90cmVlX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9TTUIyX2hlYWRlclsiU01CMkhlYWRlcl9DcmVkaXRSZXF1ZXN0Il0gPSAweDdmLDB4MDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9kYXRhID0gR2V0LVBhY2tldFNNQjJUcmVlRGlzY29ubmVjdFJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnTG9nb2ZmJwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAnTG9nb2ZmJwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CMl9tZXNzYWdlX0lEICs9IDIwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfaGVhZGVyID0gR2V0LVBhY2tldFNNQjJIZWFkZXIgMHgwMiwweDAwICRTTUIyX21lc3NhZ2VfSUQgJFNNQjJfdHJlZV9JRCAkU01CX3Nlc3Npb25fSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWNrZXRfU01CMl9oZWFkZXJbIlNNQjJIZWFkZXJfQ3JlZGl0UmVxdWVzdCJdID0gMHg3ZiwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGFja2V0X1NNQjJfZGF0YSA9IEdldC1QYWNrZXRTTUIyU2Vzc2lvbkxvZ29mZlJlcXVlc3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2hlYWRlciA9IENvbnZlcnRGcm9tLVBhY2tldE9yZGVyZWREaWN0aW9uYXJ5ICRwYWNrZXRfU01CMl9oZWFkZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUIyX2RhdGEgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X1NNQjJfZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZSA9IEdldC1QYWNrZXROZXRCSU9TU2Vzc2lvblNlcnZpY2UgJFNNQjJfaGVhZGVyLkxlbmd0aCAkU01CMl9kYXRhLkxlbmd0aAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5ldEJJT1Nfc2Vzc2lvbl9zZXJ2aWNlID0gQ29udmVydEZyb20tUGFja2V0T3JkZXJlZERpY3Rpb25hcnkgJHBhY2tldF9OZXRCSU9TX3Nlc3Npb25fc2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc2VuZCA9ICROZXRCSU9TX3Nlc3Npb25fc2VydmljZSArICRTTUIyX2hlYWRlciArICRTTUIyX2RhdGEKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0cmVhbS5Xcml0ZSgkU01CX2NsaWVudF9zZW5kLDAsJFNNQl9jbGllbnRfc2VuZC5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NsaWVudF9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RyZWFtLlJlYWQoJFNNQl9jbGllbnRfcmVjZWl2ZSwwLCRTTUJfY2xpZW50X3JlY2VpdmUuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9jbGllbnRfc3RhZ2UgPSAnRXhpdCcKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfZmFpbGVkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY2xpZW50X3N0YWdlID0gJ0V4aXQnCgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBmYWlsZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGZhaWxlZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoISRTTUJfcmVsYXlfZmFpbGVkIC1hbmQgJFJlbGF5QXV0b0Rpc2FibGUgLWVxICdZJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBhdXRvIGRpc2FibGVkIGR1ZSB0byBzdWNjZXNzIikKICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheSA9ICRmYWxzZQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgYXV0byBkaXNhYmxlZCBkdWUgdG8gc3VjY2VzcyIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBhdXRvIGRpc2FibGVkIGR1ZSB0byBzdWNjZXNzIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKCiAgICAgICAgcmV0dXJuICRTTUJfY2xpZW50X3JlY2VpdmUKICAgIH0KCn0KCiMgSFRUUC9IVFRQUy9Qcm94eSBTZXJ2ZXIgU2NyaXB0QmxvY2sKJEhUVFBfc2NyaXB0YmxvY2sgPSAKeyAKICAgIHBhcmFtICgkQ2hhbGxlbmdlLCRDb21tYW5kLCRIVFRQSVAsJEhUVFBQb3J0LCRIVFRQUmVzZXREZWxheSwkSFRUUFJlc2V0RGVsYXlUaW1lb3V0LCRIVFRQU19saXN0ZW5lciwkUHJveHksJFByb3h5SWdub3JlLCRwcm94eV9saXN0ZW5lciwkUmVsYXlBdXRvRGlzYWJsZSwkU2VydmljZSwkU01CX3ZlcnNpb24sJFRhcmdldCwkVXNlcm5hbWVzLCRXUEFEQXV0aCwkV1BBREF1dGhJZ25vcmUsJFdQQURSZXNwb25zZSkKCiAgICBmdW5jdGlvbiBOVExNQ2hhbGxlbmdlQmFzZTY0CiAgICB7CiAgICAgICAgcGFyYW0gKFtTdHJpbmddJENoYWxsZW5nZSxbU3RyaW5nXSRDbGllbnRJUEFkZHJlc3MsW0ludF0kQ2xpZW50UG9ydCkKCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gR2V0LURhdGUKICAgICAgICAkSFRUUF90aW1lc3RhbXAgPSAkSFRUUF90aW1lc3RhbXAuVG9GaWxlVGltZSgpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3RpbWVzdGFtcCkpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gJEhUVFBfdGltZXN0YW1wLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KCiAgICAgICAgaWYoJENoYWxsZW5nZSkKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZSA9ICRDaGFsbGVuZ2UKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlX2J5dGVzID0gJEhUVFBfY2hhbGxlbmdlLkluc2VydCgyLCctJykuSW5zZXJ0KDUsJy0nKS5JbnNlcnQoOCwnLScpLkluc2VydCgxMSwnLScpLkluc2VydCgxNCwnLScpLkluc2VydCgxNywnLScpLkluc2VydCgyMCwnLScpCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRIVFRQX2NoYWxsZW5nZV9ieXRlcy5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9IFtTdHJpbmddKDEuLjggfCBGb3JFYWNoLU9iamVjdHsiezA6WDJ9IiAtZiAoR2V0LVJhbmRvbSAtTWluaW11bSAxIC1NYXhpbXVtIDI1NSl9KQogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2UgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgLXJlcGxhY2UgJyAnLCcnCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRIVFRQX2NoYWxsZW5nZV9ieXRlcy5TcGxpdCgiICIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgfQoKICAgICAgICAkaW52ZWlnaC5IVFRQX2NoYWxsZW5nZV9xdWV1ZS5BZGQoJENsaWVudElQQWRkcmVzcyArICRDbGllbnRQb3J0ICsgJywnICsgJEhUVFBfY2hhbGxlbmdlKSAgPiAkbnVsbAoKICAgICAgICAkSFRUUF9OVExNX2J5dGVzID0gMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwNiwweDAwLDB4MDYsMHgwMCwweDM4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwNSwweDgyLDB4ODksMHhhMiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ODIsMHgwMCwweDgyLDB4MDAsMHgzZSwweDAwLDB4MDAsMHgwMCwweDA2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMSwweGIxLDB4MWQsMHgwMCwweDAwLDB4MDAsMHgwZiwweDRjLDB4MDAsMHg0MSwweDAwLDB4NDIsMHgwMCwweDAyLDB4MDAsMHgwNiwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMSwweDAwLDB4MTAsMHgwMCwweDQ4LDB4MDAsMHg0ZiwweDAwLDB4NTMsMHgwMCwweDU0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDRlLDB4MDAsMHg0MSwweDAwLDB4NGQsMHgwMCwweDQ1LDB4MDAsMHgwNCwweDAwLDB4MTIsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2MiwweDAwLDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDMsMHgwMCwweDI0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDY4LDB4MDAsMHg2ZiwweDAwLDB4NzMsMHgwMCwweDc0LDB4MDAsMHg2ZSwweDAwLDB4NjEsMHgwMCwweDZkLDB4MDAsMHg2NSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgyZSwweDAwLDB4NmMsMHgwMCwweDYxLDB4MDAsMHg2MiwweDAwLDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDZjLDB4MDAsMHgwNSwweDAwLDB4MTIsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDcsMHgwMCwweDA4LDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfdGltZXN0YW1wICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwYSwweDBhCgogICAgICAgICROVExNX2NoYWxsZW5nZV9iYXNlNjQgPSBbU3lzdGVtLkNvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZygkSFRUUF9OVExNX2J5dGVzKQogICAgICAgICROVExNID0gJ05UTE0gJyArICROVExNX2NoYWxsZW5nZV9iYXNlNjQKICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkSFRUUF9jaGFsbGVuZ2UKCiAgICAgICAgcmV0dXJuICROVExNCiAgICB9CgogICAgaWYoJEhUVFBTX2xpc3RlbmVyKQogICAgewogICAgICAgICRIVFRQX3R5cGUgPSAiSFRUUFMiCiAgICB9CiAgICBlbHNlaWYoJHByb3h5X2xpc3RlbmVyKQogICAgewogICAgICAgICRIVFRQX3R5cGUgPSAiUHJveHkiCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJEhUVFBfdHlwZSA9ICJIVFRQIgogICAgfQoKICAgIGlmKCRIVFRQSVAgLW5lICcwLjAuMC4wJykKICAgIHsKICAgICAgICAkSFRUUElQID0gW1N5c3RlbS5OZXQuSVBBZGRyZXNzXTo6UGFyc2UoJEhUVFBJUCkKICAgICAgICAkSFRUUF9lbmRwb2ludCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5JUEVuZFBvaW50KCRIVFRQSVAsJEhUVFBQb3J0KQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRIVFRQX2VuZHBvaW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LklQRW5kUG9pbnQoW1N5c3RlbS5OZXQuSVBBZGRyZXNzXTo6YW55LCRIVFRQUG9ydCkKICAgIH0KCiAgICAkSFRUUF9ydW5uaW5nID0gJHRydWUKICAgICRIVFRQX2xpc3RlbmVyID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVGNwTGlzdGVuZXIgJEhUVFBfZW5kcG9pbnQKICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICR0cnVlCiAgICAkcmVsYXlfc3RlcCA9IDAKCiAgICBpZigkcHJveHlfbGlzdGVuZXIpCiAgICB7CiAgICAgICAgJEhUVFBfbGluZ2VyID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuTGluZ2VyT3B0aW9uKCR0cnVlLDApCiAgICAgICAgJEhUVFBfbGlzdGVuZXIuU2VydmVyLkxpbmdlclN0YXRlID0gJEhUVFBfbGluZ2VyCiAgICB9CgogICAgdHJ5CiAgICB7CiAgICAgICAgJEhUVFBfbGlzdGVuZXIuU3RhcnQoKQogICAgfQogICAgY2F0Y2gKICAgIHsKICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBFcnJvciBzdGFydGluZyAkSFRUUF90eXBlIGxpc3RlbmVyIikKICAgICAgICAkSFRUUF9ydW5uaW5nID0gJGZhbHNlCgogICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEVycm9yIHN0YXJ0aW5nICRIVFRQX3R5cGUgbGlzdGVuZXIiKQogICAgICAgIH0KCiAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gRXJyb3Igc3RhcnRpbmcgJEhUVFBfdHlwZSBsaXN0ZW5lciIpCiAgICAgICAgfQoKICAgIH0KCiAgICA6SFRUUF9saXN0ZW5lcl9sb29wIHdoaWxlKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLWFuZCAkSFRUUF9ydW5uaW5nKQogICAgewogICAgICAgICRUQ1BfcmVxdWVzdCA9ICIiCiAgICAgICAgJFRDUF9yZXF1ZXN0X2J5dGVzID0gTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdIDQwOTYKICAgICAgICAkSFRUUF9zZW5kID0gJHRydWUKICAgICAgICAkSFRUUF9oZWFkZXJfY29udGVudF90eXBlID0gMHg0MywweDZmLDB4NmUsMHg3NCwweDY1LDB4NmUsMHg3NCwweDJkLDB4NTQsMHg3OSwweDcwLDB4NjUsMHgzYSwweDIwICsgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygidGV4dC9odG1sIikKICAgICAgICAkSFRUUF9oZWFkZXJfY2FjaGVfY29udHJvbCA9ICIiCiAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZSA9ICIiCiAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZV9kYXRhID0gIiIKICAgICAgICAkSFRUUF9tZXNzYWdlID0gIiIKICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbiA9ICAiIgogICAgICAgICRIVFRQX2hlYWRlcl9ob3N0ID0gIiIKICAgICAgICAkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudCA9ICIiCiAgICAgICAgJEhUVFBfcmVxdWVzdF9yYXdfVVJMID0gIiIKICAgICAgICAkTlRMTSA9ICJOVExNIgogICAgICAgIAogICAgICAgIHdoaWxlKCEkSFRUUF9saXN0ZW5lci5QZW5kaW5nKCkgLWFuZCAhJEhUVFBfY2xpZW50LkNvbm5lY3RlZCkKICAgICAgICB7CiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDEwCgogICAgICAgICAgICBpZighJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYnJlYWsgSFRUUF9saXN0ZW5lcl9sb29wCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYoJHJlbGF5X3N0ZXAgLWd0IDApCiAgICAgICAgewogICAgICAgICAgICAkcmVsYXlfcmVzZXQrKwoKICAgICAgICAgICAgaWYoJHJlbGF5X3Jlc2V0IC1ndCAyKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU01CIHJlbGF5IGF0dGFjayByZXNldHRpbmciKQogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAwCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBhdHRhY2sgcmVzZXR0aW5nIikKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGF0dGFjayByZXNldHRpbmciKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJHJlbGF5X3Jlc2V0ID0gMAogICAgICAgIH0KCiAgICAgICAgaWYoJEhUVFBTX2xpc3RlbmVyKQogICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCEkSFRUUF9jbGllbnQuQ29ubmVjdGVkIC1vciAkSFRUUF9jbGllbnRfY2xvc2UgLWFuZCAkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnQgPSAkSFRUUF9saXN0ZW5lci5BY2NlcHRUY3BDbGllbnQoKSAKCSAgICAgICAgICAgICRIVFRQX2NsZWFyX3N0cmVhbSA9ICRIVFRQX2NsaWVudC5HZXRTdHJlYW0oKQogICAgICAgICAgICAgICAgJEhUVFBfc3RyZWFtID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNlY3VyaXR5LlNzbFN0cmVhbSgkSFRUUF9jbGVhcl9zdHJlYW0sJGZhbHNlKQogICAgICAgICAgICAgICAgJFNTTF9jZXJ0ID0gKEdldC1DaGlsZEl0ZW0gQ2VydDpcTG9jYWxNYWNoaW5lXE15IHwgV2hlcmUtT2JqZWN0IHskXy5TdWJqZWN0IC1tYXRjaCAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9DTn0pCiAgICAgICAgICAgICAgICAkSFRUUF9zdHJlYW0uQXV0aGVudGljYXRlQXNTZXJ2ZXIoJFNTTF9jZXJ0LCRmYWxzZSxbU3lzdGVtLlNlY3VyaXR5LkF1dGhlbnRpY2F0aW9uLlNzbFByb3RvY29sc106OkRlZmF1bHQsJGZhbHNlKQogICAgICAgICAgICB9CgogICAgICAgICAgICBbYnl0ZVtdXSRTU0xfcmVxdWVzdF9ieXRlcyA9ICRudWxsCgogICAgICAgICAgICBkbyAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfcmVxdWVzdF9ieXRlX2NvdW50ID0gJEhUVFBfc3RyZWFtLlJlYWQoJFRDUF9yZXF1ZXN0X2J5dGVzLDAsJFRDUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCkKICAgICAgICAgICAgICAgICRTU0xfcmVxdWVzdF9ieXRlcyArPSAkVENQX3JlcXVlc3RfYnl0ZXNbMC4uKCRIVFRQX3JlcXVlc3RfYnl0ZV9jb3VudCAtIDEpXQogICAgICAgICAgICB9IHdoaWxlICgkSFRUUF9jbGVhcl9zdHJlYW0uRGF0YUF2YWlsYWJsZSkKCiAgICAgICAgICAgICRUQ1BfcmVxdWVzdCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNTTF9yZXF1ZXN0X2J5dGVzKQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewoKICAgICAgICAgICAgaWYoISRIVFRQX2NsaWVudC5Db25uZWN0ZWQgLW9yICRIVFRQX2NsaWVudF9jbG9zZSAtYW5kICRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudCA9ICRIVFRQX2xpc3RlbmVyLkFjY2VwdFRjcENsaWVudCgpIAoJICAgICAgICAgICAgJEhUVFBfc3RyZWFtID0gJEhUVFBfY2xpZW50LkdldFN0cmVhbSgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRIVFRQX3N0cmVhbS5EYXRhQXZhaWxhYmxlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9kYXRhX2F2YWlsYWJsZSA9ICR0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9kYXRhX2F2YWlsYWJsZSA9ICRmYWxzZQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkSFRUUF9zdHJlYW0uRGF0YUF2YWlsYWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfc3RyZWFtLlJlYWQoJFRDUF9yZXF1ZXN0X2J5dGVzLDAsJFRDUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJFRDUF9yZXF1ZXN0ID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkVENQX3JlcXVlc3RfYnl0ZXMpCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKCRUQ1BfcmVxdWVzdCAtbGlrZSAiNDctNDUtNTQtMjAqIiAtb3IgJFRDUF9yZXF1ZXN0IC1saWtlICI0OC00NS00MS00NC0yMCoiIC1vciAkVENQX3JlcXVlc3QgLWxpa2UgIjRmLTUwLTU0LTQ5LTRmLTRlLTUzLTIwKiIgLW9yICRUQ1BfcmVxdWVzdCAtbGlrZSAiNDMtNGYtNGUtNGUtNDUtNDMtNTQqIikKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX3Jhd19VUkwgPSAkVENQX3JlcXVlc3QuU3Vic3RyaW5nKCRUQ1BfcmVxdWVzdC5JbmRleE9mKCItMjAtIikgKyA0LCRUQ1BfcmVxdWVzdC5TdWJzdHJpbmcoJFRDUF9yZXF1ZXN0LkluZGV4T2YoIi0yMC0iKSArIDEpLkluZGV4T2YoIi0yMC0iKSAtIDMpCiAgICAgICAgICAgICRIVFRQX3Jhd19VUkwgPSAkSFRUUF9yYXdfVVJMLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgJEhUVFBfcmVxdWVzdF9yYXdfVVJMID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkSFRUUF9yYXdfVVJMLDAsJEhUVFBfcmF3X1VSTC5MZW5ndGgpCiAgICAgICAgICAgICRIVFRQX3NvdXJjZV9JUCA9ICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZwoKICAgICAgICAgICAgaWYoJFRDUF9yZXF1ZXN0IC1saWtlICIqLTQ4LTZGLTczLTc0LTNBLTIwLSoiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0ID0gJFRDUF9yZXF1ZXN0LlN1YnN0cmluZygkVENQX3JlcXVlc3QuSW5kZXhPZigiLTQ4LTZGLTczLTc0LTNBLTIwLSIpICsgMTkpCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0ID0gJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdC5TdWJzdHJpbmcoMCwkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0LkluZGV4T2YoIi0wRC0wQS0iKSkKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9ob3N0X2V4dHJhY3QgPSAkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0LlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9ob3N0ID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkSFRUUF9oZWFkZXJfaG9zdF9leHRyYWN0LDAsJEhUVFBfaGVhZGVyX2hvc3RfZXh0cmFjdC5MZW5ndGgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRUQ1BfcmVxdWVzdCAtbGlrZSAiKi01NS03My02NS03Mi0yRC00MS02Ny02NS02RS03NC0zQS0yMC0qIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdCA9ICRUQ1BfcmVxdWVzdC5TdWJzdHJpbmcoJFRDUF9yZXF1ZXN0LkluZGV4T2YoIi01NS03My02NS03Mi0yRC00MS02Ny02NS02RS03NC0zQS0yMC0iKSArIDM3KQogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdCA9ICRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QuU3Vic3RyaW5nKDAsJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdC5JbmRleE9mKCItMEQtMEEtIikpCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudF9leHRyYWN0ID0gJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnRfZXh0cmFjdCwwLCRIVFRQX2hlYWRlcl91c2VyX2FnZW50X2V4dHJhY3QuTGVuZ3RoKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkSFRUUF9yZXF1ZXN0X3Jhd19VUkxfb2xkIC1uZSAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgLW9yICRIVFRQX2NsaWVudF9oYW5kbGVfb2xkIC1uZSAkSFRUUF9jbGllbnQuQ2xpZW50LkhhbmRsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSBob3N0IGhlYWRlciAkSFRUUF9oZWFkZXJfaG9zdCByZWNlaXZlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHVzZXIgYWdlbnQgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVBgOmBuJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQiKQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHJlcXVlc3QgZm9yICRIVFRQX3JlcXVlc3RfcmF3X1VSTCByZWNlaXZlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgaG9zdCBoZWFkZXIgJEhUVFBfaGVhZGVyX2hvc3QgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHVzZXIgYWdlbnQgJEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgcmVjZWl2ZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHJlcXVlc3QgZm9yICRIVFRQX3JlcXVlc3RfcmF3X1VSTCByZWNlaXZlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIGhvc3QgaGVhZGVyICRIVFRQX2hlYWRlcl9ob3N0IHJlY2VpdmVkIGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdXNlciBhZ2VudCAkSFRUUF9oZWFkZXJfdXNlcl9hZ2VudCByZWNlaXZlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJFByb3h5IC1lcSAnWScgLWFuZCAkUHJveHlJZ25vcmUuQ291bnQgLWd0IDAgLWFuZCAoJFByb3h5SWdub3JlIHwgV2hlcmUtT2JqZWN0IHskSFRUUF9oZWFkZXJfdXNlcl9hZ2VudCAtbWF0Y2ggJF99KSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIGlnbm9yaW5nIHdwYWQuZGF0IHJlcXVlc3QgZHVlIHRvIHVzZXIgYWdlbnQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQoKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIGlnbm9yaW5nIHdwYWQuZGF0IHJlcXVlc3QgZHVlIHRvIHVzZXIgYWdlbnQgZnJvbSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSBpZ25vcmluZyB3cGFkLmRhdCByZXF1ZXN0IGR1ZSB0byB1c2VyIGFnZW50IGZyb20gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJFRDUF9yZXF1ZXN0IC1saWtlICIqLTQxLTc1LTc0LTY4LTZGLTcyLTY5LTdBLTYxLTc0LTY5LTZGLTZFLTNBLTIwLSoiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0ID0gJFRDUF9yZXF1ZXN0LlN1YnN0cmluZygkVENQX3JlcXVlc3QuSW5kZXhPZigiLTQxLTc1LTc0LTY4LTZGLTcyLTY5LTdBLTYxLTc0LTY5LTZGLTZFLTNBLTIwLSIpICsgNDYpCiAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0ID0gJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdC5TdWJzdHJpbmcoMCwkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0LkluZGV4T2YoIi0wRC0wQS0iKSkKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uX2V4dHJhY3QgPSAkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0LlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbl9leHRyYWN0LDAsJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb25fZXh0cmFjdC5MZW5ndGgpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCgkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgLW5vdG1hdGNoICcvd3BhZC5kYXQnIC1hbmQgJEhUVFBBdXRoIC1lcSAnQW5vbnltb3VzJykgLW9yICgkSFRUUF9yZXF1ZXN0X3Jhd19VUkwgLW1hdGNoICcvd3BhZC5kYXQnIC1hbmQgJFdQQURBdXRoIC1lcSAnQW5vbnltb3VzJykgLW9yICgKICAgICAgICAgICAgJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1tYXRjaCAnL3dwYWQuZGF0JyAtYW5kICRXUEFEQXV0aCAtbGlrZSAnTlRMTSonIC1hbmQgJFdQQURBdXRoSWdub3JlLkNvdW50IC1ndCAwIC1hbmQgKCRXUEFEQXV0aElnbm9yZSB8IFdoZXJlLU9iamVjdCB7JEhUVFBfaGVhZGVyX3VzZXJfYWdlbnQgLW1hdGNoICRffSkpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkSFRUUF9yZXNwb25zZV9zdGF0dXNfY29kZSA9IDB4MzIsMHgzMCwweDMwCiAgICAgICAgICAgICAgICAkSFRUUF9yZXNwb25zZV9waHJhc2UgPSAweDRmLDB4NGIKICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICR0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKCRwcm94eV9saXN0ZW5lcikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXNwb25zZV9zdGF0dXNfY29kZSA9IDB4MzQsMHgzMCwweDM3CiAgICAgICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZSA9IDB4NTAsMHg3MiwweDZmLDB4NzgsMHg3OSwweDJkLDB4NDEsMHg3NSwweDc0LDB4NjgsMHg2NSwweDZlLDB4NzQsMHg2OSwweDYzLDB4NjEsMHg3NCwweDY1LDB4M2EsMHgyMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc3BvbnNlX3N0YXR1c19jb2RlID0gMHgzNCwweDMwLDB4MzEKICAgICAgICAgICAgICAgICAgICAkSFRUUF9oZWFkZXJfYXV0aGVudGljYXRlID0gMHg1NywweDU3LDB4NTcsMHgyZCwweDQxLDB4NzUsMHg3NCwweDY4LDB4NjUsMHg2ZSwweDc0LDB4NjksMHg2MywweDYxLDB4NzQsMHg2NSwweDNhLDB4MjAKCiAgICAgICAgICAgICAgICAgICAgaWYoJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1tYXRjaCAnL3dwYWQuZGF0JykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc2V0X2RlbGF5ID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfcmVzZXRfZGVsYXlfdGltZW91dCA9IE5ldy1UaW1lU3BhbiAtU2Vjb25kcyAkSFRUUFJlc2V0RGVsYXlUaW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc2V0X2RlbGF5X3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2VfcGhyYXNlID0gMHg1NSwweDZlLDB4NjEsMHg3NSwweDc0LDB4NjgsMHg2ZiwweDcyLDB4NjksMHg3YSwweDY1LDB4NjQKICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGlmKCRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uLlN0YXJ0c1dpdGgoJ05UTE0gJykpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9hdXRob3JpemF0aW9uID0gJEhUVFBfaGVhZGVyX2F1dGhvcml6YXRpb24gLXJlcGxhY2UgJ05UTE0gJywnJwogICAgICAgICAgICAgICAgW0J5dGVbXV0kSFRUUF9yZXF1ZXN0X2J5dGVzID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkSFRUUF9oZWFkZXJfYXV0aG9yaXphdGlvbikKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRIVFRQX3JlcXVlc3RfYnl0ZXNbOC4uMTFdKSAtZXEgJzAxLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLlNNQl9yZWxheSAtYW5kICRIVFRQX3NvdXJjZV9JUCAtbmUgJFRhcmdldCAtYW5kICRyZWxheV9zdGVwIC1lcSAwKQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgdHJpZ2dlcmVkIGJ5ICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gR3JhYmJpbmcgY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICIgKyAkVGFyZ2V0KQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IHRyaWdnZXJlZCBieSAkSFRUUF9zb3VyY2VfSVAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBHcmFiYmluZyBjaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gIiArICRUYXJnZXQpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF90eXBlIHRvIFNNQiByZWxheSB0cmlnZ2VyZWQgYnkgJEhUVFBfc291cmNlX0lQIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkdyYWJiaW5nIGNoYWxsZW5nZSBmb3IgcmVsYXkgZnJvbSAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuU29ja2V0cy5UQ1BDbGllbnQKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xpZW50LlJlY2VpdmVUaW1lb3V0ID0gNjAwMDAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ29ubmVjdCgkVGFyZ2V0LCI0NDUiKQogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9jbGllbnRfY2xvc2UgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAxCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkU01CX3JlbGF5X3NvY2tldC5jb25uZWN0ZWQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgdGFyZ2V0IGlzIG5vdCByZXNwb25kaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGlzIG5vdCByZXNwb25kaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHRhcmdldCBpcyBub3QgcmVzcG9uZGluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkcmVsYXlfc3RlcCAtZXEgMSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9ieXRlcyA9IFNNQlJlbGF5Q2hhbGxlbmdlICRTTUJfcmVsYXlfc29ja2V0ICRIVFRQX3JlcXVlc3RfYnl0ZXMgJFNNQl92ZXJzaW9uCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9ieXRlcy5MZW5ndGggLWxlIDMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlbGF5X3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSBOVExNQ2hhbGxlbmdlQmFzZTY0ICRDaGFsbGVuZ2UgJEhUVFBfc291cmNlX0lQICRIVFRQX2NsaWVudC5DbGllbnQuUmVtb3RlRW5kcG9pbnQuUG9ydAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHJlbGF5X3N0ZXAgLWVxIDEpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCA9ICRTTUJfcmVsYXlfYnl0ZXNbMzQuLjMzXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2J5dGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQID0gJFNNQl9yZWxheV9OVExNU1NQIC1yZXBsYWNlICItIiwiIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQX2luZGV4ID0gJFNNQl9yZWxheV9OVExNU1NQLkluZGV4T2YoIjRFNTQ0QzRENTM1MzUwMDAiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ID0gJFNNQl9yZWxheV9OVExNU1NQX2luZGV4IC8gMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kb21haW5fbGVuZ3RoID0gRGF0YUxlbmd0aDIgKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDEyKSAkU01CX3JlbGF5X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTIpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTkpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl90YXJnZXRfbGVuZ3RoID0gRGF0YUxlbmd0aDIgKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDQwKSAkU01CX3JlbGF5X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNDApLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV90YXJnZXRfZmxhZyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDIyKV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTV9jaGFsbGVuZ2UgPSAkU01CX3JlbGF5X2J5dGVzWygkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAyNCkuLigkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAzMSldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3RhcmdldF9kZXRhaWxzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTYgKyAkU01CX2RvbWFpbl9sZW5ndGgpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNTUgKyAkU01CX2RvbWFpbl9sZW5ndGggKyAkU01CX3RhcmdldF9sZW5ndGgpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXNzaW9uX0lEID0gJFNNQl9yZWxheV9ieXRlc1s0NC4uNTFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9yZWxheV9ieXRlc1s0Li43XSkgLWVxICdmZi01My00ZC00MicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl92ZXJzaW9uIC1lcSAnU01CMScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fYnl0ZXMgPSAweDRlLDB4NTQsMHg0YywweDRkLDB4NTMsMHg1MywweDUwLDB4MDAsMHgwMiwweDAwLDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9kb21haW5fbGVuZ3RoX29mZnNldF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNSwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3RhcmdldF9mbGFnICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGEyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdGFyZ2V0X2xlbmd0aF9vZmZzZXRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfdGFyZ2V0X2RldGFpbHMKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICROVExNX2NoYWxsZW5nZV9iYXNlNjQgPSBbU3lzdGVtLkNvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZygkSFRUUF9OVExNX2J5dGVzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTSAnICsgJE5UTE1fY2hhbGxlbmdlX2Jhc2U2NAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gU01CTlRMTUNoYWxsZW5nZSAkU01CX3JlbGF5X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5IVFRQX2NoYWxsZW5nZV9xdWV1ZS5BZGQoJEhUVFBfc291cmNlX0lQICsgJEhUVFBfY2xpZW50LkNsaWVudC5SZW1vdGVFbmRwb2ludC5Qb3J0ICsgJywnICsgJE5UTE1fY2hhbGxlbmdlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDIKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUmVjZWl2ZWQgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgZnJvbSAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICRIVFRQX3NvdXJjZV9JUCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBQcm92aWRpbmcgY2hhbGxlbmdlICROVExNX2NoYWxsZW5nZSBmb3IgcmVsYXkgdG8gJEhUVFBfc291cmNlX0lQIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQgJENoYWxsZW5nZSAkSFRUUF9zb3VyY2VfSVAgJEhUVFBfY2xpZW50LkNsaWVudC5SZW1vdGVFbmRwb2ludC5Qb3J0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQgJENoYWxsZW5nZSAkSFRUUF9zb3VyY2VfSVAgJEhUVFBfY2xpZW50LkNsaWVudC5SZW1vdGVFbmRwb2ludC5Qb3J0CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRIVFRQX3JlcXVlc3RfYnl0ZXNbOC4uMTFdKSAtZXEgJzAzLTAwLTAwLTAwJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2xlbmd0aCA9IERhdGFMZW5ndGgyIDIwICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX29mZnNldCA9IERhdGFMZW5ndGg0IDI0ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggPSBEYXRhTGVuZ3RoMiAyOCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fb2Zmc2V0ID0gRGF0YUxlbmd0aDQgMzIgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgIFtTdHJpbmddJE5UTE1fY2hhbGxlbmdlID0gJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUgLWxpa2UgJEhUVFBfc291cmNlX0lQICsgJEhUVFBfY2xpZW50LkNsaWVudC5SZW1vdGVFbmRwb2ludC5Qb3J0ICsgJyonCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuUmVtb3ZlKCROVExNX2NoYWxsZW5nZSkKICAgICAgICAgICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkTlRMTV9jaGFsbGVuZ2UuU3Vic3RyaW5nKCgkTlRMTV9jaGFsbGVuZ2UuSW5kZXhPZigiLCIpKSArIDEpCiAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV9kb21haW5fbGVuZ3RoIC1lcSAwKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nID0gJycKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsgIAogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV9kb21haW5fb2Zmc2V0ICRIVFRQX05UTE1fZG9tYWluX2xlbmd0aCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX3VzZXJfbGVuZ3RoID0gRGF0YUxlbmd0aDIgMzYgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9vZmZzZXQgPSBEYXRhTGVuZ3RoNCA0MCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV91c2VyX2xlbmd0aCAtZ3QgMCkKICAgICAgICAgICAgICAgICAgICB7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX3VzZXJfc3RyaW5nID0gRGF0YVRvU3RyaW5nICRIVFRQX05UTE1fdXNlcl9vZmZzZXQgJEhUVFBfTlRMTV91c2VyX2xlbmd0aCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgPSAiIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCA9IERhdGFMZW5ndGgyIDQ0ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2hvc3Rfb2Zmc2V0ID0gRGF0YUxlbmd0aDQgNDggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgICAgICRIVFRQX05UTE1faG9zdF9zdHJpbmcgPSBEYXRhVG9TdHJpbmcgJEhUVFBfTlRMTV9ob3N0X29mZnNldCAkSFRUUF9OVExNX2hvc3RfbGVuZ3RoICRIVFRQX3JlcXVlc3RfYnl0ZXMKCiAgICAgICAgICAgICAgICAgICAgaWYoJEhUVFBfTlRMTV9sZW5ndGggLWVxIDI0KSAjIE5UTE12MQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fdHlwZSA9ICJOVExNdjEiCiAgICAgICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWygkSFRUUF9OVExNX29mZnNldCAtIDI0KS4uKCRIVFRQX05UTE1fb2Zmc2V0ICsgJEhUVFBfTlRMTV9sZW5ndGgpXSkgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gJE5UTE1fcmVzcG9uc2UuSW5zZXJ0KDQ4LCc6JykKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9oYXNoID0gJEhUVFBfTlRMTV91c2VyX3N0cmluZyArICI6OiIgKyAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgKyAiOiIgKyAkTlRMTV9yZXNwb25zZSArICI6IiArICROVExNX2NoYWxsZW5nZQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICAgICAgeyAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfbGlzdC5BZGQoJEhUVFBfTlRMTV9oYXNoKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlICROVExNX3R5cGUgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBjYXB0dXJlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgJE5UTE1fdHlwZSBjaGFsbGVuZ2UvcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGNhcHR1cmVkIGZyb20gJEhUVFBfc291cmNlX0lQKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighJGludmVpZ2guY29uc29sZV91bmlxdWUgLW9yICgkaW52ZWlnaC5jb25zb2xlX3VuaXF1ZSAtYW5kICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSAkTlRMTV90eXBlIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCAoJEhUVFBfTlRMTV9ob3N0X3N0cmluZyk6YG4kSFRUUF9OVExNX2hhc2giKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgJE5UTE1fdHlwZSBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAgKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpOmBuJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgLSBub3QgdW5pcXVlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCAtYW5kICghJGludmVpZ2guZmlsZV91bmlxdWUgLW9yICgkaW52ZWlnaC5maWxlX3VuaXF1ZSAtYW5kICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlLkFkZCgkSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgJE5UTE1fdHlwZSBjaGFsbGVuZ2UvcmVzcG9uc2Ugd3JpdHRlbiB0byAiICsgJGludmVpZ2guTlRMTXYxX291dF9maWxlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfdXNlcm5hbWVfbGlzdC5BZGQoIiRIVFRQX3NvdXJjZV9JUCAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlICMgTlRMTXYyCiAgICAgICAgICAgICAgICAgICAgeyAgIAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV90eXBlID0gIk5UTE12MiIgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJEhUVFBfcmVxdWVzdF9ieXRlc1skSFRUUF9OVExNX29mZnNldC4uKCRIVFRQX05UTE1fb2Zmc2V0ICsgJEhUVFBfTlRMTV9sZW5ndGgpXSkgLXJlcGxhY2UgIi0iLCIiCiAgICAgICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gJE5UTE1fcmVzcG9uc2UuSW5zZXJ0KDMyLCc6JykKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9oYXNoID0gJEhUVFBfTlRMTV91c2VyX3N0cmluZyArICI6OiIgKyAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgKyAiOiIgKyAkTlRMTV9jaGFsbGVuZ2UgKyAiOiIgKyAkTlRMTV9yZXNwb25zZQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2xpc3QuQWRkKCRIVFRQX05UTE1faGFzaCkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBjYXB0dXJlZCBmcm9tICRIVFRQX3NvdXJjZV9JUCgkSFRUUF9OVExNX2hvc3Rfc3RyaW5nKSIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubG9nX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAoJEhUVFBfTlRMTV9ob3N0X3N0cmluZykiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCEkaW52ZWlnaC5jb25zb2xlX3VuaXF1ZSAtb3IgKCRpbnZlaWdoLmNvbnNvbGVfdW5pcXVlIC1hbmQgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgLW5vdGNvbnRhaW5zICIkSFRUUF9zb3VyY2VfSVAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmciKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSArICIgLSAkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAgKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpOmBuJEhUVFBfTlRMTV9oYXNoIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSArICIgLSAkSFRUUF90eXBlIE5UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZWQgZnJvbSAkSFRUUF9zb3VyY2VfSVAgKCRIVFRQX05UTE1faG9zdF9zdHJpbmcpOmBuJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgLSBub3QgdW5pcXVlIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCAtYW5kICghJGludmVpZ2guZmlsZV91bmlxdWUgLW9yICgkaW52ZWlnaC5maWxlX3VuaXF1ZSAtYW5kICRpbnZlaWdoLk5UTE12Ml91c2VybmFtZV9saXN0IC1ub3Rjb250YWlucyAiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLkFkZCgkSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSB3cml0dGVuIHRvICIgKyAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgLW5vdGNvbnRhaW5zICIkSFRUUF9zb3VyY2VfSVAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmciKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml91c2VybmFtZV9saXN0LkFkZCgiJEhUVFBfc291cmNlX0lQICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2Vfc3RhdHVzX2NvZGUgPSAweDMyLDB4MzAsMHgzMAogICAgICAgICAgICAgICAgICAgICRIVFRQX3Jlc3BvbnNlX3BocmFzZSA9IDB4NGYsMHg0YgogICAgICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gIiIKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5TTUJfcmVsYXkgLWFuZCAkcmVsYXlfc3RlcCAtZXEgMikKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZighJFVzZXJuYW1lcyAtb3IgJFVzZXJuYW1lcyAtY29udGFpbnMgJEhUVFBfTlRMTV91c2VyX3N0cmluZyAtb3IgJFVzZXJuYW1lcyAtY29udGFpbnMgIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIikKICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgLW9yICghJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtYW5kIC1ub3QgJEhUVFBfTlRMTV91c2VyX3N0cmluZy5FbmRzV2l0aCgnJCcpKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QgLW5vdGNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNlbmRpbmcgJE5UTE1fdHlwZSByZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgZm9yIHJlbGF5IHRvICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNlbmRpbmcgJE5UTE1fdHlwZSByZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgZm9yIHJlbGF5IHRvICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiU2VuZGluZyAkTlRMTV90eXBlIHJlc3BvbnNlIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBmb3IgcmVsYXkgdG8gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNQlJlbGF5UmVzcG9uc2UgJFNNQl9yZWxheV9zb2NrZXQgJEhUVFBfcmVxdWVzdF9ieXRlcyAkU01CX3ZlcnNpb24gJFNNQl91c2VyX0lEICRTTUJfc2Vzc2lvbl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGhhcyBhbHJlYWR5IGJlZW4gdHJpZWQgb24gJFRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaGFzIGFscmVhZHkgYmVlbiB0cmllZCBvbiAkVGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkFib3J0aW5nIFNNQiByZWxheSBzaW5jZSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBoYXMgYWxyZWFkeSBiZWVuIHRyaWVkIG9uICRUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV91c2VyX3N0cmluZyBhcHBlYXJzIHRvIGJlIGEgbWFjaGluZSBhY2NvdW50IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgYXBwZWFycyB0byBiZSBhIG1hY2hpbmUgYWNjb3VudCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiQWJvcnRpbmcgU01CIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fdXNlcl9zdHJpbmcgYXBwZWFycyB0byBiZSBhIG1hY2hpbmUgYWNjb3VudCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWxheV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIHJlbGF5IHVzZXJuYW1lIGxpc3QiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBub3Qgb24gcmVsYXkgdXNlcm5hbWUgbGlzdCIpICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG5vdCBvbiBTTUIgcmVsYXkgdXNlcm5hbWUgbGlzdCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVsYXlfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIGlmKCRwcm94eV9saXN0ZW5lcikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRIVFRQX3NlbmQgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICRmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICBpZighJHByb3h5X2xpc3RlbmVyIC1hbmQgJFdQQURSZXNwb25zZSAtYW5kICRIVFRQX3JlcXVlc3RfcmF3X1VSTCAtbWF0Y2ggJy93cGFkLmRhdCcgLWFuZCAoISRQcm94eUlnbm9yZSAtb3IgISgkUHJveHlJZ25vcmUgfCBXaGVyZS1PYmplY3QgeyRIVFRQX2hlYWRlcl91c2VyX2FnZW50IC1tYXRjaCAkX30pKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfbWVzc2FnZSA9ICRXUEFEUmVzcG9uc2UKICAgICAgICAgICAgICAgICRIVFRQX2hlYWRlcl9jb250ZW50X3R5cGUgPSAweDQzLDB4NmYsMHg2ZSwweDc0LDB4NjUsMHg2ZSwweDc0LDB4MmQsMHg1NCwweDc5LDB4NzAsMHg2NSwweDNhLDB4MjAgKyBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCJhcHBsaWNhdGlvbi94LW5zLXByb3h5LWF1dG9jb25maWciKQogICAgICAgICAgICB9CgogICAgICAgICAgICAkSFRUUF90aW1lc3RhbXAgPSBHZXQtRGF0ZSAtZm9ybWF0IHIKICAgICAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkSFRUUF90aW1lc3RhbXApCiAgICAgICAgICAgICRIVFRQX2hlYWRlcl9jb250ZW50X2xlbmd0aCA9IDB4NDMsMHg2ZiwweDZlLDB4NzQsMHg2NSwweDZlLDB4NzQsMHgyZCwweDRjLDB4NjUsMHg2ZSwweDY3LDB4NzQsMHg2OCwweDNhLDB4MjAgKyBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRIVFRQX21lc3NhZ2UuTGVuZ3RoKQogICAgICAgICAgICAkSFRUUF9tZXNzYWdlX2J5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkSFRUUF9tZXNzYWdlKQoKICAgICAgICAgICAgaWYoJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1ub3RtYXRjaCAnL3dwYWQuZGF0JyAtb3IgKCRXUEFEQXV0aCAtbGlrZSAnTlRMTSonIC1hbmQgJEhUVFBfcmVxdWVzdF9yYXdfVVJMIC1tYXRjaCAnL3dwYWQuZGF0JykgLWFuZCAhJEhUVFBfY2xpZW50X2Nsb3NlKQogICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZV9kYXRhID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkTlRMTSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5TcGVjaWFsaXplZC5PcmRlcmVkRGljdGlvbmFyeQogICAgICAgICAgICAkcGFja2V0X0hUVFBSZXNwb25zZS5BZGQoIkhUVFBSZXNwb25zZV9SZXF1ZXN0VmVyc2lvbiIsW0J5dGVbXV0oMHg0OCwweDU0LDB4NTQsMHg1MCwweDJmLDB4MzEsMHgyZSwweDMxLDB4MjApKQogICAgICAgICAgICAkcGFja2V0X0hUVFBSZXNwb25zZS5BZGQoIkhUVFBSZXNwb25zZV9TdGF0dXNDb2RlIiwkSFRUUF9yZXNwb25zZV9zdGF0dXNfY29kZSArIFtCeXRlW11dKDB4MjApKQogICAgICAgICAgICAkcGFja2V0X0hUVFBSZXNwb25zZS5BZGQoIkhUVFBSZXNwb25zZV9SZXNwb25zZVBocmFzZSIsJEhUVFBfcmVzcG9uc2VfcGhyYXNlICsgW0J5dGVbXV0oMHgwZCwweDBhKSkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfU2VydmVyIixbQnl0ZVtdXSgweDUzLDB4NjUsMHg3MiwweDc2LDB4NjUsMHg3MiwweDNhLDB4MjAsMHg0ZCwweDY5LDB4NjMsMHg3MiwweDZmLDB4NzMsMHg2ZiwweDY2LDB4NzQsMHgyZCwweDQ4LDB4NTQsMHg1NCwweDUwLDB4NDEsMHg1MCwweDQ5LDB4MmYsMHgzMiwweDJlLDB4MzAsMHgwZCwweDBhKSkKICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfVGltZVN0YW1wIixbQnl0ZVtdXSgweDQ0LDB4NjEsMHg3NCwweDY1LDB4M2EsMHgyMCkgKyAkSFRUUF90aW1lc3RhbXAgKyBbQnl0ZVtdXSgweDBkLDB4MGEpKQogICAgICAgICAgICAkcGFja2V0X0hUVFBSZXNwb25zZS5BZGQoIkhUVFBSZXNwb25zZV9Db250ZW50TGVuZ3RoIiwkSFRUUF9oZWFkZXJfY29udGVudF9sZW5ndGggKyBbQnl0ZVtdXSgweDBkLDB4MGEpKQoKICAgICAgICAgICAgaWYoJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZSAtYW5kICRIVFRQX2hlYWRlcl9hdXRoZW50aWNhdGVfZGF0YSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfQXV0aGVudGljYXRlSGVhZGVyIiwkSFRUUF9oZWFkZXJfYXV0aGVudGljYXRlICsgJEhUVFBfaGVhZGVyX2F1dGhlbnRpY2F0ZV9kYXRhICsgW0J5dGVbXV0oMHgwZCwweDBhKSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJEhUVFBfaGVhZGVyX2NvbnRlbnRfdHlwZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfQ29udGVudFR5cGUiLCRIVFRQX2hlYWRlcl9jb250ZW50X3R5cGUgKyBbQnl0ZVtdXSgweDBkLDB4MGEpKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkSFRUUF9oZWFkZXJfY2FjaGVfY29udHJvbCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBhY2tldF9IVFRQUmVzcG9uc2UuQWRkKCJIVFRQUmVzcG9uc2VfQ2FjaGVDb250cm9sIiwkSFRUUF9oZWFkZXJfY2FjaGVfY29udHJvbCArIFtCeXRlW11dKDB4MGQsMHgwYSkpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRIVFRQX3NlbmQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYWNrZXRfSFRUUFJlc3BvbnNlLkFkZCgiSFRUUFJlc3BvbnNlX01lc3NhZ2UiLFtCeXRlW11dKDB4MGQsMHgwYSkgKyAkSFRUUF9tZXNzYWdlX2J5dGVzKQogICAgICAgICAgICAgICAgJEhUVFBfcmVzcG9uc2UgPSBDb252ZXJ0RnJvbS1QYWNrZXRPcmRlcmVkRGljdGlvbmFyeSAkcGFja2V0X0hUVFBSZXNwb25zZQogICAgICAgICAgICAgICAgJEhUVFBfc3RyZWFtLldyaXRlKCRIVFRQX3Jlc3BvbnNlLDAsJEhUVFBfcmVzcG9uc2UuTGVuZ3RoKQogICAgICAgICAgICAgICAgJEhUVFBfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gMTAKICAgICAgICAgICAgJEhUVFBfcmVxdWVzdF9yYXdfVVJMX29sZCA9ICRIVFRQX3JlcXVlc3RfcmF3X1VSTAogICAgICAgICAgICAkSFRUUF9jbGllbnRfaGFuZGxlX29sZCA9ICRIVFRQX2NsaWVudC5DbGllbnQuSGFuZGxlCgogICAgICAgICAgICBpZigkSFRUUF9jbGllbnRfY2xvc2UpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkcHJveHlfbGlzdGVuZXIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEhUVFBfY2xpZW50LkNsaWVudC5DbG9zZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJEhUVFBfY2xpZW50LkNsb3NlKCkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CgogICAgICAgICAgICBpZigkSFRUUF9kYXRhX2F2YWlsYWJsZSAtb3IgISRIVFRQX3Jlc2V0X2RlbGF5IC1vciAkSFRUUF9yZXNldF9kZWxheV9zdG9wd2F0Y2guRWxhcHNlZCAtZ2UgJEhUVFBfcmVzZXRfZGVsYXlfdGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEhUVFBfY2xpZW50LkNsb3NlKCkKICAgICAgICAgICAgICAgICRIVFRQX2NsaWVudF9jbG9zZSA9ICR0cnVlCiAgICAgICAgICAgICAgICAkSFRUUF9yZXNldF9kZWxheSA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gMTAwCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgIH0KCiAgICAkSFRUUF9jbGllbnQuQ2xvc2UoKQogICAgc3RhcnQtc2xlZXAgLXMgMQogICAgJEhUVFBfbGlzdGVuZXIuU2VydmVyLmJsb2NraW5nID0gJGZhbHNlCiAgICBTdGFydC1TbGVlcCAtcyAxCiAgICAkSFRUUF9saXN0ZW5lci5TZXJ2ZXIuQ2xvc2UoKQogICAgU3RhcnQtU2xlZXAgLXMgMQogICAgJEhUVFBfbGlzdGVuZXIuU3RvcCgpCn0KCiMgQ29udHJvbCBSZWxheSBMb29wIFNjcmlwdEJsb2NrCiRjb250cm9sX3JlbGF5X3NjcmlwdGJsb2NrID0gCnsKICAgIHBhcmFtICgkQ29uc29sZVF1ZXVlTGltaXQsJFJlbGF5QXV0b0V4aXQsJFJ1blRpbWUpCgogICAgZnVuY3Rpb24gU3RvcEludmVpZ2gKICAgIHsKICAgICAgICBwYXJhbSAoW1N0cmluZ10kZXhpdF9tZXNzYWdlKQoKICAgICAgICBpZigkaW52ZWlnaC5IVFRQUyAtYW5kICEkaW52ZWlnaC5IVFRQU19leGlzdGluZ19jZXJ0aWZpY2F0ZSAtb3IgKCRpbnZlaWdoLkhUVFBTX2V4aXN0aW5nX2NlcnRpZmljYXRlIC1hbmQgJGludmVpZ2guSFRUUFNfZm9yY2VfY2VydGlmaWNhdGVfZGVsZXRlKSkKICAgICAgICB7CgogICAgICAgICAgICB0cnkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlID0gTmV3LU9iamVjdCBTeXN0ZW0uU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5Llg1MDlDZXJ0aWZpY2F0ZXMuWDUwOVN0b3JlKCJNeSIsIkxvY2FsTWFjaGluZSIpCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuT3BlbignUmVhZFdyaXRlJykKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZXMgPSAoR2V0LUNoaWxkSXRlbSBDZXJ0OlxMb2NhbE1hY2hpbmVcTXkgfCBXaGVyZS1PYmplY3QgeyRfLklzc3VlciAtTGlrZSAiQ049IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX2lzc3Vlcn0pCgogICAgICAgICAgICAgICAgRm9yRWFjaCgkY2VydGlmaWNhdGUgaW4gJGNlcnRpZmljYXRlcykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuUmVtb3ZlKCRjZXJ0aWZpY2F0ZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuQ2xvc2UoKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYoJGludmVpZ2gucnVubmluZykKICAgICAgICB7CiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TIDEKICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkludmVpZ2ggZXhpdGVkIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikKCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBleGl0ZWQgZHVlIHRvICRleGl0X21lc3NhZ2UiKQogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggZXhpdGVkIGR1ZSB0byAkZXhpdF9tZXNzYWdlIikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVMgMQogICAgICAgICAgICAkaW52ZWlnaC5ydW5uaW5nID0gJGZhbHNlCiAgICAgICAgfQoKICAgICAgICBpZigkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgICAgIHsKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVMgMQogICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiSW52ZWlnaCBSZWxheSBleGl0ZWQgZHVlIHRvICRleGl0X21lc3NhZ2UgYXQgJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykiKQoKICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IGV4aXRlZCBkdWUgdG8gJGV4aXRfbWVzc2FnZSIpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBSZWxheSBleGl0ZWQgZHVlIHRvICRleGl0X21lc3NhZ2UiKQogICAgICAgICAgICB9CgogICAgICAgICAgICBTdGFydC1TbGVlcCAtUyAxCiAgICAgICAgICAgICRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgPSAkZmFsc2UKCiAgICAgICAgfSAKCiAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKICAgIH0KCiAgICBpZigkUnVuVGltZSkKICAgIHsgICAgCiAgICAgICAgJGNvbnRyb2xfdGltZW91dCA9IE5ldy1UaW1lU3BhbiAtTWludXRlcyAkUnVuVGltZQogICAgICAgICRjb250cm9sX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgfQogICAgICAgCiAgICB3aGlsZSgkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgewogICAgICAgIAogICAgICAgIGlmKCRSZWxheUF1dG9FeGl0IC1lcSAnWScgLWFuZCAhJGludmVpZ2guU01CX3JlbGF5KQogICAgICAgIHsKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVMgNQogICAgICAgICAgICBTdG9wSW52ZWlnaCAiZGlzYWJsZWQgcmVsYXkiCiAgICAgICAgfQoKICAgICAgICBpZigkUnVuVGltZSkKICAgICAgICB7CgogICAgICAgICAgICBpZigkY29udHJvbF9zdG9wd2F0Y2guRWxhcHNlZCAtZ2UgJGNvbnRyb2xfdGltZW91dCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RvcEludmVpZ2ggInJ1biB0aW1lIgogICAgICAgICAgICB9CgogICAgICAgIH0KCiAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQgLWFuZCAtbm90ICRpbnZlaWdoLmNvbnRyb2wpCiAgICAgICAgewoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLmxvZ19vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guTlRMTXYxX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2ZpbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNsZWFydGV4dF9maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLmNsZWFydGV4dF9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jbGVhcnRleHRfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5mb3JtX2lucHV0X2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmZvcm1faW5wdXRfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5mb3JtX2lucHV0X291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLmZvcm1faW5wdXRfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfQoKICAgICAgICBpZighJGludmVpZ2guY29uc29sZV9vdXRwdXQgLWFuZCAkQ29uc29sZVF1ZXVlTGltaXQgLWdlIDApCiAgICAgICAgewoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guY29uc29sZV9xdWV1ZS5Db3VudCAtZ3QgJENvbnNvbGVRdWV1ZUxpbWl0IC1hbmQgISRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICB9CgogfQoKIyBIVFRQIExpc3RlbmVyIFN0YXJ0dXAgRnVuY3Rpb24gCmZ1bmN0aW9uIEhUVFBMaXN0ZW5lcigpCnsKICAgICRIVFRQU19saXN0ZW5lciA9ICRmYWxzZQogICAgJHByb3h5X2xpc3RlbmVyID0gJGZhbHNlCiAgICAkSFRUUF9ydW5zcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkSFRUUF9ydW5zcGFjZS5PcGVuKCkKICAgICRIVFRQX3J1bnNwYWNlLlNlc3Npb25TdGF0ZVByb3h5LlNldFZhcmlhYmxlKCdpbnZlaWdoJywkaW52ZWlnaCkKICAgICRIVFRQX3Bvd2Vyc2hlbGwgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkSFRUUF9wb3dlcnNoZWxsLlJ1bnNwYWNlID0gJEhUVFBfcnVuc3BhY2UKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkaXJraW5fZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2NoYWxsZW5nZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9leGVjdXRlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX05UTE1fZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkSFRUUF9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoJENoYWxsZW5nZSkuQWRkQXJndW1lbnQoJENvbW1hbmQpLkFkZEFyZ3VtZW50KAogICAgICAgICRIVFRQSVApLkFkZEFyZ3VtZW50KCRIVFRQUG9ydCkuQWRkQXJndW1lbnQoJEhUVFBSZXNldERlbGF5KS5BZGRBcmd1bWVudCgKICAgICAgICAkSFRUUFJlc2V0RGVsYXlUaW1lb3V0KS5BZGRBcmd1bWVudCgkSFRUUFNfbGlzdGVuZXIpLkFkZEFyZ3VtZW50KCRQcm94eSkuQWRkQXJndW1lbnQoCiAgICAgICAgJFByb3h5SWdub3JlKS5BZGRBcmd1bWVudCgkcHJveHlfbGlzdGVuZXIpLkFkZEFyZ3VtZW50KCRSZWxheUF1dG9EaXNhYmxlKS5BZGRBcmd1bWVudCgKICAgICAgICAkU2VydmljZSkuQWRkQXJndW1lbnQoJFNNQl92ZXJzaW9uKS5BZGRBcmd1bWVudCgkVGFyZ2V0KS5BZGRBcmd1bWVudCgkVXNlcm5hbWVzKS5BZGRBcmd1bWVudCgKICAgICAgICAkV1BBREF1dGgpLkFkZEFyZ3VtZW50KCRXUEFEQXV0aElnbm9yZSkuQWRkQXJndW1lbnQoJFdQQURSZXNwb25zZSkgPiAkbnVsbAogICAgJEhUVFBfcG93ZXJzaGVsbC5CZWdpbkludm9rZSgpID4gJG51bGwKfQoKU3RhcnQtU2xlZXAgLW0gNTAKCiMgSFRUUFMgTGlzdGVuZXIgU3RhcnR1cCBGdW5jdGlvbiAKZnVuY3Rpb24gSFRUUFNMaXN0ZW5lcigpCnsKICAgICRIVFRQU19saXN0ZW5lciA9ICR0cnVlCiAgICAkcHJveHlfbGlzdGVuZXIgPSAkZmFsc2UKICAgICRIVFRQU19ydW5zcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkSFRUUFNfcnVuc3BhY2UuT3BlbigpCiAgICAkSFRUUFNfcnVuc3BhY2UuU2Vzc2lvblN0YXRlUHJveHkuU2V0VmFyaWFibGUoJ2ludmVpZ2gnLCRpbnZlaWdoKQogICAgJEhUVFBTX3Bvd2Vyc2hlbGwgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkSFRUUFNfcG93ZXJzaGVsbC5SdW5zcGFjZSA9ICRIVFRQU19ydW5zcGFjZQogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUFNfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJGlya2luX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUFNfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfZXhlY3V0ZV9zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJEhUVFBTX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQU19wb3dlcnNoZWxsLkFkZFNjcmlwdCgkSFRUUF9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoJENoYWxsZW5nZSkuQWRkQXJndW1lbnQoJENvbW1hbmQpLkFkZEFyZ3VtZW50KAogICAgICAgICRIVFRQSVApLkFkZEFyZ3VtZW50KCRIVFRQU1BvcnQpLkFkZEFyZ3VtZW50KCRIVFRQUmVzZXREZWxheSkuQWRkQXJndW1lbnQoCiAgICAgICAgJEhUVFBSZXNldERlbGF5VGltZW91dCkuQWRkQXJndW1lbnQoJEhUVFBTX2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUHJveHkpLkFkZEFyZ3VtZW50KAogICAgICAgICRQcm94eUlnbm9yZSkuQWRkQXJndW1lbnQoJHByb3h5X2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUmVsYXlBdXRvRGlzYWJsZSkuQWRkQXJndW1lbnQoCiAgICAgICAgJFNlcnZpY2UpLkFkZEFyZ3VtZW50KCRTTUJfdmVyc2lvbikuQWRkQXJndW1lbnQoJFRhcmdldCkuQWRkQXJndW1lbnQoJFVzZXJuYW1lcykuQWRkQXJndW1lbnQoCiAgICAgICAgJFdQQURBdXRoKS5BZGRBcmd1bWVudCgkV1BBREF1dGhJZ25vcmUpLkFkZEFyZ3VtZW50KCRXUEFEUmVzcG9uc2UpID4gJG51bGwKICAgICRIVFRQU19wb3dlcnNoZWxsLkJlZ2luSW52b2tlKCkgPiAkbnVsbAp9CgpTdGFydC1TbGVlcCAtbSA1MAoKIyBQcm94eSBMaXN0ZW5lciBTdGFydHVwIEZ1bmN0aW9uIApmdW5jdGlvbiBQcm94eUxpc3RlbmVyKCkKewogICAgJEhUVFBTX2xpc3RlbmVyID0gJGZhbHNlCiAgICAkcHJveHlfbGlzdGVuZXIgPSAkdHJ1ZQogICAgJHByb3h5X3J1bnNwYWNlID0gW1J1bnNwYWNlRmFjdG9yeV06OkNyZWF0ZVJ1bnNwYWNlKCkKICAgICRwcm94eV9ydW5zcGFjZS5PcGVuKCkKICAgICRwcm94eV9ydW5zcGFjZS5TZXNzaW9uU3RhdGVQcm94eS5TZXRWYXJpYWJsZSgnaW52ZWlnaCcsJGludmVpZ2gpCiAgICAkcHJveHlfcG93ZXJzaGVsbCA9IFtQb3dlclNoZWxsXTo6Q3JlYXRlKCkKICAgICRwcm94eV9wb3dlcnNoZWxsLlJ1bnNwYWNlID0gJHByb3h5X3J1bnNwYWNlCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRwcm94eV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkaXJraW5fZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRwcm94eV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X3Jlc3BvbnNlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9yZWxheV9leGVjdXRlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkcHJveHlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJFNNQl9OVExNX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJHByb3h5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRIVFRQX3NjcmlwdGJsb2NrKS5BZGRBcmd1bWVudCgkQ2hhbGxlbmdlKS5BZGRBcmd1bWVudCgkQ29tbWFuZCkuQWRkQXJndW1lbnQoCiAgICAgICAgJFByb3h5SVApLkFkZEFyZ3VtZW50KCRQcm94eVBvcnQpLkFkZEFyZ3VtZW50KCRIVFRQUmVzZXREZWxheSkuQWRkQXJndW1lbnQoCiAgICAgICAgJEhUVFBSZXNldERlbGF5VGltZW91dCkuQWRkQXJndW1lbnQoJEhUVFBTX2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUHJveHkpLkFkZEFyZ3VtZW50KAogICAgICAgICRQcm94eUlnbm9yZSkuQWRkQXJndW1lbnQoJHByb3h5X2xpc3RlbmVyKS5BZGRBcmd1bWVudCgkUmVsYXlBdXRvRGlzYWJsZSkuQWRkQXJndW1lbnQoCiAgICAgICAgJFNlcnZpY2UpLkFkZEFyZ3VtZW50KCRTTUJfdmVyc2lvbikuQWRkQXJndW1lbnQoJFRhcmdldCkuQWRkQXJndW1lbnQoJFVzZXJuYW1lcykuQWRkQXJndW1lbnQoCiAgICAgICAgJFdQQURBdXRoKS5BZGRBcmd1bWVudCgkV1BBREF1dGhJZ25vcmUpLkFkZEFyZ3VtZW50KCRXUEFEUmVzcG9uc2UpID4gJG51bGwKICAgICRwcm94eV9wb3dlcnNoZWxsLkJlZ2luSW52b2tlKCkgPiAkbnVsbAp9CgojIENvbnRyb2wgUmVsYXkgU3RhcnR1cCBGdW5jdGlvbgpmdW5jdGlvbiBDb250cm9sUmVsYXlMb29wKCkKewogICAgJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UgPSBbUnVuc3BhY2VGYWN0b3J5XTo6Q3JlYXRlUnVuc3BhY2UoKQogICAgJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UuT3BlbigpCiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZS5TZXNzaW9uU3RhdGVQcm94eS5TZXRWYXJpYWJsZSgnaW52ZWlnaCcsJGludmVpZ2gpCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsID0gW1Bvd2VyU2hlbGxdOjpDcmVhdGUoKQogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5SdW5zcGFjZSA9ICRjb250cm9sX3JlbGF5X3J1bnNwYWNlCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkc2hhcmVkX2Jhc2ljX2Z1bmN0aW9uc19zY3JpcHRibG9jaykgPiAkbnVsbAogICAgJGNvbnRyb2xfcmVsYXlfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJGNvbnRyb2xfcmVsYXlfc2NyaXB0YmxvY2spLkFkZEFyZ3VtZW50KCRDb25zb2xlUXVldWVMaW1pdCkuQWRkQXJndW1lbnQoCiAgICAgICAgJFJlbGF5QXV0b0V4aXQpLkFkZEFyZ3VtZW50KCRSdW5UaW1lKSA+ICRudWxsCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkJlZ2luSW52b2tlKCkgPiAkbnVsbAp9CgojIEhUVFAgU2VydmVyIFN0YXJ0CmlmKCRIVFRQIC1lcSAnWScpCnsKICAgIEhUVFBMaXN0ZW5lcgp9CgojIEhUVFBTIFNlcnZlciBTdGFydAppZigkSFRUUFMgLWVxICdZJykKewogICAgSFRUUFNMaXN0ZW5lcgp9CgojIFByb3h5IFNlcnZlciBTdGFydAppZigkUHJveHkgLWVxICdZJykKewogICAgUHJveHlMaXN0ZW5lcgp9CgojIENvbnRyb2wgUmVsYXkgTG9vcCBTdGFydAppZigkQ29uc29sZVF1ZXVlTGltaXQgLWdlIDAgLW9yICRpbnZlaWdoLmZpbGVfb3V0cHV0IC1vciAkUmVsYXlBdXRvRXhpdCAtb3IgJFJ1blRpbWUpCnsKICAgIENvbnRyb2xSZWxheUxvb3AKfQoKIyBDb25zb2xlIE91dHB1dCBMb29wCnRyeQp7CgogICAgaWYoJGludmVpZ2guY29uc29sZV9vdXRwdXQpCiAgICB7CgogICAgICAgIGlmKCRDb25zb2xlU3RhdHVzKQogICAgICAgIHsgICAgCiAgICAgICAgICAgICRjb25zb2xlX3N0YXR1c190aW1lb3V0ID0gTmV3LVRpbWVTcGFuIC1NaW51dGVzICRDb25zb2xlU3RhdHVzCiAgICAgICAgICAgICRjb25zb2xlX3N0YXR1c19zdG9wd2F0Y2ggPSBbU3lzdGVtLkRpYWdub3N0aWNzLlN0b3B3YXRjaF06OlN0YXJ0TmV3KCkKICAgICAgICB9CgogICAgICAgIDpjb25zb2xlX2xvb3Agd2hpbGUoJGludmVpZ2gucmVsYXlfcnVubmluZyAtYW5kICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KQogICAgICAgIHsKCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggLXdpbGRjYXJkICgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICB7JF8gLWxpa2UgIiogd3JpdHRlbiB0byAqIiAtb3IgJF8gLWxpa2UgIiogZm9yIHJlbGF5ICoiIC1vciAkXyAtbGlrZSAiKlNNQiByZWxheSAqIiAtb3IgJF8gLWxpa2UgIiogbG9jYWwgYWRtaW5pc3RyYXRvciAqIn0KICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgeyRfIC1saWtlICIqIHNwb29mZXIgaXMgZGlzYWJsZWQiIC1vciAkXyAtbGlrZSAiKiBsb2NhbCByZXF1ZXN0IiAtb3IgJF8gLWxpa2UgIiogaG9zdCBoZWFkZXIgKiIgLW9yICRfIC1saWtlICIqIHVzZXIgYWdlbnQgcmVjZWl2ZWQgKiJ9CiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJENvbnNvbGVPdXRwdXQgLWVxICdZJykKICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCgogICAgICAgICAgICAgICAgICAgIH0gCgogICAgICAgICAgICAgICAgICAgIHskXyAtbGlrZSAiKiByZXNwb25zZSBzZW50IiAtb3IgJF8gLWxpa2UgIiogaWdub3JpbmcgKiIgLW9yICRfIC1saWtlICIqIEhUVFAqcmVxdWVzdCBmb3IgKiIgLW9yICRfIC1saWtlICIqIFByb3h5IHJlcXVlc3QgZm9yICoifQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJENvbnNvbGVPdXRwdXQgLW5lICJMb3ciKQogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKCiAgICAgICAgICAgICAgICAgICAgfSAKCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0gKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJENvbnNvbGVTdGF0dXMgLWFuZCAkY29uc29sZV9zdGF0dXNfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRjb25zb2xlX3N0YXR1c190aW1lb3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QuQ291bnQgLWd0IDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEN1cnJlbnQgdW5pcXVlIGNsZWFydGV4dCBjYXB0dXJlczoiICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jbGVhcnRleHRfbGlzdC5Tb3J0KCkKCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkdW5pcXVlX2NsZWFydGV4dCBpbiAkaW52ZWlnaC5jbGVhcnRleHRfbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCR1bmlxdWVfY2xlYXJ0ZXh0IC1uZSAkdW5pcXVlX2NsZWFydGV4dF9sYXN0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJHVuaXF1ZV9jbGVhcnRleHQgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX2NsZWFydGV4dF9sYXN0ID0gJHVuaXF1ZV9jbGVhcnRleHQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gTm8gY2xlYXJ0ZXh0IGNyZWRlbnRpYWxzIGhhdmUgYmVlbiBjYXB0dXJlZCIgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLk5UTE12MV9saXN0LkNvdW50IC1ndCAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBDdXJyZW50IHVuaXF1ZSBOVExNdjEgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzOiIgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9saXN0LlNvcnQoKQoKICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCR1bmlxdWVfTlRMTXYxIGluICRpbnZlaWdoLk5UTE12MV9saXN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHVuaXF1ZV9OVExNdjFfYWNjb3VudCA9ICR1bmlxdWVfTlRMTXYxLlN1YlN0cmluZygwLCR1bmlxdWVfTlRMTXYxLkluZGV4T2YoIjoiLCgkdW5pcXVlX05UTE12MS5JbmRleE9mKCI6IikgKyAyKSkpCgogICAgICAgICAgICAgICAgICAgICAgICBpZigkdW5pcXVlX05UTE12MV9hY2NvdW50IC1uZSAkdW5pcXVlX05UTE12MV9hY2NvdW50X2xhc3QpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkdW5pcXVlX05UTE12MSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICR1bmlxdWVfTlRMTXYxX2FjY291bnRfbGFzdCA9ICR1bmlxdWVfTlRMTXYxX2FjY291bnQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICR1bmlxdWVfTlRMTXYxX2FjY291bnRfbGFzdCA9ICcnCiAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBDdXJyZW50IE5UTE12MSBJUCBhZGRyZXNzZXMgYW5kIHVzZXJuYW1lczoiICsgJGludmVpZ2gubmV3bGluZSkKCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkTlRMTXYxX3VzZXJuYW1lIGluICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCROVExNdjFfdXNlcm5hbWUgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBObyBOVExNdjEgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcyBoYXZlIGJlZW4gY2FwdHVyZWQiICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5OVExNdjJfbGlzdC5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQ3VycmVudCB1bmlxdWUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlczoiICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfbGlzdC5Tb3J0KCkKCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkdW5pcXVlX05UTE12MiBpbiAkaW52ZWlnaC5OVExNdjJfbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICR1bmlxdWVfTlRMTXYyX2FjY291bnQgPSAkdW5pcXVlX05UTE12Mi5TdWJTdHJpbmcoMCwkdW5pcXVlX05UTE12Mi5JbmRleE9mKCI6IiwoJHVuaXF1ZV9OVExNdjIuSW5kZXhPZigiOiIpICsgMikpKQoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHVuaXF1ZV9OVExNdjJfYWNjb3VudCAtbmUgJHVuaXF1ZV9OVExNdjJfYWNjb3VudF9sYXN0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJHVuaXF1ZV9OVExNdjIgKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX05UTE12Ml9hY2NvdW50X2xhc3QgPSAkdW5pcXVlX05UTE12Ml9hY2NvdW50CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkdW5pcXVlX05UTE12Ml9hY2NvdW50X2xhc3QgPSAnJwogICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQ3VycmVudCBOVExNdjIgSVAgYWRkcmVzc2VzIGFuZCB1c2VybmFtZXM6IiArICRpbnZlaWdoLm5ld2xpbmUpCgogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJE5UTE12Ml91c2VybmFtZSBpbiAkaW52ZWlnaC5OVExNdjJfdXNlcm5hbWVfbGlzdCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkTlRMTXYyX3VzZXJuYW1lICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gTm8gTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBoYXNoZXMgaGF2ZSBiZWVuIGNhcHR1cmVkIiArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJGNvbnNvbGVfc3RhdHVzX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJGludmVpZ2guY29uc29sZV9pbnB1dCkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIGlmKFtDb25zb2xlXTo6S2V5QXZhaWxhYmxlKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgQlJFQUsgY29uc29sZV9sb29wCiAgICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgICAgICB9CgogICAgfQoKfQpmaW5hbGx5CnsKCiAgICBpZigkVG9vbCAtZXEgMikKICAgIHsKICAgICAgICAkaW52ZWlnaC5yZWxheV9ydW5uaW5nID0gJGZhbHNlCiAgICB9Cgp9Cgp9CiNFbmQgSW52b2tlLUludmVpZ2hSZWxheQoKZnVuY3Rpb24gU3RvcC1JbnZlaWdoCnsKPCMKLlNZTk9QU0lTClN0b3AtSW52ZWlnaCB3aWxsIHN0b3AgYWxsIHJ1bm5pbmcgSW52ZWlnaCBmdW5jdGlvbnMuCiM+CgppZigkaW52ZWlnaCkKewoKICAgIGlmKCRpbnZlaWdoLnJ1bm5pbmcgLW9yICRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICB7CgogICAgICAgIGlmKCRpbnZlaWdoLkhUVFBTIC1hbmQgISRpbnZlaWdoLkhUVFBTX2V4aXN0aW5nX2NlcnRpZmljYXRlIC1vciAoJGludmVpZ2guSFRUUFNfZXhpc3RpbmdfY2VydGlmaWNhdGUgLWFuZCAkaW52ZWlnaC5IVFRQU19mb3JjZV9jZXJ0aWZpY2F0ZV9kZWxldGUpKQogICAgICAgIHsKCiAgICAgICAgICAgIHRyeQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuWDUwOUNlcnRpZmljYXRlcy5YNTA5U3RvcmUoIk15IiwiTG9jYWxNYWNoaW5lIikKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5PcGVuKCdSZWFkV3JpdGUnKQogICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlcyA9IChHZXQtQ2hpbGRJdGVtIENlcnQ6XExvY2FsTWFjaGluZVxNeSB8IFdoZXJlLU9iamVjdCB7JF8uSXNzdWVyIC1MaWtlICJDTj0iICsgJGludmVpZ2guY2VydGlmaWNhdGVfaXNzdWVyfSkKCiAgICAgICAgICAgICAgICBGb3JFYWNoKCRjZXJ0aWZpY2F0ZSBpbiAkY2VydGlmaWNhdGVzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5SZW1vdmUoJGNlcnRpZmljYXRlKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5DbG9zZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2F0Y2gKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCJTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIgfCBPdXQtRmlsZSAkSW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZCAgIAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiKSAgPiAkbnVsbAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIGlmKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgZXhpdGVkIiB8IE91dC1GaWxlICRJbnZlaWdoLmxvZ19vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmxvZ19vdXRwdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gSW52ZWlnaCBSZWxheSBleGl0ZWQiKSAgPiAkbnVsbAogICAgICAgICAgICB9CgogICAgICAgICAgICBXcml0ZS1PdXRwdXQoIkludmVpZ2ggUmVsYXkgZXhpdGVkIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikKICAgICAgICAgICAgJGludmVpZ2gucmVsYXlfcnVubmluZyA9ICRmYWxzZQoKICAgICAgICB9IAoKICAgICAgICBpZigkaW52ZWlnaC5ydW5uaW5nKQogICAgICAgIHsKCiAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIGV4aXRlZCIgfCBPdXQtRmlsZSAkSW52ZWlnaC5sb2dfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkaW52ZWlnaC5sb2dfb3V0cHV0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggZXhpdGVkIikgID4gJG51bGwKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtT3V0cHV0KCJJbnZlaWdoIGV4aXRlZCBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICRpbnZlaWdoLnJ1bm5pbmcgPSAkZmFsc2UKICAgICAgICAgICAgCiAgICAgICAgfQoKICAgICAgICAkaW52ZWlnaC5IVFRQUyA9ICRmYWxzZQogICAgICAgIFN0YXJ0LVNsZWVwIC1TIDUKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBXcml0ZS1PdXRwdXQoIlRoZXJlIGFyZSBubyBydW5uaW5nIEludmVpZ2ggZnVuY3Rpb25zIikKICAgIH0KCn0KCn0KCmZ1bmN0aW9uIEdldC1JbnZlaWdoCnsKPCMKLlNZTk9QU0lTCkdldC1JbnZlaWdoIHdpbGwgZ2V0IHN0b3JlZCBJbnZlaWdoIGRhdGEgZnJvbSBtZW1vcnkuCgouUEFSQU1FVEVSIENvbnNvbGUKR2V0IHF1ZXVlZCBjb25zb2xlIG91dHB1dC4gVGhpcyBpcyBhbHNvIHRoZSBkZWZhdWx0IGlmIG5vIHBhcmFtZXRlcnMgYXJlIHNldC4KCi5QQVJBTUVURVIgTGVhcm5pbmcKR2V0IHZhbGlkIGhvc3RzIGRpc2NvdmVyZWQgdGhyb3VnaCBzcG9vZmVyIGxlYXJuaW5nLgoKLlBBUkFNRVRFUiBMb2cKR2V0IGxvZyBlbnRyaWVzLgoKLlBBUkFNRVRFUiBDbGVhcnRleHQKR2V0IGNhcHR1cmVkIGNsZWFydGV4dCBjcmVkZW50aWFscy4KCi5QQVJBTUVURVIgQ2xlYXJ0ZXh0VW5pcXVlCkdldCB1bmlxdWUgY2FwdHVyZWQgY2xlYXJ0ZXh0IGNyZWRlbnRpYWxzLgoKLlBBUkFNRVRFUiBOVExNdjEKR2V0IGNhcHR1cmVkIE5UTE12MSBjaGFsbGVuZ2UvcmVzcG9uc2UgaGFzaGVzLgoKLlBBUkFNRVRFUiBOVExNdjFVbmlxdWUKR2V0IHRoZSBmaXJzdCBjYXB0dXJlZCBOVExNdjEgY2hhbGxlbmdlL3Jlc3BvbnNlIGZvciBlYWNoIHVuaXF1ZSBhY2NvdW50LgoKLlBBUkFNRVRFUiBOVExNdjFVc2VybmFtZXMKR2V0IElQIGFkZHJlc3NlcyBhbmQgdXNlcm5hbWVzIGZvciBjYXB0dXJlZCBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcy4KCi5QQVJBTUVURVIgTlRMTXYyCkdldCBjYXB0dXJlZCBOVExNdjEgY2hhbGxlbmdlL3Jlc3BvbnNlIGhhc2hlcy4KCi5QQVJBTUVURVIgTlRMTXYyVW5pcXVlCkdldCB0aGUgZmlyc3QgY2FwdHVyZWQgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgZWFjaCB1bmlxdWUgYWNjb3VudC4KCi5QQVJBTUVURVIgTlRMTXYyVXNlcm5hbWVzCkdldCBJUCBhZGRyZXNzZXMgYW5kIHVzZXJuYW1lcyBmb3IgY2FwdHVyZWQgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBoYXNoZXMuCgouUEFSQU1FVEVSIFBPU1RSZXF1ZXN0CkdldCBjYXB0dXJlZCBQT1NUIHJlcXVlc3RzLgoKLlBBUkFNRVRFUiBQT1NUUmVxdWVzdFVuaXF1ZQpHZXQgdW5pcXVlIGNhcHR1cmVkIFBPU1QgcmVxdWVzdC4KIz4KCltDbWRsZXRCaW5kaW5nKCldCnBhcmFtCiggCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTd2l0Y2hdJENsZWFydGV4dCwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N3aXRjaF0kQ2xlYXJ0ZXh0VW5pcXVlLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3dpdGNoXSRDb25zb2xlLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3dpdGNoXSRMZWFybmluZywKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N3aXRjaF0kTG9nLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3dpdGNoXSROVExNdjEsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTd2l0Y2hdJE5UTE12MiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N3aXRjaF0kTlRMTXYxVW5pcXVlLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3dpdGNoXSROVExNdjJVbmlxdWUsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtTd2l0Y2hdJE5UTE12MVVzZXJuYW1lcywKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N3aXRjaF0kTlRMTXYyVXNlcm5hbWVzLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bU3dpdGNoXSRQT1NUUmVxdWVzdCwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N3aXRjaF0kUE9TVFJlcXVlc3RVbmlxdWUsCiAgICBbcGFyYW1ldGVyKFZhbHVlRnJvbVJlbWFpbmluZ0FyZ3VtZW50cz0kdHJ1ZSldJGludmFsaWRfcGFyYW1ldGVyCikKCmlmKCRDb25zb2xlIC1vciAkUFNCb3VuZFBhcmFtZXRlcnMuQ291bnQgLWVxIDApCnsKCiAgICB3aGlsZSgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgewoKICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guY29uc29sZV9xdWV1ZVswXSArICRpbnZlaWdoLm5ld2xpbmUpCiAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKCiAgICAgICAgICAgIHN3aXRjaCAtd2lsZGNhcmQgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICB7JF8gLWxpa2UgIiogd3JpdHRlbiB0byAqIiAtb3IgJF8gLWxpa2UgIiogZm9yIHJlbGF5ICoiIC1vciAkXyAtbGlrZSAiKlNNQiByZWxheSAqIiAtb3IgJF8gLWxpa2UgIiogbG9jYWwgYWRtaW5pc3RyYXRvciAqIn0KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZGVmYXVsdAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgIAogICAgfQoKfQoKaWYoJExvZykKewogICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLmxvZwp9CgppZigkTlRMTXYxKQp7CiAgICBXcml0ZS1PdXRwdXQgJGludmVpZ2guTlRMTXYxX2xpc3QKfQoKaWYoJE5UTE12MVVuaXF1ZSkKewogICAgJGludmVpZ2guTlRMTXYxX2xpc3QuU29ydCgpCgogICAgZm9yZWFjaCgkdW5pcXVlX05UTE12MSBpbiAkaW52ZWlnaC5OVExNdjFfbGlzdCkKICAgIHsKICAgICAgICAkdW5pcXVlX05UTE12MV9hY2NvdW50ID0gJHVuaXF1ZV9OVExNdjEuU3ViU3RyaW5nKDAsJHVuaXF1ZV9OVExNdjEuSW5kZXhPZigiOiIsKCR1bmlxdWVfTlRMTXYxLkluZGV4T2YoIjoiKSArIDIpKSkKCiAgICAgICAgaWYoJHVuaXF1ZV9OVExNdjFfYWNjb3VudCAtbmUgJHVuaXF1ZV9OVExNdjFfYWNjb3VudF9sYXN0KQogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICR1bmlxdWVfTlRMTXYxCiAgICAgICAgfQoKICAgICAgICAkdW5pcXVlX05UTE12MV9hY2NvdW50X2xhc3QgPSAkdW5pcXVlX05UTE12MV9hY2NvdW50CiAgICB9Cgp9CgppZigkTlRMTXYxVXNlcm5hbWVzKQp7CiAgICBXcml0ZS1PdXRwdXQgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QKfQoKaWYoJE5UTE12MikKewogICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLk5UTE12Ml9saXN0Cn0KCmlmKCROVExNdjJVbmlxdWUpCnsKICAgICRpbnZlaWdoLk5UTE12Ml9saXN0LlNvcnQoKQoKICAgIGZvcmVhY2goJHVuaXF1ZV9OVExNdjIgaW4gJGludmVpZ2guTlRMTXYyX2xpc3QpCiAgICB7CiAgICAgICAgJHVuaXF1ZV9OVExNdjJfYWNjb3VudCA9ICR1bmlxdWVfTlRMTXYyLlN1YlN0cmluZygwLCR1bmlxdWVfTlRMTXYyLkluZGV4T2YoIjoiLCgkdW5pcXVlX05UTE12Mi5JbmRleE9mKCI6IikgKyAyKSkpCgogICAgICAgIGlmKCR1bmlxdWVfTlRMTXYyX2FjY291bnQgLW5lICR1bmlxdWVfTlRMTXYyX2FjY291bnRfbGFzdCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkdW5pcXVlX05UTE12MgogICAgICAgIH0KCiAgICAgICAgJHVuaXF1ZV9OVExNdjJfYWNjb3VudF9sYXN0ID0gJHVuaXF1ZV9OVExNdjJfYWNjb3VudAogICAgfQoKfQoKaWYoJE5UTE12MlVzZXJuYW1lcykKewogICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLk5UTE12Ml91c2VybmFtZV9saXN0Cn0KCmlmKCRDbGVhcnRleHQpCnsKICAgIFdyaXRlLU91dHB1dCAkaW52ZWlnaC5jbGVhcnRleHRfbGlzdAp9CgppZigkQ2xlYXJ0ZXh0VW5pcXVlKQp7CiAgICBXcml0ZS1PdXRwdXQgJGludmVpZ2guY2xlYXJ0ZXh0X2xpc3QgfCBHZXQtVW5pcXVlCn0KCmlmKCRQT1NUUmVxdWVzdCkKewogICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLlBPU1RfcmVxdWVzdF9saXN0Cn0KCmlmKCRQT1NUUmVxdWVzdFVuaXF1ZSkKewogICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLlBPU1RfcmVxdWVzdF9saXN0IHwgR2V0LVVuaXF1ZQp9CgppZigkTGVhcm5pbmcpCnsKICAgIFdyaXRlLU91dHB1dCAkaW52ZWlnaC52YWxpZF9ob3N0X2xpc3QKfQoKfQoKZnVuY3Rpb24gV2F0Y2gtSW52ZWlnaAp7CjwjCi5TWU5PUFNJUwpXYXRjaC1JbnZlaWdoIHdpbGwgZW5hYmxlZCByZWFsIHRpbWUgY29uc29sZSBvdXRwdXQuIElmIHVzaW5nIHRoaXMgZnVuY3Rpb24gdGhyb3VnaCBhIHNoZWxsLCB0ZXN0IHRvIGVuc3VyZSB0aGF0IGl0IGRvZXNuJ3QgaGFuZyB0aGUgc2hlbGwuCgouUEFSQU1FVEVSIENvbnNvbGVPdXRwdXQKKE1lZGl1bSxMb3cpIE1lZGl1bSBhbmQgTG93IGNhbiBiZSB1c2VkIHRvIHJlZHVjZSBvdXRwdXQuCiM+CgpbQ21kbGV0QmluZGluZygpXQpwYXJhbQooIAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIkxvdyIsIk1lZGl1bSIpXVtTdHJpbmddJENvbnNvbGVPdXRwdXQgPSAiWSIsCiAgICBbcGFyYW1ldGVyKFZhbHVlRnJvbVJlbWFpbmluZ0FyZ3VtZW50cz0kdHJ1ZSldJGludmFsaWRfcGFyYW1ldGVyCikKCmlmKCRpbnZlaWdoLnRvb2wgLW5lIDEpCnsKCiAgICBpZigkaW52ZWlnaC5ydW5uaW5nIC1vciAkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgewogICAgICAgIFdyaXRlLU91dHB1dCAiUHJlc3MgYW55IGtleSB0byBzdG9wIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCIKICAgICAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICR0cnVlCgogICAgICAgIDpjb25zb2xlX2xvb3Agd2hpbGUoKCgkaW52ZWlnaC5ydW5uaW5nIC1vciAkaW52ZWlnaC5yZWxheV9ydW5uaW5nKSAtYW5kICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0KSAtb3IgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQ291bnQgLWd0IDAgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkpCiAgICAgICAgewoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guY29uc29sZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIHN3aXRjaCAtd2lsZGNhcmQgKCRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0pCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIHskXyAtbGlrZSAiKiB3cml0dGVuIHRvICoiIC1vciAkXyAtbGlrZSAiKiBmb3IgcmVsYXkgKiIgLW9yICRfIC1saWtlICIqU01CIHJlbGF5ICoiIC1vciAkXyAtbGlrZSAiKiBsb2NhbCBhZG1pbmlzdHJhdG9yICoifQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHskXyAtbGlrZSAiKiBzcG9vZmVyIGlzIGRpc2FibGVkIiAtb3IgJF8gLWxpa2UgIiogbG9jYWwgcmVxdWVzdCIgLW9yICRfIC1saWtlICIqIGhvc3QgaGVhZGVyICoiIC1vciAkXyAtbGlrZSAiKiB1c2VyIGFnZW50IHJlY2VpdmVkICoifQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRDb25zb2xlT3V0cHV0IC1lcSAnWScpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKCiAgICAgICAgICAgICAgICAgICAgfSAKCiAgICAgICAgICAgICAgICAgICAgeyRfIC1saWtlICIqIHJlc3BvbnNlIHNlbnQiIC1vciAkXyAtbGlrZSAiKiBpZ25vcmluZyAqIiAtb3IgJF8gLWxpa2UgIiogSFRUUCpyZXF1ZXN0IGZvciAqIiAtb3IgJF8gLWxpa2UgIiogUHJveHkgcmVxdWVzdCBmb3IgKiJ9CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZigkQ29uc29sZU91dHB1dCAtbmUgIkxvdyIpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKCiAgICAgICAgICAgICAgICAgICAgfSAKCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRpbnZlaWdoLmNvbnNvbGVfcXVldWVbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9IAoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoW0NvbnNvbGVdOjpLZXlBdmFpbGFibGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfb3V0cHV0ID0gJGZhbHNlCiAgICAgICAgICAgICAgICBCUkVBSyBjb25zb2xlX2xvb3AKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLW0gNQogICAgICAgIH0KCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgV3JpdGUtT3V0cHV0ICJJbnZlaWdoIGlzbid0IHJ1bm5pbmciCiAgICB9Cgp9CmVsc2UKewogICAgV3JpdGUtT3V0cHV0ICJXYXRjaC1JbnZlaWdoIGNhbm5vdCBiZSB1c2VkIHdpdGggY3VycmVudCBleHRlcm5hbCB0b29sIHNlbGVjdGlvbiIKfQoKfQoKZnVuY3Rpb24gQ2xlYXItSW52ZWlnaAp7CjwjCi5TWU5PUFNJUwpDbGVhci1JbnZlaWdoIHdpbGwgY2xlYXIgSW52ZWlnaCBkYXRhIGZyb20gbWVtb3J5LgojPgoKaWYoJGludmVpZ2gpCnsKCiAgICBpZighJGludmVpZ2gucnVubmluZyAtYW5kICEkaW52ZWlnaC5yZWxheV9ydW5uaW5nKQogICAgewogICAgICAgIFJlbW92ZS1WYXJpYWJsZSBpbnZlaWdoIC1zY29wZSBnbG9iYWwKICAgICAgICBXcml0ZS1PdXRwdXQgIkludmVpZ2ggZGF0YSBoYXMgYmVlbiBjbGVhcmVkIGZyb20gbWVtb3J5IgogICAgfQogICAgZWxzZQogICAgewogICAgICAgIFdyaXRlLU91dHB1dCAiUnVuIFN0b3AtSW52ZWlnaCBiZWZvcmUgcnVubmluZyBDbGVhci1JbnZlaWdoIgogICAgfQoKfQoKfQ==
