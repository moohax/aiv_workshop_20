Invoke-Portscan.ps1,88ca111619777f632386f272a91211e5,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVBvcnRzY2FuCnsKPCMKLlNZTk9QU0lTCgpTaW1wbGUgcG9ydHNjYW4gbW9kdWxlCgpQb3dlclNwbG9pdCBGdW5jdGlvbjogSW52b2tlLVBvcnRzY2FuCkF1dGhvcjogUmljaCBMdW5kZWVuIChodHRwOi8vd2Vic3RlcnNQcm9kaWd5Lm5ldCkKTGljZW5zZTogQlNEIDMtQ2xhdXNlClJlcXVpcmVkIERlcGVuZGVuY2llczogTm9uZQpPcHRpb25hbCBEZXBlbmRlbmNpZXM6IE5vbmUKCi5ERVNDUklQVElPTgoKRG9lcyBhIHNpbXBsZSBwb3J0IHNjYW4gdXNpbmcgcmVndWxhciBzb2NrZXRzLCBiYXNlZCAocHJldHR5KSBsb29zZWx5IG9uIG5tYXAKCi5OT1RFUwoKdmVyc2lvbiAuMTMKCi5QQVJBTUVURVIgSG9zdHMKCkluY2x1ZGUgdGhlc2UgY29tbWEgc2VwZXJhdGVkIGhvc3RzIChzdXBwb3J0cyBJUHY0IENJRFIgbm90YXRpb24pIG9yIHBpcGUgdGhlbSBpbgoKLlBBUkFNRVRFUiBIb3N0RmlsZQoKSW5wdXQgaG9zdHMgZnJvbSBmaWxlIHJhdGhlciB0aGFuIGNvbW1hbmRsaW5lCgouUEFSQU1FVEVSIEV4Y2x1ZGVIb3N0cwoKRXhjbHVkZSB0aGVzZSBjb21tYSBzZXBlcmF0ZWQgaG9zdHMKCi5QQVJBTUVURVIgUG9ydHMKCkluY2x1ZGUgdGhlc2UgY29tbWEgc2VwZXJhdGVkIHBvcnRzIChjYW4gYWxzbyBiZSBhIHJhbmdlIGxpa2UgODAtOTApCgouUEFSQU1FVEVSIFBvcnRGaWxlCgpJbnB1dCBwb3J0cyBmcm9tIGEgZmlsZQoKLlBBUkFNRVRFUiBUb3BQb3J0cwoKSW5jbHVkZSB0aGUgeCB0b3AgcG9ydHMgLSBvbmx5IGdvZXMgdG8gMTAwMCwgZGVmYXVsdCBpcyB0b3AgNTAKCi5QQVJBTUVURVIgRXhjbHVkZWRQb3J0cwoKRXhjbHVkZSB0aGVzZSBjb21tYSBzZXBlcmF0ZWQgcG9ydHMKCi5QQVJBTUVURVIgU2tpcERpc2NvdmVyeQoKVHJlYXQgYWxsIGhvc3RzIGFzIG9ubGluZSwgc2tpcCBob3N0IGRpc2NvdmVyeQoKLlBBUkFNRVRFUiBQaW5nT25seQoKUGluZyBzY2FuIG9ubHkgKGRpc2FibGUgcG9ydCBzY2FuKQoKLlBBUkFNRVRFUiBEaXNjb3ZlcnlQb3J0cwoKQ29tbWEgc2VwYXJhdGVkIHBvcnRzIHVzZWQgZm9yIGhvc3QgZGlzY292ZXJ5LiAtMSBpcyBhIHBpbmcKCi5QQVJBTUVURVIgVGhyZWFkcwoKbnVtYmVyIG9mIG1heCB0aHJlYWRzIGZvciB0aGUgdGhyZWFkIHBvb2wgKHBlciBob3N0KQoKLlBBUkFNRVRFUiBuSG9zdHMKCm51bWJlciBvZiBob3N0cyB0byBjb25jdXJyZW50bHkgc2NhbgoKLlBBUkFNRVRFUiBUaW1lb3V0CgpUaW1lb3V0IHRpbWUgb24gYSBjb25uZWN0aW9uIGluIG1pbGlzZWNvbmRzIGJlZm9yZSBwb3J0IGlzIGRlY2xhcmVkIGZpbHRlcmVkCgouUEFSQU1FVEVSIFNsZWVwVGltZXIKCldhaXQgYmVmb3JlIHRocmVhZCBjaGVja2luZywgaW4gbWlsaXNlY29uZHMKCi5QQVJBTUVURVIgU3luY0ZyZXEKCkhvdyBvZnRlbiAoaW4gdGVybXMgb2YgaG9zdHMpIHRvIHN5bmMgdGhyZWFkcyBhbmQgZmx1c2ggb3V0cHV0CgouUEFSQU1FVEVSIFQKClswLTVdIHNob3J0Y3V0IHBlcmZvcm1hbmNlIG9wdGlvbnMuIERlZmF1bHQgaXMgMy4gaGlnaGVyIGlzIG1vcmUgYWdncmVzc2l2ZS4gU2V0cyAobmhvc3RzLCB0aHJlYWRzLHRpbWVvdXQpCiAgICA1IHskbkhvc3RzPTMwOyAgJFRocmVhZHMgPSAxMDAwOyAkVGltZW91dCA9IDc1MCAgfQogICAgNCB7JG5Ib3N0cz0yNTsgICRUaHJlYWRzID0gMTAwMDsgJFRpbWVvdXQgPSAxMjAwIH0KICAgIDMgeyRuSG9zdHM9MjA7ICAkVGhyZWFkcyA9IDEwMDsgICRUaW1lb3V0ID0gMjUwMCB9CiAgICAyIHskbkhvc3RzPTE1OyAgJFRocmVhZHMgPSAzMjsgICAkVGltZW91dCA9IDMwMDAgfQogICAgMSB7JG5Ib3N0cz0xMDsgICRUaHJlYWRzID0gMzI7ICAgJFRpbWVvdXQgPSA1MDAwIH0KCi5QQVJBTUVURVIgR3JlcE91dAoKR3JlcHBhYmxlIG91dHB1dCBmaWxlCgouUEFSQU1FVEVSIFhtbE91dAoKb3V0cHV0IFhNTCBmaWxlCgouUEFSQU1FVEVSIFJlYWRhYmxlT3V0CgpvdXRwdXQgZmlsZSBpbiAncmVhZGFibGUnIGZvcm1hdAoKLlBBUkFNRVRFUiBBbGxmb3JtYXRzT3V0CgpvdXRwdXQgaW4gcmVhZGFibGUgKC5ubWFwKSwgeG1sICgueG1sKSwgYW5kIGdyZXBwYWJsZSAoLmdubWFwKSBmb3JtYXRzCgouUEFSQU1FVEVSIG5vUHJvZ3Jlc3NNZXRlcgoKU3VwcHJlc3NlcyB0aGUgcHJvZ3Jlc3MgbWV0ZXIKCi5QQVJBTUVURVIgcXVpZXQKCnN1cHJlc3NlcyByZXR1cm5lZCBvdXRwdXQgYW5kIGRvbid0IHN0b3JlIGhvc3RzIGluIG1lbW9yeSAtIHVzZWZ1bCBmb3IgdmVyeSBsYXJnZSBzY2FucwoKLlBBUkFNRVRFUiBGb3JjZU92ZXJ3cml0ZQoKRm9yY2UgT3ZlcndyaXRlIGlmIG91dHB1dCBGaWxlcyBleGlzdC4gT3RoZXJ3aXNlIGl0IHRocm93cyBleGNlcHRpb24KCi5FWEFNUExFCgpDOlxQUz4gSW52b2tlLVBvcnRzY2FuIC1Ib3N0cyAid2Vic3RlcnNwcm9kaWd5Lm5ldCxnb29nbGUuY29tLG1pY3Jvc29mdC5jb20iIC1Ub3BQb3J0cyA1MAoKRGVzY3JpcHRpb24KLS0tLS0tLS0tLS0KU2NhbnMgdGhlIHRvcCA1MCBwb3J0cyBmb3IgaG9zdHMgZm91bmQgZm9yIHdlYnN0ZXJzcHJvZGlneS5uZXQsZ29vZ2xlLmNvbSwgYW5kIG1pY3Jvc29mdC5jb20KCi5FWEFNUExFCgpDOlxQUz4gZWNobyB3ZWJzdGVyc3Byb2RpZ3kubmV0IHwgSW52b2tlLVBvcnRzY2FuIC1vRyB0ZXN0LmdubWFwIC1mIC1wb3J0cyAiODAsNDQzLDgwODAiCgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpEb2VzIGEgcG9ydHNjYW4gb2YgIndlYnN0ZXJzcHJvZGlneS5uZXQiLCBhbmQgd3JpdGVzIGEgZ3JlcHBhYmxlIG91dHB1dCBmaWxlCgouRVhBTVBMRQoKQzpcUFM+IEludm9rZS1Qb3J0c2NhbiAtSG9zdHMgMTkyLjE2OC4xLjEvMjQgLVQgNCAtVG9wUG9ydHMgMjUgLW9BIGxvY2FsbmV0CgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpTY2FucyB0aGUgdG9wIDIwIHBvcnRzIGZvciBob3N0cyBmb3VuZCBpbiB0aGUgMTkyLjE2OC4xLjEvMjQgcmFuZ2UsIG91dHB1dHMgYWxsIGZpbGUgZm9ybWF0cwoKLkxJTksKCmh0dHA6Ly93ZWJzdGVyc3Byb2RpZ3kubmV0CiM+CgogICAgW0NtZGxldEJpbmRpbmcoKV1QYXJhbSAoCiAgICAgICAgI0hvc3QsIFBvcnRzCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSJjbWRIb3N0cyIsCgogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmU9JFRydWUsCiAgICAgICAgICAgICAgICAgICBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nW11dICRIb3N0cywKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSJmSG9zdHMiLAogICAgICAgICAgICAgICAgICAgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJpTCIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gICRIb3N0RmlsZSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJleGNsdWRlIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkRXhjbHVkZUhvc3RzLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoInAiKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRQb3J0cywKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJpUCIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gJFBvcnRGaWxlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkVG9wUG9ydHMsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygieFBvcnRzIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkRXhjbHVkZWRQb3J0cywKCiAgICAgICAgI0hvc3QgRGlzY292ZXJ5CiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJQbiIpXQogICAgICAgICAgICAgICAgICAgW1N3aXRjaF0gJFNraXBEaXNjb3ZlcnksCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygic24iKV0KICAgICAgICAgICAgICAgICAgIFtTd2l0Y2hdICRQaW5nT25seSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJQUyIpXQogICAgICAgICAgICAgICAgICAgW3N0cmluZ10gJERpc2NvdmVyeVBvcnRzID0gIi0xLDQ0NSw4MCw0NDMiLAoKICAgICAgICAjVGltaW5nIGFuZCBQZXJmb3JtYW5jZQogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtpbnRdICRUaHJlYWRzID0gMTAwLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbaW50XSAkbkhvc3RzID0gMjUsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtpbnRdICRUaW1lb3V0ID0gMjAwMCwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW2ludF0gJFNsZWVwVGltZXIgPSA1MDAsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtpbnRdICRTeW5jRnJlcSA9IDEwMjQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtpbnRdICRULAoKICAgICAgICAjT3V0cHV0CiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJvRyIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gJEdyZXBPdXQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygib1giKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRYbWxPdXQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygib04iKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRSZWFkYWJsZU91dCwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJvQSIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gJEFsbGZvcm1hdHNPdXQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtTd2l0Y2hdICRub1Byb2dyZXNzTWV0ZXIsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygicSIpXQogICAgICAgICAgICAgICAgICAgW1N3aXRjaF0gJHF1aWV0LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoIkYiKV0KICAgICAgICAgICAgICAgICAgIFtTd2l0Y2hdICRGb3JjZU92ZXJ3cml0ZQoKICAgICAgICAjVE9ETyBhZGQgc2NyaXB0IHBhcmFtZXRlcgogICAgICAgICNUT0RPIGFkZCByZXN1bWUgcGFyYW1ldGVyCiAgICApCgogICAgUFJPQ0VTUyB7CgogICAgICAgIFNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDIuMAoKICAgICAgICAkdmVyc2lvbiA9IC4xMwogICAgICAgICRob3N0TGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgICAgICRwb3J0TGlzdCA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgICAgICRob3N0UG9ydExpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKCiAgICAgICAgJHNjYW5uZWRIb3N0TGlzdCA9IEAoKQoKICAgICAgICBmdW5jdGlvbiBQYXJzZS1Ib3N0cwogICAgICAgIHsKICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRIb3N0cwogICAgICAgICAgICApCgogICAgICAgICAgICBbU3RyaW5nW11dICRpSG9zdHMgPSAkSG9zdHMuU3BsaXQoIiwiKQoKICAgICAgICAgICAgZm9yZWFjaCgkaUhvc3QgaW4gJGlIb3N0cykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJGlIb3N0ID0gJGlIb3N0LlJlcGxhY2UoIiAiLCAiIikKCiAgICAgICAgICAgICAgICBpZighJGlIb3N0KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYoJGlIb3N0LmNvbnRhaW5zKCIvIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJG5ldFBhcnQgPSAkaUhvc3Quc3BsaXQoIi8iKVswXQogICAgICAgICAgICAgICAgICAgIFt1aW50MzJdJG1hc2tQYXJ0ID0gJGlIb3N0LnNwbGl0KCIvIilbMV0KCiAgICAgICAgICAgICAgICAgICAgJGFkZHJlc3MgPSBbU3lzdGVtLk5ldC5JUEFkZHJlc3NdOjpQYXJzZSgkbmV0UGFydCkKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRtYXNrUGFydCAtZ2UgJGFkZHJlc3MuR2V0QWRkcmVzc0J5dGVzKCkuTGVuZ3RoICogOCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJCYWQgaG9zdCBtYXNrIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJG51bWhvc3RzID0gW1N5c3RlbS5tYXRoXTo6UG93KDIsKCgkYWRkcmVzcy5HZXRBZGRyZXNzQnl0ZXMoKS5MZW5ndGggKjgpIC0gJG1hc2tQYXJ0KSkKCiAgICAgICAgICAgICAgICAgICAgJHN0YXJ0YWRkcmVzcyA9ICRhZGRyZXNzLkdldEFkZHJlc3NCeXRlcygpCiAgICAgICAgICAgICAgICAgICAgW2FycmF5XTo6UmV2ZXJzZSgkc3RhcnRhZGRyZXNzKQoKICAgICAgICAgICAgICAgICAgICAkc3RhcnRhZGRyZXNzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1VJbnQzMigkc3RhcnRhZGRyZXNzLCAwKQogICAgICAgICAgICAgICAgICAgIFt1aW50MzJdJHN0YXJ0TWFzayA9IChbU3lzdGVtLm1hdGhdOjpQb3coMiwgJG1hc2tQYXJ0KS0xKSAqIChbU3lzdGVtLk1hdGhdOjpQb3coMiwoMzIgLSAkbWFza1BhcnQpKSkKICAgICAgICAgICAgICAgICAgICAkc3RhcnRBZGRyZXNzID0gJHN0YXJ0QWRkcmVzcyAtYmFuZCAkc3RhcnRNYXNrCgogICAgICAgICAgICAgICAgICAgICNpbiBwb3dlcnNoZWxsIDIuMCB0aGVyZSBhcmUgNCAwIGJ5dGVzIHBhZGRlZCwgc28gdGhlIFswLi4zXSBpcyBuZWNlc3NhcnkKICAgICAgICAgICAgICAgICAgICAkc3RhcnRBZGRyZXNzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkc3RhcnRhZGRyZXNzKVswLi4zXQogICAgICAgICAgICAgICAgICAgIFthcnJheV06OlJldmVyc2UoJHN0YXJ0YWRkcmVzcykKCiAgICAgICAgICAgICAgICAgICAgJGFkZHJlc3MgPSBbU3lzdGVtLk5ldC5JUEFkZHJlc3NdIFtieXRlW11dICRzdGFydEFkZHJlc3MKCiAgICAgICAgICAgICAgICAgICAgJGhvc3RMaXN0LkFkZCgkYWRkcmVzcy5JUEFkZHJlc3NUb1N0cmluZykKCiAgICAgICAgICAgICAgICAgICAgZm9yICgkaT0wOyAkaSAtbHQgJG51bWhvc3RzLTE7ICRpKyspCiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgJG5leHRBZGRyZXNzID0gICRhZGRyZXNzLkdldEFkZHJlc3NCeXRlcygpCiAgICAgICAgICAgICAgICAgICAgICAgIFthcnJheV06OlJldmVyc2UoJG5leHRBZGRyZXNzKQogICAgICAgICAgICAgICAgICAgICAgICAkbmV4dEFkZHJlc3MgPSAgW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpUb1VJbnQzMigkbmV4dEFkZHJlc3MsIDApCiAgICAgICAgICAgICAgICAgICAgICAgICRuZXh0QWRkcmVzcyArKwogICAgICAgICAgICAgICAgICAgICAgICAkbmV4dEFkZHJlc3MgPSBbU3lzdGVtLkJpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRuZXh0QWRkcmVzcylbMC4uM10KICAgICAgICAgICAgICAgICAgICAgICAgW2FycmF5XTo6UmV2ZXJzZSgkbmV4dEFkZHJlc3MpCgogICAgICAgICAgICAgICAgICAgICAgICAkYWRkcmVzcyA9IFtTeXN0ZW0uTmV0LklQQWRkcmVzc10gW2J5dGVbXV0gJG5leHRBZGRyZXNzCiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0TGlzdC5BZGQoJGFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcpCgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGhvc3RMaXN0LkFkZCgkaUhvc3QpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFBhcnNlLUlMSG9zdHMKICAgICAgICB7CiAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRIb3N0RmlsZQogICAgICAgICAgICApCgogICAgICAgICAgICBHZXQtQ29udGVudCAkSG9zdEZpbGUgfCBGb3JFYWNoLU9iamVjdCB7CiAgICAgICAgICAgICAgICBQYXJzZS1Ib3N0cyAkXwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBFeGNsdWRlLUhvc3RzCiAgICAgICAgewogICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW1N0cmluZ10gJGV4Y2x1ZGVIb3N0cwogICAgICAgICAgICApCgogICAgICAgICAgICBbU3RyaW5nW11dICRpSG9zdHMgPSAkZXhjbHVkZUhvc3RzLlNwbGl0KCIsIikKCiAgICAgICAgICAgIGZvcmVhY2goJGlIb3N0IGluICRpSG9zdHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpSG9zdCA9ICRpSG9zdC5SZXBsYWNlKCIgIiwgIiIpCiAgICAgICAgICAgICAgICAkaG9zdExpc3QuUmVtb3ZlKCRpSG9zdCkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gR2V0LVRvcFBvcnQKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICAgICAgW1ZhbGlkYXRlUmFuZ2UoMSwxMDAwKV0KICAgICAgICAgICAgICAgIFtpbnRdICRudW1Qb3J0cwogICAgICAgICAgICApCgogICAgICAgICAgICAjbGlzdCBvZiB0b3AgMTAwMCBwb3J0cyBmcm9tIG5tYXAgZnJvbSBKdW4gMjAxMwogICAgICAgICAgICBbaW50W11dICR0b3BQb3J0TGlzdCA9IEAoODAsMjMsNDQzLDIxLDMzODksMTEwLDQ0NSwxMzksMTQzLDUzLDEzNSwzMzA2LDgwODAsMjIKICAgICAgICAgICAgICAgICAgICAgICAgMTcyMywxMTEsOTk1LDk5Myw1OTAwLDEwMjUsMTcyMCw1NDgsMTEzLDgxLDYwMDEsMTc5LDEwMjYsMjAwMCw4NDQzLAogICAgICAgICAgICAgICAgICAgICAgICA4MDAwLDMyNzY4LDU1NCwyNiwxNDMzLDQ5MTUyLDIwMDEsNTE1LDgwMDgsNDkxNTQsMTAyNyw1NjY2LDY0Niw1MDAwLAogICAgICAgICAgICAgICAgICAgICAgICA1NjMxLDYzMSw0OTE1Myw4MDgxLDIwNDksODgsNzksNTgwMCwxMDYsMjEyMSwxMTEwLDQ5MTU1LDYwMDAsNTEzLAogICAgICAgICAgICAgICAgICAgICAgICA5OTAsNTM1Nyw0OTE1Niw1NDMsNTQ0LDUxMDEsMTQ0LDcsMzg5LDgwMDksOTk5OSw1MDA5LDcwNzAsNTE5MCwzMDAwLAogICAgICAgICAgICAgICAgICAgICAgICA1NDMyLDE5MDAsMzk4NiwxMywxMDI5LDksNTA1MSw2NjQ2LDQ5MTU3LDEwMjgsODczLDE3NTUsMjcxNyw0ODk5LDkxMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIDExOSwzNywxMDAwLDMwMDEsNTAwMSw4MiwxMDAxMCwxMDMwLDkwOTAsMjEwNywxMDI0LDIxMDMsNjAwNCwxODAxLAogICAgICAgICAgICAgICAgICAgICAgICA1MDUwLDE5LDgwMzEsMTA0MSwyNTUsMTA0OCwxMDQ5LDEwNTMsMTA1NCwxMDU2LDEwNjQsMzcwMywxNyw4MDgsMzY4OSwKICAgICAgICAgICAgICAgICAgICAgICAgMTAzMSwxMDQ0LDEwNzEsNTkwMSwxMDAsOTEwMiwyODY5LDQwMDEsNTEyMCw4MDEwLDkwMDAsMjEwNSw2MzYsMTAzOCwKICAgICAgICAgICAgICAgICAgICAgICAgMjYwMSwxLDcwMDAsMTA2NiwxMDY5LDYyNSwzMTEsMjgwLDI1NCw0MDAwLDE3NjEsNTAwMywyMDAyLDE5OTgsMjAwNSwKICAgICAgICAgICAgICAgICAgICAgICAgMTAzMiwxMDUwLDYxMTIsMTUyMSwyMTYxLDYwMDIsMjQwMSw5MDIsNDA0NSw3ODcsNzkzNywxMDU4LDIzODMsMTAzMywKICAgICAgICAgICAgICAgICAgICAgICAgMTA0MCwxMDU5LDUwMDAwLDU1NTUsMTQ5NCwzLDU5MywyMzAxLDMyNjgsNzkzOCwxMDIyLDEyMzQsMTAzNSwxMDM2LDEwMzcsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwNzQsODAwMiw5MDAxLDQ2NCw0OTcsMTkzNSwyMDAzLDY2NjYsNjU0MywyNCwxMzUyLDMyNjksMTExMSw0MDcsNTAwLAogICAgICAgICAgICAgICAgICAgICAgICAyMCwyMDA2LDEwMzQsMTIxOCwzMjYwLDE1MDAwLDQ0NDQsMjY0LDMzLDIwMDQsMTA0Miw0MjUxMCw5OTksMzA1MiwxMDIzLAogICAgICAgICAgICAgICAgICAgICAgICAyMjIsMTA2OCw4ODgsNzEwMCwxNzE3LDk5MiwyMDA4LDcwMDEsMjAwNyw4MDgyLDUxMiwxMDQzLDIwMDksNTgwMSwxNzAwLAogICAgICAgICAgICAgICAgICAgICAgICA3MDE5LDUwMDAxLDQ2NjIsMjA2NSw0MiwyNjAyLDMzMzMsOTUzNSw1MTAwLDI2MDQsNDAwMiw1MDAyLDEwNDcsMTA1MSwxMDUyLAogICAgICAgICAgICAgICAgICAgICAgICAxMDU1LDEwNjAsMTA2MiwxMzExLDMyODMsNDQ0Myw1MjI1LDUyMjYsNjA1OSw2Nzg5LDgwODksODY1MSw4NjUyLDg3MDEsOTQxNSwKICAgICAgICAgICAgICAgICAgICAgICAgOTU5Myw5NTk0LDk1OTUsMTY5OTIsMTY5OTMsMjA4MjgsMjM1MDIsMzI3NjksMzMzNTQsMzU1MDAsNTI4NjksNTU1NTUsNTU2MDAsCiAgICAgICAgICAgICAgICAgICAgICAgIDY0NjIzLDY0NjgwLDY1MDAwLDY1Mzg5LDEwNjcsMTM3ODIsMzY2LDU5MDIsOTA1MCw4NSwxMDAyLDU1MDAsMTg2MywxODY0LAogICAgICAgICAgICAgICAgICAgICAgICA1NDMxLDgwODUsMTAyNDMsNDUxMDAsNDk5OTksNTExMDMsNDksOTAsNjY2NywxNTAzLDY4ODEsMjcwMDAsMzQwLDE1MDAsODAyMSwKICAgICAgICAgICAgICAgICAgICAgICAgMjIyMiw1NTY2LDgwODgsODg5OSw5MDcxLDUxMDIsNjAwNSw5MTAxLDE2Myw1Njc5LDE0Niw2NDgsMTY2Niw4MywzNDc2LDUwMDQsCiAgICAgICAgICAgICAgICAgICAgICAgIDUyMTQsODAwMSw4MDgzLDgwODQsOTIwNywxNDIzOCwzMCw5MTIsMTIzNDUsMjAzMCwyNjA1LDYsNTQxLDQsMTI0OCwzMDA1LDgwMDcsCiAgICAgICAgICAgICAgICAgICAgICAgIDMwNiw4ODAsMjUwMCwxMDg2LDEwODgsMjUyNSw0MjQyLDgyOTEsOTAwOSw1MjgyMiw5MDAsNjEwMSwyODA5LDcyMDAsMjExLDgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgOTg3LDEwODMsMTIwMDAsNzA1LDcxMSwyMDAwNSw2OTY5LDEzNzgzLDEwNDUsMTA0NiwxMDYxLDEwNjMsMTA3MCwxMDcyLDEwNzMsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwNzUsMTA3NywxMDc4LDEwNzksMTA4MSwxMDgyLDEwODUsMTA5MywxMDk0LDEwOTYsMTA5OCwxMDk5LDExMDAsMTEwNCwxMTA2LAogICAgICAgICAgICAgICAgICAgICAgICAxMTA3LDExMDgsMTE0OCwxMTY5LDEyNzIsMTMxMCwxNjg3LDE3MTgsMTc4MywxODQwLDIxMDAsMjExOSwyMTM1LDIxNDQsMjE2MCwKICAgICAgICAgICAgICAgICAgICAgICAgMjE5MCwyMjYwLDIzODEsMjM5OSwyNDkyLDI2MDcsMjcxOCwyODExLDI4NzUsMzAxNywzMDMxLDMwNzEsMzIxMSwzMzAwLDMzMDEsCiAgICAgICAgICAgICAgICAgICAgICAgIDMzMjMsMzMyNSwzMzUxLDM0MDQsMzU1MSwzNTgwLDM2NTksMzc2NiwzNzg0LDM4MDEsMzgyNywzOTk4LDQwMDMsNDEyNiw0MTI5LAogICAgICAgICAgICAgICAgICAgICAgICA0NDQ5LDUyMjIsNTI2OSw1NjMzLDU3MTgsNTgxMCw1ODI1LDU4NzcsNTkxMCw1OTExLDU5MjUsNTk1OSw1OTYwLDU5NjEsNTk2MiwKICAgICAgICAgICAgICAgICAgICAgICAgNTk4Nyw1OTg4LDU5ODksNjEyMyw2MTI5LDYxNTYsNjM4OSw2NTgwLDY5MDEsNzEwNiw3NjI1LDc3NzcsNzc3OCw3OTExLDgwODYsCiAgICAgICAgICAgICAgICAgICAgICAgIDgxODEsODIyMiw4MzMzLDg0MDAsODQwMiw4NjAwLDg2NDksODg3Myw4OTk0LDkwMDIsOTAxMSw5MDgwLDkyMjAsOTI5MCw5NDg1LAogICAgICAgICAgICAgICAgICAgICAgICA5NTAwLDk1MDIsOTUwMyw5NjE4LDk5MDAsOTk2OCwxMDAwMiwxMDAxMiwxMDAyNCwxMDAyNSwxMDU2NiwxMDYxNiwxMDYxNywxMDYyMSwKICAgICAgICAgICAgICAgICAgICAgICAgMTA2MjYsMTA2MjgsMTA2MjksMTExMTAsMTM0NTYsMTQ0NDIsMTUwMDIsMTUwMDMsMTU2NjAsMTYwMDEsMTYwMTYsMTYwMTgsMTc5ODgsCiAgICAgICAgICAgICAgICAgICAgICAgIDE5MTAxLDE5ODAxLDE5ODQyLDIwMDAwLDIwMDMxLDIwMjIxLDIwMjIyLDIxNTcxLDIyOTM5LDI0ODAwLDI1NzM0LDI3NzE1LDI4MjAxLAogICAgICAgICAgICAgICAgICAgICAgICAzMDAwMCwzMDcxOCwzMTAzOCwzMjc4MSwzMjc4MiwzMzg5OSwzNDU3MSwzNDU3MiwzNDU3Myw0MDE5Myw0ODA4MCw0OTE1OCw0OTE1OSwKICAgICAgICAgICAgICAgICAgICAgICAgNDkxNjAsNTAwMDMsNTAwMDYsNTA4MDAsNTcyOTQsNTgwODAsNjAwMjAsNjMzMzEsNjUxMjksNjkxLDIxMiwxMDAxLDE5OTksMjAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgMjk5OCw2MDAzLDcwMDIsNTAwMDIsMzIsMjAzMywzMzcyLDk5LDQyNSw3NDksNTkwMyw0Myw0NTgsNTQwNSw2MTA2LDY1MDIsNzAwNywKICAgICAgICAgICAgICAgICAgICAgICAgMTM3MjIsMTA4NywxMDg5LDExMjQsMTE1MiwxMTgzLDExODYsMTI0NywxMjk2LDEzMzQsMTU4MCwxNzgyLDIxMjYsMjE3OSwyMTkxLDIyNTEsCiAgICAgICAgICAgICAgICAgICAgICAgIDI1MjIsMzAxMSwzMDMwLDMwNzcsMzI2MSwzNDkzLDM1NDYsMzczNywzODI4LDM4NzEsMzg4MCwzOTE4LDM5OTUsNDAwNiw0MTExLDQ0NDYsCiAgICAgICAgICAgICAgICAgICAgICAgIDUwNTQsNTIwMCw1MjgwLDUyOTgsNTgyMiw1ODU5LDU5MDQsNTkxNSw1OTIyLDU5NjMsNzEwMyw3NDAyLDc0MzUsNzQ0Myw3NTEyLDgwMTEsCiAgICAgICAgICAgICAgICAgICAgICAgIDgwOTAsODEwMCw4MTgwLDgyNTQsODUwMCw4NjU0LDkwOTEsOTExMCw5NjY2LDk4NzcsOTk0Myw5OTQ0LDk5OTgsMTAwMDQsMTA3NzgsMTU3NDIsCiAgICAgICAgICAgICAgICAgICAgICAgIDE2MDEyLDE4OTg4LDE5MjgzLDE5MzE1LDE5NzgwLDI0NDQ0LDI3MzUyLDI3MzUzLDI3MzU1LDMyNzg0LDQ5MTYzLDQ5MTY1LDQ5MTc1LAogICAgICAgICAgICAgICAgICAgICAgICA1MDM4OSw1MDYzNiw1MTQ5Myw1NTA1NSw1NjczOCw2MTUzMiw2MTkwMCw2MjA3OCwxMDIxLDkwNDAsNjY2LDcwMCw4NCw1NDUsMTExMiwKICAgICAgICAgICAgICAgICAgICAgICAgMTUyNCwyMDQwLDQzMjEsNTgwMiwzODI5Miw0OTQwMCwxMDg0LDE2MDAsMjA0OCwyMTExLDMwMDYsNjU0Nyw2Njk5LDkxMTEsMTYwODAsCiAgICAgICAgICAgICAgICAgICAgICAgIDU1NSw2NjcsNzIwLDgwMSwxNDQzLDE1MzMsMjEwNiw1NTYwLDYwMDcsMTA5MCwxMDkxLDExMTQsMTExNywxMTE5LDExMjIsMTEzMSwxMTM4LAogICAgICAgICAgICAgICAgICAgICAgICAxMTUxLDExNzUsMTE5OSwxMjAxLDEyNzEsMTg2MiwyMzIzLDIzOTMsMjM5NCwyNjA4LDI3MjUsMjkwOSwzMDAzLDMxNjgsMzIyMSwzMzIyLAogICAgICAgICAgICAgICAgICAgICAgICAzMzI0LDMzOTAsMzUxNywzNTI3LDM4MDAsMzgwOSwzODE0LDM4MjYsMzg2OSwzODc4LDM4ODksMzkwNSwzOTE0LDM5MjAsMzk0NSwzOTcxLAogICAgICAgICAgICAgICAgICAgICAgICA0MDA0LDQwMDUsNDI3OSw0NDQ1LDQ1NTAsNDU2Nyw0ODQ4LDQ5MDAsNTAzMyw1MDgwLDUwODcsNTIyMSw1NDQwLDU1NDQsNTY3OCw1NzMwLAogICAgICAgICAgICAgICAgICAgICAgICA1ODExLDU4MTUsNTg1MCw1ODYyLDU5MDYsNTkwNyw1OTUwLDU5NTIsNjAyNSw2NTEwLDY1NjUsNjU2Nyw2Njg5LDY2OTIsNjc3OSw2NzkyLAogICAgICAgICAgICAgICAgICAgICAgICA2ODM5LDcwMjUsNzQ5Niw3Njc2LDc4MDAsNzkyMCw3OTIxLDc5OTksODAyMiw4MDQyLDgwNDUsODA5Myw4MDk5LDgyMDAsODI5MCw4MjkyLAogICAgICAgICAgICAgICAgICAgICAgICA4MzAwLDgzODMsOTAwMyw5MDgxLDkwOTksOTIwMCw5NDE4LDk1NzUsOTg3OCw5ODk4LDk5MTcsMTAwMDMsMTAxODAsMTAyMTUsMTExMTEsCiAgICAgICAgICAgICAgICAgICAgICAgIDEyMTc0LDEyMjY1LDE0NDQxLDE1MDA0LDE2MDAwLDE2MTEzLDE3ODc3LDE4MDQwLDE4MTAxLDE5MzUwLDI1NzM1LDI2MjE0LDI3MzU2LAogICAgICAgICAgICAgICAgICAgICAgICAzMDk1MSwzMjc4MywzMjc4NSw0MDkxMSw0MTUxMSw0NDE3Niw0NDUwMSw0OTE2MSw0OTE2Nyw0OTE3Niw1MDMwMCw1MDUwMCw1MjY3MywKICAgICAgICAgICAgICAgICAgICAgICAgNTI4NDgsNTQwNDUsNTQzMjgsNTUwNTYsNTY3MzcsNTc3OTcsNjA0NDMsNzAsNDE3LDcxNCw3MjIsNzc3LDk4MSwxMDA5LDIwMjIsNDIyNCwKICAgICAgICAgICAgICAgICAgICAgICAgNDk5OCw2MzQ2LDMwMSw1MjQsNjY4LDc2NSwyMDQxLDU5OTksMTAwODIsMjU5LDEwMDcsMTQxNywxNDM0LDE5ODQsMjAzOCwyMDY4LDQzNDMsCiAgICAgICAgICAgICAgICAgICAgICAgIDYwMDksNzAwNCw0NDQ0MywxMDksNjg3LDcyNiw5MTEsMTQ2MSwyMDM1LDQxMjUsNjAwNiw3MjAxLDkxMDMsMTI1LDQ4MSw2ODMsOTAzLAogICAgICAgICAgICAgICAgICAgICAgICAxMDExLDE0NTUsMjAxMywyMDQzLDIwNDcsNjY2OCw2NjY5LDI1Niw0MDYsODQzLDIwNDIsMjA0NSw1OTk4LDk5MjksMzEzMzcsNDQ0NDIsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwOTIsMTA5NSwxMTAyLDExMDUsMTExMywxMTIxLDExMjMsMTEyNiwxMTMwLDExMzIsMTEzNywxMTQxLDExNDUsMTE0NywxMTQ5LDExNTQsCiAgICAgICAgICAgICAgICAgICAgICAgIDExNjQsMTE2NSwxMTY2LDExNzQsMTE4NSwxMTg3LDExOTIsMTE5OCwxMjEzLDEyMTYsMTIxNywxMjMzLDEyMzYsMTI0NCwxMjU5LDEyNzcsCiAgICAgICAgICAgICAgICAgICAgICAgIDEyODcsMTMwMCwxMzAxLDEzMDksMTMyMiwxMzI4LDE1NTYsMTY0MSwxNjg4LDE3MTksMTcyMSwxODA1LDE4MTIsMTgzOSwxODc1LDE5MTQsCiAgICAgICAgICAgICAgICAgICAgICAgIDE5NzEsMTk3MiwxOTc0LDIwOTksMjE3MCwyMTk2LDIyMDAsMjI4OCwyMzY2LDIzODIsMjU1NywyODAwLDI5MTAsMjkyMCwyOTY4LDMwMDcsCiAgICAgICAgICAgICAgICAgICAgICAgIDMwMTMsMzA1MCwzMTE5LDMzMDQsMzMwNywzMzc2LDM0MDAsMzQxMCwzNTE0LDM2ODQsMzY5NywzNzAwLDM4MjQsMzg0NiwzODQ4LDM4NTksCiAgICAgICAgICAgICAgICAgICAgICAgIDM4NjMsMzg3MCwzODcyLDM4ODgsMzkwNywzOTE2LDM5MzEsMzk0MSwzOTU3LDM5NjMsMzk2OCwzOTY5LDM5NzIsMzk5MCwzOTkzLDM5OTQsCiAgICAgICAgICAgICAgICAgICAgICAgIDQwMDksNDA0MCw0MDgwLDQwOTYsNDE0Myw0MTQ3LDQyMDAsNDI1Miw0NDMwLDQ1NTUsNDYwMCw0NjU4LDQ4NzUsNDk0OSw1MDQwLDUwNjMsCiAgICAgICAgICAgICAgICAgICAgICAgIDUwNzQsNTE1MSw1MjEyLDUyMjMsNTI0Miw1Mjc5LDUzMzksNTM1Myw1NTAxLDU4MDcsNTgxMiw1ODE4LDU4MjMsNTg2OCw1ODY5LDU4OTksCiAgICAgICAgICAgICAgICAgICAgICAgIDU5MDUsNTkwOSw1OTE0LDU5MTgsNTkzOCw1OTQwLDU5NjgsNTk4MSw2MDUxLDYwNjAsNjA2OCw2MjAzLDYyNDcsNjUwMCw2NTA0LDY1MjAsCiAgICAgICAgICAgICAgICAgICAgICAgIDY1NTAsNjYwMCkKICAgICAgICAgICAgJG51bVBvcnRzLS0KICAgICAgICAgICAgJHBvcnRMaXN0LkFkZFJhbmdlKCR0b3BQb3J0TGlzdFswLi4kbnVtUG9ydHNdKQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gUGFyc2UtUG9ydHMKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbU3RyaW5nXSAkUG9ydHMsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gJHBMaXN0CiAgICAgICAgICAgICkKCiAgICAgICAgICAgIGZvcmVhY2ggKCRwUmFuZ2UgaW4gJFBvcnRzLlNwbGl0KCIsIikpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAjLTEgaXMgYSBzcGVjaWFsIGNhc2UgZm9yIHBpbmcKICAgICAgICAgICAgICAgIGlmICgkcFJhbmdlIC1lcSAiLTEiKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRwTGlzdC5BZGQoW2ludF0kcFJhbmdlKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZWlmICgkcFJhbmdlLkNvbnRhaW5zKCItIikpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgW2ludFtdXSAkcmFuZ2UgPSAkcFJhbmdlLlNwbGl0KCItIikKICAgICAgICAgICAgICAgICAgICBpZiAoJHJhbmdlLkNvdW50IC1uZSAyIC1vciAkcFJhbmdlLlNwbGl0KCItIilbMF0gLWVxICIiIC1vciAkcFJhbmdlLnNwbGl0KCItIilbMV0gLWVxICIiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgcG9ydCByYW5nZSIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRwTGlzdC5BZGRSYW5nZSgkcmFuZ2VbMF0uLiRyYW5nZVsxXSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkcExpc3QuQWRkKFtpbnRdJHBSYW5nZSkKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZm9yZWFjaCAoJHAgaW4gJHBMaXN0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJHAgLWx0IC0xIC1vciAkcCAtZ3QgNjU1MzUpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIlBvcnQgJHAgb3V0IG9mIHJhbmdlIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gUGFyc2UtSXBQb3J0cwogICAgICAgIHsKICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW1N0cmluZ10gJFBvcnRGaWxlCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIEdldC1Db250ZW50ICRQb3J0RmlsZSB8IEZvckVhY2gtT2JqZWN0IHsKICAgICAgICAgICAgICAgIFBhcnNlLVBvcnRzIC1Qb3J0cyAkXyAtcExpc3QgJHBvcnRMaXN0CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFJlbW92ZS1Qb3J0cwogICAgICAgIHsKICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtzdHJpbmddICRFeGNsdWRlZFBvcnRzCiAgICAgICAgICAgICkKCiAgICAgICAgICAgIFtpbnRbXV0gJEV4Y2x1ZGVkUG9ydHMgPSAkRXhjbHVkZWRQb3J0cy5TcGxpdCgiLCIpCgogICAgICAgICAgICBmb3JlYWNoICgkeCBpbiAkRXhjbHVkZWRQb3J0cykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJHBvcnRMaXN0LlJlbW92ZSgkeCkKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gV3JpdGUtUG9ydHNjYW5PdXQKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlclNldE5hbWU9IkNvbW1lbnQiKV0gW3N0cmluZ10gJGNvbW1lbnQsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJTZXROYW1lPSJIb3N0T3V0IildIFtzdHJpbmddICRvdXRob3N0LAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyU2V0TmFtZT0iSG9zdE91dCIpXSBbYm9vbF0gJGlzVXAsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJTZXROYW1lPSJIb3N0T3V0IildICRvcGVuUG9ydHMsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJTZXROYW1lPSJIb3N0T3V0IildICRjbG9zZWRQb3J0cywKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlclNldE5hbWU9Ikhvc3RPdXQiKV0gJGZpbHRlcmVkUG9ydHMsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCldIFtib29sXSAkU2tpcERpc2NvdmVyeSwKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoKV0gW1N5c3RlbS5JTy5TdHJlYW1Xcml0ZXJdICRncmVwU3RyZWFtLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcigpXSBbU3lzdGVtLlhtbC5YbWxXcml0ZXJdICR4bWxTdHJlYW0sCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCldIFtTeXN0ZW0uSU8uU3RyZWFtV3JpdGVyXSAkcmVhZGFibGVTdHJlYW0KCiAgICAgICAgICAgICkKICAgICAgICAgICAgc3dpdGNoICgkUFNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIkNvbW1lbnQiCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgJGNvbW1lbnQKCiAgICAgICAgICAgICAgICAgICAgaWYgKCRncmVwU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRncmVwU3RyZWFtLldyaXRlTGluZSgiIyAiICsgJGNvbW1lbnQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgkeG1sU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVDb21tZW50KCRjb21tZW50KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHJlYWRhYmxlU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS5Xcml0ZUxpbmUoJGNvbW1lbnQpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgIkhvc3RPdXQiCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJG9Qb3J0ID0gW3N0cmluZ106OmpvaW4oIiwiLCAkb3BlblBvcnRzLlRvQXJyYXkoKSkKICAgICAgICAgICAgICAgICAgICAkY1BvcnQgPSBbc3RyaW5nXTo6am9pbigiLCIsICRjbG9zZWRQb3J0cy5Ub0FycmF5KCkpCiAgICAgICAgICAgICAgICAgICAgJGZQb3J0ID0gW3N0cmluZ106OmpvaW4oIiwiLCAkZmlsdGVyZWRQb3J0cy5Ub0FycmF5KCkpCgogICAgICAgICAgICAgICAgICAgIGlmICgkZ3JlcFN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICNmb3IgZ3JlcHN0cmVhbSB1c2UgdGFicyAtIGNhbiBiZSB1Z2x5LCBidXQgZWFzaWVyIGZvciByZWdleAogICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNVcCAtYW5kICEkU2tpcERpc2NvdmVyeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0ud3JpdGVsaW5lKCJIb3N0OiAkb3V0aG9zdGB0U3RhdHVzOiBVcCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpc1VwIC1vciAkU2tpcERpc2NvdmVyeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRvUG9ydCAtbmUgIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ3JlcFN0cmVhbS53cml0ZWxpbmUoIkhvc3Q6ICRvdXRob3N0YHRPcGVuIFBvcnRzOiAkb1BvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRjUG9ydCAtbmUgIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ3JlcFN0cmVhbS53cml0ZWxpbmUoIkhvc3Q6ICRvdXRob3N0YHRDbG9zZWQgUG9ydHM6ICRjUG9ydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGZQb3J0IC1uZSAiIikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRncmVwU3RyZWFtLndyaXRlbGluZSgiSG9zdDogJG91dGhvc3RgdEZpbHRlcmVkIFBvcnRzOiAkZlBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoISRTa2lwRGlzY292ZXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ3JlcFN0cmVhbS53cml0ZWxpbmUoIkhvc3Q6ICRvdXRob3N0YHRTdGF0dXM6IERvd24iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICgkeG1sU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVTdGFydEVsZW1lbnQoIkhvc3QiKQoKICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygiaWQiLCAkb3V0aG9zdCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkU2tpcERpc2NvdmVyeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRpc1VwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygiU3RhdHVzIiwgIlVwIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygiU3RhdHVzIiwgIkRvd25zIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVTdGFydEVsZW1lbnQoIlBvcnRzIikKICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkcCBpbiAkb3BlblBvcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLndyaXRlc3RhcnRFbGVtZW50KCJQb3J0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoImlkIiwgW3N0cmluZ10kcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoInN0YXRlIiwgIm9wZW4iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUVuZEVsZW1lbnQoKQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkcCBpbiAkY2xvc2VkUG9ydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0ud3JpdGVzdGFydEVsZW1lbnQoIlBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygiaWQiLCBbc3RyaW5nXSRwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygic3RhdGUiLCAiY2xvc2VkIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVFbmRFbGVtZW50KCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoICgkcCBpbiAkZmlsdGVyZWRQb3J0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS53cml0ZXN0YXJ0RWxlbWVudCgiUG9ydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQXR0cmlidXRlU3RyaW5nKCJpZCIsIFtzdHJpbmddJHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQXR0cmlidXRlU3RyaW5nKCJzdGF0ZSIsICJmaWx0ZXJlZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlRW5kRWxlbWVudCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVFbmRFbGVtZW50KCkKICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUVuZEVsZW1lbnQoKQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHJlYWRhYmxlU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoIlBvcnNjYW4ucHMxIHNjYW4gcmVwb3J0IGZvciAkb3V0aG9zdCIpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNVcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtLndyaXRlbGluZSgiSG9zdCBpcyB1cCIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNVcCAtb3IgJFNraXBEaXNjb3ZlcnkpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCgiezAsLTEwfXsxLDB9IiAtZiAiUE9SVCIsICJTVEFURSIpKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpbnRbXV0kYWxscG9ydHMgPSAkb3BlblBvcnRzICsgJGNsb3NlZFBvcnRzICsgJGZpbHRlcmVkUG9ydHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHAgaW4gKCRhbGxwb3J0c3wgU29ydC1PYmplY3QpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkb3BlblBvcnRzLkNvbnRhaW5zKCRwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCgiezAsLTEwfXsxLDB9IiAtZiAkcCwgIm9wZW4iKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZWlmICgkY2xvc2VkUG9ydHMuQ29udGFpbnMoJHApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoKCJ7MCwtMTB9ezEsMH0iIC1mICRwLCAiY2xvc2VkIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJGZpbHRlcmVkUG9ydHMuQ29udGFpbnMoJHApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoKCJ7MCwtMTB9ezEsMH0iIC1mICRwLCAiZmlsdGVyZWQiKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZighJFNraXBEaXNjb3ZlcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoIkhvc3QgaXMgRG93biIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtLndyaXRlbGluZSgiIikKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgICNmdW5jdGlvbiBmb3IgUG93ZXJzaGVsbCB2Mi4wIHRvIHdvcmsKICAgICAgICBmdW5jdGlvbiBDb252ZXJ0LVN3aXRjaHRvQm9vbAogICAgICAgIHsKICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldICRzd2l0Y2hWYWx1ZQogICAgICAgICAgICApCiAgICAgICAgICAgIElmICgkc3dpdGNoVmFsdWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiAkVHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAkRmFsc2UKICAgICAgICB9CgogICAgICAgIHRyeQogICAgICAgIHsKCiAgICAgICAgICAgIFtib29sXSAkU2tpcERpc2NvdmVyeSA9IENvbnZlcnQtU3dpdGNodG9Cb29sICgkU2tpcERpc2NvdmVyeSkKICAgICAgICAgICAgW2Jvb2xdICRQaW5nT25seSA9IENvbnZlcnQtU3dpdGNodG9Cb29sICgkUGluZ09ubHkpCiAgICAgICAgICAgIFtib29sXSAkcXVpZXQgID0gQ29udmVydC1Td2l0Y2h0b0Jvb2wgKCRxdWlldCkKICAgICAgICAgICAgW2Jvb2xdICRGb3JjZU92ZXJ3cml0ZSAgPSBDb252ZXJ0LVN3aXRjaHRvQm9vbCAoJEZvcmNlT3ZlcndyaXRlKQoKICAgICAgICAgICAgIyMjIyMjIyMjCiAgICAgICAgICAgICNwYXJzZSBhcmd1bWVudHMKICAgICAgICAgICAgIyMjIyMjIyMjCgogICAgICAgICAgICBbRW52aXJvbm1lbnRdOjpDdXJyZW50RGlyZWN0b3J5PShHZXQtTG9jYXRpb24gLVBTUHJvdmlkZXIgRmlsZVN5c3RlbSkuUHJvdmlkZXJQYXRoCgogICAgICAgICAgICBpZiAoJFBzQ21kbGV0LlBhcmFtZXRlclNldE5hbWUgLWVxICJjbWRIb3N0cyIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGZvcmVhY2goJGggaW4gJEhvc3RzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFBhcnNlLUhvc3RzKCRoKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBQYXJzZS1JTEhvc3RzKCRIb3N0RmlsZSkgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRFeGNsdWRlSG9zdHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIEV4Y2x1ZGUtSG9zdHMoJEV4Y2x1ZGVIb3N0cykKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoKCRUb3BQb3J0cyAtYW5kICRQb3J0cykgLW9yICgkVG9wUG9ydHMgLWFuZCAkUG9ydEZpbGUpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICB0aHJvdyAiQ2Fubm90IHNldCB0b3BQb3J0cyB3aXRoIG90aGVyIHNwZWNpZmljIHBvcnRzIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRQb3J0cykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUGFyc2UtUG9ydHMgLVBvcnRzICRQb3J0cyAtcExpc3QgJHBvcnRMaXN0IHwgT3V0LU51bGwKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkUG9ydEZpbGUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBhcnNlLUlwUG9ydHMoJFBvcnRGaWxlKSB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJHBvcnRMaXN0LkNvdW50IC1lcSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJFRvcFBvcnRzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIEdldC1Ub3BQb3J0KCRUb3BQb3J0cykgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICNpZiB0aGUgcG9ydHMgc3RpbGwgYXJlbid0IHNldCwgZ2l2ZSB0aGUgZGVmdGF1bHQsIHRvcCA1MCBwb3J0cwogICAgICAgICAgICAgICAgICAgIEdldC1Ub3BQb3J0KDUwKSB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCRFeGNsdWRlZFBvcnRzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBSZW1vdmUtUG9ydHMgLUV4Y2x1ZGVkUG9ydHMgJEV4Y2x1ZGVkUG9ydHMgfCBPdXQtTnVsbAogICAgICAgICAgICB9CgogICAgICAgICAgICBpZigkVCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgc3dpdGNoICgkVCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICA1IHskbkhvc3RzPTMwOyAgJFRocmVhZHMgPSAxMDAwOyAkVGltZW91dCA9IDc1MCB9CiAgICAgICAgICAgICAgICAgICAgNCB7JG5Ib3N0cz0yNTsgICRUaHJlYWRzID0gMTAwMDsgJFRpbWVvdXQgPSAxMjAwIH0KICAgICAgICAgICAgICAgICAgICAzIHskbkhvc3RzPTIwOyAgJFRocmVhZHMgPSAxMDA7ICAkVGltZW91dCA9IDI1MDAgfQogICAgICAgICAgICAgICAgICAgIDIgeyRuSG9zdHM9MTU7ICAkVGhyZWFkcyA9IDMyOyAgICRUaW1lb3V0ID0gMzAwMCB9CiAgICAgICAgICAgICAgICAgICAgMSB7JG5Ib3N0cz0xMDsgICRUaHJlYWRzID0gMzI7ICAgJFRpbWVvdXQgPSA1MDAwIH0KICAgICAgICAgICAgICAgICAgICBkZWZhdWx0IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkludmFsaWQgVCBwYXJhbWV0ZXIiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAkZ3JlcFN0cmVhbSA9ICRudWxsCiAgICAgICAgICAgICR4bWxTdHJlYW0gPSAkbnVsbAogICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0gPSAkbnVsbAoKICAgICAgICAgICAgaWYoJEFsbGZvcm1hdHNPdXQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkR3JlcE91dCAtb3IgJFhtbE91dCAtb3IgJFJlYWRhYmxlT3V0KSB7CiAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkJvdGggLW9BIHNwZWNpZmllZCB3aXRoIG90aGVyIG91dHB1dC4uLiBnb2luZyB0byBpZ25vcmUgLW9HLy1vTi8tb1giCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkR3JlcE91dCA9ICRBbGxmb3JtYXRzT3V0ICsgIi5nbm1hcCIKICAgICAgICAgICAgICAgICRYbWxPdXQgPSAkQWxsZm9ybWF0c091dCArICIueG1sIgogICAgICAgICAgICAgICAgJFJlYWRhYmxlT3V0ID0gJEFsbGZvcm1hdHNPdXQgKyAiLm5tYXAiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCRHcmVwT3V0KSB7CiAgICAgICAgICAgICAgICBpZiAoISRGb3JjZU92ZXJ3cml0ZSAtYW5kIChUZXN0LVBhdGggJEdyZXBPdXQpKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgIkVycm9yOiAkQWxsZm9ybWF0c091dCBhbHJlYWR5IGV4aXN0cy4gRWl0aGVyIGRlbGV0ZSB0aGUgZmlsZSBvciBzcGVjaWZ5IHRoZSAtZiBmbGFnIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0gPSBbU3lzdGVtLklPLlN0cmVhbVdyaXRlcl0gJEdyZXBPdXQKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJFJlYWRhYmxlT3V0KSB7CiAgICAgICAgICAgICAgICBpZiAoISRGb3JjZU92ZXJ3cml0ZSAtYW5kIChUZXN0LVBhdGggJFJlYWRhYmxlT3V0KSkgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJFcnJvcjogJFJlYWRhYmxlT3V0IGFscmVhZHkgZXhpc3RzLiBFaXRoZXIgZGVsZXRlIHRoZSBmaWxlIG9yIHNwZWNpZnkgdGhlIC1mIGZsYWciCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0gPSBbU3lzdGVtLklPLlN0cmVhbVdyaXRlcl0gJFJlYWRhYmxlT3V0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCRYbWxPdXQpIHsKICAgICAgICAgICAgICAgIGlmICghJEZvcmNlT3ZlcndyaXRlIC1hbmQgKFRlc3QtUGF0aCAkWG1sT3V0KSkgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJFcnJvcjogJFhtbE91dCBhbHJlYWR5IGV4aXN0cy4gRWl0aGVyIGRlbGV0ZSB0aGUgZmlsZSBvciBzcGVjaWZ5IHRoZSAtZiBmbGFnIgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICR4bWxTdHJlYW0gPSAgIFtTeXN0ZW0ueG1sLnhtbHdyaXRlcl06OkNyZWF0ZShbc3RyaW5nXSRYbWxPdXQpCiAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlU3RhcnREb2N1bWVudCgpCiAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlU3RhcnRFbGVtZW50KCJQb3J0c2NhbnJ1biIpCiAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQXR0cmlidXRlU3RyaW5nKCJ2ZXJzaW9uIiwgJHZlcnNpb24pCgogICAgICAgICAgICB9CgogICAgICAgICAgICBQYXJzZS1Qb3J0cyAtUG9ydHMgJERpc2NvdmVyeVBvcnRzIC1wTGlzdCAkaG9zdFBvcnRMaXN0IHwgT3V0LU51bGwKCiAgICAgICAgICAgICRzdGFydGRhdGUgPSBHZXQtRGF0ZQogICAgICAgICAgICAkbXlJbnZvY2F0aW9uTGluZSA9ICRQU0NtZGxldC5NeUludm9jYXRpb24uTGluZQogICAgICAgICAgICAkc3RhcnRNc2cgPSAiSW52b2tlLVBvcnRzY2FuLnBzMSB2JHZlcnNpb24gc2NhbiBpbml0aWF0ZWQgJHN0YXJ0ZGF0ZSBhczogJG15SW52b2NhdGlvbkxpbmUiCgogICAgICAgICAgICAjVE9ETyBkZWFsIHdpdGggb3V0cHV0CiAgICAgICAgICAgIFdyaXRlLVBvcnRzY2FuT3V0IC1jb21tZW50ICRzdGFydE1zZyAtZ3JlcFN0cmVhbSAkZ3JlcFN0cmVhbSAteG1sU3RyZWFtICR4bWxTdHJlYW0gLXJlYWRhYmxlU3RyZWFtICRyZWFkYWJsZVN0cmVhbQoKICAgICAgICAgICAgI2NvbnZlcnRpbmcgYmFjayBmcm9tIGludCBhcnJheSBnaXZlcyBzb21lIGFyZ3VtZW50IGVycm9yIGNoZWNraW5nCiAgICAgICAgICAgICRzUG9ydExpc3QgPSBbc3RyaW5nXTo6am9pbigiLCIsICRwb3J0TGlzdCkKICAgICAgICAgICAgJHNIb3N0UG9ydExpc3QgPSBbc3RyaW5nXTo6am9pbigiLCIsICRob3N0UG9ydExpc3QpCgogICAgICAgICAgICAjIyMjIyMjIwogICAgICAgICAgICAjUG9ydCBTY2FuIENvZGUgLSBydW4gb24gYSBwZXIgaG9zdCBiYXNpcwogICAgICAgICAgICAjIyMjIyMjIwogICAgICAgICAgICAkcG9ydFNjYW5Db2RlID0gewogICAgICAgICAgICAgICAgcGFyYW0gKAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV0gW3N0cmluZ10gJHRob3N0LAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV1bYm9vbF0gJFNraXBEaXNjb3ZlcnksCiAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlciggTWFuZGF0b3J5ID0gJFRydWUpXVtib29sXSAkUGluZ09ubHksCiAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlciggTWFuZGF0b3J5ID0gJFRydWUpXVtpbnRdICRUaW1lb3V0LAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV0gJFBvcnRMaXN0LAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV0gJGhvc3RQb3J0TGlzdCwKICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSldW2ludF0gJG1heHRocmVhZHMpCiAgICAgICAgICAgICAgICBQcm9jZXNzCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkb3BlblBvcnRzID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAgICAgICAgICAgICAkY2xvc2VkUG9ydHMgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICAgICAgICAgICAgICRmaWx0ZXJlZFBvcnRzID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CgogICAgICAgICAgICAgICAgJHNvY2tldHMgPSBAe30KICAgICAgICAgICAgICAgICR0aW1lb3V0cyA9IE5ldy1PYmplY3QgSGFzaHRhYmxlCgogICAgICAgICAgICAgICAgI3NldCBtYXhpbXVtICRhc3luYyB0aHJlYWRzCiAgICAgICAgICAgICAgICAkZlRocmVhZHMgPSBOZXctT2JqZWN0IGludAogICAgICAgICAgICAgICAgJGFUaHJlYWRzID0gTmV3LU9iamVjdCBpbnQKICAgICAgICAgICAgICAgIFtTeXN0ZW0uVGhyZWFkaW5nLlRocmVhZFBvb2xdOjpHZXRNYXhUaHJlYWRzKFtyZWZdJGZUaHJlYWRzLCBbcmVmXSRhVGhyZWFkcykgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgW1N5c3RlbS5UaHJlYWRpbmcuVGhyZWFkUG9vbF06OlNldE1heFRocmVhZHMoJGZ0aHJlYWRzLCRtYXh0aHJlYWRzKSB8IE91dC1OdWxsCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTmV3LVNjcmlwdEJsb2NrQ2FsbGJhY2sgewogICAgICAgICAgICAgICAgICAgIHBhcmFtKAogICAgICAgICAgICAgICAgICAgICAgICBbcGFyYW1ldGVyKE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgICAgICAgICAgICAgIFtWYWxpZGF0ZU5vdE51bGxPckVtcHR5KCldCiAgICAgICAgICAgICAgICAgICAgICAgIFtzY3JpcHRibG9ja10kQ2FsbGJhY2sKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgICN0YWtlbiBmcm9tIGh0dHA6Ly93d3cubml2b3Qub3JnL2Jsb2cvcG9zdC8yMDA5LzEwLzA5L1Bvd2VyU2hlbGwyMEFzeW5jaHJvbm91c0NhbGxiYWNrc0Zyb21ORVQKICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAoIkNhbGxiYWNrRXZlbnRCcmlkZ2UiIC1hcyBbdHlwZV0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIEFkZC1UeXBlIEAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2luZyBTeXN0ZW07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIHNlYWxlZCBjbGFzcyBDYWxsYmFja0V2ZW50QnJpZGdlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVibGljIGV2ZW50IEFzeW5jQ2FsbGJhY2sgQ2FsbGJhY2tDb21wbGV0ZSA9IGRlbGVnYXRlIHsgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSBDYWxsYmFja0V2ZW50QnJpZGdlKCkge30KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpdmF0ZSB2b2lkIENhbGxiYWNrSW50ZXJuYWwoSUFzeW5jUmVzdWx0IHJlc3VsdCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhbGxiYWNrQ29tcGxldGUocmVzdWx0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBBc3luY0NhbGxiYWNrIENhbGxiYWNrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgeyByZXR1cm4gbmV3IEFzeW5jQ2FsbGJhY2soQ2FsbGJhY2tJbnRlcm5hbCk7IH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBzdGF0aWMgQ2FsbGJhY2tFdmVudEJyaWRnZSBDcmVhdGUoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja0V2ZW50QnJpZGdlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoiQAogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJGJyaWRnZSA9IFtDYWxsYmFja0V2ZW50QnJpZGdlXTo6Q3JlYXRlKCkKICAgICAgICAgICAgICAgICAgICBSZWdpc3Rlci1PYmplY3RFdmVudCAtSW5wdXRPYmplY3QgJGJyaWRnZSAtRXZlbnROYW1lIENhbGxiYWNrQ29tcGxldGUgLUFjdGlvbiAkQ2FsbGJhY2sgfCBPdXQtTnVsbAoKICAgICAgICAgICAgICAgICAgICAkYnJpZGdlLkNhbGxiYWNrCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFRlc3QtUG9ydCB7CgogICAgICAgICAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRoLAogICAgICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW2ludF0gJHAsCiAgICAgICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbaW50XSAkdGltZW91dAogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgJHBBZGRyZXNzID0gW1N5c3RlbS5OZXQuSVBBZGRyZXNzXTo6UGFyc2UoJGgpCiAgICAgICAgICAgICAgICAgICAgICAgICRzb2NrZXRzWyRwXSA9IG5ldy1vYmplY3QgU3lzdGVtLk5ldC5Tb2NrZXRzLlRjcENsaWVudCAkcEFkZHJlc3MuQWRkcmVzc0ZhbWlseQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggewogICAgICAgICAgICAgICAgICAgICAgICAjd2UncmUgYXNzdW1pbmcgdGhpcyBpcyBhIGhvc3QgbmFtZQogICAgICAgICAgICAgICAgICAgICAgICAkc29ja2V0c1skcF0gPSBuZXctb2JqZWN0IFN5c3RlbS5OZXQuU29ja2V0cy5UY3BDbGllbnQKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICRzY3JpcHRCbG9ja0FzU3RyaW5nID0gQCIKCiAgICAgICAgICAgICAgICAgICAgICAgICNzb21ld2hhdCBvZiBhIHJhY2UgY29uZGl0aW9uIHdpdGggdGhlIHRpbWVvdXQsIGJ1dCBJIGRvbid0IHRoaW5rIGl0IG1hdHRlcnMKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBgJHNvY2tldHNbJHBdIC1uZSBgJE5VTEwpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYCR0aW1lb3V0c1skcF0uRGlzcG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHRpbWVvdXRzWyRwXS5EaXNwb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHN0YXR1cyA9IGAkc29ja2V0c1skcF0uQ29ubmVjdGVkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGAkc3RhdHVzIC1lcSBgJFRydWUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgI3dyaXRlLWhvc3QgIiRwIGlzIG9wZW4iCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCRvcGVuUG9ydHMuQWRkKCRwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICN3cml0ZS1ob3N0ICIkcCBpcyBjbG9zZWQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCRjbG9zZWRQb3J0cy5BZGQoJHApCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYCRzb2NrZXRzWyRwXS5DbG9zZSgpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkc29ja2V0cy5SZW1vdmUoJHApCiAgICAgICAgICAgICAgICAgICAgICAgIH0KIkAKICAgICAgICAgICAgICAgICAgICAkdGltZW91dENhbGxiYWNrID0gQCIKICAgICAgICAgICAgICAgICAgICAgICAgI3dyaXRlLWhvc3QgIiRwIGlzIGZpbHRlcmVkIgogICAgICAgICAgICAgICAgICAgICAgICBgJHNvY2tldHNbJHBdLkNsb3NlKCkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFgJHRpbWVvdXRzWyRwXS5EaXNwb3NlZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR0aW1lb3V0c1skcF0uRGlzcG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJGZpbHRlcmVkUG9ydHMuQWRkKCRwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGAkc29ja2V0cy5SZW1vdmUoJHApCiJACgogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0Q2FsbGJhY2sgPSBbc2NyaXB0YmxvY2tdOjpDcmVhdGUoJHRpbWVvdXRDYWxsYmFjaykKCiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXRzWyRwXSA9IE5ldy1PYmplY3QgU3lzdGVtLlRpbWVycy5UaW1lcgogICAgICAgICAgICAgICAgICAgIFJlZ2lzdGVyLU9iamVjdEV2ZW50IC1JbnB1dE9iamVjdCAkdGltZW91dHNbJHBdIC1FdmVudE5hbWUgRWxhcHNlZCAtQWN0aW9uICR0aW1lb3V0Q2FsbGJhY2sgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0c1skcF0uSW50ZXJ2YWwgPSAkdGltZW91dAogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0c1skcF0uRW5hYmxlZCA9ICR0cnVlCgogICAgICAgICAgICAgICAgICAgICRteXNjcmlwdGJsb2NrID0gW3NjcmlwdGJsb2NrXTo6Q3JlYXRlKCRzY3JpcHRCbG9ja0FzU3RyaW5nKQogICAgICAgICAgICAgICAgICAgICR4ID0gJHNvY2tldHNbJHBdLmJlZ2luQ29ubmVjdCgkaCwgJHAsKE5ldy1TY3JpcHRCbG9ja0NhbGxiYWNrKCRteXNjcmlwdGJsb2NrKSkgLCAkbnVsbCkKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gUG9ydFNjYW4tQWxpdmUKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbU3RyaW5nXSAkaAogICAgICAgICAgICAgICAgICAgICkKCiAgICAgICAgICAgICAgICAgICAgVHJ5CiAgICAgICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAgICAgI3BpbmcKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRob3N0UG9ydExpc3QuQ29udGFpbnMoLTEpKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcGluZyA9IG5ldy1vYmplY3QgU3lzdGVtLk5ldC5OZXR3b3JrSW5mb3JtYXRpb24uUGluZwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBSZXN1bHQgPSAkcGluZy5zZW5kKCRoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRwUmVzdWx0LlN0YXR1cyAtZXEgIlN1Y2Nlc3MiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkVHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJFBvcnQgaW4gJGhvc3RQb3J0TGlzdCkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRQb3J0IC1uZSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUZXN0LVBvcnQgLWggJGggLXAgJFBvcnQgLXRpbWVvdXQgJFRpbWVvdXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgZG8gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpIDEwMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgkb3BlblBvcnRzLkNvdW50IC1ndCAwKSAtb3IgKCRjbG9zZWRQb3J0cy5Db3VudCAtZ3QgMCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBXaGlsZSAoJHNvY2tldHMuQ291bnQgLWd0IDApCgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBDYXRjaAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkV4Y2VwdGlvbiB0cnlpbmcgdG8gaG9zdCBzY2FuICRoIgogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAkXy5FeGNlcHRpb24uTWVzc2FnZTsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHJldHVybiAkRmFsc2UKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBQb3J0c2Nhbi1Qb3J0CiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW1N0cmluZ10gJGgKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgIFtzdHJpbmdbXV0kUG9ydHMgPSBAKCkKCiAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCgkUG9ydCBpbiAkUG9ydGxpc3QpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBUcnkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgVGVzdC1Qb3J0IC1oICRoIC1wICRQb3J0IC10aW1lb3V0ICRUaW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgQ2F0Y2gKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkV4Y2VwdGlvbiB0cnlpbmcgdG8gc2NhbiAkaCBwb3J0ICRQb3J0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgJF8uRXhjZXB0aW9uLk1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBbYm9vbF0gJGhvc3RSZXN1bHQgPSAkRmFsc2UKCiAgICAgICAgICAgICAgICBpZighJFNraXBEaXNjb3ZlcnkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgW2Jvb2xdICRob3N0UmVzdWx0ID0gUG9ydFNjYW4tQWxpdmUgJHRob3N0CiAgICAgICAgICAgICAgICAgICAgJG9wZW5Qb3J0cy5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgJGNsb3NlZFBvcnRzLmNsZWFyKCkKICAgICAgICAgICAgICAgICAgICAkZmlsdGVyZWRQb3J0cy5DbGVhcigpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZigoISRQaW5nT25seSkgLWFuZCAoJGhvc3RSZXN1bHQgLW9yICRTa2lwRGlzY292ZXJ5KSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBQb3J0c2Nhbi1Qb3J0ICR0aG9zdAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgd2hpbGUgKCRzb2NrZXRzLkNvdW50IC1ndCAwKSB7CiAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpIDUwMAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBAKCRob3N0UmVzdWx0LCAkb3BlblBvcnRzLCAkY2xvc2VkUG9ydHMsICRmaWx0ZXJlZFBvcnRzKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICAjIHRoZSBvdXRlciBsb29wIGlzIHRvIGZsdXNoIHRoZSBsb29wLgogICAgICAgICAgICAjIE90aGVyd2lzZSBHZXQtSm9iIHwgV2FpdC1Kb2IgY291bGQgY2xvZywgZXRjCgogICAgICAgICAgICBbaW50XSRzYXZlSXRlcmF0aW9uID0gMAogICAgICAgICAgICBbaW50XSRjb21wdXRlcnNEb25lPTAKICAgICAgICAgICAgW2ludF0kdXBIb3N0cz0wCiAgICAgICAgICAgIHdoaWxlICgoJHNhdmVJdGVyYXRpb24gKiAkU3luY0ZyZXEpIC1sdCAkaG9zdExpc3QuQ291bnQpCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICBHZXQtSm9iIHwgUmVtb3ZlLUpvYiAtRm9yY2UKICAgICAgICAgICAgICAgICRzSW5kZXggPSAoJHNhdmVJdGVyYXRpb24qJFN5bmNGcmVxKQogICAgICAgICAgICAgICAgJGVJbmRleCA9ICgoJHNhdmVJdGVyYXRpb24rMSkqJFN5bmNGcmVxKS0xCgogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGlIb3N0IGluICRob3N0TGlzdFskc0luZGV4Li4kZUluZGV4XSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkY3RyID0gQChHZXQtSm9iIC1zdGF0ZSBSdW5uaW5nKQogICAgICAgICAgICAgICAgICAgIHdoaWxlICgkY3RyLkNvdW50IC1nZSAkbkhvc3RzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhcnQtU2xlZXAgLU1pbGxpc2Vjb25kcyAkU2xlZXBUaW1lcgogICAgICAgICAgICAgICAgICAgICAgICAkY3RyID0gQChHZXQtSm9iIC1zdGF0ZSBSdW5uaW5nKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgJGNvbXB1dGVyc0RvbmUrKwogICAgICAgICAgICAgICAgICAgIGlmKCEkbm9Qcm9ncmVzc01ldGVyKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtUHJvZ3Jlc3MgLXN0YXR1cyAiUG9ydCBTY2FubmluZyIgLUFjdGl2aXR5ICRzdGFydE1zZyAtQ3VycmVudE9wZXJhdGlvbiAic3RhcnRpbmcgY29tcHV0ZXIgJGNvbXB1dGVyc0RvbmUiICAtUGVyY2VudENvbXBsZXRlICgkY29tcHV0ZXJzRG9uZSAvICRob3N0TGlzdC5Db3VudCAqIDEwMCkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIFN0YXJ0LUpvYiAtU2NyaXB0QmxvY2sgJHBvcnRTY2FuQ29kZSAtTmFtZSAkaUhvc3QgLUFyZ3VtZW50TGlzdCBAKCRpSG9zdCwgJFNraXBEaXNjb3ZlcnksICRQaW5nT25seSwgJFRpbWVvdXQsICRwb3J0TGlzdCwgJGhvc3RQb3J0TGlzdCwgJFRocmVhZHMpICB8IE91dC1OdWxsCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgR2V0LUpvYiB8IFdhaXQtSm9iIHwgT3V0LU51bGwKCiAgICAgICAgICAgICAgICBmb3JlYWNoICgkam9iIGluIEdldC1Kb2IpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGpvYk91dCA9IEAoUmVjZWl2ZS1Kb2IgJGpvYikKICAgICAgICAgICAgICAgICAgICBbYm9vbF0kaG9zdFVwID0gJGpvYk91dFswXQogICAgICAgICAgICAgICAgICAgICRqb2JOYW1lID0gJGpvYi5OYW1lCgogICAgICAgICAgICAgICAgICAgICRvcGVuUG9ydHMgPSAkam9iT3V0WzFdCiAgICAgICAgICAgICAgICAgICAgJGNsb3NlZFBvcnRzID0gJGpvYk91dFsyXQogICAgICAgICAgICAgICAgICAgICRmaWx0ZXJlZFBvcnRzID0gJGpvYk91dFszXQoKICAgICAgICAgICAgICAgICAgICBpZigkaG9zdFVwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICR1cEhvc3RzICsrCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBpZiAoISRxdWlldCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0RGF0ZSA9IEdldC1EYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlcHJvcGVydHkgLU5hbWUgSG9zdG5hbWUgLVZhbHVlICRqb2JOYW1lCgogICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGFsaXZlIC1WYWx1ZSAkaG9zdFVwCiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlcHJvcGVydHkgLU5hbWUgb3BlblBvcnRzIC1WYWx1ZSAkb3BlblBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlcHJvcGVydHkgLU5hbWUgY2xvc2VkUG9ydHMgLVZhbHVlICRjbG9zZWRQb3J0cwogICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGZpbHRlcmVkUG9ydHMgLVZhbHVlICRmaWx0ZXJlZFBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgZmluaXNoVGltZSAtVmFsdWUgJGhvc3REYXRlCgogICAgICAgICAgICAgICAgICAgICAgICAkc2Nhbm5lZEhvc3RMaXN0ICs9ICRob3N0b2JqCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Qb3J0c2Nhbk91dCAtb3V0aG9zdCAkam9iTmFtZSAtaXNVcCAkaG9zdFVwIC1vcGVuUG9ydHMgJG9wZW5Qb3J0cyAtY2xvc2VkUG9ydHMgJGNsb3NlZFBvcnRzIC1maWx0ZXJlZFBvcnRzICRmaWx0ZXJlZFBvcnRzIC1ncmVwU3RyZWFtICRncmVwU3RyZWFtIC14bWxTdHJlYW0gJHhtbFN0cmVhbSAtcmVhZGFibGVTdHJlYW0gJHJlYWRhYmxlU3RyZWFtIC1Ta2lwRGlzY292ZXJ5ICRTa2lwRGlzY292ZXJ5CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCRncmVwU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0uZmx1c2goKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCR4bWxTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLmZsdXNoKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCRyZWFkYWJsZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS5mbHVzaCgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHNhdmVJdGVyYXRpb24gKysKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGVuZGRhdGUgPSBHZXQtRGF0ZQogICAgICAgICAgICAkdG90YWx0aW1lID0gKCRlbmRkYXRlIC0gJHN0YXJ0ZGF0ZSkuVG90YWxTZWNvbmRzCiAgICAgICAgICAgICRlbmRNc2cgPSAiUG9ydCBzY2FuIGNvbXBsZXRlIGF0ICRlbmRkYXRlICgkdG90YWx0aW1lIHNlY29uZHMpIgogICAgICAgICAgICBpZiAoISRTa2lwRGlzY292ZXJ5KSB7CiAgICAgICAgICAgICAgICAkZW5kTXNnICs9ICIsICR1cEhvc3RzIGhvc3RzIGFyZSB1cCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtUG9ydHNjYW5PdXQgLWNvbW1lbnQgJGVuZE1zZyAtZ3JlcFN0cmVhbSAkZ3JlcFN0cmVhbSAteG1sU3RyZWFtICR4bWxTdHJlYW0gLXJlYWRhYmxlU3RyZWFtICRyZWFkYWJsZVN0cmVhbQoKICAgICAgICAgICAgaWYoJGdyZXBTdHJlYW0pIHsKICAgICAgICAgICAgICAgICRncmVwU3RyZWFtLkNsb3NlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJHhtbFN0cmVhbSkgewogICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5DbG9zZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJHJlYWRhYmxlU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0uQ2xvc2UoKQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gJHNjYW5uZWRIb3N0TGlzdAoKICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICRfLkV4Y2VwdGlvbi5NZXNzYWdlOwogICAgICAgIH0KICAgIH0KfQo=
