Invoke-TokenManipulation.ps1,175e32469a34f337ca7c0bd9c41f72c0,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uCnsKPCMKLlNZTk9QU0lTCgpUaGlzIHNjcmlwdCByZXF1aXJlcyBBZG1pbmlzdHJhdG9yIHByaXZpbGVnZXMuIEl0IGNhbiBlbnVtZXJhdGUgdGhlIExvZ29uIFRva2VucyBhdmFpbGFibGUgYW5kIHVzZSB0aGVtIHRvIGNyZWF0ZSBuZXcgcHJvY2Vzc2VzLiBUaGlzIGFsbG93cyB5b3UgdG8gdXNlCmFub3RoZXJzIHVzZXJzIGNyZWRlbnRpYWxzIG92ZXIgdGhlIG5ldHdvcmsgYnkgY3JlYXRpbmcgYSBwcm9jZXNzIHdpdGggdGhlaXIgbG9nb24gdG9rZW4uIFRoaXMgd2lsbCB3b3JrIGV2ZW4gd2l0aCBXaW5kb3dzIDguMSBMU0FTUyBwcm90ZWN0aW9ucy4KVGhpcyBmdW5jdGlvbmFsaXR5IGlzIHZlcnkgc2ltaWxhciB0byB0aGUgaW5jb2duaXRvIHRvb2wgKHdpdGggc29tZSBkaWZmZXJlbmNlcywgYW5kIGRpZmZlcmVudCB1c2UgZ29hbHMpLgoKVGhpcyBzY3JpcHQgY2FuIGFsc28gbWFrZSB0aGUgUG93ZXJTaGVsbCB0aHJlYWQgaW1wZXJzb25hdGUgYW5vdGhlciB1c2VycyBMb2dvbiBUb2tlbi4gVW5mb3J0dW5hdGVseSB0aGlzIGRvZXNuJ3Qgd29yayB3ZWxsLCBiZWNhdXNlIFBvd2VyU2hlbGwKY3JlYXRlcyBuZXcgdGhyZWFkcyB0byBkbyB0aGluZ3MsIGFuZCB0aG9zZSB0aHJlYWRzIHdpbGwgdXNlIHRoZSBQcmltYXJ5IHRva2VuIG9mIHRoZSBQb3dlclNoZWxsIHByb2Nlc3MgKHlvdXIgb3JpZ2luYWwgdG9rZW4pIGFuZCBub3QgdGhlIHRva2VuCnRoYXQgb25lIHRocmVhZCBpcyBpbXBlcnNvbmF0aW5nLiBCZWNhdXNlIG9mIHRoaXMsIHlvdSBjYW5ub3QgdXNlIHRocmVhZCBpbXBlcnNvbmF0aW9uIHRvIGltcGVyc29uYXRlIGEgdXNlciBhbmQgdGhlbiB1c2UgUG93ZXJTaGVsbCByZW1vdGluZyB0byBjb25uZWN0CnRvIGFub3RoZXIgc2VydmVyIGFzIHRoYXQgdXNlciAoaXQgd2lsbCBhdXRoZW50aWNhdGUgdXNpbmcgdGhlIHByaW1hcnkgdG9rZW4gb2YgdGhlIHByb2Nlc3MsIHdoaWNoIGlzIHlvdXIgb3JpZ2luYWwgbG9nb24gdG9rZW4pLgoKQmVjYXVzZSBvZiB0aGlzIGxpbWl0YXRpb24sIHRoZSByZWNvbW1lbmRlZCB3YXkgdG8gdXNlIHRoaXMgc2NyaXB0IGlzIHRvIHVzZSBDcmVhdGVQcm9jZXNzIHRvIGNyZWF0ZSBhIG5ldyBQb3dlclNoZWxsIHByb2Nlc3Mgd2l0aCBhbm90aGVyIHVzZXJzIExvZ29uIApUb2tlbiwgYW5kIHRoZW4gdXNlIHRoaXMgcHJvY2VzcyB0byBwaXZvdC4gVGhpcyB3b3JrcyBiZWNhdXNlIHRoZSBlbnRpcmUgcHJvY2VzcyBpcyBjcmVhdGVkIHVzaW5nIHRoZSBvdGhlciB1c2VycyBMb2dvbiBUb2tlbiwgc28gaXQgd2lsbCB1c2UgdGhlaXIKY3JlZGVudGlhbHMgZm9yIHRoZSBhdXRoZW50aWNhdGlvbi4KCklNUE9SVEFOVDogSWYgeW91IGFyZSBjcmVhdGluZyBhIHByb2Nlc3MsIGJ5IGRlZmF1bHQgdGhpcyBzY3JpcHQgd2lsbCBtb2RpZnkgdGhlIEFDTCBvZiB0aGUgY3VycmVudCB1c2VycyBkZXNrdG9wIHRvIGFsbG93IGZ1bGwgY29udHJvbCB0byAiRXZlcnlvbmUiLiAKVGhpcyBpcyBkb25lIHNvIHRoYXQgdGhlIFVJIG9mIHRoZSBwcm9jZXNzIGlzIHNob3duLiBJZiB5b3UgZG8gbm90IG5lZWQgdGhlIFVJLCB1c2UgdGhlIC1Ob1VJIGZsYWcgdG8gcHJldmVudCB0aGUgQUNMIGZyb20gYmVpbmcgbW9kaWZpZWQuIFRoaXMgQUNMCmlzIG5vdCBwZXJtZW5hbnQsIGFzIGluLCB3aGVuIHRoZSBjdXJyZW50IGxvZ3Mgb2ZmIHRoZSBBQ0wgaXMgY2xlYXJlZC4gSXQgaXMgc3RpbGwgcHJlZmVycmFibGUgdG8gbm90IG1vZGlmeSB0aGluZ3MgdW5sZXNzIHRoZXkgbmVlZCB0byBiZSBtb2RpZmllZCB0aG91Z2gsCnNvIEkgY3JlYXRlZCB0aGUgTm9VSSBmbGFnLiBBTFNPOiBXaGVuIGNyZWF0aW5nIGEgcHJvY2VzcywgdGhlIHNjcmlwdCB3aWxsIHJlcXVlc3QgU2VTZWN1cml0eVByaXZpbGVnZSBzbyBpdCBjYW4gZW51bWVyYXRlIGFuZCBtb2RpZnkgdGhlIEFDTCBvZiB0aGUgZGVza3RvcC4KVGhpcyBjb3VsZCBzaG93IHVwIGluIGxvZ3MgZGVwZW5kaW5nIG9uIHRoZSBsZXZlbCBvZiBtb25pdG9yaW5nLgoKClBFUk1JU1NJT05TIFJFUVVJUkVEOgpTZVNlY3VyaXR5UHJpdmlsZWdlOiBOZWVkZWQgaWYgbGF1bmNoaW5nIGEgcHJvY2VzcyB3aXRoIGEgVUkgdGhhdCBuZWVkcyB0byBiZSByZW5kZXJlZC4gVXNpbmcgdGhlIC1Ob1VJIGZsYWcgYmxvY2tzIHRoaXMuClNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlIDogTmVlZGVkIGlmIGxhdW5jaGluZyBhIHByb2Nlc3Mgd2hpbGUgdGhlIHNjcmlwdCBpcyBydW5uaW5nIGluIFNlc3Npb24gMC4KCgpJbXBvcnRhbnQgZGlmZmVyZW5jZXMgZnJvbSBpbmNvZ25pdG86CkZpcnN0IG9mIGFsbCwgeW91IHNob3VsZCBwcm9iYWJseSByZWFkIHRoZSBpbmNvZ25pdG8gd2hpdGUgcGFwZXIgdG8gdW5kZXJzdGFuZCB3aGF0IGluY29nbml0byBkb2VzLiBJZiB5b3UgdXNlIGluY29nbml0bywgeW91J2xsIG5vdGljZSBpdCBkaWZmZXJlbnRpYXRlcwpiZXR3ZWVuICJJbXBlcnNvbmF0aW9uIiBhbmQgIkRlbGVnYXRpb24iIHRva2Vucy4gVGhpcyBpcyBiZWNhdXNlIGluY29nbml0byBjYW4gYmUgdXNlZCBpbiBzaXR1YXRpb25zIHdoZXJlIHlvdSBnZXQgcmVtb3RlIGNvZGUgZXhlY3V0aW9uIGFnYWluc3QgYSBzZXJ2aWNlCndoaWNoIGhhcyB0aHJlYWRzIGltcGVyc29uYXRpbmcgbXVsdGlwbGUgdXNlcnMuIEluY29nbml0byBjYW4gZW51bWVyYXRlIGFsbCB0b2tlbnMgYXZhaWxhYmxlIHRvIHRoZSBzZXJ2aWNlIHByb2Nlc3MsIGFuZCBpbXBlcnNvbmF0ZSB0aGVtICh3aGljaCBtaWdodCBhbGxvdwp5b3UgdG8gZWxldmF0ZSBwcml2aWxlZ2VzKS4gVGhpcyBzY3JpcHQgbXVzdCBiZSBydW4gYXMgYWRtaW5pc3RyYXRvciwgYW5kIGJlY2F1c2UgeW91IGFyZSBhbHJlYWR5IGFuIGFkbWluaXN0cmF0b3IsIHRoZSBwcmltYXJ5IHVzZSBvZiB0aGlzIHNjcmlwdCBpcyBmb3IgcGl2b3RpbmcKd2l0aG91dCBkdW1waW5nIGNyZWRlbnRpYWxzLiAKCkluIHRoaXMgc2l0dWF0aW9uLCBJbXBlcnNvbmF0aW9uIHZzIERlbGVnYXRpb24gZG9lcyBub3QgbWF0dGVyIGJlY2F1c2UgYW4gYWRtaW5pc3RyYXRvciBjYW4gdHVybiBhbnkgdG9rZW4gaW4gdG8gYSBwcmltYXJ5IHRva2VuIChkZWxlZ2F0aW9uIHJpZ2h0cykuIFdoYXQgZG9lcwptYXR0ZXIgaXMgdGhlIGxvZ29uIHR5cGUgdXNlZCB0byBjcmVhdGUgdGhlIGxvZ29uIHRva2VuLiBJZiBhIHVzZXIgY29ubmVjdHMgdXNpbmcgTmV0d29yayBMb2dvbiAoYWthIHR5cGUgMyBsb2dvbiksIHRoZSBjb21wdXRlciB3aWxsIG5vdCBoYXZlIGFueSBjcmVkZW50aWFscyBmb3IgCnRoZSB1c2VyLiBTaW5jZSB0aGUgY29tcHV0ZXIgaGFzIG5vIGNyZWRlbnRpYWxzIGFzc29jaWF0ZWQgd2l0aCB0aGUgdG9rZW4sIGl0IHdpbGwgbm90IGJlIHBvc3NpYmxlIHRvIGF1dGhlbnRpY2F0ZSBvZmYtYm94IHdpdGggdGhlIHRva2VuLiBBbGwgb3RoZXIgbG9nb24gdHlwZXMKc2hvdWxkIGhhdmUgY3JlZGVudGlhbHMgYXNzb2NpYXRlZCB3aXRoIHRoZW0gKHN1Y2ggYXMgSW50ZXJhY3RpdmUgbG9nb24sIFNlcnZpY2UgbG9nb24sIFJlbW90ZSBpbnRlcmFjdGl2ZSBsb2dvbiwgZXRjKS4gVGhlcmVmb3JlLCB0aGlzIHNjcmlwdCBsb29rcwpmb3IgdG9rZW5zIHdoaWNoIHdlcmUgY3JlYXRlZCB3aXRoIGRlc2lyYWJsZSBsb2dvbiB0b2tlbnMgKGFuZCBvbmx5IGRpc3BsYXlzIHRoZW0gYnkgZGVmYXVsdCkuCgpJbiBhIG51dHNoZWxsLCBpbnN0ZWFkIG9mIHdvcnJ5aW5nIGFib3V0ICJkZWxlZ2F0aW9uIHZzIGltcGVyc29uYXRpb24iIHRva2VucywgeW91IHNob3VsZCB3b3JyeSBhYm91dCBOZXR3b3JrTG9nb24gKGJhZCkgdnMgTm9uLU5ldHdvcmtMb2dvbiAoZ29vZCkuCgoKUG93ZXJTcGxvaXQgRnVuY3Rpb246IEludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbgpBdXRob3I6IEpvZSBCaWFsZWssIFR3aXR0ZXI6IEBKb3NlcGhCaWFsZWsKTGljZW5zZTogQlNEIDMtQ2xhdXNlClJlcXVpcmVkIERlcGVuZGVuY2llczogTm9uZQpPcHRpb25hbCBEZXBlbmRlbmNpZXM6IE5vbmUKVmVyc2lvbjogMS4xCgouREVTQ1JJUFRJT04KCkxpc3RzIGF2YWlsYWJsZSBsb2dvbiB0b2tlbnMuIENyZWF0ZXMgcHJvY2Vzc2VzIHdpdGggb3RoZXIgdXNlcnMgbG9nb24gdG9rZW5zLCBhbmQgaW1wZXJzb25hdGVzIGxvZ29uIHRva2VucyBpbiB0aGUgY3VycmVudCB0aHJlYWQuCgouUEFSQU1FVEVSIEVudW1lcmF0ZQoKU3dpdGNoLiBTcGVjaWZpY3MgdG8gZW51bWVyYXRlIGxvZ29uIHRva2VucyBhdmFpbGFibGUuIEJ5IGRlZmF1bHQgdGhpcyB3aWxsIG9ubHkgbGlzdCB1bnFpdWUgdXNhYmxlIHRva2VucyAobm90IG5ldHdvcmstbG9nb24gdG9rZW5zKS4KCi5QQVJBTUVURVIgUmV2VG9TZWxmCgpTd2l0Y2guIFN0b3BzIGltcGVyc29uYXRpbmcgYW4gYWx0ZXJuYXRlIHVzZXJzIFRva2VuLgoKLlBBUkFNRVRFUiBTaG93QWxsCgpTd2l0Y2guIEVudW1lcmF0ZSBhbGwgTG9nb24gVG9rZW5zIChpbmNsdWRpbmcgbm9uLXVuaXF1ZSB0b2tlbnMgYW5kIE5ldHdvcmtMb2dvbiB0b2tlbnMpLgoKLlBBUkFNRVRFUiBJbXBlcnNvbmF0ZVVzZXIKClN3aXRjaC4gV2lsbCBpbXBlcnNvbmF0ZSBhbiBhbHRlcm5hdGUgdXNlcnMgbG9nb24gdG9rZW4gaW4gdGhlIFBvd2VyU2hlbGwgdGhyZWFkLiBDYW4gc3BlY2lmeSB0aGUgdG9rZW4gdG8gdXNlIGJ5IFVzZXJuYW1lLCBQcm9jZXNzSWQsIG9yIFRocmVhZElkLgogICAgVGhpcyBtb2RlIGlzIG5vdCByZWNvbW1lbmRlZCBiZWNhdXNlIFBvd2VyU2hlbGwgaXMgaGVhdmlseSB0aHJlYWRlZCBhbmQgbWFueSBhY3Rpb25zIHdvbid0IGJlIGRvbmUgaW4gdGhlIGN1cnJlbnQgdGhyZWFkLiBVc2UgQ3JlYXRlUHJvY2VzcyBpbnN0ZWFkLgoJCi5QQVJBTUVURVIgQ3JlYXRlUHJvY2VzcwoKU3BlY2lmeSBhIHByb2Nlc3MgdG8gY3JlYXRlIHdpdGggYW4gYWx0ZXJuYXRlIHVzZXJzIGxvZ29uIHRva2VuLiBDYW4gc3BlY2lmeSB0aGUgdG9rZW4gdG8gdXNlIGJ5IFVzZXJuYW1lLCBQcm9jZXNzSWQsIG9yIFRocmVhZElkLgoJCi5QQVJBTUVURVIgV2hvQW1JCgpTd2l0Y2guIERpc3BsYXlzIHRoZSBjcmVkZW50aWFscyB0aGUgUG93ZXJTaGVsbCB0aHJlYWQgaXMgcnVubmluZyB1bmRlci4KCi5QQVJBTUVURVIgVXNlcm5hbWUKClNwZWNpZnkgdGhlIFRva2VuIHRvIHVzZSBieSB1c2VybmFtZS4gVGhpcyB3aWxsIGNob29zZSBhIG5vbi1OZXR3b3JrTG9nb24gdG9rZW4gYmVsb25naW5nIHRvIHRoZSB1c2VyLgoKLlBBUkFNRVRFUiBQcm9jZXNzSWQKClNwZWNpZnkgdGhlIFRva2VuIHRvIHVzZSBieSBQcm9jZXNzSWQuIFRoaXMgd2lsbCB1c2UgdGhlIHByaW1hcnkgdG9rZW4gb2YgdGhlIHByb2Nlc3Mgc3BlY2lmaWVkLgoKLlBBUkFNRVRFUiBQcm9jZXNzCgpTcGVjaWZ5IHRoZSB0b2tlbiB0byB1c2UgYnkgcHJvY2VzcyBvYmplY3QgKHdpbGwgdXNlIHRoZSBwcm9jZXNzSWQgdW5kZXIgdGhlIGNvdmVycykuIFRoaXMgd2lsbCBpbXBlcnNvbmF0ZSB0aGUgcHJpbWFyeSB0b2tlbiBvZiB0aGUgcHJvY2Vzcy4KCi5QQVJBTUVURVIgVGhyZWFkSWQKClNwZWNpZnkgdGhlIFRva2VuIHRvIHVzZSBieSBUaHJlYWRJZC4gVGhpcyB3aWxsIHVzZSB0aGUgdG9rZW4gb2YgdGhlIHRocmVhZCBzcGVjaWZpZWQuCgouUEFSQU1FVEVSIFByb2Nlc3NBcmdzCgpTcGVjaWZ5IHRoZSBhcmd1bWVudHMgdG8gc3RhcnQgdGhlIHNwZWNpZmllZCBwcm9jZXNzIHdpdGggd2hlbiB1c2luZyB0aGUgLUNyZWF0ZVByb2Nlc3MgbW9kZS4KCi5QQVJBTUVURVIgTm9VSQoKSWYgeW91IGFyZSBjcmVhdGluZyBhIHByb2Nlc3Mgd2hpY2ggZG9lc24ndCBuZWVkIGEgVUkgdG8gYmUgcmVuZGVyZWQsIHVzZSB0aGlzIGZsYWcuIFRoaXMgd2lsbCBwcmV2ZW50IHRoZSBzY3JpcHQgZnJvbSBtb2RpZnlpbmcgdGhlIERlc2t0b3AgQUNMJ3Mgb2YgdGhlIApjdXJyZW50IHVzZXIuIElmIHRoaXMgZmxhZyBpc24ndCBzZXQgYW5kIC1DcmVhdGVQcm9jZXNzIGlzIHVzZWQsIHRoaXMgc2NyaXB0IHdpbGwgbW9kaWZ5IHRoZSBBQ0wncyBvZiB0aGUgY3VycmVudCB1c2VycyBkZXNrdG9wIHRvIGFsbG93IGZ1bGwgY29udHJvbAp0byAiRXZlcnlvbmUiLgoKCQouRVhBTVBMRQoKSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1FbnVtZXJhdGUKCkxpc3RzIGFsbCB1bmlxdWUgdXNhYmxlIHRva2VucyBvbiB0aGUgY29tcHV0ZXIuCgouRVhBTVBMRQoKSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1DcmVhdGVQcm9jZXNzICJjbWQuZXhlIiAtVXNlcm5hbWUgIm50IGF1dGhvcml0eVxzeXN0ZW0iCgpTcGF3bnMgY21kLmV4ZSBhcyBTWVNURU0uCgouRVhBTVBMRQoKSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1JbXBlcnNvbmF0ZVVzZXIgLVVzZXJuYW1lICJudCBhdXRob3JpdHlcc3lzdGVtIgoKTWFrZXMgdGhlIGN1cnJlbnQgUG93ZXJTaGVsbCB0aHJlYWQgaW1wZXJzb25hdGUgU1lTVEVNLgoKLkVYQU1QTEUKCkludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbiAtQ3JlYXRlUHJvY2VzcyAiY21kLmV4ZSIgLVByb2Nlc3NJZCA1MDAKClNwYXducyBjbWQuZXhlIHVzaW5nIHRoZSBwcmltYXJ5IHRva2VuIGJlbG9uZ2luZyB0byBwcm9jZXNzIElEIDUwMC4KCi5FWEFNUExFCgpJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLVNob3dBbGwKCkxpc3RzIGFsbCB0b2tlbnMgYXZhaWxhYmxlIG9uIHRoZSBjb21wdXRlciwgaW5jbHVkaW5nIG5vbi11bmlxdWUgdG9rZW5zIGFuZCB0b2tlbnMgY3JlYXRlZCB1c2luZyBOZXR3b3JrTG9nb24uCgouRVhBTVBMRQoKSW52b2tlLVRva2VuTWFuaXB1bGF0aW9uIC1DcmVhdGVQcm9jZXNzICJjbWQuZXhlIiAtVGhyZWFkSWQgNTAwCgpTcGF3bnMgY21kLmV4ZSB1c2luZyB0aGUgdG9rZW4gYmVsb25naW5nIHRvIHRocmVhZCBJRCA1MDAuCgouRVhBTVBMRQoKR2V0LVByb2Nlc3Mgd2luaW5pdCB8IEludm9rZS1Ub2tlbk1hbmlwdWxhdGlvbiAtQ3JlYXRlUHJvY2VzcyAiY21kLmV4ZSIKClNwYXducyBjbWQuZXhlIHVzaW5nIHRoZSBwcmltYXJ5IHRva2VuIG9mIExTQVNTLmV4ZS4gVGhpcyBwaXBlcyB0aGUgb3V0cHV0IG9mIEdldC1Qcm9jZXNzIHRvIHRoZSAiLVByb2Nlc3MiIHBhcmFtZXRlciBvZiB0aGUgc2NyaXB0LgoKLkVYQU1QTEUKCkdldC1Qcm9jZXNzIHdpbmluaXQgfCBJbnZva2UtVG9rZW5NYW5pcHVsYXRpb24gLUltcGVyc29uYXRlVXNlcgoKTWFrZXMgdGhlIGN1cnJlbnQgdGhyZWFkIGltcGVyc29uYXRlIHRoZSBsc2FzcyBzZWN1cml0eSB0b2tlbi4KCi5OT1RFUwpUaGlzIHNjcmlwdCB3YXMgaW5zcGlyZWQgYnkgaW5jb2duaXRvLiAKClNldmVyYWwgb2YgdGhlIGZ1bmN0aW9ucyB1c2VkIGluIHRoaXMgc2NyaXB0IHdlcmUgd3JpdHRlbiBieSBNYXR0IEdyYWViZXIoVHdpdHRlcjogQG1hdHRpZmVzdGF0aW9uLCBCbG9nOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8pLgpCSUcgVEhBTktTIHRvIE1hdHQgR3JhZWJlciBmb3IgaGVscGluZyBkZWJ1Zy4KCi5MSU5LCgpCbG9nOiBodHRwOi8vY2x5bWIzci53b3JkcHJlc3MuY29tLwpHaXRodWIgcmVwbzogaHR0cHM6Ly9naXRodWIuY29tL2NseW1iM3IvUG93ZXJTaGVsbApCbG9nIG9uIHRoaXMgc2NyaXB0OiBodHRwOi8vY2x5bWIzci53b3JkcHJlc3MuY29tLzIwMTMvMTEvMDMvcG93ZXJzaGVsbC1hbmQtdG9rZW4taW1wZXJzb25hdGlvbi8KCiM+CgogICAgW0NtZGxldEJpbmRpbmcoRGVmYXVsdFBhcmFtZXRlclNldE5hbWU9IkVudW1lcmF0ZSIpXQogICAgUGFyYW0oCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkVudW1lcmF0ZSIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJEVudW1lcmF0ZSwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIlJldlRvU2VsZiIpXQogICAgICAgIFtTd2l0Y2hdCiAgICAgICAgJFJldlRvU2VsZiwKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIlNob3dBbGwiKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRTaG93QWxsLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiSW1wZXJzb25hdGVVc2VyIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkSW1wZXJzb25hdGVVc2VyLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJENyZWF0ZVByb2Nlc3MsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJXaG9BbUkiKV0KICAgICAgICBbU3dpdGNoXQogICAgICAgICRXaG9BbUksCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJJbXBlcnNvbmF0ZVVzZXIiKV0KICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiQ3JlYXRlUHJvY2VzcyIpXQogICAgICAgIFtTdHJpbmddCiAgICAgICAgJFVzZXJuYW1lLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiSW1wZXJzb25hdGVVc2VyIildCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkNyZWF0ZVByb2Nlc3MiKV0KICAgICAgICBbSW50XQogICAgICAgICRQcm9jZXNzSWQsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJJbXBlcnNvbmF0ZVVzZXIiLCBWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkNyZWF0ZVByb2Nlc3MiLCBWYWx1ZUZyb21QaXBlbGluZT0kdHJ1ZSldCiAgICAgICAgW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXQogICAgICAgICRQcm9jZXNzLAoKICAgICAgICBbUGFyYW1ldGVyKFBhcmFtZXRlclNldE5hbWUgPSAiSW1wZXJzb25hdGVVc2VyIildCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lID0gIkNyZWF0ZVByb2Nlc3MiKV0KICAgICAgICAkVGhyZWFkSWQsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJDcmVhdGVQcm9jZXNzIildCiAgICAgICAgW1N0cmluZ10KICAgICAgICAkUHJvY2Vzc0FyZ3MsCgogICAgICAgIFtQYXJhbWV0ZXIoUGFyYW1ldGVyU2V0TmFtZSA9ICJDcmVhdGVQcm9jZXNzIildCiAgICAgICAgW1N3aXRjaF0KICAgICAgICAkTm9VSQogICAgKQogICAKICAgIFNldC1TdHJpY3RNb2RlIC1WZXJzaW9uIDIKCgkjRnVuY3Rpb24gd3JpdHRlbiBieSBNYXR0IEdyYWViZXIsIFR3aXR0ZXI6IEBtYXR0aWZlc3RhdGlvbiwgQmxvZzogaHR0cDovL3d3dy5leHBsb2l0LW1vbmRheS5jb20vCglGdW5jdGlvbiBHZXQtRGVsZWdhdGVUeXBlCgl7CgkgICAgUGFyYW0KCSAgICAoCgkgICAgICAgIFtPdXRwdXRUeXBlKFtUeXBlXSldCgkgICAgICAgIAoJICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDApXQoJICAgICAgICBbVHlwZVtdXQoJICAgICAgICAkUGFyYW1ldGVycyA9IChOZXctT2JqZWN0IFR5cGVbXSgwKSksCgkgICAgICAgIAoJICAgICAgICBbUGFyYW1ldGVyKCBQb3NpdGlvbiA9IDEgKV0KCSAgICAgICAgW1R5cGVdCgkgICAgICAgICRSZXR1cm5UeXBlID0gW1ZvaWRdCgkgICAgKQoKCSAgICAkRG9tYWluID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4KCSAgICAkRHluQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnUmVmbGVjdGVkRGVsZWdhdGUnKQoJICAgICRBc3NlbWJseUJ1aWxkZXIgPSAkRG9tYWluLkRlZmluZUR5bmFtaWNBc3NlbWJseSgkRHluQXNzZW1ibHksIFtTeXN0ZW0uUmVmbGVjdGlvbi5FbWl0LkFzc2VtYmx5QnVpbGRlckFjY2Vzc106OlJ1bikKCSAgICAkTW9kdWxlQnVpbGRlciA9ICRBc3NlbWJseUJ1aWxkZXIuRGVmaW5lRHluYW1pY01vZHVsZSgnSW5NZW1vcnlNb2R1bGUnLCAkZmFsc2UpCgkgICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTXlEZWxlZ2F0ZVR5cGUnLCAnQ2xhc3MsIFB1YmxpYywgU2VhbGVkLCBBbnNpQ2xhc3MsIEF1dG9DbGFzcycsIFtTeXN0ZW0uTXVsdGljYXN0RGVsZWdhdGVdKQoJICAgICRDb25zdHJ1Y3RvckJ1aWxkZXIgPSAkVHlwZUJ1aWxkZXIuRGVmaW5lQ29uc3RydWN0b3IoJ1JUU3BlY2lhbE5hbWUsIEhpZGVCeVNpZywgUHVibGljJywgW1N5c3RlbS5SZWZsZWN0aW9uLkNhbGxpbmdDb252ZW50aW9uc106OlN0YW5kYXJkLCAkUGFyYW1ldGVycykKCSAgICAkQ29uc3RydWN0b3JCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKQoJICAgICRNZXRob2RCdWlsZGVyID0gJFR5cGVCdWlsZGVyLkRlZmluZU1ldGhvZCgnSW52b2tlJywgJ1B1YmxpYywgSGlkZUJ5U2lnLCBOZXdTbG90LCBWaXJ0dWFsJywgJFJldHVyblR5cGUsICRQYXJhbWV0ZXJzKQoJICAgICRNZXRob2RCdWlsZGVyLlNldEltcGxlbWVudGF0aW9uRmxhZ3MoJ1J1bnRpbWUsIE1hbmFnZWQnKQoJICAgIAoJICAgIFdyaXRlLU91dHB1dCAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgl9CgoKCSNGdW5jdGlvbiB3cml0dGVuIGJ5IE1hdHQgR3JhZWJlciwgVHdpdHRlcjogQG1hdHRpZmVzdGF0aW9uLCBCbG9nOiBodHRwOi8vd3d3LmV4cGxvaXQtbW9uZGF5LmNvbS8KCUZ1bmN0aW9uIEdldC1Qcm9jQWRkcmVzcwoJewoJICAgIFBhcmFtCgkgICAgKAoJICAgICAgICBbT3V0cHV0VHlwZShbSW50UHRyXSldCgkgICAgCgkgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMCwgTWFuZGF0b3J5ID0gJFRydWUgKV0KCSAgICAgICAgW1N0cmluZ10KCSAgICAgICAgJE1vZHVsZSwKCSAgICAgICAgCgkgICAgICAgIFtQYXJhbWV0ZXIoIFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJFRydWUgKV0KCSAgICAgICAgW1N0cmluZ10KCSAgICAgICAgJFByb2NlZHVyZQoJICAgICkKCgkgICAgIyBHZXQgYSByZWZlcmVuY2UgdG8gU3lzdGVtLmRsbCBpbiB0aGUgR0FDCgkgICAgJFN5c3RlbUFzc2VtYmx5ID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4uR2V0QXNzZW1ibGllcygpIHwKCSAgICAgICAgV2hlcmUtT2JqZWN0IHsgJF8uR2xvYmFsQXNzZW1ibHlDYWNoZSAtQW5kICRfLkxvY2F0aW9uLlNwbGl0KCdcXCcpWy0xXS5FcXVhbHMoJ1N5c3RlbS5kbGwnKSB9CgkgICAgJFVuc2FmZU5hdGl2ZU1ldGhvZHMgPSAkU3lzdGVtQXNzZW1ibHkuR2V0VHlwZSgnTWljcm9zb2Z0LldpbjMyLlVuc2FmZU5hdGl2ZU1ldGhvZHMnKQoJICAgICMgR2V0IGEgcmVmZXJlbmNlIHRvIHRoZSBHZXRNb2R1bGVIYW5kbGUgYW5kIEdldFByb2NBZGRyZXNzIG1ldGhvZHMKCSAgICAkR2V0TW9kdWxlSGFuZGxlID0gJFVuc2FmZU5hdGl2ZU1ldGhvZHMuR2V0TWV0aG9kKCdHZXRNb2R1bGVIYW5kbGUnKQoJICAgICRHZXRQcm9jQWRkcmVzcyA9ICRVbnNhZmVOYXRpdmVNZXRob2RzLkdldE1ldGhvZCgnR2V0UHJvY0FkZHJlc3MnKQoJICAgICMgR2V0IGEgaGFuZGxlIHRvIHRoZSBtb2R1bGUgc3BlY2lmaWVkCgkgICAgJEtlcm4zMkhhbmRsZSA9ICRHZXRNb2R1bGVIYW5kbGUuSW52b2tlKCRudWxsLCBAKCRNb2R1bGUpKQoJICAgICR0bXBQdHIgPSBOZXctT2JqZWN0IEludFB0cgoJICAgICRIYW5kbGVSZWYgPSBOZXctT2JqZWN0IFN5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWYoJHRtcFB0ciwgJEtlcm4zMkhhbmRsZSkKCgkgICAgIyBSZXR1cm4gdGhlIGFkZHJlc3Mgb2YgdGhlIGZ1bmN0aW9uCgkgICAgV3JpdGUtT3V0cHV0ICRHZXRQcm9jQWRkcmVzcy5JbnZva2UoJG51bGwsIEAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5IYW5kbGVSZWZdJEhhbmRsZVJlZiwgJFByb2NlZHVyZSkpCgl9CgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgI1dpbjMyQ29uc3RhbnRzCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAkQ29uc3RhbnRzID0gQHsKICAgICAgICBBQ0NFU1NfU1lTVEVNX1NFQ1VSSVRZID0gMHgwMTAwMDAwMAogICAgICAgIFJFQURfQ09OVFJPTCA9IDB4MDAwMjAwMDAKICAgICAgICBTWU5DSFJPTklaRSA9IDB4MDAxMDAwMDAKICAgICAgICBTVEFOREFSRF9SSUdIVFNfQUxMID0gMHgwMDFGMDAwMAogICAgICAgIFRPS0VOX1FVRVJZID0gOAogICAgICAgIFRPS0VOX0FESlVTVF9QUklWSUxFR0VTID0gMHgyMAogICAgICAgIEVSUk9SX05PX1RPS0VOID0gMHgzZjAKICAgICAgICBTRUNVUklUWV9ERUxFR0FUSU9OID0gMwogICAgICAgIERBQ0xfU0VDVVJJVFlfSU5GT1JNQVRJT04gPSAweDQKICAgICAgICBBQ0NFU1NfQUxMT1dFRF9BQ0VfVFlQRSA9IDB4MAogICAgICAgIFNUQU5EQVJEX1JJR0hUU19SRVFVSVJFRCA9IDB4MDAwRjAwMDAKICAgICAgICBERVNLVE9QX0dFTkVSSUNfQUxMID0gMHgwMDBGMDFGRgogICAgICAgIFdSSVRFX0RBQyA9IDB4MDAwNDAwMDAKICAgICAgICBPQkpFQ1RfSU5IRVJJVF9BQ0UgPSAweDEKICAgICAgICBHUkFOVF9BQ0NFU1MgPSAweDEKICAgICAgICBUUlVTVEVFX0lTX05BTUUgPSAweDEKICAgICAgICBUUlVTVEVFX0lTX1NJRCA9IDB4MAogICAgICAgIFRSVVNURUVfSVNfVVNFUiA9IDB4MQogICAgICAgIFRSVVNURUVfSVNfV0VMTF9LTk9XTl9HUk9VUCA9IDB4NQogICAgICAgIFRSVVNURUVfSVNfR1JPVVAgPSAweDIKICAgICAgICBQUk9DRVNTX1FVRVJZX0lORk9STUFUSU9OID0gMHg0MDAKICAgICAgICBUT0tFTl9BU1NJR05fUFJJTUFSWSA9IDB4MQogICAgICAgIFRPS0VOX0RVUExJQ0FURSA9IDB4MgogICAgICAgIFRPS0VOX0lNUEVSU09OQVRFID0gMHg0CiAgICAgICAgVE9LRU5fUVVFUllfU09VUkNFID0gMHgxMAogICAgICAgIFNUQU5EQVJEX1JJR0hUU19SRUFEID0gMHgyMDAwMAogICAgICAgIFRva2VuU3RhdGlzdGljcyA9IDEwCiAgICAgICAgVE9LRU5fQUxMX0FDQ0VTUyA9IDB4ZjAxZmYKICAgICAgICBNQVhJTVVNX0FMTE9XRUQgPSAweDAyMDAwMDAwCiAgICAgICAgVEhSRUFEX0FMTF9BQ0NFU1MgPSAweDFmMDNmZgogICAgICAgIEVSUk9SX0lOVkFMSURfUEFSQU1FVEVSID0gMHg1NwogICAgICAgIExPR09OX05FVENSRURFTlRJQUxTX09OTFkgPSAweDIKICAgICAgICBTRV9QUklWSUxFR0VfRU5BQkxFRCA9IDB4MgogICAgICAgIFNFX1BSSVZJTEVHRV9FTkFCTEVEX0JZX0RFRkFVTFQgPSAweDEKICAgICAgICBTRV9QUklWSUxFR0VfUkVNT1ZFRCA9IDB4NAogICAgfQoKICAgICRXaW4zMkNvbnN0YW50cyA9IE5ldy1PYmplY3QgUFNPYmplY3QgLVByb3BlcnR5ICRDb25zdGFudHMKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgI1dpbjMyU3RydWN0dXJlcwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoJI0RlZmluZSBhbGwgdGhlIHN0cnVjdHVyZXMvZW51bXMgdGhhdCB3aWxsIGJlIHVzZWQKCSMJVGhpcyBhcnRpY2xlIHNob3dzIHlvdSBob3cgdG8gZG8gdGhpcyB3aXRoIHJlZmxlY3Rpb246IGh0dHA6Ly93d3cuZXhwbG9pdC1tb25kYXkuY29tLzIwMTIvMDcvc3RydWN0cy1hbmQtZW51bXMtdXNpbmctcmVmbGVjdGlvbi5odG1sCgkkRG9tYWluID0gW0FwcERvbWFpbl06OkN1cnJlbnREb21haW4KCSREeW5hbWljQXNzZW1ibHkgPSBOZXctT2JqZWN0IFN5c3RlbS5SZWZsZWN0aW9uLkFzc2VtYmx5TmFtZSgnRHluYW1pY0Fzc2VtYmx5JykKCSRBc3NlbWJseUJ1aWxkZXIgPSAkRG9tYWluLkRlZmluZUR5bmFtaWNBc3NlbWJseSgkRHluYW1pY0Fzc2VtYmx5LCBbU3lzdGVtLlJlZmxlY3Rpb24uRW1pdC5Bc3NlbWJseUJ1aWxkZXJBY2Nlc3NdOjpSdW4pCgkkTW9kdWxlQnVpbGRlciA9ICRBc3NlbWJseUJ1aWxkZXIuRGVmaW5lRHluYW1pY01vZHVsZSgnRHluYW1pY01vZHVsZScsICRmYWxzZSkKCSRDb25zdHJ1Y3RvckluZm8gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxBc0F0dHJpYnV0ZV0uR2V0Q29uc3RydWN0b3JzKClbMF0KCiAgICAjRU5VTXMKCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZUVudW0oJ1RPS0VOX0lORk9STUFUSU9OX0NMQVNTJywgJ1B1YmxpYycsIFtVSW50MzJdKQoJJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuVXNlcicsIFtVSW50MzJdIDEpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkdyb3VwcycsIFtVSW50MzJdIDIpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblByaXZpbGVnZXMnLCBbVUludDMyXSAzKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Pd25lcicsIFtVSW50MzJdIDQpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblByaW1hcnlHcm91cCcsIFtVSW50MzJdIDUpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkRlZmF1bHREYWNsJywgW1VJbnQzMl0gNikgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuU291cmNlJywgW1VJbnQzMl0gNykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuVHlwZScsIFtVSW50MzJdIDgpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkltcGVyc29uYXRpb25MZXZlbCcsIFtVSW50MzJdIDkpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblN0YXRpc3RpY3MnLCBbVUludDMyXSAxMCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuUmVzdHJpY3RlZFNpZHMnLCBbVUludDMyXSAxMSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuU2Vzc2lvbklkJywgW1VJbnQzMl0gMTIpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkdyb3Vwc0FuZFByaXZpbGVnZXMnLCBbVUludDMyXSAxMykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuU2Vzc2lvblJlZmVyZW5jZScsIFtVSW50MzJdIDE0KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5TYW5kQm94SW5lcnQnLCBbVUludDMyXSAxNSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuQXVkaXRQb2xpY3knLCBbVUludDMyXSAxNikgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuT3JpZ2luJywgW1VJbnQzMl0gMTcpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkVsZXZhdGlvblR5cGUnLCBbVUludDMyXSAxOCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuTGlua2VkVG9rZW4nLCBbVUludDMyXSAxOSkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuRWxldmF0aW9uJywgW1VJbnQzMl0gMjApIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkhhc1Jlc3RyaWN0aW9ucycsIFtVSW50MzJdIDIxKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5BY2Nlc3NJbmZvcm1hdGlvbicsIFtVSW50MzJdIDIyKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5WaXJ0dWFsaXphdGlvbkFsbG93ZWQnLCBbVUludDMyXSAyMykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuVmlydHVhbGl6YXRpb25FbmFibGVkJywgW1VJbnQzMl0gMjQpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkludGVncml0eUxldmVsJywgW1VJbnQzMl0gMjUpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblVJQWNjZXNzJywgW1VJbnQzMl0gMjYpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbk1hbmRhdG9yeVBvbGljeScsIFtVSW50MzJdIDI3KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Mb2dvblNpZCcsIFtVSW50MzJdIDI4KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Jc0FwcENvbnRhaW5lcicsIFtVSW50MzJdIDI5KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5DYXBhYmlsaXRpZXMnLCBbVUludDMyXSAzMCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ1Rva2VuQXBwQ29udGFpbmVyU2lkJywgW1VJbnQzMl0gMzEpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkFwcENvbnRhaW5lck51bWJlcicsIFtVSW50MzJdIDMyKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Vc2VyQ2xhaW1BdHRyaWJ1dGVzJywgW1VJbnQzMl0gMzMpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkRldmljZUNsYWltQXR0cmlidXRlcycsIFtVSW50MzJdIDM0KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5SZXN0cmljdGVkVXNlckNsYWltQXR0cmlidXRlcycsIFtVSW50MzJdIDM1KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5SZXN0cmljdGVkRGV2aWNlQ2xhaW1BdHRyaWJ1dGVzJywgW1VJbnQzMl0gMzYpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlbkRldmljZUdyb3VwcycsIFtVSW50MzJdIDM3KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5SZXN0cmljdGVkRGV2aWNlR3JvdXBzJywgW1VJbnQzMl0gMzgpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVMaXRlcmFsKCdUb2tlblNlY3VyaXR5QXR0cmlidXRlcycsIFtVSW50MzJdIDM5KSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lTGl0ZXJhbCgnVG9rZW5Jc1Jlc3RyaWN0ZWQnLCBbVUludDMyXSA0MCkgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUxpdGVyYWwoJ01heFRva2VuSW5mb0NsYXNzJywgW1VJbnQzMl0gNDEpIHwgT3V0LU51bGwKCSRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU1RSVUNUcwogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xBUkdFX0lOVEVHRVInLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCA4KQoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb3dQYXJ0JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0hpZ2hQYXJ0JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkTEFSR0VfSU5URUdFUiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IExVSUQKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCgkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdMVUlEJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSwgOCkKCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG93UGFydCcsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdIaWdoUGFydCcsIFtJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkTFVJRCA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IFRPS0VOX1NUQVRJU1RJQ1MKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCgkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdUT0tFTl9TVEFUSVNUSUNTJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVG9rZW5JZCcsICRMVUlELCAnUHVibGljJykgfCBPdXQtTnVsbAoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBdXRoZW50aWNhdGlvbklkJywgJExVSUQsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0V4cGlyYXRpb25UaW1lJywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1Rva2VuVHlwZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdJbXBlcnNvbmF0aW9uTGV2ZWwnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRHluYW1pY0NoYXJnZWQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRHluYW1pY0F2YWlsYWJsZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdHcm91cENvdW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1ByaXZpbGVnZUNvdW50JywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01vZGlmaWVkSWQnLCAkTFVJRCwgJ1B1YmxpYycpIHwgT3V0LU51bGwKCSRUT0tFTl9TVEFUSVNUSUNTID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgTFNBX1VOSUNPREVfU1RSSU5HCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwoJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnTFNBX1VOSUNPREVfU1RSSU5HJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTGVuZ3RoJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01heGltdW1MZW5ndGgnLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnQnVmZmVyJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkTFNBX1VOSUNPREVfU1RSSU5HID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgTFNBX0xBU1RfSU5URVJfTE9HT05fSU5GTwogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xTQV9MQVNUX0lOVEVSX0xPR09OX0lORk8nLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMYXN0U3VjY2Vzc2Z1bExvZ29uJywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xhc3RGYWlsZWRMb2dvbicsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdGYWlsZWRBdHRlbXB0Q291bnRTaW5jZUxhc3RTdWNjZXNzZnVsTG9nb24nLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKCSRMU0FfTEFTVF9JTlRFUl9MT0dPTl9JTkZPID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgU0VDVVJJVFlfTE9HT05fU0VTU0lPTl9EQVRBCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwoJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnU0VDVVJJVFlfTE9HT05fU0VTU0lPTl9EQVRBJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2l6ZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2dpbklEJywgJExVSUQsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1VzZXJuYW1lJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9naW5Eb21haW4nLCAkTFNBX1VOSUNPREVfU1RSSU5HLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBdXRoZW50aWNhdGlvblBhY2thZ2UnLCAkTFNBX1VOSUNPREVfU1RSSU5HLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMb2dvblR5cGUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2Vzc2lvbicsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTaWQnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9naW5UaW1lJywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvZ2luU2VydmVyJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnRG5zRG9tYWluTmFtZScsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1VwbicsICRMU0FfVU5JQ09ERV9TVFJJTkcsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1VzZXJGbGFncycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdMYXN0TG9nb25JbmZvJywgJExTQV9MQVNUX0lOVEVSX0xPR09OX0lORk8sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0xvZ29uU2NyaXB0JywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUHJvZmlsZVBhdGgnLCAkTFNBX1VOSUNPREVfU1RSSU5HLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdIb21lRGlyZWN0b3J5JywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSG9tZURpcmVjdG9yeURyaXZlJywgJExTQV9VTklDT0RFX1NUUklORywgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTG9nb2ZmVGltZScsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdLaWNrT2ZmVGltZScsICRMQVJHRV9JTlRFR0VSLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdQYXNzd29yZExhc3RTZXQnLCAkTEFSR0VfSU5URUdFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUGFzc3dvcmRDYW5DaGFuZ2UnLCAkTEFSR0VfSU5URUdFUiwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUGFzc3dvcmRNdXN0Q2hhbmdlJywgJExBUkdFX0lOVEVHRVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkU0VDVVJJVFlfTE9HT05fU0VTU0lPTl9EQVRBID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgU1RBUlRVUElORk8KICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCgkkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdTVEFSVFVQSU5GTycsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCgkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2NiJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2xwUmVzZXJ2ZWQnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnbHBEZXNrdG9wJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2xwVGl0bGUnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZHdYJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3WScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1hTaXplJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3WVNpemUnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnZHdYQ291bnRDaGFycycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd1lDb3VudENoYXJzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3RmlsbEF0dHJpYnV0ZScsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdkd0ZsYWdzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ3dTaG93V2luZG93JywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2NiUmVzZXJ2ZWQyJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2xwUmVzZXJ2ZWQyJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2hTdGRJbnB1dCcsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdoU3RkT3V0cHV0JywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2hTdGRFcnJvcicsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAoJJFNUQVJUVVBJTkZPID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgUFJPQ0VTU19JTkZPUk1BVElPTgogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKCSRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1BST0NFU1NfSU5GT1JNQVRJT04nLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdoUHJvY2VzcycsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAoJJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdoVGhyZWFkJywgW0ludFB0cl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3UHJvY2Vzc0lkJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2R3VGhyZWFkSWQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKCSRQUk9DRVNTX0lORk9STUFUSU9OID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgVE9LRU5fRUxFVkFUSU9OCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwoJJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnVE9LRU5fRUxFVkFUSU9OJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKCSRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnVG9rZW5Jc0VsZXZhdGVkJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCgkkVE9LRU5fRUxFVkFUSU9OID0gJFR5cGVCdWlsZGVyLkNyZWF0ZVR5cGUoKQoKICAgICNTdHJ1Y3QgTFVJRF9BTkRfQVRUUklCVVRFUwogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0xVSURfQU5EX0FUVFJJQlVURVMnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAxMikKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTHVpZCcsICRMVUlELCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBdHRyaWJ1dGVzJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkTFVJRF9BTkRfQVRUUklCVVRFUyA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCQkKICAgICNTdHJ1Y3QgVE9LRU5fUFJJVklMRUdFUwogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ1RPS0VOX1BSSVZJTEVHRVMnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdLCAxNikKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUHJpdmlsZWdlQ291bnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnUHJpdmlsZWdlcycsICRMVUlEX0FORF9BVFRSSUJVVEVTLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFRPS0VOX1BSSVZJTEVHRVMgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBBQ0VfSEVBREVSCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnQUNFX0hFQURFUicsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FjZVR5cGUnLCBbQnl0ZV0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FjZUZsYWdzJywgW0J5dGVdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2VTaXplJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkQUNFX0hFQURFUiA9ICRUeXBlQnVpbGRlci5DcmVhdGVUeXBlKCkKCiAgICAjU3RydWN0IEFDTAogICAgJEF0dHJpYnV0ZXMgPSAnQXV0b0xheW91dCwgQW5zaUNsYXNzLCBDbGFzcywgUHVibGljLCBTZXF1ZW50aWFsTGF5b3V0LCBTZWFsZWQsIEJlZm9yZUZpZWxkSW5pdCcKICAgICRUeXBlQnVpbGRlciA9ICRNb2R1bGVCdWlsZGVyLkRlZmluZVR5cGUoJ0FDTCcsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FjbFJldmlzaW9uJywgW0J5dGVdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdTYnoxJywgW0J5dGVdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdBY2xTaXplJywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ0FjZUNvdW50JywgW1VJbnQxNl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1NiejInLCBbVUludDE2XSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRBQ0wgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBBQ0VfSEVBREVSCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnQUNDRVNTX0FMTE9XRURfQUNFJywgJEF0dHJpYnV0ZXMsIFtTeXN0ZW0uVmFsdWVUeXBlXSkKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnSGVhZGVyJywgJEFDRV9IRUFERVIsICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ01hc2snLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnU2lkU3RhcnQnLCBbVUludDMyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRBQ0NFU1NfQUxMT1dFRF9BQ0UgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBUUlVTVEVFCiAgICAkQXR0cmlidXRlcyA9ICdBdXRvTGF5b3V0LCBBbnNpQ2xhc3MsIENsYXNzLCBQdWJsaWMsIFNlcXVlbnRpYWxMYXlvdXQsIFNlYWxlZCwgQmVmb3JlRmllbGRJbml0JwogICAgJFR5cGVCdWlsZGVyID0gJE1vZHVsZUJ1aWxkZXIuRGVmaW5lVHlwZSgnVFJVU1RFRScsICRBdHRyaWJ1dGVzLCBbU3lzdGVtLlZhbHVlVHlwZV0pCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ3BNdWx0aXBsZVRydXN0ZWUnLCBbSW50UHRyXSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRUeXBlQnVpbGRlci5EZWZpbmVGaWVsZCgnTXVsdGlwbGVUcnVzdGVlT3BlcmF0aW9uJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RydXN0ZWVGb3JtJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RydXN0ZWVUeXBlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ3B0c3RyTmFtZScsIFtJbnRQdHJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFRSVVNURUUgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCgogICAgI1N0cnVjdCBFWFBMSUNJVF9BQ0NFU1MKICAgICRBdHRyaWJ1dGVzID0gJ0F1dG9MYXlvdXQsIEFuc2lDbGFzcywgQ2xhc3MsIFB1YmxpYywgU2VxdWVudGlhbExheW91dCwgU2VhbGVkLCBCZWZvcmVGaWVsZEluaXQnCiAgICAkVHlwZUJ1aWxkZXIgPSAkTW9kdWxlQnVpbGRlci5EZWZpbmVUeXBlKCdFWFBMSUNJVF9BQ0NFU1MnLCAkQXR0cmlidXRlcywgW1N5c3RlbS5WYWx1ZVR5cGVdKQogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdncmZBY2Nlc3NQZXJtaXNzaW9ucycsIFtVSW50MzJdLCAnUHVibGljJykgfCBPdXQtTnVsbAogICAgJFR5cGVCdWlsZGVyLkRlZmluZUZpZWxkKCdncmZBY2Nlc3NNb2RlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ2dyZkluaGVyaXRhbmNlJywgW1VJbnQzMl0sICdQdWJsaWMnKSB8IE91dC1OdWxsCiAgICAkVHlwZUJ1aWxkZXIuRGVmaW5lRmllbGQoJ1RydXN0ZWUnLCAkVFJVU1RFRSwgJ1B1YmxpYycpIHwgT3V0LU51bGwKICAgICRFWFBMSUNJVF9BQ0NFU1MgPSAkVHlwZUJ1aWxkZXIuQ3JlYXRlVHlwZSgpCiAgICAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCgoKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgICNXaW4zMkZ1bmN0aW9ucwogICAgIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgJE9wZW5Qcm9jZXNzQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgT3BlblByb2Nlc3MKCSRPcGVuUHJvY2Vzc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtVSW50MzJdLCBbQm9vbF0sIFtVSW50MzJdKSAoW0ludFB0cl0pCgkkT3BlblByb2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkT3BlblByb2Nlc3NBZGRyLCAkT3BlblByb2Nlc3NEZWxlZ2F0ZSkKCiAgICAkT3BlblByb2Nlc3NUb2tlbkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIE9wZW5Qcm9jZXNzVG9rZW4KCSRPcGVuUHJvY2Vzc1Rva2VuRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCgkkT3BlblByb2Nlc3NUb2tlbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuUHJvY2Vzc1Rva2VuQWRkciwgJE9wZW5Qcm9jZXNzVG9rZW5EZWxlZ2F0ZSkgICAgCgogICAgJEdldFRva2VuSW5mb3JtYXRpb25BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBHZXRUb2tlbkluZm9ybWF0aW9uCgkkR2V0VG9rZW5JbmZvcm1hdGlvbkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCAkVE9LRU5fSU5GT1JNQVRJT05fQ0xBU1MsIFtJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQoJJEdldFRva2VuSW5mb3JtYXRpb24gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0VG9rZW5JbmZvcm1hdGlvbkFkZHIsICRHZXRUb2tlbkluZm9ybWF0aW9uRGVsZWdhdGUpICAgIAoKICAgICRTZXRUaHJlYWRUb2tlbkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIFNldFRocmVhZFRva2VuCgkkU2V0VGhyZWFkVG9rZW5EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0pIChbQm9vbF0pCgkkU2V0VGhyZWFkVG9rZW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkU2V0VGhyZWFkVG9rZW5BZGRyLCAkU2V0VGhyZWFkVG9rZW5EZWxlZ2F0ZSkgICAgCgogICAgJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgSW1wZXJzb25hdGVMb2dnZWRPblVzZXIKCSRJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlckRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdKSAoW0Jvb2xdKQoJJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyQWRkciwgJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyRGVsZWdhdGUpCgogICAgJFJldmVydFRvU2VsZkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIFJldmVydFRvU2VsZgoJJFJldmVydFRvU2VsZkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKCkgKFtCb29sXSkKCSRSZXZlcnRUb1NlbGYgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkUmV2ZXJ0VG9TZWxmQWRkciwgJFJldmVydFRvU2VsZkRlbGVnYXRlKQoKICAgICRMc2FHZXRMb2dvblNlc3Npb25EYXRhQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBzZWN1cjMyLmRsbCBMc2FHZXRMb2dvblNlc3Npb25EYXRhCgkkTHNhR2V0TG9nb25TZXNzaW9uRGF0YURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbVUludDMyXSkKCSRMc2FHZXRMb2dvblNlc3Npb25EYXRhID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExzYUdldExvZ29uU2Vzc2lvbkRhdGFBZGRyLCAkTHNhR2V0TG9nb25TZXNzaW9uRGF0YURlbGVnYXRlKQoKICAgICRDcmVhdGVQcm9jZXNzV2l0aFRva2VuV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XCgkkQ3JlYXRlUHJvY2Vzc1dpdGhUb2tlbldEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdKSAoW0Jvb2xdKQoJJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XQWRkciwgJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XRGVsZWdhdGUpCgogICAgJG1lbXNldEFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgbXN2Y3J0LmRsbCBtZW1zZXQKCSRtZW1zZXREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludDMyXSwgW0ludFB0cl0pIChbSW50UHRyXSkKCSRtZW1zZXQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkbWVtc2V0QWRkciwgJG1lbXNldERlbGVnYXRlKQoKICAgICREdXBsaWNhdGVUb2tlbkV4QWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgRHVwbGljYXRlVG9rZW5FeAoJJER1cGxpY2F0ZVRva2VuRXhEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKCSREdXBsaWNhdGVUb2tlbkV4ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJER1cGxpY2F0ZVRva2VuRXhBZGRyLCAkRHVwbGljYXRlVG9rZW5FeERlbGVnYXRlKQoKICAgICRMb29rdXBBY2NvdW50U2lkV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIExvb2t1cEFjY291bnRTaWRXCgkkTG9va3VwQWNjb3VudFNpZFdEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCksIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCksIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKCSRMb29rdXBBY2NvdW50U2lkVyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMb29rdXBBY2NvdW50U2lkV0FkZHIsICRMb29rdXBBY2NvdW50U2lkV0RlbGVnYXRlKQoKICAgICRDbG9zZUhhbmRsZUFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIENsb3NlSGFuZGxlCgkkQ2xvc2VIYW5kbGVEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSkgKFtCb29sXSkKCSRDbG9zZUhhbmRsZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRDbG9zZUhhbmRsZUFkZHIsICRDbG9zZUhhbmRsZURlbGVnYXRlKQoKICAgICRMc2FGcmVlUmV0dXJuQnVmZmVyQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBzZWN1cjMyLmRsbCBMc2FGcmVlUmV0dXJuQnVmZmVyCgkkTHNhRnJlZVJldHVybkJ1ZmZlckRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdKSAoW1VJbnQzMl0pCgkkTHNhRnJlZVJldHVybkJ1ZmZlciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMc2FGcmVlUmV0dXJuQnVmZmVyQWRkciwgJExzYUZyZWVSZXR1cm5CdWZmZXJEZWxlZ2F0ZSkKCiAgICAkT3BlblRocmVhZEFkZHIgPSBHZXQtUHJvY0FkZHJlc3Mga2VybmVsMzIuZGxsIE9wZW5UaHJlYWQKCSRPcGVuVGhyZWFkRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1VJbnQzMl0sIFtCb29sXSwgW1VJbnQzMl0pIChbSW50UHRyXSkKCSRPcGVuVGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5UaHJlYWRBZGRyLCAkT3BlblRocmVhZERlbGVnYXRlKQoKICAgICRPcGVuVGhyZWFkVG9rZW5BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBPcGVuVGhyZWFkVG9rZW4KCSRPcGVuVGhyZWFkVG9rZW5EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtCb29sXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQoJJE9wZW5UaHJlYWRUb2tlbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuVGhyZWFkVG9rZW5BZGRyLCAkT3BlblRocmVhZFRva2VuRGVsZWdhdGUpCgogICAgJENyZWF0ZVByb2Nlc3NBc1VzZXJXQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgQ3JlYXRlUHJvY2Vzc0FzVXNlclcKCSRDcmVhdGVQcm9jZXNzQXNVc2VyV0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0Jvb2xdLCBbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0pIChbQm9vbF0pCgkkQ3JlYXRlUHJvY2Vzc0FzVXNlclcgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQ3JlYXRlUHJvY2Vzc0FzVXNlcldBZGRyLCAkQ3JlYXRlUHJvY2Vzc0FzVXNlcldEZWxlZ2F0ZSkKCiAgICAkT3BlbldpbmRvd1N0YXRpb25XQWRkciA9IEdldC1Qcm9jQWRkcmVzcyB1c2VyMzIuZGxsIE9wZW5XaW5kb3dTdGF0aW9uVwogICAgJE9wZW5XaW5kb3dTdGF0aW9uV0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0sIFtVSW50MzJdKSAoW0ludFB0cl0pCiAgICAkT3BlbldpbmRvd1N0YXRpb25XID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJE9wZW5XaW5kb3dTdGF0aW9uV0FkZHIsICRPcGVuV2luZG93U3RhdGlvbldEZWxlZ2F0ZSkKCiAgICAkT3BlbkRlc2t0b3BBQWRkciA9IEdldC1Qcm9jQWRkcmVzcyB1c2VyMzIuZGxsIE9wZW5EZXNrdG9wQQogICAgJE9wZW5EZXNrdG9wQURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtTdHJpbmddLCBbVUludDMyXSwgW0Jvb2xdLCBbVUludDMyXSkgKFtJbnRQdHJdKQogICAgJE9wZW5EZXNrdG9wQSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRPcGVuRGVza3RvcEFBZGRyLCAkT3BlbkRlc2t0b3BBRGVsZWdhdGUpCgogICAgJEltcGVyc29uYXRlU2VsZkFkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIEltcGVyc29uYXRlU2VsZgogICAgJEltcGVyc29uYXRlU2VsZkRlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnQzMl0pIChbQm9vbF0pCiAgICAkSW1wZXJzb25hdGVTZWxmID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEltcGVyc29uYXRlU2VsZkFkZHIsICRJbXBlcnNvbmF0ZVNlbGZEZWxlZ2F0ZSkKCiAgICAkTG9va3VwUHJpdmlsZWdlVmFsdWVBZGRyID0gR2V0LVByb2NBZGRyZXNzIEFkdmFwaTMyLmRsbCBMb29rdXBQcml2aWxlZ2VWYWx1ZUEKICAgICRMb29rdXBQcml2aWxlZ2VWYWx1ZURlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtTdHJpbmddLCBbU3RyaW5nXSwgJExVSUQuTWFrZUJ5UmVmVHlwZSgpKSAoW0Jvb2xdKQogICAgJExvb2t1cFByaXZpbGVnZVZhbHVlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJExvb2t1cFByaXZpbGVnZVZhbHVlQWRkciwgJExvb2t1cFByaXZpbGVnZVZhbHVlRGVsZWdhdGUpCgogICAgJEFkanVzdFRva2VuUHJpdmlsZWdlc0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgQWR2YXBpMzIuZGxsIEFkanVzdFRva2VuUHJpdmlsZWdlcwogICAgJEFkanVzdFRva2VuUHJpdmlsZWdlc0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbQm9vbF0sICRUT0tFTl9QUklWSUxFR0VTLk1ha2VCeVJlZlR5cGUoKSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSkgKFtCb29sXSkKICAgICRBZGp1c3RUb2tlblByaXZpbGVnZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzQWRkciwgJEFkanVzdFRva2VuUHJpdmlsZWdlc0RlbGVnYXRlKQoKICAgICRHZXRDdXJyZW50VGhyZWFkQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgR2V0Q3VycmVudFRocmVhZAogICAgJEdldEN1cnJlbnRUaHJlYWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQCgpIChbSW50UHRyXSkKICAgICRHZXRDdXJyZW50VGhyZWFkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEdldEN1cnJlbnRUaHJlYWRBZGRyLCAkR2V0Q3VycmVudFRocmVhZERlbGVnYXRlKQoKICAgICRHZXRTZWN1cml0eUluZm9BZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBHZXRTZWN1cml0eUluZm8KICAgICRHZXRTZWN1cml0eUluZm9EZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCksIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCksIFtJbnRQdHJdLk1ha2VCeVJlZlR5cGUoKSkgKFtVSW50MzJdKQogICAgJEdldFNlY3VyaXR5SW5mbyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRHZXRTZWN1cml0eUluZm9BZGRyLCAkR2V0U2VjdXJpdHlJbmZvRGVsZWdhdGUpCgogICAgJFNldFNlY3VyaXR5SW5mb0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIFNldFNlY3VyaXR5SW5mbwogICAgJFNldFNlY3VyaXR5SW5mb0RlbGVnYXRlID0gR2V0LURlbGVnYXRlVHlwZSBAKFtJbnRQdHJdLCBbVUludDMyXSwgW1VJbnQzMl0sIFtJbnRQdHJdLCBbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdKSAoW1VJbnQzMl0pCiAgICAkU2V0U2VjdXJpdHlJbmZvID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJFNldFNlY3VyaXR5SW5mb0FkZHIsICRTZXRTZWN1cml0eUluZm9EZWxlZ2F0ZSkKCiAgICAkR2V0QWNlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgR2V0QWNlCiAgICAkR2V0QWNlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0sIFtVSW50MzJdLCBbSW50UHRyXS5NYWtlQnlSZWZUeXBlKCkpIChbSW50UHRyXSkKICAgICRHZXRBY2UgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkR2V0QWNlQWRkciwgJEdldEFjZURlbGVnYXRlKQoKICAgICRMb29rdXBBY2NvdW50U2lkV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIExvb2t1cEFjY291bnRTaWRXCiAgICAkTG9va3VwQWNjb3VudFNpZFdEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCksIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCksIFtVSW50MzJdLk1ha2VCeVJlZlR5cGUoKSkgKFtCb29sXSkKICAgICRMb29rdXBBY2NvdW50U2lkVyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRMb29rdXBBY2NvdW50U2lkV0FkZHIsICRMb29rdXBBY2NvdW50U2lkV0RlbGVnYXRlKQoKICAgICRBZGRBY2Nlc3NBbGxvd2VkQWNlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBhZHZhcGkzMi5kbGwgQWRkQWNjZXNzQWxsb3dlZEFjZQogICAgJEFkZEFjY2Vzc0FsbG93ZWRBY2VEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW1VJbnQzMl0sIFtVSW50MzJdLCBbSW50UHRyXSkgKFtCb29sXSkKICAgICRBZGRBY2Nlc3NBbGxvd2VkQWNlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJEFkZEFjY2Vzc0FsbG93ZWRBY2VBZGRyLCAkQWRkQWNjZXNzQWxsb3dlZEFjZURlbGVnYXRlKQoKICAgICRDcmVhdGVXZWxsS25vd25TaWRBZGRyID0gR2V0LVByb2NBZGRyZXNzIGFkdmFwaTMyLmRsbCBDcmVhdGVXZWxsS25vd25TaWQKICAgICRDcmVhdGVXZWxsS25vd25TaWREZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbVUludDMyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAkQ3JlYXRlV2VsbEtub3duU2lkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0RGVsZWdhdGVGb3JGdW5jdGlvblBvaW50ZXIoJENyZWF0ZVdlbGxLbm93blNpZEFkZHIsICRDcmVhdGVXZWxsS25vd25TaWREZWxlZ2F0ZSkKCiAgICAkU2V0RW50cmllc0luQWNsV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIFNldEVudHJpZXNJbkFjbFcKICAgICRTZXRFbnRyaWVzSW5BY2xXRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW1VJbnQzMl0sICRFWFBMSUNJVF9BQ0NFU1MuTWFrZUJ5UmVmVHlwZSgpLCBbSW50UHRyXSwgW0ludFB0cl0uTWFrZUJ5UmVmVHlwZSgpKSAoW1VJbnQzMl0pCiAgICAkU2V0RW50cmllc0luQWNsVyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldERlbGVnYXRlRm9yRnVuY3Rpb25Qb2ludGVyKCRTZXRFbnRyaWVzSW5BY2xXQWRkciwgJFNldEVudHJpZXNJbkFjbFdEZWxlZ2F0ZSkKCiAgICAkTG9jYWxGcmVlQWRkciA9IEdldC1Qcm9jQWRkcmVzcyBrZXJuZWwzMi5kbGwgTG9jYWxGcmVlCiAgICAkTG9jYWxGcmVlRGVsZWdhdGUgPSBHZXQtRGVsZWdhdGVUeXBlIEAoW0ludFB0cl0pIChbSW50UHRyXSkKICAgICRMb2NhbEZyZWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9jYWxGcmVlQWRkciwgJExvY2FsRnJlZURlbGVnYXRlKQoKICAgICRMb29rdXBQcml2aWxlZ2VOYW1lV0FkZHIgPSBHZXQtUHJvY0FkZHJlc3MgYWR2YXBpMzIuZGxsIExvb2t1cFByaXZpbGVnZU5hbWVXCiAgICAkTG9va3VwUHJpdmlsZWdlTmFtZVdEZWxlZ2F0ZSA9IEdldC1EZWxlZ2F0ZVR5cGUgQChbSW50UHRyXSwgW0ludFB0cl0sIFtJbnRQdHJdLCBbVUludDMyXS5NYWtlQnlSZWZUeXBlKCkpIChbQm9vbF0pCiAgICAkTG9va3VwUHJpdmlsZWdlTmFtZVcgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXREZWxlZ2F0ZUZvckZ1bmN0aW9uUG9pbnRlcigkTG9va3VwUHJpdmlsZWdlTmFtZVdBZGRyLCAkTG9va3VwUHJpdmlsZWdlTmFtZVdEZWxlZ2F0ZSkKICAgICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKCgogICAgI1VzZWQgdG8gYWRkIDY0Yml0IG1lbW9yeSBhZGRyZXNzZXMKICAgIEZ1bmN0aW9uIEFkZC1TaWduZWRJbnRBc1Vuc2lnbmVkCgl7CgkJUGFyYW0oCgkJW1BhcmFtZXRlcihQb3NpdGlvbiA9IDAsIE1hbmRhdG9yeSA9ICR0cnVlKV0KCQlbSW50NjRdCgkJJFZhbHVlMSwKCQkKCQlbUGFyYW1ldGVyKFBvc2l0aW9uID0gMSwgTWFuZGF0b3J5ID0gJHRydWUpXQoJCVtJbnQ2NF0KCQkkVmFsdWUyCgkJKQoJCQoJCVtCeXRlW11dJFZhbHVlMUJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKCRWYWx1ZTEpCgkJW0J5dGVbXV0kVmFsdWUyQnl0ZXMgPSBbQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJFZhbHVlMikKCQlbQnl0ZVtdXSRGaW5hbEJ5dGVzID0gW0JpdENvbnZlcnRlcl06OkdldEJ5dGVzKFtVSW50NjRdMCkKCgkJaWYgKCRWYWx1ZTFCeXRlcy5Db3VudCAtZXEgJFZhbHVlMkJ5dGVzLkNvdW50KQoJCXsKCQkJJENhcnJ5T3ZlciA9IDAKCQkJZm9yICgkaSA9IDA7ICRpIC1sdCAkVmFsdWUxQnl0ZXMuQ291bnQ7ICRpKyspCgkJCXsKCQkJCSNBZGQgYnl0ZXMKCQkJCVtVSW50MTZdJFN1bSA9ICRWYWx1ZTFCeXRlc1skaV0gKyAkVmFsdWUyQnl0ZXNbJGldICsgJENhcnJ5T3ZlcgoKCQkJCSRGaW5hbEJ5dGVzWyRpXSA9ICRTdW0gLWJhbmQgMHgwMEZGCgkJCQkKCQkJCWlmICgoJFN1bSAtYmFuZCAweEZGMDApIC1lcSAweDEwMCkKCQkJCXsKCQkJCQkkQ2FycnlPdmVyID0gMQoJCQkJfQoJCQkJZWxzZQoJCQkJewoJCQkJCSRDYXJyeU92ZXIgPSAwCgkJCQl9CgkJCX0KCQl9CgkJZWxzZQoJCXsKCQkJVGhyb3cgIkNhbm5vdCBhZGQgYnl0ZWFycmF5cyBvZiBkaWZmZXJlbnQgc2l6ZXMiCgkJfQoJCQoJCXJldHVybiBbQml0Q29udmVydGVyXTo6VG9JbnQ2NCgkRmluYWxCeXRlcywgMCkKCX0KCgogICAgI0VuYWJsZSBTZUFzc2lnblByaW1hcnlUb2tlblByaXZpbGVnZSwgbmVlZGVkIHRvIHF1ZXJ5IHNlY3VyaXR5IGluZm9ybWF0aW9uIGZvciBkZXNrdG9wIERBQ0wKICAgIGZ1bmN0aW9uIEVuYWJsZS1TZUFzc2lnblByaW1hcnlUb2tlblByaXZpbGVnZQogICAgewkKCSAgICBbSW50UHRyXSRUaHJlYWRIYW5kbGUgPSAkR2V0Q3VycmVudFRocmVhZC5JbnZva2UoKQoJICAgIGlmICgkVGhyZWFkSGFuZGxlIC1lcSBbSW50UHRyXTo6WmVybykKCSAgICB7CgkJICAgIFRocm93ICJVbmFibGUgdG8gZ2V0IHRoZSBoYW5kbGUgdG8gdGhlIGN1cnJlbnQgdGhyZWFkIgoJICAgIH0KCQkKCSAgICBbSW50UHRyXSRUaHJlYWRUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCgkgICAgW0Jvb2xdJFJlc3VsdCA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQoKCSAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQoJICAgIHsKCQkgICAgaWYgKCRFcnJvckNvZGUgLWVxICRXaW4zMkNvbnN0YW50cy5FUlJPUl9OT19UT0tFTikKCQkgICAgewoJCQkgICAgJFJlc3VsdCA9ICRJbXBlcnNvbmF0ZVNlbGYuSW52b2tlKCRXaW4zMkNvbnN0YW50cy5TRUNVUklUWV9ERUxFR0FUSU9OKQoJCQkgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKCQkJICAgIHsKCQkJCSAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKCQkJICAgIH0KCQkJCQoJCQkgICAgJFJlc3VsdCA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRUaHJlYWRIYW5kbGUsICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BREpVU1RfUFJJVklMRUdFUywgJGZhbHNlLCBbUmVmXSRUaHJlYWRUb2tlbikKCQkJICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCgkJCSAgICB7CgkJCQkgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCgkJCSAgICB9CgkJICAgIH0KCQkgICAgZWxzZQoJCSAgICB7CgkJCSAgICBUaHJvdyAoW0NvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uXSAkRXJyb3JDb2RlKQoJCSAgICB9CgkgICAgfQoKICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRUaHJlYWRIYW5kbGUpIHwgT3V0LU51bGwKCQogICAgICAgICRMdWlkU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kTFVJRCkKICAgICAgICAkTHVpZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkTHVpZFNpemUpCiAgICAgICAgJEx1aWRPYmplY3QgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTHVpZFB0ciwgW1R5cGVdJExVSUQpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJEx1aWRQdHIpCgoJICAgICRSZXN1bHQgPSAkTG9va3VwUHJpdmlsZWdlVmFsdWUuSW52b2tlKCRudWxsLCAiU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UiLCBbUmVmXSAkTHVpZE9iamVjdCkKCgkgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKCSAgICB7CgkJICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQoJICAgIH0KCiAgICAgICAgW1VJbnQzMl0kTHVpZEFuZEF0dHJpYnV0ZXNTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRMVUlEX0FORF9BVFRSSUJVVEVTKQogICAgICAgICRMdWlkQW5kQXR0cmlidXRlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkTHVpZEFuZEF0dHJpYnV0ZXNTaXplKQogICAgICAgICRMdWlkQW5kQXR0cmlidXRlcyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMdWlkQW5kQXR0cmlidXRlc1B0ciwgW1R5cGVdJExVSURfQU5EX0FUVFJJQlVURVMpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJEx1aWRBbmRBdHRyaWJ1dGVzUHRyKQoKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXMuTHVpZCA9ICRMdWlkT2JqZWN0CiAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVzLkF0dHJpYnV0ZXMgPSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQKCiAgICAgICAgW1VJbnQzMl0kVG9rZW5Qcml2U2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kVE9LRU5fUFJJVklMRUdFUykKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb2tlblByaXZTaXplKQogICAgICAgICRUb2tlblByaXZpbGVnZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5Qcml2aWxlZ2VzUHRyLCBbVHlwZV0kVE9LRU5fUFJJVklMRUdFUykKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5Qcml2aWxlZ2VzUHRyKQoJICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlQ291bnQgPSAxCgkgICAgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VzID0gJEx1aWRBbmRBdHRyaWJ1dGVzCgogICAgICAgICRHbG9iYWw6VG9rZW5Qcml2ID0gJFRva2VuUHJpdmlsZWdlcwoKCSAgICAkUmVzdWx0ID0gJEFkanVzdFRva2VuUHJpdmlsZWdlcy5JbnZva2UoJFRocmVhZFRva2VuLCAkZmFsc2UsIFtSZWZdICRUb2tlblByaXZpbGVnZXMsICRUb2tlblByaXZTaXplLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8pCgkgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKCSAgICB7CiAgICAgICAgICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQoJICAgIH0KCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkVGhyZWFkVG9rZW4pIHwgT3V0LU51bGwKICAgIH0KCgogICAgI0VuYWJsZSBTZVNlY3VyaXR5UHJpdmlsZWdlLCBuZWVkZWQgdG8gcXVlcnkgc2VjdXJpdHkgaW5mb3JtYXRpb24gZm9yIGRlc2t0b3AgREFDTAogICAgZnVuY3Rpb24gRW5hYmxlLVByaXZpbGVnZQogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKCldCiAgICAgICAgICAgIFtWYWxpZGF0ZVNldCgiU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UiLCAiU2VBdWRpdFByaXZpbGVnZSIsICJTZUJhY2t1cFByaXZpbGVnZSIsICJTZUNoYW5nZU5vdGlmeVByaXZpbGVnZSIsICJTZUNyZWF0ZUdsb2JhbFByaXZpbGVnZSIsCiAgICAgICAgICAgICAgICAiU2VDcmVhdGVQYWdlZmlsZVByaXZpbGVnZSIsICJTZUNyZWF0ZVBlcm1hbmVudFByaXZpbGVnZSIsICJTZUNyZWF0ZVN5bWJvbGljTGlua1ByaXZpbGVnZSIsICJTZUNyZWF0ZVRva2VuUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZURlYnVnUHJpdmlsZWdlIiwgIlNlRW5hYmxlRGVsZWdhdGlvblByaXZpbGVnZSIsICJTZUltcGVyc29uYXRlUHJpdmlsZWdlIiwgIlNlSW5jcmVhc2VCYXNlUHJpb3JpdHlQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlSW5jcmVhc2VRdW90YVByaXZpbGVnZSIsICJTZUluY3JlYXNlV29ya2luZ1NldFByaXZpbGVnZSIsICJTZUxvYWREcml2ZXJQcml2aWxlZ2UiLCAiU2VMb2NrTWVtb3J5UHJpdmlsZWdlIiwgIlNlTWFjaGluZUFjY291bnRQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlTWFuYWdlVm9sdW1lUHJpdmlsZWdlIiwgIlNlUHJvZmlsZVNpbmdsZVByb2Nlc3NQcml2aWxlZ2UiLCAiU2VSZWxhYmVsUHJpdmlsZWdlIiwgIlNlUmVtb3RlU2h1dGRvd25Qcml2aWxlZ2UiLCAiU2VSZXN0b3JlUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZVNlY3VyaXR5UHJpdmlsZWdlIiwgIlNlU2h1dGRvd25Qcml2aWxlZ2UiLCAiU2VTeW5jQWdlbnRQcml2aWxlZ2UiLCAiU2VTeXN0ZW1FbnZpcm9ubWVudFByaXZpbGVnZSIsICJTZVN5c3RlbVByb2ZpbGVQcml2aWxlZ2UiLAogICAgICAgICAgICAgICAgIlNlU3lzdGVtdGltZVByaXZpbGVnZSIsICJTZVRha2VPd25lcnNoaXBQcml2aWxlZ2UiLCAiU2VUY2JQcml2aWxlZ2UiLCAiU2VUaW1lWm9uZVByaXZpbGVnZSIsICJTZVRydXN0ZWRDcmVkTWFuQWNjZXNzUHJpdmlsZWdlIiwKICAgICAgICAgICAgICAgICJTZVVuZG9ja1ByaXZpbGVnZSIsICJTZVVuc29saWNpdGVkSW5wdXRQcml2aWxlZ2UiKV0KICAgICAgICAgICAgW1N0cmluZ10KICAgICAgICAgICAgJFByaXZpbGVnZQogICAgICAgICkKCgkgICAgW0ludFB0cl0kVGhyZWFkSGFuZGxlID0gJEdldEN1cnJlbnRUaHJlYWQuSW52b2tlKCkKCSAgICBpZiAoJFRocmVhZEhhbmRsZSAtZXEgW0ludFB0cl06Olplcm8pCgkgICAgewoJCSAgICBUaHJvdyAiVW5hYmxlIHRvIGdldCB0aGUgaGFuZGxlIHRvIHRoZSBjdXJyZW50IHRocmVhZCIKCSAgICB9CgkJCgkgICAgW0ludFB0cl0kVGhyZWFkVG9rZW4gPSBbSW50UHRyXTo6WmVybwoJICAgIFtCb29sXSRSZXN1bHQgPSAkT3BlblRocmVhZFRva2VuLkludm9rZSgkVGhyZWFkSGFuZGxlLCAkV2luMzJDb25zdGFudHMuVE9LRU5fUVVFUlkgLWJvciAkV2luMzJDb25zdGFudHMuVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMsICRmYWxzZSwgW1JlZl0kVGhyZWFkVG9rZW4pCiAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKCgkgICAgaWYgKCRSZXN1bHQgLWVxICRmYWxzZSkKCSAgICB7CgkJICAgIGlmICgkRXJyb3JDb2RlIC1lcSAkV2luMzJDb25zdGFudHMuRVJST1JfTk9fVE9LRU4pCgkJICAgIHsKCQkJICAgICRSZXN1bHQgPSAkSW1wZXJzb25hdGVTZWxmLkludm9rZSgkV2luMzJDb25zdGFudHMuU0VDVVJJVFlfREVMRUdBVElPTikKCQkJICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCgkJCSAgICB7CgkJCQkgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCgkJCSAgICB9CgkJCQkKCQkJICAgICRSZXN1bHQgPSAkT3BlblRocmVhZFRva2VuLkludm9rZSgkVGhyZWFkSGFuZGxlLCAkV2luMzJDb25zdGFudHMuVE9LRU5fUVVFUlkgLWJvciAkV2luMzJDb25zdGFudHMuVE9LRU5fQURKVVNUX1BSSVZJTEVHRVMsICRmYWxzZSwgW1JlZl0kVGhyZWFkVG9rZW4pCgkJCSAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQoJCQkgICAgewoJCQkJICAgIFRocm93IChOZXctT2JqZWN0IENvbXBvbmVudE1vZGVsLldpbjMyRXhjZXB0aW9uKQoJCQkgICAgfQoJCSAgICB9CgkJICAgIGVsc2UKCQkgICAgewoJCQkgICAgVGhyb3cgKFtDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbl0gJEVycm9yQ29kZSkKCQkgICAgfQoJICAgIH0KCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkVGhyZWFkSGFuZGxlKSB8IE91dC1OdWxsCgkKICAgICAgICAkTHVpZFNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSUQpCiAgICAgICAgJEx1aWRQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJEx1aWRTaXplKQogICAgICAgICRMdWlkT2JqZWN0ID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJEx1aWRQdHIsIFtUeXBlXSRMVUlEKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkUHRyKQoKCSAgICAkUmVzdWx0ID0gJExvb2t1cFByaXZpbGVnZVZhbHVlLkludm9rZSgkbnVsbCwgJFByaXZpbGVnZSwgW1JlZl0gJEx1aWRPYmplY3QpCgoJICAgIGlmICgkUmVzdWx0IC1lcSAkZmFsc2UpCgkgICAgewoJCSAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKCSAgICB9CgogICAgICAgIFtVSW50MzJdJEx1aWRBbmRBdHRyaWJ1dGVzU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kTFVJRF9BTkRfQVRUUklCVVRFUykKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJEx1aWRBbmRBdHRyaWJ1dGVzU2l6ZSkKICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZXMgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkTHVpZEFuZEF0dHJpYnV0ZXNQdHIsIFtUeXBlXSRMVUlEX0FORF9BVFRSSUJVVEVTKQogICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkQW5kQXR0cmlidXRlc1B0cikKCiAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVzLkx1aWQgPSAkTHVpZE9iamVjdAogICAgICAgICRMdWlkQW5kQXR0cmlidXRlcy5BdHRyaWJ1dGVzID0gJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVECgogICAgICAgIFtVSW50MzJdJFRva2VuUHJpdlNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgJFRva2VuUHJpdmlsZWdlc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5Qcml2U2l6ZSkKICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc1B0ciwgW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFRva2VuUHJpdmlsZWdlc1B0cikKCSAgICAkVG9rZW5Qcml2aWxlZ2VzLlByaXZpbGVnZUNvdW50ID0gMQoJICAgICRUb2tlblByaXZpbGVnZXMuUHJpdmlsZWdlcyA9ICRMdWlkQW5kQXR0cmlidXRlcwoKICAgICAgICAkR2xvYmFsOlRva2VuUHJpdiA9ICRUb2tlblByaXZpbGVnZXMKCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiQXR0ZW1wdGluZyB0byBlbmFibGUgcHJpdmlsZWdlOiAkUHJpdmlsZWdlIgoJICAgICRSZXN1bHQgPSAkQWRqdXN0VG9rZW5Qcml2aWxlZ2VzLkludm9rZSgkVGhyZWFkVG9rZW4sICRmYWxzZSwgW1JlZl0gJFRva2VuUHJpdmlsZWdlcywgJFRva2VuUHJpdlNpemUsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybykKCSAgICBpZiAoJFJlc3VsdCAtZXEgJGZhbHNlKQoJICAgIHsKICAgICAgICAgICAgVGhyb3cgKE5ldy1PYmplY3QgQ29tcG9uZW50TW9kZWwuV2luMzJFeGNlcHRpb24pCgkgICAgfQoKICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRUaHJlYWRUb2tlbikgfCBPdXQtTnVsbAogICAgICAgIFdyaXRlLVZlcmJvc2UgIkVuYWJsZWQgcHJpdmlsZWdlOiAkUHJpdmlsZWdlIgogICAgfQoKCiAgICAjQ2hhbmdlIHRoZSBBQ0wgb2YgdGhlIFdpbmRvd1N0YXRpb24gYW5kIERlc2t0b3AKICAgIGZ1bmN0aW9uIFNldC1EZXNrdG9wQUNMcwogICAgewogICAgICAgIEVuYWJsZS1Qcml2aWxlZ2UgLVByaXZpbGVnZSBTZVNlY3VyaXR5UHJpdmlsZWdlCgogICAgICAgICNDaGFuZ2UgdGhlIHByaXZpbGVnZSBmb3IgdGhlIGN1cnJlbnQgd2luZG93IHN0YXRpb24gdG8gYWxsb3cgZnVsbCBwcml2aWxlZ2UgZm9yIGFsbCB1c2VycwogICAgICAgICRXaW5kb3dTdGF0aW9uU3RyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCJXaW5TdGEwIikKICAgICAgICAkaFdpbnN0YSA9ICRPcGVuV2luZG93U3RhdGlvblcuSW52b2tlKCRXaW5kb3dTdGF0aW9uU3RyLCAkZmFsc2UsICRXaW4zMkNvbnN0YW50cy5BQ0NFU1NfU1lTVEVNX1NFQ1VSSVRZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlJFQURfQ09OVFJPTCAtYm9yICRXaW4zMkNvbnN0YW50cy5XUklURV9EQUMpCgogICAgICAgIGlmICgkaFdpbnN0YSAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICB9CgogICAgICAgIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lIC1oT2JqZWN0ICRoV2luc3RhCiAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkaFdpbnN0YSkgfCBPdXQtTnVsbAoKICAgICAgICAjQ2hhbmdlIHRoZSBwcml2aWxlZ2UgZm9yIHRoZSBjdXJyZW50IGRlc2t0b3AgdG8gYWxsb3cgZnVsbCBwcml2aWxlZ2UgZm9yIGFsbCB1c2VycwogICAgICAgICRoRGVza3RvcCA9ICRPcGVuRGVza3RvcEEuSW52b2tlKCJkZWZhdWx0IiwgMCwgJGZhbHNlLCAkV2luMzJDb25zdGFudHMuREVTS1RPUF9HRU5FUklDX0FMTCAtYm9yICRXaW4zMkNvbnN0YW50cy5XUklURV9EQUMpCiAgICAgICAgaWYgKCRoRGVza3RvcCAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICB9CgogICAgICAgIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lIC1oT2JqZWN0ICRoRGVza3RvcAogICAgICAgICRDbG9zZUhhbmRsZS5JbnZva2UoJGhEZXNrdG9wKSB8IE91dC1OdWxsCiAgICB9CgoKICAgIGZ1bmN0aW9uIFNldC1EZXNrdG9wQUNMVG9BbGxvd0V2ZXJ5b25lCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtJbnRQdHJdJGhPYmplY3QKICAgICAgICAgICAgKQoKICAgICAgICBbSW50UHRyXSRwcFNpZE93bmVyID0gW0ludFB0cl06Olplcm8KICAgICAgICBbSW50UHRyXSRwcHNpZEdyb3VwID0gW0ludFB0cl06Olplcm8KICAgICAgICBbSW50UHRyXSRwcERhY2wgPSBbSW50UHRyXTo6WmVybwogICAgICAgIFtJbnRQdHJdJHBwU2FjbCA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgW0ludFB0cl0kcHBTZWN1cml0eURlc2NyaXB0b3IgPSBbSW50UHRyXTo6WmVybwogICAgICAgICMweDcgaXMgd2luZG93IHN0YXRpb24sIGNoYW5nZSBmb3Igb3RoZXIgdHlwZXMKICAgICAgICAkcmV0VmFsID0gJEdldFNlY3VyaXR5SW5mby5JbnZva2UoJGhPYmplY3QsIDB4NywgJFdpbjMyQ29uc3RhbnRzLkRBQ0xfU0VDVVJJVFlfSU5GT1JNQVRJT04sIFtSZWZdJHBwU2lkT3duZXIsIFtSZWZdJHBwU2lkR3JvdXAsIFtSZWZdJHBwRGFjbCwgW1JlZl0kcHBTYWNsLCBbUmVmXSRwcFNlY3VyaXR5RGVzY3JpcHRvcikKICAgICAgICBpZiAoJHJldFZhbCAtbmUgMCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJVbmFibGUgdG8gY2FsbCBHZXRTZWN1cml0eUluZm8uIEVycm9yQ29kZTogJHJldFZhbCIKICAgICAgICB9CgogICAgICAgIGlmICgkcHBEYWNsIC1uZSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICRBY2xPYmogPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkcHBEYWNsLCBbVHlwZV0kQUNMKQoKICAgICAgICAgICAgI0FkZCBhbGwgdXNlcnMgdG8gYWNsCiAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMjAwMAogICAgICAgICAgICAkcEFsbFVzZXJzU2lkID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRSZWFsU2l6ZSkKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkQ3JlYXRlV2VsbEtub3duU2lkLkludm9rZSgxLCBbSW50UHRyXTo6WmVybywgJHBBbGxVc2Vyc1NpZCwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBUaHJvdyAoTmV3LU9iamVjdCBDb21wb25lbnRNb2RlbC5XaW4zMkV4Y2VwdGlvbikKICAgICAgICAgICAgfQoKICAgICAgICAgICAgI0ZvciB1c2VyICJFdmVyeW9uZSIKICAgICAgICAgICAgJFRydXN0ZWVTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRUUlVTVEVFKQogICAgICAgICAgICAkVHJ1c3RlZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVHJ1c3RlZVNpemUpCiAgICAgICAgICAgICRUcnVzdGVlT2JqID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRydXN0ZWVQdHIsIFtUeXBlXSRUUlVTVEVFKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVHJ1c3RlZVB0cikKICAgICAgICAgICAgJFRydXN0ZWVPYmoucE11bHRpcGxlVHJ1c3RlZSA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRUcnVzdGVlT2JqLk11bHRpcGxlVHJ1c3RlZU9wZXJhdGlvbiA9IDAKICAgICAgICAgICAgJFRydXN0ZWVPYmouVHJ1c3RlZUZvcm0gPSAkV2luMzJDb25zdGFudHMuVFJVU1RFRV9JU19TSUQKICAgICAgICAgICAgJFRydXN0ZWVPYmouVHJ1c3RlZVR5cGUgPSAkV2luMzJDb25zdGFudHMuVFJVU1RFRV9JU19XRUxMX0tOT1dOX0dST1VQCiAgICAgICAgICAgICRUcnVzdGVlT2JqLnB0c3RyTmFtZSA9ICRwQWxsVXNlcnNTaWQKCiAgICAgICAgICAgICNHaXZlIGZ1bGwgcGVybWlzc2lvbgogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3NTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRFWFBMSUNJVF9BQ0NFU1MpCiAgICAgICAgICAgICRFeHBsaWNpdEFjY2Vzc1B0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkRXhwbGljaXRBY2Nlc3NTaXplKQogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkRXhwbGljaXRBY2Nlc3NQdHIsIFtUeXBlXSRFWFBMSUNJVF9BQ0NFU1MpCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRFeHBsaWNpdEFjY2Vzc1B0cikKICAgICAgICAgICAgJEV4cGxpY2l0QWNjZXNzLmdyZkFjY2Vzc1Blcm1pc3Npb25zID0gMHhmMDNmZgogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MuZ3JmQWNjZXNzTW9kZSA9ICRXaW4zMmNvbnN0YW50cy5HUkFOVF9BQ0NFU1MKICAgICAgICAgICAgJEV4cGxpY2l0QWNjZXNzLmdyZkluaGVyaXRhbmNlID0gJFdpbjMyQ29uc3RhbnRzLk9CSkVDVF9JTkhFUklUX0FDRQogICAgICAgICAgICAkRXhwbGljaXRBY2Nlc3MuVHJ1c3RlZSA9ICRUcnVzdGVlT2JqCgogICAgICAgICAgICBbSW50UHRyXSROZXdEYWNsID0gW0ludFB0cl06Olplcm8KCiAgICAgICAgICAgICRSZXRWYWwgPSAkU2V0RW50cmllc0luQWNsVy5JbnZva2UoMSwgW1JlZl0kRXhwbGljaXRBY2Nlc3MsICRwcERhY2wsIFtSZWZdJE5ld0RhY2wpCiAgICAgICAgICAgIGlmICgkUmV0VmFsIC1uZSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiRXJyb3IgY2FsbGluZyBTZXRFbnRyaWVzSW5BY2xXOiAkUmV0VmFsIgogICAgICAgICAgICB9CgogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkcEFsbFVzZXJzU2lkKQoKICAgICAgICAgICAgaWYgKCROZXdEYWNsIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgIk5ldyBEQUNMIGlzIG51bGwiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICMweDcgaXMgd2luZG93IHN0YXRpb24sIGNoYW5nZSBmb3Igb3RoZXIgdHlwZXMKICAgICAgICAgICAgJFJldFZhbCA9ICRTZXRTZWN1cml0eUluZm8uSW52b2tlKCRoT2JqZWN0LCAweDcsICRXaW4zMkNvbnN0YW50cy5EQUNMX1NFQ1VSSVRZX0lORk9STUFUSU9OLCAkcHBTaWRPd25lciwgJHBwU2lkR3JvdXAsICROZXdEYWNsLCAkcHBTYWNsKQogICAgICAgICAgICBpZiAoJFJldFZhbCAtbmUgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIlNldFNlY3VyaXR5SW5mbyBmYWlsZWQuIFJldHVybiB2YWx1ZTogJFJldFZhbCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJExvY2FsRnJlZS5JbnZva2UoJHBwU2VjdXJpdHlEZXNjcmlwdG9yKSB8IE91dC1OdWxsCiAgICAgICAgfQogICAgfQoKCiAgICAjR2V0IHRoZSBwcmltYXJ5IHRva2VuIGZvciB0aGUgc3BlY2lmaWVkIHByb2Nlc3NJZAogICAgZnVuY3Rpb24gR2V0LVByaW1hcnlUb2tlbgogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgIFtVSW50MzJdCiAgICAgICAgICAgICRQcm9jZXNzSWQsCgogICAgICAgICAgICAjT3BlbiB0aGUgdG9rZW4gd2l0aCBhbGwgcHJpdmlsZWdlcy4gUmVxdWlyZXMgU1lTVEVNIGJlY2F1c2Ugc29tZSBvZiB0aGUgcHJpdmlsZWdlcyBhcmUgcmVzdHJpY3RlZCB0byBTWVNURU0uCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoKV0KICAgICAgICAgICAgW1N3aXRjaF0KICAgICAgICAgICAgJEZ1bGxQcml2cwogICAgICAgICkKCiAgICAgICAgaWYgKCRGdWxsUHJpdnMpCiAgICAgICAgewogICAgICAgICAgICAkVG9rZW5Qcml2cyA9ICRXaW4zMkNvbnN0YW50cy5UT0tFTl9BTExfQUNDRVNTCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRUb2tlblByaXZzID0gJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0FTU0lHTl9QUklNQVJZIC1ib3IgJFdpbjMyQ29uc3RhbnRzLlRPS0VOX0RVUExJQ0FURSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9JTVBFUlNPTkFURSAtYm9yICRXaW4zMkNvbnN0YW50cy5UT0tFTl9RVUVSWSAKICAgICAgICB9CgogICAgICAgICRSZXR1cm5TdHJ1Y3QgPSBOZXctT2JqZWN0IFBTT2JqZWN0CgogICAgICAgICRoUHJvY2VzcyA9ICRPcGVuUHJvY2Vzcy5JbnZva2UoJFdpbjMyQ29uc3RhbnRzLlBST0NFU1NfUVVFUllfSU5GT1JNQVRJT04sICR0cnVlLCBbVUludDMyXSRQcm9jZXNzSWQpCiAgICAgICAgJFJldHVyblN0cnVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGhQcm9jZXNzIC1WYWx1ZSAkaFByb2Nlc3MKICAgICAgICBpZiAoJGhQcm9jZXNzIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICNJZiBhIHByb2Nlc3MgaXMgYSBwcm90ZWN0ZWQgcHJvY2VzcyBpdCBjYW5ub3QgYmUgZW51bWVyYXRlZC4gVGhpcyBjYWxsIHNob3VsZCBvbmx5IGZhaWwgZm9yIHByb3RlY3RlZCBwcm9jZXNzZXMuCiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkZhaWxlZCB0byBvcGVuIHByb2Nlc3MgaGFuZGxlIGZvciBQcm9jZXNzSWQ6ICRQcm9jZXNzSWQuIFByb2Nlc3NOYW1lICQoKEdldC1Qcm9jZXNzIC1JZCAkUHJvY2Vzc0lkKS5OYW1lKS4gRXJyb3IgY29kZTogJEVycm9yQ29kZSAuIFRoaXMgaXMgbGlrZWx5IGJlY2F1c2UgdGhpcyBpcyBhIHByb3RlY3RlZCBwcm9jZXNzLiIKICAgICAgICAgICAgcmV0dXJuICRudWxsCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgIFtJbnRQdHJdJGhQcm9jVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAkU3VjY2VzcyA9ICRPcGVuUHJvY2Vzc1Rva2VuLkludm9rZSgkaFByb2Nlc3MsICRUb2tlblByaXZzLCBbUmVmXSRoUHJvY1Rva2VuKQoKICAgICAgICAgICAgI0Nsb3NlIHRoZSBoYW5kbGUgdG8gaFByb2Nlc3MgKHRoZSBwcm9jZXNzIGhhbmRsZSkKICAgICAgICAgICAgaWYgKC1ub3QgJENsb3NlSGFuZGxlLkludm9rZSgkaFByb2Nlc3MpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIGNsb3NlIHByb2Nlc3MgaGFuZGxlLCB0aGlzIGlzIHVuZXhwZWN0ZWQuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgICAgICAkaFByb2Nlc3MgPSBbSW50UHRyXTo6WmVybwoKICAgICAgICAgICAgaWYgKCRTdWNjZXNzIC1lcSAkZmFsc2UgLW9yICRoUHJvY1Rva2VuIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBnZXQgcHJvY2Vzc2VzIHByaW1hcnkgdG9rZW4uIFByb2Nlc3NJZDogJFByb2Nlc3NJZC4gUHJvY2Vzc05hbWUgJCgoR2V0LVByb2Nlc3MgLUlkICRQcm9jZXNzSWQpLk5hbWUpLiBFcnJvcjogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgIHJldHVybiAkbnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFJldHVyblN0cnVjdCB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGhQcm9jVG9rZW4gLVZhbHVlICRoUHJvY1Rva2VuCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHJldHVybiAkUmV0dXJuU3RydWN0CiAgICB9CgoKICAgIGZ1bmN0aW9uIEdldC1UaHJlYWRUb2tlbgogICAgewogICAgICAgIFBhcmFtKAogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTAsIE1hbmRhdG9yeT0kdHJ1ZSldCiAgICAgICAgICAgIFtVSW50MzJdCiAgICAgICAgICAgICRUaHJlYWRJZAogICAgICAgICkKCiAgICAgICAgJFRva2VuUHJpdnMgPSAkV2luMzJDb25zdGFudHMuVE9LRU5fQUxMX0FDQ0VTUwoKICAgICAgICAkUmV0U3RydWN0ID0gTmV3LU9iamVjdCBQU09iamVjdAogICAgICAgIFtJbnRQdHJdJGhUaHJlYWRUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCgogICAgICAgICRoVGhyZWFkID0gJE9wZW5UaHJlYWQuSW52b2tlKCRXaW4zMkNvbnN0YW50cy5USFJFQURfQUxMX0FDQ0VTUywgJGZhbHNlLCAkVGhyZWFkSWQpCiAgICAgICAgaWYgKCRoVGhyZWFkIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIGlmICgkRXJyb3JDb2RlIC1uZSAkV2luMzJDb25zdGFudHMuRVJST1JfSU5WQUxJRF9QQVJBTUVURVIpICNUaGUgdGhyZWFkIHByb2JhYmx5IG5vIGxvbmdlciBleGlzdHMKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIG9wZW4gdGhyZWFkIGhhbmRsZSBmb3IgVGhyZWFkSWQ6ICRUaHJlYWRJZC4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkU3VjY2VzcyA9ICRPcGVuVGhyZWFkVG9rZW4uSW52b2tlKCRoVGhyZWFkLCAkVG9rZW5Qcml2cywgJGZhbHNlLCBbUmVmXSRoVGhyZWFkVG9rZW4pCiAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgaWYgKCgkRXJyb3JDb2RlIC1uZSAkV2luMzJDb25zdGFudHMuRVJST1JfTk9fVE9LRU4pIC1hbmQgICNUaGlzIGVycm9yIGlzIHJldHVybmVkIHdoZW4gdGhlIHRocmVhZCBpc24ndCBpbXBlcnNvbmF0ZWQKICAgICAgICAgICAgICAgICAoJEVycm9yQ29kZSAtbmUgJFdpbjMyQ29uc3RhbnRzLkVSUk9SX0lOVkFMSURfUEFSQU1FVEVSKSkgI1Byb2JhYmx5IG1lYW5zIHRoZSB0aHJlYWQgd2FzIGNsb3NlZAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBjYWxsIE9wZW5UaHJlYWRUb2tlbiBmb3IgVGhyZWFkSWQ6ICRUaHJlYWRJZC4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlN1Y2Nlc3NmdWxseSBxdWVyaWVkIHRocmVhZCB0b2tlbiIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgI0Nsb3NlIHRoZSBoYW5kbGUgdG8gaFRocmVhZCAodGhlIHRocmVhZCBoYW5kbGUpCiAgICAgICAgICAgIGlmICgtbm90ICRDbG9zZUhhbmRsZS5JbnZva2UoJGhUaHJlYWQpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRmFpbGVkIHRvIGNsb3NlIHRocmVhZCBoYW5kbGUsIHRoaXMgaXMgdW5leHBlY3RlZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICB9CiAgICAgICAgICAgICRoVGhyZWFkID0gW0ludFB0cl06Olplcm8KICAgICAgICB9CgogICAgICAgICRSZXRTdHJ1Y3QgfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBoVGhyZWFkVG9rZW4gLVZhbHVlICRoVGhyZWFkVG9rZW4KICAgICAgICByZXR1cm4gJFJldFN0cnVjdAogICAgfQoKCiAgICAjR2V0cyBpbXBvcnRhbnQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHRva2VuIHN1Y2ggYXMgdGhlIGxvZ29uIHR5cGUgYXNzb2NpYXRlZCB3aXRoIHRoZSBsb2dvbgogICAgZnVuY3Rpb24gR2V0LVRva2VuSW5mb3JtYXRpb24KICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuCiAgICAgICAgKQoKICAgICAgICAkUmV0dXJuT2JqID0gJG51bGwKCiAgICAgICAgJFRva2VuU3RhdHNTaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRUT0tFTl9TVEFUSVNUSUNTKQogICAgICAgIFtJbnRQdHJdJFRva2VuU3RhdHNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuU3RhdHNTaXplKQogICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5TdGF0aXN0aWNzLCAkVG9rZW5TdGF0c1B0ciwgJFRva2VuU3RhdHNTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkdldFRva2VuSW5mb3JtYXRpb24gZmFpbGVkLiBFcnJvciBjb2RlOiAkRXJyb3JDb2RlIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkVG9rZW5TdGF0cyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRUb2tlblN0YXRzUHRyLCBbVHlwZV0kVE9LRU5fU1RBVElTVElDUykKCiAgICAgICAgICAgICNRdWVyeSBMU0EgdG8gZGV0ZXJtaW5lIHdoYXQgdGhlIGxvZ29udHlwZSBvZiB0aGUgc2Vzc2lvbiBpcyB0aGF0IHRoZSB0b2tlbiBjb3Jyb3Nwb25kcyB0bywgYXMgd2VsbCBhcyB0aGUgdXNlcm5hbWUvZG9tYWluIG9mIHRoZSBsb2dvbgogICAgICAgICAgICAkTHVpZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbChbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSUQpKQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTdHJ1Y3R1cmVUb1B0cigkVG9rZW5TdGF0cy5BdXRoZW50aWNhdGlvbklkLCAkTHVpZFB0ciwgJGZhbHNlKQoKICAgICAgICAgICAgW0ludFB0cl0kTG9nb25TZXNzaW9uRGF0YVB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgICAgICRSZXR1cm5WYWwgPSAkTHNhR2V0TG9nb25TZXNzaW9uRGF0YS5JbnZva2UoJEx1aWRQdHIsIFtSZWZdJExvZ29uU2Vzc2lvbkRhdGFQdHIpCiAgICAgICAgICAgIGlmICgkUmV0dXJuVmFsIC1uZSAwIC1hbmQgJExvZ29uU2Vzc2lvbkRhdGFQdHIgLWVxIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDYWxsIHRvIExzYUdldExvZ29uU2Vzc2lvbkRhdGEgZmFpbGVkLiBFcnJvciBjb2RlOiAkUmV0dXJuVmFsLiBMb2dvblNlc3Npb25EYXRhUHRyID0gJExvZ29uU2Vzc2lvbkRhdGFQdHIiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkTG9nb25TZXNzaW9uRGF0YSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMb2dvblNlc3Npb25EYXRhUHRyLCBbVHlwZV0kU0VDVVJJVFlfTE9HT05fU0VTU0lPTl9EQVRBKQogICAgICAgICAgICAgICAgaWYgKCRMb2dvblNlc3Npb25EYXRhLlVzZXJuYW1lLkJ1ZmZlciAtbmUgW0ludFB0cl06Olplcm8gLWFuZCAKICAgICAgICAgICAgICAgICAgICAkTG9nb25TZXNzaW9uRGF0YS5Mb2dpbkRvbWFpbi5CdWZmZXIgLW5lIFtJbnRQdHJdOjpaZXJvKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICNHZXQgdGhlIHVzZXJuYW1lIGFuZCBkb21haW5uYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGUgdG9rZW4KICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkTG9nb25TZXNzaW9uRGF0YS5Vc2VybmFtZS5CdWZmZXIsICRMb2dvblNlc3Npb25EYXRhLlVzZXJuYW1lLkxlbmd0aC8yKQogICAgICAgICAgICAgICAgICAgICREb21haW4gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkTG9nb25TZXNzaW9uRGF0YS5Mb2dpbkRvbWFpbi5CdWZmZXIsICRMb2dvblNlc3Npb25EYXRhLkxvZ2luRG9tYWluLkxlbmd0aC8yKQoKICAgICAgICAgICAgICAgICAgICAjSWYgVXNlck5hbWUgaXMgZm9yIHRoZSBjb21wdXRlciBhY2NvdW50LCBmaWd1cmUgb3V0IHdoYXQgYWNjb3VudCBpdCBhY3R1YWxseSBpcyAoU1lTVEVNLCBORVRXT1JLIFNFUlZJQ0UpCiAgICAgICAgICAgICAgICAgICAgI09ubHkgZG8gdGhpcyBmb3IgdGhlIGNvbXB1dGVyIGFjY291bnQgYmVjYXVzZSBvdGhlciBhY2NvdW50cyByZXR1cm4gY29ycmVjdGx5LiBBbHNvLCBkb2luZyB0aGlzIGZvciBhIGRvbWFpbiBhY2NvdW50IAogICAgICAgICAgICAgICAgICAgICNyZXN1bHRzIGluIHF1ZXJ5aW5nIHRoZSBkb21haW4gY29udHJvbGxlciB3aGljaCBpcyB1bndhbnRlZC4KICAgICAgICAgICAgICAgICAgICBpZiAoJFVzZXJuYW1lIC1pZXEgIiQoJGVudjpDT01QVVRFUk5BTUUpYCQiKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kU2l6ZSA9IDEwMAogICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSROdW1Vc2VybmFtZUNoYXIgPSAkU2l6ZSAvIDIKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kTnVtRG9tYWluQ2hhciA9ICRTaXplIC8gMgogICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRTaWROYW1lVXNlID0gMAogICAgICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWVCdWZmZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICREb21haW5CdWZmZXIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJExvb2t1cEFjY291bnRTaWRXLkludm9rZShbSW50UHRyXTo6WmVybywgJExvZ29uU2Vzc2lvbkRhdGEuU2lkLCAkVXNlcm5hbWVCdWZmZXIsIFtSZWZdJE51bVVzZXJuYW1lQ2hhciwgJERvbWFpbkJ1ZmZlciwgW1JlZl0kTnVtRG9tYWluQ2hhciwgW1JlZl0kU2lkTmFtZVVzZSkKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFVzZXJuYW1lID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJpbmdVbmkoJFVzZXJuYW1lQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJERvbWFpbiA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RyaW5nVW5pKCREb21haW5CdWZmZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiRXJyb3IgY2FsbGluZyBMb29rdXBBY2NvdW50U2lkVy4gRXJyb3IgY29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6RnJlZUhHbG9iYWwoJFVzZXJuYW1lQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAkVXNlcm5hbWVCdWZmZXIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkRG9tYWluQnVmZmVyKQogICAgICAgICAgICAgICAgICAgICAgICAkRG9tYWluQnVmZmVyID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogPSBOZXctT2JqZWN0IFBTT2JqZWN0CiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIERvbWFpbiAtVmFsdWUgJERvbWFpbgogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBVc2VybmFtZSAtVmFsdWUgJFVzZXJuYW1lICAgIAogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBoVG9rZW4gLVZhbHVlICRoVG9rZW4KICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgTG9nb25UeXBlIC1WYWx1ZSAkTG9nb25TZXNzaW9uRGF0YS5Mb2dvblR5cGUKCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSBhZGRpdGlvbmFsIGluZm8gYWJvdXQgdGhlIHRva2VuIHN1Y2ggYXMgaWYgaXQgaXMgZWxldmF0ZWQKICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSXNFbGV2YXRlZCAtVmFsdWUgJGZhbHNlCgogICAgICAgICAgICAgICAgICAgICRUb2tlbkVsZXZhdGlvblNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJFRPS0VOX0VMRVZBVElPTikKICAgICAgICAgICAgICAgICAgICAkVG9rZW5FbGV2YXRpb25QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuRWxldmF0aW9uU2l6ZSkKICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRSZWFsU2l6ZSA9IDAKICAgICAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRHZXRUb2tlbkluZm9ybWF0aW9uLkludm9rZSgkaFRva2VuLCAkVE9LRU5fSU5GT1JNQVRJT05fQ0xBU1M6OlRva2VuRWxldmF0aW9uLCAkVG9rZW5FbGV2YXRpb25QdHIsICRUb2tlbkVsZXZhdGlvblNpemUsIFtSZWZdJFJlYWxTaXplKQogICAgICAgICAgICAgICAgICAgIGlmICgtbm90ICRTdWNjZXNzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiR2V0VG9rZW5JbmZvcm1hdGlvbiBmYWlsZWQgdG8gcmV0cmlldmUgVG9rZW5FbGV2YXRpb24gc3RhdHVzLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiIAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkVG9rZW5FbGV2YXRpb24gPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5lbGV2YXRpb25QdHIsIFtUeXBlXSRUT0tFTl9FTEVWQVRJT04pCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkVG9rZW5FbGV2YXRpb24uVG9rZW5Jc0VsZXZhdGVkIC1uZSAwKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqLklzRWxldmF0ZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlbkVsZXZhdGlvblB0cikKCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSB0aGUgdG9rZW4gdHlwZSB0byBkZXRlcm1pbmUgaWYgdGhlIHRva2VuIGlzIGEgcHJpbWFyeSBvciBpbXBlcnNvbmF0aW9uIHRva2VuCiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFRva2VuVHlwZSAtVmFsdWUgIlVuYWJsZVRvUmV0cmlldmUiCgogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFRva2VuVHlwZVNpemUgPSA0CiAgICAgICAgICAgICAgICAgICAgW0ludFB0cl0kVG9rZW5UeXBlUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6QWxsb2NIR2xvYmFsKCRUb2tlblR5cGVTaXplKQogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5UeXBlLCAkVG9rZW5UeXBlUHRyLCAkVG9rZW5UeXBlU2l6ZSwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbkltcGVyc29uYXRpb25MZXZlbCBzdGF0dXMuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5UeXBlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuVHlwZVB0ciwgW1R5cGVdW1VJbnQzMl0pCiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCgkVG9rZW5UeXBlKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAxIHskUmV0dXJuT2JqLlRva2VuVHlwZSA9ICJQcmltYXJ5In0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIgeyRSZXR1cm5PYmouVG9rZW5UeXBlID0gIkltcGVyc29uYXRpb24ifQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlblR5cGVQdHIpCgoKICAgICAgICAgICAgICAgICAgICAjUXVlcnkgdGhlIGltcGVyc29uYXRpb24gbGV2ZWwgaWYgdGhlIHRva2VuIGlzIGFuIEltcGVyc29uYXRpb24gdG9rZW4KICAgICAgICAgICAgICAgICAgICBpZiAoJFJldHVybk9iai5Ub2tlblR5cGUgLWllcSAiSW1wZXJzb25hdGlvbiIpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgSW1wZXJzb25hdGlvbkxldmVsIC1WYWx1ZSAiVW5hYmxlVG9SZXRyaWV2ZSIKCiAgICAgICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJEltcGVyc29uYXRpb25MZXZlbFNpemUgPSA0CiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJEltcGVyc29uYXRpb25MZXZlbFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkSW1wZXJzb25hdGlvbkxldmVsU2l6ZSkgI3NpemVvZiB1aW50MzIKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kUmVhbFNpemUgPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5JbXBlcnNvbmF0aW9uTGV2ZWwsICRJbXBlcnNvbmF0aW9uTGV2ZWxQdHIsICRJbXBlcnNvbmF0aW9uTGV2ZWxTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbkltcGVyc29uYXRpb25MZXZlbCBzdGF0dXMuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJEltcGVyc29uYXRpb25MZXZlbCA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRJbXBlcnNvbmF0aW9uTGV2ZWxQdHIsIFtUeXBlXVtVSW50MzJdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgkSW1wZXJzb25hdGlvbkxldmVsKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eUFub255bW91cyIgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eUlkZW50aWZpY2F0aW9uIiB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMiB7ICRSZXR1cm5PYmouSW1wZXJzb25hdGlvbkxldmVsID0gIlNlY3VyaXR5SW1wZXJzb25hdGlvbiIgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDMgeyAkUmV0dXJuT2JqLkltcGVyc29uYXRpb25MZXZlbCA9ICJTZWN1cml0eURlbGVnYXRpb24iIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkSW1wZXJzb25hdGlvbkxldmVsUHRyKQogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgICNRdWVyeSB0aGUgdG9rZW4gc2Vzc2lvbmlkCiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiB8IEFkZC1NZW1iZXIgLVR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIFNlc3Npb25JRCAtVmFsdWUgIlVua25vd24iCgogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFRva2VuU2Vzc2lvbklkU2l6ZSA9IDQKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRUb2tlblNlc3Npb25JZFB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkVG9rZW5TZXNzaW9uSWRTaXplKQogICAgICAgICAgICAgICAgICAgIFtVSW50MzJdJFJlYWxTaXplID0gMAogICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJEdldFRva2VuSW5mb3JtYXRpb24uSW52b2tlKCRoVG9rZW4sICRUT0tFTl9JTkZPUk1BVElPTl9DTEFTUzo6VG9rZW5TZXNzaW9uSWQsICRUb2tlblNlc3Npb25JZFB0ciwgJFRva2VuU2Vzc2lvbklkU2l6ZSwgW1JlZl0kUmVhbFNpemUpCiAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJHZXRUb2tlbkluZm9ybWF0aW9uIGZhaWxlZCB0byByZXRyaWV2ZSBUb2tlbiBTZXNzaW9uSWQuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5TZXNzaW9uSWQgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cnVjdHVyZSgkVG9rZW5TZXNzaW9uSWRQdHIsIFtUeXBlXVtVSW50MzJdKQogICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqLlNlc3Npb25JRCA9ICRUb2tlblNlc3Npb25JZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5TZXNzaW9uSWRQdHIpCgoKICAgICAgICAgICAgICAgICAgICAjUXVlcnkgdGhlIHRva2VuIHByaXZpbGVnZXMKICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgUHJpdmlsZWdlc0VuYWJsZWQgLVZhbHVlIEAoKQogICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1UeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQcml2aWxlZ2VzQXZhaWxhYmxlIC1WYWx1ZSBAKCkKCiAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kVG9rZW5Qcml2aWxlZ2VzU2l6ZSA9IDEwMDAKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRUb2tlblByaXZpbGVnZXNQdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFRva2VuUHJpdmlsZWdlc1NpemUpCiAgICAgICAgICAgICAgICAgICAgW1VJbnQzMl0kUmVhbFNpemUgPSAwCiAgICAgICAgICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkR2V0VG9rZW5JbmZvcm1hdGlvbi5JbnZva2UoJGhUb2tlbiwgJFRPS0VOX0lORk9STUFUSU9OX0NMQVNTOjpUb2tlblByaXZpbGVnZXMsICRUb2tlblByaXZpbGVnZXNQdHIsICRUb2tlblByaXZpbGVnZXNTaXplLCBbUmVmXSRSZWFsU2l6ZSkKICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkdldFRva2VuSW5mb3JtYXRpb24gZmFpbGVkIHRvIHJldHJpZXZlIFRva2VuIFNlc3Npb25JZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkVG9rZW5Qcml2aWxlZ2VzID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6UHRyVG9TdHJ1Y3R1cmUoJFRva2VuUHJpdmlsZWdlc1B0ciwgW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMpCiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAjTG9vcCB0aHJvdWdoIGVhY2ggcHJpdmlsZWdlCiAgICAgICAgICAgICAgICAgICAgICAgIFtJbnRQdHJdJFByaXZpbGVnZXNCYXNlUHRyID0gW0ludFB0cl0oQWRkLVNpZ25lZEludEFzVW5zaWduZWQgJFRva2VuUHJpdmlsZWdlc1B0ciAoW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6T2Zmc2V0T2YoW1R5cGVdJFRPS0VOX1BSSVZJTEVHRVMsICJQcml2aWxlZ2VzIikpKQogICAgICAgICAgICAgICAgICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZVNpemUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpTaXplT2YoW1R5cGVdJExVSURfQU5EX0FUVFJJQlVURVMpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoJGkgPSAwOyAkaSAtbHQgJFRva2VuUHJpdmlsZWdlcy5Qcml2aWxlZ2VDb3VudDsgJGkrKykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJEx1aWRBbmRBdHRyaWJ1dGVQdHIgPSBbSW50UHRyXShBZGQtU2lnbmVkSW50QXNVbnNpZ25lZCAkUHJpdmlsZWdlc0Jhc2VQdHIgKCRMdWlkQW5kQXR0cmlidXRlU2l6ZSAqICRpKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkTHVpZEFuZEF0dHJpYnV0ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRMdWlkQW5kQXR0cmlidXRlUHRyLCBbVHlwZV0kTFVJRF9BTkRfQVRUUklCVVRFUykKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjTG9va3VwIHByaXZpbGVnZSBuYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbVUludDMyXSRQcml2aWxlZ2VOYW1lU2l6ZSA9IDYwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUHJpdmlsZWdlTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkFsbG9jSEdsb2JhbCgkUHJpdmlsZWdlTmFtZVNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUEx1aWQgPSAkTHVpZEFuZEF0dHJpYnV0ZVB0ciAjVGhlIEx1aWQgc3RydWN0dXJlIGlzIHRoZSBmaXJzdCBvYmplY3QgaW4gdGhlIEx1aWRBbmRBdHRyaWJ1dGVzIHN0cnVjdHVyZSwgc28gYSBwdHIgdG8gTHVpZEFuZEF0dHJpYnV0ZXMgYWxzbyBwb2ludHMgdG8gTHVpZAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJExvb2t1cFByaXZpbGVnZU5hbWVXLkludm9rZShbSW50UHRyXTo6WmVybywgJFBMdWlkLCAkUHJpdmlsZWdlTmFtZVB0ciwgW1JlZl0kUHJpdmlsZWdlTmFtZVNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkNhbGwgdG8gTG9va3VwUHJpdmlsZWdlTmFtZVcgZmFpbGVkLiBFcnJvciBjb2RlOiAkRXJyb3JDb2RlLiBSZWFsU2l6ZTogJFByaXZpbGVnZU5hbWVTaXplIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByaXZpbGVnZU5hbWUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpQdHJUb1N0cmluZ1VuaSgkUHJpdmlsZWdlTmFtZVB0cikKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjR2V0IHRoZSBwcml2aWxlZ2UgYXR0cmlidXRlcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJFByaXZpbGVnZVN0YXR1cyA9ICIiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkRW5hYmxlZCA9ICRmYWxzZQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkTHVpZEFuZEF0dHJpYnV0ZS5BdHRyaWJ1dGVzIC1lcSAwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFbmFibGVkID0gJGZhbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKCRMdWlkQW5kQXR0cmlidXRlLkF0dHJpYnV0ZXMgLWJhbmQgJFdpbjMyQ29uc3RhbnRzLlNFX1BSSVZJTEVHRV9FTkFCTEVEX0JZX0RFRkFVTFQpIC1lcSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRURfQllfREVGQVVMVCkgI2VuYWJsZWQgYnkgZGVmYXVsdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRFbmFibGVkID0gJHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJEx1aWRBbmRBdHRyaWJ1dGUuQXR0cmlidXRlcyAtYmFuZCAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQpIC1lcSAkV2luMzJDb25zdGFudHMuU0VfUFJJVklMRUdFX0VOQUJMRUQpICNlbmFibGVkCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJEVuYWJsZWQgPSAkdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgkTHVpZEFuZEF0dHJpYnV0ZS5BdHRyaWJ1dGVzIC1iYW5kICRXaW4zMkNvbnN0YW50cy5TRV9QUklWSUxFR0VfUkVNT1ZFRCkgLWVxICRXaW4zMkNvbnN0YW50cy5TRV9QUklWSUxFR0VfUkVNT1ZFRCkgI1NFX1BSSVZJTEVHRV9SRU1PVkVELiBUaGlzIHNob3VsZCBuZXZlciBleGlzdC4gV3JpdGUgYSB3YXJuaW5nIGlmIGl0IGlzIGZvdW5kIHNvIEkgY2FuIGludmVzdGlnYXRlIHdoeS9ob3cgaXQgd2FzIGZvdW5kLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuZXhwZWN0ZWQgYmVoYXZpb3I6IEZvdW5kIGEgdG9rZW4gd2l0aCBTRV9QUklWSUxFR0VfUkVNT1ZFRC4gUGxlYXNlIHJlcG9ydCB0aGlzIGFzIGEgYnVnLiAiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRFbmFibGVkKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmouUHJpdmlsZWdlc0VuYWJsZWQgKz0gLCRQcml2aWxlZ2VOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iai5Qcml2aWxlZ2VzQXZhaWxhYmxlICs9ICwkUHJpdmlsZWdlTmFtZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRQcml2aWxlZ2VOYW1lUHRyKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRUb2tlblByaXZpbGVnZXNQdHIpCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkNhbGwgdG8gTHNhR2V0TG9nb25TZXNzaW9uRGF0YSBzdWNjZWVkZWQuIFRoaXMgU0hPVUxEIGJlIFNZU1RFTSBzaW5jZSB0aGVyZSBpcyBubyBkYXRhLiAkKCRMb2dvblNlc3Npb25EYXRhLlVzZXJOYW1lLkxlbmd0aCkiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgI0ZyZWUgTG9nb25TZXNzaW9uRGF0YQogICAgICAgICAgICAgICAgJG50c3RhdHVzID0gJExzYUZyZWVSZXR1cm5CdWZmZXIuSW52b2tlKCRMb2dvblNlc3Npb25EYXRhUHRyKQogICAgICAgICAgICAgICAgJExvZ29uU2Vzc2lvbkRhdGFQdHIgPSBbSW50UHRyXTo6WmVybwogICAgICAgICAgICAgICAgaWYgKCRudHN0YXR1cyAtbmUgMCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDYWxsIHRvIExzYUZyZWVSZXR1cm5CdWZmZXIgZmFpbGVkLiBFcnJvciBjb2RlOiAkbnRzdGF0dXMiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRMdWlkUHRyKQogICAgICAgICAgICAkTHVpZFB0ciA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgfQoKICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkVG9rZW5TdGF0c1B0cikKICAgICAgICAkVG9rZW5TdGF0c1B0ciA9IFtJbnRQdHJdOjpaZXJvCgogICAgICAgIHJldHVybiAkUmV0dXJuT2JqCiAgICB9CgoKICAgICNUYWtlcyBhbiBhcnJheSBvZiBUb2tlbk9iamVjdHMgYnVpbHQgYnkgdGhlIHNjcmlwdCBhbmQgcmV0dXJucyB0aGUgdW5pcXVlIG9uZXMKICAgIGZ1bmN0aW9uIEdldC1VbmlxdWVUb2tlbnMKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbT2JqZWN0W11dCiAgICAgICAgICAgICRBbGxUb2tlbnMKICAgICAgICApCgogICAgICAgICRUb2tlbkJ5VXNlciA9IEB7fQogICAgICAgICRUb2tlbkJ5RW5hYmxlZFByaXYgPSBAe30KICAgICAgICAkVG9rZW5CeUF2YWlsYWJsZVByaXYgPSBAe30KCiAgICAgICAgI0ZpbHRlciB0b2tlbnMgYnkgdXNlcgogICAgICAgIGZvcmVhY2ggKCRUb2tlbiBpbiAkQWxsVG9rZW5zKQogICAgICAgIHsKICAgICAgICAgICAgJEtleSA9ICRUb2tlbi5Eb21haW4gKyAiXCIgKyAkVG9rZW4uVXNlcm5hbWUKICAgICAgICAgICAgaWYgKC1ub3QgJFRva2VuQnlVc2VyLkNvbnRhaW5zS2V5KCRLZXkpKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjRmlsdGVyIG91dCBuZXR3b3JrIGxvZ29ucyBhbmQganVuayBXaW5kb3dzIGFjY291bnRzLiBUaGlzIGZpbHRlciBlbGltaW5hdGVzIGFjY291bnRzIHdoaWNoIHdvbid0IGhhdmUgY3JlZHMgYmVjYXVzZQogICAgICAgICAgICAgICAgIyAgICB0aGV5IGFyZSBuZXR3b3JrIGxvZ29ucyAodHlwZSAzKSBvciBsb2dvbnMgZm9yIHdoaWNoIHRoZSBjcmVkcyBkb24ndCBtYXR0ZXIgbGlrZSBMT0NPQUwgU0VSVklDRSwgRFdNLCBldGMuLgogICAgICAgICAgICAgICAgaWYgKCRUb2tlbi5Mb2dvblR5cGUgLW5lIDMgLWFuZAogICAgICAgICAgICAgICAgICAgICRUb2tlbi5Vc2VybmFtZSAtaW5vdG1hdGNoICJeRFdNLVxkKyQiIC1hbmQKICAgICAgICAgICAgICAgICAgICAkVG9rZW4uVXNlcm5hbWUgLWlub3RtYXRjaCAiXkxPQ0FMXHNTRVJWSUNFJCIpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJFRva2VuQnlVc2VyLkFkZCgkS2V5LCAkVG9rZW4pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAjSWYgVG9rZW5zIGhhdmUgZXF1YWwgZWxldmF0aW9uIGxldmVscywgY29tcGFyZSB0aGVpciBwcml2aWxlZ2VzLgogICAgICAgICAgICAgICAgaWYoJFRva2VuLklzRWxldmF0ZWQgLWVxICRUb2tlbkJ5VXNlclskS2V5XS5Jc0VsZXZhdGVkKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmICgoJFRva2VuLlByaXZpbGVnZXNFbmFibGVkLkNvdW50ICsgJFRva2VuLlByaXZpbGVnZXNBdmFpbGFibGUuQ291bnQpIC1ndCAoJFRva2VuQnlVc2VyWyRLZXldLlByaXZpbGVnZXNFbmFibGVkLkNvdW50ICsgJFRva2VuQnlVc2VyWyRLZXldLlByaXZpbGVnZXNBdmFpbGFibGUuQ291bnQpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJFRva2VuQnlVc2VyWyRLZXldID0gJFRva2VuCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgI0lmIHRoZSBuZXcgdG9rZW4gaXMgZWxldmF0ZWQgYW5kIHRoZSBjdXJyZW50IHRva2VuIGlzbid0LCB1c2UgdGhlIG5ldyB0b2tlbgogICAgICAgICAgICAgICAgZWxzZWlmICgoJFRva2VuLklzRWxldmF0ZWQgLWVxICR0cnVlKSAtYW5kICgkVG9rZW5CeVVzZXJbJEtleV0uSXNFbGV2YXRlZCAtZXEgJGZhbHNlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkVG9rZW5CeVVzZXJbJEtleV0gPSAkVG9rZW4KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgI0ZpbHRlciB0b2tlbnMgYnkgcHJpdmlsZWdlCiAgICAgICAgZm9yZWFjaCAoJFRva2VuIGluICRBbGxUb2tlbnMpCiAgICAgICAgewogICAgICAgICAgICAkRnVsbG5hbWUgPSAiJCgkVG9rZW4uRG9tYWluKVwkKCRUb2tlbi5Vc2VybmFtZSkiCgogICAgICAgICAgICAjRmlsdGVyIGN1cnJlbnRseSBlbmFibGVkIHByaXZpbGVnZXMKICAgICAgICAgICAgZm9yZWFjaCAoJFByaXZpbGVnZSBpbiAkVG9rZW4uUHJpdmlsZWdlc0VuYWJsZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGlmICgkVG9rZW5CeUVuYWJsZWRQcml2LkNvbnRhaW5zS2V5KCRQcml2aWxlZ2UpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIGlmKCRUb2tlbkJ5RW5hYmxlZFByaXZbJFByaXZpbGVnZV0gLW5vdGNvbnRhaW5zICRGdWxsbmFtZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5RW5hYmxlZFByaXZbJFByaXZpbGVnZV0gKz0gLCRGdWxsbmFtZQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkVG9rZW5CeUVuYWJsZWRQcml2LkFkZCgkUHJpdmlsZWdlLCBAKCRGdWxsbmFtZSkpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICNGaWx0ZXIgY3VycmVudGx5IGF2YWlsYWJsZSAoYnV0IG5vdCBlbmFibGUpIHByaXZpbGVnZXMKICAgICAgICAgICAgZm9yZWFjaCAoJFByaXZpbGVnZSBpbiAkVG9rZW4uUHJpdmlsZWdlc0F2YWlsYWJsZSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRUb2tlbkJ5QXZhaWxhYmxlUHJpdi5Db250YWluc0tleSgkUHJpdmlsZWdlKSkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZigkVG9rZW5CeUF2YWlsYWJsZVByaXZbJFByaXZpbGVnZV0gLW5vdGNvbnRhaW5zICRGdWxsbmFtZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5QXZhaWxhYmxlUHJpdlskUHJpdmlsZWdlXSArPSAsJEZ1bGxuYW1lCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRUb2tlbkJ5QXZhaWxhYmxlUHJpdi5BZGQoJFByaXZpbGVnZSwgQCgkRnVsbG5hbWUpKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAkUmV0dXJuRGljdCA9IEB7CiAgICAgICAgICAgIFRva2VuQnlVc2VyID0gJFRva2VuQnlVc2VyCiAgICAgICAgICAgIFRva2VuQnlFbmFibGVkUHJpdiA9ICRUb2tlbkJ5RW5hYmxlZFByaXYKICAgICAgICAgICAgVG9rZW5CeUF2YWlsYWJsZVByaXYgPSAkVG9rZW5CeUF2YWlsYWJsZVByaXYKICAgICAgICB9CgogICAgICAgIHJldHVybiAoTmV3LU9iamVjdCBQU09iamVjdCAtUHJvcGVydHkgJFJldHVybkRpY3QpCiAgICB9CgoKICAgIGZ1bmN0aW9uIEludm9rZS1JbXBlcnNvbmF0ZVVzZXIKICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuCiAgICAgICAgKQoKICAgICAgICAjRHVwbGljYXRlIHRoZSB0b2tlbiBzbyBpdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgYSBuZXcgcHJvY2VzcwogICAgICAgIFtJbnRQdHJdJE5ld0hUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgJFN1Y2Nlc3MgPSAkRHVwbGljYXRlVG9rZW5FeC5JbnZva2UoJGhUb2tlbiwgJFdpbjMyQ29uc3RhbnRzLk1BWElNVU1fQUxMT1dFRCwgW0ludFB0cl06Olplcm8sIDMsIDEsIFtSZWZdJE5ld0hUb2tlbikgI3RvZG8gZG9lcyB0aGlzIG5lZWQgdG8gYmUgZnJlZWQKICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICB7CiAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkR1cGxpY2F0ZVRva2VuRXggZmFpbGVkLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7CiAgICAgICAgICAgICRTdWNjZXNzID0gJEltcGVyc29uYXRlTG9nZ2VkT25Vc2VyLkludm9rZSgkTmV3SFRva2VuKQogICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yY29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIkZhaWxlZCB0byBJbXBlcnNvbmF0ZUxvZ2dlZE9uVXNlci4gRXJyb3IgY29kZTogJEVycm9yY29kZSIKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgJFN1Y2Nlc3MgPSAkQ2xvc2VIYW5kbGUuSW52b2tlKCROZXdIVG9rZW4pCiAgICAgICAgJE5ld0hUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDbG9zZUhhbmRsZSBmYWlsZWQgdG8gY2xvc2UgTmV3SFRva2VuLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJFN1Y2Nlc3MKICAgIH0KCgogICAgZnVuY3Rpb24gQ3JlYXRlLVByb2Nlc3NXaXRoVG9rZW4KICAgIHsKICAgICAgICBQYXJhbSgKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0wLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbSW50UHRyXQogICAgICAgICAgICAkaFRva2VuLAoKICAgICAgICAgICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xLCBNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkUHJvY2Vzc05hbWUsCgogICAgICAgICAgICBbUGFyYW1ldGVyKFBvc2l0aW9uPTIpXQogICAgICAgICAgICBbU3RyaW5nXQogICAgICAgICAgICAkUHJvY2Vzc0FyZ3MKICAgICAgICApCiAgICAgICAgV3JpdGUtVmVyYm9zZSAiRW50ZXJpbmcgQ3JlYXRlLVByb2Nlc3NXaXRoVG9rZW4iCiAgICAgICAgI0R1cGxpY2F0ZSB0aGUgdG9rZW4gc28gaXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGEgbmV3IHByb2Nlc3MKICAgICAgICBbSW50UHRyXSROZXdIVG9rZW4gPSBbSW50UHRyXTo6WmVybwogICAgICAgICRTdWNjZXNzID0gJER1cGxpY2F0ZVRva2VuRXguSW52b2tlKCRoVG9rZW4sICRXaW4zMkNvbnN0YW50cy5NQVhJTVVNX0FMTE9XRUQsIFtJbnRQdHJdOjpaZXJvLCAzLCAxLCBbUmVmXSROZXdIVG9rZW4pCiAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgewogICAgICAgICAgICAkRXJyb3JDb2RlID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6R2V0TGFzdFdpbjMyRXJyb3IoKQogICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJEdXBsaWNhdGVUb2tlbkV4IGZhaWxlZC4gRXJyb3JDb2RlOiAkRXJyb3JDb2RlIgogICAgICAgIH0KICAgICAgICBlbHNlCiAgICAgICAgewogICAgICAgICAgICAkU3RhcnR1cEluZm9TaXplID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U2l6ZU9mKFtUeXBlXSRTVEFSVFVQSU5GTykKICAgICAgICAgICAgW0ludFB0cl0kU3RhcnR1cEluZm9QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFN0YXJ0dXBJbmZvU2l6ZSkKICAgICAgICAgICAgJG1lbXNldC5JbnZva2UoJFN0YXJ0dXBJbmZvUHRyLCAwLCAkU3RhcnR1cEluZm9TaXplKSB8IE91dC1OdWxsCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OldyaXRlSW50MzIoJFN0YXJ0dXBJbmZvUHRyLCAkU3RhcnR1cEluZm9TaXplKSAjVGhlIGZpcnN0IHBhcmFtZXRlciAoY2IpIGlzIGEgRFdPUkQgd2hpY2ggaXMgdGhlIHNpemUgb2YgdGhlIHN0cnVjdAoKICAgICAgICAgICAgJFByb2Nlc3NJbmZvU2l6ZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlNpemVPZihbVHlwZV0kUFJPQ0VTU19JTkZPUk1BVElPTikKICAgICAgICAgICAgW0ludFB0cl0kUHJvY2Vzc0luZm9QdHIgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpBbGxvY0hHbG9iYWwoJFByb2Nlc3NJbmZvU2l6ZSkKCiAgICAgICAgICAgICRQcm9jZXNzTmFtZVB0ciA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlN0cmluZ1RvSEdsb2JhbFVuaSgiJFByb2Nlc3NOYW1lIikKICAgICAgICAgICAgJFByb2Nlc3NBcmdzUHRyID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgaWYgKC1ub3QgW1N0cmluZ106OklzTnVsbE9yRW1wdHkoJFByb2Nlc3NBcmdzKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJFByb2Nlc3NBcmdzUHRyID0gW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6U3RyaW5nVG9IR2xvYmFsVW5pKCJgIiRQcm9jZXNzTmFtZWAiICRQcm9jZXNzQXJncyIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgICRGdW5jdGlvbk5hbWUgPSAiIgogICAgICAgICAgICBpZiAoW1N5c3RlbS5EaWFnbm9zdGljcy5Qcm9jZXNzXTo6R2V0Q3VycmVudFByb2Nlc3MoKS5TZXNzaW9uSWQgLWVxIDApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNDYW5ub3QgdXNlIENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XIHdoZW4gaW4gU2Vzc2lvbjAgYmVjYXVzZSBDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyB0aHJvd3MgYW4gQUNDRVNTX0RFTklFRCBlcnJvci4gSSBiZWxpZXZlIGl0IGlzIGJlY2F1c2UKICAgICAgICAgICAgICAgICN0aGlzIEFQSSBhdHRlbXB0cyB0byBtb2RpZnkgdGhlIGRlc2t0b3AgQUNMLiBJIHdvdWxkIGp1c3QgdXNlIHRoaXMgQVBJIGFsbCB0aGUgdGltZSwgYnV0IGl0IHJlcXVpcmVzIHRoYXQgSSBlbmFibGUgU2VBc3NpZ25QcmltYXJ5VG9rZW5Qcml2aWxlZ2UKICAgICAgICAgICAgICAgICN3aGljaCBpcyBub3QgaWRlYWwuIAogICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiUnVubmluZyBpbiBTZXNzaW9uIDAuIEVuYWJsaW5nIFNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlIGFuZCBjYWxsaW5nIENyZWF0ZVByb2Nlc3NBc1VzZXJXIHRvIGNyZWF0ZSBhIHByb2Nlc3Mgd2l0aCBhbHRlcm5hdGUgdG9rZW4uIgogICAgICAgICAgICAgICAgRW5hYmxlLVByaXZpbGVnZSAtUHJpdmlsZWdlIFNlQXNzaWduUHJpbWFyeVRva2VuUHJpdmlsZWdlCiAgICAgICAgICAgICAgICAkU3VjY2VzcyA9ICRDcmVhdGVQcm9jZXNzQXNVc2VyVy5JbnZva2UoJE5ld0hUb2tlbiwgJFByb2Nlc3NOYW1lUHRyLCAkUHJvY2Vzc0FyZ3NQdHIsIFtJbnRQdHJdOjpaZXJvLCBbSW50UHRyXTo6WmVybywgJGZhbHNlLCAwLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8sICRTdGFydHVwSW5mb1B0ciwgJFByb2Nlc3NJbmZvUHRyKQogICAgICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9ICJDcmVhdGVQcm9jZXNzQXNVc2VyVyIKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIk5vdCBydW5uaW5nIGluIFNlc3Npb24gMCwgY2FsbGluZyBDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyB0byBjcmVhdGUgYSBwcm9jZXNzIHdpdGggYWx0ZXJuYXRlIHRva2VuLiIKICAgICAgICAgICAgICAgICRTdWNjZXNzID0gJENyZWF0ZVByb2Nlc3NXaXRoVG9rZW5XLkludm9rZSgkTmV3SFRva2VuLCAweDAsICRQcm9jZXNzTmFtZVB0ciwgJFByb2Nlc3NBcmdzUHRyLCAwLCBbSW50UHRyXTo6WmVybywgW0ludFB0cl06Olplcm8sICRTdGFydHVwSW5mb1B0ciwgJFByb2Nlc3NJbmZvUHRyKQogICAgICAgICAgICAgICAgJEZ1bmN0aW9uTmFtZSA9ICJDcmVhdGVQcm9jZXNzV2l0aFRva2VuVyIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJFN1Y2Nlc3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICNGcmVlIHRoZSBoYW5kbGVzIHJldHVybmVkIGluIHRoZSBQcm9jZXNzSW5mbyBzdHJ1Y3R1cmUKICAgICAgICAgICAgICAgICRQcm9jZXNzSW5mbyA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OlB0clRvU3RydWN0dXJlKCRQcm9jZXNzSW5mb1B0ciwgW1R5cGVdJFBST0NFU1NfSU5GT1JNQVRJT04pCiAgICAgICAgICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRQcm9jZXNzSW5mby5oUHJvY2VzcykgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgJENsb3NlSGFuZGxlLkludm9rZSgkUHJvY2Vzc0luZm8uaFRocmVhZCkgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIiRGdW5jdGlvbk5hbWUgZmFpbGVkLiBFcnJvciBjb2RlOiAkRXJyb3JDb2RlIgogICAgICAgICAgICB9CgogICAgICAgICAgICAjRnJlZSBTdGFydHVwSW5mbyBtZW1vcnkgYW5kIFByb2Nlc3NJbmZvIG1lbW9yeQogICAgICAgICAgICBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpGcmVlSEdsb2JhbCgkU3RhcnR1cEluZm9QdHIpCiAgICAgICAgICAgICRTdGFydHVwSW5mb1B0ciA9IFtJbnRwdHJdOjpaZXJvCiAgICAgICAgICAgIFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkZyZWVIR2xvYmFsKCRQcm9jZXNzSW5mb1B0cikKICAgICAgICAgICAgJFByb2Nlc3NJbmZvUHRyID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgW1N5c3RlbS5SdW50aW1lLkludGVyb3BTZXJ2aWNlcy5NYXJzaGFsXTo6WmVyb0ZyZWVHbG9iYWxBbGxvY1VuaWNvZGUoJFByb2Nlc3NOYW1lUHRyKQogICAgICAgICAgICAkUHJvY2Vzc05hbWVQdHIgPSBbSW50UHRyXTo6WmVybwoKICAgICAgICAgICAgI0Nsb3NlIGhhbmRsZSBmb3IgdGhlIHRva2VuIGR1cGxpY2F0ZWQgd2l0aCBEdXBsaWNhdGVUb2tlbkV4CiAgICAgICAgICAgICRTdWNjZXNzID0gJENsb3NlSGFuZGxlLkludm9rZSgkTmV3SFRva2VuKQogICAgICAgICAgICAkTmV3SFRva2VuID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgaWYgKC1ub3QgJFN1Y2Nlc3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRFcnJvckNvZGUgPSBbU3lzdGVtLlJ1bnRpbWUuSW50ZXJvcFNlcnZpY2VzLk1hcnNoYWxdOjpHZXRMYXN0V2luMzJFcnJvcigpCiAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJDbG9zZUhhbmRsZSBmYWlsZWQgdG8gY2xvc2UgTmV3SFRva2VuLiBFcnJvckNvZGU6ICRFcnJvckNvZGUiCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgoKICAgIGZ1bmN0aW9uIEZyZWUtQWxsVG9rZW5zCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCwgTWFuZGF0b3J5PSR0cnVlKV0KICAgICAgICAgICAgW1BTT2JqZWN0W11dCiAgICAgICAgICAgICRUb2tlbkluZm9PYmpzCiAgICAgICAgKQoKICAgICAgICBmb3JlYWNoICgkT2JqIGluICRUb2tlbkluZm9PYmpzKQogICAgICAgIHsKICAgICAgICAgICAgJFN1Y2Nlc3MgPSAkQ2xvc2VIYW5kbGUuSW52b2tlKCRPYmouaFRva2VuKQogICAgICAgICAgICBpZiAoLW5vdCAkU3VjY2VzcykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJEVycm9yQ29kZSA9IFtTeXN0ZW0uUnVudGltZS5JbnRlcm9wU2VydmljZXMuTWFyc2hhbF06OkdldExhc3RXaW4zMkVycm9yKCkKICAgICAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIkZhaWxlZCB0byBjbG9zZSB0b2tlbiBoYW5kbGUgaW4gRnJlZS1BbGxUb2tlbnMuIEVycm9yQ29kZTogJEVycm9yQ29kZSIKICAgICAgICAgICAgfQogICAgICAgICAgICAkT2JqLmhUb2tlbiA9IFtJbnRQdHJdOjpaZXJvCiAgICAgICAgfQogICAgfQoKCiAgICAjRW51bWVyYXRlIGFsbCB0b2tlbnMgb24gdGhlIHN5c3RlbS4gUmV0dXJucyBhbiBhcnJheSBvZiBvYmplY3RzIHdpdGggdGhlIHRva2VuIGFuZCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdG9rZW4uCiAgICBmdW5jdGlvbiBFbnVtLUFsbFRva2VucwogICAgewogICAgICAgICRBbGxUb2tlbnMgPSBAKCkKCiAgICAgICAgI0ZpcnN0IEdldFN5c3RlbS4gVGhlIHNjcmlwdCBjYW5ub3QgZW51bWVyYXRlIGFsbCB0b2tlbnMgdW5sZXNzIGl0IGlzIHN5c3RlbSBmb3Igc29tZSByZWFzb24uIEx1Y2tpbHkgaXQgY2FuIGltcGVyc29uYXRlIGEgc3lzdGVtIHRva2VuLgogICAgICAgICNFdmVuIGlmIGFscmVhZHkgcnVubmluZyBhcyBzeXN0ZW0sIGxhdGVyIHBhcnRzIG9uIHRoZSBzY3JpcHQgZGVwZW5kIG9uIGhhdmluZyBhIFNZU1RFTSB0b2tlbiB3aXRoIG1vc3QgcHJpdmlsZWdlcywgc28gaW1wZXJzb25hdGUgdGhlIHdpbmluaXQgdG9rZW4uCiAgICAgICAgJHN5c3RlbVRva2VuSW5mbyA9IEdldC1QcmltYXJ5VG9rZW4gLVByb2Nlc3NJZCAoR2V0LVByb2Nlc3Mgd2luaW5pdCB8IHdoZXJlIHskXy5TZXNzaW9uSWQgLWVxIDB9KS5JZAogICAgICAgIGlmICgkc3lzdGVtVG9rZW5JbmZvIC1lcSAkbnVsbCAtb3IgKC1ub3QgKEludm9rZS1JbXBlcnNvbmF0ZVVzZXIgLWhUb2tlbiAkc3lzdGVtVG9rZW5JbmZvLmhQcm9jVG9rZW4pKSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVdhcm5pbmcgIlVuYWJsZSB0byBpbXBlcnNvbmF0ZSBTWVNURU0sIHRoZSBzY3JpcHQgd2lsbCBub3QgYmUgYWJsZSB0byBlbnVtZXJhdGUgYWxsIHRva2VucyIKICAgICAgICB9CgogICAgICAgIGlmICgkc3lzdGVtVG9rZW5JbmZvIC1uZSAkbnVsbCAtYW5kICRzeXN0ZW1Ub2tlbkluZm8uaFByb2NUb2tlbiAtbmUgW0ludFB0cl06Olplcm8pCiAgICAgICAgewogICAgICAgICAgICAkQ2xvc2VIYW5kbGUuSW52b2tlKCRzeXN0ZW1Ub2tlbkluZm8uaFByb2NUb2tlbikgfCBPdXQtTnVsbAogICAgICAgICAgICAkc3lzdGVtVG9rZW5JbmZvID0gJG51bGwKICAgICAgICB9CgogICAgICAgICRQcm9jZXNzSWRzID0gZ2V0LXByb2Nlc3MgfCB3aGVyZSB7JF8ubmFtZSAtaW5vdG1hdGNoICJeY3Nyc3MkIiAtYW5kICRfLm5hbWUgLWlub3RtYXRjaCAiXnN5c3RlbSQiIC1hbmQgJF8uaWQgLW5lIDB9CgogICAgICAgICNHZXQgYWxsIHRva2VucwogICAgICAgIGZvcmVhY2ggKCRQcm9jZXNzIGluICRQcm9jZXNzSWRzKQogICAgICAgIHsKICAgICAgICAgICAgJFByaW1hcnlUb2tlbkluZm8gPSAoR2V0LVByaW1hcnlUb2tlbiAtUHJvY2Vzc0lkICRQcm9jZXNzLklkIC1GdWxsUHJpdnMpCgogICAgICAgICAgICAjSWYgYSBwcm9jZXNzIGlzIGEgcHJvdGVjdGVkIHByb2Nlc3MsIGl0J3MgcHJpbWFyeSB0b2tlbiBjYW5ub3QgYmUgb2J0YWluZWQuIERvbid0IHRyeSB0byBlbnVtZXJhdGUgaXQuCiAgICAgICAgICAgIGlmICgkUHJpbWFyeVRva2VuSW5mbyAtbmUgJG51bGwpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFtJbnRQdHJdJGhUb2tlbiA9IFtJbnRQdHJdJFByaW1hcnlUb2tlbkluZm8uaFByb2NUb2tlbgoKICAgICAgICAgICAgICAgIGlmICgkaFRva2VuIC1uZSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAjR2V0IHRoZSBMVUlEIGNvcnJvc3BvbmRpbmcgdG8gdGhlIGxvZ29uCiAgICAgICAgICAgICAgICAgICAgJFJldHVybk9iaiA9IEdldC1Ub2tlbkluZm9ybWF0aW9uIC1oVG9rZW4gJGhUb2tlbgogICAgICAgICAgICAgICAgICAgIGlmICgkUmV0dXJuT2JqIC1uZSAkbnVsbCkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBQcm9jZXNzSWQgLVZhbHVlICRQcm9jZXNzLklkCgogICAgICAgICAgICAgICAgICAgICAgICAkQWxsVG9rZW5zICs9ICRSZXR1cm5PYmoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtV2FybmluZyAiQ291bGRuJ3QgcmV0cmlldmUgdG9rZW4gZm9yIFByb2Nlc3M6ICQoJFByb2Nlc3MuTmFtZSkuIFByb2Nlc3NJZDogJCgkUHJvY2Vzcy5JZCkiCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZm9yZWFjaCAoJFRocmVhZCBpbiAkUHJvY2Vzcy5UaHJlYWRzKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRUaHJlYWRUb2tlbkluZm8gPSBHZXQtVGhyZWFkVG9rZW4gLVRocmVhZElkICRUaHJlYWQuSWQKICAgICAgICAgICAgICAgICAgICBbSW50UHRyXSRoVG9rZW4gPSAoJFRocmVhZFRva2VuSW5mby5oVGhyZWFkVG9rZW4pCgogICAgICAgICAgICAgICAgICAgIGlmICgkaFRva2VuIC1uZSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICRSZXR1cm5PYmogPSBHZXQtVG9rZW5JbmZvcm1hdGlvbiAtaFRva2VuICRoVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRSZXR1cm5PYmogLW5lICRudWxsKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkUmV0dXJuT2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlUHJvcGVydHkgLU5hbWUgVGhyZWFkSWQgLVZhbHVlICRUaHJlYWQuSWQKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRBbGxUb2tlbnMgKz0gJFJldHVybk9iagogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJEFsbFRva2VucwogICAgfQoKCiAgICBmdW5jdGlvbiBJbnZva2UtUmV2ZXJ0VG9TZWxmCiAgICB7CiAgICAgICAgUGFyYW0oCiAgICAgICAgICAgIFtQYXJhbWV0ZXIoUG9zaXRpb249MCldCiAgICAgICAgICAgIFtTd2l0Y2hdCiAgICAgICAgICAgICRTaG93T3V0cHV0CiAgICAgICAgKQoKICAgICAgICAkU3VjY2VzcyA9ICRSZXZlcnRUb1NlbGYuSW52b2tlKCkKCiAgICAgICAgaWYgKCRTaG93T3V0cHV0KQogICAgICAgIHsKICAgICAgICAgICAgaWYgKCRTdWNjZXNzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlJldmVydFRvU2VsZiB3YXMgc3VjY2Vzc2Z1bC4gUnVubmluZyBhczogJChbRW52aXJvbm1lbnRdOjpVc2VyRG9tYWluTmFtZSlcJChbRW52aXJvbm1lbnRdOjpVc2VyTmFtZSkiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBXcml0ZS1PdXRwdXQgIlJldmVydFRvU2VsZiBmYWlsZWQuIFJ1bm5pbmcgYXM6ICQoW0Vudmlyb25tZW50XTo6VXNlckRvbWFpbk5hbWUpXCQoW0Vudmlyb25tZW50XTo6VXNlck5hbWUpIgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKCiAgICAjTWFpbiBmdW5jdGlvbgogICAgZnVuY3Rpb24gTWFpbgogICAgewogICAgICAgIGlmICgtbm90IChbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NQcmluY2lwYWxdIFtTZWN1cml0eS5QcmluY2lwYWwuV2luZG93c0lkZW50aXR5XTo6R2V0Q3VycmVudCgpKS5Jc0luUm9sZShbU2VjdXJpdHkuUHJpbmNpcGFsLldpbmRvd3NCdWlsdEluUm9sZV0gIkFkbWluaXN0cmF0b3IiKSkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICJTY3JpcHQgbXVzdCBiZSBydW4gYXMgYWRtaW5pc3RyYXRvciIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICB9CgogICAgICAgICNJZiBydW5uaW5nIGluIHNlc3Npb24gMCwgZm9yY2UgTm9VSQogICAgICAgIGlmIChbU3lzdGVtLkRpYWdub3N0aWNzLlByb2Nlc3NdOjpHZXRDdXJyZW50UHJvY2VzcygpLlNlc3Npb25JZCAtZXEgMCkKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLVZlcmJvc2UgIlJ1bm5pbmcgaW4gU2Vzc2lvbiAwLCBmb3JjaW5nIE5vVUkgKHByb2Nlc3NlcyBpbiBTZXNzaW9uIDAgY2Fubm90IGhhdmUgYSBVSSkiCiAgICAgICAgICAgICROb1VJID0gJHRydWUKICAgICAgICB9CgogICAgICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJSZXZUb1NlbGYiKQogICAgICAgIHsKICAgICAgICAgICAgSW52b2tlLVJldmVydFRvU2VsZiAtU2hvd091dHB1dAogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1pZXEgIkNyZWF0ZVByb2Nlc3MiIC1vciAkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJJbXBlcnNvbmF0ZVVzZXIiKQogICAgICAgIHsKICAgICAgICAgICAgJEFsbFRva2VucyA9IEVudW0tQWxsVG9rZW5zCiAgICAgICAgICAgIAogICAgICAgICAgICAjU2VsZWN0IHRoZSB0b2tlbiB0byB1c2UKICAgICAgICAgICAgW0ludFB0cl0kaFRva2VuID0gW0ludFB0cl06Olplcm8KICAgICAgICAgICAgJFVuaXF1ZVRva2VucyA9IChHZXQtVW5pcXVlVG9rZW5zIC1BbGxUb2tlbnMgJEFsbFRva2VucykuVG9rZW5CeVVzZXIKICAgICAgICAgICAgaWYgKCRVc2VybmFtZSAtbmUgJG51bGwgLWFuZCAkVXNlcm5hbWUgLW5lICcnKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJFVuaXF1ZVRva2Vucy5Db250YWluc0tleSgkVXNlcm5hbWUpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRoVG9rZW4gPSAkVW5pcXVlVG9rZW5zWyRVc2VybmFtZV0uaFRva2VuCiAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VsZWN0aW5nIHRva2VuIGJ5IHVzZXJuYW1lIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJBIHRva2VuIGJlbG9uZ2luZyB0byB0aGUgc3BlY2lmaWVkIHVzZXJuYW1lIHdhcyBub3QgZm91bmQuIFVzZXJuYW1lOiAkKCRVc2VybmFtZSkiIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICggJFByb2Nlc3NJZCAtbmUgJG51bGwgLWFuZCAkUHJvY2Vzc0lkIC1uZSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkVG9rZW4gaW4gJEFsbFRva2VucykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKCRUb2tlbiB8IEdldC1NZW1iZXIgUHJvY2Vzc0lkKSAtYW5kICRUb2tlbi5Qcm9jZXNzSWQgLWVxICRQcm9jZXNzSWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaFRva2VuID0gJFRva2VuLmhUb2tlbgogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJTZWxlY3RpbmcgdG9rZW4gYnkgUHJvY2Vzc0lEIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoJGhUb2tlbiAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkEgdG9rZW4gYmVsb25naW5nIHRvIFByb2Nlc3NJZCAkKCRQcm9jZXNzSWQpIGNvdWxkIG5vdCBiZSBmb3VuZC4gRWl0aGVyIHRoZSBwcm9jZXNzIGRvZXNuJ3QgZXhpc3Qgb3IgaXQgaXMgYSBwcm90ZWN0ZWQgcHJvY2VzcyBhbmQgY2Fubm90IGJlIG9wZW5lZC4iIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZWlmICgkVGhyZWFkSWQgLW5lICRudWxsIC1hbmQgJFRocmVhZElkIC1uZSAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkVG9rZW4gaW4gJEFsbFRva2VucykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKCRUb2tlbiB8IEdldC1NZW1iZXIgVGhyZWFkSWQpIC1hbmQgJFRva2VuLlRocmVhZElkIC1lcSAkVGhyZWFkSWQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAkaFRva2VuID0gJFRva2VuLmhUb2tlbgogICAgICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICJTZWxlY3RpbmcgdG9rZW4gYnkgVGhyZWFkSWQiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICgkaFRva2VuIC1lcSBbSW50UHRyXTo6WmVybykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBXcml0ZS1FcnJvciAiQSB0b2tlbiBiZWxvbmdpbmcgdG8gVGhyZWFkSWQgJCgkVGhyZWFkSWQpIGNvdWxkIG5vdCBiZSBmb3VuZC4gRWl0aGVyIHRoZSB0aHJlYWQgZG9lc24ndCBleGlzdCBvciB0aGUgdGhyZWFkIGlzIGluIGEgcHJvdGVjdGVkIHByb2Nlc3MgYW5kIGNhbm5vdCBiZSBvcGVuZWQuIiAtRXJyb3JBY3Rpb24gU3RvcAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJFByb2Nlc3MgLW5lICRudWxsKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3JlYWNoICgkVG9rZW4gaW4gJEFsbFRva2VucykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBpZiAoKCRUb2tlbiB8IEdldC1NZW1iZXIgUHJvY2Vzc0lkKSAtYW5kICRUb2tlbi5Qcm9jZXNzSWQgLWVxICRQcm9jZXNzLklkKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgJGhUb2tlbiA9ICRUb2tlbi5oVG9rZW4KICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtVmVyYm9zZSAiU2VsZWN0aW5nIHRva2VuIGJ5IFByb2Nlc3Mgb2JqZWN0IgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoJGhUb2tlbiAtZXEgW0ludFB0cl06Olplcm8pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgIkEgdG9rZW4gYmVsb25naW5nIHRvIFByb2Nlc3MgJCgkUHJvY2Vzcy5OYW1lKSBQcm9jZXNzSWQgJCgkUHJvY2Vzcy5JZCkgY291bGQgbm90IGJlIGZvdW5kLiBFaXRoZXIgdGhlIHByb2Nlc3MgZG9lc24ndCBleGlzdCBvciBpdCBpcyBhIHByb3RlY3RlZCBwcm9jZXNzIGFuZCBjYW5ub3QgYmUgb3BlbmVkLiIgLUVycm9yQWN0aW9uIFN0b3AKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJNdXN0IHN1cHBseSBhIFVzZXJuYW1lLCBQcm9jZXNzSWQsIFRocmVhZElkLCBvciBQcm9jZXNzIG9iamVjdCIgIC1FcnJvckFjdGlvbiBTdG9wCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgICNVc2UgdGhlIHRva2VuIGZvciB0aGUgc2VsZWN0ZWQgYWN0aW9uCiAgICAgICAgICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJDcmVhdGVQcm9jZXNzIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKC1ub3QgJE5vVUkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgU2V0LURlc2t0b3BBQ0xzCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgQ3JlYXRlLVByb2Nlc3NXaXRoVG9rZW4gLWhUb2tlbiAkaFRva2VuIC1Qcm9jZXNzTmFtZSAkQ3JlYXRlUHJvY2VzcyAtUHJvY2Vzc0FyZ3MgJFByb2Nlc3NBcmdzCgogICAgICAgICAgICAgICAgSW52b2tlLVJldmVydFRvU2VsZgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2VpZiAoJEltcGVyc29uYXRlVXNlcikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgSW52b2tlLUltcGVyc29uYXRlVXNlciAtaFRva2VuICRoVG9rZW4gfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICJSdW5uaW5nIEFzOiAkKFtFbnZpcm9ubWVudF06OlVzZXJEb21haW5OYW1lKVwkKFtFbnZpcm9ubWVudF06OlVzZXJOYW1lKSIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgRnJlZS1BbGxUb2tlbnMgLVRva2VuSW5mb09ianMgJEFsbFRva2VucwogICAgICAgIH0KICAgICAgICBlbHNlaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1pZXEgIldob0FtSSIpCiAgICAgICAgewogICAgICAgICAgICBXcml0ZS1PdXRwdXQgIiQoW0Vudmlyb25tZW50XTo6VXNlckRvbWFpbk5hbWUpXCQoW0Vudmlyb25tZW50XTo6VXNlck5hbWUpIgogICAgICAgIH0KICAgICAgICBlbHNlICNFbnVtZXJhdGUgdG9rZW5zCiAgICAgICAgewogICAgICAgICAgICAkQWxsVG9rZW5zID0gRW51bS1BbGxUb2tlbnMKCiAgICAgICAgICAgIGlmICgkUHNDbWRsZXQuUGFyYW1ldGVyU2V0TmFtZSAtaWVxICJTaG93QWxsIikKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgV3JpdGUtT3V0cHV0ICRBbGxUb2tlbnMKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFdyaXRlLU91dHB1dCAoR2V0LVVuaXF1ZVRva2VucyAtQWxsVG9rZW5zICRBbGxUb2tlbnMpLlRva2VuQnlVc2VyLlZhbHVlcwogICAgICAgICAgICB9CgogICAgICAgICAgICBJbnZva2UtUmV2ZXJ0VG9TZWxmCgogICAgICAgICAgICBGcmVlLUFsbFRva2VucyAtVG9rZW5JbmZvT2JqcyAkQWxsVG9rZW5zCiAgICAgICAgfQogICAgfQoKCiAgICAjU3RhcnQgdGhlIG1haW4gZnVuY3Rpb24KICAgIE1haW4KfQoK
