Invoke-Portscan.ps1,581b1b4b82233c49559f9d816d4de3e9,Scan result is 32768. IsMalware: 1,ZnVuY3Rpb24gSW52b2tlLVBvcnRzY2FuCnsKPCMKLlNZTk9QU0lTCgpTaW1wbGUgcG9ydHNjYW4gbW9kdWxlCgpQb3dlclNwbG9pdCBGdW5jdGlvbjogSW52b2tlLVBvcnRzY2FuCkF1dGhvcjogUmljaCBMdW5kZWVuIChodHRwOi8vd2Vic3RlcnNQcm9kaWd5Lm5ldCkKTGljZW5zZTogQlNEIDMtQ2xhdXNlClJlcXVpcmVkIERlcGVuZGVuY2llczogTm9uZQpPcHRpb25hbCBEZXBlbmRlbmNpZXM6IE5vbmUKCi5ERVNDUklQVElPTgoKRG9lcyBhIHNpbXBsZSBwb3J0IHNjYW4gdXNpbmcgcmVndWxhciBzb2NrZXRzLCBiYXNlZCAocHJldHR5KSBsb29zZWx5IG9uIG5tYXAKCi5OT1RFUwoKdmVyc2lvbiAuMTMKCi5QQVJBTUVURVIgSG9zdHMKCkluY2x1ZGUgdGhlc2UgY29tbWEgc2VwZXJhdGVkIGhvc3RzIChzdXBwb3J0cyBJUHY0IENJRFIgbm90YXRpb24pIG9yIHBpcGUgdGhlbSBpbgoKLlBBUkFNRVRFUiBIb3N0RmlsZQoKSW5wdXQgaG9zdHMgZnJvbSBmaWxlIHJhdGhlciB0aGFuIGNvbW1hbmRsaW5lCgouUEFSQU1FVEVSIEV4Y2x1ZGVIb3N0cwoKRXhjbHVkZSB0aGVzZSBjb21tYSBzZXBlcmF0ZWQgaG9zdHMKCi5QQVJBTUVURVIgUG9ydHMKCkluY2x1ZGUgdGhlc2UgY29tbWEgc2VwZXJhdGVkIHBvcnRzIChjYW4gYWxzbyBiZSBhIHJhbmdlIGxpa2UgODAtOTApCgouUEFSQU1FVEVSIFBvcnRGaWxlCgpJbnB1dCBwb3J0cyBmcm9tIGEgZmlsZQoKLlBBUkFNRVRFUiBUb3BQb3J0cwoKSW5jbHVkZSB0aGUgeCB0b3AgcG9ydHMgLSBvbmx5IGdvZXMgdG8gMTAwMCwgZGVmYXVsdCBpcyB0b3AgNTAKCi5QQVJBTUVURVIgRXhjbHVkZWRQb3J0cwoKRXhjbHVkZSB0aGVzZSBjb21tYSBzZXBlcmF0ZWQgcG9ydHMKCi5QQVJBTUVURVIgT3BlbgoKT25seSBzaG93IGhvc3RzIHdpdGggb3BlbiBwb3J0cy4KCi5QQVJBTUVURVIgU2tpcERpc2NvdmVyeQoKVHJlYXQgYWxsIGhvc3RzIGFzIG9ubGluZSwgc2tpcCBob3N0IGRpc2NvdmVyeQoKLlBBUkFNRVRFUiBQaW5nT25seQoKUGluZyBzY2FuIG9ubHkgKGRpc2FibGUgcG9ydCBzY2FuKQoKLlBBUkFNRVRFUiBEaXNjb3ZlcnlQb3J0cwoKQ29tbWEgc2VwYXJhdGVkIHBvcnRzIHVzZWQgZm9yIGhvc3QgZGlzY292ZXJ5LiAtMSBpcyBhIHBpbmcKCi5QQVJBTUVURVIgVGhyZWFkcwoKbnVtYmVyIG9mIG1heCB0aHJlYWRzIGZvciB0aGUgdGhyZWFkIHBvb2wgKHBlciBob3N0KQoKLlBBUkFNRVRFUiBuSG9zdHMKCm51bWJlciBvZiBob3N0cyB0byBjb25jdXJyZW50bHkgc2NhbgoKLlBBUkFNRVRFUiBUaW1lb3V0CgpUaW1lb3V0IHRpbWUgb24gYSBjb25uZWN0aW9uIGluIG1pbGlzZWNvbmRzIGJlZm9yZSBwb3J0IGlzIGRlY2xhcmVkIGZpbHRlcmVkCgouUEFSQU1FVEVSIFNsZWVwVGltZXIKCldhaXQgYmVmb3JlIHRocmVhZCBjaGVja2luZywgaW4gbWlsaXNlY29uZHMKCi5QQVJBTUVURVIgU3luY0ZyZXEKCkhvdyBvZnRlbiAoaW4gdGVybXMgb2YgaG9zdHMpIHRvIHN5bmMgdGhyZWFkcyBhbmQgZmx1c2ggb3V0cHV0CgouUEFSQU1FVEVSIFQKClswLTVdIHNob3J0Y3V0IHBlcmZvcm1hbmNlIG9wdGlvbnMuIERlZmF1bHQgaXMgMy4gaGlnaGVyIGlzIG1vcmUgYWdncmVzc2l2ZS4gU2V0cyAobmhvc3RzLCB0aHJlYWRzLHRpbWVvdXQpCiAgICA1IHskbkhvc3RzPTMwOyAgJFRocmVhZHMgPSAxMDAwOyAkVGltZW91dCA9IDc1MCAgfQogICAgNCB7JG5Ib3N0cz0yNTsgICRUaHJlYWRzID0gMTAwMDsgJFRpbWVvdXQgPSAxMjAwIH0KICAgIDMgeyRuSG9zdHM9MjA7ICAkVGhyZWFkcyA9IDEwMDsgICRUaW1lb3V0ID0gMjUwMCB9CiAgICAyIHskbkhvc3RzPTE1OyAgJFRocmVhZHMgPSAzMjsgICAkVGltZW91dCA9IDMwMDAgfQogICAgMSB7JG5Ib3N0cz0xMDsgICRUaHJlYWRzID0gMzI7ICAgJFRpbWVvdXQgPSA1MDAwIH0KCi5QQVJBTUVURVIgR3JlcE91dAoKR3JlcHBhYmxlIG91dHB1dCBmaWxlCgouUEFSQU1FVEVSIFhtbE91dAoKb3V0cHV0IFhNTCBmaWxlCgouUEFSQU1FVEVSIFJlYWRhYmxlT3V0CgpvdXRwdXQgZmlsZSBpbiAncmVhZGFibGUnIGZvcm1hdAoKLlBBUkFNRVRFUiBBbGxmb3JtYXRzT3V0CgpvdXRwdXQgaW4gcmVhZGFibGUgKC5ubWFwKSwgeG1sICgueG1sKSwgYW5kIGdyZXBwYWJsZSAoLmdubWFwKSBmb3JtYXRzCgouUEFSQU1FVEVSIG5vUHJvZ3Jlc3NNZXRlcgoKU3VwcHJlc3NlcyB0aGUgcHJvZ3Jlc3MgbWV0ZXIKCi5QQVJBTUVURVIgcXVpZXQKCnN1cHJlc3NlcyByZXR1cm5lZCBvdXRwdXQgYW5kIGRvbid0IHN0b3JlIGhvc3RzIGluIG1lbW9yeSAtIHVzZWZ1bCBmb3IgdmVyeSBsYXJnZSBzY2FucwoKLlBBUkFNRVRFUiBGb3JjZU92ZXJ3cml0ZQoKRm9yY2UgT3ZlcndyaXRlIGlmIG91dHB1dCBGaWxlcyBleGlzdC4gT3RoZXJ3aXNlIGl0IHRocm93cyBleGNlcHRpb24KCi5FWEFNUExFCgpDOlxQUz4gSW52b2tlLVBvcnRzY2FuIC1Ib3N0cyAid2Vic3RlcnNwcm9kaWd5Lm5ldCxnb29nbGUuY29tLG1pY3Jvc29mdC5jb20iIC1Ub3BQb3J0cyA1MAoKRGVzY3JpcHRpb24KLS0tLS0tLS0tLS0KU2NhbnMgdGhlIHRvcCA1MCBwb3J0cyBmb3IgaG9zdHMgZm91bmQgZm9yIHdlYnN0ZXJzcHJvZGlneS5uZXQsZ29vZ2xlLmNvbSwgYW5kIG1pY3Jvc29mdC5jb20KCi5FWEFNUExFCgpDOlxQUz4gZWNobyB3ZWJzdGVyc3Byb2RpZ3kubmV0IHwgSW52b2tlLVBvcnRzY2FuIC1vRyB0ZXN0LmdubWFwIC1mIC1wb3J0cyAiODAsNDQzLDgwODAiCgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpEb2VzIGEgcG9ydHNjYW4gb2YgIndlYnN0ZXJzcHJvZGlneS5uZXQiLCBhbmQgd3JpdGVzIGEgZ3JlcHBhYmxlIG91dHB1dCBmaWxlCgouRVhBTVBMRQoKQzpcUFM+IEludm9rZS1Qb3J0c2NhbiAtSG9zdHMgMTkyLjE2OC4xLjEvMjQgLVQgNCAtVG9wUG9ydHMgMjUgLW9BIGxvY2FsbmV0CgpEZXNjcmlwdGlvbgotLS0tLS0tLS0tLQpTY2FucyB0aGUgdG9wIDIwIHBvcnRzIGZvciBob3N0cyBmb3VuZCBpbiB0aGUgMTkyLjE2OC4xLjEvMjQgcmFuZ2UsIG91dHB1dHMgYWxsIGZpbGUgZm9ybWF0cwoKLkxJTksKCmh0dHA6Ly93ZWJzdGVyc3Byb2RpZ3kubmV0CiM+CgogICAgW0NtZGxldEJpbmRpbmcoKV1QYXJhbSAoCiAgICAgICAgI0hvc3QsIFBvcnRzCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSJjbWRIb3N0cyIsCgogICAgICAgICAgICAgICAgICAgVmFsdWVGcm9tUGlwZWxpbmU9JFRydWUsCiAgICAgICAgICAgICAgICAgICBNYW5kYXRvcnkgPSAkVHJ1ZSldCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nW11dICRIb3N0cywKCiAgICAgICAgW1BhcmFtZXRlcihQYXJhbWV0ZXJTZXROYW1lPSJmSG9zdHMiLAogICAgICAgICAgICAgICAgICAgTWFuZGF0b3J5ID0gJFRydWUpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJpTCIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gICRIb3N0RmlsZSwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJleGNsdWRlIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkRXhjbHVkZUhvc3RzLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoInAiKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRQb3J0cywKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJpUCIpXQogICAgICAgICAgICAgICAgICAgW1N0cmluZ10gJFBvcnRGaWxlLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkVG9wUG9ydHMsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygieFBvcnRzIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkRXhjbHVkZWRQb3J0cywKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW1N3aXRjaF0gJE9wZW4sCgogICAgICAgICNIb3N0IERpc2NvdmVyeQogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygiUG4iKV0KICAgICAgICAgICAgICAgICAgIFtTd2l0Y2hdICRTa2lwRGlzY292ZXJ5LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoInNuIildCiAgICAgICAgICAgICAgICAgICBbU3dpdGNoXSAkUGluZ09ubHksCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygiUFMiKV0KICAgICAgICAgICAgICAgICAgIFtzdHJpbmddICREaXNjb3ZlcnlQb3J0cyA9ICItMSw0NDUsODAsNDQzIiwKCiAgICAgICAgI1RpbWluZyBhbmQgUGVyZm9ybWFuY2UKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbaW50XSAkVGhyZWFkcyA9IDEwMCwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW2ludF0gJG5Ib3N0cyA9IDI1LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbaW50XSAkVGltZW91dCA9IDIwMDAsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtpbnRdICRTbGVlcFRpbWVyID0gNTAwLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbaW50XSAkU3luY0ZyZXEgPSAxMDI0LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbaW50XSAkVCwKCiAgICAgICAgI091dHB1dAogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygib0ciKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRHcmVwT3V0LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoIm9YIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkWG1sT3V0LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoIm9OIildCiAgICAgICAgICAgICAgICAgICBbU3RyaW5nXSAkUmVhZGFibGVPdXQsCgogICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJEZhbHNlKV0KICAgICAgICAgICAgICAgICAgIFtBbGlhcygib0EiKV0KICAgICAgICAgICAgICAgICAgIFtTdHJpbmddICRBbGxmb3JtYXRzT3V0LAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbU3dpdGNoXSAkbm9Qcm9ncmVzc01ldGVyLAoKICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRGYWxzZSldCiAgICAgICAgICAgICAgICAgICBbQWxpYXMoInEiKV0KICAgICAgICAgICAgICAgICAgIFtTd2l0Y2hdICRxdWlldCwKCiAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkRmFsc2UpXQogICAgICAgICAgICAgICAgICAgW0FsaWFzKCJGIildCiAgICAgICAgICAgICAgICAgICBbU3dpdGNoXSAkRm9yY2VPdmVyd3JpdGUKCiAgICAgICAgI1RPRE8gYWRkIHNjcmlwdCBwYXJhbWV0ZXIKICAgICAgICAjVE9ETyBhZGQgcmVzdW1lIHBhcmFtZXRlcgogICAgKQoKICAgIFBST0NFU1MgewoKICAgICAgICBTZXQtU3RyaWN0TW9kZSAtVmVyc2lvbiAyLjAKCiAgICAgICAgJHZlcnNpb24gPSAuMTMKICAgICAgICAkaG9zdExpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICAgICAkcG9ydExpc3QgPSBOZXctT2JqZWN0IFN5c3RlbS5Db2xsZWN0aW9ucy5BcnJheUxpc3QKICAgICAgICAkaG9zdFBvcnRMaXN0ID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CgogICAgICAgICRzY2FubmVkSG9zdExpc3QgPSBAKCkKCiAgICAgICAgZnVuY3Rpb24gUGFyc2UtSG9zdHMKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbU3RyaW5nXSAkSG9zdHMKICAgICAgICAgICAgKQoKICAgICAgICAgICAgW1N0cmluZ1tdXSAkaUhvc3RzID0gJEhvc3RzLlNwbGl0KCIsIikKCiAgICAgICAgICAgIGZvcmVhY2goJGlIb3N0IGluICRpSG9zdHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRpSG9zdCA9ICRpSG9zdC5SZXBsYWNlKCIgIiwgIiIpCgogICAgICAgICAgICAgICAgaWYoISRpSG9zdCkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmKCRpSG9zdC5jb250YWlucygiLyIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRuZXRQYXJ0ID0gJGlIb3N0LnNwbGl0KCIvIilbMF0KICAgICAgICAgICAgICAgICAgICBbdWludDMyXSRtYXNrUGFydCA9ICRpSG9zdC5zcGxpdCgiLyIpWzFdCgogICAgICAgICAgICAgICAgICAgICRhZGRyZXNzID0gW1N5c3RlbS5OZXQuSVBBZGRyZXNzXTo6UGFyc2UoJG5ldFBhcnQpCgogICAgICAgICAgICAgICAgICAgIGlmICgkbWFza1BhcnQgLWdlICRhZGRyZXNzLkdldEFkZHJlc3NCeXRlcygpLkxlbmd0aCAqIDgpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAiQmFkIGhvc3QgbWFzayIKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRudW1ob3N0cyA9IFtTeXN0ZW0ubWF0aF06OlBvdygyLCgoJGFkZHJlc3MuR2V0QWRkcmVzc0J5dGVzKCkuTGVuZ3RoICo4KSAtICRtYXNrUGFydCkpCgogICAgICAgICAgICAgICAgICAgICRzdGFydGFkZHJlc3MgPSAkYWRkcmVzcy5HZXRBZGRyZXNzQnl0ZXMoKQogICAgICAgICAgICAgICAgICAgIFthcnJheV06OlJldmVyc2UoJHN0YXJ0YWRkcmVzcykKCiAgICAgICAgICAgICAgICAgICAgJHN0YXJ0YWRkcmVzcyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MzIoJHN0YXJ0YWRkcmVzcywgMCkKICAgICAgICAgICAgICAgICAgICBbdWludDMyXSRzdGFydE1hc2sgPSAoW1N5c3RlbS5tYXRoXTo6UG93KDIsICRtYXNrUGFydCktMSkgKiAoW1N5c3RlbS5NYXRoXTo6UG93KDIsKDMyIC0gJG1hc2tQYXJ0KSkpCiAgICAgICAgICAgICAgICAgICAgJHN0YXJ0QWRkcmVzcyA9ICRzdGFydEFkZHJlc3MgLWJhbmQgJHN0YXJ0TWFzawoKICAgICAgICAgICAgICAgICAgICAjaW4gcG93ZXJzaGVsbCAyLjAgdGhlcmUgYXJlIDQgMCBieXRlcyBwYWRkZWQsIHNvIHRoZSBbMC4uM10gaXMgbmVjZXNzYXJ5CiAgICAgICAgICAgICAgICAgICAgJHN0YXJ0QWRkcmVzcyA9IFtTeXN0ZW0uQml0Q29udmVydGVyXTo6R2V0Qnl0ZXMoJHN0YXJ0YWRkcmVzcylbMC4uM10KICAgICAgICAgICAgICAgICAgICBbYXJyYXldOjpSZXZlcnNlKCRzdGFydGFkZHJlc3MpCgogICAgICAgICAgICAgICAgICAgICRhZGRyZXNzID0gW1N5c3RlbS5OZXQuSVBBZGRyZXNzXSBbYnl0ZVtdXSAkc3RhcnRBZGRyZXNzCgogICAgICAgICAgICAgICAgICAgICRob3N0TGlzdC5BZGQoJGFkZHJlc3MuSVBBZGRyZXNzVG9TdHJpbmcpCgogICAgICAgICAgICAgICAgICAgIGZvciAoJGk9MDsgJGkgLWx0ICRudW1ob3N0cy0xOyAkaSsrKQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICRuZXh0QWRkcmVzcyA9ICAkYWRkcmVzcy5HZXRBZGRyZXNzQnl0ZXMoKQogICAgICAgICAgICAgICAgICAgICAgICBbYXJyYXldOjpSZXZlcnNlKCRuZXh0QWRkcmVzcykKICAgICAgICAgICAgICAgICAgICAgICAgJG5leHRBZGRyZXNzID0gIFtTeXN0ZW0uQml0Q29udmVydGVyXTo6VG9VSW50MzIoJG5leHRBZGRyZXNzLCAwKQogICAgICAgICAgICAgICAgICAgICAgICAkbmV4dEFkZHJlc3MgKysKICAgICAgICAgICAgICAgICAgICAgICAgJG5leHRBZGRyZXNzID0gW1N5c3RlbS5CaXRDb252ZXJ0ZXJdOjpHZXRCeXRlcygkbmV4dEFkZHJlc3MpWzAuLjNdCiAgICAgICAgICAgICAgICAgICAgICAgIFthcnJheV06OlJldmVyc2UoJG5leHRBZGRyZXNzKQoKICAgICAgICAgICAgICAgICAgICAgICAgJGFkZHJlc3MgPSBbU3lzdGVtLk5ldC5JUEFkZHJlc3NdIFtieXRlW11dICRuZXh0QWRkcmVzcwogICAgICAgICAgICAgICAgICAgICAgICAkaG9zdExpc3QuQWRkKCRhZGRyZXNzLklQQWRkcmVzc1RvU3RyaW5nKQoKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRob3N0TGlzdC5BZGQoJGlIb3N0KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBQYXJzZS1JTEhvc3RzCiAgICAgICAgewogICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbU3RyaW5nXSAkSG9zdEZpbGUKICAgICAgICAgICAgKQoKICAgICAgICAgICAgR2V0LUNvbnRlbnQgJEhvc3RGaWxlIHwgRm9yRWFjaC1PYmplY3QgewogICAgICAgICAgICAgICAgUGFyc2UtSG9zdHMgJF8KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gRXhjbHVkZS1Ib3N0cwogICAgICAgIHsKICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRleGNsdWRlSG9zdHMKICAgICAgICAgICAgKQoKICAgICAgICAgICAgW1N0cmluZ1tdXSAkaUhvc3RzID0gJGV4Y2x1ZGVIb3N0cy5TcGxpdCgiLCIpCgogICAgICAgICAgICBmb3JlYWNoKCRpSG9zdCBpbiAkaUhvc3RzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAkaUhvc3QgPSAkaUhvc3QuUmVwbGFjZSgiICIsICIiKQogICAgICAgICAgICAgICAgJGhvc3RMaXN0LlJlbW92ZSgkaUhvc3QpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIEdldC1Ub3BQb3J0CiAgICAgICAgewogICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0KICAgICAgICAgICAgICAgIFtWYWxpZGF0ZVJhbmdlKDEsMTAwMCldCiAgICAgICAgICAgICAgICBbaW50XSAkbnVtUG9ydHMKICAgICAgICAgICAgKQoKICAgICAgICAgICAgI2xpc3Qgb2YgdG9wIDEwMDAgcG9ydHMgZnJvbSBubWFwIGZyb20gSnVuIDIwMTMKICAgICAgICAgICAgW2ludFtdXSAkdG9wUG9ydExpc3QgPSBAKDgwLDIzLDQ0MywyMSwzMzg5LDExMCw0NDUsMTM5LDE0Myw1MywxMzUsMzMwNiw4MDgwLDIyCiAgICAgICAgICAgICAgICAgICAgICAgIDE3MjMsMTExLDk5NSw5OTMsNTkwMCwxMDI1LDE3MjAsNTQ4LDExMyw4MSw2MDAxLDE3OSwxMDI2LDIwMDAsODQ0MywKICAgICAgICAgICAgICAgICAgICAgICAgODAwMCwzMjc2OCw1NTQsMjYsMTQzMyw0OTE1MiwyMDAxLDUxNSw4MDA4LDQ5MTU0LDEwMjcsNTY2Niw2NDYsNTAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgNTYzMSw2MzEsNDkxNTMsODA4MSwyMDQ5LDg4LDc5LDU4MDAsMTA2LDIxMjEsMTExMCw0OTE1NSw2MDAwLDUxMywKICAgICAgICAgICAgICAgICAgICAgICAgOTkwLDUzNTcsNDkxNTYsNTQzLDU0NCw1MTAxLDE0NCw3LDM4OSw4MDA5LDk5OTksNTAwOSw3MDcwLDUxOTAsMzAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgNTQzMiwxOTAwLDM5ODYsMTMsMTAyOSw5LDUwNTEsNjY0Niw0OTE1NywxMDI4LDg3MywxNzU1LDI3MTcsNDg5OSw5MTAwLAogICAgICAgICAgICAgICAgICAgICAgICAxMTksMzcsMTAwMCwzMDAxLDUwMDEsODIsMTAwMTAsMTAzMCw5MDkwLDIxMDcsMTAyNCwyMTAzLDYwMDQsMTgwMSwKICAgICAgICAgICAgICAgICAgICAgICAgNTA1MCwxOSw4MDMxLDEwNDEsMjU1LDEwNDgsMTA0OSwxMDUzLDEwNTQsMTA1NiwxMDY0LDM3MDMsMTcsODA4LDM2ODksCiAgICAgICAgICAgICAgICAgICAgICAgIDEwMzEsMTA0NCwxMDcxLDU5MDEsMTAwLDkxMDIsMjg2OSw0MDAxLDUxMjAsODAxMCw5MDAwLDIxMDUsNjM2LDEwMzgsCiAgICAgICAgICAgICAgICAgICAgICAgIDI2MDEsMSw3MDAwLDEwNjYsMTA2OSw2MjUsMzExLDI4MCwyNTQsNDAwMCwxNzYxLDUwMDMsMjAwMiwxOTk4LDIwMDUsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwMzIsMTA1MCw2MTEyLDE1MjEsMjE2MSw2MDAyLDI0MDEsOTAyLDQwNDUsNzg3LDc5MzcsMTA1OCwyMzgzLDEwMzMsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwNDAsMTA1OSw1MDAwMCw1NTU1LDE0OTQsMyw1OTMsMjMwMSwzMjY4LDc5MzgsMTAyMiwxMjM0LDEwMzUsMTAzNiwxMDM3LAogICAgICAgICAgICAgICAgICAgICAgICAxMDc0LDgwMDIsOTAwMSw0NjQsNDk3LDE5MzUsMjAwMyw2NjY2LDY1NDMsMjQsMTM1MiwzMjY5LDExMTEsNDA3LDUwMCwKICAgICAgICAgICAgICAgICAgICAgICAgMjAsMjAwNiwxMDM0LDEyMTgsMzI2MCwxNTAwMCw0NDQ0LDI2NCwzMywyMDA0LDEwNDIsNDI1MTAsOTk5LDMwNTIsMTAyMywKICAgICAgICAgICAgICAgICAgICAgICAgMjIyLDEwNjgsODg4LDcxMDAsMTcxNyw5OTIsMjAwOCw3MDAxLDIwMDcsODA4Miw1MTIsMTA0MywyMDA5LDU4MDEsMTcwMCwKICAgICAgICAgICAgICAgICAgICAgICAgNzAxOSw1MDAwMSw0NjYyLDIwNjUsNDIsMjYwMiwzMzMzLDk1MzUsNTEwMCwyNjA0LDQwMDIsNTAwMiwxMDQ3LDEwNTEsMTA1MiwKICAgICAgICAgICAgICAgICAgICAgICAgMTA1NSwxMDYwLDEwNjIsMTMxMSwzMjgzLDQ0NDMsNTIyNSw1MjI2LDYwNTksNjc4OSw4MDg5LDg2NTEsODY1Miw4NzAxLDk0MTUsCiAgICAgICAgICAgICAgICAgICAgICAgIDk1OTMsOTU5NCw5NTk1LDE2OTkyLDE2OTkzLDIwODI4LDIzNTAyLDMyNzY5LDMzMzU0LDM1NTAwLDUyODY5LDU1NTU1LDU1NjAwLAogICAgICAgICAgICAgICAgICAgICAgICA2NDYyMyw2NDY4MCw2NTAwMCw2NTM4OSwxMDY3LDEzNzgyLDM2Niw1OTAyLDkwNTAsODUsMTAwMiw1NTAwLDE4NjMsMTg2NCwKICAgICAgICAgICAgICAgICAgICAgICAgNTQzMSw4MDg1LDEwMjQzLDQ1MTAwLDQ5OTk5LDUxMTAzLDQ5LDkwLDY2NjcsMTUwMyw2ODgxLDI3MDAwLDM0MCwxNTAwLDgwMjEsCiAgICAgICAgICAgICAgICAgICAgICAgIDIyMjIsNTU2Niw4MDg4LDg4OTksOTA3MSw1MTAyLDYwMDUsOTEwMSwxNjMsNTY3OSwxNDYsNjQ4LDE2NjYsODMsMzQ3Niw1MDA0LAogICAgICAgICAgICAgICAgICAgICAgICA1MjE0LDgwMDEsODA4Myw4MDg0LDkyMDcsMTQyMzgsMzAsOTEyLDEyMzQ1LDIwMzAsMjYwNSw2LDU0MSw0LDEyNDgsMzAwNSw4MDA3LAogICAgICAgICAgICAgICAgICAgICAgICAzMDYsODgwLDI1MDAsMTA4NiwxMDg4LDI1MjUsNDI0Miw4MjkxLDkwMDksNTI4MjIsOTAwLDYxMDEsMjgwOSw3MjAwLDIxMSw4MDAsCiAgICAgICAgICAgICAgICAgICAgICAgIDk4NywxMDgzLDEyMDAwLDcwNSw3MTEsMjAwMDUsNjk2OSwxMzc4MywxMDQ1LDEwNDYsMTA2MSwxMDYzLDEwNzAsMTA3MiwxMDczLAogICAgICAgICAgICAgICAgICAgICAgICAxMDc1LDEwNzcsMTA3OCwxMDc5LDEwODEsMTA4MiwxMDg1LDEwOTMsMTA5NCwxMDk2LDEwOTgsMTA5OSwxMTAwLDExMDQsMTEwNiwKICAgICAgICAgICAgICAgICAgICAgICAgMTEwNywxMTA4LDExNDgsMTE2OSwxMjcyLDEzMTAsMTY4NywxNzE4LDE3ODMsMTg0MCwyMTAwLDIxMTksMjEzNSwyMTQ0LDIxNjAsCiAgICAgICAgICAgICAgICAgICAgICAgIDIxOTAsMjI2MCwyMzgxLDIzOTksMjQ5MiwyNjA3LDI3MTgsMjgxMSwyODc1LDMwMTcsMzAzMSwzMDcxLDMyMTEsMzMwMCwzMzAxLAogICAgICAgICAgICAgICAgICAgICAgICAzMzIzLDMzMjUsMzM1MSwzNDA0LDM1NTEsMzU4MCwzNjU5LDM3NjYsMzc4NCwzODAxLDM4MjcsMzk5OCw0MDAzLDQxMjYsNDEyOSwKICAgICAgICAgICAgICAgICAgICAgICAgNDQ0OSw1MjIyLDUyNjksNTYzMyw1NzE4LDU4MTAsNTgyNSw1ODc3LDU5MTAsNTkxMSw1OTI1LDU5NTksNTk2MCw1OTYxLDU5NjIsCiAgICAgICAgICAgICAgICAgICAgICAgIDU5ODcsNTk4OCw1OTg5LDYxMjMsNjEyOSw2MTU2LDYzODksNjU4MCw2OTAxLDcxMDYsNzYyNSw3Nzc3LDc3NzgsNzkxMSw4MDg2LAogICAgICAgICAgICAgICAgICAgICAgICA4MTgxLDgyMjIsODMzMyw4NDAwLDg0MDIsODYwMCw4NjQ5LDg4NzMsODk5NCw5MDAyLDkwMTEsOTA4MCw5MjIwLDkyOTAsOTQ4NSwKICAgICAgICAgICAgICAgICAgICAgICAgOTUwMCw5NTAyLDk1MDMsOTYxOCw5OTAwLDk5NjgsMTAwMDIsMTAwMTIsMTAwMjQsMTAwMjUsMTA1NjYsMTA2MTYsMTA2MTcsMTA2MjEsCiAgICAgICAgICAgICAgICAgICAgICAgIDEwNjI2LDEwNjI4LDEwNjI5LDExMTEwLDEzNDU2LDE0NDQyLDE1MDAyLDE1MDAzLDE1NjYwLDE2MDAxLDE2MDE2LDE2MDE4LDE3OTg4LAogICAgICAgICAgICAgICAgICAgICAgICAxOTEwMSwxOTgwMSwxOTg0MiwyMDAwMCwyMDAzMSwyMDIyMSwyMDIyMiwyMTU3MSwyMjkzOSwyNDgwMCwyNTczNCwyNzcxNSwyODIwMSwKICAgICAgICAgICAgICAgICAgICAgICAgMzAwMDAsMzA3MTgsMzEwMzgsMzI3ODEsMzI3ODIsMzM4OTksMzQ1NzEsMzQ1NzIsMzQ1NzMsNDAxOTMsNDgwODAsNDkxNTgsNDkxNTksCiAgICAgICAgICAgICAgICAgICAgICAgIDQ5MTYwLDUwMDAzLDUwMDA2LDUwODAwLDU3Mjk0LDU4MDgwLDYwMDIwLDYzMzMxLDY1MTI5LDY5MSwyMTIsMTAwMSwxOTk5LDIwMjAsCiAgICAgICAgICAgICAgICAgICAgICAgIDI5OTgsNjAwMyw3MDAyLDUwMDAyLDMyLDIwMzMsMzM3Miw5OSw0MjUsNzQ5LDU5MDMsNDMsNDU4LDU0MDUsNjEwNiw2NTAyLDcwMDcsCiAgICAgICAgICAgICAgICAgICAgICAgIDEzNzIyLDEwODcsMTA4OSwxMTI0LDExNTIsMTE4MywxMTg2LDEyNDcsMTI5NiwxMzM0LDE1ODAsMTc4MiwyMTI2LDIxNzksMjE5MSwyMjUxLAogICAgICAgICAgICAgICAgICAgICAgICAyNTIyLDMwMTEsMzAzMCwzMDc3LDMyNjEsMzQ5MywzNTQ2LDM3MzcsMzgyOCwzODcxLDM4ODAsMzkxOCwzOTk1LDQwMDYsNDExMSw0NDQ2LAogICAgICAgICAgICAgICAgICAgICAgICA1MDU0LDUyMDAsNTI4MCw1Mjk4LDU4MjIsNTg1OSw1OTA0LDU5MTUsNTkyMiw1OTYzLDcxMDMsNzQwMiw3NDM1LDc0NDMsNzUxMiw4MDExLAogICAgICAgICAgICAgICAgICAgICAgICA4MDkwLDgxMDAsODE4MCw4MjU0LDg1MDAsODY1NCw5MDkxLDkxMTAsOTY2Niw5ODc3LDk5NDMsOTk0NCw5OTk4LDEwMDA0LDEwNzc4LDE1NzQyLAogICAgICAgICAgICAgICAgICAgICAgICAxNjAxMiwxODk4OCwxOTI4MywxOTMxNSwxOTc4MCwyNDQ0NCwyNzM1MiwyNzM1MywyNzM1NSwzMjc4NCw0OTE2Myw0OTE2NSw0OTE3NSwKICAgICAgICAgICAgICAgICAgICAgICAgNTAzODksNTA2MzYsNTE0OTMsNTUwNTUsNTY3MzgsNjE1MzIsNjE5MDAsNjIwNzgsMTAyMSw5MDQwLDY2Niw3MDAsODQsNTQ1LDExMTIsCiAgICAgICAgICAgICAgICAgICAgICAgIDE1MjQsMjA0MCw0MzIxLDU4MDIsMzgyOTIsNDk0MDAsMTA4NCwxNjAwLDIwNDgsMjExMSwzMDA2LDY1NDcsNjY5OSw5MTExLDE2MDgwLAogICAgICAgICAgICAgICAgICAgICAgICA1NTUsNjY3LDcyMCw4MDEsMTQ0MywxNTMzLDIxMDYsNTU2MCw2MDA3LDEwOTAsMTA5MSwxMTE0LDExMTcsMTExOSwxMTIyLDExMzEsMTEzOCwKICAgICAgICAgICAgICAgICAgICAgICAgMTE1MSwxMTc1LDExOTksMTIwMSwxMjcxLDE4NjIsMjMyMywyMzkzLDIzOTQsMjYwOCwyNzI1LDI5MDksMzAwMywzMTY4LDMyMjEsMzMyMiwKICAgICAgICAgICAgICAgICAgICAgICAgMzMyNCwzMzkwLDM1MTcsMzUyNywzODAwLDM4MDksMzgxNCwzODI2LDM4NjksMzg3OCwzODg5LDM5MDUsMzkxNCwzOTIwLDM5NDUsMzk3MSwKICAgICAgICAgICAgICAgICAgICAgICAgNDAwNCw0MDA1LDQyNzksNDQ0NSw0NTUwLDQ1NjcsNDg0OCw0OTAwLDUwMzMsNTA4MCw1MDg3LDUyMjEsNTQ0MCw1NTQ0LDU2NzgsNTczMCwKICAgICAgICAgICAgICAgICAgICAgICAgNTgxMSw1ODE1LDU4NTAsNTg2Miw1OTA2LDU5MDcsNTk1MCw1OTUyLDYwMjUsNjUxMCw2NTY1LDY1NjcsNjY4OSw2NjkyLDY3NzksNjc5MiwKICAgICAgICAgICAgICAgICAgICAgICAgNjgzOSw3MDI1LDc0OTYsNzY3Niw3ODAwLDc5MjAsNzkyMSw3OTk5LDgwMjIsODA0Miw4MDQ1LDgwOTMsODA5OSw4MjAwLDgyOTAsODI5MiwKICAgICAgICAgICAgICAgICAgICAgICAgODMwMCw4MzgzLDkwMDMsOTA4MSw5MDk5LDkyMDAsOTQxOCw5NTc1LDk4NzgsOTg5OCw5OTE3LDEwMDAzLDEwMTgwLDEwMjE1LDExMTExLAogICAgICAgICAgICAgICAgICAgICAgICAxMjE3NCwxMjI2NSwxNDQ0MSwxNTAwNCwxNjAwMCwxNjExMywxNzg3NywxODA0MCwxODEwMSwxOTM1MCwyNTczNSwyNjIxNCwyNzM1NiwKICAgICAgICAgICAgICAgICAgICAgICAgMzA5NTEsMzI3ODMsMzI3ODUsNDA5MTEsNDE1MTEsNDQxNzYsNDQ1MDEsNDkxNjEsNDkxNjcsNDkxNzYsNTAzMDAsNTA1MDAsNTI2NzMsCiAgICAgICAgICAgICAgICAgICAgICAgIDUyODQ4LDU0MDQ1LDU0MzI4LDU1MDU2LDU2NzM3LDU3Nzk3LDYwNDQzLDcwLDQxNyw3MTQsNzIyLDc3Nyw5ODEsMTAwOSwyMDIyLDQyMjQsCiAgICAgICAgICAgICAgICAgICAgICAgIDQ5OTgsNjM0NiwzMDEsNTI0LDY2OCw3NjUsMjA0MSw1OTk5LDEwMDgyLDI1OSwxMDA3LDE0MTcsMTQzNCwxOTg0LDIwMzgsMjA2OCw0MzQzLAogICAgICAgICAgICAgICAgICAgICAgICA2MDA5LDcwMDQsNDQ0NDMsMTA5LDY4Nyw3MjYsOTExLDE0NjEsMjAzNSw0MTI1LDYwMDYsNzIwMSw5MTAzLDEyNSw0ODEsNjgzLDkwMywKICAgICAgICAgICAgICAgICAgICAgICAgMTAxMSwxNDU1LDIwMTMsMjA0MywyMDQ3LDY2NjgsNjY2OSwyNTYsNDA2LDg0MywyMDQyLDIwNDUsNTk5OCw5OTI5LDMxMzM3LDQ0NDQyLAogICAgICAgICAgICAgICAgICAgICAgICAxMDkyLDEwOTUsMTEwMiwxMTA1LDExMTMsMTEyMSwxMTIzLDExMjYsMTEzMCwxMTMyLDExMzcsMTE0MSwxMTQ1LDExNDcsMTE0OSwxMTU0LAogICAgICAgICAgICAgICAgICAgICAgICAxMTY0LDExNjUsMTE2NiwxMTc0LDExODUsMTE4NywxMTkyLDExOTgsMTIxMywxMjE2LDEyMTcsMTIzMywxMjM2LDEyNDQsMTI1OSwxMjc3LAogICAgICAgICAgICAgICAgICAgICAgICAxMjg3LDEzMDAsMTMwMSwxMzA5LDEzMjIsMTMyOCwxNTU2LDE2NDEsMTY4OCwxNzE5LDE3MjEsMTgwNSwxODEyLDE4MzksMTg3NSwxOTE0LAogICAgICAgICAgICAgICAgICAgICAgICAxOTcxLDE5NzIsMTk3NCwyMDk5LDIxNzAsMjE5NiwyMjAwLDIyODgsMjM2NiwyMzgyLDI1NTcsMjgwMCwyOTEwLDI5MjAsMjk2OCwzMDA3LAogICAgICAgICAgICAgICAgICAgICAgICAzMDEzLDMwNTAsMzExOSwzMzA0LDMzMDcsMzM3NiwzNDAwLDM0MTAsMzUxNCwzNjg0LDM2OTcsMzcwMCwzODI0LDM4NDYsMzg0OCwzODU5LAogICAgICAgICAgICAgICAgICAgICAgICAzODYzLDM4NzAsMzg3MiwzODg4LDM5MDcsMzkxNiwzOTMxLDM5NDEsMzk1NywzOTYzLDM5NjgsMzk2OSwzOTcyLDM5OTAsMzk5MywzOTk0LAogICAgICAgICAgICAgICAgICAgICAgICA0MDA5LDQwNDAsNDA4MCw0MDk2LDQxNDMsNDE0Nyw0MjAwLDQyNTIsNDQzMCw0NTU1LDQ2MDAsNDY1OCw0ODc1LDQ5NDksNTA0MCw1MDYzLAogICAgICAgICAgICAgICAgICAgICAgICA1MDc0LDUxNTEsNTIxMiw1MjIzLDUyNDIsNTI3OSw1MzM5LDUzNTMsNTUwMSw1ODA3LDU4MTIsNTgxOCw1ODIzLDU4NjgsNTg2OSw1ODk5LAogICAgICAgICAgICAgICAgICAgICAgICA1OTA1LDU5MDksNTkxNCw1OTE4LDU5MzgsNTk0MCw1OTY4LDU5ODEsNjA1MSw2MDYwLDYwNjgsNjIwMyw2MjQ3LDY1MDAsNjUwNCw2NTIwLAogICAgICAgICAgICAgICAgICAgICAgICA2NTUwLDY2MDApCiAgICAgICAgICAgICRudW1Qb3J0cy0tCiAgICAgICAgICAgICRwb3J0TGlzdC5BZGRSYW5nZSgkdG9wUG9ydExpc3RbMC4uJG51bVBvcnRzXSkKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFBhcnNlLVBvcnRzCiAgICAgICAgewogICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW1N0cmluZ10gJFBvcnRzLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldICRwTGlzdAogICAgICAgICAgICApCgogICAgICAgICAgICBmb3JlYWNoICgkcFJhbmdlIGluICRQb3J0cy5TcGxpdCgiLCIpKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgIy0xIGlzIGEgc3BlY2lhbCBjYXNlIGZvciBwaW5nCiAgICAgICAgICAgICAgICBpZiAoJHBSYW5nZSAtZXEgIi0xIikKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAkcExpc3QuQWRkKFtpbnRdJHBSYW5nZSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2VpZiAoJHBSYW5nZS5Db250YWlucygiLSIpKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFtpbnRbXV0gJHJhbmdlID0gJHBSYW5nZS5TcGxpdCgiLSIpCiAgICAgICAgICAgICAgICAgICAgaWYgKCRyYW5nZS5Db3VudCAtbmUgMiAtb3IgJHBSYW5nZS5TcGxpdCgiLSIpWzBdIC1lcSAiIiAtb3IgJHBSYW5nZS5zcGxpdCgiLSIpWzFdIC1lcSAiIikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJJbnZhbGlkIHBvcnQgcmFuZ2UiCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAkcExpc3QuQWRkUmFuZ2UoJHJhbmdlWzBdLi4kcmFuZ2VbMV0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJHBMaXN0LkFkZChbaW50XSRwUmFuZ2UpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvcmVhY2ggKCRwIGluICRwTGlzdCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRwIC1sdCAtMSAtb3IgJHAgLWd0IDY1NTM1KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJQb3J0ICRwIG91dCBvZiByYW5nZSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFBhcnNlLUlwUG9ydHMKICAgICAgICB7CiAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRQb3J0RmlsZQogICAgICAgICAgICApCgogICAgICAgICAgICBHZXQtQ29udGVudCAkUG9ydEZpbGUgfCBGb3JFYWNoLU9iamVjdCB7CiAgICAgICAgICAgICAgICBQYXJzZS1Qb3J0cyAtUG9ydHMgJF8gLXBMaXN0ICRwb3J0TGlzdAogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBSZW1vdmUtUG9ydHMKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbc3RyaW5nXSAkRXhjbHVkZWRQb3J0cwogICAgICAgICAgICApCgogICAgICAgICAgICBbaW50W11dICRFeGNsdWRlZFBvcnRzID0gJEV4Y2x1ZGVkUG9ydHMuU3BsaXQoIiwiKQoKICAgICAgICAgICAgZm9yZWFjaCAoJHggaW4gJEV4Y2x1ZGVkUG9ydHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICRwb3J0TGlzdC5SZW1vdmUoJHgpCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIFdyaXRlLVBvcnRzY2FuT3V0CiAgICAgICAgewogICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJTZXROYW1lPSJDb21tZW50IildIFtzdHJpbmddICRjb21tZW50LAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyU2V0TmFtZT0iSG9zdE91dCIpXSBbc3RyaW5nXSAkb3V0aG9zdCwKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUsIFBhcmFtZXRlclNldE5hbWU9Ikhvc3RPdXQiKV0gW2Jvb2xdICRpc1VwLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyU2V0TmFtZT0iSG9zdE91dCIpXSAkb3BlblBvcnRzLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSwgUGFyYW1ldGVyU2V0TmFtZT0iSG9zdE91dCIpXSAkY2xvc2VkUG9ydHMsCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlLCBQYXJhbWV0ZXJTZXROYW1lPSJIb3N0T3V0IildICRmaWx0ZXJlZFBvcnRzLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcigpXSBbYm9vbF0gJFNraXBEaXNjb3ZlcnksCiAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCldIFtTeXN0ZW0uSU8uU3RyZWFtV3JpdGVyXSAkZ3JlcFN0cmVhbSwKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoKV0gW1N5c3RlbS5YbWwuWG1sV3JpdGVyXSAkeG1sU3RyZWFtLAogICAgICAgICAgICAgICAgW1BhcmFtZXRlcigpXSBbU3lzdGVtLklPLlN0cmVhbVdyaXRlcl0gJHJlYWRhYmxlU3RyZWFtCgogICAgICAgICAgICApCiAgICAgICAgICAgIHN3aXRjaCAoJFBTQ21kbGV0LlBhcmFtZXRlclNldE5hbWUpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJDb21tZW50IgogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICBXcml0ZS1WZXJib3NlICRjb21tZW50CgogICAgICAgICAgICAgICAgICAgIGlmICgkZ3JlcFN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAkZ3JlcFN0cmVhbS5Xcml0ZUxpbmUoIiMgIiArICRjb21tZW50KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHhtbFN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQ29tbWVudCgkY29tbWVudCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRyZWFkYWJsZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0uV3JpdGVMaW5lKCRjb21tZW50KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICJIb3N0T3V0IgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRvUG9ydCA9IFtzdHJpbmddOjpqb2luKCIsIiwgJG9wZW5Qb3J0cy5Ub0FycmF5KCkpCiAgICAgICAgICAgICAgICAgICAgJGNQb3J0ID0gW3N0cmluZ106OmpvaW4oIiwiLCAkY2xvc2VkUG9ydHMuVG9BcnJheSgpKQogICAgICAgICAgICAgICAgICAgICRmUG9ydCA9IFtzdHJpbmddOjpqb2luKCIsIiwgJGZpbHRlcmVkUG9ydHMuVG9BcnJheSgpKQoKICAgICAgICAgICAgICAgICAgICBpZiAoJGdyZXBTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAgICAjZm9yIGdyZXBzdHJlYW0gdXNlIHRhYnMgLSBjYW4gYmUgdWdseSwgYnV0IGVhc2llciBmb3IgcmVnZXgKICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGlzVXAgLWFuZCAhJFNraXBEaXNjb3ZlcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRncmVwU3RyZWFtLndyaXRlbGluZSgiSG9zdDogJG91dGhvc3RgdFN0YXR1czogVXAiKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNVcCAtb3IgJFNraXBEaXNjb3ZlcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkb1BvcnQgLW5lICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0ud3JpdGVsaW5lKCJIb3N0OiAkb3V0aG9zdGB0T3BlbiBQb3J0czogJG9Qb3J0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkY1BvcnQgLW5lICIiKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0ud3JpdGVsaW5lKCJIb3N0OiAkb3V0aG9zdGB0Q2xvc2VkIFBvcnRzOiAkY1BvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRmUG9ydCAtbmUgIiIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ3JlcFN0cmVhbS53cml0ZWxpbmUoIkhvc3Q6ICRvdXRob3N0YHRGaWx0ZXJlZCBQb3J0czogJGZQb3J0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCEkU2tpcERpc2NvdmVyeSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0ud3JpdGVsaW5lKCJIb3N0OiAkb3V0aG9zdGB0U3RhdHVzOiBEb3duIikKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoJHhtbFN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlU3RhcnRFbGVtZW50KCJIb3N0IikKCiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoImlkIiwgJG91dGhvc3QpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghJFNraXBEaXNjb3ZlcnkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaXNVcCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoIlN0YXR1cyIsICJVcCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoIlN0YXR1cyIsICJEb3ducyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlU3RhcnRFbGVtZW50KCJQb3J0cyIpCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJHAgaW4gJG9wZW5Qb3J0cykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS53cml0ZXN0YXJ0RWxlbWVudCgiUG9ydCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQXR0cmlidXRlU3RyaW5nKCJpZCIsIFtzdHJpbmddJHApCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlQXR0cmlidXRlU3RyaW5nKCJzdGF0ZSIsICJvcGVuIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVFbmRFbGVtZW50KCkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHAgaW4gJGNsb3NlZFBvcnRzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLndyaXRlc3RhcnRFbGVtZW50KCJQb3J0IikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoImlkIiwgW3N0cmluZ10kcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVBdHRyaWJ1dGVTdHJpbmcoInN0YXRlIiwgImNsb3NlZCIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlRW5kRWxlbWVudCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yZWFjaCAoJHAgaW4gJGZpbHRlcmVkUG9ydHMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0ud3JpdGVzdGFydEVsZW1lbnQoIlBvcnQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygiaWQiLCBbc3RyaW5nXSRwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygic3RhdGUiLCAiZmlsdGVyZWQiKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUVuZEVsZW1lbnQoKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLldyaXRlRW5kRWxlbWVudCgpCiAgICAgICAgICAgICAgICAgICAgICAgICR4bWxTdHJlYW0uV3JpdGVFbmRFbGVtZW50KCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKCRyZWFkYWJsZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCJQb3JzY2FuLnBzMSBzY2FuIHJlcG9ydCBmb3IgJG91dGhvc3QiKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGlzVXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoIkhvc3QgaXMgdXAiKQogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoJGlzVXAgLW9yICRTa2lwRGlzY292ZXJ5KSB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtLndyaXRlbGluZSgoInswLC0xMH17MSwwfSIgLWYgIlBPUlQiLCAiU1RBVEUiKSkKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbaW50W11dJGFsbHBvcnRzID0gJG9wZW5Qb3J0cyArICRjbG9zZWRQb3J0cyArICRmaWx0ZXJlZFBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRwIGluICgkYWxscG9ydHN8IFNvcnQtT2JqZWN0KSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoJG9wZW5Qb3J0cy5Db250YWlucygkcCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtLndyaXRlbGluZSgoInswLC0xMH17MSwwfSIgLWYgJHAsICJvcGVuIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2VpZiAoJGNsb3NlZFBvcnRzLkNvbnRhaW5zKCRwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCgiezAsLTEwfXsxLDB9IiAtZiAkcCwgImNsb3NlZCIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYgKCRmaWx0ZXJlZFBvcnRzLkNvbnRhaW5zKCRwKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCgiezAsLTEwfXsxLDB9IiAtZiAkcCwgImZpbHRlcmVkIikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlaWYoISRTa2lwRGlzY292ZXJ5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0ud3JpdGVsaW5lKCJIb3N0IGlzIERvd24iKQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS53cml0ZWxpbmUoIiIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAjZnVuY3Rpb24gZm9yIFBvd2Vyc2hlbGwgdjIuMCB0byB3b3JrCiAgICAgICAgZnVuY3Rpb24gQ29udmVydC1Td2l0Y2h0b0Jvb2wKICAgICAgICB7CiAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSAkc3dpdGNoVmFsdWUKICAgICAgICAgICAgKQogICAgICAgICAgICBJZiAoJHN3aXRjaFZhbHVlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gJFRydWUKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJEZhbHNlCiAgICAgICAgfQoKICAgICAgICB0cnkKICAgICAgICB7CgogICAgICAgICAgICBbYm9vbF0gJFNraXBEaXNjb3ZlcnkgPSBDb252ZXJ0LVN3aXRjaHRvQm9vbCAoJFNraXBEaXNjb3ZlcnkpCiAgICAgICAgICAgIFtib29sXSAkUGluZ09ubHkgPSBDb252ZXJ0LVN3aXRjaHRvQm9vbCAoJFBpbmdPbmx5KQogICAgICAgICAgICBbYm9vbF0gJHF1aWV0ICA9IENvbnZlcnQtU3dpdGNodG9Cb29sICgkcXVpZXQpCiAgICAgICAgICAgIFtib29sXSAkRm9yY2VPdmVyd3JpdGUgID0gQ29udmVydC1Td2l0Y2h0b0Jvb2wgKCRGb3JjZU92ZXJ3cml0ZSkKCiAgICAgICAgICAgICMjIyMjIyMjIwogICAgICAgICAgICAjcGFyc2UgYXJndW1lbnRzCiAgICAgICAgICAgICMjIyMjIyMjIwoKICAgICAgICAgICAgW0Vudmlyb25tZW50XTo6Q3VycmVudERpcmVjdG9yeT0oR2V0LUxvY2F0aW9uIC1QU1Byb3ZpZGVyIEZpbGVTeXN0ZW0pLlByb3ZpZGVyUGF0aAoKICAgICAgICAgICAgaWYgKCRQc0NtZGxldC5QYXJhbWV0ZXJTZXROYW1lIC1lcSAiY21kSG9zdHMiKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBmb3JlYWNoKCRoIGluICRIb3N0cykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBQYXJzZS1Ib3N0cygkaCkgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUGFyc2UtSUxIb3N0cygkSG9zdEZpbGUpIHwgT3V0LU51bGwKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkRXhjbHVkZUhvc3RzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBFeGNsdWRlLUhvc3RzKCRFeGNsdWRlSG9zdHMpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCgkVG9wUG9ydHMgLWFuZCAkUG9ydHMpIC1vciAoJFRvcFBvcnRzIC1hbmQgJFBvcnRGaWxlKSkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhyb3cgIkNhbm5vdCBzZXQgdG9wUG9ydHMgd2l0aCBvdGhlciBzcGVjaWZpYyBwb3J0cyIKICAgICAgICAgICAgfQogICAgICAgICAgICBpZigkUG9ydHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFBhcnNlLVBvcnRzIC1Qb3J0cyAkUG9ydHMgLXBMaXN0ICRwb3J0TGlzdCB8IE91dC1OdWxsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJFBvcnRGaWxlKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBQYXJzZS1JcFBvcnRzKCRQb3J0RmlsZSkgfCBPdXQtTnVsbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKCRwb3J0TGlzdC5Db3VudCAtZXEgMCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgaWYgKCRUb3BQb3J0cykKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBHZXQtVG9wUG9ydCgkVG9wUG9ydHMpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAjaWYgdGhlIHBvcnRzIHN0aWxsIGFyZW4ndCBzZXQsIGdpdmUgdGhlIGRlZnRhdWx0LCB0b3AgNTAgcG9ydHMKICAgICAgICAgICAgICAgICAgICBHZXQtVG9wUG9ydCg1MCkgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkRXhjbHVkZWRQb3J0cykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgUmVtb3ZlLVBvcnRzIC1FeGNsdWRlZFBvcnRzICRFeGNsdWRlZFBvcnRzIHwgT3V0LU51bGwKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYoJFQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAoJFQpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgNSB7JG5Ib3N0cz0zMDsgICRUaHJlYWRzID0gMTAwMDsgJFRpbWVvdXQgPSA3NTAgfQogICAgICAgICAgICAgICAgICAgIDQgeyRuSG9zdHM9MjU7ICAkVGhyZWFkcyA9IDEwMDA7ICRUaW1lb3V0ID0gMTIwMCB9CiAgICAgICAgICAgICAgICAgICAgMyB7JG5Ib3N0cz0yMDsgICRUaHJlYWRzID0gMTAwOyAgJFRpbWVvdXQgPSAyNTAwIH0KICAgICAgICAgICAgICAgICAgICAyIHskbkhvc3RzPTE1OyAgJFRocmVhZHMgPSAzMjsgICAkVGltZW91dCA9IDMwMDAgfQogICAgICAgICAgICAgICAgICAgIDEgeyRuSG9zdHM9MTA7ICAkVGhyZWFkcyA9IDMyOyAgICRUaW1lb3V0ID0gNTAwMCB9CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93ICJJbnZhbGlkIFQgcGFyYW1ldGVyIgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGdyZXBTdHJlYW0gPSAkbnVsbAogICAgICAgICAgICAkeG1sU3RyZWFtID0gJG51bGwKICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtID0gJG51bGwKCiAgICAgICAgICAgIGlmKCRBbGxmb3JtYXRzT3V0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBpZiAoJEdyZXBPdXQgLW9yICRYbWxPdXQgLW9yICRSZWFkYWJsZU91dCkgewogICAgICAgICAgICAgICAgICAgICBXcml0ZS1XYXJuaW5nICJCb3RoIC1vQSBzcGVjaWZpZWQgd2l0aCBvdGhlciBvdXRwdXQuLi4gZ29pbmcgdG8gaWdub3JlIC1vRy8tb04vLW9YIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJEdyZXBPdXQgPSAkQWxsZm9ybWF0c091dCArICIuZ25tYXAiCiAgICAgICAgICAgICAgICAkWG1sT3V0ID0gJEFsbGZvcm1hdHNPdXQgKyAiLnhtbCIKICAgICAgICAgICAgICAgICRSZWFkYWJsZU91dCA9ICRBbGxmb3JtYXRzT3V0ICsgIi5ubWFwIgogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkR3JlcE91dCkgewogICAgICAgICAgICAgICAgaWYgKCEkRm9yY2VPdmVyd3JpdGUgLWFuZCAoVGVzdC1QYXRoICRHcmVwT3V0KSkgewogICAgICAgICAgICAgICAgICAgIHRocm93ICJFcnJvcjogJEFsbGZvcm1hdHNPdXQgYWxyZWFkeSBleGlzdHMuIEVpdGhlciBkZWxldGUgdGhlIGZpbGUgb3Igc3BlY2lmeSB0aGUgLWYgZmxhZyIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICRncmVwU3RyZWFtID0gW1N5c3RlbS5JTy5TdHJlYW1Xcml0ZXJdICRHcmVwT3V0CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCRSZWFkYWJsZU91dCkgewogICAgICAgICAgICAgICAgaWYgKCEkRm9yY2VPdmVyd3JpdGUgLWFuZCAoVGVzdC1QYXRoICRSZWFkYWJsZU91dCkpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAiRXJyb3I6ICRSZWFkYWJsZU91dCBhbHJlYWR5IGV4aXN0cy4gRWl0aGVyIGRlbGV0ZSB0aGUgZmlsZSBvciBzcGVjaWZ5IHRoZSAtZiBmbGFnIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgJHJlYWRhYmxlU3RyZWFtID0gW1N5c3RlbS5JTy5TdHJlYW1Xcml0ZXJdICRSZWFkYWJsZU91dAogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgkWG1sT3V0KSB7CiAgICAgICAgICAgICAgICBpZiAoISRGb3JjZU92ZXJ3cml0ZSAtYW5kIChUZXN0LVBhdGggJFhtbE91dCkpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyAiRXJyb3I6ICRYbWxPdXQgYWxyZWFkeSBleGlzdHMuIEVpdGhlciBkZWxldGUgdGhlIGZpbGUgb3Igc3BlY2lmeSB0aGUgLWYgZmxhZyIKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkeG1sU3RyZWFtID0gICBbU3lzdGVtLnhtbC54bWx3cml0ZXJdOjpDcmVhdGUoW3N0cmluZ10kWG1sT3V0KQogICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZVN0YXJ0RG9jdW1lbnQoKQogICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZVN0YXJ0RWxlbWVudCgiUG9ydHNjYW5ydW4iKQogICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5Xcml0ZUF0dHJpYnV0ZVN0cmluZygidmVyc2lvbiIsICR2ZXJzaW9uKQoKICAgICAgICAgICAgfQoKICAgICAgICAgICAgUGFyc2UtUG9ydHMgLVBvcnRzICREaXNjb3ZlcnlQb3J0cyAtcExpc3QgJGhvc3RQb3J0TGlzdCB8IE91dC1OdWxsCgogICAgICAgICAgICAkc3RhcnRkYXRlID0gR2V0LURhdGUKICAgICAgICAgICAgJG15SW52b2NhdGlvbkxpbmUgPSAkUFNDbWRsZXQuTXlJbnZvY2F0aW9uLkxpbmUKICAgICAgICAgICAgJHN0YXJ0TXNnID0gIkludm9rZS1Qb3J0c2Nhbi5wczEgdiR2ZXJzaW9uIHNjYW4gaW5pdGlhdGVkICRzdGFydGRhdGUgYXM6ICRteUludm9jYXRpb25MaW5lIgoKICAgICAgICAgICAgI1RPRE8gZGVhbCB3aXRoIG91dHB1dAogICAgICAgICAgICBXcml0ZS1Qb3J0c2Nhbk91dCAtY29tbWVudCAkc3RhcnRNc2cgLWdyZXBTdHJlYW0gJGdyZXBTdHJlYW0gLXhtbFN0cmVhbSAkeG1sU3RyZWFtIC1yZWFkYWJsZVN0cmVhbSAkcmVhZGFibGVTdHJlYW0KCiAgICAgICAgICAgICNjb252ZXJ0aW5nIGJhY2sgZnJvbSBpbnQgYXJyYXkgZ2l2ZXMgc29tZSBhcmd1bWVudCBlcnJvciBjaGVja2luZwogICAgICAgICAgICAkc1BvcnRMaXN0ID0gW3N0cmluZ106OmpvaW4oIiwiLCAkcG9ydExpc3QpCiAgICAgICAgICAgICRzSG9zdFBvcnRMaXN0ID0gW3N0cmluZ106OmpvaW4oIiwiLCAkaG9zdFBvcnRMaXN0KQoKICAgICAgICAgICAgIyMjIyMjIyMKICAgICAgICAgICAgI1BvcnQgU2NhbiBDb2RlIC0gcnVuIG9uIGEgcGVyIGhvc3QgYmFzaXMKICAgICAgICAgICAgIyMjIyMjIyMKICAgICAgICAgICAgJHBvcnRTY2FuQ29kZSA9IHsKICAgICAgICAgICAgICAgIHBhcmFtICgKICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSldIFtzdHJpbmddICR0aG9zdCwKICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSldW2Jvb2xdICRTa2lwRGlzY292ZXJ5LAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV1bYm9vbF0gJFBpbmdPbmx5LAogICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoIE1hbmRhdG9yeSA9ICRUcnVlKV1baW50XSAkVGltZW91dCwKICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSldICRQb3J0TGlzdCwKICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKCBNYW5kYXRvcnkgPSAkVHJ1ZSldICRob3N0UG9ydExpc3QsCiAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlciggTWFuZGF0b3J5ID0gJFRydWUpXVtpbnRdICRtYXh0aHJlYWRzKQogICAgICAgICAgICAgICAgUHJvY2VzcwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgJG9wZW5Qb3J0cyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAogICAgICAgICAgICAgICAgJGNsb3NlZFBvcnRzID0gTmV3LU9iamVjdCBTeXN0ZW0uQ29sbGVjdGlvbnMuQXJyYXlMaXN0CiAgICAgICAgICAgICAgICAkZmlsdGVyZWRQb3J0cyA9IE5ldy1PYmplY3QgU3lzdGVtLkNvbGxlY3Rpb25zLkFycmF5TGlzdAoKICAgICAgICAgICAgICAgICRzb2NrZXRzID0gQHt9CiAgICAgICAgICAgICAgICAkdGltZW91dHMgPSBOZXctT2JqZWN0IEhhc2h0YWJsZQoKICAgICAgICAgICAgICAgICNzZXQgbWF4aW11bSAkYXN5bmMgdGhyZWFkcwogICAgICAgICAgICAgICAgJGZUaHJlYWRzID0gTmV3LU9iamVjdCBpbnQKICAgICAgICAgICAgICAgICRhVGhyZWFkcyA9IE5ldy1PYmplY3QgaW50CiAgICAgICAgICAgICAgICBbU3lzdGVtLlRocmVhZGluZy5UaHJlYWRQb29sXTo6R2V0TWF4VGhyZWFkcyhbcmVmXSRmVGhyZWFkcywgW3JlZl0kYVRocmVhZHMpIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgIFtTeXN0ZW0uVGhyZWFkaW5nLlRocmVhZFBvb2xdOjpTZXRNYXhUaHJlYWRzKCRmdGhyZWFkcywkbWF4dGhyZWFkcykgfCBPdXQtTnVsbAoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIE5ldy1TY3JpcHRCbG9ja0NhbGxiYWNrIHsKICAgICAgICAgICAgICAgICAgICBwYXJhbSgKICAgICAgICAgICAgICAgICAgICAgICAgW3BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUpXQogICAgICAgICAgICAgICAgICAgICAgICBbVmFsaWRhdGVOb3ROdWxsT3JFbXB0eSgpXQogICAgICAgICAgICAgICAgICAgICAgICBbc2NyaXB0YmxvY2tdJENhbGxiYWNrCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgICAgICAjdGFrZW4gZnJvbSBodHRwOi8vd3d3Lm5pdm90Lm9yZy9ibG9nL3Bvc3QvMjAwOS8xMC8wOS9Qb3dlclNoZWxsMjBBc3luY2hyb25vdXNDYWxsYmFja3NGcm9tTkVUCiAgICAgICAgICAgICAgICAgICAgaWYgKC1ub3QgKCJDYWxsYmFja0V2ZW50QnJpZGdlIiAtYXMgW3R5cGVdKSkgewogICAgICAgICAgICAgICAgICAgICAgICBBZGQtVHlwZSBAIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNpbmcgU3lzdGVtOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBzZWFsZWQgY2xhc3MgQ2FsbGJhY2tFdmVudEJyaWRnZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1YmxpYyBldmVudCBBc3luY0NhbGxiYWNrIENhbGxiYWNrQ29tcGxldGUgPSBkZWxlZ2F0ZSB7IH07CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGUgQ2FsbGJhY2tFdmVudEJyaWRnZSgpIHt9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaXZhdGUgdm9pZCBDYWxsYmFja0ludGVybmFsKElBc3luY1Jlc3VsdCByZXN1bHQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYWxsYmFja0NvbXBsZXRlKHJlc3VsdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgQXN5bmNDYWxsYmFjayBDYWxsYmFjawogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2V0IHsgcmV0dXJuIG5ldyBBc3luY0NhbGxiYWNrKENhbGxiYWNrSW50ZXJuYWwpOyB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaWMgc3RhdGljIENhbGxiYWNrRXZlbnRCcmlkZ2UgQ3JlYXRlKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tFdmVudEJyaWRnZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KIkAKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRicmlkZ2UgPSBbQ2FsbGJhY2tFdmVudEJyaWRnZV06OkNyZWF0ZSgpCiAgICAgICAgICAgICAgICAgICAgUmVnaXN0ZXItT2JqZWN0RXZlbnQgLUlucHV0T2JqZWN0ICRicmlkZ2UgLUV2ZW50TmFtZSBDYWxsYmFja0NvbXBsZXRlIC1BY3Rpb24gJENhbGxiYWNrIHwgT3V0LU51bGwKCiAgICAgICAgICAgICAgICAgICAgJGJyaWRnZS5DYWxsYmFjawoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBUZXN0LVBvcnQgewoKICAgICAgICAgICAgICAgICAgICBQYXJhbSAoCiAgICAgICAgICAgICAgICAgICAgICAgIFtQYXJhbWV0ZXIoTWFuZGF0b3J5ID0gJFRydWUpXSBbU3RyaW5nXSAkaCwKICAgICAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtpbnRdICRwLAogICAgICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW2ludF0gJHRpbWVvdXQKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICRwQWRkcmVzcyA9IFtTeXN0ZW0uTmV0LklQQWRkcmVzc106OlBhcnNlKCRoKQogICAgICAgICAgICAgICAgICAgICAgICAkc29ja2V0c1skcF0gPSBuZXctb2JqZWN0IFN5c3RlbS5OZXQuU29ja2V0cy5UY3BDbGllbnQgJHBBZGRyZXNzLkFkZHJlc3NGYW1pbHkKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGNhdGNoIHsKICAgICAgICAgICAgICAgICAgICAgICAgI3dlJ3JlIGFzc3VtaW5nIHRoaXMgaXMgYSBob3N0IG5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgJHNvY2tldHNbJHBdID0gbmV3LW9iamVjdCBTeXN0ZW0uTmV0LlNvY2tldHMuVGNwQ2xpZW50CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAkc2NyaXB0QmxvY2tBc1N0cmluZyA9IEAiCgogICAgICAgICAgICAgICAgICAgICAgICAjc29tZXdoYXQgb2YgYSByYWNlIGNvbmRpdGlvbiB3aXRoIHRoZSB0aW1lb3V0LCBidXQgSSBkb24ndCB0aGluayBpdCBtYXR0ZXJzCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggYCRzb2NrZXRzWyRwXSAtbmUgYCROVUxMKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWAkdGltZW91dHNbJHBdLkRpc3Bvc2VkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR0aW1lb3V0c1skcF0uRGlzcG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgYCRzdGF0dXMgPSBgJHNvY2tldHNbJHBdLkNvbm5lY3RlZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChgJHN0YXR1cyAtZXEgYCRUcnVlKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICN3cml0ZS1ob3N0ICIkcCBpcyBvcGVuIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkb3BlblBvcnRzLkFkZCgkcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjd3JpdGUtaG9zdCAiJHAgaXMgY2xvc2VkIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkY2xvc2VkUG9ydHMuQWRkKCRwKQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkc29ja2V0c1skcF0uQ2xvc2UoKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBgJHNvY2tldHMuUmVtb3ZlKCRwKQogICAgICAgICAgICAgICAgICAgICAgICB9CiJACiAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXRDYWxsYmFjayA9IEAiCiAgICAgICAgICAgICAgICAgICAgICAgICN3cml0ZS1ob3N0ICIkcCBpcyBmaWx0ZXJlZCIKICAgICAgICAgICAgICAgICAgICAgICAgYCRzb2NrZXRzWyRwXS5DbG9zZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYCR0aW1lb3V0c1skcF0uRGlzcG9zZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGAkdGltZW91dHNbJHBdLkRpc3Bvc2UoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYCRmaWx0ZXJlZFBvcnRzLkFkZCgkcCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBgJHNvY2tldHMuUmVtb3ZlKCRwKQoiQAoKICAgICAgICAgICAgICAgICAgICAkdGltZW91dENhbGxiYWNrID0gW3NjcmlwdGJsb2NrXTo6Q3JlYXRlKCR0aW1lb3V0Q2FsbGJhY2spCgogICAgICAgICAgICAgICAgICAgICR0aW1lb3V0c1skcF0gPSBOZXctT2JqZWN0IFN5c3RlbS5UaW1lcnMuVGltZXIKICAgICAgICAgICAgICAgICAgICBSZWdpc3Rlci1PYmplY3RFdmVudCAtSW5wdXRPYmplY3QgJHRpbWVvdXRzWyRwXSAtRXZlbnROYW1lIEVsYXBzZWQgLUFjdGlvbiAkdGltZW91dENhbGxiYWNrIHwgT3V0LU51bGwKICAgICAgICAgICAgICAgICAgICAkdGltZW91dHNbJHBdLkludGVydmFsID0gJHRpbWVvdXQKICAgICAgICAgICAgICAgICAgICAkdGltZW91dHNbJHBdLkVuYWJsZWQgPSAkdHJ1ZQoKICAgICAgICAgICAgICAgICAgICAkbXlzY3JpcHRibG9jayA9IFtzY3JpcHRibG9ja106OkNyZWF0ZSgkc2NyaXB0QmxvY2tBc1N0cmluZykKICAgICAgICAgICAgICAgICAgICAkeCA9ICRzb2NrZXRzWyRwXS5iZWdpbkNvbm5lY3QoJGgsICRwLChOZXctU2NyaXB0QmxvY2tDYWxsYmFjaygkbXlzY3JpcHRibG9jaykpICwgJG51bGwpCgogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFBvcnRTY2FuLUFsaXZlCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUGFyYW0gKAogICAgICAgICAgICAgICAgICAgICAgICBbUGFyYW1ldGVyKE1hbmRhdG9yeSA9ICRUcnVlKV0gW1N0cmluZ10gJGgKICAgICAgICAgICAgICAgICAgICApCgogICAgICAgICAgICAgICAgICAgIFRyeQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICNwaW5nCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkaG9zdFBvcnRMaXN0LkNvbnRhaW5zKC0xKSkKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBpbmcgPSBuZXctb2JqZWN0IFN5c3RlbS5OZXQuTmV0d29ya0luZm9ybWF0aW9uLlBpbmcKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwUmVzdWx0ID0gJHBpbmcuc2VuZCgkaCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkcFJlc3VsdC5TdGF0dXMgLWVxICJTdWNjZXNzIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJFRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmb3JlYWNoKCRQb3J0IGluICRob3N0UG9ydExpc3QpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkUG9ydCAtbmUgLTEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVGVzdC1Qb3J0IC1oICRoIC1wICRQb3J0IC10aW1lb3V0ICRUaW1lb3V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgIGRvIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1NaWxsaSAxMDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJG9wZW5Qb3J0cy5Db3VudCAtZ3QgMCkgLW9yICgkY2xvc2VkUG9ydHMuQ291bnQgLWd0IDApKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRUcnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgV2hpbGUgKCRzb2NrZXRzLkNvdW50IC1ndCAwKQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgQ2F0Y2gKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJFeGNlcHRpb24gdHJ5aW5nIHRvIGhvc3Qgc2NhbiAkaCIKICAgICAgICAgICAgICAgICAgICAgICAgV3JpdGUtRXJyb3IgJF8uRXhjZXB0aW9uLk1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJEZhbHNlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gUG9ydHNjYW4tUG9ydAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFBhcmFtICgKICAgICAgICAgICAgICAgICAgICAgICAgW1BhcmFtZXRlcihNYW5kYXRvcnkgPSAkVHJ1ZSldIFtTdHJpbmddICRoCiAgICAgICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgICAgICBbc3RyaW5nW11dJFBvcnRzID0gQCgpCgogICAgICAgICAgICAgICAgICAgIGZvcmVhY2goJFBvcnQgaW4gJFBvcnRsaXN0KQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgVHJ5CiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRlc3QtUG9ydCAtaCAkaCAtcCAkUG9ydCAtdGltZW91dCAkVGltZW91dAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIENhdGNoCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICJFeGNlcHRpb24gdHJ5aW5nIHRvIHNjYW4gJGggcG9ydCAkUG9ydCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLUVycm9yICRfLkV4Y2VwdGlvbi5NZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgW2Jvb2xdICRob3N0UmVzdWx0ID0gJEZhbHNlCgogICAgICAgICAgICAgICAgaWYoISRTa2lwRGlzY292ZXJ5KQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIFtib29sXSAkaG9zdFJlc3VsdCA9IFBvcnRTY2FuLUFsaXZlICR0aG9zdAogICAgICAgICAgICAgICAgICAgICRvcGVuUG9ydHMuY2xlYXIoKQogICAgICAgICAgICAgICAgICAgICRjbG9zZWRQb3J0cy5jbGVhcigpCiAgICAgICAgICAgICAgICAgICAgJGZpbHRlcmVkUG9ydHMuQ2xlYXIoKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYoKCEkUGluZ09ubHkpIC1hbmQgKCRob3N0UmVzdWx0IC1vciAkU2tpcERpc2NvdmVyeSkpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgUG9ydHNjYW4tUG9ydCAkdGhvc3QKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHdoaWxlICgkc29ja2V0cy5Db3VudCAtZ3QgMCkgewogICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1NaWxsaSA1MDAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gQCgkaG9zdFJlc3VsdCwgJG9wZW5Qb3J0cywgJGNsb3NlZFBvcnRzLCAkZmlsdGVyZWRQb3J0cykKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgIyB0aGUgb3V0ZXIgbG9vcCBpcyB0byBmbHVzaCB0aGUgbG9vcC4KICAgICAgICAgICAgIyBPdGhlcndpc2UgR2V0LUpvYiB8IFdhaXQtSm9iIGNvdWxkIGNsb2csIGV0YwoKICAgICAgICAgICAgW2ludF0kc2F2ZUl0ZXJhdGlvbiA9IDAKICAgICAgICAgICAgW2ludF0kY29tcHV0ZXJzRG9uZT0wCiAgICAgICAgICAgIFtpbnRdJHVwSG9zdHM9MAogICAgICAgICAgICB3aGlsZSAoKCRzYXZlSXRlcmF0aW9uICogJFN5bmNGcmVxKSAtbHQgJGhvc3RMaXN0LkNvdW50KQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgR2V0LUpvYiB8IFJlbW92ZS1Kb2IgLUZvcmNlCiAgICAgICAgICAgICAgICAkc0luZGV4ID0gKCRzYXZlSXRlcmF0aW9uKiRTeW5jRnJlcSkKICAgICAgICAgICAgICAgICRlSW5kZXggPSAoKCRzYXZlSXRlcmF0aW9uKzEpKiRTeW5jRnJlcSktMQoKICAgICAgICAgICAgICAgIGZvcmVhY2ggKCRpSG9zdCBpbiAkaG9zdExpc3RbJHNJbmRleC4uJGVJbmRleF0pCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgJGN0ciA9IEAoR2V0LUpvYiAtc3RhdGUgUnVubmluZykKICAgICAgICAgICAgICAgICAgICB3aGlsZSAoJGN0ci5Db3VudCAtZ2UgJG5Ib3N0cykKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXJ0LVNsZWVwIC1NaWxsaXNlY29uZHMgJFNsZWVwVGltZXIKICAgICAgICAgICAgICAgICAgICAgICAgJGN0ciA9IEAoR2V0LUpvYiAtc3RhdGUgUnVubmluZykKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICRjb21wdXRlcnNEb25lKysKICAgICAgICAgICAgICAgICAgICBpZighJG5vUHJvZ3Jlc3NNZXRlcikKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIFdyaXRlLVByb2dyZXNzIC1zdGF0dXMgIlBvcnQgU2Nhbm5pbmciIC1BY3Rpdml0eSAkc3RhcnRNc2cgLUN1cnJlbnRPcGVyYXRpb24gInN0YXJ0aW5nIGNvbXB1dGVyICRjb21wdXRlcnNEb25lIiAgLVBlcmNlbnRDb21wbGV0ZSAoJGNvbXB1dGVyc0RvbmUgLyAkaG9zdExpc3QuQ291bnQgKiAxMDApCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBTdGFydC1Kb2IgLVNjcmlwdEJsb2NrICRwb3J0U2NhbkNvZGUgLU5hbWUgJGlIb3N0IC1Bcmd1bWVudExpc3QgQCgkaUhvc3QsICRTa2lwRGlzY292ZXJ5LCAkUGluZ09ubHksICRUaW1lb3V0LCAkcG9ydExpc3QsICRob3N0UG9ydExpc3QsICRUaHJlYWRzKSAgfCBPdXQtTnVsbAogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIEdldC1Kb2IgfCBXYWl0LUpvYiB8IE91dC1OdWxsCgogICAgICAgICAgICAgICAgZm9yZWFjaCAoJGpvYiBpbiBHZXQtSm9iKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICRqb2JPdXQgPSBAKFJlY2VpdmUtSm9iICRqb2IpCiAgICAgICAgICAgICAgICAgICAgW2Jvb2xdJGhvc3RVcCA9ICRqb2JPdXRbMF0KICAgICAgICAgICAgICAgICAgICAkam9iTmFtZSA9ICRqb2IuTmFtZQoKICAgICAgICAgICAgICAgICAgICAkb3BlblBvcnRzID0gJGpvYk91dFsxXQogICAgICAgICAgICAgICAgICAgICRjbG9zZWRQb3J0cyA9ICRqb2JPdXRbMl0KICAgICAgICAgICAgICAgICAgICAkZmlsdGVyZWRQb3J0cyA9ICRqb2JPdXRbM10KCiAgICAgICAgICAgICAgICAgICAgaWYoJGhvc3RVcCkgewogICAgICAgICAgICAgICAgICAgICAgICAkdXBIb3N0cyArKwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgaWYgKCEkcXVpZXQpCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBpZigkb3Blbil7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZigkb3BlblBvcnRzKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdERhdGUgPSBHZXQtRGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqID0gTmV3LU9iamVjdCBTeXN0ZW0uT2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhvc3RPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVwcm9wZXJ0eSAtTmFtZSBIb3N0bmFtZSAtVmFsdWUgJGpvYk5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGFsaXZlIC1WYWx1ZSAkaG9zdFVwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhvc3RPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVwcm9wZXJ0eSAtTmFtZSBvcGVuUG9ydHMgLVZhbHVlICRvcGVuUG9ydHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGNsb3NlZFBvcnRzIC1WYWx1ZSAkY2xvc2VkUG9ydHMKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGZpbHRlcmVkUG9ydHMgLVZhbHVlICRmaWx0ZXJlZFBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhvc3RPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVQcm9wZXJ0eSAtTmFtZSBmaW5pc2hUaW1lIC1WYWx1ZSAkaG9zdERhdGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2Nhbm5lZEhvc3RMaXN0ICs9ICRob3N0b2JqCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdERhdGUgPSBHZXQtRGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhvc3RPYmogPSBOZXctT2JqZWN0IFN5c3RlbS5PYmplY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRob3N0T2JqIHwgQWRkLU1lbWJlciAtTWVtYmVyVHlwZSBOb3RlcHJvcGVydHkgLU5hbWUgSG9zdG5hbWUgLVZhbHVlICRqb2JOYW1lCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGFsaXZlIC1WYWx1ZSAkaG9zdFVwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIG9wZW5Qb3J0cyAtVmFsdWUgJG9wZW5Qb3J0cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGhvc3RPYmogfCBBZGQtTWVtYmVyIC1NZW1iZXJUeXBlIE5vdGVwcm9wZXJ0eSAtTmFtZSBjbG9zZWRQb3J0cyAtVmFsdWUgJGNsb3NlZFBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZXByb3BlcnR5IC1OYW1lIGZpbHRlcmVkUG9ydHMgLVZhbHVlICRmaWx0ZXJlZFBvcnRzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaG9zdE9iaiB8IEFkZC1NZW1iZXIgLU1lbWJlclR5cGUgTm90ZVByb3BlcnR5IC1OYW1lIGZpbmlzaFRpbWUgLVZhbHVlICRob3N0RGF0ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjYW5uZWRIb3N0TGlzdCArPSAkaG9zdG9iagogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBXcml0ZS1Qb3J0c2Nhbk91dCAtb3V0aG9zdCAkam9iTmFtZSAtaXNVcCAkaG9zdFVwIC1vcGVuUG9ydHMgJG9wZW5Qb3J0cyAtY2xvc2VkUG9ydHMgJGNsb3NlZFBvcnRzIC1maWx0ZXJlZFBvcnRzICRmaWx0ZXJlZFBvcnRzIC1ncmVwU3RyZWFtICRncmVwU3RyZWFtIC14bWxTdHJlYW0gJHhtbFN0cmVhbSAtcmVhZGFibGVTdHJlYW0gJHJlYWRhYmxlU3RyZWFtIC1Ta2lwRGlzY292ZXJ5ICRTa2lwRGlzY292ZXJ5CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCRncmVwU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAgICAgJGdyZXBTdHJlYW0uZmx1c2goKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCR4bWxTdHJlYW0pIHsKICAgICAgICAgICAgICAgICAgICAkeG1sU3RyZWFtLmZsdXNoKCkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmKCRyZWFkYWJsZVN0cmVhbSkgewogICAgICAgICAgICAgICAgICAgICRyZWFkYWJsZVN0cmVhbS5mbHVzaCgpCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJHNhdmVJdGVyYXRpb24gKysKICAgICAgICAgICAgfQoKICAgICAgICAgICAgJGVuZGRhdGUgPSBHZXQtRGF0ZQogICAgICAgICAgICAkdG90YWx0aW1lID0gKCRlbmRkYXRlIC0gJHN0YXJ0ZGF0ZSkuVG90YWxTZWNvbmRzCiAgICAgICAgICAgICRlbmRNc2cgPSAiUG9ydCBzY2FuIGNvbXBsZXRlIGF0ICRlbmRkYXRlICgkdG90YWx0aW1lIHNlY29uZHMpIgogICAgICAgICAgICBpZiAoISRTa2lwRGlzY292ZXJ5KSB7CiAgICAgICAgICAgICAgICAkZW5kTXNnICs9ICIsICR1cEhvc3RzIGhvc3RzIGFyZSB1cCIKICAgICAgICAgICAgfQoKICAgICAgICAgICAgV3JpdGUtUG9ydHNjYW5PdXQgLWNvbW1lbnQgJGVuZE1zZyAtZ3JlcFN0cmVhbSAkZ3JlcFN0cmVhbSAteG1sU3RyZWFtICR4bWxTdHJlYW0gLXJlYWRhYmxlU3RyZWFtICRyZWFkYWJsZVN0cmVhbQoKICAgICAgICAgICAgaWYoJGdyZXBTdHJlYW0pIHsKICAgICAgICAgICAgICAgICRncmVwU3RyZWFtLkNsb3NlKCkKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoJHhtbFN0cmVhbSkgewogICAgICAgICAgICAgICAgJHhtbFN0cmVhbS5DbG9zZSgpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYoJHJlYWRhYmxlU3RyZWFtKSB7CiAgICAgICAgICAgICAgICAkcmVhZGFibGVTdHJlYW0uQ2xvc2UoKQogICAgICAgICAgICB9CgogICAgICAgICAgICByZXR1cm4gJHNjYW5uZWRIb3N0TGlzdAoKICAgICAgICB9CiAgICAgICAgQ2F0Y2gKICAgICAgICB7CiAgICAgICAgICAgIFdyaXRlLUVycm9yICRfLkV4Y2VwdGlvbi5NZXNzYWdlOwogICAgICAgIH0KICAgIH0KfQo=
